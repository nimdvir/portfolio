/*! 20240613-38-RELEASE */

!function(){let t=!1,e=100;const n=(()=>{let t=!1;const e=.6;return n=>{try{if(t)return;const o=TRC.DistanceFromArticle.measure(e);if(!o)return;const r=o.containerWithShortestDistFromArticle.distance,i=o.nonRelatedContentHeight;"function"==typeof n&&(n("distance_from_article","reported",`${i}`,`${r}`),t=!0)}catch(t){__trcError("Error in reportArticleDistanceFromFeed",t)}}})();function o(n=.6){if(t)return;const o=r(n);if(!o)return;const i=o.containerWithShortestDistFromArticle.distance,c=o.nonRelatedContentHeight,l=i+c;l<(e=TRCImpl.global["distance-violation-threshold"]||e)?t=!0:T(o.articleElement,l)}function r(t=.6){const e=TRC.ArticleDetection.detectArticle(t);if(!e||!e.articleElement)return;const{articleElement:n,taboolaContainers:o,lowestContainer:r}=e,a=l(n,r),u=R()?s(a):0,f=o.filter(t=>i(t,a));let d=f.map(t=>({container:t,distance:c(t,a)}));const h=d.every(t=>t.distance<=0);h?d.forEach(t=>{t.distance=Math.abs(t.distance)}):d=d.filter(t=>t.distance>0);const g=d.sort((t,e)=>t.distance-e.distance).shift();return g?{articleElement:n,containerWithShortestDistFromArticle:g,nonRelatedContentHeight:u}:void 0}function i(t,e){const n=i(t),o=i(e);return!r(n,o);function r(t,e){return t.x2<e.x1||e.x2<t.x1}function i(t){const e=E(t),n=e+t.offsetWidth,o={x1:e,x2:n};return o}}function c(t,e){const n=p(e)+e.offsetHeight,o=p(t);return o-n}function l(t,e){let n;return t.contains(e)&&(n=b(t,e)),n||t}function s(t){if(!t)return 0;const e=d(t),{childNodes:n}=t;let o=null,r=!1;for(let i=n.length-1;i>=0;i--){const t=n[i],c=d(t);if(m(c,e)||g(r,t)){o=t;break}if(h(t)){const e=a(t);e&&(r=!0)}if(f(t)){if(!c)continue;o=t;break}}return Math.round(u(t,o))}function a(t){const e=document.createRange();e.selectNodeContents(t);const n=e.getBoundingClientRect();return n.height}function u(t,e){if(!t||!e)return 0;const n=t.getBoundingClientRect().bottom,o=e.getBoundingClientRect().bottom;return n-o}function f(t){return""!==t.textContent.trim()}function d(t){return t.offsetHeight}function h(t){return t.nodeType===Node.TEXT_NODE}function g(t,e){return t&&e.nodeType===Node.ELEMENT_NODE}function m(t,e){const n=C();return t>e*n}function C(){const t=.5,e=TRCImpl.global["major-part-of-article-coeff"],n=e&&e>0&&e<1;return n?e:t}function R(){return TRCImpl.global["enable-article-end-dst-violation"]}function p(t){return t.getBoundingClientRect().top+window.pageYOffset}function E(t){return t.getBoundingClientRect().left+window.pageXOffset}function T(n,o){const r={distance:o,articleClasses:n.className,articleTag:n.nodeName,threshold:e},i={event_type:"END_OF_ARTICLE_MEASUREMENT",event_state:"REPORTED",event_value:JSON.stringify(r)};TRCImpl.sendEvent("supply-feature",{d:JSON.stringify(i)},null),TRC.util.isPercentEnabled(TRCImpl.global,"take-screenshot-on-violation")&&TRC.ModuleLoader.load("screenshot-capture",TRC.screenshotCaputre,function(){TRC.screenshotCaputre.init(document.body,{keepImages:!0})}.trcBind(this)),t=!0}function b(t,e){const n=A(t,e);return D(t,n)}function A(t,e){for(let n=0;n<t.children.length;++n)if(t.children[n].contains(e))return t.children[n]}function D(t,e){let n=e.previousElementSibling;for(;n;){const t=TRC.ArticleDetection.getAllTextLengthInElement(n);if(t)return n;n=n.previousElementSibling}}TRC.DistanceFromArticle={measureAndReport:o,measure:r,reportArticleDistanceFromFeed:n,calculateNonRelatedContentHeight:s},window._trcIsUTactive&&(TRC.DistanceFromArticle.report=T)}();