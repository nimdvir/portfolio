var ftPID,TEST_MODE=!1,LEGACY_EVENTS=!0,TICK_INTERVAL=100,DEV_MODE=!1,VIEWABLE_IMPRESSION=!0,TESTING=!0;!function(){function a(i,e){e=e||window;function t(){s||(s=!0,n.initAdVisibility(i))}var n=this,o=(n.placementId=i.pID||i.placement&&i.placement.id||"",n.creativeId=i.creativeID||i.creative&&i.creative.id||"",n.creativeWidth=i.width||i.creative&&i.creative.width||"",n.creativeHeight=i.height||i.creative&&i.creative.height||"",e.navigator.userAgent),r=e.navigator.platform,s=!1;if(n.window=e,n.document=e.document,n.FF=/fox/.test(o),n.IE=/MSIE/.test(o)||/\(Windows NT [0-9]{1,2}\.[0-9]\; Trident\/[0-9]\.[0-9];/.test(o),n.edgeVersion=+(/edge.(\d+)/i.exec(o)||["","0"]).pop(),n.ios=/iP(ad|od|hone)/.test(o),n.safari=n.ios||/safari/i.test(o)&&!/chrome/i.test(o)&&!/android/i.test(o)&&!/edge/i.test(o),n.safariVersion=n.safari?(/Version.(\d+)/.exec(o)||["0"]).pop():0,n.isMobile=function(){function e(e){return(RegExp(e+"[/ ](\\d+(?:[\\._]\\d+)*)").exec(o)||[""]).pop().replace(/_/g,".")||!1}var t="iP"===r.slice(0,2)&&e("OS"),i=~o.search(/MSIE|Trident|Edge/);return!!(!i&&e("Android")||t||i&&~o.indexOf("Windows Phone"))},n.statBaseURL=i.statBaseURL,n.guid=i.guid||i.GUID,n.confID=i.confID,n.iframe=e!==e.top,n.xdom=!1,n.iframe)try{e.top.document.getElementsByTagName("head")}catch(e){n.xdom=!0}if(n.viewableConversion=i.viewableConversion,n.api=i.api&&!(i.api.bridge===i.api.fallbackAPI||i.api._BRIDGE===i.api.fallbackAPI),n.impressionTypes={viewable:"202",undetectable:"270",rendered:"271",invalid:"272",nonRenderingDevice:"273"},n.replaceMacros=function(e){return i.replaceMacros(e)},n.stateUrl="https://ad-events.flashtalking.com/state/"+n.placementId+";"+n.creativeId+";"+(i.confID||"")+";<STATE_CODE>;[%IMPRESSIONID%]/?cachebuster=[RANDOM]",n.viewableImpressionURL=n.viewableConversion?i.viewableImpressionURL:"",n.width=n.currentWidth=parseInt(n.creativeWidth,10),n.height=n.currentHeight=parseInt(n.creativeHeight,10),n.isMobile()?n.viewableImpressionThreshold=.5:n.width*n.height<242500?n.viewableImpressionThreshold=i.viewableImpressionThreshold:n.viewableImpressionThreshold=.6*i.viewableImpressionThreshold,n.viewableImpressionTime=0,n.apiListenersAdded=!1,n.viewableImpressionMAX=i.viewableImpressionTime,n.customDefinition=i.customDefinition,n.pixelModifiers=n.getPixelModifiers(n.viewableImpressionThreshold),n.visibleCount=0,n.visibleFired=!1,n.fired310=!1,n.target=n.xdom?e.document.getElementById(i.adId):e.parent.document.getElementById(i.adId)||e.frameElement,n.initialVisibility=n.visibility.HIDDEN,n.lastVisibility=n.initialVisibility,n.currentStep=0,n.lastStep=(new Date).getTime(),n.lastTick=(new Date).getTime(),n.backgroundTimeSinceLastStep=0,n.backgroundTimeSinceLastTick=0,n.timeSentToBackground=0,n.secure=i.secure,n.firedImpressions={},n.viewableImpression=!1,n.undetectableImpression=!1,n.previousVisibility=0,n.currentStepInfo={visible:0,partial:0,hidden:0,undetectable:0},n.active=!0,n.dispatchEvent=function(e,t){i.dispatchEvent(e,t)},i.firedRenderedImpression&&(n.firedImpressions[n.impressionTypes.rendered]=!0),n.ios&&e.addEventListener("scroll",function(){a.prototype.lastScroll=Date.now()},!1),n.validateRenderFor("rendered"),n.xdom)if(void 0!==e.IntersectionObserver)n.ioInitialise(),n.detect=n.ioDetect;else if(n.edgeVersion&&n.edgeVersion<14)n.detect=n.ieXDomDetect;else{if(!n.FF&&!n.safari)return n.undetectableImpression=!0,n.fireStat(this.event.AD_UNDETECTABLE),n.fireImpression(n.impressionTypes.undetectable),void n.dispatchEvent("advisibility",!1);n.rafInitialise(),n.detect=n.rafDetect}n.validateRenderFor("invalid"),n.checkNonRenderingDevice(),i.addEventListener("adonpage",t),i.addEventListener("backup",t)}a.prototype.event={AD_STARTS_VISIBLE:"301",AD_STARTS_PARTIAL_VISIBLE:"302",AD_MOVES_PARTIAL_TO_VISIBLE:"303",AD_STARTS_NOT_VISIBLE:"304",AD_MOVES_NOT_VISIBLE_TO_PARTIAL:"305",AD_MOVES_NOT_VISIBLE_TO_VISIBLE:"306",AD_MOVES_NOT_VISIBLE_TO_PART_VISIBLE_TO_VISIBLE:"307",AD_UNDETECTABLE:"308",AD_VISIBLE_TIME:"310",AD_PARTIALLY_VISIBLE_TIME:"311",AD_INVISIBLE_TIME:"312"},a.prototype.visibility={VISIBLE:2,PARTIAL:1,HIDDEN:0},a.prototype.lastScroll=0,a.prototype.INTERVAL_ARRAY=[50,175,300,600,1200,3e3],a.prototype.initAdVisibility=function(e,t,i){t=t||this.document||document,i=i||this.window||window;var n=this,t=(n.target=n.target||(n.xdom?t.getElementById(e.adId):i.parent.document.getElementById(e.adId)||i.frameElement),this.detect()),i=this.event.AD_STARTS_NOT_VISIBLE;1!==t||n.customDefinition?0<t&&(i=this.event.AD_STARTS_PARTIAL_VISIBLE):i=this.event.AD_STARTS_VISIBLE,this.fireStat(i),this.lastVisibility=this.initialVisibility=this.getReadableVisibility(t),e.api&&"loading"===e.api.getState()?e.api.addEventListener("ready",function(){n.addListeners(e)}):this.addListeners(e)},a.prototype.pageFoldRepeater=function(){var e=this,t=(new Date).getTime(),i=t-this.lastStep-this.backgroundTimeSinceLastStep,n=t-this.lastTick-this.backgroundTimeSinceLastTick,o=this.detect(),r=this.getReadableVisibility(o);250<n&&(t-this.lastScroll<n?e.ios&&(o=Math.min(this.previousVisibility,o)):(this.viewableImpressionTime=0,e.backgroundTimeSinceLastStep+=Math.max(0,t-this.lastTick),e.backgroundTimeSinceLastTick+=Math.max(0,t-this.lastTick),i=t-this.lastStep-this.backgroundTimeSinceLastStep,n=t-this.lastTick-this.backgroundTimeSinceLastTick)),e.active&&e.target.parentNode&&(this.dispatchEvent("advisibility",100*o),LEGACY_EVENTS&&(this.undetectableImpression?this.currentStepInfo.undetectable+=n:1==o?this.currentStepInfo.visible+=n:0<o?this.currentStepInfo.partial+=n:this.currentStepInfo.hidden+=n,this.customDefinition&&(r===this.visibility.VISIBLE?this.visibleCount+=n:this.visibleCount<this.viewableImpressionMAX&&(this.visibleCount=0),!this.visibleFired&&this.visibleCount>=this.viewableImpressionMAX&&(this.initialVisibility===this.visibility.PARTIAL?this.fireStat(this.event.AD_MOVES_PARTIAL_TO_VISIBLE):this.fireStat(this.event.AD_MOVES_NOT_VISIBLE_TO_PART_VISIBLE_TO_VISIBLE),this.visibleFired=!0)),r>this.lastVisibility&&this.updateVisibility(r),this.currentStep<this.INTERVAL_ARRAY.length&&this.formatTime(i)>=this.INTERVAL_ARRAY[this.currentStep]&&(this.fire310(),this.lastStep=t,this.backgroundTimeSinceLastStep=0,this.currentStep++)),e.viewableConversion&&!this.viewableImpression&&this.viewableImpressionURL&&(o>=this.viewableImpressionThreshold?this.viewableImpressionTime+=n:this.viewableImpressionTime=0,this.viewableImpressionTime>=this.viewableImpressionMAX&&((this.window||window).viewableImpFired=!0,this.validateRenderFor("viewable"))),this.validateRenderFor("rendered"),this.lastTick=t,this.backgroundTimeSinceLastTick=0,this.previousVisibility=o),e.target.parentNode&&(!e.api||e.api&&(e.viewableConversion&&!e.viewableImpression||!e.viewableConversion&&!e.fired310))&&e.active&&setTimeout(function(){e.pageFoldRepeater()},TICK_INTERVAL)},a.prototype.pageVisible=function(e){return"yes"===e||this.waitingForInvalidToTurnValid||"no"!==e&&(!0===this.xdom||!0===this.ios)},a.prototype.log=function(e){var t=this.window||window;DEV_MODE&&t.console&&t.console.log&&t.console.log(e)},a.prototype.error=function(e){if(DEV_MODE)throw Error(e)},a.prototype.addListeners=function(e){var t=this;t.timeSentToBackground=t.pageVisible(e.pageVisible)?0:(new Date).getTime(),t.pageVisible(e.pageVisible)&&t.pageFoldRepeater(),e.addEventListener("visibilitychange",function(e){t.active=t.pageVisible(e),t.active?(t.backgroundTimeSinceLastStep+=t.timeSentToBackground?Math.max(0,(new Date).getTime()-t.timeSentToBackground):0,t.backgroundTimeSinceLastTick+=t.timeSentToBackground?Math.max(0,(new Date).getTime()-t.timeSentToBackground):0):(t.timeSentToBackground=(new Date).getTime(),t.viewableImpressionTime=0),"no"!==e&&t.validateRenderFor("rendered"),t.pageFoldRepeater()})},a.prototype.updateVisibility=function(e){var t;this.lastVisibility===this.visibility.HIDDEN?e===this.visibility.PARTIAL?t=this.event.AD_MOVES_NOT_VISIBLE_TO_PARTIAL:e===this.visibility.VISIBLE&&(t=this.event.AD_MOVES_NOT_VISIBLE_TO_VISIBLE):this.lastVisibility!==this.visibility.PARTIAL||e!==this.visibility.VISIBLE||this.customDefinition||(t=this.event.AD_MOVES_PARTIAL_TO_VISIBLE,this.initialVisibility===this.visibility.HIDDEN&&(t=this.event.AD_MOVES_NOT_VISIBLE_TO_PART_VISIBLE_TO_VISIBLE)),this.lastVisibility=e,void 0!==t&&this.fireStat(t)},a.prototype.getReadableVisibility=function(e){var t=this.visibility.HIDDEN;return this.customDefinition&&e>=this.viewableImpressionThreshold||1===e?t=this.visibility.VISIBLE:0<e&&(t=this.visibility.PARTIAL),t},a.prototype.fractionOf=function(e,t){return Math.max(Math.floor(e/t*100)/100,0)},a.prototype.formatTime=function(e){return Math.max(0,Math.ceil(e/100))},a.prototype.getPlacementsParentDetails=function(){var e=this,t=e.target&&e.target.parentNode&&e.target.parentNode.tagName.toLowerCase(),i=null,n=null;try{n=window.top&&window.top.document}catch(e){n=!1}"body"===t?i=document.body:n&&n.querySelector('[name="ftscript_m'+e.placementId+'"]')?i=n.querySelector('[name="ftscript_m'+e.placementId+'"]').parentNode:e.target&&e.target.parentNode&&(i=e.target.parentNode);var o=i?(t={height:null,width:null},(n=i)&&(e=getComputedStyle(n),o=n.getBoundingClientRect(),"inline"===e.display?(t.height=o.height,t.width=o.width):(t.height=n.clientHeight-(parseFloat(e.paddingTop)+parseFloat(e.paddingBottom)),t.width=n.clientWidth-(parseFloat(e.paddingLeft)+parseFloat(e.paddingRight)))),t):null,n=i?window.getComputedStyle(i):null,e=o?o.width:null;return{height:o?o.height:null,width:e,display:n?n.display:null,visibility:n?n.visibility:null}},a.prototype.validateRenderFor=function(e){var t=this,i=t.getPlacementsParentDetails();switch(e){case"rendered":1<i.height&&1<i.width&&"none"!==i.display&&"hidden"!==i.visibility&&(delete t.waitingForInvalidToTurnValid,t.fireImpression(t.impressionTypes.rendered));break;case"invalid":(i.height<2&&i.width<2||"none"===i.display||"hidden"===i.visibility)&&(t.waitingForInvalidToTurnValid=!0,t.fireImpression(t.impressionTypes.invalid));break;case"viewable":1<i.height&&1<i.width&&(delete t.waitingForInvalidToTurnValid,t.fireImpression(t.impressionTypes.viewable))}},a.prototype.checkNonRenderingDevice=function(){var t=this;try{var e=new window.Image;e.setAttribute("test_image",!0),e.src="data:,";window.setTimeout(function(){void 0!==e.complete&&e.complete||t.fireImpression(t.impressionTypes.nonRenderingDevice,!1)},100)}catch(e){console.warn("Is Image supported?\n",e),t.fireImpression(t.impressionTypes.nonRenderingDevice,!1)}},a.prototype.detect=function(){var e=this.getAdPos(this.target),t=this.getWindowDetails();return this.compare(e,t)},a.prototype.getAdPos=function(e,t){t=t||this.window||window;var e=e.getBoundingClientRect(),t=(this.xdom?t:t.parent).document.documentElement.getBoundingClientRect(),i=this.getWindowDetails(),n=i.scrollLeft&&t.left||0,i=i.scrollTop&&t.top||0;return{x:Math.round(e.left)-n,y:Math.round(e.top)-i,width:e.right-e.left,height:e.bottom-e.top}},a.prototype.getWindowDetails=function(e){e=e||this.window||window;var t={scrollLeft:0,scrollTop:0,height:0,width:0},e=this.xdom?e:e.parent;return e.innerWidth?(t.width=e.innerWidth,t.height=e.innerHeight,t.scrollLeft=e.pageXOffset,t.scrollTop=e.pageYOffset):e.document.documentElement&&e.document.documentElement.clientHeight?(t.width=e.document.documentElement.clientWidth,t.height=e.document.documentElement.clientHeight,t.scrollLeft=e.document.documentElement.scrollLeft,t.scrollTop=e.document.documentElement.scrollTop):e.document.body&&(t.width=e.document.body.clientWidth,t.height=e.document.body.clientHeight,t.scrollLeft=e.document.body.scrollLeft,t.scrollTop=e.document.body.scrollTop),t},a.prototype.compare=function(e,t){var i,n,o,r,s,t={left:t.scrollLeft,right:t.scrollLeft+t.width,top:t.scrollTop,bottom:t.scrollTop+t.height},e={left:e.x,right:e.x+e.width,top:e.y,bottom:e.y+e.height};return t=t,r=((e=e).right-e.left)*(e.bottom-e.top),s=0,function(e,t){switch(!0){case e.top>t.bottom:case e.left>t.right:case e.right<t.left:case e.bottom<t.top:return 1;default:return}}(t,e)||(t=t,e=e,i=Math.max(t.left,e.left),n=Math.min(t.right,e.right),o=Math.max(t.top,e.top),s=(n-i)*(Math.min(t.bottom,e.bottom)-o)),Math.floor(s/r*100)/100},window.ftPageFold_v4=function(e){!0!==e.breakingOut&&new a(e,window)},a.prototype.ieXDomDetect=function(e){var t,i=0,n=this.getPointCheckArray(!0),o=.5===this.viewableImpressionThreshold?9:12,r=this.viewableImpressionThreshold;for(t in n)i+=document.elementFromPoint(n[t].left,n[t].top)?1:0;function s(e,t){return t<1?0:t<e?.1:t<o?r:1}return s(.5===r?5:.5<r?8:.39<r?6:4,i)},a.prototype.ioInitialise=function(){var i=this,e=new window.IntersectionObserver(function(e,t){i.ioIntersectionRatio=e[0].intersectionRatio},{root:null,rootMargin:"0px",threshold:[.05,.1,.15,.2,.25,.3,.35,.4,.45,.5,.55,.6,.65,.7,.75,.8,.85,.9,.95,1,0]});i.ioIntersectionRatio=0,e.observe(i.target)},a.prototype.ioDetect=function(){return this.ioIntersectionRatio},a.prototype.fire310=function(){var e=[this.formatTime(this.currentStepInfo.visible)];e.push(this.formatTime(this.currentStepInfo.partial)),e.push(this.formatTime(this.currentStepInfo.hidden)),e.push(this.formatTime(this.currentStepInfo.undetectable)),this.fireStat("310",e.join("x")),this.currentStepInfo.visible=0,this.currentStepInfo.partial=0,this.currentStepInfo.hidden=0,this.currentStepInfo.undetectable=0,this.fired310=!0},a.prototype.fireImpression=function(e,t){var i,n=this;n.firedImpressions&&!n.firedImpressions[e]&&n.viewableConversion&&"prerender"!==document.visibilityState&&(i=n.replaceMacros(n.stateUrl.replace("<STATE_CODE>",e)),!1===t?((t=document.createElement("script")).setAttribute("src",i),window.document.body.appendChild(t)):(new Image).src=i,n.firedImpressions[e]=!0,e===n.impressionTypes.undetectable&&(n.viewableImpressionFired=!0))},a.prototype.fireStat=function(e,t){var i=[""+this.statBaseURL+this.confID];i.push(e),i.push("0"),i.push(this.guid),i.push(this.random()),t&&i.push(t),this.statBaseURL&&((new Image).src=i.join("-"))},a.prototype.random=function(e){e=e||1e9;return~~(Math.random()*e)},a.prototype.getPixelModifiers=function(e){var t=Math.sqrt(e);return.5===e?[0,.2,.4,.5,.6,.8,1]:[0,1-t,1-e,.5,e,t,1].sort()},a.prototype.getPointCheckArray=function(e){var t=this.target.getBoundingClientRect(),i=this.currentWidth=t.right-t.left-1,n=this.currentHeight=t.bottom-t.top-1,o=this.pixelModifiers.map(function(e){return i*e}),r=this.pixelModifiers.map(function(e){return n*e});return[{id:"0",left:o[0],top:r[1]},{id:"1",left:o[0],top:r[5]},{id:"2",left:o[1],top:r[0]},{id:"3",left:o[1],top:r[6]},{id:"4",left:o[2],top:r[2]},{id:"5",left:o[2],top:r[4]},{id:"6",left:o[3],top:r[3]},{id:"7",left:o[4],top:r[2]},{id:"8",left:o[4],top:r[4]},{id:"9",left:o[5],top:r[0]},{id:"10",left:o[5],top:r[6]},{id:"11",left:o[6],top:r[1]},{id:"12",left:o[6],top:r[5]}].map(function(e){return e.left+=t.left,e.top+=t.top,e})},a.prototype.visiblePercentageFromPixelSample=function(e){var t=this.pointArray,i=0,n=0,o=this.currentWidth,r=this.currentHeight,s=e.length;if(!s)return 0;if(s<3)return.01;for(;s--;)i=Math.max(i,t[parseInt(e[s],10)].left),o=Math.min(o,t[parseInt(e[s],10)].left),n=Math.max(n,t[parseInt(e[s],10)].top),r=Math.min(r,t[parseInt(e[s],10)].top);return Math.floor((i-o)*(n-r)/(this.currentWidth*this.currentHeight)*100)/100},a.prototype.rafInitialise=function(t){var i=this,n=this.document||document;i.pointArray=[],i.RAF_THRESHOLD=500,n.body?i.setupRAFPixels(t):n.addEventListener("readystatechange",function e(){n.removeEventListener("readystatechange",e,!1),i.setupRAFPixels(t)},!1)},a.prototype.setupRAFPixels=function(e){var r=this;r.rafPixel=[],r.rafPixelTimestamps=[],r.pointArray=r.getPointCheckArray();for(var t=0;t<r.pointArray.length;t++)!function(i){r.outputRAFPixel(r.pointArray[i],e),function e(){var t=r.rafPixel[i][0].contentWindow;"loaded"===t.document.readyState||"complete"===t.document.readyState?(r.rafPixelTimestamps[r.pointArray[i].id]=[t.performance.now()],9<r.safariVersion?function i(n){var o=[],e=r.rafPixel[n];function t(e,t){o[e]=t,o[0]&&o[1]&&(i(n),r.rafPixelTimestamps[n]=o)}e[0].contentWindow.requestAnimationFrame(function(e){t(0,e)}),e[1].contentWindow.requestAnimationFrame(function(e){t(1,e)})}(i):t.requestAnimationFrame(function(e){!function t(i,e,n){r.rafPixel[i][0].contentWindow.requestAnimationFrame(function(e){t(i,e,1^n)}),r.rafPixelTimestamps[i][n]=e}(i,e,0)})):r.rafPixel[i][0].addEventListener("load",e,!1)}()}(t)},a.prototype.rafDetect=function(){var e,t,i,n=this,o=[];for(e in n.rafPixelTimestamps)9<n.safariVersion?(i=n.rafPixel[e],t=n.rafPixelTimestamps[e],i[0].contentWindow.performance.now()-t[0]<n.RAF_THRESHOLD&&i[1].contentWindow.performance.now()-t[1]<n.RAF_THRESHOLD&&o.push(e)):(i=(n.rafPixelTimestamps[e][0]+n.rafPixelTimestamps[e][1])/2,n.rafPixel[e][0].contentWindow.performance.now()-i<n.RAF_THRESHOLD&&o.push(e));return n.pointArray=n.checkFlashPixelPositioning(n.getPointCheckArray()),n.visiblePercentageFromPixelSample(o)},a.prototype.checkFlashPixelPositioning=function(e){for(var t=this.pointArray,i=e.length;i--;){var n=this.rafPixel[i][0].parentNode;e[i].top!==t[i].top&&(n.style.top=e[i].top+"px"),e[i].left!==t[i].left&&(n.style.left=e[i].left+"px")}return e},a.prototype.outputRAFPixel=function(e,t){var i,n=this.document||document,o="border:none;width:1px;height:1px;position:absolute;",r="position:absolute;height:1px;width:1px;z-index:-1;overflow:hidden;",n=(r=(r+="top:"+e.top+"px;")+("left:"+e.left+"px;"),n.createElement("div")),r=(n.style.cssText=r,9<this.safariVersion&&(o+="height:8px;",(i=n.appendChild(document.createElement("iframe"))).style.cssText=o+"top:-7px"),n.appendChild(document.createElement("iframe")));r.style.cssText=o+"top:0",this.rafPixel[e.id]=[r,i],this.target.parentNode.appendChild(n)}}();