!function(i){var n={};function r(e){if(n[e])return n[e].exports;var t=n[e]={i:e,l:!1,exports:{}};return i[e].call(t.exports,t,t.exports,r),t.l=!0,t.exports}r.m=i,r.c=n,r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(i,n,function(e){return t[e]}.bind(null,n));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=25)}([function(e,t,i){"use strict";i.d(t,"a",function(){return n});var n={Play:"play",Pause:"pause",Next:"next_video",Previous:"previous_video",Skip:"skip",CancelSkip:"cancel_skip",SoundOn:"sound_on",SoundOff:"sound_off",ProgressBarSeeking:"seek",ReadMoreClick:"read_more_click",CloseFloater:"close_floater",InVideoAreaPlay:"video_area_play",InVideoAreaPause:"video_area_pause",FullScreen:"fullscreen",PlayAd:"play_ad",PauseAd:"pause_ad",SoundOnAd:"sound_on_ad",SoundOffAd:"sound_off_ad",SkipAd:"skip_ad"}},function(e,t,i){"use strict";i.d(t,"e",function(){return sn}),i.d(t,"g",function(){return ln}),i.d(t,"f",function(){return dn}),i.d(t,"h",function(){return un}),i.d(t,"i",function(){return cn}),i.d(t,"o",function(){return f}),i.d(t,"j",function(){return hn}),i.d(t,"c",function(){return fn}),i.d(t,"a",function(){return pn}),i.d(t,"n",function(){return gn}),i.d(t,"d",function(){return mn}),i.d(t,"m",function(){return vn}),i.d(t,"l",function(){return yn}),i.d(t,"k",function(){return En}),i.d(t,"b",function(){return p});var Hi=i(5),n=i(6),Gi=i.n(n),r=0,a=1,o=2;function s(e){return e<420?r:e<560?a:o}function zi(e,t){for(var a,i=this,n=0,r=e,o=t,s=0;s<r.length;s++)r[s].index=s;function l(e){n=e}this.setup=function(){a=o.getHlsActive(),function(){for(var e=0;e<r.length;e++)r[e].f.sort(function(e,t){if(a){if("hls"==e.f&&"hls"!==t.f)return-1;if("hls"!==e.f&&"hls"==t.f)return 1}return e.h-t.h})}()},this.getPlaylist=function(){return r},this.getCurrentVideoIndex=function(){return n},this.forward=function(){l(n==r.length-1?0:n+1)},this.switchToVideoIndex=function(e){l(e)},this.backward=function(){l((0==n?r.length:n)-1)},this.getCurrentVideoObj=function(){return r[n]},this.getCurrentVideoUrl=function(){return this.getFileToPlay().p},this.getCurrentVideoFileName=function(){return r[n].id},this.getCurrentVideoPoster=function(){return this.getVideoPosterByIndex(n)},this.getVideoPosterByIndex=function(e){return r[e].p},this.getTotalVideos=function(){return r.length},this.getFileToPlay=function(){var e,t=this.getCurrentVideoObj(),i=null,n=o.getCurrentResolution(),r=!1;for(e=0;e<t.f.length&&(1080==t.f[e].h&&(t.f[e].h=480),!i||"hls"!=i.f||!a);e++)o.canPlayType(t.f[e].c)&&(i?t.f[e].h==i.h?i=t.f[e]:t.f[e].h>i.h&&t.f[e].h<=n?i=t.f[e]:i.h<=n&&t.f[e].h>n&&!r&&t.f[e].h<=n+180&&(i=t.f[e],r=!0):i=t.f[e]);if(!i)for(e=0;e<t.f.length;e++)o.canPlayType(t.f[e].c)&&(i=t.f[e]);return i},this.isPlaylistFinished=function(){return n==this.getTotalVideos()-1},this.getCurrentVideoDuration=function(){var e=this.getCurrentVideoObj();return e.dur?e.dur:0},this.getCurrentVideoTitle=function(){var e=this.getCurrentVideoObj();return e.t?e.t:""},this.getCurrentVideoLanguage2LettersCode=function(){var e=i.getCurrentVideoObj();return void 0!==e.l?e.l:""},this.getNextVideoIndex=function(){return n==r.length-1?0:n+1}}var Wi=i(3);function Qi(e){e=parseInt(e,10);var t=Math.floor(e/3600)%24,i=Math.floor(e/60)%60,n=Math.floor(e%60)%60;return(t<1?"":(t<10?"0":"")+t+":")+(i<10?"0":"")+i+":"+(n<10?"0":"")+n}function qi(e){var t=document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement;return t&&t==e}function l(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Yi={bgSize:45,bg:"url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2aWV3Qm94PSIwIDAgMjguMDggMzAuNTYiPjxkZWZzPjxzdHlsZT4uY2xzLTF7aXNvbGF0aW9uOmlzb2xhdGU7fS5jbHMtMntmaWxsOiMzZGIxZTU7fS5jbHMtMywuY2xzLTR7bWl4LWJsZW5kLW1vZGU6bXVsdGlwbHk7fS5jbHMtM3tmaWxsOnVybCgjbGluZWFyLWdyYWRpZW50KTt9LmNscy00e2ZpbGw6dXJsKCNsaW5lYXItZ3JhZGllbnQtMik7fS5jbHMtNXtmaWxsOnVybCgjbGluZWFyLWdyYWRpZW50LTMpO308L3N0eWxlPjxsaW5lYXJHcmFkaWVudCBpZD0ibGluZWFyLWdyYWRpZW50IiB4MT0iNDcxLjk2IiB5MT0iOTY1Ljc2IiB4Mj0iNDc2LjQ0IiB5Mj0iOTY1Ljc2IiBncmFkaWVudFRyYW5zZm9ybT0idHJhbnNsYXRlKDk5MS45MiAtNDMwLjY3KSByb3RhdGUoOTApIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHN0b3Agb2Zmc2V0PSIwIiBzdG9wLWNvbG9yPSIjZmZmIi8+PHN0b3Agb2Zmc2V0PSIxIi8+PC9saW5lYXJHcmFkaWVudD48bGluZWFyR3JhZGllbnQgaWQ9ImxpbmVhci1ncmFkaWVudC0yIiB4MT0iLTM0IiB5MT0iOTY1Ljc2IiB4Mj0iLTI5LjUyIiB5Mj0iOTY1Ljc2IiBncmFkaWVudFRyYW5zZm9ybT0ibWF0cml4KDAsIC0xLCAtMSwgMCwgOTkxLjkyLCAtNS4zMykiIHhsaW5rOmhyZWY9IiNsaW5lYXItZ3JhZGllbnQiLz48bGluZWFyR3JhZGllbnQgaWQ9ImxpbmVhci1ncmFkaWVudC0zIiB4MT0iMjMuMzUiIHkxPSIzNC45NSIgeDI9IjUxLjQzIiB5Mj0iMzQuOTUiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj48c3RvcCBvZmZzZXQ9IjAiIHN0b3AtY29sb3I9IiM0MThmY2QiLz48c3RvcCBvZmZzZXQ9IjAuNTMiIHN0b3AtY29sb3I9IiMzZGJhZWIiLz48c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiMyMTQwODAiLz48L2xpbmVhckdyYWRpZW50PjwvZGVmcz48dGl0bGU+ZmluYWxfbG9hZGVyX2xvZ288L3RpdGxlPjxnIGNsYXNzPSJjbHMtMSI+PGcgaWQ9IkxheWVyXzYiIGRhdGEtbmFtZT0iTGF5ZXIgNiI+PHBhdGggY2xhc3M9ImNscy0yIiBkPSJNMjguMiwyNS45NWMtMS4yNC43Mi0xLjQ2LDIuNzItMS40NiwyLjcycy0zLjExLTEuNjUtMy4xNy0yLC40Ny0yLjc5LDEuNzUtMi4zOWExMC42NSwxMC42NSwwLDAsMSwyLjg3LDEuNzJaIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMjMuMzUgLTE5LjY3KSIvPjxwYXRoIGNsYXNzPSJjbHMtMiIgZD0iTTI4LjIsNDRjLTEuMjQtLjcyLTEuNDYtMi43Mi0xLjQ2LTIuNzJzLTMuMTEsMS42NS0zLjE3LDIsLjQ3LDIuNzksMS43NSwyLjM5QTEwLjY1LDEwLjY1LDAsMCwwLDI4LjIsNDRaIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMjMuMzUgLTE5LjY3KSIvPjxwYXRoIGNsYXNzPSJjbHMtMyIgZD0iTTI4LjIsNDRjLTEuMjQtLjcyLTEuNDYtMi43Mi0xLjQ2LTIuNzJzLTMuMTEsMS42NS0zLjE3LDIsLjQ3LDIuNzksMS43NSwyLjM5QTEwLjY1LDEwLjY1LDAsMCwwLDI4LjIsNDRaIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMjMuMzUgLTE5LjY3KSIvPjxwYXRoIGNsYXNzPSJjbHMtNCIgZD0iTTI4LjIsMjUuOTVjLTEuMjQuNzItMS40NiwyLjcyLTEuNDYsMi43MnMtMy4xMS0xLjY1LTMuMTctMiwuNDctMi43OSwxLjc1LTIuMzlhMTAuNjUsMTAuNjUsMCwwLDEsMi44NywxLjcyWiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTIzLjM1IC0xOS42NykiLz48cGF0aCBjbGFzcz0iY2xzLTUiIGQ9Ik01MS40MiwzNC45NWMuNTktLjI2LTE3LjA1LTE1LjI4LTIxLjk1LTE1LjI4aDBjLS43OC4wNi00LjU0LDMuNi01LjQ1LDQuNy0xLjEzLDEuMzctLjQyLDIuMjktLjQyLDIuMjl2MGMuNDItNi4wNywxNi45NCw4LjMyLDE2Ljk0LDguMzJTMjQsNDkuMzQsMjMuNTcsNDMuMjd2MHMtLjcxLjkyLjQyLDIuMjljLjkxLDEuMSw0LjY2LDQuNjQsNS40NSw0LjdoMEMzNC4zNyw1MC4yMiw1MiwzNS4yMSw1MS40MiwzNC45NVoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0yMy4zNSAtMTkuNjcpIi8+PC9nPjwvZz48L3N2Zz4=)",spinnerSize:90,em:2.813,border:2.813*.11},Ki=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.playSpinner=!1,this.playerElement=e}return function(e,t,i){t&&l(e.prototype,t),i&&l(e,i),Object.defineProperty(e,"prototype",{writable:!1})}(t,[{key:"resizeSpinner",value:function(e,t){if(this.isSpinnerExist()){var i=this.playerElement.getElementsByClassName("loader-bg"),n=this.playerElement.getElementsByClassName("loader-bg-image"),r=this.playerElement.getElementsByClassName("loader");i[0].style.setProperty("height",t+"px","important"),i[0].style.width=e+"px",n[0].style.left=(e-Yi.bgSize)/2+"px",n[0].style.top=(t-Yi.bgSize)/2+"px",r[0].style.left=e/2-Yi.bgSize-9+"px",r[0].style.top=t/2-Yi.bgSize-5+"px"}}},{key:"resizeBufferingSpinner",value:function(e,t){if(this.isBufferingSpinnerExist()){var i=this.playerElement.getElementsByClassName("loader-bg-transparent"),n=this.playerElement.getElementsByClassName("loader-bg-image-transparent"),r=this.playerElement.getElementsByClassName("loader-transparent");i[0].style.setProperty("height",t+"px","important"),i[0].style.width=e+"px",n[0].style.left=(e-Yi.bgSize)/2+"px",n[0].style.top=(t-Yi.bgSize)/2+"px",r[0].style.left=e/2-Yi.bgSize-9+"px",r[0].style.top=t/2-Yi.bgSize-5+"px"}}},{key:"startSpinner",value:function(){if(!this.isSpinnerExist()&&(this.playSpinner=!0,this.playSpinner)){this.setLoaderBackground();var e=Object(Hi.b)(this.playerElement);this.resizeSpinner(e.width,e.height)}}},{key:"startBufferingSpinner",value:function(){if(!this.isBufferingSpinnerExist()&&(this.playSpinner=!0,this.playSpinner)){this.setBufferingLoaderBackground();var e=Object(Hi.b)(this.playerElement);this.resizeBufferingSpinner(e.width,e.height)}}},{key:"isSpinnerExist",value:function(){return 0<this.playerElement.getElementsByClassName("loader-bg").length}},{key:"isBufferingSpinnerExist",value:function(){return 0<this.playerElement.getElementsByClassName("loader-bg-transparent").length}},{key:"setLoaderBackground",value:function(){var e=document.createElement("div");e.className="loader-bg";var t=this.setLoaderBackgroundImage();e.appendChild(t);var i=document.createElement("div");i.className="loader",e.appendChild(i),this.playerElement.appendChild(e)}},{key:"setBufferingLoaderBackground",value:function(){var e=document.createElement("div");e.className="loader-bg-transparent";var t=this.setLoaderBufferingBackgroundImage();e.appendChild(t);var i=document.createElement("div");i.className="loader-transparent",e.appendChild(i),this.playerElement.appendChild(e)}},{key:"setLoaderBackgroundImage",value:function(){var e=document.createElement("div");return e.className="loader-bg-image",e}},{key:"setLoaderBufferingBackgroundImage",value:function(){var e=document.createElement("div");return e.className="loader-bg-image-transparent",e}},{key:"stopSpinner",value:function(){this.playSpinner=!1;for(var e=this.playerElement.getElementsByClassName("loader-bg"),t=0;t<e.length;t++)this.playerElement.removeChild(e[t])}},{key:"stopBufferingSpinner",value:function(){this.playSpinner=!1;for(var e=this.playerElement.getElementsByClassName("loader-bg-transparent"),t=0;t<e.length;t++)this.playerElement.removeChild(e[t])}}]),t}();var Xi=i(0);function Ji(){var e,t,i,n,r,a,o,s,l,d,u,c,h,f,p,g,m,v,y,b,w,E,S=!1,A=0,T=0;function L(e){e.children[0].classList.add("trv-with-animation")}function C(e){e.children[0].classList.remove("trv-with-animation")}function k(e,t){r=setTimeout(function(){a=e,A=Date.now(),"right"==e?(b.style.visibility="visible",L(b),k("bottom",n/4*1e3)):"bottom"==e?(w.style.visibility="visible",L(w),k("left",n/4*1e3)):(y.style.visibility="visible",L(y))},t)}function x(){t=setInterval(function(){i--,c.innerText="NEXT VIDEO IN "+i},1e3),e=setTimeout(function(){P(),s.forward()},1e3*i)}function P(){!function(){S=!1;var e=l.getElementsByClassName("trv-autoskip-style");e[0]&&l.removeChild(e[0]);var t=l.getElementsByClassName("trv-autoskip-container");if(t[0])t[0].style.visibility="hidden";else{var i=l.getElementsByClassName("trv-autoskip-container-compact");i[0]&&(i[0].style.visibility="hidden")}E&&(E.style.visibility="hidden",C(E));b&&(b.style.visibility="hidden",C(b));w&&(w.style.visibility="hidden",C(w));y&&(y.style.visibility="hidden",C(y))}(),I(),s.unsubscribe(Wi.g,D),s.unsubscribe(yn,R),s.unsubscribe(vn,O),s.unsubscribe(pn,P),s.unsubscribe(Wi.c,M),v=!1,s.hideAutoSkip(),g=!1}function I(){clearTimeout(e),clearInterval(t),clearTimeout(r)}function O(){if(!v){v=!0;var e=l.getElementsByClassName("trv-autoskip-style")[0];e&&l.removeChild(e);var t=n/4*1e3-(T-A);"top"==a?k("right",t):"right"==a?k("bottom",t):"bottom"==a&&k("left",t),c&&x()}}function R(){if(v&&s.IsPlayerViewable()){v=!1,T=Date.now(),I(),clearTimeout(r);var e=document.createElement("style");e.className="trv-autoskip-style",e.innerText="top"==a?"#"+p+" .trv-autoskip-line-top > div {animation-play-state: paused !important;}":"right"==a?"#"+p+" .trv-autoskip-line-right > div {animation-play-state: paused !important;}":"bottom"==a?"#"+p+" .trv-autoskip-line-bottom > div {animation-play-state: paused !important;}":"#"+p+" .trv-autoskip-line-left > div {animation-play-state: paused !important;}",l.appendChild(e)}}this.initAutoSkipElements=function(e){u=e.getElementsByClassName("trv-autoskip-container")[0],d=e.getElementsByClassName("trv-autoskip-background")[0],f=e.getElementsByClassName("trv-autoskip-poster")[0],c=e.getElementsByClassName("autoskip-btn-blue")[0],h=e.getElementsByClassName("autoskip-btn-gray")[0],E=e.getElementsByClassName("trv-autoskip-line-top")[0],b=e.getElementsByClassName("trv-autoskip-line-right")[0],w=e.getElementsByClassName("trv-autoskip-line-bottom")[0],y=e.getElementsByClassName("trv-autoskip-line-left")[0]},this.initAutoSkip=function(e,t){l=(s=t).getPlayerElement(),p=l.id,i=n=e,T=0,o=t.isMobile(),m=t.getPlaylist()},this.onBiddingSessionEndsCallback=function(){g&&(this.showAutoSkip(),g=!1)},this.showAutoSkip=function(){if(!S){if(s.isBiddingSessionRunning())return s.subscribe(Wi.g,D),void(g=!0);s.unsubscribe(Wi.g,D),s.subscribe(Wi.c,M),S=!0;var e=m.getNextVideoIndex();f.src=m.getVideoPosterByIndex(e),this.isAutoSkipCompactMode()?this.setAutoSkipToCompactMode():this.setAutoSkipToExpandedMode(),c.innerText="NEXT VIDEO IN "+i,h.innerText="CANCEL",A=Date.now(),k("right",n/4*1e3),a="top",u.style.visibility="visible",E.style.visibility="visible",L(E),x(),c.onclick=function(e){e.stopPropagation(),s.handlePlayerInteraction(Xi.a.Skip),s.setIgnorePlaylistEnd(),s.forward(),P()},h.onclick=function(e){e.stopPropagation(),s.handlePlayerInteraction(Xi.a.CancelSkip),P()},s.subscribe(cn,function(){this.isAutoSkipCompactMode()?this.setAutoSkipToCompactMode():this.setAutoSkipToExpandedMode()}.bind(this)),s.subscribe(pn,function(){P()}.bind(this)),s.subscribe(yn,R),s.subscribe(vn,O),v=!0}},this.setAutoSkipToCompactMode=function(){u.className="trv-autoskip-container-compact",d.className="trv-autoskip-background-compact",c.className="autoskip-btn autoskip-btn-blue-compact autoskip-btn-compact",h.className="autoskip-btn autoskip-btn-gray-compact autoskip-btn-compact",f.className="trv-autoskip-poster-compact"},this.setAutoSkipToExpandedMode=function(){u.className="trv-autoskip-container",d.className="trv-autoskip-background",c.className="autoskip-btn autoskip-btn-blue",h.className="autoskip-btn autoskip-btn-gray",f.className="trv-autoskip-poster"},this.removeAutoSkip=function(){P()},this.isAutoSkipCompactMode=function(){return Object(Hi.b)(l).width<400||o},this.canStartBiddingSession=function(){return!S},this.onAdStarted=function(){S&&P()};var D=this.onBiddingSessionEndsCallback.bind(this),M=this.onAdStarted.bind(this)}function Zi(){this.promiseSubscribers=[],this.eventSubscribers=[],this.playerElement=null,this.eventsWithPromises=[mn,Wi.e],this.setPlayerElement=function(e){this.playerElement=e},this.subscribe=function(e,t){this.eventsWithPromises.includes(e)?this.subscribePromise(e,t):(this.eventSubscribers.push({eventName:e,callback:t}),this.playerElement.addEventListener(e,t))},this.removeSubscribers=function(){this.promiseSubscribers=[];for(var e=0;e<this.eventSubscribers.length;e++)this.playerElement.removeEventListener(this.eventSubscribers[e].eventName,this.eventSubscribers[e].callback)},this.subscribePromise=function(e,t){void 0===this.promiseSubscribers[e]&&(this.promiseSubscribers[e]=[]),this.promiseSubscribers[e].push(t)},this.DispatchPromiseEvent=function(a,o){return new Promise(function(e,t){var i=[];if(void 0!==this.promiseSubscribers[a]){for(var n=this.promiseSubscribers[a].length-1;0<=n;n--){var r=this.promiseSubscribers[a][n](o);r&&i.push(r)}i.length?Promise.all(i).then(function(){e()}).catch(function(){t()}):e()}else e()}.bind(this))},this.unsubscribe=function(e,t){this.playerElement.removeEventListener(e,t)}}function $i(e){this.subscribersService=e.getEventSubscribersService(),this.playerObject=e}function d(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t,i){return t&&d(e.prototype,t),i&&d(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}$i.prototype.on=function(e,t){this.subscribersService.subscribe(e,t)},$i.prototype.off=function(e,t){this.subscribersService.unsubscribe(e,t)},$i.prototype.play=function(){this.playerObject.play()},$i.prototype.pause=function(){this.playerObject.pause()},$i.prototype.forward=function(){this.playerObject.forward()},$i.prototype.backwards=function(){this.playerObject.backward()},$i.prototype.getWidgetId=function(){return this.playerObject.getWidgetId()},$i.prototype.mute=function(){return this.playerObject.mute()},$i.prototype.unmute=function(){return this.playerObject.unmute()},$i.prototype.disableAutoskip=function(){return this.playerObject.disableAutoSkip()},$i.prototype.setConsentString=function(e){this.playerObject.setConsentString(e)},$i.prototype.setGdprApplies=function(e){this.playerObject.setGdprApplies(e)};var c={mpeg4:function(e,t){var a=e.getVideo(),o=!1;this.currentSrc=t.p,this.type="mpeg4",this.loadVideoSource=function(r){return new Promise(function(e){o=!1;function t(){o=!0,clearInterval(i),a.removeEventListener("loadeddata",n),a.removeEventListener("loadedmetadata",n),a.currentTime=r,e()}var i=null,n=function(){t()};a.addEventListener("loadeddata",n),a.addEventListener("loadedmetadata",n),i=setInterval(function(){3<=a.readyState&&t()},500),a.src=this.currentSrc,a.load()}.bind(this))},this.isUrlDifferentThanCurrentUrl=function(e){return a.src&&0<a.src.length?-1==a.src.indexOf(e):!(a.currentSrc&&0<a.currentSrc.length)||-1==a.currentSrc.indexOf(e)},this.play=function(e){if(o)return a.play();this.loadVideoSource(e).then(function(){return a.play()}.bind(this))},this.destroy=function(){}},hls:function(i,e){var t=-1;i.getHlsActive(),this.player=i,this.hlsService=null,this.videoElement=i.getVideo();var n=!1;this.type="hls",this.currentSrc=e.p,this.inLoading=!1,this.enableSavingModeAfterLoading=!1,this.disableSavingModeAfterLoading=!1,this.EnableSavingModeForContent=function(){this.hlsService&&(this.inLoading||this.videoElement.readyState<4?(this.enableSavingModeAfterLoading=!0,window.playerLog("saving mode pending")):this.enableSavingMode())},this.enableSavingMode=function(){window.playerLog("saving mode enabled to level "+this.hlsService.firstLevel),this.hlsService.autoLevelCapping=this.hlsService.firstLevel,this.hlsService.nextLoadLevel=this.hlsService.firstLevel,this.hlsService.startLevel=this.hlsService.firstLevel},this.disableSavingMode=function(){this.hlsService.currentLevel!=t&&(window.playerLog("saving mode disabled to level "+t),this.hlsService.autoLevelCapping=t,this.hlsService.nextLoadLevel=t,this.hlsService.startLevel=t)},this.DisableSavingModeForContent=function(){this.hlsService&&(window.playerLog("ready state",this.videoElement.readyState),this.inLoading||this.videoElement.readyState<4?(window.playerLog("disable saving mode pending"),this.disableSavingModeAfterLoading=!0):this.disableSavingMode())},this.calculateMaxLevel=function(e){!i.isSavingModeForContentRunning()&&this.hlsService&&(t=s(e),this.hlsService.autoLevelCapping=t,1==i.getFirstTimeHLSInit()&&i.setHLSCurrentLevel(t))},i.subscribe("windowResize",function(e){this.hlsService&&this.calculateMaxLevel(e.detail.playerWidth)}.bind(this)),this.setupHlsManager=function(){window.playerLog("setup hls manager");var e=i.getPlayerDimension(),t={startLevel:1==i.getFirstTimeHLSInit()?s(e.width):i.getHLSCurrentLevel(),maxMaxBufferLength:8,maxBufferLength:8,autoStartLoad:!1,testBandwidth:!1,debug:!1};this.hlsService=new Gi.a(t),this.hlsService.on(Gi.a.Events.LEVEL_SWITCHING,function(e,t){void 0!==t.level&&(window.playerLog("switching level "+t.level),i.setHLSCurrentLevel(t.level))}),this.calculateMaxLevel(e.width),i.isSavingModeForContentRunning()&&this.EnableSavingModeForContent(),i.setFirstTimeHLSInit(!1)},this.isUrlDifferentThanCurrentUrl=function(e){return!(this.videoElement.src.includes("blob")&&this.hlsService&&this.hlsService.url)||-1==this.hlsService.url.indexOf(e)},this.loadVideoSource=function(i){return window.playerLog("load video source"),new Promise(function(t){this.hlsService||this.setupHlsManager(),!this.hlsService||n||this.inLoading||(this.inLoading=!0,this.hlsService.once(Gi.a.Events.MEDIA_ATTACHED,function(){window.playerLog("load video source media attached");var e=function(){window.playerLog("load video source manifest loaded"),this.hlsService.once(Gi.a.Events.LEVEL_LOADED,function(){window.playerLog("load video source level loaded"),n=!0,this.inLoading=!1,t()}.bind(this)),i?this.hlsService.startLoad(i):this.hlsService.startLoad(-1)}.bind(this);this.hlsService.once(Gi.a.Events.MANIFEST_LOADED,e),this.hlsService.loadSource(this.currentSrc)}.bind(this)),this.hlsService.attachMedia(this.videoElement))}.bind(this))},this.checkSavingMode=function(){this.enableSavingModeAfterLoading&&(this.enableSavingModeAfterLoading=!1,this.enableSavingMode()),this.disableSavingModeAfterLoading&&(this.disableSavingModeAfterLoading=!1,this.disableSavingMode())},this.play=function(i){return window.playerLog("hls play"),new Promise(function(e,t){window.playerLog("videoloaded",n),n?this.inLoading||this.videoElement.play().then(function(){this.checkSavingMode(),e()}.bind(this)).catch(function(e){window.playerLog("catch play 2",e),t()}):(window.playerLog("loadVideo"),this.loadVideoSource(i).then(function(){this.videoElement.play().then(function(){window.playerLog("then play"),this.player.setPlayerContentStatus(ln),this.checkSavingMode(),e()}.bind(this)).catch(function(){window.playerLog("catch play"),t()})}.bind(this)))}.bind(this))},this.destroyHLSService=function(){this.inLoading=!1,n=!1,window.playerLog("destroy hls service"),this.hlsService&&(i.setFirstTimeHLSInit(!0),this.hlsService.destroy(),this.hlsService=null)},this.destroy=function(){window.playerLog("Destroy hls manager"),this.destroyHLSService()},this.setupHlsManager()}},en=u(function e(t,i){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),new c[t.f](i,t)}),tn=i(2);function nn(e){var t=e.elementToTrack,i=e.threshold,n=void 0===i?.4:i,r=e.callback,a={root:null,rootMargin:"0px",threshold:n};this.elementToTrack=t,this.delayTimeout=null,this.elementInView=null,this.callback=r,this.observer=new IntersectionObserver(this.onViewabilityCallback.bind(this),a),this.observer.observe(t)}nn.prototype.onViewabilityCallback=function(e,t){window.playerLog("viewability callback",e);var i=e[0];this.elementInView=i.isIntersecting,this.callback&&this.callback(e,t)},nn.prototype.isElementInView=function(){return this.elementInView},nn.prototype.StopObserving=function(){this.observer.unobserve(this.elementToTrack)};var h=i(10);function rn(e){this.player=e,this.currentLoadingTimeout=null,this.posterElement=this.player.getPlayerElements().player.poster,this.onClickBinding=this.onPosterClick.bind(this),this.video=this.player.getVideo(),this.player.subscribe("adStarted",function(){this.Hide()}.bind(this)),this.player.subscribe(mn,function(){return new Promise(function(e){this.Show(),e()}.bind(this))}.bind(this))}rn.prototype.Show=function(){clearTimeout(this.currentLoadingTimeout),this.currentLoadingTimeout=null,this.player.getPlayerContentStatus()&&this.player.getPlayerContentStatus()!=sn||0!=this.video.currentTime?this.currentLoadingTimeout=setTimeout(function(){this.currentLoadingTimeout=null,0==this.video.currentTime&&this.load()}.bind(this),2e3):this.load()},rn.prototype.Hide=function(){this.hide()},rn.prototype.load=function(){var e=this.player.getPlaylist().getCurrentVideoPoster();(function(i){return new Promise(function(e,t){Object(h.b)(i).then(function(){e(i)}.bind(this)).catch(function(){i=i.replace("_2.","_1."),Object(h.b)(i).then(function(){e(i)}).catch(function(){t()})}.bind(this))})})(e).then(function(){this.show(e)}.bind(this)).catch(function(){})},rn.prototype.show=function(e){(this.video.paused||this.video.ended||0==this.video.currentTime)&&(this.posterElement.style.backgroundImage="url('"+e+"')",this.posterElement.style.visibiltiy="visible",this.addPosterEvents())},rn.prototype.hide=function(){window.playerLog("hide poster"),clearTimeout(this.currentLoadingTimeout),this.currentLoadingTimeout=null,this.posterElement.style.backgroundImage="url('')",this.posterElement.style.visibility="hidden",this.removePosterEvents()},rn.prototype.onPosterClick=function(e){this.player.onTogglePlayPauseButtonCallback(e),this.removePosterEvents()},rn.prototype.addPosterEvents=function(){this.posterElement.addEventListener("click",this.onClickBinding)},rn.prototype.removePosterEvents=function(){this.posterElement.removeEventListener("click",this.onClickBinding)};var an=i(11);function on(e){return(on="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var sn=1,ln=2,dn=3,un="playerReady",cn="playerResize",f="windowResize",hn="playerViewabilityChange",fn="containerViewabilityChange",pn="onNewVideo",gn="onVideoTimeUpdate",mn="onNewVideoBeforeVideoChanged",vn="onVideoPlay",yn="onVideoPause",bn="onPlayerDestroyed",wn="onVideoEnd",En="onSoundOff";function p(){var r,e,a,o,s,l,t,d,u,c,h,i,n,f,p,g,m,v,y,b=this,w=400,E=!1,S=!1,A=null,T=null,L=!1,C=0,k=0,x=!1,P=!1,I=null,O=!1,R=!1,D=!1,M=[],B=!1,F=!1,N=null,_=null,U={},V=!1,j=!1,H=!1,G=0,z=null,W=null,Q=!1,q=!1,Y=!1,K=null,X=ct(),J=!1,Z=!0,$=!1,ee=null,te=0,ie=null,ne=null,re=!0,ae=null,oe=null,se=0,le=!1,de=null,ue=0,ce=0,he="",fe="",pe="",ge=!1,me="",ve=!1,ye=!1,be=!1,we=!1,Ee=null,Se=-1,Ae=!0,Te=!1,Le=!1,Ce=!0,ke=!1,xe=null,Pe="",Ie=null,Oe=null,Re=null,De=null,Me=!0,Be=!0,Fe=!1,Ne="",_e="",Ue="",Ve="",je=!0,He=!1,Ge=!1,ze=!1,We=!1,Qe="",qe="",Ye=1,Ke=!0,Xe=!1;function Je(e,t){A.dispatchEvent(new CustomEvent(e,{detail:t}))}function Ze(){rt(),Bt()}function $e(){return new Promise(function(e){function t(){pt(),A.dispatchEvent(new CustomEvent("onContentShown")),e()}ne==dn?(Yt(),t()):ne==sn?(et(),t()):Vi(U.player.mediaVideo).then(function(){ne=ln,Xt(),t()}).catch(function(e){Object(tn.a)("whenPlayingContentAllowedplayVideoElementError",{wid:a},e),ne=sn,et(),t()})})}function et(){xe&&xe.Show(),Yt(),ne=sn}function tt(){ke||(ne=ln,S&&I?I.resumeAd():U.player.mediaVideo.paused&&(Z=!0,$e()))}function it(e){I&&I.isAdLoading()?window.playerLog("pause denied, ad loading"):(ne=dn,window.playerLog("pause video"),S&&I?I.pauseAd():(Yt(),e&&e()))}function nt(){S&&I&&I.skipAd()}function rt(){I&&I.killBiddingSession()}function at(e,t){return void 0!==e?e:t}function ot(){xe&&xe.Hide(),U.buttonsOverlay&&(U.buttonsOverlay.overlay.firstChild.style.display="none"),U.player.mediaControls.style.display="none",A.getElementsByClassName("trv-overlay")[0].style.display="none",fi(),lt()}function st(){ne===ln&&(l.startBufferingSpinner(),U.player.mediaVideo.addEventListener("timeupdate",dt))}function lt(){l.stopBufferingSpinner(),U.player.mediaVideo.removeEventListener("timeupdate",dt)}function dt(){l.stopBufferingSpinner(),U.player.mediaVideo.removeEventListener("timeupdate",dt)}function ut(e,t){l&&l.resizeBufferingSpinner(e,t)}function ct(){return navigator.userAgent.match(/Android|webOS|iPhone|iPad|iPod|BlackBerry|BB|PlayBook|IEMobile|Windows Phone|Kindle|Silk|Opera Mini/i)}function ht(e){var t=function(e){return document.fullscreenEnabled||document.mozFullScreenEnabled||document.webkitFullscreenEnabled||document.msFullscreenEnabled||e.webkitSupportsFullscreen||e.requestFullscreen||e.webkitRequestFullscreen||e.webkitEnterFullScreen||e.mozRequestFullScreen}(e);return le=le&&t,U.player.fullScreen.style.display=le?"inherit":"none",le}function ft(e){e&&"BODY"!=e.tagName&&(e.offsetHeight<2||e.offsetWidth<2||e.id&&0<=e.id.indexOf("div-gpt-ad-")||e.id&&0<=e.id.indexOf("google_ads_iframe"))&&(J?(e.style.width="100%",e.style.height="100%"):(e.style.width=C+"px",e.style.height=k+"px"))}function pt(){L&&(se=U.player.mediaVideo.duration?(U.player.vidDuration.innerHTML=Qi(U.player.mediaVideo.duration),U.player.mediaVideo.duration):(U.player.vidDuration.innerHTML=Qi(z.getCurrentVideoDuration()),z.getCurrentVideoDuration()))}function gt(){var e=z.getCurrentVideoObj(),t=ae||e.lnks;if(t){var i=Lt(t,Math.floor(pi()));return i&&i.url?i:null}return null}function mt(){var e=gt(),t=z.getCurrentVideoObj(),i=!1;if(e){var n;if(void 0!==t.pxl&&void 0!==t.pxl.ctacntclick&&""!=t.pxl.ctacntclick&&(wt(St(t.pxl.ctacntclick)),window.playerLog("notifyPixelsFire","native click")),re)s&&s.notify("click",{widgetId:a,video:U.player.mediaVideo,clickedElement:"native click",url:e.url}),A.dispatchEvent(new CustomEvent("videoLinkOpened",{detail:{videoTitle:z.getCurrentVideoTitle(),playerElementId:A.id,nativeClickURL:null===(n=gt())||void 0===n?void 0:n.url}})),i=!0,window.open(e.url,"_blank");else location.href=e.url;U.player.mediaVideo.paused||(i=!0,Yt())}else if(L){var r=z.getCurrentVideoObj();r.lnks&&(e=Lt(r.lnks,Math.floor(pi())))&&e.url&&(void 0!==e.pxl&&""!=e.pxl&&wt(St(e.pxl)),re?(s&&s.notify("click",{widgetId:a,video:U.player.mediaVideo,clickedElement:"native click",url:e.url}),window.open(e.url,"_blank")):(s&&s.notify("click",{widgetId:a,video:U.player.mediaVideo,clickedElement:"native click",url:e.url}),location.href=e.url),U.player.mediaVideo.paused||(i=!0,Yt()))}return i}function vt(){var e,t="";switch(L&&(t=z.getCurrentVideoLanguage2LettersCode()),t){case"fr":e="Lire l'article";break;case"pt":e="Leia mais";break;case"es":e="Lea el artículo";break;case"id":e="Lihat Artikel";break;case"ja":e="記事を読む";break;case"zh":e="閱讀全文";break;case"he":e="מעבר לכתבה";break;case"nl":e="lees artikel";break;case"de":e="Artikel Lesen";break;case"ru":e="Смотреть";break;case"it":e="leggi di più";break;case"tr":e="İçeriği oku";break;case"ro":e="Citește articolul";break;case"bs":e="Čitaj više";break;case"sr":e="Опширније";break;case"pl":e="Przeczytaj Artykuł";break;case"el":e="Μάθε περισσότερα";break;default:e="Read Article"}return e}function yt(){oe=Object(Hi.b)(A).height}function bt(e){for(var t=""+parseInt(99999999*Math.random(),10);8!==t.length;)t="0"+t;return e+"&cb="+t}function wt(e){if(e=bt(e),"object"!==("undefined"==typeof window?"undefined":on(window))||"undefined"==typeof Image){var t=new XMLHttpRequest;t.open("get",e,!0),t.send()}else{(new Image).src=e}}function Et(){return ne==ln}function St(e){if(r)return r+"?e="+e}function At(){return!L}function Tt(){if(L&&!E&&(E=!0,r&&L)){window.playerLog("fireContentImpression");var e=function(){if(r&&L){var e=z.getCurrentVideoObj();if(void 0!==e.pxl&&void 0!==e.pxl.cnt)return r+"?e="+e.pxl.cnt+"&cb="+(new Date).getTime()}return null}();e&&Object(tn.b)(e)}}function Lt(e,t){for(var i=0;i<e.length;i++){if(e[i].startTime<=t&&null==e[i].endTime)return e[i];if(e[i].startTime<=t&&t<e[i].endTime)return e[i]}return!1}function Ct(){var e=z.getCurrentVideoObj().t,t=A.getElementsByClassName("videoTitle");t[0].setAttribute("title",e),t[0].textContent=e}function kt(e){for(var t=e.relatedTarget;null!=t;){if(t==this)return;t=t.parentNode}Pt()}function xt(){clearTimeout(W)}function Pt(){(X?At():At()||!e&&ne!=sn)||Et()&&(It(),clearTimeout(W),W=setTimeout(function(){Et()&&Ot()},3e3))}function It(){ge=!0,U.buttonsOverlay.overlay.style.display="block",U.buttonsOverlay.overlay.firstChild.style.display="block",U.buttonsOverlay.overlayPlayButton.style.display=ne==dn||ne==sn?"block":"none",U.player.mediaControls.style.display="block",U.player.overlay.style.display="block"}function Ot(){ge=!1,U.buttonsOverlay.overlay.style.display="none",U.buttonsOverlay.overlay.firstChild.style.display="none",U.buttonsOverlay.overlayPlayButton.style.display="none",U.player.mediaControls.style.display="none",U.player.overlay.style.display="none"}function Rt(){e=!0,Pt()}function Dt(){(e=!1)||ne==sn||Et()&&(clearTimeout(W),W=null,Ot())}function Mt(){X||(U.player.mediaControls.addEventListener("mouseenter",xt),U.player.mediaControls.addEventListener("mouseout",kt),A.addEventListener("mouseenter",Rt),A.addEventListener("mousemove",Rt),A.addEventListener("mouseleave",Dt),A.addEventListener("contextmenu",Bi),U.player.overlay.addEventListener("contextmenu",Bi)),U.player.volumeButton.addEventListener("click",Jt),U.player.mediaVideo.addEventListener("ended",li),U.player.mediaVideo.addEventListener("pause",oi),U.player.mediaVideo.addEventListener("volumechange",ai),U.player.mediaVideo.addEventListener("play",ni),U.player.mediaVideo.addEventListener("playing",ri),U.player.mediaVideo.addEventListener("timeupdate",ui),U.player.mediaVideo.addEventListener("waiting",st),U.player.mediaVideo.addEventListener("stalled",st),U.player.mediaVideo.addEventListener("playing",lt),U.player.mediaVideo.addEventListener("canplay",lt),U.player.mediaVideo.addEventListener("canplaythrough",lt),X?U.player.progressBarPadding.addEventListener("click",gi):(U.player.progressBarPadding.addEventListener("mouseup",wi),A.addEventListener("mouseup",Ei),U.player.progressBarPadding.addEventListener("mousemove",Si),A.addEventListener("mousemove",Ai),U.player.progressBarPadding.addEventListener("mousedown",yi),function(){var e=A.getElementsByClassName("trv-progress-bar")[0];e.addEventListener("mouseenter",ki),e.addEventListener("mouseleave",xi)}()),X||(U.player.volumeButton.addEventListener("mouseenter",Pi),U.player.volumeContainer.addEventListener("mouseenter",Pi),U.player.volumeButton.addEventListener("mouseleave",Ii),U.player.volumeContainer.addEventListener("mouseleave",Ii),function(){for(var e=[U.player.volumeBar,U.player.volumeHandle,U.player.volumeContainer],t=0;t<e.length;t++)e[t].addEventListener("mousedown",Ti)}()),function(){var e=U.player.mediaPlayer.getElementsByClassName("togglePlayPause")[0],t=U.player.mediaPlayer.getElementsByClassName("overlay-play-wrapper")[0],i=U.player.mediaPlayer.getElementsByClassName("overlayBtnWrapper")[0],n=U.player.mediaPlayer.getElementsByClassName("video-overlay")[0];e.addEventListener("click",Gt),t.addEventListener("click",Gt),i.addEventListener("click",Ht),n.addEventListener("click",Ht)}(),U.player.mediaVideo.addEventListener("click",Ut),U.player.overlay.addEventListener("click",Ut),ve||(ve=!0,function(){de=document.fullscreenEnabled?A:U.player.mediaVideo;ht(de)&&(U.player.fullScreen.addEventListener("click",Vt),document.addEventListener("fullscreenChange",Nt),document.addEventListener("fullscreenchange",Nt),document.addEventListener("mozfullscreenchange",Nt),document.addEventListener("webkitfullscreenchange",Nt),document.addEventListener("msfullscreenchange",Nt))}()),U.player.truvidLogo.addEventListener("click",Ft)}function Bt(){X||(U.player.mediaControls.removeEventListener("mouseenter",xt),U.player.mediaControls.removeEventListener("mouseout",kt),A.removeEventListener("mouseenter",Rt),A.removeEventListener("mousemove",Rt),A.removeEventListener("mouseleave",Dt),A.removeEventListener("contextmenu",Bi),U.player.overlay.removeEventListener("contextmenu",Bi)),U.player.volumeButton.removeEventListener("click",Jt),U.player.mediaVideo.removeEventListener("pause",oi),U.player.mediaVideo.removeEventListener("ended",li),U.player.mediaVideo.removeEventListener("play",ni),U.player.mediaVideo.removeEventListener("playing",ri),U.player.mediaVideo.removeEventListener("volumechange",ai),U.player.mediaVideo.removeEventListener("timeupdate",ui),U.player.mediaVideo.removeEventListener("waiting",st),U.player.mediaVideo.removeEventListener("stalled",st),U.player.mediaVideo.removeEventListener("playing",lt),U.player.mediaVideo.removeEventListener("canplay",lt),U.player.mediaVideo.removeEventListener("canplaythrough",lt),X?U.player.progressBarPadding.removeEventListener("click",gi):(U.player.progressBarPadding.removeEventListener("mousedown",yi),U.player.progressBarPadding.removeEventListener("mouseup",wi),A.removeEventListener("mouseup",Ei),U.player.progressBarPadding.removeEventListener("mousemove",Si),A.removeEventListener("mousemove",Ai),function(){var e=A.getElementsByClassName("trv-progress-bar")[0];e.removeEventListener("mouseenter",ki),e.removeEventListener("mouseleave",xi)}()),X||(U.player.volumeButton.removeEventListener("mouseenter",Pi),U.player.volumeContainer.removeEventListener("mouseenter",Pi),U.player.volumeButton.removeEventListener("mouseleave",Ii),U.player.volumeContainer.removeEventListener("mouseleave",Ii),function(){for(var e=[U.player.volumeBar,U.player.volumeHandle,U.player.volumeContainer],t=0;t<e.length;t++)e[t].removeEventListener("mousedown",Ti)}()),function(){var e=U.player.mediaPlayer.getElementsByClassName("togglePlayPause")[0],t=U.player.mediaPlayer.getElementsByClassName("overlay-play-wrapper")[0],i=U.player.mediaPlayer.getElementsByClassName("overlayBtnWrapper")[0],n=U.player.mediaPlayer.getElementsByClassName("video-overlay")[0];e&&e.removeEventListener("click",Ht);t&&t.removeEventListener("click",Ht);i&&i.removeEventListener("click",Ht);n&&n.removeEventListener("click",Ht)}(),U.player.mediaVideo.removeEventListener("click",Ut),U.player.overlay.removeEventListener("click",Ut),U.player.truvidLogo.removeEventListener("click",Ft)}function Ft(){s&&s.notify("click",{widgetId:a,video:U.player.mediaVideo,clickedElement:"truvid logo"}),window.open("https://truvid.com/library","_blank")}function Nt(){qi(de,U.player.mediaVideo)?(U.player.poster.style.backgroundSize="contain",U.player.mediaVideo.style.position="fixed",U.player.mediaControls.style.position="fixed",Pt()):(U.player.poster.style.backgroundSize="cover",U.player.mediaVideo.style.position="",U.player.mediaControls.style.position=""),Ri(),A.dispatchEvent(new CustomEvent("onFullScreenChange",{detail:{isFullScreen:qi()}}))}function _t(){Qt(null),s&&s.notify("click",{widgetId:a,video:U.player.mediaVideo,clickedElement:"video click"});var e=!1;mt()&&(e=!0),X?(ge&&(ne!=dn||e?e=!0:(ne=ln,$e())),Pt(),e&&(ke=!0,ne=dn,rt(),$e())):(ne==ln?ne=dn:e||ne!=dn?ne==sn&&(ne=ln):ne=ln,ne==dn&&rt(),$e())}function Ut(e){e.preventDefault(),e.stopPropagation(),ue++,le?1==ue&&setTimeout(function(){1==ue?_t():gt()?_t():Vt();ue=0}.bind(this),w):_t(),A.dispatchEvent(new CustomEvent("click",{detail:{videoTitle:z.getCurrentVideoTitle(),playerElementId:A.id}}))}function Vt(){b.handlePlayerInteraction(Xi.a.FullScreen),s&&s.notify("click",{widgetId:a,video:U.player.mediaVideo,clickedElement:"fullscreen"}),function(e){document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled?document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement?document.cancelFullScreen?document.cancelFullScreen():document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen():e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT):e.msRequestFullscreen&&e.msRequestFullscreen():e.webkitSupportsFullscreen&&(e.webkitDisplayingFullscreen?e.webkitExitFullscreen():e.webkitEnterFullscreen())}(de)}function jt(e){if(I&&I.initializeAdManagers(),U.player.mediaVideo.ended)Vi(U.player.mediaVideo).then(function(){ne=ln,Z=!0,Xt(),Pt(),A.dispatchEvent(new CustomEvent("onUserMediaPlay"))}).catch(function(e){Object(tn.a)("setPlayPauseButtonsCallbackSingleClickplayVideoElementErr",{wid:a},e)});else if(U.player.mediaVideo.paused){var t=gt();"overlayBtnWrapper"==e.srcElement.className&&t?mt():(ne=ln,Vi(U.player.mediaVideo).then(function(){ne=ln,Z=!0,Xt(),Pt(),A.dispatchEvent(new CustomEvent("onUserMediaPlay"))}).catch(function(e){Object(tn.a)("setPlayPauseButtonsCallbackSingleClickplayVideoElementErr2",{wid:a},e)}))}else ne=dn,ke=!0,qt(U.player.mediaVideo),ne=dn,e&&"overlayBtnWrapper"==e.srcElement.className&&!Y&&mt(),Kt(),I&&I.killBiddingSession(),A.dispatchEvent(new CustomEvent("onUserMediaPause"))}function Ht(e){e.preventDefault(),e.stopPropagation(),Qt(e),le?1==++ce&&setTimeout(function(){1==ce?jt(e):gt()?_t():Vt();ce=0}.bind(this),w):jt(e)}function Gt(e){s&&s.notify("click",{widgetId:a,video:U.player.mediaVideo,clickedElement:"play pause click"}),Ht(e)}function zt(e){return!e||e.target.closest(".overlayBtnWrapper")}function Wt(e){return e.target.className.includes("togglePlayPause")}function Qt(e){ne===ln?zt(e)?b.handlePlayerInteraction(Xi.a.InVideoAreaPause):Wt(e)&&b.handlePlayerInteraction(Xi.a.Pause):zt(e)?b.handlePlayerInteraction(Xi.a.InVideoAreaPlay):Wt(e)&&b.handlePlayerInteraction(Xi.a.Play)}function qt(e){e.paused||e.pause()}function Yt(){ne=dn,qt(U.player.mediaVideo),Kt()}function Kt(){It();var e=U.player.mediaPlayer.getElementsByClassName("togglePlayPause")[0];e.setAttribute("title","Play"),e.style.backgroundPosition="-82px -8px",U.player.mediaControls.style.display="block"}function Xt(){Ot();var e=U.player.mediaPlayer.getElementsByClassName("togglePlayPause")[0];e.setAttribute("title","Pause"),e.style.backgroundPosition="-48px -8px",U.player.mediaControls.style.display="none"}function Jt(){s&&s.notify("click",{widgetId:a,video:U.player.mediaVideo,clickedElement:"volume icon"}),ti()}function Zt(){U.player.mediaVideo.volume=0,U.player.mediaVideo.muted=!0}function $t(){Zt(),ii(),A.dispatchEvent(new CustomEvent("onMute"))}function ei(){U.player.mediaVideo.volume=b.getVolume(),U.player.mediaVideo.muted=!1,ii(),A.dispatchEvent(new CustomEvent("onUnmute"))}function ti(){U.player.mediaVideo.muted?(ei(),b.handlePlayerInteraction(Xi.a.SoundOn)):($t(),A.dispatchEvent(new CustomEvent(En)),b.handlePlayerInteraction(Xi.a.SoundOff))}function ii(){U.player.volumeButton.style.backgroundPosition=(U.player.mediaVideo.muted?"-115":"-100")+"px -10px";var e=100*U.player.mediaVideo.volume;U.player.mediaVideo.muted?(U.player.activeVolume&&(U.player.activeVolume.style.height="0%"),U.player.volumeHandle&&(U.player.volumeHandle.style.top="100%")):(U.player.activeVolume&&(U.player.activeVolume.style.height=e+"%"),U.player.volumeHandle&&(U.player.volumeHandle.style.top=Math.abs(100-e)+"%"))}function ni(){ke=!1,A.dispatchEvent(new CustomEvent(vn)),Pt()}function ri(){xe&&xe.Hide(),ne=ln,Z=!0}function ai(){I&&I.onContentVolumeChange(),h&&vi()}function oi(){A.dispatchEvent(new CustomEvent(yn)),U.player.mediaVideo.ended||ne==ln&&(ne=dn,$e())}function si(){U.player.bufferBar.style.width="0%",U.player.playProgressBar.style.width="0%",U.player.progressButton.style.left="0"}function li(){I&&I.onVideoEnd(),window.playerLog("onVideoEnd"),A.dispatchEvent(new CustomEvent(wn)),di(),Fe||(te=0,L&&Fi())}function di(){L?z.isPlaylistFinished()&&(window.playerLog("playlist finished"),0!=R&&0!=R||!be||we||ji(),!1!==R&&R--):!1!==R&&R--,window.playerLog("decreaseRepeatCounter","Repeat counter",R)}function ui(){!function(){if(z&&z.getCurrentVideoObj().hra)return;var e;if(ae){var t;e=Lt(ae,Math.floor(pi())),null!==(t=e)&&void 0!==t&&t.url&&U.player.mediaVideo.currentTime?(ee!=e.url&&ci(),ee=e.url,hi()):(ee=null,fi())}if(L){var i=z.getCurrentVideoObj();i.lnks&&i.lnks.length&&((e=Lt(i.lnks,Math.floor(pi())))&&e.url?(ee!=e.url&&ci(),ee=e.url,hi()):(ee=null,fi()))}}(),function(){if(!Q){var e=Math.floor(U.player.mediaVideo.currentTime/U.player.mediaVideo.duration*100),t=U.player.mediaPlayer.clientWidth*e/100;U.player.playProgressBar.style.width=t+"px";var i=U.player.mediaPlayer.clientWidth,n=Math.min(e*i/100,i-20);U.player.progressButton.style.transform="translateX(".concat(n,"px) scale(").concat(Xe?5:1,")")}}(),U.player.currentTime.innerHTML=Qi(U.player.mediaVideo.currentTime),0<U.player.mediaVideo.currentTime&&A.dispatchEvent(new CustomEvent(gn,{detail:{currentTime:U.player.mediaVideo.currentTime}}))}function ci(){var e=A.getElementsByClassName("links-button");e.length&&(e[0].classList.add("highlight"),setTimeout(function(){e[0].classList.remove("highlight"),setTimeout(function(){e[0].classList.add("highlight"),setTimeout(function(){e[0].classList.remove("highlight")},250)},100)},250))}function hi(){A.getElementsByClassName("links-overlay").length&&(A.getElementsByClassName("links-overlay")[0].style.display="block")}function fi(){A.getElementsByClassName("links-overlay").length&&(A.getElementsByClassName("links-overlay")[0].style.display="none")}function pi(){return U.player.mediaVideo.currentTime}function gi(e){e.stopPropagation(),b.handlePlayerInteraction(Xi.a.ProgressBarSeeking),s&&s.notify("click",{widgetId:a,video:U.player.mediaVideo,clickedElement:"progress bar click"}),mi(bi(e.pageX)),h&&vi(),i&&t&&t.removeAutoSkip()}function mi(e){U.player.mediaVideo.currentTime=e,Je("currentTimeChanged",{time:te=e})}function vi(){h=!1}function yi(e){b.handlePlayerInteraction(Xi.a.ProgressBarSeeking),Q=!0,s&&s.notify("click",{widgetId:a,video:U.player.mediaVideo,clickedElement:"progress bar click"}),window.playerLog("mouse down progress bar"),mi(bi(e.pageX)),h&&vi(),i&&t&&t.removeAutoSkip(),A.dispatchEvent(new CustomEvent("seek",{detail:{currentTime:U.player.mediaVideo.currentTime}})),ke=!1,ne==sn&&tt()}function bi(e){var t=100*(e-U.player.playProgressBar.getBoundingClientRect().left)/U.player.mediaPlayer.clientWidth;t=isFinite(t)?t:100,t=Math.max(Math.min(t,100),Math.max(0,t));var i=U.player.mediaPlayer.clientWidth,n=Math.min(t*i/100,i-20),r=U.player.mediaVideo.duration;r=r||z.getCurrentVideoDuration();var a=U.player.mediaPlayer.clientWidth*t/100;return U.player.playProgressBar.style.width=a+"px",U.player.progressButton.style.transform="translateX(".concat(n,"px) scale(").concat(Xe?5:1,")"),r*t/100}function wi(e){Q&&(Q=!1,mi(bi(e.pageX)),h&&vi(),i&&t&&t.removeAutoSkip())}function Ei(e){q&&(q=!1,Ci(e.y&&0<e.y?e.y:e.pageY))}function Si(e){Q&&bi(e.pageX),function(e){var t=100*(e-U.player.playProgressBar.getBoundingClientRect().left)/U.player.mediaPlayer.clientWidth;t=isFinite(t)?t:100,t=Math.max(Math.min(t,100),Math.max(0,t));var i=U.player.mediaPlayer.clientWidth*t/100;U.player.hoverProgressBar.style.width=i+"px"}(e.pageX)}function Ai(e){q&&Ci(e.y&&0<e.y?e.y:e.pageY)}function Ti(e){e.stopPropagation(),q=!0,U.player.mediaVideo.muted&&ti(),s&&s.notify("click",{widgetId:a,video:U.player.mediaVideo,clickedElement:"volume bar"}),Ci(e.y&&0<e.y?e.y:e.pageY)}function Li(e){var t=100*(G=e),i=100-t;U.player.activeVolume&&(U.player.activeVolume.style.height=t+"%"),U.player.volumeHandle&&(U.player.volumeHandle.style.top=Math.abs(i)+"%"),U.player.mediaVideo.volume=e,0==U.player.mediaVideo.volume&&0==U.player.mediaVideo.muted&&$t()}function Ci(e){var t=100-100*(e-A.getElementsByClassName("volume-bar")[0].getBoundingClientRect().top)/U.player.volumeBar.getBoundingClientRect().height;t=isFinite(t)?t:100,Li((t=Math.max(0,Math.min(t,100)))/100)}function ki(){Xe=!0,this.style.height="6px",this.style.marginTop="8px",U.player.hoverProgressBar.style.height="6px",U.player.playProgressBar.style.height="6px"}function xi(){Xe=!1,this.style.height="3px",this.style.marginTop="8px",U.player.hoverProgressBar.style.height="0px",U.player.hoverProgressBar.style.width="0px",U.player.playProgressBar.style.height="3px"}function Pi(){U.player.volumeContainer.style.display="block"}function Ii(){U.player.volumeContainer.style.display="none"}function Oi(e){e<600?U.player.title.style.display="none":(U.player.title.style.display="inline-block",U.player.title.style.width=e-250+"px")}function Ri(){window.playerLog("onWindowsResize"),yt();var e=Object(Hi.b)(A);Oi(e.width),Di(e.width,e.height),ut(e.width,e.height),A.dispatchEvent(new CustomEvent("windowResize",{detail:{playerWidth:e.width,playerHeight:e.height}}))}function Di(e){var t,i;i=t=e<300?45:300<=e&&e<=400?.15*e:65,U.buttonsOverlay&&U.buttonsOverlay.overlayPlayButton&&(U.buttonsOverlay.overlayPlayButton.style.width=t+"px",U.buttonsOverlay.overlayPlayButton.style.height=i+"px")}function Mi(i,n,r){return new Promise(function(t){if(At())t();else{var e=function(e){e&&(window.playerLog("restore time "+te),U.player.mediaVideo.currentTime=te),n&&Mt(),Z&&ne==ln?Vi(U.player.mediaVideo).then(function(){xe&&xe.Hide(),Tt(),Xt()}).catch(function(e){Object(tn.a)("changePlayerSourceplayVideoElementErr",{wid:a},e),Kt()}):Kt(),U.player.mediaVideo.style.display="block",ii(),t()};r||f.isUrlDifferentThanCurrentUrl(i.p)?(f.destroy(),f=new en(i,b),qt(U.player.mediaVideo),f.loadVideoSource(te).then(function(){pt(),se=U.player.mediaVideo.duration,isNaN(se)?U.player.vidDuration.innerHTML=Qi(z.getCurrentVideoDuration()):U.player.vidDuration.innerHTML=Qi(U.player.mediaVideo.duration),e(!0)}).catch(function(e){Object(tn.a)("changePlayerSourceplayloadVideoSourceErr",{wid:a},e)})):e(!1)}})}function Bi(e){return e.preventDefault(),function(e){!function(){var e=document.getElementById("context-menu-"+A.id);e&&A.parentNode.removeChild(e)}();var t=function(e){var t=document.createElement("div"),i=function(e){var t={y:0,x:0};if(e.target==A)return t;var i=e.target;for(;i!=A;){if(i==U.player.mediaControls||U.buttonsOverlay&&i==U.buttonsOverlay.overlay.firstChild){t={y:i.offsetTop,x:e.target.offsetLeft};break}i=i.parentNode}return t}(e);return t.id="context-menu-"+A.id,t.style.top=A.offsetTop+e.offsetY+i.y+"px",t.style.left=A.offsetLeft+e.offsetX+i.x+"px",function(t){function i(){clearTimeout(n),n=null,n=setTimeout(e,1500)}var e=function(){window.removeEventListener("mousemove",i),t&&t.parentNode==A.parentNode&&A.parentNode.removeChild(t)},n=setTimeout(e,1500),r=t.style.backgroundColor;window.addEventListener("click",function e(){window.removeEventListener("click",e),window.removeEventListener("mousemove",i),t&&t.parentNode==A.parentNode&&A.parentNode.removeChild(t)}),window.addEventListener("mousemove",i),t.addEventListener("click",function(){window.open("https://truvid.com/terms/privacy-policy","_blank")});function a(e){t.style.backgroundColor="mouseenter"==e.type?"black":r}t.addEventListener("mouseenter",a),t.addEventListener("mouseleave",a)}(t),t}(e);t.appendChild(function(){var e=document.createElement("div"),t=document.createElement("div");return e.className="context-menu-icon-container",t.className="context-menu-icon",e.appendChild(t),e}()),t.appendChild(function(){var e=document.createElement("div"),t=document.createElement("div");return e.className="context-menu-text-container",t.className="context-menu-text",t.innerHTML='Powered by truvid<span style="font-size: 10px;line-height:15px;">&trade;</span>',e.appendChild(t),e}()),A.parentNode.appendChild(t)}(e),!1}function Fi(){if(window.playerLog("forward"),z){var e=_i();z.forward(),e&&xe&&xe.Show(),Ui(e)}}function Ni(){n=!0}function _i(){var e=z&&z.isPlaylistFinished()&&(!O||!(!1===R||0<=R));return e&&(0==R&&(R=D),A.dispatchEvent(new CustomEvent("playlistEnd"))),n?n=!1:e}function Ui(i){z&&(I&&I.killBiddingSession(),Ee.DispatchPromiseEvent(mn,{detail:{switchToCTP:i}}).then(function(){te=0,E=!1;var e=z.getFileToPlay();si(),fi(),i&&(ne=sn,Kt(),A.dispatchEvent(new CustomEvent("loopEnds")));function t(){se=z.getCurrentVideoDuration(),U.player.mediaVideo.duration?U.player.vidDuration.innerHTML=Qi(U.player.mediaVideo.duration):U.player.vidDuration.innerHTML=Qi(z.getCurrentVideoDuration()),Ct(),fi(),function(){var e=U.player.mediaPlayer.getElementsByClassName(".links-button");e.length&&((e=e[0]).innerHTML=vt())}(),A.dispatchEvent(new CustomEvent(pn,{detail:{fileToPlay:z.getCurrentVideoObj()}}))}Be?Mi(e,!1,!0).then(function(){t()}):(U.player.mediaVideo.currentTime=0,f.destroy(),f=new en(e,b),t())}).catch(function(e){Object(tn.a)("onSwitchToNewVideoErr",{wid:a},e)}))}function Vi(r){return new Promise(function(e,t){ke=!1;function i(){r.removeEventListener("playing",i),window.playerLog("playing callback"),r.paused?(window.playerLog("video is not playing somehow"),t()):(Tt(),e())}r.addEventListener("playing",i),window.playerLog("play video element");var n=f.play(te);n?n.then(i).catch(function(e){Object(tn.a)("rejectCallbackErr",{wid:a},e),window.playerLog("reject while playing video"),r.removeEventListener("playing",i),t()}):setTimeout(function(){r.removeEventListener("playing",i),t()},5e3)})}function ji(){Fe=!0,window.playerLog("player destroyed"),Zt(),Ee&&Ee.removeSubscribers(),nt(),rt(),Ze(),De.style.display="none",A.dispatchEvent(new CustomEvent(bn))}this.getSellersJsonId=function(){return Ue},this.getParentElement=function(){return Ie},this.getWrapperElement=function(){return Oe},this.resizeAds=function(){I&&I.onPlayerResize()},this.hasUsedCmp=function(){return We},this.setCmpUsed=function(){We=!0},this.setConsentString=function(e){Ve=e},this.getConsentString=function(){return Ve},this.getPersonalizedAdsAgreed=function(){return je},this.setPersonalizedAdsAgreed=function(e){je=e},this.setGdprApplies=function(e){He=e},this.getGdprApplies=function(){return He},this.onPlayerViewabilityCallback=function(e){$=e[0].isIntersecting,window.playerLog("viewability change, viewable: "+$),A.dispatchEvent(new CustomEvent(hn,{detail:{isPlayerViewable:$}}))},this.onContainerViewabilityCallback=function(e){this.dispatchEvent(fn,e)},this.handlePlayerInteraction=function(e){H=H||!0,function(e){var t=this;(function(e){if(Qe){var t=qe+"?e="+Qe+"&ev="+e+"&s="+!!this.getCurrentVolume();navigator.sendBeacon(t,null)}}).call(this,e),setTimeout(function(){(function(e){var t=U.player.mediaVideo.muted,i=[Xi.a.SoundOn,Xi.a.SoundOnAd],n=[Xi.a.SoundOff,Xi.a.SoundOffAd],r=[Xi.a.CloseFloater].concat(n);this.isContainerInView()||Ke||r.push(Xi.a.SkipAd);{if((j=j||n.includes(e))&&!i.includes(e))return;j=!1}t&&!r.includes(e)&&(S&&e!==Xi.a.SoundOnAd?this.unmutePlayerOnAdEnd():this.unmutePlayerUponInteraction())}).call(t,e)},0)}.call(this,e)},this.Show=function(){De.style.height=null},this.Hide=function(){De.style.height="0px"},this.isPlayerInView=function(){return m.isElementInView()},this.isContainerInView=function(){return v.isElementInView()},this.getPlayerStoppedOnPageVisibiltiyEvent=function(){return Te},this.onTogglePlayPauseButtonCallback=function(e){Gt(e)},this.StartBiddingSession=function(e){I&&I.startBiddingSession(e)},this.isResponsive=function(){return J},this.SetLoadVideoOnPlaylistChange=function(e){Be=e},this.getPlayerElements=function(){return U},this.getHeight=function(){return k},this.getWidth=function(){return C},this.getFirstTimeHLSInit=function(){return Ae},this.setFirstTimeHLSInit=function(e){Ae=e},this.getIsPageVisible=function(){return Ce},this.getPauseOnHiddenTab=function(){return Le},this.getPlayerPausedOnUserBehalf=function(){return ke},this.setPlayerPausedOnUserBehalf=function(e){ke=e},this.dispatchEvent=function(e,t){Je(e,t)},this.DispatchPromiseEvent=function(e,t){return Ee.DispatchPromiseEvent(e,t)},this.unmutePlayerUponInteraction=function(){this.unmute(),this.setVolume(Ye)},this.setMutedByUser=function(e){j=e},this.setup=function(e,t){!function(e){L=at(e.playlistContent,!1),C=at(e.width,600),k=at(e.height,480),x=at(e.autoplay,!1),O=at(e.repeat,!1),R=at(e.repeatCounter,!1),null==e.repeatCounter&&e.repeat&&(we=!0);K=e.widgetType,B=at(e.debugMessages,!1),F=at(e.startHidden&&0!=e.startHidden,!1),N=at(e.opportunityPixel,null),r=at(e.pixelPath,"#"),_=at(e.playerLoadPixel,null),Y=at(e.isNetworkWidget,!1),(X=ct())&&(at(e.mobileEnvironment,!1),at(e.mobileOS,!1));D=R,J=at(e.isResponsive,!1),T=at(e.ads,null),ie=at(e.vastPath,null),x||(Z=!1);var t;re=at(e.isNativeClickOpensNewWindow,!0),ae=at(e.videoLinks,null),le=at(e.isFullscreen,!1),o=at(e.geoLocation,null),a=e.widgetId,he=at(e.pageUrl,""),fe=at(e.domain,""),pe=at(e.ip,""),s=e.apiObservable,me=e.subUserId,be=at(e.hideOnPlaylistComplete,!1),d=at(e.autoSkipDuration,0),c=at(e.autoSkipTimeToStopPlayer,0),h=0<c&&0<d,Le=at(e.pauseOnHiddenTab,!1),Ie=e.playerElement,Pe=at(e.playerId,"br_video_player"),Re=at(e.floaterSettings,null),e.floaterSettings&&(u=null!==(t=e.floaterSettings.padding)&&void 0!==t?t:0);Ne=at(e.osVersion,""),_e=at(e.osFamily,""),Ue=at(e.sellersJsonId,""),void 0===e.elemId||Ie||(Ie=document.getElementById(e.elemId.replace(/^#/,"")));Ge=at(e.fia,!1),ze=at(e.playOnlyMp4,!1),Qe=at(e.clickPixel,""),qe=at(e.clickPixelPath,""),Ye=at(e.volume,.1),P=at(e.mute,!1),Ke=at(e.turnOnSoundWhenSkipAdOOV,!0)}(e),_&&!ye&&(ye=!0,Object(tn.b)(_)),window.playerLog=B?function(){var e=arguments[0],t=at(arguments[1],""),i=at(Array.prototype.slice.call(arguments,2),""),n=new Date;console.log(n.getHours()+":"+n.getMinutes()+":"+n.getSeconds()+" "+e+" | "+t,i)}:function(){},this.setMediaVideo(),function(){if(Object(Hi.c)())if(J){window.frameElement.style.position="absolute",window.frameElement.style.width="100%",window.frameElement.style.height="100%",window.frameElement.id&&0<=window.frameElement.id.indexOf("google_ads_iframe")?(window.frameElement.style.top="0px",window.frameElement.style.left="0px",window.frameElement.parentElement.style.position="relative"):""==window.frameElement.parentElement.innerText&&(window.frameElement.parentElement.style.position="relative",window.frameElement.style.top="0px",window.frameElement.style.left="0px");var e=(k/C*100).toFixed(2);window.frameElement.parentElement.style.paddingBottom=e+"%",window.frameElement.parentElement.style.display="block",1!=window.frameElement.parentElement.offsetHeight&&1!=window.frameElement.parentElement.offsetWidth||(window.frameElement.parentElement.style.width="100%",window.frameElement.parentElement.style.height="100%"),window.frameElement.parentElement.parentElement&&1==window.frameElement.parentElement.parentElement.offsetHeight&&(window.frameElement.parentElement.parentElement.style.width="100%",window.frameElement.parentElement.parentElement.style.height="100%")}else window.frameElement.style.width=this.width+"px",window.frameElement.style.height=this.height+"px",window.frameElement.parentElement&&1==window.frameElement.parentElement.offsetHeight&&(window.frameElement.parentElement.style.width=this.width+"px",window.frameElement.parentElement.style.height=this.height+"px"),window.frameElement.parentElement.parentElement&&1==window.frameElement.parentElement.parentElement.offsetHeight&&(window.frameElement.parentElement.parentElement.style.width=this.width+"px",window.frameElement.parentElement.parentElement.style.height=this.height+"px")}(),Ie.parentElement&&(ft(Ie.parentElement),Ie.parentElement.parentElement&&(ft(Ie.parentElement.parentElement),Ie.parentElement.parentElement.parentElement&&ft(Ie.parentElement.parentElement.parentElement))),function(){var e=A.getElementsByClassName("media-player")[0];(U={player:{mediaPlayer:e,mediaControls:e.getElementsByClassName("trv-media-controls")[0],mediaVideo:e.getElementsByClassName("media-video")[0],progressBar:e.getElementsByClassName("trv-progress-bar")[0],progressBarPadding:e.getElementsByClassName("trv-progress-padding")[0],playProgressBar:e.getElementsByClassName("trv-play-progress")[0],hoverProgressBar:e.getElementsByClassName("trv-hover-progress")[0],progressButton:e.getElementsByClassName("trv-progressBtn")[0],bufferBar:e.getElementsByClassName("trv-buffered")[0],currentTime:e.getElementsByClassName("trv-currentTime")[0],vidDuration:e.getElementsByClassName("trv-duration")[0],volumeButton:e.getElementsByClassName("volume")[0],volumeHandle:e.getElementsByClassName("volumeHandle")[0],volumeContainer:e.getElementsByClassName("volume-container")[0],activeVolume:e.getElementsByClassName("active-volume")[0],volumeBar:e.getElementsByClassName("volume-bar")[0],togglePlayPause:e.getElementsByClassName("togglePlayPause")[0],poster:e.getElementsByClassName("trv-poster")[0],title:e.getElementsByClassName("videoTitle")[0],overlay:e.getElementsByClassName("trv-overlay")[0],truvidLogo:e.getElementsByClassName("BR")[0]}}).player.fullScreen=e.getElementsByClassName("fullScreen")[0]}(),At()||"floater"==K?U.player.poster.style.display="none":xe=new rn(b),Re&&(y=new an.a(b,Re)),this.setupViewability();var i=new $i(this);void 0!==window.trv_players?window.trv_players.push(i):window.trv_players=[i],void 0!==window.onTruvidPlayerAdded&&"function"==typeof window.onTruvidPlayerAdded&&window.onTruvidPlayerAdded(i),ze||(p=Gi.a.isSupported()),P?$t():Li(Ye),l=new Ki(A);var n=function(){this.setAdsQueue().then(function(){t&&"function"==typeof t&&t(),function(){return new Promise(function(e){At()?e():Z?$e().then(function(){e()}.bind(this)).catch(function(e){Object(tn.a)("startContentwhenPlayingContentAllowedError",{wid:a},e)}):(et(),e())}.bind(this))}().then(function(){this.onPlayerReady()}.bind(this))}.bind(this)).catch(function(e){Object(tn.a)("whenContentReadyError",{wid:a},e)}.bind(this)),h&&this.initAutoSkip()}.bind(this);At()?ot():(function(){var e=U.player.mediaPlayer,t=document.createElement("div");t.className="video-overlay",t.innerHTML='<div class="overlayBtnWrapper"><div class="overlay-backwards-wrapper"><svg class="small-nav small-nav-l overlay-backwards" stroke="#FFFFFF"><path d="m 11,20 L 6,25 L 11,30" stroke-width="2" fill="none" stroke-linecap="round"></path></svg></div><div class="overlay-play-wrapper"><div class="overlay-play-pause"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 1000 1000" enable-background="new 0 0 1000 1000" xml:space="preserve" fill="#FFFFFF"><g><path d="M500,990C229.8,990,10,770.2,10,500C10,229.8,229.8,10,500,10c270.2,0,490,219.8,490,490C990,770.2,770.2,990,500,990z M500,56.7C255.5,56.7,56.7,255.5,56.7,500c0,244.5,198.9,443.3,443.3,443.3S943.3,744.5,943.3,500C943.3,255.5,744.5,56.7,500,56.7z"/><path d="M348.3,220l420,280l-420,280V220z"/></g>\n</svg></div></div><div class="overlay-forward-wrapper"><svg class="small-nav small-nav-r overlay-forward" stroke="#FFFFFF"><path d="m 9,20 L 14,25 L 9,30" stroke-width="2" fill="none" stroke-linecap="round"></path></svg></div></div>',e.appendChild(t)}(),function(){var e=U.player.mediaPlayer;U.buttonsOverlay={overlay:e.getElementsByClassName("video-overlay")[0],overlayPlayButton:e.getElementsByClassName("overlay-play-pause")[0],overlayBackwardButton:e.getElementsByClassName("overlay-backwards")[0],overlayForwardButton:e.getElementsByClassName("overlay-forward")[0]}}(),this.setContentVideo(),function(){var e=U.player.mediaPlayer,t=document.createElement("div");t.innerHTML='<div class="links-overlay"><div class="links-button">'+vt()+"</div></div>",e.appendChild(t.firstChild),e.getElementsByClassName("links-button")[0].onclick=function(){b.handlePlayerInteraction(Xi.a.ReadMoreClick),mt()}}(),Mt(),function(e){var t,i;void 0!==document.hidden?(t="hidden",i="visibilitychange"):void 0!==document.mozHidden?(t="mozHidden",i="mozvisibilitychange"):void 0!==document.webkitHidden&&(t="webkitHidden",i="webkitvisibilitychange"),void 0!==document[t]&&("hidden"==document.visibilityState&&e(!1),document.addEventListener(i,function(){e(!document[t])},!1))}(function(e){(Ce=e)?(window.playerLog("Page in view"),Le&&(Z=!0,Te&&(Te=!1,tt()))):(window.playerLog("Page out of view"),Le&&(Te=!(Z=!1),ne==ln&&it(!0)))})),n()},this.setHLSCurrentLevel=function(e){Se=e},this.getHLSCurrentLevel=function(){return g?0:Se},this.initAutoSkip=function(){(t=new Ji(this)).initAutoSkipElements(this.getPlayerElement()),this.subscribe(gn,this.showAutoSkip)},this.setupViewability=function(){m=new nn({elementToTrack:A,callback:this.onPlayerViewabilityCallback.bind(this)}),v=new nn({elementToTrack:De,callback:this.onContainerViewabilityCallback.bind(this)})},this.hasUserInteractionOccured=function(){return H},this.getHlsActive=function(){return p},this.switchToVideoIndex=function(e){z&&(z.switchToVideoIndex(e),I&&(I.stopAd(),rt()),Ui(!1))},this.getEventSubscribersService=function(){return Ee},this.removePlayerListeners=function(){Ze()},this.showAutoSkip=function(){i||Math.round(U.player.mediaVideo.currentTime)!==c||(i=!0,t.initAutoSkip(d,b),t.showAutoSkip())},this.hideAutoSkip=function(){i=!1},this.setIsAdPlaying=function(e){S=e,V&&!e&&(V=!1,this.unmutePlayerUponInteraction())},this.isAdPlaying=function(){return S},this.unmutePlayerOnAdEnd=function(){V=!0},this.ForcePlayingAdsOnlyOnFloater=function(){y&&y.ForcePlayingAdsOnlyOnFloater()},this.isSavingModeForContentRunning=function(){return g},this.EnableSavingModeForContent=function(){window.playerLog("setting saving mode to true"),g=!0,void 0===f.EnableSavingModeForContent||S||ne!=ln||f.EnableSavingModeForContent()},this.DisableSavingModeForContent=function(){window.playerLog("setting saving mode to false"),g=!1,f&&void 0!==f.DisableSavingModeForContent&&!S&&f.DisableSavingModeForContent()},this.subscribe=function(e,t){null==Ee?M.push({eventName:e,callback:t}):Ee.subscribe(e,t)},this.unsubscribe=function(e,t){Ee.unsubscribe(e,t)},this.removeContentSource=function(){U.player.mediaVideo.src="",U.player.mediaVideo.load()},this.play=function(){tt()},this.pause=function(e){it(e)},this.pauseContentVideo=function(){qt(U.player.mediaVideo)},this.skip=function(){nt()},this.startPendingAd=function(){window.playerLog("start pending ad","Start ad"),S=!0,I&&I.startPendingAd()},this.updateAdOnly=function(e){e},this.getPlaylist=function(){return z},this.playerState=function(){return S?I.advertisingState():{paused:U.player.mediaVideo.paused||U.player.mediaVideo.ended}},this.killBiddingSession=function(){rt()},this.getOSFamily=function(){return _e},this.getOSVersion=function(){return Ne},this.isNetworkWidget=function(){return Y},this.setCurrentVolume=function(e){0<e?ei():$t()},this.SetAllowStartingContentOnPlayRequest=function(e){Z=e},this.IsFloaterAvailable=function(){return y&&y.isAvailableToShow()},this.IsFloaterOpen=function(){return y&&y.IsFloaterOpen()},this.setPlayerContentStatus=function(e){window.playerLog("set new player content status "+e),ne=e},this.isFullScreenState=function(){return qi(de,U.player.mediaVideo)},this.isAdOnlyAvailable=function(){return!!y&&y.IsAvailableForAdOnly()},this.canPlayType=function(e){return!e||("application/vnd.apple.mpegURL"==e?p:0<U.player.mediaVideo.canPlayType(e).length)},this.getCurrentResolution=function(){return oe},this.getWidgetType=function(){return K},this.getVideo=function(){return U.player.mediaVideo},this.getOpportunityPixel=function(){return bt(N)},this.getVastPath=function(){return ie},this.getPlayerContentStatus=function(){return ne},this.isMediaPlayingIsDifferentThanContent=function(){return function(){{if(At())return!0;var e=z.getFileToPlay().p;return!!f.isUrlDifferentThanCurrentUrl(e)||U.player.mediaVideo.paused&&ne==ln}}()},this.getCurrentVolume=function(){return 1==U.player.mediaVideo.muted?0:U.player.mediaVideo.volume},this.getPlayerDimension=function(){return this.getElementDimension(A)},this.getElementDimension=function(e){return Object(Hi.b)(e)},this.getDuration=function(){return se},this.getPlaylistContent=function(){return L},this.getSubUserId=function(){return me},this.getPageUrl=function(){return he},this.getGeoLocation=function(){return o},this.getIp=function(){return pe},this.IsPlayerViewable=function(){return $},this.getPlayerWidth=function(){return C},this.getPlayerHeight=function(){return k},this.getDomain=function(){return fe},this.getWidgetId=function(){return a},this.getApiObservable=function(){return s},this.isMobile=function(){return X},this.updateCurrentContentTimeState=function(){0<U.player.mediaVideo.currentTime&&(te=U.player.mediaVideo.currentTime)},this.getCurrentVideoObj=function(){return z.getCurrentVideoObj()},this.saveContentState=function(e){!function(e){At()||(Bt(),ot(),e&&qt(U.player.mediaVideo),f.destroy())}(e)},this.getCurrentVideoUrl=function(){return z.getCurrentVideoUrl()},this.stopSpinner=function(){l.stopSpinner()},this.startSpinner=function(){l.isSpinnerExist()||(qt(U.player.mediaVideo),l.startSpinner())},this.resizeSpinner=function(e,t){ut(e,t)},this.restoreContentState=function(){S=!1,z&&Me&&Mi(z.getFileToPlay(),!0,!1)},this.SetAllowRestoringContent=function(e){Me=e},this.getCurrentContentTime=function(){return pi()},this.isBiddingSessionRunning=function(){if(I)return null!==I.currentBidSession},this.setAdsQueue=function(){return new Promise(function(t){if(T)try{(I=new Wi.d(T,b)).init().then(function(){this.subscribe(Wi.c,function(){ot()}),t()}.bind(this)).catch(function(e){window.playerLog("error loading ads library",e),Object(tn.a)("errorinitads",{wid:a},e),t()})}catch(e){Object(tn.a)("error new ads",{wid:a},e),window.playerLog(e)}else t()}.bind(this))},this.setMediaVideo=function(){var e=function(){var e=document.createElement("video");e.setAttribute("disableremoteplayback",""),e.setAttribute("webkit-playsinline",""),e.setAttribute("playsinline",""),P&&(e.setAttribute("muted",""),e.volume=0,window.playerLog("mute video"));return e.preload="metadata",e.controls=!1,e.className="media-video",e}(),t=this.setupPlayerHtml(e.outerHTML);Ie.appendChild(t)},this.getCurrentVideoDuration=function(){return se},this.setupPlayerHtml=function(e){var t=document.createElement("div");t.className="trv-player-container","floater"!=K&&(t.style.position="relative",t.style.margin="0 auto");var i=document.createElement("div");i.className="trv-wrapper",Oe=i;var n=(k/C*100).toFixed(2);t.appendChild(i);var r=document.createElement("div");r.id=Pe,r.className="trvd_video_player",De=t,F&&(De.style.height="0px"),function(e){A=e,Ee=new Zi,Ee.setPlayerElement(A);for(var t=0;t<M.length;t++)Ee.subscribe(M[t].eventName,M[t].callback);M=[]}(r),i.appendChild(r),i.style.overflow="hidden",i.style.position="relative",this.isResponsive()?(t.style.width="100%",i.style.paddingBottom=n+"%","in_stream"==K&&(C&&(t.style.maxWidth="".concat(C,"px")),k&&(t.style.maxHeight="".concat(k,"px"))),r.style.position="absolute"):"floater"!=K&&(i.style.height=k+"px");var a='<div class="media-player"><div class="trv-video">{{video_placeholder}}</div><div class="trv-overlay"></div>';if(X||(a+='<div class="volume-container"><div style="position: relative;"><div class="volume-bar"><div class="active-volume"></div></div></div><div class="button-holder"><div class="volumeHandle"></div></div></div>'),a+='<div class="trv-media-controls"><div class="trv-progress-bar"><div class="trv-progress-padding"></div><div class="trv-buffered"></div><div class="trv-play-progress"></div><div class="trv-hover-progress"></div><div class="button-holder"><div class="trv-progressBtn"></div></div></div><button class="togglePlayPause brpBtn sprite-background" type="button" title="play">Play</button><button class="volume brpBtn sprite-background" type="button" title="volume">volume</button>',a+='<span class="trv-currentTime">00:00</span><span class="timeDivider">/</span><span class="trv-duration">00:00</span><span class="videoTitle"></span><button class="BR brpBtn sprite-background" type="button" title="Truvid.com">Truvid</button>',a+='<button class="fullScreen brpBtn sprite-background" style="display:none;" type="button" title="Full Screen">fullScreen</button>',a+='</div><div class="trv-poster"></div></div>'+function(e,t,i,n,r,a,o,s,l){var d=Yi,u={toggleDisplay:"all 0.5s cubic-bezier(0.23, 0.36, 0.45, 0.94)",overlay:"opacity 3s ease-in-out",controller:"opacity 0.2s ease-in-out",progressBar:"all 0.1s cubic-bezier(0.23, 0.36, 0.45, 0.94)"};e||(u.volumeBar="opacity 0.15s linear");var c='transparent url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABNoAAAAoCAYAAAAonpdLAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA25pVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQyIDc5LjE2MDkyNCwgMjAxNy8wNy8xMy0wMTowNjozOSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDphYzE1ODUxMS01M2M5LWQzNDYtOGZlNC1hZTI1ZmI5NTA4YzgiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MEQ5RDQ5RDcwQ0UyMTFFOThFMTVFQThERTQzOThERDkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MEQ5RDQ5RDYwQ0UyMTFFOThFMTVFQThERTQzOThERDkiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKFdpbmRvd3MpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MUQ3QUQ4Nzk3Q0I1MTFFNUIzMTRCMDIxQjZBMkU5NjUiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MUQ3QUQ4N0E3Q0I1MTFFNUIzMTRCMDIxQjZBMkU5NjUiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz4FuWpAAAAxdUlEQVR42uxdB3wU1fY+m4QakF4EURAVYwMCiIgIiGIUFewoigg+LOhflKeiFCn6DD556rM8VEQEaVIFEVBBwK6wUoTQRERARCDSAoGU/3wzZ5LJsrM7bUuS8/1+55fN7pR7z87ee+53yvXl5+eTQCAQCAQCgUAgEAgEAoFAIHCHBFGBQCAQCAQCgUAgEAgEAoFA4B5CtAkEAoFAIBAIBAKBQCAQCAQeQIg2gUAgEAgEAoFAIBAIBAKBwAMI0SYQCAQCgUAgEAgEAoFAIBB4gCRRgUAgEAhKEnw+X8HLgL9AfsBfT4ENhgz397xr4fojGxwJBAKBQFC6MHDgQLunVFekqSINFamsyHFF/lZksyKrFcmxc7H09HTTz5q0aGO3bbW4bWcoUo3bst/Qtiw7F9u48lvRW+z1lqjI+egW67CCIocU+U2RtYr8WRL0FqgzIdoEAoFAUBLhY0nIz88/UfCmz1dG+ZPH/+ZLfwQCgUAgEJQC1FCktyLdFWnGNsVORQ4qUpY/B9FwRJHPFJmoyByDjRFJ1FakjyK3K3IRFXUoGgH7Z7kiHygyRZFs0Vvc6g1tuUqRXopcq0gV1tle0sgr/H8qaXzUz4pMV2SsIrtKit6EaBMIShAceBgcwcyT4MCL4BjBPC3R6n8oHcSDHuLhWYixHnRSKpElcN7LZQHskFMFEWWbN2+udOaZZ76RmJh4DwWPkis4Njc39/2tW7f2O/vssw+Ts4i6SPUnYkhNTZ2g/HnI7/cflpFZIBAIBIKYAdFDgxTpT1r01SRFHlPkR0WOBhxbV5F2itzKxMI2Rf6pyLwIta2SIs8q0o/bGQ5wLnZieYH7NZ4iQ2qJ3pyjgyIvKdJckY8VeUSRpYr8HnAciMoWilytCOzpZxQZo8gw1nmx1psQbQJB6UEKacx9e0XOVaQOv49w3Q2KLFPkQ0XWR7ANZxvagPbU4vf3KZJhaMOGCOvhekU6K3KeIlVJ81jsUeQnReaz7C3heoBRcJ0iXUgLma5JGkkDL912RRYpMleRX4qpHlCDNJEnycBJk7ivuTauVxBRtnfv3tTq1atP8vl8Z5Hm5cyjogSaz3i8grsaN258iXJej5o1a/rJWQSa4/6kpqbmh+lXMJie4/f7reTG3q3IJcq9uyvH+2X4FQhKDDBuP6lIW9KiN0aRxQiEc889NyIN2rBhQ9B74X0P7hm0v6HuKRDEEVLZjkL00BAmMY6GOH43aZFFkPqKDCYtOmuyIg+QFrXlFVqTRko1cmHHvqvInWxz/CF6i7neQJyNVuQh0kjGXqRFq5kBqbffsowgLWoQhNbNivQgLZqs2OqtgGjTa8qUG5/V0Jfkm6NIA18STVH+Pn+kWznLX4DUhykeyMjIQCjnFUEWXCAcJqekpGQEHA8y4h+k5VUHYrty/P9Eq3GLZjxoteZJ4zVF1jCRhAER4bPnkBbe+5UiPyiCcKhVHrYBhFY6EzvBFumnsuCZHMYkD7waP3nYhou5DRcoMkMRPLMgFfcwWYGJEZ6Xbor8V5G3FHmRvCXc4kEPpynyvCI3KrJAkY8UGc4TBoiaOqyjK9m4+FyRoeQt6RdpPagEF3+vZYMYAUAeFSXIwl7vrLPOSlq1atUjycnJz2G6NMyjekRZYERbQQQaSLkaNWosP3z48OBmzZq9tmXLlhy79/ewP9FckH+Tmpr6FH5Tfr9fDASBoHgDY/cXpNWwWapITx7HEcmxKxYNMiO2PCK8bPVXSDZBnOFqtnfxDN9LmhPTDuB4fZC0SK4p/BtACuBfHrTtJr5ueQ+uhWij7xRJI81JK3qLjd4qkuagx1qqK2mRbHYAG3YyX+N10hwbvbm/xVJvRXYdLTs260JeZDdlQgVhdZsrzc8eWnnR8TIyXpW4wXdggGAxBAb+viDHt2LSYWAQ6SfqjFv04wEeBFoD0rwqsxTZQlpILkimn/m9B/mYZXzOQDKPdrGDAaSRdtdbvJ6PB68fmFxx2waMcyMVWajIYkXOJM3TMpMHSEyg8EStJK02AAgoeLLqKbJOkWs8+i5irQcAIe0gWbN5AYFosvHcLkQ27uU+TyONWIeuNvGE8kQx0oNOTJlFgCXy5z6r11m+fHntdevWzUpOTv43FZJsZtczu385nI/r4HpO2uGyP7EAdPWKInNSU1NryJAsEBRrwEaE4/US0qINLiXNOfNMPDQuAhFzYfsbqSg9gcAlLmfb/j3SHMgqWZTnsy4GfMW/ARApcNAmu2zbNUxAlfewv6cr8in/9VxvDlGa9AanLyLYsNkB6sZ87OJaKDnSi7SggPcVuaG46q0goq3MW0ea8gK7SsAxeCgQ7XDTKYtP9DrYqcwqGbtKBPTw12VMQOiLOUS0TQ9y/DeK3E9aapeennQGEzelrQaPlagMkBYgJ78mjbyyQgx4DURlIUoNkWwbLZ6D0GZEv4GEQsgzop8ednh/9OlNfkacIIkH2cakkb9OomFAQMCDgYg9eFh+s3ge0iXvIi2tUq/J8H4x1gNxH55mw8FqKPbfvND4gJ8HTCiPFBM96BFlSUGuk0jWyC31Gjt37uxQt27d8QkJCfVMjAu0JY+Kpm4m8L3KnnRC2bLXtm3bdoVy3V7169dfStbqq7ntT6wBQ2lVampqD7/fv5wEAkFxxCmkOWT0OjtwViEaumGsG6YTXh6nb4bsb4TuKRC4xam8loPd9mgY2wI2BJyuZxuICKz1pwYchygtBGl8r8g7pKXPOUEjJj3KhjXgExPp2s5XUsPTG1C5strhGZs20/xFn5mdgjULSDIQ4scjrDeriLreHMCt3ojXjqi1BmJxk0ftQippZV6DICtpQ3HTW4HBnrh/6xd5mTuq0LltTxCVCRa9BiLux1MWHnk67++Dow93PzXmKSAZGSdH66WkpJi+H+22mMGsLVauEYF+LFOumW7hviBg3g5o70W8aI73BV4s8BwbZiMD9RYlIBqtA2memVChysg3r8ivEdWlb2G8ic9dwtdKd9CGZ8ORKkhZr1GtGlWooNWj3LV7N+XmnlRmCmHDe5gksovRbBB3VOSAg/NRqw213BaxfhZFQg8W4UYPt/H3eLnDiQrnIFUGYfSIfB1VDPRgjAIrYrtR6Ogv/f2EW2+9tey4ceMGV6pU6akg19GByTuHzCPagk7uIO0ULDh06NCo3r17Pzd9+nRM0qFqtzntTzwBRsmS1NRUjIvP+f3+XBIIBMUFiOSC8wUOh3/z/Igor7MczkuuYSS3IkB0he2vkGuCOAUc7YjE+geFd+B9QppT3gik700NcvwORe4gLesFpWjmOGgbyKYq4Q7C+uCd1/5DbVtfXOT9eQs/DUW0EZM9yMB4PoJ6s4uo6c0F3OgNEWzYMKJ7iDVGc76HMbMBOkb5mo1h1rOXcv8vd/C9hNXbeU3OofNTzqWqVQsPQym0xUuX06+/bXeltwKirfLBtb4Dm76jmkc3HMts/Y9R+ZSE9J4KQY7HZNM+eczGe4480GS/m2/UI2Ip2C5vod6PVDuIByVE/0SyiLrXcBNGWdmJLl3ot7jgN/5hA+/xD/DsKN6/LQ9M+PGbkWzw2iCS8SLDe9exIakDzzGin5BSiZTLH220AYPikFAHNDrjdHpj9Chq3KhhwXsdu3SjXbv/DHY4iI5PmeixCoQKw3MEJ8EBF/pcQVoEFSLa8KBmeqkHm3CiB9SeA9l7o8kEiEVEXcM4CcJnbZDj8Cwh3ROF7REJ+51XeqhdqybVqlEDlpX6/4kTJ2jTll/c6sFnMv77QswLBRsY/Pjjj6c3a9bs/aSkpMvC9M0soswsAs2IxEqVKj0zefLky5988sl7WrVqhRndjGxz0p94BHQyDD93jm7b6fRCVna1NduVV+AaTjbYCAuzNDwjoWHlGCfXDXWck/6WMBIG9kEqLxA3sI3xT54PEfkxI9oNCqdfl1FmjvorkW2COAAiim4hrcZtVphjsRHVVTavj4j0caQ5XJEqaMdhBru8k5UDW6U2P4lks4GBbPf+5YHe4MgEuW4WpYVMrxdZj7gfyLqJpEWxYe10LFJ6S0hIoNMbnEbbTMig6tWq0hOPPqzqcX/m3zRx6oc0Z/4CatfmEvr2hx8p+/hxL/RG3H+kxgbLiEMJGtRbA8GIskU3cX/m8LogXMYV9NRXkdWk1X2b49Xz1qB+fRr61ABa8Nli+u33HdT5ig50eds29PnS5fTKm29ZIdnC6q1gAdC5feuU3y86f2aNimXnzu5aaVSFqcdAEIwx+QFiAlpRYdSKrkefarm2NIxaIJAskEEIvUXkTL8IGB2IBhnu6Eyf71nKzx8eZLFj/OsECR5cw6r+XXsWlO8vWgtR6DqbX+fwdzc5SvdGH1/hwSsUUwGD8SIL19tKWiH8l0mLaLL6PbxMATUgA/Hog32LkGwW+9XMYhsSuQ3Qg3EzF9xwW5DjkQY9kkknDOLYVQbel2/489mkkXaoy2KnVtlJeqhf71Tauevk/WXqnVqX+is6qV2rljLIL6MZc+ZRyrnn0E+r17rRA4DoyrlBSKl23KevmITDDj9wpLwZ4lq/MkmCfrVxowegZfNmdF1aZ1q5ajVd1bE9Xd2pI42dMIkmT5/p9fNg9RlDG7Gr6PXVq1d/2+fzWakplhTiWU8gC7t7g8xr0aLFD8p9+9asWXMexefGBl4DBj5SSe/1+/1uann0ZuPVCR4K87wLwv9m7BBSrmClFlawYzwkPqLa3zgB5kxERB9nO2YLv49UnAZsI2z36mZWdgk1I0etkLFe9jeQVCsmtdrggMV4i9ImO0Icdw7bDNfyAtfVb9QuUR5Kl6GO0z8Lcr7rfhcjAvVx0pyhVhyyFxpegwhBqh5KC4UrCTSCfwvgAz6y0bYBVg9scnbjgtcgQt54ZxwdO5ZNWUezrJxeibRyR895oDd9p8pOQdZVWGss4vWCauKzPYJN514izVF/LFJ6a3rBefSff42kex54mLbvKOqzTExIoHffeFWN1gLq1K5F/3p2EA158nF6d+Jk+nl9BmXv3++F3qAfOKRbBvkMGVPYUA2bz43n9+D9XMWk2UsW77GOeZUBNok20+etQvnyNP5//6UpM2bRrHlajMmqtWvpoykTqVP7dvTuBFv7L5jqrWBxMCmt8e7ldzRtO7tripoSdLR7eTwIV/OC/ESQiyLn9dtyTy+5ycVgYGag1OWFbTQxh+9rp53BgALXYHRRTLyWhyTbMMckW/Bz9QifTBft0gfiLBOdWRXLRJlTieJzhJl4YsB70+wYKi5xGRuDb4U5TifZvmByCZuffGpyLK7VmIkZq20I64ZKOUcL8pvz8QJqe1UXatWxM+3e81e4Nl9psQ3X8gT4bsD7K4JcA5G78DTdzRMpJkiEjiNl1BjxOZwH0mQ3epj1wXt0aetWRd4rX64cTRo7hrp2uYbaXNxSmQgH0PdfLKLLLmldUJfCoR4wHsEBMDjgfdRaW8h9msTHIFLtDgq/XfUYHv8vdaOHenXr0NjXX6bX336X5i1YRI8NHEzrNmyk666+iv7aayko2I4eLBFsw4YNS87Kynq5Ro0aMyySbMbFt6tIM9wP98X90Q69TVSyU/NrKjI3NTX1ZUXKObzGf9gIruTg3DcUmUCF6fOW0aRFm3xE1Oni0uYRCOLxt4n5oBdp0cuvGEgn4gXnUq9INpAY4YiMwGNAphgJFf1/h4SXo/66vGe0gXkYETajw5BNwCYmDJYwOeXqu/WKZAv83CL5FZN+xwiVmcB4x+LxRnt2IhMaWP/vCXMefgfI3+xho21Ya3S0enCF8oVJdR/NX0Cbf9lKv+/cSfv2W1623uOR3mBbwBmPGmu3BXzWwUCyGQHDHXVpcyKpt4oVKqpO+ukT3qVrrioauHVxy9QCks2IMmXK0BXt21FObq4XeiPuy0+kZT8F4kZeLxjXFQhEeZNt26427oPvpi1/F66ftys7tqfT6tejPXsL97o4fvyE6uhH2nKnDpfb/e0F1VvIiJOsW8rnH+lWbjQvlHaY/EBnlnlwzlMeDhI9+IfeLcqDU1e+bw+ProcfI3ZzvCUOSTbiiQQPhZv6YWvYMHnMZPFpVWzDGOGmv8ZfXaL87OB+cCXAE/J4kIEVkSkD+PPfI7zYwnMHL2y4YpY6gfQ9D4CYuU6YHKt7dm+z2IZbrRxUtpy2rv7q2+9o7/79dPDgIcrLywt32i022jAxyHeB6CKENyPM+VR+ry2dvGtMOf5OjZ6on9kIS3OjBxR3Hfvay2o4d62aNdX3UptdpBJPRfSjTIZ/7vkrWGi3HT1gHP0yyGKoG5MLOlmOGXc8aTW0GoW5JibJqVa/Z7PjruzQXvUo6d7JXOW7nz1vPtWtU5tOq1fP6vPudnwt2PBg/fr1KYMGDVpWoUKFfjbHJZ/Lz4sci/ujHWgPFaaklmSyDX1DbY+vU1NTnabYd+exzMlqFwQ7PKxO7p0fpXNiCVcOMqeES6DYPaa49DeOSLXhPFegoHU7toXL81y5PNLfsd1j7BJbAdeIan/jBEiLgzMVETVWo0iG8LGf8Tow5iSbA7ItJv2OIdqz3bAgnAlOWkpfdcN7dfg9SFUL90L0fScb9kmncLyDTgQhpa9KlVMK3qtRo7r6HuSUypZ9akj3bOiB3rDjPeqUw/k6jf9HDTcEINQ26wb3d18k9bZm3Xo6evQoVa1ShV5Jf45mTBhHt93YlU4/rT7VqF4t6MWSkpLUCLi/DxzwQm+qOU/mO4zqxnyTIPxBoH1ckdcgZsC4fIispzqHfN7q1NLWXyhjZMTGzVuYQil8D2sVrE2cPG9JVlp6uEu5HyovOo6QwOkUPKolPemOCQ3yDhx6lOzlHBuBaLIxZI/d9BoYcD7ghSGKdu92eT09ug3huKjdZjXn2blR5/NZOjclJQVtmeCmc8o1cil4scyYQY9eA9kWwUg25PKBqITXZwv/PRbmnMUsOolzJg/SjXmh5xVAGg0L8TlIFJCrFxgWqHq4LwxNMy/WUjZUrCCkYXL+uU2o7709qRoXnbz7jttUz8KRrCx6Zvjzrq5twKV0MomMARdeFBQxfoIX9+hXsIhMxFMH82zBywk3x0wnekA9hcnTZ9H9Sv/v69mDet15O32/0k/Hjp78+Bw4eJA+nP2RWz3geQiWPqDPsFcb+rKb+63vzApLFlF9/w1yPq451M3zcOiwxvGhVsSixVoT/9q7T+33rj+0offMhmeoUX0Tpn7oVg9mBI8aNZaZmdmjSpUqr/p8vsrxMI4phlAzZSHxjdKuR6tVqzbJAWFXHIHUnhWpqakP+f3+SQ7OP48N4D4UvE5IKCA6EjUo4Xz6yOa5+Q6+m/xi9n3GPEXUCtEiKaKO7VQMwAh9QImBgSw38ILQU1ipo+ek1p6Ne0a1v3EC2AHz2TZ8xea5ICKPMgHRzWDHxoxkMx6vn2+SchyTfscYmMt+YVsuFJoYyA4dYw2v7+b1cCj8yOtmZNFYiWxtaqUDID7mTSt66+eHPFPw+okhw2nuJwut6gOpsdtc6g19ROrjAJ4bWlH4aEesKzIjrTeQkZNnzKLed92pRmFdeH6KKqFw9NgxNbDBI71V4GfJrGazvv7oyb8pfb11Cr828hAd+RizskYIBllt9TkKd9x3K/zq327XXUtvvzdB1QtQKTlZfY1sKx2tW7agAY88SNfffpdtvSVYfVIPXV0WFcrBWk40OQRRAO87HBj0KLaucTJQRSq67VYqPfA8dTQQMYpe043wKWykrbdAsgUCEUHYNeJj/j15WeMORFqo1UYl/h3r3qqG/D8MklD5ehkUPtJJx5mhPkQUV9qVV6geAnUkvOB89f8mZzW2cu2zLByTYKIHhMvdQoXF5uFxuspk3DEr0L6BrHt6TtIDIvbSOnUsiNyDZwlFSoOFKP8ZOo32LBttCPY8IEJxKWlpdy34uF48Vh3lY+DuaR0JPQDYOeqHlX4a+Pij6m4/8FTedEMXevSpQXQsWytxWK1qVbrowvO90EPg71cl2UaNGlX16NGj46pWrTouXki2gkYq7UG70D60kwrTSEsy4Qbj64PU1NT3FHGSCorvEB5nROIn2TwXzP9sNvTsjsmlIbLNi/k/ZpAoOFM8wQsl5D/fzAuFI/w6onBac6+49jdGgDMKu0oOcUA26cB5KCMEIrJLPJBswc4L+D3HpN9xAJA3v3pwnfUWjvnVcE+rbXONX7ba6t5pHuitPD8HdmyvbdHQG0rL9Lm7h0qyWUWwGtEu9FafbVOzlGyU6xnM15vN4y7q08FRD+eG3Tr/W7163lCjDhse1K1di14fnU7NL7qAOrZrS/3+0ZsefOyJcBuyWdZbQpwMDMiNyomzwSqHwqff2UFJr7VjtpiNSOooEIP6azoQDbac7IXWmg1QSF1o5mHbsCAPRfyBvRllGBS/4/+HGAioYMgm69tKhww5375jB70zfiIdPnJE/X/J8q/U/8dPnmbl2mUtPDOV+fd2JMhn71kc98xSR4651cPMuR+rkW3h8KN/lVs96ORBMD3AM4SwakTaoj4bZpRZpHltK/P/03gixOsHAs4/yqSIYz3k5OTQPQ88QiNHvUTXdr6SPp87gz5dspS+/WEFJVesqP6PUPhOl7dTX99xy41u9BBsPE58+OGH3y5fvnwPimOgfWgnkz8JVDrQi3+rTuce7BpW1+G5cDzUcnAeReGc4jz/xxTGWloRqKkVd/21gbPZHlihrz8UgWP99Eh/H+EIFivHOLhnTPobQ8ziBe5rLq+DWr2IDvuvk+/Z7TEOzo9pv2MIPVIoHPS1wDLDezP4PYgVL8Rxg51pBZbqG2N3TKwJflj5U8F7iz5for4H2brtNzv6qOKB3hBoYDfSfWk09PbLr9to8VJ7me5wcHuoN72Q3t8hjkGqEiIpkKmAklYgrt+lwihRODfhmELwyYVU6KgK1oYswz1dP2//e3c8Xdn1FrVO9MN976Mxr7xEMz6ap65DAESxYef6t159ic45q7H6GlK5UiXLerNstFdedBy529g5wizNDUWF73E4MExn5U6Pk4HK6/YgNQthGR+SIKLQo9yiQMAh7eAr/l6dAB7Vr0lLd/ISGOzKh/gcOXlIk9hmmAzw/+gw10W66wEbbTAFJsmXXnuTDh7SUgc/WfSZ+j8GOosTe7hIAcRE55kMsv/mQT7cNT6IlB6wqybIxfz80E0IExpvRQ+6LswmmzzWxUR+je2z6/M5mBRBwM3l12MC+R9FDrp9HhDZB12g0C1e335TN3VnJKQRX3nDLdR/4GBavPxL9fWUGbPd6CFwUawSbb17934kMzNzcjyPaWgf2kmFRFtpcNi848KeGE9a6vgOh/e9jOyVjRCSTVCcgUwUFJdGalQ7XgwhCvmzSN7USlSh15GHfJ2Y9DeGgJPsNhfjqQ7k7nUi67V6jTp3fYyD82Pa7xjikEUiQl8LLAyYO/VUaitknb5Tl1Vb8IiVg/bu26euCb78pjAbcda8T9T3IHqKn0Uc8EhvSH2cQqEDEoqY+tHS25NDR9DHCz+zUuNaIzhmz/VSb0fNCKYAYM2JNFE9gg0ZfroTHmWJkEqLUkbr+XV1E/1UNNzTk+cNEX5IE924RavNhgwrvQ7gG2+PUzfqe+zpIbRl66/qa4geKGJFb5aItkrzs7Fjywoy33VwYM6Ung/nfdIv18XgsIcHstso/G4nkYLXbUAqHjYLuMXm9Yxe0eG27pif7yuQEOdmZGQkKtJQEVcREsr59RUJRu1GNHXUSKTpr2OwyyhICbgSLrF5HlL1viTrO6fYAUKSm0TguilkPRz91wjq3EosL2YbuLyCpRXm8AI81DOCyeAHk8/OdauH3Nxc+nPPnpCh3hj0UeTUpR6ArSZ6AGkDIu1l0nYFglFwIY/zeg4vCLKfTa7bhK/tWA/YehyRbM8M6E9XdWxP0+fMVT1G2JUVhVxVK+TQIdocOnz7F4fPkUq2TZs2Lad69eqDlyxZ8oTyvRymOALag3ahfWgnlQ6SDUbK7X6/v68iWTbPRdQtdgW+14YhpuMYn9eXr2PnOXLy7AkE8QJ4MPrzs7+c54V3eK5M8/pmoaKXdMLEyjEu7hnV/sYBZvEa5E0eH50AqV+PM+G00q7Ozb4zB7uHhnweAr7nmPQ7DgD7tmGU7tXQcE8r+D1G+vBCb3DqtrHIm4DJ+ilaejtx4oSa9mglU2bJsi9p/cZNXuptF6+5wkUEIzilu2HNf4VhvQF7DfXsYIPn8utME34A6+adXj5vDc84nbpcfRXpsQ+XtGpJMz8Yr65DUMYG9eyyso6qRCZeQ0IESpykt5DfSsUZx3zJc7JR/A+RO8HyddW6Bif+122Uhz+KWEW3eX1fTOZIMXS7WcAwsku26cjPD3VuT15E3+u0YRkZGVjAo5jm2yaLCU9TR427itqVCD43YN0R6Wm1fhl2ukRxyFoRag+i5DpG4Lod+NpW2xApfGnxuG/YOAoG1JPsQcG9HRj4Hwmjh2/d6mF4+kv0z0HPqrsFBQJ1A0a+ONorPXzNE1oRjou0SDZshICNIUawIXoJT2z6phcYH16IhB5AsiFE+7I2rWn0a2/SG++Mo6HPj6Lb7rlPncD+78G+6nHYzv2t9yZ4oQcKMUYldurUaXHfvn377N+/f2M8WMpoB9qDdlHp2HkUALnd3O/3O4n8BrF+GTnbRXsrG9Dj7Zy0ceW3Pj2NAGLjmRMI4g2v8kIINUvPYxIKi0U4VJ6wYd84Ib6CEi7hjrFLzARcL6r9jQOgVtn1pO2k2d/muailhI3urgxDHoTUeSTINgs13mLS7xgDbUV6dJUo3AtBA3DIbrd4/JoY6GOtR3qDMy6NClPOzYCU3Aeiqbfs48epz8P91bVDSLsy828a+q8XvdYbHKIIBWtp8nlz0koUDeY+w7lfn7kRkGzYEViPJATX1D3EvWALo9TSai/0dl6Tc+jD98fSQ316qU798ZOmUru062n+os9Ukm3cm69S+XLl1GNXrlqtRrU50VtBseB+a3Oq7cjOn1irDC0Y27TMGxWmHkMo9Rgy30YVUQpds1+4Yq2LH4CZ0alHlkUTt3lkHGPHEtQ9muJh24Y5PhNkW/DIGRgZyeQudbEeE00FM1xKSkqkvh9bu4Ahqi0jIyNazw70mGnxWERsVIxgWz5kQei3VzUGEeZ8J2meXyuYxr+BSGCGjePSmSjS46lRs6kLD/x3UNGUSjxLH3C7zcK5U/j38olTPdSsUYM6tLtUHeCvS+tMFSpUMPxU89V00RGjRocKS7arhzmkbXiA3+oufg87L1zDejgWMCkhtfYKC89DdzfPQ8vU5nR52zbU7c6eqpFQQF5s3qKm1sKj5PHzQCbjB54NeNByx40bt2P27NmPffrpp/e1bNnyxhiRIvkrVqyY3blz57GZmZkH9LZxO0tq8fx8XggN8vv9Jxycj5zzhxTZ5+Bc1N65i8KkuwsEpQC/UNEI4Y28gEIa9t38+nPyKOMkGJEWbmfZwGOsRMCFuF5U+xsHWMJEwXxe2L5g4ZyRpDnhrrSxuDX9zkx2BrV0TCBsbKQQk37HEIuZ/Ehj2yuS6ML6tZpO+TkfG61as/gNb/NQbxgjbiIt66VDkM+xDkRd4z+irbdff9tOD//zaXpx5FC6uEXqSZ8jCgsF/v/au9drventQ58CA3sakhZYgvT8fgGf3cF6eozH3MW8Pg6Vsoqsyqp8P1d6q1/vVJrw9htqySIEPhjx+DNDFT3to149ulPzpheq9doOHT6sihO9FRBtC1ds3PTHnp01z65V5dLkSVm18zSvjlm+MgrW3XP0qZb73fwCIkjKxKodWNSCyf4zAs0c5nwZkx/s3JyAv06gpwqfiNF35IuT52u7jYWazv43iVBb4BHYwUbCax5d8342SL+00QZEp1zscd/W2BhgP2bSqJci4/g91KT4njSvFXYagOfqELd1sgWDCu6Md/kcR3pA7YnVa9dRwwYNKGPjJrWgJuqRrfl5vboL54ZNm73WA/qMGpHPKdLbYAzkM8EQuOMCfjThooLuI420+9qpHg4eOqgSizdcm6booWifGzdqSB/OmuO1HoKRO3ksYPpAOCZlZmYmtGrVaswrr7yy+oEHHhhQrly5U6I1iGRnZx8cM2bM6P79+yM86ii36RgV3SyopJFt8P7e7ff7F7m4RncXermeSvbun14h36P3LcEssiUYyeLk3Hjrbxwjl+d9zJs92BZALTPY/nC+ITID0Qpwyu9zezM7hfOtPAsOiuzb6m+w+0Zgl1QvgTkbkf5zmSwIlYIFGxX1zZAhsc7t9+ol2eZgt9KY9DtGgM0AZ3CfCBNtyM65hgkTq4DduJTCO3O9wgSP9IZo+WtJc07jOSpjYufey+u7qOmtRbOm1P4yzXnf5uKWlJR08mbriMZ6ethz9NvvOyKhNwCBRXB2Ng1YR93O66zFJue9xESb1TIhfXj83epWbyhbg/WXvulBIN6dOEkl2o7ZqwcYVG8F38iegxXL5OXWoI2+cypTvm+oCYMBYx+pRqOPPNAkXgwLn833I4kbI0AmRRpuiLZsEhDZ93itocgRbfhdIkR+PstWl9dDCgVSCTvbXEw8xgZrgsf9yrfxXGM7buwYNY8X9ADSIQc6uH830rybdiNAT9ID0iFR0DVKegAG8zM3jo0BkGsPkkbetybN4wTUYENjXohroT7CSNaH4+cB5NqwF16kR+6/j5pecD59v0Irf1K1ShVa9tU36gYJEdCD8Vw9kk2PFPMZP+vfv//X8+bN+2XChAlP1qtX76JIDyC7du1a07NnzxcXL14MYvQoyxE2QI7x85xAJSuyDcbXXX6/f7cHY0Mszi0tKFXprsoiXtJ7TwbIfuwCfBaTT4j4qsMkFJw4ILuR/bI7Wg0KRriFImSi1V+vNm6IIDDZ1rdwHKJ3Tnfw+4naMaGOC/J+RPsdZ4CBid1E21LkSrkMIi3IYI7N816i6BBtR9j+90JvMEhBrqHkzwZ+PvKYyIFjdGoIMimiegOJBnKterWq6kZzp9atQ/l5+fTnX3/RqrU/q2mQZmSSh3rTnelIt77Z8L4edISND2YHsbea8+/yewv30Gu89fBCb/v2aXFi2Pjgsy+WnVRz7bwmTWhdxgZa/fN613orINqyK9TuQMl1lvl8dIrPnEzodTAteVW8jCRmxFS8RMoVEzTIyMhoxoOIjw2M9YoOT0o75JpsNQyL1KayWFGxJsjvCoMBIogmsJwI+C3dGsH2YIJI54G8k4FkMgKeBuwcGSoSryZpW1qjBuOPNtvwDRMyz5od0KPP/ZSYmET7Mi0Fxr5oIISsAm2/lgf4zmTda0JBJgPszAkP1F6v9WATTvSA+lVI3YSXrj1pHjdMCON48irPC4ZwBUYRsg0SDpGCX7rVw9SZc2jGRx9TozNOp7Jly6rRfn/u+SuSejBCH8Ny+G9+4HuLFy/eeeaZZw5cuHDhne3bt7/D5/Mlev1DVSb33GXLlk1JS0ubnJ2drRNsWSx6VNtxblsSWU81iGfk8HOQ7vf7XfXHRm00gUDgHlt4vqjDi1GM661IizJ4krTC8VFFYDppsBTUSPfX43sKBG6BTT6Q1YGddVuSd2VkdMBBi+ytu8h+sMYCJqU6RVgHWLfs8VBvX7i0OSOmNziqdWd1jPQGPEVaOuz1VOisR8ooApC683oSGUHYiaEij6NX8PHh7EA4mRFF7Cf75WKC6m3ugkXqJmzYBKFa1arKWmQebfttO5UvX54uPD9FLV9zf/8nLO/kGkpvBUTb8b7Jq8qOzbqMG2Qs1H6EFzUvHOxU5oSMX8FRDMk9PfT1bhYjkGc9zPhGRkbGxWxkBFtsli3lX/8aw+8JuoTHQt+5EfWwEFH0L9K2lcfAvTYKbQLRVo8njq48uBmxK8z5IGBm88SS7rANw9lADVoYdNduyxnWIISedtgGEExTeQK4yUK/A9GJzx/AE7DnerABN3qYaHgeMPHBg4Tx3GpqBGp2grhd4eXzkJOTo0b4RVEPgL7bcZ7B2Cmo1WaQnOzs7NyOHTtOGDp06JonFSQnJ9f06gd65MiRvS8qGDFiBJxXINR0cs1Isp0wtDGBXOzUHCeAJ/cOv9//jVgNAkGxBCJ8d7A9CMAJh0E85kawHuXmMfEVsr8RuqdA4Bb9mJh4nbTNPswA++Ntw/wcDuAH4LT9iJxv9vcP0jYfCLlhQ8amTTSNy4js2m0rWHYlEx+R1JtdRE1vLuBGb0tJc+AjEhgbq21h+7Urr6MQ7HA9vwfnP7imVyzas3DMtmbJ80JvWHs8+PiTarrtZZe0po6XX6a+t+uP3fTtDz/S+5OnhdpZ1JbeiiTzHr+v4tpy47Mu5gVVA9Lybp8/3KXcHzJmlThs4wEWC0o9iNHHP4JgO3WAFUE9pLpUWJtNx+pSrkvUJkH0Ggi1YLtVNeSJbBCTFNGKCv0/0ogmkCqIQsJOW+Gq7CfzOU9zW93sKIxRCimKqO8GorGMzfNBMAzjc52SC3ieb+O+rOHvCERNOA9fbR7c4YnpQ/bDvONND8TfJYjGhfw84v9w4YTl2fAYxJPiyBKgB2N79DptxtcFRJv+esSIESs//vjjfjNnznysYcOGl7gefLdt++7mm29+2e/3I0JSJ9l0gg2Szc+u3pYEKv6RwyDu+yh9ziSBQFBcMYvnAtQsRSrlLaSlWA6PdcMiRHSF7K+Qa4I4BUgzZK6gHAgyV54ysSEWslgB7GLsEnmQCmv+OgE2U7yD7WrTQI0vv/lOFZsAKX4TOY/is6o3O4iq3hzCrd4A7NJ7IWlRZJ25vcBisp5aG4jHeexFFODPXusNabU2U2tt662AaDMwdyBgmhVdjkgZk5KGlJQUhGGOsXE8GOg00ZwKsxou4zy4hteAV+YrJlVQs2waG4sgnfbyoINJQN/qHhMMPLYdyDtC8CWetNCGLhb7juLoIPu82FYdRAU2d0EhXETnoo4ANj9AlBsiug5wm1CkFNv1IN30OjawL6DwOwgVFz0AE/l5SOexfhZPiviu97BBUY0nS9Sk686TWycP2xAPeiiY3VhAqhkJNyPRhr85fr8/t1GjRsPmz59/Q1pa2n0JCQllDdcIdw8VeXl5xxcuXDi2S5cueBZBsBkj2PR6bPrmB3qbrNwjnoE+DVD09yYJBILijtd5rhzBAsARM0n6KxDEFRazDQd7F8EzqDd4MMGZNYFUyqlsq1xNoXeHtIIFTH7gd1Teo/5u53Xq9kjozeG1SpPejrNND/seEcA9eJ3lBOjbf0iLKryPv4tiqbckGYcEghKPVTzAo5A/orsQ6YbNGOry54jJRgFYFAHF9smR2GkJFSWv5/uiPl0H0lIvajHRguJcG7gNHyqSEYE2oK5YG9J2v0QbBnN7qjOhAkJtLU+yqL+yo4TqAd4dEKqNqDBi73xeTOhtwPOANFOQbWtKqB506GannkqaR0Wj23TSS40u69Kly4yBAwf+NGTIkMEVK1Y8w3B+vsl11b9ZWVm/jRw58rn09HRE9J2gwg0PjFFsxwPa4AnB5vf7nRD7XjgD8B12V+5f2qOeBYKSAoyD2FBoIs8Zv/N8ETME2xjBymYJbvsbrD6cR/cUCLwCIsk7MtkD+/YZfp1r8fya/Pxj3YDaW4jIOuBR22ax7Yf2NHR5LZS5QdTTLtFbTPWGPsIxDwcFgjqQSjrUxvVhd4Ksg0MeTn8EPnxanPUmRJtAUHoAcmNYjNsAA/U5lljhB5bSrgcQbi+wlEQ9WCLAAt7XyS1jHbfAdNKy6enpaz/55JO7Fy5c+DgVjTwLhEre/fHHH3PS0tL+s2bNGn1jA/w11mLTU0VzAtrgpj+xBgysR/x+/xESCAQlDevIgVMuWiSU8T4e3TNsf4VgE8QpkH+JzeuQgoeC9Eh7xiZt86mwhJARp5DmdEeaNJzzcHzeQ1o5Ka+B0jaog4hSLShTYjfaaDf3axx5v1mU6M0ZYNMiCg0bF7zKaw0Ql8ioggN/X8DxKI0CZ/81ivQkzQEPPSOLZU9x15svX9JCBQKBQFCCwDuEIrUTuxtV4L+JbBgZUzWPBzGWfIbJH+eU4WuV4+uUpcJNYXD+Eb6WGpGGnUQN99fPSabC2hC5VEi06VFsej02s1RRy/3B/eUJEAgEAoGg9GDgwIFWDsOmWEjH686EBuwPlAY6yLZPXT4GNslS0iI5p/L/IZGebr5PVpMWbay0DWVsQNAg4+JCMo+qR1uQoYI0QKQUHgt34VA7lIveIqo32NHYEOFe0soTgdhCzfddbO/Clm3E70OfIOOwqcLW4qq3QJ1JRJtAIBAISiJAVulRaDCKEqlo7bX8EOcRFY0s06Pa8LeMYe7USbNcKprqaTznOBsberHUHJ64jbuK5lL4HUWd9kcgEAgEAoEABMcwltNIi9gC0ZHMn4MEQXkL7LwZ7Wh0RC/9iwVlRFAv/nTSyrvAzsHmXZtJiybLEr0VC73BDp7NAsdzc9KIyjqkEVtwEqPG2VrWX4nTmxBtAoFAIChpMBJdJ3hCTzT8H0iMmV2DqJDE0tNIk1h8/L8x5TPQwMjh43C+vnOoXvMtsB35Ee6PQCAQCAQCAbCDIlOL2Asg7fIz0VuJ0hsyOL5jKTV6k9RRgUAgEJQo+BSQRkSBENMj0HTCSye57ESC4Vw9lTSRX+th5jrJppJdypyaz/dPMByrO7WMhJkdcsxyf/JlUhcIBAKBQCAQCGIKiWgTCAQCQUmETmgR/9WJKWMaqFUYN0rAuUaizfhZ4DnGaLjAY8NFsUWyPwKBQCAQCAQCgSBCEKJNIBAIBCUNgWmfPiokpgLJLrvXtLIjqJ1jY9UfgUAgEAgEAoFAEAEI0SYQCASCkggjOeUL8n6+i2vme3xsrPojEAgEAoFAIBAIPIbUaBMIBAKBQCAQCAQCgUAgEAg8wP8LMADFt5hSV0kCvQAAAABJRU5ErkJggg==") no-repeat 0 0',h='transparent url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACMAAABSCAYAAADep209AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDY3IDc5LjE1Nzc0NywgMjAxNS8wMy8zMC0yMzo0MDo0MiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QjAzQ0YyRjY3NTg0MTFFNTkxNTQ4OTU2Q0ExOUJEQjQiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QjAzQ0YyRjU3NTg0MTFFNTkxNTQ4OTU2Q0ExOUJEQjQiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKFdpbmRvd3MpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NzRGRDYzQTMyQkFCMTFFNUJENzVDNDJCMTc1QTVCRDUiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NzRGRDYzQTQyQkFCMTFFNUJENzVDNDJCMTc1QTVCRDUiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6D4FKjAAACnklEQVR42uzazaraQBQA4MxkUjVQend9AcGVgqIu+gqFrkqx0G030oUPU1x0XajlPkL3Xago6MqfF+iyCxPNzWQ6E8/kHtOr2HIbKJyBQ4ZMmPN5JnF1hFLKMYPpYS46OAp7z0HXvxkKXU0kKFS2DhiTyNXhDQaDmyiKvun7sfo3Izb7mzwmH+RlGMNhobJer1+qAsZms3ll8kFebhEOOh5vv9/fOAWMMAyfIkhaGY7eFVMuoR8SRWB2u52BCHRMLF8ZEQSBVwRGn4AAzH1l0HoKklLyIjCQh+OvFFcmjSRJWBEYyIPD4WceKgpzMgo5kmsHYQhDGMIQhjCEIQxhCEMYwhCGMIQhDGEIQxjCEIYwhCEMYQhDGMIQhjCEIcwjYtJGLM65KiTxMc998xfCZAue58kiMJDnBIRbnJ7o8KvV6rNarfY8CILK4XAoSymFUsr21nA958Ph8HW3231zLtF4PL7t9/u3jLFEVyBtf9Nz5bpuXCqV9r7vh6vV6sd2u/2p1wIdkQ6Je/NMe1PZOXaI+TA3QJFDpy10k8nkfbvd7uUh0+n0a6fT+aSndyYBhP31MSTeAyKEuXk2YaY1Tqs5JDVRgvitQctCAFmezWb9ZrP51kLm8/mXVqs1hAQRAlmMBJC5f4CIITKMrY6LULY5i+cwFmwqWF4sFh/q9fq75XL5udFofARIiBJhjO1ajFFIuKcw5lI7JV4TUJmKPcrRaPSi1+t9R0cQwjx2TlsmL7VTHjHpm3wE2Zf63JUBxssdJ4eNcfnvAIM/34vXrEFQWRX67vFA1bO/SEJCgTAxQmRVQXs/tG82v7pbETZMP1FUaomOE99L34NLiIfGH7dOmgTm/wMlZwijrqnGo2EQyIEKOAiTP/L/d/wSYABH4OtcDgD/JAAAAABJRU5ErkJggg==") no-repeat 0 0',f=22,p="<style>";return p+="#"+t+" .media-video, #"+t+" .trv-media-controls, #"+t+" .video-overlay, #"+t+" .info-overlay {  -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; -o-user-select: none; user-select: none; }#"+t+" .sprite-background { background: "+c+"; }#"+t+" .brpBtn { text-indent: -9999px; width: 10px; height: 18px; border: none; margin-top: 18px; padding: 0; outline: none; cursor: pointer; box-shadow: none; background-color: transparent !important; display: inline-block; }",e||(p+="#"+t+" .button-holder { position: relative; left: 0; }"),p+="#"+t+".trvdfloater { z-index:1500; margin: 0px !important;}",p+="#"+t+".trvdfloater.trv-right { transform-origin: right; animation: trv-animate-floater-right 0.2s linear 1 forwards;}",p+="#"+t+".trvdfloater.trv-left { transform-origin: left; animation: trv-animate-floater-left 0.2s linear 1 forwards;}",p+="#"+t+".trvdfloater.trv-top { transform-origin: top; animation: trv-animate-floater-top 0.01s linear 1 forwards;}",p+="#"+t+".trvdfloater.trv-bottom { transform-origin: bottom; animation: trv-animate-floater-bottom 0.01s linear 1 forwards;}",p+="#"+t+".trvdinstream { animation: trv-animate-back-to-instream 0.01s linear 1 forwards;}",p+="#"+t+' .trv-floating-menu { position: absolute; z-index:9;width:24px;height:24px; left:0; background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAQAAABKfvVzAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QAAKqNIzIAAAAJcEhZcwAADdcAAA3XAUIom3gAAAAHdElNRQfiBRgKCyeBfAlfAAAAPklEQVQ4y2NgwAD/Wf8n/j/9//T/xP+sDMSA/4n/YSCROA2n4RpOY8oyEWUGtZ1EqqcHIRiNuCEKRiMOAwAAAsCVIyMyzqoAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDUtMjRUMTA6MTE6MzkrMDI6MDD/4PcGAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTA1LTI0VDEwOjExOjM5KzAyOjAwjr1PugAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAASUVORK5CYII="); opacity:0.8; margin-top:0;margin-left:2px;cursor:pointer;top:29px; }',p+="#"+t+" .info-overlay { background-color: #000000;opacity: 0.8;display: none;text-align: left;color: #ffffff;font-size: 14px;z-index:9; position:absolute;height:170px;width:135px;left:0;top:0; }",p+="#"+t+" .info-overlay .info-text {height:100%;width: 90%;padding: 9px;text-align: justify;margin: 0 auto;}",p+="#"+t+" .info-overlay .overlay-info-close {cursor:pointer;color: #ffffff;bottom: 3px;font-size: 16px;text-align:right;margin-right:6px;margin-top:6px;}",p+="#"+t+" .info-overlay a,.info-overlay a:visited,.info-overlay a:hover,.info-overlay a:active {color:#ffffff;display:block;  text-decoration: none;margin-top:7px;margin-left:9px;}",p+="#"+t+" .info-overlay a:hover { text-decoration: underline; }",p+="#"+t+" * { -webkit-tap-highlight-color: rgba(0,0,0,0);-webkit-tap-highlight-color: transparent; /* For some Androids */ box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;-webkit-transform:unset; overflow: unset;overflow-y:unset;position:unset;margin:unset;}",p+=i?"#"+t+" {direction:ltr; height: 100%; width: 100%; margin:0 auto; background-color: #000000; position: relative; overflow: visible; opacity: 1;z-index:1; }":"#"+t+" {direction:ltr; height: "+a+"px; width: "+r+"px; margin:0 auto; background-color: #000000; position: relative; overflow: visible; opacity: 1;z-index:1; }",p+=".trv-close-container { position:fixed;z-index:999999999999999;}",p+=".trv-close-container .trv-close { width: 15px; height: 15px; padding: 4px; color: #fff; text-align: center; font-size:16px;position:absolute;visibility: visible;z-index:4999; cursor: pointer;font-weight:400;font-family: arial;-moz-user-select: none; -khtml-user-select: none; -webkit-user-select: none; -ms-user-select: none; user-select: none;line-height: 18px;box-sizing: unset; }",p+="#"+t+" .truvid_ima_container video { display:block; height: 100% !important; }",p+="#"+t+" .media-video { height: 100% !important; width: 100% !important; left: 0%; margin-top: 0; -webkit-transition: "+u.toggleDisplay+"; -moz-transition: "+u.toggleDisplay+"; -o-transition: "+u.toggleDisplay+";-ms-transition: "+u.toggleDisplay+"; transition: "+u.toggleDisplay+"; -ms-transition: "+u.toggleDisplay+"; object-fit: contain; cursor: pointer; position: absolute; background-color: #000000; }#"+t+" .media-player { font-family: arial; }",p+="#"+t+" .trv-overlay { width:100%;height:100%;position:absolute;display:block;opacity:1;visibility: visible;cursor:pointer;}",p+=NaN+t+" .video-overlay { display: none; ",e||(p+="width: 100%; height: 100%;"),p+="}",p+=NaN+t+" .info-overlay { display: none; ",e||(p+="width: 100%; height: 100%;"),p+="}#"+t+" .overlayBtn { vertical-align: bottom !important; width: 25px; height: 28px; outline: 0; border: none; bottom: 21.5px; position: relative; padding: 0;",e&&(p+="margin-top:-38px;"),p+=" }#"+t+" .overlayBtnWrapper { margin: -38px 0 0 0 !important; width: 100%; top: 50%; height: 50px; display:none; position: absolute; left:0px; text-align: center; z-index: 9; opacity: 1; cursor: pointer;  transition: "+u.overlay+"; -webkit-transition: "+u.overlay+"; -o-transition: "+u.overlay+"; -moz-transition: "+u.overlay+"; -ms-transition: "+u.overlay+"; }#"+t+" .overlayBtnWrapper>div { display: inline-block; }#"+t+" .overlay-play-wrapper { border-radius: 100%; cursor: pointer;position:relative;top:50%;transform: translateY(-50%);}#"+t+" .overlay-play-pause { width: 80px; height: 80px; }#"+t+" .overlay-backwards-wrapper { position:absolute; margin-right: 35px; width: 8%;left:0px; }#"+t+" .overlay-backwards { cursor: pointer; left:0px; background-position: -441px -5px; }#"+t+" .overlay-forward-wrapper { position: absolute; right: 0px; }#"+t+" .overlay-forward { cursor: pointer; background-position: -472px -5px; }#"+t+" .small-nav-l { left: 0; border-top-right-radius: 10px;border-bottom-right-radius: 10px;  }#"+t+" .small-nav-r { right: 0;border-top-left-radius: 10px;border-bottom-left-radius: 10px; }#"+t+" .small-nav { top: 50%;stroke: #1EAAF1; height: 50px;width: 20px;position: absolute;;color: white;background-color: rgba(255, 255, 255, 0.85);display: block;cursor: pointer;-webkit-touch-callout: none;webkit-user-select: none;-khtml-user-select: none;-moz-user-select: none;-ms-user-select: none;user-select: none;z-index: 3;}#"+t+" .trv-poster { position: absolute;display: block;opacity: 1;visibility: visible;width: 100%;height: 100%;background: #000 no-repeat 50% 50%; background-size: cover;cursor:pointer;}#"+t+" .links-overlay { position: absolute; right: 0px; height: 24px; top: 20px;display:none;width:fit-content;}#"+t+" .links-overlay .links-button {    height: fit-content; padding: 0.7rem 1rem ; background-color: #cc0000; width: auto; opacity: 0.75;  border-radius: 20px 0 0 20px; font-size: 11pt; color: #FCFCFC; cursor:default;webkit-transition: background-color 0.25s ease-in-out;-moz-transition: background-color 0.25s ease-in-out;-o-transition: background-color 0.25s ease-in-out; -khtml-transition: background-color 0.25s ease-in-out; transition: background-color 0.25s ease-in-out;-webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; -o-user-select: none; user-select: none;text-align:left;box-sizing: initial;letter-spacing:0;}#"+t+" .links-overlay .links-button.highlight { background-color:#cc0000;opacity:1; box-shadow: inset 0 0 0 2px #fff; }#"+t+" .links-overlay .links-button:hover { background-color:#cc0000; opacity:1; cursor: pointer;box-shadow: inset 0 0 0 2px #fff; }#"+t+" .loader-bg { top: 0px; left: 0px; position: absolute; width: "+r+"px; height: "+a+"px; background-color: black;z-index:9; }#"+t+" .loader-bg-transparent { top: 0px; left: 0px; position: absolute; width: "+r+"px; height: "+a+"px; background-color: transparent;z-index:8; }#"+t+" .loader-bg-image { width: "+d.bgSize+"px; height: "+d.bgSize+"px; background: "+d.bg+"; background-size: "+d.bgSize+"px "+d.bgSize+"px; position: absolute; left: "+(r-d.bgSize)/2+"px; top: "+(a-d.bgSize)/2+"px; }#"+t+" .loader-bg-image-transparent { width: "+d.bgSize+"px; height: "+d.bgSize+"px; background: "+d.bg+"; background-size: "+d.bgSize+"px "+d.bgSize+"px; position: absolute; left: "+(r-d.bgSize)/2+"px; top: "+(a-d.bgSize)/2+"px; }#"+t+" .loader { position: absolute; width: "+d.spinnerSize+"px; height: "+d.spinnerSize+"px;",p+=";z-index: 9; border-top: "+d.border+"em solid rgba(00, 00, 00, 0.2); border-right: "+d.border+"em solid rgba(62, 181, 231, 0.2); border-bottom: "+d.border+"em solid rgba(62, 181, 231, 0.2); border-left: "+d.border+"em solid #3eb5e7; -webkit-transform: translateZ(0); -o-transform: translateZ(0);-ms-transform: translateZ(0); transform: translateZ(0); -webkit-animation: load8 1.1s infinite linear; animation: load8 1.1s infinite linear; }#"+t+" .loader, #"+t+" .loader:after { border-radius: 50%; }@-webkit-keyframes load8 { 0% { -webkit-transform: rotate(0deg); transform: rotate(0deg); } 100% { -webkit-transform: rotate(360deg); transform: rotate(360deg); } }@keyframes load8 { 0% { -webkit-transform: rotate(0deg); transform: rotate(0deg); } 100% { -webkit-transform: rotate(360deg); transform: rotate(360deg); } }#"+t+" .truvid-bg { top: 0px; left: 0px; position: absolute; width: "+r+"px; height: "+a+"px; z-index: 9; }#"+t+" .loader-transparent { position: absolute; width: "+d.spinnerSize+"px; height: "+d.spinnerSize+"px;",p+=";z-index: 9; border-top: "+d.border+"em solid rgba(00, 00, 00, 0.2); border-right: "+d.border+"em solid rgba(62, 181, 231, 0.2); border-bottom: "+d.border+"em solid rgba(62, 181, 231, 0.2); border-left: "+d.border+"em solid #3eb5e7; -webkit-transform: translateZ(0); -o-transform: translateZ(0);-ms-transform: translateZ(0); transform: translateZ(0); -webkit-animation: load8 1.1s infinite linear; animation: load8 1.1s infinite linear; }#"+t+" .loader-transparent, #"+t+" .loader-transparent:after { border-radius: 50%; }@-webkit-keyframes load8 { 0% { -webkit-transform: rotate(0deg); transform: rotate(0deg); } 100% { -webkit-transform: rotate(360deg); transform: rotate(360deg); } }@keyframes load8 { 0% { -webkit-transform: rotate(0deg); transform: rotate(0deg); } 100% { -webkit-transform: rotate(360deg); transform: rotate(360deg); } }#"+t+" .trv-media-controls { ",p+="overflow:hidden;background-color: transparent; position: absolute; display: none;bottom:0; left: 0px; z-index: 9; width: 100%; color: #FCFCFC; font-size: 10pt; text-align: left; height: 46px; -webkit-transition: "+u.controller+"; -moz-transition: "+u.controller+"; -o-transition; "+u.controller+"; transition: "+u.controller+"; -ms-transition: "+u.controller+"; }#"+t+" .fullScreen { float: right; background-position: -126px -9px; width:20px;height:20px; }#"+t+" .trv-media-controls>span { line-height: 22px; font-size: 10pt; color: #FCFCFC; font-family: arial; }#"+t+" .BR { background-position: 0px -8px; width: 22px; height: 22px; margin-left: 12px; margin-right: 12px; float: right; transition: none; }#"+t+" .videoTitle {",e||(p+="position: absolute; margin-top: 18px;"),p+="margin-left:7px; white-space: nowrap; text-overflow: ellipsis; overflow: hidden; vertical-align: inherit; cursor: default; }#"+t+" .togglePlayPause { background-position: -"+(o?"48":"82")+"px -8px; height: 22px; margin-left: 20px; margin-right: 4px; transition: none; float: none; }#"+t+" .volume { background-position: -100px -10px; line-height: normal; margin-right: 12px; margin-left: 12px; transition: none; float: none; }#"+t+" .trv-currentTime, #"+t+" .timeDivider, #"+t+" .duration { line-height: 22px; vertical-align: bottom; cursor: default; display:inline; }#"+t+" .trv-duration { margin-right: 12px;vertical-align: bottom; cursor: default; }#"+t+" .playlist { float: right; background-position: -149.5px -8px; margin-right: 12px; margin-left: 12px; width: 12px; }#"+t+" .trv-progress-bar { margin-top:8px; position: absolute; width: 100%; height: 3px; background: rgba(255,255,255,0.2); cursor: pointer; -webkit-transition: "+u.progressBar+"; -moz-transition: "+u.progressBar+"; -o-transition: "+u.progressBar+"; transition: "+u.progressBar+"; -ms-transition: "+u.progressBar+"; }#"+t+" .trv-play-progress { position: absolute; background: #1EAAF1; height: 3px; width: 0%; top: 0px; max-width: 100%; -webkit-transition: "+u.progressBar+"; -moz-transition: "+u.progressBar+"; -o-transition: "+u.progressBar+"; transition: "+u.progressBar+"; -ms-transition: "+u.progressBar+"; }#"+t+" .trv-hover-progress { position: absolute; background: rgba(255,255,255,0.5); height: 0px; width: 0%; top: 0px; max-width: 100%; -webkit-transition: "+u.progressBar+"; -moz-transition: "+u.progressBar+"; -o-transition: "+u.progressBar+"; transition: "+u.progressBar+"; -ms-transition: "+u.progressBar+"; }#"+t+" .trv-progress-padding { position: absolute; width: 100%; height: 16px; bottom: 0; z-index: 28; }#"+t+" .trv-buffered { position: absolute; background: rgba(255,255,255,0.4); height: 100%; width: 0%; }#"+t+" .trv-progressBtn { background: #1EAAF1; box-shadow: 0 0 20px rgba(0,0,0,0.3); border-radius: 30px; width: 3px; height: 3px; position: absolute; left: 0; text-decoration: overline; top: 0px; -webkit-transition: "+u.progressBar+"; -moz-transition: "+u.progressBar+"; -o-transition: "+u.progressBar+"; transition: "+u.progressBar+"; -ms-transition: "+u.progressBar+"; }",p+="#"+t+" style {display:none;}",e||(p+="#"+t+" .volume-bar { left: 16px; position: absolute; width: 2px; height: 55px; overflow: hidden; background: #737373; top: 10px; -webkit-transition: "+u.volumeBar+"; -moz-transition: "+u.volumeBar+"; -o-transition: "+u.volumeBar+"; transition: "+u.volumeBar+"; -ms-transition: "+u.volumeBar+"; }#"+t+" .volume-container { position: absolute; z-index:29; overflow: hidden; bottom: 25px; left: 32px; width: 32px; height: 75px; background: "+h+"; display: none; -webkit-transition: "+u.volumeBar+"; -moz-transition: "+u.volumeBar+"; -o-transition: "+u.volumeBar+"; transition: "+u.volumeBar+"; -ms-transition: "+u.volumeBar+"; cursor: pointer; }#"+t+" .volume-container .button-holder { height: 49px; top: 8px; left: 5px; }#"+t+" .active-volume { position: absolute; bottom: 0px; background: #1EAAF1; height: 100%; width: 100%; overflow-y: visible; }#"+t+" .volumeHandle { background: #1EAAF1; box-shadow: 0 0 20px rgba(0,0,0,0.3); border-radius: 30px; width: 8px; height: 8px; position: absolute; left: 8px; top: 0%; text-decoration: overline; }#context-menu-"+t+" { width: 185px; height: 40px; position: absolute; background-color: #252525; z-index: 9; cursor: pointer; border-radius: 5px; direction:ltr;text-align:left; }#context-menu-"+t+" .context-menu-icon-container { width: "+f+"px; height: "+f+"px; float: left; }#context-menu-"+t+" .context-menu-icon { background: "+c+"; background-position: 0px -8px; background-color: transparent; width: "+f+"px; height: "+f+"px; margin-top: 9px !important; margin-left: 20px !important; }#context-menu-"+t+" .context-menu-text-container { width: 160px; height: 22px; float: right; }#context-menu-"+t+" .context-menu-text { width: 120px; height: 22px; font-size: 12px; color: #CCC; font-weight: 600; margin-top: 14px !important; margin-left: 28px !important; font-family: arial; line-height: 15px; }"),p+="#"+t+" .autoskip-btn {pointer-events: all; width: 100%; padding: 9px 0px; font-size: 10px; font-family: arial; font-weight: 500; font-stretch: normal; font-style: normal; line-height: normal; letter-spacing: 1.78px; text-align: center; color: #ffffff; margin: 5px 0px; cursor: pointer; z-index: 10}",p+="#"+t+" .autoskip-btn-blue {display: block; background-color: #1E7ABB}",p+="#"+t+" .autoskip-btn-gray {display: block; background-color: #3E3E3E}",p+="#"+t+" .autoskip-btn-blue-compact {background-color: #1E7ABB; width: 50%; position: absolute; bottom: 0px; left: 0px}",p+="#"+t+" .autoskip-btn-gray-compact {background-color: #3E3E3E; width: 50%; position: absolute; bottom: 0px; right: 0px}",p+="#"+t+" .trv-autoskip-container {display: block; visibility:hidden; position: absolute; top: 22px; right: 32px; width: 30%; min-height:"+(a-50)+"px; z-index: 10;}",p+="#"+t+" .trv-autoskip-background {background-color: white; display: flex; justify-content: center; align-items: center; padding: 5px; position: relative;}",p+="#"+t+" .trv-autoskip-container-compact {z-index: 10; position: absolute; bottom: 0px; width: 100%; height: 100%; align-items: flex-end; pointer-events: none; display: flex; flex-direction: row-reverse;}",p+="#"+t+" .trv-autoskip-background-compact {height: 100%; width: 100%; position: absolute; z-index: 20;}",p+="#"+t+" .autoskip-btn-compact {height: 30px; margin: 0px; line-height: 30px; font-size: 12px;}",p+="#"+t+" .trv-autoskip-line-top {display: block; visibility:hidden; width: 100%; height: 5px; background: transparent; position: absolute; top: 0px; left: 0px;}",p+="#"+t+" .trv-autoskip-line-top > div {position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: #1EAAF1; transform-origin: left;}",p+="#"+t+" .trv-autoskip-line-top > div.trv-with-animation {animation: trv-animate-top "+s/4+"s linear 1 forwards;}",p+="#"+t+" .trv-autoskip-line-right {display: block; visibility:hidden; width: 5px; height: 100%; background: transparent; position: absolute; top: 0px; right: 0px;}",p+="#"+t+" .trv-autoskip-line-right > div {position: absolute; top: 0; right: 0; width: 100%; height: 100%; background: #1EAAF1; transform-origin: top;}",p+="#"+t+" .trv-autoskip-line-right > div.trv-with-animation {animation: trv-animate-right "+s/4+"s linear 1 forwards;}",p+="#"+t+" .trv-autoskip-line-bottom {display: block; visibility:hidden; width: 100%; height: 5px; background: transparent; position: absolute; bottom: 0px; right: 0px;}",p+="#"+t+" .trv-autoskip-line-bottom > div {position: absolute; bottom: 0; right: 0; width: 100%; height: 100%; background: #1EAAF1; transform-origin: right;}",p+="#"+t+" .trv-autoskip-line-bottom > div.trv-with-animation {animation: trv-animate-bottom "+s/4+"s linear 1 forwards;}",p+="#"+t+" .trv-autoskip-line-left {display: block; visibility:hidden; width: 5px; height: 100%; background: transparent; position: absolute; bottom: 0px; left: 0px;}",p+="#"+t+" .trv-autoskip-line-left > div {position: absolute; bottom: 0; left: 0; width: 100%; height: 100%; background: #1EAAF1; transform-origin: bottom;}",p+="#"+t+" .trv-autoskip-line-left > div.trv-with-animation {animation: trv-animate-left "+s/4+"s linear 1 forwards;}",p+="@keyframes trv-animate-floater-right {0% {transform: translateX(0);} 100% {transform: translateX(-100%);}}",p+="@keyframes trv-animate-floater-left {0% {transform: translateX(0);} 100% {transform: translateX(100%);}}",p+="@keyframes trv-animate-floater-top {0% {transform: translateY(0);} 100% {transform: translateY(calc(100% + "+l+"px));}}",p+="@keyframes trv-animate-floater-bottom {0% {transform: translateY(0);} 100% {transform: translateY(calc(-100% - "+l+"px));}}",p+="@keyframes trv-animate-back-to-instream {0% {transform: scale(0);} 100% {transform: scale(1);}}",p+="@keyframes trv-animate-top {0% {transform: scaleX(0);} 100% {transform: scaleX(1);}}",p+="@keyframes trv-animate-right {0% {transform: scaleY(0);} 100% {transform: scaleY(1);}}",p+="@keyframes trv-animate-bottom {0% {transform: scaleX(0);} 100% {transform: scaleX(1);}}",p+="@keyframes trv-animate-left {0% {transform: scaleY(0)} 100% {transform: scaleY(1);}}",p+="#"+t+" .trv-autoskip-poster-compact {display:none}",p+="#"+t+" .trv-autoskip-poster {width: 100%;}",p+="@media screen and (max-width: 479px) { #"+t+" .videoTitle { display:none; } }",p+="</style>"}(X,Pe,J,0,C,k,x,d,u),h){var o=.3*C;a+='<div class="trv-autoskip-container"><div class="trv-autoskip-background"><img class="trv-autoskip-poster" width="'+o+'" height="'+9/16*o+'" alt="auto skip"><div class="trv-autoskip-line-top"><div></div></div><div class="trv-autoskip-line-right"><div></div></div><div class="trv-autoskip-line-bottom"><div></div></div><div class="trv-autoskip-line-left"><div></div></div></div><div class="autoskip-btn autoskip-btn-blue"></div><div class="autoskip-btn autoskip-btn-gray"></div></div>'}return r.innerHTML=a.replace("{{video_placeholder}}",e),t},this.setContentVideo=function(){if(yt(),L){(z=new zi(L,b)).setup();var e=z.getFileToPlay();f=new en(e,b),se=z.getCurrentVideoDuration(),Ct(),xe&&xe.Show(),Oi(Object(Hi.b)(A).width),1<z.getTotalVideos()?(function(){var e=U.player.mediaPlayer.getElementsByClassName("overlay-backwards");0<e.length&&e[0].addEventListener("click",function(e){e.stopPropagation(),b.handlePlayerInteraction(Xi.a.Previous),s&&s.notify("click",{widgetId:a,video:U.player.mediaVideo,clickedElement:"previous video"}),Ni(),function(){if(z){var e=_i();z.backward(),xe&&xe.Show(),Ui(e)}}(),h&&vi()})}(),function(){var e=U.player.mediaPlayer.getElementsByClassName("overlay-forward");0<e.length&&e[0].addEventListener("click",function(e){e.stopPropagation(),b.handlePlayerInteraction(Xi.a.Next),s&&s.notify("click",{widgetId:a,video:U.player.mediaVideo,clickedElement:"forward video"}),di(),Fe||(Ni(),Fi(),h&&vi())})}()):U.buttonsOverlay&&(U.buttonsOverlay.overlayForwardButton.style.display="none",U.buttonsOverlay.overlayBackwardButton.style.display="none")}},this.noContentMode=function(){At()},this.mute=function(){$t()},this.unmute=function(){ei()},this.canStartBiddingSession=function(){return function(){if(Te)return!1;return!(t&&!t.canStartBiddingSession())&&!(I&&!I.canStartBiddingSession())}()},this.disableAutoSkip=function(){vi()},this.setVolume=function(e){Li(e)},this.getVolume=function(){return G},this.onPlayerReady=function(){s&&s.notify("ready",{video:U.player.mediaVideo,widgetId:a}),this.dispatchEvent(un),Ge&&(this.dispatchEvent(yn),this.dispatchEvent(vn)),Ee.subscribe(cn,Ri),window.addEventListener("resize",Ri),window.addEventListener("orientationchange",Ri);var e=Object(Hi.b)(A);Di(e.width,e.height)},this.forward=function(){Fi()},this.setIgnorePlaylistEnd=function(){Ni()},this.getPlayerElement=function(){return A},this.DestroyPlayer=function(){ji()}}},function(e,t,i){"use strict";i.d(t,"c",function(){return a}),i.d(t,"b",function(){return o}),i.d(t,"a",function(){return s});var n=i(16);function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t,i){return e&&e[t]?i+"?e="+e[t]:null}function o(e){if(e=Object(n.a)(e),"object"!==("undefined"==typeof window?"undefined":r(window))||"undefined"==typeof Image){var t=new XMLHttpRequest;t.open("get",e,!0),t.send()}else{(new Image).src=e}}function s(e,t,i){void 0!==window.playerLog&&window.playerLog("error on "+e)}},function(e,t,i){"use strict";i.d(t,"c",function(){return ee}),i.d(t,"a",function(){return te}),i.d(t,"g",function(){return m}),i.d(t,"b",function(){return ie}),i.d(t,"f",function(){return ne}),i.d(t,"e",function(){return re}),i.d(t,"d",function(){return v});var V=i(12),j=i(2),B=i(14),F=i(0);function H(n,e){var r,t,i,a,o,s=n,l=e,d=l.getPlayerElement(),u=d.getElementsByClassName("trv-video")[0],c=null,h=null,f=null,p=!1,g=this,m=null,v=15e3,y=d.getElementsByClassName("media-video")[0],b=8e3,w="10000",E=null,S=y.muted?0:y.volume,A=!1,T=!1,L=!1,C=[];r="truvid_ima_container"+Math.floor(1e5*Math.random()+1),document.getElementById(r)||(r="truvid_ima_container"+Math.floor(1e5*Math.random()+1));var k=0;function x(){p?l.handlePlayerInteraction(F.a.PlayAd):l.handlePlayerInteraction(F.a.PauseAd),I()}function P(){if(window.playerLog("ima onAdStarted"),!A){window.playerLog("ima inside onAdStarted"),A=!0,T&&(window.playerLog("ima set volume 0"),f.setVolume(0),S=0);var e=document.getElementById(r);e&&(e.style.zIndex=w,e.addEventListener("click",x)),m=m||new B.a(g,null,null,l);var t=f.getVolume();m.setVolume(t),s.onAdStarted()}setTimeout(function(){s.onPlayerResize()},1e3)}function I(){window.playerLog("ima toggle play pause"),p?(f.resume(),p=!1,e.setPlayerPausedOnUserBehalf(!1)):(f.pause(),p=!0,e.setPlayerPausedOnUserBehalf(!0)),p?m&&m.pause():m&&m.play(),p&&(document.getElementById(r).style.bottom="0")}function O(){if(!c.isStopped()&&!c.getIsLoaded()){c.setLoaded(!0),clearTimeout(i),window.playerLog("ima AD LOADED"),c.firePixels("available");var e=document.getElementById(r);e&&(e.style.display="block");var t=e.getElementsByTagName("iframe");t.length&&(t[0].style.display="block");s.onAdLoaded(!1),window.playerLog("ima loaded")}}function R(){window.playerLog("ima DESTROY FUNCTION"),clearTimeout(i),f&&f.destroy(),m&&(m.destroy(),m=null),C=[]}function D(){if(!c.isStopped()){if(c.setStopped(),window.playerLog("ima onAdStopped FUNCTION"),clearTimeout(a),clearTimeout(i),R(),L){var e=document.getElementById(r);e&&(e.style.display="none",e.removeEventListener("click",x))}if(A){s.onAdStopped(!1)}else s.onLoadingContainerFailed(c)}}function M(){c.firePixels("error"),D()}this.startAd=function(){c.getIsLoaded()?f&&f.start():s.setStartAdOnAdLoadedEvent(!0)},this.initialize=function(){try{"undefined"!=typeof google&&void 0!==google.ima?(window.playerLog("initialize ima"),t=new google.ima.AdDisplayContainer((window.playerLog("ima createIMAContainer"),(o=document.createElement("div")).className="truvid_ima_container",o.id=r,o.style.display="none",o.style.textAlign="left",u.appendChild(o),o),y),h=new google.ima.AdsLoader(t),t.initialize(),h.getSettings().setDisableCustomPlaybackForIOS10Plus(!0),h.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,function(e){!function(e){if(c.isStopped())return;window.playerLog("ima onIMAAdsManagerLoaded"),L=!1;var t=new google.ima.AdsRenderingSettings;t.loadVideoTimeout=v,t.restoreCustomPlaybackStateOnAdBreakComplete=!1;var i=["video/mp4"];y.canPlayType("video/webm")&&(window.playerLog("ima can play video webm"),i.push("video/webm"));t.mimeTypes=i,f=e.getAdsManager(y,t),y.muted?f.setVolume(0):f.setVolume(y.volume);f.addEventListener(google.ima.AdEvent.Type.CLICK,function(){l.getApiObservable().notify("adClick",{widgetId:l.getWidgetId(),video:y}),d.dispatchEvent(new CustomEvent("adClick")),window.playerLog("ima CLICK"),c.firePixels("click"),p?d.dispatchEvent(new CustomEvent("onUserMediaPlay")):d.dispatchEvent(new CustomEvent("onUserMediaPause")),I(),m&&m.show()}),f.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,function(e){window.playerLog("ima event google.ima.AdErrorEvent.Type.AD_ERROR",e),M()}),f.addEventListener(google.ima.AdEvent.Type.LOADED,function(e){window.playerLog("ima event LOADED"),k++,c.resetHasSentImpression(),s.getStartAdOnAdLoadedEvent()||(window.playerLog("ima MANAGER START"),O())}),f.addEventListener(google.ima.AdEvent.Type.PAUSED,function(){window.playerLog("ima event PAUSED"),c.firePixels("pause"),m&&m.pause()}),f.addEventListener(google.ima.AdEvent.Type.RESUMED,function(){window.playerLog("ima event RESUMED"),c.firePixels("resume"),m&&m.play()}),f.addEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,function(){O(),l.pauseContentVideo(),window.playerLog("ima event CONTENT_PAUSE_REQUESTED"),L=!0;var e=document.getElementById(r);e&&(e.style.display="block");var t=e.getElementsByTagName("iframe");t.length&&(t[0].style.display="block")}),f.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,function(){window.playerLog("ima CONTENT_RESUME_REQUESTED");var e=document.getElementById(r);e&&(e.style.display="none"),c.isStopped()||(window.playerLog("ima event INSIDE CONTENT_RESUME_REQUESTED"),D())}),f.addEventListener(google.ima.AdEvent.Type.STARTED,function(){window.playerLog("ima STARTED"),c.firePixels("start");var e=document.getElementById(r).getElementsByTagName("iframe");e.length&&(e[0].style.position="absolute"),P()}),f.addEventListener(google.ima.AdEvent.Type.IMPRESSION,function(t){l.getApiObservable().notify("adImpression",{widgetId:l.getWidgetId(),video:y}),d.dispatchEvent(new CustomEvent("adImpression")),window.playerLog("ima IMPRESSION"),c.firePixels("start"),c.setFiredImpression(!0),P(),1<k&&n.increaseCurrentSlotNUmberMacro(),c.fireImpressionPixel("impression",n),C.map(function(e){return e(t)})}),f.addEventListener(google.ima.AdEvent.Type.COMPLETE,function(){window.playerLog("ima COMPLETE"),c.firePixels("complete")}),f.addEventListener(google.ima.AdEvent.Type.ALL_ADS_COMPLETED,function(){window.playerLog("ima all ads COMPLETE"),d.dispatchEvent(new CustomEvent("adComplete")),a=setTimeout(function(){if(!c.isStopped()){var e=document.getElementById(r);e&&(e.style.display="none"),D()}}.bind(this),4e3)}),f.addEventListener(google.ima.AdEvent.Type.FIRST_QUARTILE,function(){window.playerLog("ima FIRST_QUARTILE"),c.firePixels("firstQuartile")}),f.addEventListener(google.ima.AdEvent.Type.MIDPOINT,function(){window.playerLog("ima MIDPOINT"),c.firePixels("midpoint")}),f.addEventListener(google.ima.AdEvent.Type.THIRD_QUARTILE,function(){window.playerLog("ima THIRD_QUARTILE"),c.firePixels("thirdQuartile")}),f.addEventListener(google.ima.AdEvent.Type.SKIPPED,function(){window.playerLog("ima skip"),c.firePixels("skip"),l.handlePlayerInteraction(F.a.SkipAd),d.dispatchEvent(new CustomEvent(ie))}),f.addEventListener(google.ima.AdEvent.Type.VOLUME_CHANGED,function(){window.playerLog("ima volume change");var e=f.getVolume();null!=e&&(0<S&&0==e?(c.firePixels("mute"),l.handlePlayerInteraction(F.a.SoundOffAd)):0==S&&0<e&&(c.firePixels("unmute"),l.handlePlayerInteraction(F.a.SoundOnAd)),window.playerLog("ima VOLUME CHANGE NEW VOLUME "+e),S=e)}),f.addEventListener(google.ima.AdEvent.Type.USER_CLOSE,function(){window.playerLog("ima user close"),c.firePixels("close")}),window.playerLog("ima init"),f.init(s.getRequestWidth(),s.getRequestHeight(),google.ima.ViewMode.NORMAL),s.getStartAdOnAdLoadedEvent()&&(window.playerLog("ima MANAGER START"),f.start())}(e)},!1),h.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,function(e){window.playerLog("ima google.ima.AdErrorEvent.Type",e),M()},!1)):Object(j.a)("googlelibundefined",{wid:l.getWidgetId()},null)}catch(e){Object(j.a)("googleiniterr",{wid:l.getWidgetId()},e)}},this.setAdsContainerVisibility=function(e){o&&(o.style.display=e?"block":"none")},this.skipAd=function(){window.playerLog("ima skip"),f.skip(),D()},this.stopAd=function(){window.playerLog("ima stop"),f&&A&&(f.stop(),D())},this.loadAd=function(e,t){c=e,k=0,window.playerLog("load ima ad"),"undefined"!=typeof google&&void 0!==google.ima?c.isStopped()||(l.isNetworkWidget()||(google.ima.settings.setPlayerType("truvid"),google.ima.settings.setPlayerVersion("1.0.0")),E=t.mediaFile.src,h?(window.playerLog("inside ima ads loader"),m=null,p=A=!1,h.requestAds(function(){window.playerLog("ima set ima ads request");var e=s.getRequestWidth(),t=s.getRequestHeight(),i=new google.ima.AdsRequest;i.adTagUrl=E,i.linearAdSlotWidth=e,i.linearAdSlotHeight=t,i.nonLinearAdSlotWidth=e,i.nonLinearAdSlotHeight=Math.round(.375*t),i.forceNonLinearFullSlot=!1,i.vastLoadTimeout=b,i.setAdWillAutoPlay(!0),T=!1,y.muted?T=!0:0==y.volume?T=!0:i.setAdWillPlayMuted(!1);return i}()),c.fireRequestPixel(),i=setTimeout(function(){window.playerLog("ima ad request timeout"),D()},2e4)):setTimeout(function(){Object(j.a)("imaStopAdImaAdsLoadedUndefined",{wid:l.getWidgetId()},null),window.playerLog("ima stop ad imaAdsLoaded undefined"),c.setStopped()},100)):D()},this.addImpressionCb=function(e){(C=[]).push(e)},this.clearImpressionCbs=function(){C=[]},this.destroy=function(){window.playerLog("ima destroy"),c.isStopped()||(c.setStopped(),window.playerLog("ima inside destroy"),R(),clearTimeout(i))},this.resizeAd=function(e,t){window.playerLog("ima resizead");var i=document.getElementById(r);i&&(i.style.height=t+"px",i.style.width=e+"px",i.style.zIndex=w),f.resize(e,t,"normal")},this.resumeAd=function(){window.playerLog("ima resume"),p=!1,f.resume()},this.getAdDuration=function(){return f.getCurrentAd().getDuration()},this.isStopped=function(){return c.isStopped()},this.setAdVolume=function(e){window.playerLog("ima set ad volume"),f.setVolume(e),m.setVolume(e),l.setCurrentVolume(e)},this.pauseAd=function(){window.playerLog("ima pauseAd"),p||I()},this.togglePlayPause=function(){window.playerLog("ima toggle play pause"),I()},this.getAdRemainingTime=function(){return f.getRemainingTime()},this.getContainerId=function(){return r},this.isCurrentAdPaused=function(){return p}}var G=i(15),z=i(1),n=i(10);function W(){}function s(e,t){var i;e.setGdprApplies(t.gdprApplies),e.setConsentString(null!==(i=t.tcString)&&void 0!==i?i:"");var n=!t.tcString||!!t.purpose.consents[2];e.setPersonalizedAdsAgreed(n)}function l(n,r){var a={tcString:"",gdprApplies:!1,isAgreed:!1,isPersonalizedAdsAgreed:!0},e=new Promise(function(i){null!=n&&n.getConsentString()?(a.tcString=n.getConsentString(),a.gdprApplies=n.getGdprApplies(),a.isPersonalizedAdsAgreed=n.getPersonalizedAdsAgreed(),i(a)):window.__tcfapi?(n.setCmpUsed(),window.__tcfapi("getTCData",2,function(e,t){t?(r&&(a.isAgreed=u(e)),s(n,e),a.tcString=n.getConsentString(),a.gdprApplies=n.getGdprApplies(),a.isPersonalizedAdsAgreed=n.getPersonalizedAdsAgreed(),i(a)):i(null)})):i(null)}),t=new Promise(function(e){setTimeout(function(){e(null)},500)});return Promise.race([e,t])}W.prototype.Load=function(){return new Promise(function(e,t){new Promise(function(e,t){Object(n.c)("https://imasdk.googleapis.com/js/sdkloader/ima3.js").then(function(){e()}).catch(function(e){t(e)})}).then(function(){e()}).catch(function(e){t(e)})})};var d=i(4);function Q(e,t){this.player=e,this.adsLib=t}function u(e){var t,i,n=null===(t=e.purpose)||void 0===t?void 0:t.consents,r=null===(i=e.vendor)||void 0===i?void 0:i.consents;if(!n||!r)return!1;var a=Object.keys(n),o=Object.values(c).filter(function(e){return!r[e]});return 10==a.length&&a.every(function(e){return n[e]})&&!o.length}var c={smartAdserver:45,magnite:52,xande:32,yahoo:25,freewheel:285,indexExchange:10,truvid:862};function S(e,t){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=h(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==i.return||i.return()}finally{if(s)throw a}}}}function A(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==i)return;var n,r,a=[],o=!0,s=!1;try{for(i=i.call(e);!(o=(n=i.next()).done)&&(a.push(n.value),!t||a.length!==t);o=!0);}catch(e){s=!0,r=e}finally{try{o||null==i.return||i.return()}finally{if(s)throw r}}return a}(e,t)||h(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){if(e){if("string"==typeof e)return r(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?r(e,t):void 0}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function q(e,t){var i=this;this.macros={},this.player=t,this.adLib=e;var n={userAgent:function(){try{return navigator.userAgent}catch(e){return null}}},r=t.getDomain();n.prtclDomain=function(){return encodeURIComponent(window.location.protocol+"//"+r)},n.pageTitle=function(){return document.title},n.domain=function(){return encodeURIComponent(r)},n.osPlatform=function(){return t.getOSFamily()},n.osVersion=function(){return t.getOSVersion()},n.pageReferrer=function(){return encodeURIComponent(document.referrer)},n.width=function(){return i.adLib.getAdRequestWidth()},n.height=function(){return i.adLib.adRequestHeight()},n.pageUrl=function(){return encodeURIComponent(r)},n.vw=function(){return 1==t.IsPlayerViewable()?1:0},n.sellersJsonId=function(){return t.getSellersJsonId()},n.cb=function(){var e=parseInt(99999999*Math.random(),10).toString();return e=Array(9-e.length).join("0")+e},n.timestamp=function(){return Math.round((new Date).getTime()/1e3)},n.ip=function(){return t.getIp()};var a=t.getGeoLocation();n.latitude=function(){return encodeURIComponent(a&&a.lat?a.lat:"")},n.longitude=function(){return encodeURIComponent(a&&a.long?a.long:"")},n.location=function(){return encodeURIComponent((a?a.lat:"")+","+(a?a.long:""))},n.pageHref=function(){return t.getPageUrl()},n.pmute=function(){return 0==t.getCurrentVolume()?1:0},n.pinit=function(){return i.adLib.getAutomaticMacro()},n.accountid=function(){return t.getSubUserId()},n.slotType=function(){return i.adLib.getCurrentSlotTypeMacro()},n.slotNumber=function(){return i.adLib.getCurrentSlotNumberMacro()},t.noContentMode()?(n.videoTitle=function(){return""},n.videoDuration=function(){return"0"},n.videoId=function(){return"nocontent"},n.videoUrl=function(){return"nocontent_720"},n.lng2=function(){return""},n.lng=function(){return""},n.videoIabCategory=""):t.getPlaylistContent()&&(n.videoTitle=function(){return t.getCurrentVideoObj().t},n.videoDuration=function(){return t.getDuration()},n.videoUrl=function(){return t.getCurrentVideoUrl()},n.videoId=function(){return t.getCurrentVideoObj().id},n.lng2=function(){return t.getCurrentVideoObj().l},n.lng=function(){return t.getCurrentVideoObj().l},n.videoIabCategory=function(){return t.getCurrentVideoObj().iabc}),this.macros=n}Q.prototype.Sync=function(){var r=this,a=null;function o(){return new Promise(function(e){var t=function(){return new Promise(function(e){var t=Object(d.a)("trv_usersync"),i=!1;if(t?((t=JSON.parse(t)).optout&&e(),t.uids&&t.uids.rubicon||(i=!0)):i=!0,i){var n=document.createElement("div");n.innerHTML='<iframe id="multisync-iframe" height="0" width="0" marginwidth="0" marginheight="0" scrolling="no" frameborder="0" src="https://secure-assets.rubiconproject.com/utils/xapi/multi-sync.html?p=truvid&endpoint=us-east" style="border: 0; display: none;"></iframe>',this.player.getPlayerElement().appendChild(n)}e()}.bind(this))}.bind(r),i=function(a){return new Promise(function(e){var t="",i=0;null!=a&&(void 0!==a.gdprApplies&&1==a.gdprApplies&&(i=1),t=a.tcString);var n=document.createElement("img");n.style.border="0px",n.style.width="1px",n.style.height="1px",n.style.visibility="hidden",n.src="https://ads.stickyadstv.com/auto-user-sync?_fw_gdpr="+i+"&_fw_gdpr_consent="+t;var r=document.createElement("img");r.style.border="0px",r.style.width="1px",r.style.height="1px",r.style.visibility="hidden",r.src="https://ads.stickyadstv.com/user-matching?id=2545&_fw_gdpr="+i+"&_fw_gdpr_consent="+t,this.player.getPlayerElement().appendChild(n),this.player.getPlayerElement().appendChild(r),e()}.bind(this))}.bind(r,a),n=function(){return new Promise(function(e){var t=Object(d.a)("trv_usersync"),i=!1;if(t?((t=JSON.parse(t)).optout&&e(),t.uids&&t.uids.smartAdserver||(i=!0)):i=!0,i){var n=document.createElement("div");n.innerHTML='<iframe src="https://csync-global.smartadserver.com/3356/CookieSync.html" style="position: absolute; width:0; height:0; border:0;"></iframe>',this.player.getPlayerElement().appendChild(n)}e()}.bind(this))}.bind(r);t().finally(function(){i().finally(function(){n().finally(function(){e()})})})})}return new Promise(function(n,t){l(r.player,!0).then(function(e){if(null!=(a=e)&&e.gdprApplies)if(window.__tcfapi)if(r.player.setCmpUsed(),e.isAgreed)o().then(function(){return n()});else try{window.__tcfapi("addEventListener",2,function e(t,i){s(r.player,t),i&&"useractioncomplete"===t.eventStatus&&u(t)&&(window.__tcfapi("removeEventListener",2,function(){},e),o().then(function(){return n()}))}),n()}catch(e){window.playerLog("error user sync",e),t()}else n();else o().then(function(){return n()})}.bind(this)).catch(function(e){window.playerLog("error user sync",e),t()})}.bind(this))},q.prototype.InjectMacros=function(i){var n=this.macros,E=this;return new Promise(function(w){function t(e,t){for(var i,n,r=0,a=e;-1<a.indexOf("[",r);){var o=a.indexOf("[",r),s=a.indexOf("]",r)+1;if(0<s){r=s;var l=a.substring(o,s);if(0<=l.indexOf("[dmp%")){var d=l.indexOf("[dmp%"),u=l.substring(d+5,l.length-1),c=u.indexOf("_"),h=u.substring(0,c),f=u.substring(c+1),p=A(h.split("%%",1),1)[0],g=h.substring(h.indexOf("%%")+2),m=void 0;switch(p){case"lclstg":m=window.localStorage.getItem(f)}if(m&&"string"==typeof m){var v,y=S(g=g.split("%%"));try{for(y.s();!(v=y.n()).done;){switch(v.value){case"arr":m=m.substring(1,m.length-1);break;case"urlenc":m=encodeURIComponent(m)}}}catch(e){y.e(e)}finally{y.f()}e=e.replace(l,m)}else e=e.replace(l,"")}else t[l.substring(1,l.length-1)]&&(e=e.replace(l,t[l.substring(1,l.length-1)]()))}else r=o+1}var b="ima"===(null===(i=E.adLib.currentBidSession)||void 0===i?void 0:null===(n=i.getCurrentTruvidAd())||void 0===n?void 0:n.type);e&&b&&(window.__tcfapi?(E.player.getGdprApplies()||E.adLib.getUsPrivacyApplies())&&(e+="&npa=".concat(+!E.player.getPersonalizedAdsAgreed())):e+="&npa=0"),w(e)}-1<i.indexOf("[userGdprConsent]")?l(E.player).then(function(e){n.userGdprConsent=function(){return null!=e?e.tcString:""},t(i,n)}).catch(function(){window.playerLog("error getting consent")}):t(i,n)})};var Y=i(13),K=i(11),k=i(9);function X(o){var d=!1;this.player=o;var s="truvid_cnt_prebid_iframe"+Math.floor(1e5*Math.random()+1);null!==document.getElementById(s)&&(s="truvid_cnt_prebid_iframe"+Math.floor(1e5*Math.random()+1));var u,c=null;this.createFriendlyIframe=function(r,a){return new Promise(function(e,t){var i=document.createElement("iframe");i.src="about:blank",i.id=s,i.marginWidth="0",i.marginHeight="0",i.frameBorder="0",i.width="1px",i.height="1px",i.style.position="absolute",i.style.left="0",i.style.top="0",i.style.margin="0px",i.style.padding="0px",i.style.border="none",i.style.width="1px",i.style.height="1px",i.setAttribute("SCROLLING","NO");var n='<html lang=\'en\'><head><meta charset=\'utf-8\'><script type="text/javascript">window.trvortb={"validation": "strict","config": {"ver":"1.0","complete": 1,"nodes": [{"asi":"truvid.com","sid": "'+o.getSellersJsonId()+'","hp":1}]}};<\/script><script async src="'+a+'"><\/script><title></title></head><body></body></html>';i.onload=function(){i.contentWindow.loadPrebidAd=function(o,s,e){if(0!=d&&void 0!==c.contentWindow.pbjs&&void 0!==c.contentWindow.pbjs.rp){var l=e.mediaFiles[0].mediaFile.src;(u=e).fireRequestPixel(),c.contentWindow.pbjs.rp.requestVideoBids({adSlotName:l,timeout:3,playerSize:[640,480],callback:function(e,t){if(void 0!==t[l]&&void 0!==t[l].bids&&0<t[l].bids.length){var i=t[l].bids.sort(function(e,t){return t.cpm-e.cpm});if(i&&0<i.length){var n=i[0];if(n&&void 0!==n.adserverTargeting&&void 0!==n.adserverTargeting.hb_cache_host){var r="https://"+n.adserverTargeting.hb_cache_host+"/cache?uuid="+n.videoCacheKey,a=u.mediaFiles[0].adParameters;u.mediaFiles=[],u.type="google/ima",u.mediaFiles.push(new k.a("google/ima",{delivery:"progressive",height:"480",src:r,type:"google/ima",width:"640"},a)),o()}else s()}else s()}else s()}})}else s()},e()},i.onerror=function(){t()},i.srcdoc=n,r.appendChild(i),c=i})},this.init=function(){return new Promise(function(e,t){d?e():this.createFriendlyIframe(this.player.getPlayerElement(),"https://micro.rubiconproject.com/prebid/dynamic/17412.js").then(function(){d=!0,e()}).catch(function(){t()})}.bind(this))},this.LoadAd=function(e,t,i){c.contentWindow.loadPrebidAd(e,t,i)}}function f(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||p(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){if(e){if("string"==typeof e)return a(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?a(e,t):void 0}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function J(s,l,d){var u=!1;this.player=s;var a=l.adParameters.rjs,o="truvid_cnt_prebid_relevant_iframe"+Math.floor(1e5*Math.random()+1);null!==document.getElementById(o)&&(o="truvid_cnt_prebid_relevant_iframe"+Math.floor(1e5*Math.random()+1));var c=null;this.createFriendlyIframe=function(r){return new Promise(function(t,e){var i=document.createElement("iframe");i.src="about:blank",i.id=o,i.marginWidth="0",i.marginHeight="0",i.frameBorder="0",i.width="1px",i.height="1px",i.style.position="absolute",i.style.left="0",i.style.top="0",i.style.margin="0px",i.style.padding="0px",i.style.border="none",i.style.width="1px",i.style.height="1px",i.setAttribute("SCROLLING","NO");var n="<html lang='en'><head><meta charset='utf-8'><script type=\"text/javascript\">\n        window.RELEVANT_ANALYTICS_SETTINGS = window.RELEVANT_ANALYTICS_SETTINGS || {};\n        RELEVANT_ANALYTICS_SETTINGS.getCustomParams = function() {\n          return {    \n            'widgetId': "+s.getWidgetId()+",\n            'tagId': "+l.getDemandTagId()+',\n          };\n        };\n       <\/script><script async src="'+a+'"><\/script><title></title></head><body></body></html>';i.onload=function(){var e=i.contentWindow,r=e.relevantDigital||{};e.loadPrebidAd=function(n,a,e){if(u)try{var o=function(n){r.cmd=r.cmd||[],r.cmd.push(function(){var e,t=function(e,t){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=p(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==i.return||i.return()}finally{if(s)throw a}}}}([n.getAd().getAdId()].concat(f(n.getAd().getWrapperAdIds())));try{for(t.s();!(e=t.n()).done;){var i=e.value;if(r.Auction.registerImpressionByAdId(i))return}}catch(e){t.e(e)}finally{t.f()}})};(l=e).fireRequestPixel(),r.cmd=r.cmd||[],r.cmd.push(function(){r.addPrebidConfig({consentManagement:{gdpr:{cmpApi:"static",consentData:{getTCData:{tcString:s.getConsentString(),gdprApplies:s.getGdprApplies()}}}},schain:{validation:"strict",config:{ver:"1.0",complete:1,nodes:[{asi:"truvid.com",sid:s.getSellersJsonId(),hp:1}]}}});var i=r.defineVideoSlots([{path:"desktop-preroll-4"}]).map(function(e){return e.getSlotElementId()});r.loadTruvidConfig(function(e){var t=e.configId;r.loadPrebid({configId:t,manageAdserver:!0,allowedDivIds:i,cache:{url:null}})}),r.loadVideoUrls(i,function(e,t){var r;t.forEach(function(e){var t=e.unitData,i=(e.gamParams,e.url,t.getHighestBid());r=r&&r.cpm>i.cpm?r:i,console.info("Path: ",t.slot.getAdUnitPath()," Highest bid: ",r);var n=l.mediaFiles[0].adParameters;r&&(l.mediaFiles=[],l.type="google/ima",l.mediaFiles.push(new k.a("google/ima",{delivery:"progressive",height:"480",src:r.vastUrl,type:"google/ima",width:"640"},n)),r.vastImpUrl&&l.tracking.events.impression.push({event:"impression",offset:null,url:r.vastImpUrl}))}),r?(d.addImpressionEvent2IMA(o),n()):a()})})}catch(e){console.error(e),a()}else a()},t()},i.onerror=function(){e()},i.srcdoc=n,r.appendChild(i),c=i})},this.init=function(){return new Promise(function(e,t){u?e():(null!=a&&a.length&&null!=a&&a.includes("https://")||t(),this.createFriendlyIframe(this.player.getPlayerElement()).then(function(){u=!0,e()}).catch(function(){t()}))}.bind(this))},this.LoadAd=function(e,t,i){c.contentWindow.loadPrebidAd(e,t,i)}}function o(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,n)}return i}function x(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?o(Object(i),!0).forEach(function(e){g(t,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):o(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}function g(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function Z(T,a){var L=!1;this.player=T;var o="truvid_cnt_prebid_trv_iframe"+Math.floor(1e5*Math.random()+1);null!==document.getElementById(o)&&(o="truvid_cnt_prebid_trv_iframe"+Math.floor(1e5*Math.random()+1));var C,s=null;this.createFriendlyIframe=function(r){return new Promise(function(t,e){var i=document.createElement("iframe");i.src="about:blank",i.id=o,i.marginWidth="0",i.marginHeight="0",i.frameBorder="0",i.width="1px",i.height="1px",i.style.position="absolute",i.style.left="0",i.style.top="0",i.style.margin="0px",i.style.padding="0px",i.style.border="none",i.style.width="1px",i.style.height="1px",i.setAttribute("SCROLLING","NO");var n="<html lang='en'><head><meta charset='utf-8'><script type=\"text/javascript\" async src=\""+("https://s.trvdp.com/scripts/v"+a.advertisingConfiguration.version+"/prebid.js")+'"><\/script><title></title></head><body></body></html>';i.onload=function(){var e=i.contentWindow,A=e.trvpbjs;e.loadPrebidAd=function(a,o,e){var t,i,n,r=null!==(t=null==e?void 0:null===(i=e.adObject)||void 0===i?void 0:null===(n=i.properties)||void 0===n?void 0:n.VASTAdTagURI)&&void 0!==t?t:null;if(L&&r)try{var s,l,d,u,c,h,f,p=JSON.parse(r),g=p.bidders,m=p.adUnit,v=p.extraConfigs,y=null!==(s=m.timeout)&&void 0!==s?s:2e3,b=null!==(l=m.width)&&void 0!==l?l:T.getWidth(),w=null!==(d=m.height)&&void 0!==d?d:T.getHeight(),E={code:m.code,sizes:[b,w],mediaTypes:{video:{mimes:["video/mp4","application/javascript"],context:"instream",playerSize:[b,w],playback_method:["auto_play_sound_off"],protocols:[1,2,3,4,5,6],minduration:null!==(u=m.minduration)&&void 0!==u?u:1,maxduration:null!==(c=m.maxduration)&&void 0!==c?c:60,startdelay:null!==(h=m.startdelay)&&void 0!==h?h:0,skip:null!==(f=m.skip)&&void 0!==f?f:0,linearity:1,api:[2],placement:1,plcmt:1}},bids:g},S={consentManagement:{gdpr:{cmpApi:"static",consentData:{getTCData:{tcString:T.getConsentString(),gdprApplies:T.getGdprApplies()}}}},cache:{url:"https://prebid.adnxs.com/pbc/v1/cache"},userSync:{filterSettings:{iframe:{bidders:"*",filter:"include"}}},schain:{validation:"strict",config:{ver:"1.0",complete:1,nodes:[{asi:"truvid.com",sid:T.getSellersJsonId(),hp:1}]}}};S=x(x({},S),v),C=e,A.que=A.que||[],A.removeAdUnit(),A.que.push(function(){A.addAdUnits(E),A.setConfig(S),e.fireRequestPixel(),A.requestBids({bidsBackHandler:function(e,t){var i=A.getHighestCpmBids(m.code);if(null!=i&&i.length){var n=i[0];if(!n)return o();if("video"!=n.mediaType)return console.warn("bid response media type is not video"),o();var r=C.adParameters;C.mediaFiles=[],C.type="google/ima",C.mediaFiles.push(new k.a("google/ima",{delivery:"progressive",height:"480",src:n.vastUrl,type:"google/ima",width:"640"},r)),n.vastImpUrl&&C.tracking.events.impression.push({event:"impression",offset:null,url:n.vastImpUrl}),a()}else o()},timeout:y})})}catch(e){console.error(e),o()}else o()}.bind(this),t()},i.onerror=function(){e()},i.srcdoc=n,r.appendChild(i),s=i})},this.init=function(){return new Promise(function(e,t){L?e():this.createFriendlyIframe(this.player.getPlayerElement()).then(function(){L=!0,e()}).catch(function(){t()})}.bind(this))},this.LoadAd=function(e,t,i){s.contentWindow.loadPrebidAd(e,t,i)}}var $="adLoaded",ee="adStarted",te="onAdEnd",m="onBiddingSessionsEnd",ie="adSkipped",ne="onBiddingSessionStart",re="onBeforeBiddingSessionStart",ae="stoppedTrackingAdViewability";function v(a,o){this.currentBidSession=null,this.playerObj=o;var e=a,s=null!=typeof(this.advertisingConfiguration=a).prebidVastParameters?a.prebidVastParameters:null,l=this,d=!1;this.allowedContainers=["application/javascript","google/ima","video/mp4","openrtb","relevant","prebid"];var t,u=o.getPlayerElement(),r=new W,c=null,i=null,h=Math.ceil(o.getPlayerHeight()),f=Math.ceil(o.getPlayerWidth()),p=Math.ceil(o.getPlayerWidth()),g=Math.ceil(o.getPlayerHeight()),n=!0,m=!1,v=void 0===a.startAdOnAdLoadedEvent||a.startAdOnAdLoadedEvent,y=null,b=0,w=null,E="",S=!1,A=!0,T=[],L=-1,C=-1,k=null,x=0,P=!1,I=null;function O(){n&&(m||o.getPlayerContentStatus()==z.g)&&(window.playerLog("restoring content - switch to content"),o.restoreContentState(),d=m=!1,l.currentBidSession&&l.currentBidSession.getCurrentTruvidAd().hasFiredImpression()&&(l.currentBidSession&&l.currentBidSession.resetCurrentTruvidAd(),l.currentBidSession=null))}function R(){l.currentBidSession&&l.currentBidSession.getCurrentTruvidAd()&&l.currentBidSession.getCurrentTruvidAd().getAdManager()&&l.currentBidSession.getCurrentTruvidAd().getAdManager().destroy()}function D(){t||(t=new H(l,o)).initialize()}function M(){E="",S=!1}function B(t){window.playerLog("start bidding session"),P=!1,s&&(window.playerLog("adding prebid parameters"),E=s,S=!0),D();if(a.isPreroll||"c"==a.midrollType&&a.midrollCount||"d"==a.midrollType&&a.midrollInterval||a.isPostroll){var e,i,n=null===(e=l.currentBidSession)||void 0===e?void 0:null===(i=e.getCurrentTruvidAd())||void 0===i?void 0:i.getAdManager();if(null!=n&&n.setAdsContainerVisibility&&n.setAdsContainerVisibility(!0),window.playerLog("dispatch bidding session start"),u.dispatchEvent(new CustomEvent(ne)),S||0,null==l.currentBidSession&&!d){switch(l.currentBidSession=new V.b(l,{adOffset:t.type,ads:[]},o),t.type){case Y.d:y="p";break;case Y.b:y="m";break;case Y.c:y="t"}b++,l.currentBidSession.ListenToBiddingSessionEnds(function(){N()}),l.currentBidSession.listenToStartLoadingContainer(function(){l.onStartLoadingContainer()}.bind(l));var r=c+E;l.adMacros.InjectMacros(r).then(function(e){S?l.loadAdByUrl(e,function(){!function(e){window.playerLog("reset current bid session - restart bidding session"),l.currentBidSession=null,M(),b--,B(e)}(t)}):A?(A=!1,F(),window.playerLog("opportunity pixel"),Object(j.b)(o.getOpportunityPixel()),l.currentBidSession.startBiddingSession(e)):C!=g||L!=p?(F(),A=!1,window.playerLog("opportunity pixel"),Object(j.b)(o.getOpportunityPixel()),l.currentBidSession.startBiddingSession(e)):(window.playerLog("opportunity pixel"),Object(j.b)(o.getOpportunityPixel()),l.currentBidSession.startLoadingLastAds())}).catch(function(e){Object(j.a)("injectmacrosErr",{wid:o.getWidgetId()},e),window.playerLog("error macros")})}}else window.playerLog("reset current bid session - start bidding session"),l.currentBidSession=null}function F(){L=p,C=g}function N(){window.playerLog("bidding session ends"),0,l.currentBidSession&&l.currentBidSession.abort(),l.currentBidSession=null,o.setIsAdPlaying(!1),u.dispatchEvent(new CustomEvent("onBiddingSessionsEnd"))}function _(){return"in_read"==o.getWidgetType()}function U(){var e=this.shiftPrioritizedMediaFiles();l.currentBidSession=new V.b(l,null,o),l.currentBidSession.setCurrentTruvidAd(this),l.currentBidSession.loadTruvidMediaFile(e)}this.previousVolume=null,this.maxAdStarts=null!=typeof e.maxAdStarts?e.maxAdStarts:null,this.gdpr=null!=typeof e.gdpr&&e.gdpr,this.adMacros=new q(l,this.playerObj),this.prebidAdManager=new X(this.playerObj),this.adSessionFQCounter={},this.getPrebidManager=function(e,t){switch(e){case"prebid":return new Z(this.playerObj,this);case"relevant":return new J(this.playerObj,t,this);case"openrtb":default:return this.prebidAdManager}},this.getUsPrivacyApplies=function(){return"1---"!==this.advertisingConfiguration.usPrivacy},this.addImpressionEvent2IMA=function(e){this.getImaAdManager().addImpressionCb(e)},this.getAdSessionFQCounter=function(){return this.adSessionFQCounter},this.adSessionInterval={},this.getAdSessionInterval=function(){return this.adSessionInterval},this.setLastVastAds=function(e){T=e},this.getLastVastAds=function(){return T},this.pauseAd=function(){l.currentBidSession&&l.currentBidSession.getCurrentTruvidAd()&&l.currentBidSession.getCurrentTruvidAd().getAdManager()&&l.currentBidSession.getCurrentTruvidAd().getAdManager().pauseAd()},this.resumeAd=function(){l.currentBidSession&&l.currentBidSession.getCurrentTruvidAd()&&l.currentBidSession.getCurrentTruvidAd().getAdManager()&&l.currentBidSession.getCurrentTruvidAd().getAdManager().resumeAd()},this.getAllowedContainers=function(){return this.allowedContainers.slice(0)},this.setStartAdOnAdLoadedEvent=function(e){v=e},this.getStartAdOnAdLoadedEvent=function(){return v},this.onPlayerResize=function(){var e,t,i={width:u.offsetWidth,height:u.offsetHeight};l.syncContentDimensions(i.width,i.height),e=0==f?o.getPlayerWidth():f,t=0==h?o.getPlayerHeight():h,d?l.currentBidSession&&l.currentBidSession.getCurrentTruvidAd()&&l.currentBidSession.getCurrentTruvidAd().getAdManager()&&l.currentBidSession.getCurrentTruvidAd().getAdManager().resizeAd(e,t):o.resizeSpinner(e,t),l.syncContentDimensions(e,t)},this.startPendingAd=function(){if(window.playerLog("start pending ad"),l.currentBidSession&&l.currentBidSession.getCurrentTruvidAd()&&l.currentBidSession.getCurrentTruvidAd().getAdManager()){var e=o.getElementDimension(u);l.syncContentDimensions(e.width,e.height),l.currentBidSession.getCurrentTruvidAd().getAdManager().resizeAd(f,h),l.currentBidSession.getCurrentTruvidAd().getAdManager().startAd(),v=!0}},this.getCurrentTagId=function(){if(l.currentBidSession&&l.currentBidSession.getCurrentTruvidAd())return l.currentBidSession&&l.currentBidSession.getCurrentTruvidAd().getDemandTagId()},this.onAdLoaded=function(){try{if(P=!0,l.currentBidSession)this.stopUpdateCurrentContentTimeState(),function(){if(window.playerLog("function onAdLoaded"),l.currentBidSession){if(m=!0,l.currentBidSession&&l.currentBidSession.getCurrentTruvidAd()&&(window.playerLog("function onAdLoaded - clear loading container timeout"),l.currentBidSession.getCurrentTruvidAd().clearLoadingContainerTimeout()),o.setIsAdPlaying(!0),n)try{o.saveContentState(!0)}catch(e){Object(j.a)("saveContentStateErr",{wid:o.getWidgetId()},e)}u.dispatchEvent(new CustomEvent($))}}();else if(w){this.stopUpdateCurrentContentTimeState(),l.currentBidSession&&l.currentBidSession.getCurrentTruvidAd()&&l.currentBidSession.getCurrentTruvidAd().clearLoadingContainerTimeout(),m=!0,o.setIsAdPlaying(!0);try{o.saveContentState(!0)}catch(e){Object(j.a)("saveContentStateErr2",{wid:o.getWidgetId()},e)}u.dispatchEvent(new CustomEvent($)),M()}}catch(e){Object(j.a)("OnAdLoadedErr",{wid:o.getWidgetId()},e)}},this.onAdStarted=function(){var e=null;if(l.currentBidSession&&l.currentBidSession.getCurrentTruvidAd()&&!(e=l.currentBidSession.getCurrentTruvidAd()).getIsLoaded()){if(e.setLoaded(!0),n)try{o.saveContentState(!1)}catch(e){Object(j.a)("saveContentStateErr3",{wid:o.getWidgetId()},e)}this.stopUpdateCurrentContentTimeState(),e.clearLoadingContainerTimeout(),o.setIsAdPlaying(!0)}d=!(P=!1),this.trackAdViewability(),u.dispatchEvent(new CustomEvent(ee)),0,this.syncContentDimensions(0,0),this.setAdSound(o.hasUserInteractionOccured()?this.playerObj.getVolume():.01)},this.trackAdViewability=function(){x=0;k=setInterval(function(){o.IsPlayerViewable()?x+=10:x=0,2e3<=x&&(l.currentBidSession&&l.currentBidSession.getCurrentTruvidAd()&&l.currentBidSession.getCurrentTruvidAd().fireViewability(),this.stopTrackingAdViewability())}.bind(this),10)},this.stopTrackingAdViewability=function(){l.currentBidSession&&l.currentBidSession.getCurrentTruvidAd()&&!l.currentBidSession.getCurrentTruvidAd().getStoppedTrackingViewability()&&l.currentBidSession.getCurrentTruvidAd().isAdOnly()&&(l.currentBidSession.getCurrentTruvidAd().setStoppedTrackingViewability(),o.dispatchEvent(ae,{currentAdViewabilityCounter:x})),clearInterval(k),x=0},this.onContentVolumeChange=function(){this.previousVolume=o.getCurrentVolume()},this.onVideoEnd=function(){R(),i&&clearTimeout(i)},this.onAdStopped=function(e){var t,i,n=null===(t=l.currentBidSession)||void 0===t?void 0:null===(i=t.getCurrentTruvidAd())||void 0===i?void 0:i.getAdManager();null!=n&&n.setAdsContainerVisibility&&n.setAdsContainerVisibility(!1),P=!1,this.stopTrackingAdViewability(),this.stopSettingsAdSound(),o.setIsAdPlaying(!1);var r=0;l.currentBidSession&&l.currentBidSession.getCurrentTruvidAd()&&(r=l.currentBidSession.getCurrentTruvidAd().getNumberOfTimesAdSkipped()),u.dispatchEvent(new CustomEvent(te,{detail:{numberOfTimesAdSkipped:r}})),m=d=!1,window.playerLog("on ad stopped"),this.stopUpdateCurrentContentTimeState(),e||_()?m=!1:(window.playerLog("going to switch to content"),O()),l.currentBidSession&&l.currentBidSession.resetCurrentTruvidAd(),N()},this.canStartBiddingSession=function(){return null==this.currentBidSession&&(!this.playerObj.getPauseOnHiddenTab()||this.playerObj.getPauseOnHiddenTab()&&!o.getPlayerStoppedOnPageVisibiltiyEvent()&&o.getIsPageVisible())},this.isAdLoading=function(){return P},this.init=function(){var i=function(e){this.initializeListeners(),e()}.bind(this),n=function(t){new Q(this.playerObj,this).Sync().then(function(){i(t)}.bind(this)).catch(function(e){Object(j.a)("userSyncErr",{wid:o.getWidgetId()},e),i(t)})}.bind(this);return new Promise(function(t){r.Load().then(function(){n(t)}.bind(this)).catch(function(e){Object(j.a)("thirdPartyLoaderLoadErr",{wid:o.getWidgetId()},e),n(t)}.bind(this))}.bind(this))},this.initializeListeners=function(){c=o.getVastPath();var e=o.getElementDimension(u);l.syncContentDimensions(e.width,e.height),this.playerObj.subscribe(z.i,this.onPlayerResize),this.playerObj.subscribe(K.e,this.onPlayerResize),this.playerObj.subscribe(K.b,this.onPlayerResize),this.playerObj.subscribe(z.o,this.onPlayerResize),this.playerObj.subscribe(z.d,function(){return new Promise(function(e){_()||(d=!1,clearTimeout(i),l.currentBidSession&&l.currentBidSession.destroy(),l.currentBidSession=null,A=!0),e()}.bind(this))}.bind(this))},this.stopAd=function(){l.currentBidSession&&l.currentBidSession.getCurrentTruvidAd()&&l.currentBidSession.getCurrentTruvidAd().getAdManager()&&(window.playerLog("ad stopped"),l.currentBidSession.getCurrentTruvidAd().getAdManager().stopAd()),this.stopTrackingAdViewability()},this.skipAd=function(){l.currentBidSession&&l.currentBidSession.getCurrentTruvidAd()&&l.currentBidSession.getCurrentTruvidAd().getAdManager()&&(u.dispatchEvent(new CustomEvent(te)),window.playerLog("ad skipped"),l.currentBidSession.getCurrentTruvidAd().getAdManager().skipAd()),u.dispatchEvent(new CustomEvent(ie)),this.stopTrackingAdViewability()},this.startBiddingSession=function(e){var t=!1,i=this;o.DispatchPromiseEvent(re).then(function(){!this.playerObj.hasUsedCmp()&&window.__tcfapi&&(t=!0),new Promise(function(e){t?new Q(i.playerObj,i).Sync().finally(function(){return e()}):e()}).finally(function(){B(e)})}.bind(this)).catch(function(){return window.playerLog("reject starting bidding session")})},this.killBiddingSession=function(){var e,t;(null===(e=l.currentBidSession)||void 0===e?void 0:null===(t=e.getCurrentTruvidAd())||void 0===t?void 0:t.getAdManager())&&(R(),this.onAdStopped()),l.currentBidSession&&l.currentBidSession.getCurrentTruvidAd()&&l.currentBidSession.getCurrentTruvidAd().getIsLoaded()&&O()},this.getAdRequestWidth=function(){return p},this.adRequestHeight=function(){return g},this.getAutomaticMacro=function(){return this.advertisingConfiguration.isClickToPlay||this.playerObj.hasUserInteractionOccured()?"click":"auto"},this.getCurrentSlotTypeMacro=function(){return y},this.getCurrentSlotNumberMacro=function(){return b},this.increaseCurrentSlotNUmberMacro=function(){b++},this.setAdSound=function(t){function i(){return top.document.querySelectorAll(".trv-player-container video")}var n=Array.from(i());I=setInterval(function(){var e;null!==(e=n)&&void 0!==e&&e.length||(n=Array.from(i())),n.forEach(function(e){return e.volume=t})},100)},this.stopSettingsAdSound=function(){I&&clearInterval(I)},this.syncContentDimensions=function(e,t){var i=Math.ceil(e),n=Math.ceil(t);f=i,h=n,0<e&&0<t&&(p=f,g=h)},this.setCurrentAdPlaying=function(e){d=e},this.advertisingState=function(){var e=!1;return d&&l.currentBidSession&&l.currentBidSession.getCurrentTruvidAd()&&l.currentBidSession.getCurrentTruvidAd().getAdManager()&&(e=l.currentBidSession.getCurrentTruvidAd().getAdManager().isCurrentAdPaused()),{paused:e}},this.initializeAdManagers=function(){D()},this.getImaAdManager=function(){return t},this.setLoadVastOnNextBiddingSession=function(e){A=e},this.onStartLoadingContainer=function(){this.previousVolume=o.getCurrentVolume()},this.onLoadingContainerFailed=function(e){window.playerLog("on loading container failed - advertising"),P=!1,o.setVolume(this.previousVolume),l.currentBidSession&&l.currentBidSession.getCurrentTruvidAd()&&l.currentBidSession.getCurrentTruvidAd().getIsLoaded()&&u.dispatchEvent(new CustomEvent("adStoppedAfterLoad")),l.currentBidSession&&l.currentBidSession.getCurrentTruvidAd()&&"function"==typeof l.currentBidSession.getCurrentTruvidAd().clearResources&&l.currentBidSession.getCurrentTruvidAd().clearResources(),l.currentBidSession&&e==l.currentBidSession.getCurrentTruvidAd()&&this.stopUpdateCurrentContentTimeState(),l.currentBidSession&&(o.isMediaPlayingIsDifferentThanContent()&&o.restoreContentState(),e.isPrebid||l.currentBidSession.onLoadingContainerFailed(e))},this.startUpdatingCurrentContentTimeState=function(){o.updateCurrentContentTimeState(),i=setInterval(function(){o.updateCurrentContentTimeState()},50)},this.stopUpdateCurrentContentTimeState=function(){clearInterval(i)},this.getRequestWidth=function(){return p},this.getRequestHeight=function(){return g},this.loadAdByUrl=function(e,t){this.adMacros.InjectMacros(e).then(function(e){(w=new G.a(null,e,l.getAllowedContainers())).requestMediaFiles(this.getRequestWidth(),this.getRequestHeight(),U,t),w.setIsPrebid(!0)}.bind(this)).catch(function(e){Object(j.a)("LoadAdByUrlEx",{wid:o.getWidgetId()},e),window.playerLog("error macros")})}}},function(e,t,i){"use strict";function a(e,t,i){i=i||e.length;for(var n="";t<i;t++)n+=e.charAt(t);return n}function n(e){e+="=";for(var t,i=decodeURIComponent(document.cookie).split(";"),n=0;n<i.length;n++){for(var r=i[n];" "==r.charAt(0);)r=a(r,1);if(0==r.indexOf(e)){t=a(r,e.length,r.length);break}}return t}function r(e){var t=window.location.hostname;return 0<=e.indexOf(t)?t:0<=t.indexOf(e)?e:t}function o(e,t,i,n){try{document.cookie=e+"="+JSON.stringify(t)+";path=/;expires="+i+";domain=."+n}catch(e){window.playerLog("could not write cookie"),window.playerLog(e)}}i.d(t,"a",function(){return n}),i.d(t,"b",function(){return r}),i.d(t,"c",function(){return o})},function(e,t,i){"use strict";function n(e){var t;return e.getBoundingClientRect?{width:(t=e.getBoundingClientRect()).width,height:t.height}:{width:e.offsetWidth,height:e.offsetHeight}}function r(e){if(null==e||!e.length)return"";var t=top.navigator.userAgent,i=/(Android|webOS|iPhone|iPad|iPod|BlackBerry|BB|PlayBook|IEMobile|Windows Phone|Kindle|Silk|Opera Mini)/i.test(t),n=e.filter(function(e){return"both"==e.device||e.device==(i?"mobile":"desktop")});if(n.length){for(var r=0;r<n.length;r++)try{var a=n[r].s,o=top.document.querySelector(a);if(null!=o&&o.parentElement&&!"BODY".includes(o.parentElement.nodeName))return""}catch(e){continue}return"131"}return""}function a(){try{if(window.frameElement&&void 0!==window.parent.location&&void 0!==window.parent.location.href){var e=window.parent.location.href;0<e.indexOf("#")&&(e=e.substr(0,e.indexOf("#")));var t=window.location.href;return 0<t.indexOf("#")&&(t=t.substr(0,t.indexOf("#"))),e==t}return!1}catch(e){return!1}}i.d(t,"b",function(){return n}),i.d(t,"a",function(){return r}),i.d(t,"c",function(){return a})},function(e,t,i){
/*
 *  @Copyright (c) 2017 Dailymotion (http://www.dailymotion.com)
 *  @Licensed under the Apache License, Version 2.0 (the "License");
 *  @you may not use this file except in compliance with the License.
 *  @You may obtain a copy of the License at
    http://www.apache.org/licenses/LICENSE-2.0
    Unless required by applicable law or agreed to in writing, software
    distributed under the License is distributed on an "AS IS" BASIS,
    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    See the License for the specific language governing permissions and
    limitations under the License.
    src/remux/mp4-generator.js and src/demux/exp-golomb.ts implementation in this project
    are derived from the HLS library for video.js (https://github.com/videojs/videojs-contrib-hls)
    That work is also covered by the Apache 2 License, following copyright:
    Copyright (c) 2013-2015 Brightcove
    THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
    IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
    FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
    AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
    LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
    OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
    THE SOFTWARE.
*/
"undefined"!=typeof window&&(e.exports=function(i){var n={};function r(e){if(n[e])return n[e].exports;var t=n[e]={i:e,l:!1,exports:{}};return i[e].call(t.exports,t,t.exports,r),t.l=!0,t.exports}return r.m=i,r.c=n,r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(i,n,function(e){return t[e]}.bind(null,n));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/dist/",r(r.s=18)}([function(e,t,i){"use strict";var n;i.d(t,"a",function(){return n}),function(e){e.MEDIA_ATTACHING="hlsMediaAttaching",e.MEDIA_ATTACHED="hlsMediaAttached",e.MEDIA_DETACHING="hlsMediaDetaching",e.MEDIA_DETACHED="hlsMediaDetached",e.BUFFER_RESET="hlsBufferReset",e.BUFFER_CODECS="hlsBufferCodecs",e.BUFFER_CREATED="hlsBufferCreated",e.BUFFER_APPENDING="hlsBufferAppending",e.BUFFER_APPENDED="hlsBufferAppended",e.BUFFER_EOS="hlsBufferEos",e.BUFFER_FLUSHING="hlsBufferFlushing",e.BUFFER_FLUSHED="hlsBufferFlushed",e.MANIFEST_LOADING="hlsManifestLoading",e.MANIFEST_LOADED="hlsManifestLoaded",e.MANIFEST_PARSED="hlsManifestParsed",e.LEVEL_SWITCHING="hlsLevelSwitching",e.LEVEL_SWITCHED="hlsLevelSwitched",e.LEVEL_LOADING="hlsLevelLoading",e.LEVEL_LOADED="hlsLevelLoaded",e.LEVEL_UPDATED="hlsLevelUpdated",e.LEVEL_PTS_UPDATED="hlsLevelPtsUpdated",e.LEVELS_UPDATED="hlsLevelsUpdated",e.AUDIO_TRACKS_UPDATED="hlsAudioTracksUpdated",e.AUDIO_TRACK_SWITCHING="hlsAudioTrackSwitching",e.AUDIO_TRACK_SWITCHED="hlsAudioTrackSwitched",e.AUDIO_TRACK_LOADING="hlsAudioTrackLoading",e.AUDIO_TRACK_LOADED="hlsAudioTrackLoaded",e.SUBTITLE_TRACKS_UPDATED="hlsSubtitleTracksUpdated",e.SUBTITLE_TRACKS_CLEARED="hlsSubtitleTracksCleared",e.SUBTITLE_TRACK_SWITCH="hlsSubtitleTrackSwitch",e.SUBTITLE_TRACK_LOADING="hlsSubtitleTrackLoading",e.SUBTITLE_TRACK_LOADED="hlsSubtitleTrackLoaded",e.SUBTITLE_FRAG_PROCESSED="hlsSubtitleFragProcessed",e.CUES_PARSED="hlsCuesParsed",e.NON_NATIVE_TEXT_TRACKS_FOUND="hlsNonNativeTextTracksFound",e.INIT_PTS_FOUND="hlsInitPtsFound",e.FRAG_LOADING="hlsFragLoading",e.FRAG_LOAD_EMERGENCY_ABORTED="hlsFragLoadEmergencyAborted",e.FRAG_LOADED="hlsFragLoaded",e.FRAG_DECRYPTED="hlsFragDecrypted",e.FRAG_PARSING_INIT_SEGMENT="hlsFragParsingInitSegment",e.FRAG_PARSING_USERDATA="hlsFragParsingUserdata",e.FRAG_PARSING_METADATA="hlsFragParsingMetadata",e.FRAG_PARSED="hlsFragParsed",e.FRAG_BUFFERED="hlsFragBuffered",e.FRAG_CHANGED="hlsFragChanged",e.FPS_DROP="hlsFpsDrop",e.FPS_DROP_LEVEL_CAPPING="hlsFpsDropLevelCapping",e.ERROR="hlsError",e.DESTROYING="hlsDestroying",e.KEY_LOADING="hlsKeyLoading",e.KEY_LOADED="hlsKeyLoaded",e.LIVE_BACK_BUFFER_REACHED="hlsLiveBackBufferReached",e.BACK_BUFFER_REACHED="hlsBackBufferReached"}(n=n||{})},function(e,t,i){"use strict";i.d(t,"a",function(){return o}),i.d(t,"b",function(){return s});var r=function(){},n={trace:r,debug:r,log:r,warn:r,info:r,error:r},a=n;function o(e){if(self.console&&!0===e||"object"==typeof e){!function(t){for(var e=arguments.length,i=new Array(1<e?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];i.forEach(function(e){a[e]=t[e]?t[e].bind(t):function(e){var t=self.console[e];return t?t.bind(self.console,"["+e+"] >"):r}(e)})}(e,"debug","log","info","warn","error");try{a.log()}catch(e){a=n}}else a=n}var s=n},function(e,t,i){"use strict";var n,r;i.d(t,"b",function(){return n}),i.d(t,"a",function(){return r}),function(e){e.NETWORK_ERROR="networkError",e.MEDIA_ERROR="mediaError",e.KEY_SYSTEM_ERROR="keySystemError",e.MUX_ERROR="muxError",e.OTHER_ERROR="otherError"}(n=n||{}),function(e){e.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",e.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",e.KEY_SYSTEM_NO_SESSION="keySystemNoSession",e.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",e.KEY_SYSTEM_NO_INIT_DATA="keySystemNoInitData",e.MANIFEST_LOAD_ERROR="manifestLoadError",e.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",e.MANIFEST_PARSING_ERROR="manifestParsingError",e.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",e.LEVEL_EMPTY_ERROR="levelEmptyError",e.LEVEL_LOAD_ERROR="levelLoadError",e.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",e.LEVEL_SWITCH_ERROR="levelSwitchError",e.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",e.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",e.SUBTITLE_LOAD_ERROR="subtitleTrackLoadError",e.SUBTITLE_TRACK_LOAD_TIMEOUT="subtitleTrackLoadTimeOut",e.FRAG_LOAD_ERROR="fragLoadError",e.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",e.FRAG_DECRYPT_ERROR="fragDecryptError",e.FRAG_PARSING_ERROR="fragParsingError",e.REMUX_ALLOC_ERROR="remuxAllocError",e.KEY_LOAD_ERROR="keyLoadError",e.KEY_LOAD_TIMEOUT="keyLoadTimeOut",e.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",e.BUFFER_INCOMPATIBLE_CODECS_ERROR="bufferIncompatibleCodecsError",e.BUFFER_APPEND_ERROR="bufferAppendError",e.BUFFER_APPENDING_ERROR="bufferAppendingError",e.BUFFER_STALLED_ERROR="bufferStalledError",e.BUFFER_FULL_ERROR="bufferFullError",e.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",e.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",e.INTERNAL_EXCEPTION="internalException",e.INTERNAL_ABORTED="aborted",e.UNKNOWN="unknown"}(r=r||{})},function(e,t,i){"use strict";i.d(t,"a",function(){return n});var n=Number.isFinite||function(e){return"number"==typeof e&&isFinite(e)};Number.MAX_SAFE_INTEGER},function(e,t,i){"use strict";i.d(t,"a",function(){return r}),i.d(t,"b",function(){return p}),i.d(t,"c",function(){return g});var r,a=i(3),n=i(9),o=i(1),s=i(14),l=i(11);function d(e,t){e.prototype=Object.create(t.prototype),u(e.prototype.constructor=e,t)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function h(e,t,i){return t&&c(e.prototype,t),i&&c(e,i),e}!function(e){e.AUDIO="audio",e.VIDEO="video",e.AUDIOVIDEO="audiovideo"}(r=r||{});var f=function(){function e(e){var t;this._byteRange=null,this._url=null,this.baseurl=void 0,this.relurl=void 0,this.elementaryStreams=((t={})[r.AUDIO]=null,t[r.VIDEO]=null,t[r.AUDIOVIDEO]=null,t),this.baseurl=e}return e.prototype.setByteRange=function(e,t){var i=e.split("@",2),n=[];1===i.length?n[0]=t?t.byteRangeEndOffset:0:n[0]=parseInt(i[1]),n[1]=parseInt(i[0])+n[0],this._byteRange=n},h(e,[{key:"byteRange",get:function(){return this._byteRange?this._byteRange:[]}},{key:"byteRangeStartOffset",get:function(){return this.byteRange[0]}},{key:"byteRangeEndOffset",get:function(){return this.byteRange[1]}},{key:"url",get:function(){return!this._url&&this.baseurl&&this.relurl&&(this._url=Object(n.buildAbsoluteURL)(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url||""},set:function(e){this._url=e}}]),e}(),p=function(n){function e(e,t){var i;return(i=n.call(this,t)||this)._decryptdata=null,i.rawProgramDateTime=null,i.programDateTime=null,i.tagList=[],i.duration=0,i.sn=0,i.levelkey=void 0,i.type=void 0,i.loader=null,i.level=-1,i.cc=0,i.startPTS=void 0,i.endPTS=void 0,i.appendedPTS=void 0,i.startDTS=void 0,i.endDTS=void 0,i.start=0,i.deltaPTS=void 0,i.maxStartPTS=void 0,i.minEndPTS=void 0,i.stats=new l.a,i.urlId=0,i.data=void 0,i.bitrateTest=!1,i.title=null,i.type=e,i}d(e,n);var t=e.prototype;return t.createInitializationVector=function(e){for(var t=new Uint8Array(16),i=12;i<16;i++)t[i]=e>>8*(15-i)&255;return t},t.setDecryptDataFromLevelKey=function(e,t){var i=e;return"AES-128"===(null==e?void 0:e.method)&&e.uri&&!e.iv&&((i=s.a.fromURI(e.uri)).method=e.method,i.iv=this.createInitializationVector(t),i.keyFormat="identity"),i},t.setElementaryStreamInfo=function(e,t,i,n,r,a){void 0===a&&(a=!1);var o=this.elementaryStreams,s=o[e];s?(s.startPTS=Math.min(s.startPTS,t),s.endPTS=Math.max(s.endPTS,i),s.startDTS=Math.min(s.startDTS,n),s.endDTS=Math.max(s.endDTS,r)):o[e]={startPTS:t,endPTS:i,startDTS:n,endDTS:r,partial:a}},t.clearElementaryStreamInfo=function(){var e=this.elementaryStreams;e[r.AUDIO]=null,e[r.VIDEO]=null,e[r.AUDIOVIDEO]=null},h(e,[{key:"decryptdata",get:function(){if(!this.levelkey&&!this._decryptdata)return null;if(!this._decryptdata&&this.levelkey){var e=this.sn;"number"!=typeof e&&(this.levelkey&&"AES-128"===this.levelkey.method&&!this.levelkey.iv&&o.b.warn('missing IV for initialization segment with method="'+this.levelkey.method+'" - compliance issue'),e=0),this._decryptdata=this.setDecryptDataFromLevelKey(this.levelkey,e)}return this._decryptdata}},{key:"end",get:function(){return this.start+this.duration}},{key:"endProgramDateTime",get:function(){if(null===this.programDateTime)return null;if(!Object(a.a)(this.programDateTime))return null;var e=Object(a.a)(this.duration)?this.duration:0;return this.programDateTime+1e3*e}},{key:"encrypted",get:function(){var e;return!(null===(e=this.decryptdata)||void 0===e||!e.keyFormat||!this.decryptdata.uri)}}]),e}(f),g=function(s){function e(e,t,i,n,r){var a;(a=s.call(this,i)||this).fragOffset=0,a.duration=0,a.gap=!1,a.independent=!1,a.relurl=void 0,a.fragment=void 0,a.index=void 0,a.stats=new l.a,a.duration=e.decimalFloatingPoint("DURATION"),a.gap=e.bool("GAP"),a.independent=e.bool("INDEPENDENT"),a.relurl=e.enumeratedString("URI"),a.fragment=t,a.index=n;var o=e.enumeratedString("BYTERANGE");return o&&a.setByteRange(o,r),r&&(a.fragOffset=r.fragOffset+r.duration),a}return d(e,s),h(e,[{key:"start",get:function(){return this.fragment.start+this.fragOffset}},{key:"end",get:function(){return this.start+this.duration}},{key:"loaded",get:function(){var e=this.elementaryStreams;return!!(e.audio||e.video||e.audiovideo)}}]),e}(f)},function(e,t,i){"use strict";i.d(t,"b",function(){return b}),i.d(t,"g",function(){return w}),i.d(t,"f",function(){return n}),i.d(t,"d",function(){return a}),i.d(t,"c",function(){return o}),i.d(t,"e",function(){return d}),i.d(t,"h",function(){return c}),i.d(t,"a",function(){return h});var r=i(7),v=i(4),s=Math.pow(2,32)-1,u=[].push;function m(e){return String.fromCharCode.apply(null,e)}function y(e,t){"data"in e&&(t+=e.start,e=e.data);var i=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3];return i<0?4294967296+i:i}function l(e,t,i){"data"in e&&(t+=e.start,e=e.data),e[t]=i>>24,e[t+1]=i>>16&255,e[t+2]=i>>8&255,e[t+3]=255&i}function b(e,t){var i,n,r,a=[];if(!t.length)return a;r="data"in e?(i=e.data,n=e.start,e.end):(n=0,(i=e).byteLength);for(var o=n;o<r;){var s=y(i,o),l=1<s?o+s:r;if(m(i.subarray(o+4,o+8))===t[0])if(1===t.length)a.push({data:i,start:o+8,end:l});else{var d=b({data:i,start:o+8,end:l},t.slice(1));d.length&&u.apply(a,d)}o=l}return a}function w(e){var t=b(e,["moov"])[0],i=t?t.end:null,n=b(e,["sidx"]);if(!n||!n[0])return null;var r=[],a=n[0],o=a.data[0],s=0===o?8:16,l=y(a,s);s+=4,s+=0===o?8:16,s+=2;var d=a.end+0,u=function(e,t){"data"in e&&(t+=e.start,e=e.data);var i=e[t]<<8|e[t+1];return i<0?65536+i:i}(a,s);s+=2;for(var c=0;c<u;c++){var h=s,f=y(a,h);h+=4;var p=2147483647&f;if(1==(2147483648&f)>>>31)return console.warn("SIDX has hierarchical references (not supported)"),null;var g=y(a,h);h+=4,r.push({referenceSize:p,subsegmentDuration:g,info:{duration:g/l,start:d,end:d+p-1}}),d+=p,s=h+=4}return{earliestPresentationTime:0,timescale:l,version:o,referencesCount:u,references:r,moovEndOffset:i}}function n(e){for(var n=[],t=b(e,["moov","trak"]),i=0;i<t.length;i++){var r=t[i],a=b(r,["tkhd"])[0];if(a){var o=a.data[a.start],s=0===o?12:20,l=y(a,s),d=b(r,["mdia","mdhd"])[0];if(d){var u=y(d,s=0===(o=d.data[d.start])?12:20),c=b(r,["mdia","hdlr"])[0];if(c){var h=m(c.data.subarray(c.start+8,c.start+12)),f={soun:v.a.AUDIO,vide:v.a.VIDEO}[h];if(f){var p=b(r,["mdia","minf","stbl","stsd"])[0],g=void 0;p&&(g=m(p.data.subarray(p.start+12,p.start+16))),n[l]={timescale:u,type:f},n[f]={timescale:u,id:l,codec:g}}}}}}return b(e,["moov","mvex","trex"]).forEach(function(e){var t=y(e,4),i=n[t];i&&(i.default={duration:y(e,12),flags:y(e,20)})}),n}function a(l,e){return b(e,["moof","traf"]).reduce(function(e,t){var o=b(t,["tfdt"])[0],s=o.data[o.start],i=b(t,["tfhd"]).reduce(function(e,t){var i=y(t,4),n=l[i];if(n){var r=y(o,4);1===s&&(r*=Math.pow(2,32),r+=y(o,8));var a=r/(n.timescale||9e4);if(isFinite(a)&&(null===e||a<e))return a}return e},null);return null!==i&&isFinite(i)&&(null===e||i<e)?i:e},null)||0}function o(e,t){for(var i=0,n=0,r=0,a=b(e,["moof","traf"]),o=0;o<a.length;o++){var s=a[o],l=b(s,["tfhd"])[0],d=t[y(l,4)];if(d){var u=d.default,c=y(l,0)|(null==u?void 0:u.flags),h=null==u?void 0:u.duration;8&c&&(h=y(l,2&c?12:8));for(var f=d.timescale||9e4,p=b(s,["trun"]),g=0;g<p.length;g++)i=h?h*y(p[g],4):E(p[g]),d.type===v.a.VIDEO?n+=i/f:d.type===v.a.AUDIO&&(r+=i/f)}}if(0===n&&0===r){var m=w(e);if(null!=m&&m.references)return m.references.reduce(function(e,t){return e+t.info.duration||0},0)}return n||r}function E(e){var t=y(e,0),i=8;1&t&&(i+=4),4&t&&(i+=4);for(var n=0,r=y(e,4),a=0;a<r;a++)256&t&&(n+=y(e,i),i+=4),512&t&&(i+=4),1024&t&&(i+=4),2048&t&&(i+=4);return n}function d(r,e,o){b(e,["moof","traf"]).forEach(function(n){b(n,["tfhd"]).forEach(function(e){var t=y(e,4),i=r[t];if(i){var a=i.timescale||9e4;b(n,["tfdt"]).forEach(function(e){var t=e.data[e.start],i=y(e,4);if(0===t)l(e,4,i-o*a);else{i*=Math.pow(2,32),i+=y(e,8),i-=o*a,i=Math.max(i,0);var n=Math.floor(i/(s+1)),r=Math.floor(i%(s+1));l(e,4,n),l(e,8,r)}})}})})}function c(e){var t={valid:null,remainder:null},i=b(e,["moof"]);if(!i)return t;if(i.length<2)return t.remainder=e,t;var n=i[i.length-1];return t.valid=Object(r.a)(e,0,n.start-8),t.remainder=Object(r.a)(e,n.start-8),t}function h(e,t){var i=new Uint8Array(e.length+t.length);return i.set(e),i.set(t,e.length),i}},function(e,t,i){"use strict";i.d(t,"b",function(){return n}),i.d(t,"a",function(){return r}),i.d(t,"d",function(){return a}),i.d(t,"e",function(){return o}),i.d(t,"c",function(){return s}),i.d(t,"f",function(){return v});var c,u=function(e,t){return t+10<=e.length&&73===e[t]&&68===e[t+1]&&51===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128},h=function(e,t){return t+10<=e.length&&51===e[t]&&68===e[t+1]&&73===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128},n=function(e,t){for(var i=t,n=0;u(e,t);)n+=10,n+=f(e,t+6),h(e,t+10)&&(n+=10),t+=n;if(0<n)return e.subarray(i,i+n)},f=function(e,t){var i=0;return i=(127&e[t])<<21,i|=(127&e[t+1])<<14,i|=(127&e[t+2])<<7,i|=127&e[t+3]},r=function(e,t){return u(e,t)&&f(e,t+6)+10<=e.length-t},a=function(e){for(var t=s(e),i=0;i<t.length;i++){var n=t[i];if(o(n))return m(n)}},o=function(e){return e&&"PRIV"===e.key&&"com.apple.streaming.transportStreamTimestamp"===e.info},s=function(e){for(var t=0,i=[];u(e,t);){for(var n=f(e,t+6),r=(t+=10)+n;t+8<r;){var a=(s=e.subarray(t),l=String.fromCharCode(s[0],s[1],s[2],s[3]),d=f(s,4),{type:l,size:d,data:s.subarray(10,10+d)}),o=p(a);o&&i.push(o),t+=a.size+10}h(e,t)&&(t+=10)}var s,l,d;return i},p=function(e){return"PRIV"===e.type?l(e):"W"===e.type[0]?g(e):d(e)},l=function(e){if(!(e.size<2)){var t=v(e.data,!0),i=new Uint8Array(e.data.subarray(t.length+1));return{key:e.type,info:t,data:i.buffer}}},d=function(e){if(!(e.size<2)){if("TXXX"===e.type){var t=1,i=v(e.data.subarray(t),!0);t+=i.length+1;var n=v(e.data.subarray(t));return{key:e.type,info:i,data:n}}var r=v(e.data.subarray(1));return{key:e.type,data:r}}},g=function(e){if("WXXX"===e.type){if(e.size<2)return;var t=1,i=v(e.data.subarray(t),!0);t+=i.length+1;var n=v(e.data.subarray(t));return{key:e.type,info:i,data:n}}var r=v(e.data);return{key:e.type,data:r}},m=function(e){if(8===e.data.byteLength){var t=new Uint8Array(e.data),i=1&t[3],n=(t[4]<<23)+(t[5]<<15)+(t[6]<<7)+t[7];return n/=45,i&&(n+=47721858.84),Math.round(n)}},v=function(e,t){void 0===t&&(t=!1);var i=(c||void 0===self.TextDecoder||(c=new self.TextDecoder("utf-8")),c);if(i){var n=i.decode(e);if(t){var r=n.indexOf("\0");return-1!==r?n.substring(0,r):n}return n.replace(/\0/g,"")}for(var a,o,s,l=e.length,d="",u=0;u<l;){if(0===(a=e[u++])&&t)return d;if(0!==a&&3!==a)switch(a>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:d+=String.fromCharCode(a);break;case 12:case 13:o=e[u++],d+=String.fromCharCode((31&a)<<6|63&o);break;case 14:o=e[u++],s=e[u++],d+=String.fromCharCode((15&a)<<12|(63&o)<<6|(63&s)<<0)}}return d}},function(e,t,i){"use strict";function n(e,t,i){return Uint8Array.prototype.slice?e.slice(t,i):new Uint8Array(Array.prototype.slice.call(e,t,i))}i.d(t,"a",function(){return n})},function(e,t,i){"use strict";i.d(t,"c",function(){return be}),i.d(t,"d",function(){return Ee}),i.d(t,"a",function(){return Se}),i.d(t,"b",function(){return Ae});var ee=i(0),te=i(2),n=i(13),y=i(3),P=i(6),x=i(5),h=i(7),r=function(){function e(){this._audioTrack=void 0,this._id3Track=void 0,this.frameIndex=0,this.cachedData=null,this.initPTS=null}var t=e.prototype;return t.resetInitSegment=function(e,t,i){this._id3Track={type:"id3",id:0,pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0}},t.resetTimeStamp=function(){},t.resetContiguity=function(){},t.canParse=function(e,t){return!1},t.appendFrame=function(e,t,i){},t.demux=function(e,t){this.cachedData&&(e=Object(x.a)(this.cachedData,e),this.cachedData=null);var i,n,r=P.b(e,0),a=r?r.length:0,o=this._audioTrack,s=this._id3Track,l=r?P.d(r):void 0,d=e.length;for(0!==this.frameIndex&&null!==this.initPTS||(this.initPTS=f(l,t)),r&&0<r.length&&s.samples.push({pts:this.initPTS,dts:this.initPTS,data:r}),n=this.initPTS;a<d;){if(this.canParse(e,a)){var u=this.appendFrame(o,e,a);u?(this.frameIndex++,n=u.sample.pts,i=a+=u.length):a=d}else P.a(e,a)?(r=P.b(e,a),s.samples.push({pts:n,dts:n,data:r}),i=a+=r.length):a++;if(a===d&&i!==d){var c=Object(h.a)(e,i);this.cachedData?this.cachedData=Object(x.a)(this.cachedData,c):this.cachedData=c}}return{audioTrack:o,avcTrack:{type:"",id:-1,pid:-1,inputTimeScale:9e4,sequenceNumber:-1,samples:[],dropped:0},id3Track:s,textTrack:{type:"",id:-1,pid:-1,inputTimeScale:9e4,sequenceNumber:-1,samples:[],dropped:0}}},t.demuxSampleAes=function(e,t,i){return Promise.reject(new Error("["+this+"] This demuxer does not support Sample-AES decryption"))},t.flush=function(e){var t=this.cachedData;return t&&(this.cachedData=null,this.demux(t,0)),this.frameIndex=0,{audioTrack:this._audioTrack,avcTrack:{type:"",id:-1,pid:-1,inputTimeScale:9e4,sequenceNumber:-1,samples:[],dropped:0},id3Track:this._id3Track,textTrack:{type:"",id:-1,pid:-1,inputTimeScale:9e4,sequenceNumber:-1,samples:[],dropped:0}}},t.destroy=function(){},e}(),f=function(e,t){return Object(y.a)(e)?90*e:9e4*t},a=r,ie=i(1);function o(e,t){return 255===e[t]&&240==(246&e[t+1])}function u(e,t){return 1&e[t+1]?7:9}function c(e,t){return(3&e[t+3])<<11|e[t+4]<<3|(224&e[t+5])>>>5}function m(e,t){return t+1<e.length&&o(e,t)}function s(e,t){if(m(e,t)){var i=u(e,t);if(t+i>=e.length)return!1;var n=c(e,t);if(n<=i)return!1;var r=t+n;return r===e.length||m(e,r)}return!1}function v(e,t,i,n,r){if(!e.samplerate){var a=function(e,t,i,n){var r,a,o,s,l=navigator.userAgent.toLowerCase(),d=n,u=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];r=1+((192&t[i+2])>>>6);var c=(60&t[i+2])>>>2;if(!(u.length-1<c))return o=(1&t[i+2])<<2,o|=(192&t[i+3])>>>6,ie.b.log("manifest codec:"+n+", ADTS type:"+r+", samplingIndex:"+c),a=/firefox/i.test(l)?6<=c?(r=5,s=new Array(4),c-3):(r=2,s=new Array(2),c):-1!==l.indexOf("android")?(r=2,s=new Array(2),c):(r=5,s=new Array(4),n&&(-1!==n.indexOf("mp4a.40.29")||-1!==n.indexOf("mp4a.40.5"))||!n&&6<=c?c-3:((n&&-1!==n.indexOf("mp4a.40.2")&&(6<=c&&1==o||/vivaldi/i.test(l))||!n&&1==o)&&(r=2,s=new Array(2)),c)),s[0]=r<<3,s[0]|=(14&c)>>1,s[1]|=(1&c)<<7,s[1]|=o<<3,5===r&&(s[1]|=(14&a)>>1,s[2]=(1&a)<<7,s[2]|=8,s[3]=0),{config:s,samplerate:u[c],channelCount:o,codec:"mp4a.40."+r,manifestCodec:d};e.trigger(ee.a.ERROR,{type:te.b.MEDIA_ERROR,details:te.a.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+c})}(t,i,n,r);if(!a)return;e.config=a.config,e.samplerate=a.samplerate,e.channelCount=a.channelCount,e.codec=a.codec,e.manifestCodec=a.manifestCodec,ie.b.log("parsed codec:"+e.codec+", rate:"+a.samplerate+", channels:"+a.channelCount)}}function b(e){return 9216e4/e}function w(e,t,i,n,r){var a=function(e,t,i,n,r){var a=e.length,o=u(e,t),s=c(e,t);if(0<(s-=o)&&t+o+s<=a)return{headerLength:o,frameLength:s,stamp:i+n*r}}(t,i,n,r,b(e.samplerate));if(a){var o=a.stamp,s=a.headerLength,l=a.frameLength,d={unit:t.subarray(i+s,i+s+l),pts:o,dts:o};return e.samples.push(d),{sample:d,length:l+s}}}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=function(n){var e,t;function i(e,t){var i;return(i=n.call(this)||this).observer=void 0,i.config=void 0,i.observer=e,i.config=t,i}t=n,(e=i).prototype=Object.create(t.prototype),l(e.prototype.constructor=e,t);var r=i.prototype;return r.resetInitSegment=function(e,t,i){n.prototype.resetInitSegment.call(this,e,t,i),this._audioTrack={container:"audio/adts",type:"audio",id:0,pid:-1,sequenceNumber:0,isAAC:!0,samples:[],manifestCodec:e,duration:i,inputTimeScale:9e4,dropped:0}},i.probe=function(e){if(!e)return!1;for(var t=(P.b(e,0)||[]).length,i=e.length;t<i;t++)if(s(e,t))return ie.b.log("ADTS sync word found !"),!0;return!1},r.canParse=function(e,t){return function(e,t){return function(e,t){return t+5<e.length}(e,t)&&o(e,t)&&c(e,t)<=e.length-t}(e,t)},r.appendFrame=function(e,t,i){return v(e,this.observer,t,i,e.manifestCodec),w(e,t,i,this.initPTS,this.frameIndex)},i}(a);d.minProbeByteLength=9;var p=d,g=function(){function e(e,t){this.remainderData=null,this.config=void 0,this.config=t}var t=e.prototype;return t.resetTimeStamp=function(){},t.resetInitSegment=function(){},t.resetContiguity=function(){},e.probe=function(e){return 0<Object(x.b)({data:e,start:0,end:Math.min(e.length,16384)},["moof"]).length},t.demux=function(e){var t=e,i={type:"",id:-1,pid:-1,inputTimeScale:9e4,sequenceNumber:-1,samples:[],dropped:0};if(this.config.progressive){this.remainderData&&(t=Object(x.a)(this.remainderData,e));var n=Object(x.h)(t);this.remainderData=n.remainder,i.samples=n.valid||new Uint8Array}else i.samples=t;return{audioTrack:{type:"",id:-1,pid:-1,inputTimeScale:9e4,sequenceNumber:-1,samples:[],dropped:0},avcTrack:i,id3Track:{type:"",id:-1,pid:-1,inputTimeScale:9e4,sequenceNumber:-1,samples:[],dropped:0},textTrack:{type:"",id:-1,pid:-1,inputTimeScale:9e4,sequenceNumber:-1,samples:[],dropped:0}}},t.flush=function(){var e={type:"",id:-1,pid:-1,inputTimeScale:9e4,sequenceNumber:-1,samples:[],dropped:0};return e.samples=this.remainderData||new Uint8Array,this.remainderData=null,{audioTrack:{type:"",id:-1,pid:-1,inputTimeScale:9e4,sequenceNumber:-1,samples:[],dropped:0},avcTrack:e,id3Track:{type:"",id:-1,pid:-1,inputTimeScale:9e4,sequenceNumber:-1,samples:[],dropped:0},textTrack:{type:"",id:-1,pid:-1,inputTimeScale:9e4,sequenceNumber:-1,samples:[],dropped:0}}},t.demuxSampleAes=function(e,t,i){return Promise.reject(new Error("The MP4 demuxer does not support SAMPLE-AES decryption"))},t.destroy=function(){},e}();g.minProbeByteLength=1024;var E=g,S=null,A=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],T=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],L=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],C=[0,1,1,4];function I(e,t,i,n,r){if(!(i+24>t.length)){var a=k(t,i);if(a&&i+a.frameLength<=t.length){var o=n+r*(9e4*a.samplesPerFrame/a.sampleRate),s={unit:t.subarray(i,i+a.frameLength),pts:o,dts:o};return e.config=[],e.channelCount=a.channelCount,e.samplerate=a.sampleRate,e.samples.push(s),{sample:s,length:a.frameLength}}}}function k(e,t){var i=e[t+1]>>3&3,n=e[t+1]>>1&3,r=e[t+2]>>4&15,a=e[t+2]>>2&3;if(1!=i&&0!=r&&15!=r&&3!=a){var o=e[t+2]>>1&1,s=e[t+3]>>6,l=1e3*A[14*(3==i?3-n:3==n?3:4)+r-1],d=T[3*(3==i?0:2==i?1:2)+a],u=3==s?1:2,c=L[i][n],h=C[n],f=8*c*h,p=Math.floor(c*l/d+o)*h;if(null===S){var g=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);S=g?parseInt(g[1]):0}return!!S&&S<=87&&2==n&&224e3<=l&&0==s&&(e[t+3]=128|e[t+3]),{sampleRate:d,channelCount:u,frameLength:p,samplesPerFrame:f}}}function O(e,t){return 255===e[t]&&224==(224&e[t+1])&&0!=(6&e[t+1])}function R(e,t){return t+1<e.length&&O(e,t)}function D(e,t){if(t+1<e.length&&O(e,t)){var i=k(e,t),n=4;null!=i&&i.frameLength&&(n=i.frameLength);var r=t+n;return r===e.length||R(e,r)}return!1}var M=function(){function e(e){this.data=void 0,this.bytesAvailable=void 0,this.word=void 0,this.bitsAvailable=void 0,this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}var t=e.prototype;return t.loadWord=function(){var e=this.data,t=this.bytesAvailable,i=e.byteLength-t,n=new Uint8Array(4),r=Math.min(4,t);if(0===r)throw new Error("no bytes available");n.set(e.subarray(i,i+r)),this.word=new DataView(n.buffer).getUint32(0),this.bitsAvailable=8*r,this.bytesAvailable-=r},t.skipBits=function(e){var t;this.bitsAvailable>e||(e-=this.bitsAvailable,e-=(t=e>>3)>>3,this.bytesAvailable-=t,this.loadWord()),this.word<<=e,this.bitsAvailable-=e},t.readBits=function(e){var t=Math.min(this.bitsAvailable,e),i=this.word>>>32-t;return 32<e&&ie.b.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=t,0<this.bitsAvailable?this.word<<=t:0<this.bytesAvailable&&this.loadWord(),0<(t=e-t)&&this.bitsAvailable?i<<t|this.readBits(t):i},t.skipLZ=function(){var e;for(e=0;e<this.bitsAvailable;++e)if(0!=(this.word&2147483648>>>e))return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()},t.skipUEG=function(){this.skipBits(1+this.skipLZ())},t.skipEG=function(){this.skipBits(1+this.skipLZ())},t.readUEG=function(){var e=this.skipLZ();return this.readBits(e+1)-1},t.readEG=function(){var e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)},t.readBoolean=function(){return 1===this.readBits(1)},t.readUByte=function(){return this.readBits(8)},t.readUShort=function(){return this.readBits(16)},t.readUInt=function(){return this.readBits(32)},t.skipScalingList=function(e){for(var t=8,i=8,n=0;n<e;n++)0!==i&&(i=(t+this.readEG()+256)%256),t=0===i?t:i},t.readSPS=function(){var e,t,i,n=0,r=0,a=0,o=0,s=this.readUByte.bind(this),l=this.readBits.bind(this),d=this.readUEG.bind(this),u=this.readBoolean.bind(this),c=this.skipBits.bind(this),h=this.skipEG.bind(this),f=this.skipUEG.bind(this),p=this.skipScalingList.bind(this);s();var g=s();if(l(5),c(3),s(),f(),100===g||110===g||122===g||244===g||44===g||83===g||86===g||118===g||128===g){var m=d();if(3===m&&c(1),f(),f(),c(1),u())for(t=3!==m?8:12,i=0;i<t;i++)u()&&p(i<6?16:64)}f();var v=d();if(0===v)d();else if(1===v)for(c(1),h(),h(),e=d(),i=0;i<e;i++)h();f(),c(1);var y=d(),b=d(),w=l(1);0===w&&c(1),c(1),u()&&(n=d(),r=d(),a=d(),o=d());var E=[1,1];if(u()&&u())switch(s()){case 1:E=[1,1];break;case 2:E=[12,11];break;case 3:E=[10,11];break;case 4:E=[16,11];break;case 5:E=[40,33];break;case 6:E=[24,11];break;case 7:E=[20,11];break;case 8:E=[32,11];break;case 9:E=[80,33];break;case 10:E=[18,11];break;case 11:E=[15,11];break;case 12:E=[64,33];break;case 13:E=[160,99];break;case 14:E=[4,3];break;case 15:E=[3,2];break;case 16:E=[2,1];break;case 255:E=[s()<<8|s(),s()<<8|s()]}return{width:Math.ceil(16*(y+1)-2*n-2*r),height:(2-w)*(b+1)*16-(w?2:4)*(a+o),pixelRatio:E}},t.readSliceType=function(){return this.readUByte(),this.readUEG(),this.readUEG()},e}(),B=function(){function e(e,t,i){this.keyData=void 0,this.decrypter=void 0,this.keyData=i,this.decrypter=new n.a(e,t,{removePKCS7Padding:!1})}var t=e.prototype;return t.decryptBuffer=function(e,t){this.decrypter.decrypt(e,this.keyData.key.buffer,this.keyData.iv.buffer,t)},t.decryptAacSample=function(i,n,r,a){var o=i[n].unit,e=o.subarray(16,o.length-o.length%16),t=e.buffer.slice(e.byteOffset,e.byteOffset+e.length),s=this;this.decryptBuffer(t,function(e){var t=new Uint8Array(e);o.set(t,16),a||s.decryptAacSamples(i,n+1,r)})},t.decryptAacSamples=function(e,t,i){for(;;t++){if(t>=e.length)return void i();if(!(e[t].unit.length<32)){var n=this.decrypter.isSync();if(this.decryptAacSample(e,t,i,n),!n)return}}},t.getAvcEncryptedData=function(e){for(var t=16*Math.floor((e.length-48)/160)+16,i=new Int8Array(t),n=0,r=32;r<=e.length-16;r+=160,n+=16)i.set(e.subarray(r,r+16),n);return i},t.getAvcDecryptedUnit=function(e,t){for(var i=new Uint8Array(t),n=0,r=32;r<=e.length-16;r+=160,n+=16)e.set(i.subarray(n,n+16),r);return e},t.decryptAvcSample=function(t,i,n,r,a,o){var s=G(a.data),e=this.getAvcEncryptedData(s),l=this;this.decryptBuffer(e.buffer,function(e){a.data=l.getAvcDecryptedUnit(s,e),o||l.decryptAvcSamples(t,i,n+1,r)})},t.decryptAvcSamples=function(e,t,i,n){if(e instanceof Uint8Array)throw new Error("Cannot decrypt samples of type Uint8Array");for(;;t++,i=0){if(t>=e.length)return void n();for(var r=e[t].units;!(i>=r.length);i++){var a=r[i];if(!(a.data.length<=48||1!==a.type&&5!==a.type)){var o=this.decrypter.isSync();if(this.decryptAvcSample(e,t,i,n,a,o),!o)return}}}},e}(),F={video:1,audio:2,id3:3,text:4},N=function(){function k(e,t,i){this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.sampleAes=null,this.pmtParsed=!1,this.audioCodec=void 0,this.videoCodec=void 0,this._duration=0,this.aacLastPTS=null,this._initPTS=null,this._initDTS=null,this._pmtId=-1,this._avcTrack=void 0,this._audioTrack=void 0,this._id3Track=void 0,this._txtTrack=void 0,this.aacOverFlow=null,this.avcSample=null,this.remainderData=null,this.observer=e,this.config=t,this.typeSupported=i}k.probe=function(e){var t=k.syncOffset(e);return!(t<0||(t&&ie.b.warn("MPEG2-TS detected but first sync word found @ offset "+t+", junk ahead ?"),0))},k.syncOffset=function(e){for(var t=Math.min(1e3,e.length-564),i=0;i<t;){if(71===e[i]&&71===e[i+188]&&71===e[i+376])return i;i++}return-1},k.createTrack=function(e,t){return{container:"video"===e||"audio"===e?"video/mp2t":void 0,type:e,id:F[e],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0,duration:"audio"===e?t:void 0}};var e=k.prototype;return e.resetInitSegment=function(e,t,i){this.pmtParsed=!1,this._pmtId=-1,this._avcTrack=k.createTrack("video",i),this._audioTrack=k.createTrack("audio",i),this._id3Track=k.createTrack("id3",i),this._txtTrack=k.createTrack("text",i),this._audioTrack.isAAC=!0,this.aacOverFlow=null,this.aacLastPTS=null,this.avcSample=null,this.audioCodec=e,this.videoCodec=t,this._duration=i},e.resetTimeStamp=function(){},e.resetContiguity=function(){var e=this._audioTrack,t=this._avcTrack,i=this._id3Track;e&&(e.pesData=null),t&&(t.pesData=null),i&&(i.pesData=null),this.aacOverFlow=null,this.aacLastPTS=null},e.demux=function(e,t,i,n){var r;void 0===i&&(i=!1),void 0===n&&(n=!1),i||(this.sampleAes=null);var a=this._avcTrack,o=this._audioTrack,s=this._id3Track,l=a.pid,d=a.pesData,u=o.pid,c=s.pid,h=o.pesData,f=s.pesData,p=!1,g=this.pmtParsed,m=this._pmtId,v=e.length;if(this.remainderData&&(v=(e=Object(x.a)(this.remainderData,e)).length,this.remainderData=null),v<188&&!n)return this.remainderData=e,{audioTrack:o,avcTrack:a,id3Track:s,textTrack:this._txtTrack};var y,b,w=Math.max(0,k.syncOffset(e));(v-=(v+w)%188)<e.byteLength&&!n&&(this.remainderData=new Uint8Array(e.buffer,v,e.buffer.byteLength-v));for(var E=w;E<v;E+=188)if(71===e[E]){var S=!!(64&e[E+1]),A=((31&e[E+1])<<8)+e[E+2],T=void 0;if(1<(48&e[E+3])>>4){if((T=E+5+e[E+4])===E+188)continue}else T=E+4;switch(A){case l:S&&(d&&(r=V(d))&&this.parseAVCPES(r,!1),d={data:[],size:0}),d&&(d.data.push(e.subarray(T,E+188)),d.size+=E+188-T);break;case u:S&&(h&&(r=V(h))&&(o.isAAC?this.parseAACPES(r):this.parseMPEGPES(r)),h={data:[],size:0}),h&&(h.data.push(e.subarray(T,E+188)),h.size+=E+188-T);break;case c:S&&(f&&(r=V(f))&&this.parseID3PES(r),f={data:[],size:0}),f&&(f.data.push(e.subarray(T,E+188)),f.size+=E+188-T);break;case 0:S&&(T+=e[T]+1),m=this._pmtId=(31&(y=e)[(b=T)+10])<<8|y[b+11];break;case m:S&&(T+=e[T]+1);var L=U(e,T,!0===this.typeSupported.mpeg||!0===this.typeSupported.mp3,i);0<(l=L.avc)&&(a.pid=l),0<(u=L.audio)&&(o.pid=u,o.isAAC=L.isAAC),0<(c=L.id3)&&(s.pid=c),p&&!g&&(ie.b.log("reparse from beginning"),p=!1,E=w-188),g=this.pmtParsed=!0;break;case 17:case 8191:break;default:p=!0}}else this.observer.emit(ee.a.ERROR,ee.a.ERROR,{type:te.b.MEDIA_ERROR,details:te.a.FRAG_PARSING_ERROR,fatal:!1,reason:"TS packet did not start with 0x47"});a.pesData=d,o.pesData=h,s.pesData=f;var C={audioTrack:o,avcTrack:a,id3Track:s,textTrack:this._txtTrack};return n&&this.extractRemainingSamples(C),C},e.flush=function(){var e,t=this.remainderData;return this.remainderData=null,e=t?this.demux(t,-1,!1,!0):{audioTrack:this._audioTrack,avcTrack:this._avcTrack,textTrack:this._txtTrack,id3Track:this._id3Track},this.extractRemainingSamples(e),this.sampleAes?this.decrypt(e,this.sampleAes):e},e.extractRemainingSamples=function(e){var t,i=e.audioTrack,n=e.avcTrack,r=e.id3Track,a=n.pesData,o=i.pesData,s=r.pesData;a&&(t=V(a))?(this.parseAVCPES(t,!0),n.pesData=null):n.pesData=a,o&&(t=V(o))?(i.isAAC?this.parseAACPES(t):this.parseMPEGPES(t),i.pesData=null):(null!=o&&o.size&&ie.b.log("last AAC PES packet truncated,might overlap between fragments"),i.pesData=o),s&&(t=V(s))?(this.parseID3PES(t),r.pesData=null):r.pesData=s},e.demuxSampleAes=function(e,t,i){var n=this.demux(e,i,!0,!this.config.progressive),r=this.sampleAes=new B(this.observer,this.config,t);return this.decrypt(n,r)},e.decrypt=function(n,r){return new Promise(function(e){var t=n.audioTrack,i=n.avcTrack;t.samples&&t.isAAC?r.decryptAacSamples(t.samples,0,function(){i.samples?r.decryptAvcSamples(i.samples,0,0,function(){e(n)}):e(n)}):i.samples&&r.decryptAvcSamples(i.samples,0,0,function(){e(n)})})},e.destroy=function(){this._initPTS=this._initDTS=null,this._duration=0},e.parseAVCPES=function(A,e){var T,L=this,C=this._avcTrack,t=this.parseAVCNALu(A.data),k=this.avcSample,x=!1;A.data=null,k&&t.length&&!C.audFound&&(j(k,C),k=this.avcSample=_(!1,A.pts,A.dts,"")),t.forEach(function(e){switch(e.type){case 1:T=!0,(k=k||(L.avcSample=_(!0,A.pts,A.dts,""))).frame=!0;var t=e.data;if(x&&4<t.length){var i=new M(t).readSliceType();2!==i&&4!==i&&7!==i&&9!==i||(k.key=!0)}break;case 5:T=!0,(k=k||(L.avcSample=_(!0,A.pts,A.dts,""))).key=!0,k.frame=!0;break;case 6:T=!0;var n=new M(G(e.data));n.readUByte();for(var r=0,a=0,o=!1,s=0;!o&&1<n.bytesAvailable;){for(r=0;r+=s=n.readUByte(),255===s;);for(a=0;a+=s=n.readUByte(),255===s;);if(4===r&&0!==n.bytesAvailable){if(o=!0,181===n.readUByte()&&49===n.readUShort()&&1195456820===n.readUInt()&&3===n.readUByte()){for(var l=n.readUByte(),d=31&l,u=[l,n.readUByte()],c=0;c<d;c++)u.push(n.readUByte()),u.push(n.readUByte()),u.push(n.readUByte());H(L._txtTrack.samples,{type:3,pts:A.pts,bytes:u})}}else if(5===r&&0!==n.bytesAvailable){if(o=!0,16<a){for(var h=[],f=0;f<16;f++)h.push(n.readUByte().toString(16)),3!==f&&5!==f&&7!==f&&9!==f||h.push("-");for(var p=a-16,g=new Uint8Array(p),m=0;m<p;m++)g[m]=n.readUByte();H(L._txtTrack.samples,{pts:A.pts,payloadType:r,uuid:h.join(""),userData:Object(P.f)(g),userDataBytes:g})}}else if(a<n.bytesAvailable)for(var v=0;v<a;v++)n.readUByte()}break;case 7:if(x=T=!0,!C.sps){var y=new M(e.data).readSPS();C.width=y.width,C.height=y.height,C.pixelRatio=y.pixelRatio,C.sps=[e.data],C.duration=L._duration;for(var b=e.data.subarray(1,4),w="avc1.",E=0;E<3;E++){var S=b[E].toString(16);S.length<2&&(S="0"+S),w+=S}C.codec=w}break;case 8:T=!0,C.pps||(C.pps=[e.data]);break;case 9:T=!1,C.audFound=!0,k&&j(k,C),k=L.avcSample=_(!1,A.pts,A.dts,"");break;case 12:T=!1;break;default:T=!1,k&&(k.debug+="unknown NAL "+e.type+" ")}k&&T&&k.units.push(e)}),e&&k&&(j(k,C),this.avcSample=null)},e.getLastNalUnit=function(){var e,t,i=this.avcSample;if(!i||0===i.units.length){var n=this._avcTrack.samples;i=n[n.length-1]}if(null!==(e=i)&&void 0!==e&&e.units){var r=i.units;t=r[r.length-1]}return t},e.parseAVCNALu=function(e){var t,i,n=e.byteLength,r=this._avcTrack,a=r.naluState||0,o=a,s=[],l=0,d=-1,u=0;for(-1===a&&(u=31&e[d=0],a=0,l=1);l<n;)if(t=e[l++],a)if(1!==a)if(t)if(1===t){if(0<=d){var c={data:e.subarray(d,l-a-1),type:u};s.push(c)}else{var h=this.getLastNalUnit();if(h&&(o&&l<=4-o&&h.state&&(h.data=h.data.subarray(0,h.data.byteLength-o)),0<(i=l-a-1))){var f=new Uint8Array(h.data.byteLength+i);f.set(h.data,0),f.set(e.subarray(0,i),h.data.byteLength),h.data=f}}a=l<n?(u=31&e[d=l],0):-1}else a=0;else a=3;else a=t?0:2;else a=t?0:1;if(0<=d&&0<=a){var p={data:e.subarray(d,n),type:u,state:a};s.push(p)}if(0===s.length){var g=this.getLastNalUnit();if(g){var m=new Uint8Array(g.data.byteLength+e.byteLength);m.set(g.data,0),m.set(e,g.data.byteLength),g.data=m}}return r.naluState=a,s},e.parseAACPES=function(e){var t,i,n,r,a=this._audioTrack,o=this.aacLastPTS,s=this.aacOverFlow,l=e.data;if(s){var d=new Uint8Array(s.byteLength+l.byteLength);d.set(s,0),d.set(l,s.byteLength),l=d}for(t=0,i=l.length;t<i-1&&!m(l,t);t++);if(!t||(r=t<i-1?(n="AAC PES did not start with ADTS header,offset:"+t,!1):(n="no ADTS header found in AAC PES",!0),ie.b.warn("parsing error:"+n),this.observer.emit(ee.a.ERROR,ee.a.ERROR,{type:te.b.MEDIA_ERROR,details:te.a.FRAG_PARSING_ERROR,fatal:r,reason:n}),!r)){v(a,this.observer,l,t,this.audioCodec);var u,c=0,h=b(a.samplerate);if(void 0!==e.pts)u=e.pts;else{if(null===o)return void ie.b.warn("[tsdemuxer]: AAC PES unknown PTS");u=o}if(s&&null!==o){var f=o+h;1<Math.abs(f-u)&&(ie.b.log("[tsdemuxer]: AAC: align PTS for overlapping frames by "+Math.round((f-u)/90)),u=f)}for(var p=null;t<i;){if(m(l,t)){if(t+5<i){var g=w(a,l,t,u,c);if(g){t+=g.length,p=g.sample.pts,c++;continue}}break}t++}this.aacOverFlow=t<i?l.subarray(t,i):null,this.aacLastPTS=p}},e.parseMPEGPES=function(e){var t=e.data,i=t.length,n=0,r=0,a=e.pts;if(void 0!==a)for(;r<i;)if(R(t,r)){var o=I(this._audioTrack,t,r,a,n);if(!o)break;r+=o.length,n++}else r++;else ie.b.warn("[tsdemuxer]: MPEG PES unknown PTS")},e.parseID3PES=function(e){void 0!==e.pts?this._id3Track.samples.push(e):ie.b.warn("[tsdemuxer]: ID3 PES unknown PTS")},k}();function _(e,t,i,n){return{key:e,frame:!1,pts:t,dts:i,units:[],debug:n,length:0}}function U(e,t,i,n){var r={audio:-1,avc:-1,id3:-1,isAAC:!0},a=t+3+((15&e[t+1])<<8|e[t+2])-4;for(t+=12+((15&e[t+10])<<8|e[t+11]);t<a;){var o=(31&e[t+1])<<8|e[t+2];switch(e[t]){case 207:if(!n){ie.b.log("ADTS AAC with AES-128-CBC frame encryption found in unencrypted stream");break}case 15:-1===r.audio&&(r.audio=o);break;case 21:-1===r.id3&&(r.id3=o);break;case 219:if(!n){ie.b.log("H.264 with AES-128-CBC slice encryption found in unencrypted stream");break}case 27:-1===r.avc&&(r.avc=o);break;case 3:case 4:i?-1===r.audio&&(r.audio=o,r.isAAC=!1):ie.b.log("MPEG audio found, not supported in this browser");break;case 36:ie.b.warn("Unsupported HEVC stream type found")}t+=5+((15&e[t+3])<<8|e[t+4])}return r}function V(e){var t,i,n,r,a,o=0,s=e.data;if(!e||0===e.size)return null;for(;s[0].length<19&&1<s.length;){var l=new Uint8Array(s[0].length+s[1].length);l.set(s[0]),l.set(s[1],s[0].length),s[0]=l,s.splice(1,1)}if(1!==((t=s[0])[0]<<16)+(t[1]<<8)+t[2])return null;if((i=(t[4]<<8)+t[5])&&i>e.size-6)return null;var d=t[7];192&d&&(r=536870912*(14&t[9])+4194304*(255&t[10])+16384*(254&t[11])+128*(255&t[12])+(254&t[13])/2,64&d?54e5<r-(a=536870912*(14&t[14])+4194304*(255&t[15])+16384*(254&t[16])+128*(255&t[17])+(254&t[18])/2)&&(ie.b.warn(Math.round((r-a)/9e4)+"s delta between PTS and DTS, align them"),r=a):a=r);var u=(n=t[8])+9;if(e.size<=u)return null;e.size-=u;for(var c=new Uint8Array(e.size),h=0,f=s.length;h<f;h++){var p=(t=s[h]).byteLength;if(u){if(p<u){u-=p;continue}t=t.subarray(u),p-=u,u=0}c.set(t,o),o+=p}return i&&(i-=n+3),{data:c,pts:r,dts:a,len:i}}function j(e,t){if(e.units.length&&e.frame){if(void 0===e.pts){var i=t.samples,n=i.length;if(!n)return void t.dropped++;var r=i[n-1];e.pts=r.pts,e.dts=r.dts}t.samples.push(e)}e.debug.length&&ie.b.log(e.pts+"/"+e.dts+":"+e.debug)}function H(e,t){var i=e.length;if(0<i){if(t.pts>=e[i-1].pts)e.push(t);else for(var n=i-1;0<=n;n--)if(t.pts<e[n].pts){e.splice(n,0,t);break}}else e.push(t)}function G(e){for(var t=e.byteLength,i=[],n=1;n<t-2;)0===e[n]&&0===e[n+1]&&3===e[n+2]?(i.push(n+2),n+=2):n++;if(0===i.length)return e;var r=t-i.length,a=new Uint8Array(r),o=0;for(n=0;n<r;o++,n++)o===i[0]&&(o++,i.shift()),a[n]=e[o];return a}N.minProbeByteLength=188;var z=N;function W(e,t){return(W=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Q=function(n){var e,t;function i(){return n.apply(this,arguments)||this}t=n,(e=i).prototype=Object.create(t.prototype),W(e.prototype.constructor=e,t);var r=i.prototype;return r.resetInitSegment=function(e,t,i){n.prototype.resetInitSegment.call(this,e,t,i),this._audioTrack={container:"audio/mpeg",type:"audio",id:0,pid:-1,sequenceNumber:0,isAAC:!1,samples:[],manifestCodec:e,duration:i,inputTimeScale:9e4,dropped:0}},i.probe=function(e){if(!e)return!1;for(var t=(P.b(e,0)||[]).length,i=e.length;t<i;t++)if(D(e,t))return ie.b.log("MPEG Audio sync word found !"),!0;return!1},r.canParse=function(e,t){return function(e,t){return O(e,t)&&4<=e.length-t}(e,t)},r.appendFrame=function(e,t,i){if(null!==this.initPTS)return I(e,t,i,this.initPTS,this.frameIndex)},i}(a);Q.minProbeByteLength=4;var q=Q,Y=function(){function e(){}return e.getSilentFrame=function(e,t){switch(e){case"mp4a.40.2":if(1===t)return new Uint8Array([0,200,0,128,35,128]);if(2===t)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(1===t)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}},e}(),K=Math.pow(2,32)-1,X=function(){function h(){}return h.init=function(){var e;for(e in h.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]})h.types.hasOwnProperty(e)&&(h.types[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);var t=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),i=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);h.HDLR_TYPES={video:t,audio:i};var n=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),r=new Uint8Array([0,0,0,0,0,0,0,0]);h.STTS=h.STSC=h.STCO=r,h.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),h.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),h.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),h.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var a=new Uint8Array([105,115,111,109]),o=new Uint8Array([97,118,99,49]),s=new Uint8Array([0,0,0,1]);h.FTYP=h.box(h.types.ftyp,a,s,a,o),h.DINF=h.box(h.types.dinf,h.box(h.types.dref,n))},h.box=function(e){for(var t=8,i=arguments.length,n=new Array(1<i?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];for(var a=n.length,o=a;a--;)t+=n[a].byteLength;var s=new Uint8Array(t);for(s[0]=t>>24&255,s[1]=t>>16&255,s[2]=t>>8&255,s[3]=255&t,s.set(e,4),a=0,t=8;a<o;a++)s.set(n[a],t),t+=n[a].byteLength;return s},h.hdlr=function(e){return h.box(h.types.hdlr,h.HDLR_TYPES[e])},h.mdat=function(e){return h.box(h.types.mdat,e)},h.mdhd=function(e,t){t*=e;var i=Math.floor(t/(1+K)),n=Math.floor(t%(1+K));return h.box(h.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,i>>24,i>>16&255,i>>8&255,255&i,n>>24,n>>16&255,n>>8&255,255&n,85,196,0,0]))},h.mdia=function(e){return h.box(h.types.mdia,h.mdhd(e.timescale,e.duration),h.hdlr(e.type),h.minf(e))},h.mfhd=function(e){return h.box(h.types.mfhd,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,255&e]))},h.minf=function(e){return"audio"===e.type?h.box(h.types.minf,h.box(h.types.smhd,h.SMHD),h.DINF,h.stbl(e)):h.box(h.types.minf,h.box(h.types.vmhd,h.VMHD),h.DINF,h.stbl(e))},h.moof=function(e,t,i){return h.box(h.types.moof,h.mfhd(e),h.traf(i,t))},h.moov=function(e){for(var t=e.length,i=[];t--;)i[t]=h.trak(e[t]);return h.box.apply(null,[h.types.moov,h.mvhd(e[0].timescale,e[0].duration)].concat(i).concat(h.mvex(e)))},h.mvex=function(e){for(var t=e.length,i=[];t--;)i[t]=h.trex(e[t]);return h.box.apply(null,[h.types.mvex].concat(i))},h.mvhd=function(e,t){t*=e;var i=Math.floor(t/(1+K)),n=Math.floor(t%(1+K)),r=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,i>>24,i>>16&255,i>>8&255,255&i,n>>24,n>>16&255,n>>8&255,255&n,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return h.box(h.types.mvhd,r)},h.sdtp=function(e){var t,i,n=e.samples||[],r=new Uint8Array(4+n.length);for(t=0;t<n.length;t++)i=n[t].flags,r[t+4]=i.dependsOn<<4|i.isDependedOn<<2|i.hasRedundancy;return h.box(h.types.sdtp,r)},h.stbl=function(e){return h.box(h.types.stbl,h.stsd(e),h.box(h.types.stts,h.STTS),h.box(h.types.stsc,h.STSC),h.box(h.types.stsz,h.STSZ),h.box(h.types.stco,h.STCO))},h.avc1=function(e){var t,i,n,r=[],a=[];for(t=0;t<e.sps.length;t++)n=(i=e.sps[t]).byteLength,r.push(n>>>8&255),r.push(255&n),r=r.concat(Array.prototype.slice.call(i));for(t=0;t<e.pps.length;t++)n=(i=e.pps[t]).byteLength,a.push(n>>>8&255),a.push(255&n),a=a.concat(Array.prototype.slice.call(i));var o=h.box(h.types.avcC,new Uint8Array([1,r[3],r[4],r[5],255,224|e.sps.length].concat(r).concat([e.pps.length]).concat(a))),s=e.width,l=e.height,d=e.pixelRatio[0],u=e.pixelRatio[1];return h.box(h.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,s>>8&255,255&s,l>>8&255,255&l,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),o,h.box(h.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),h.box(h.types.pasp,new Uint8Array([d>>24,d>>16&255,d>>8&255,255&d,u>>24,u>>16&255,u>>8&255,255&u])))},h.esds=function(e){var t=e.config.length;return new Uint8Array([0,0,0,0,3,23+t,0,1,0,4,15+t,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([t]).concat(e.config).concat([6,1,2]))},h.mp4a=function(e){var t=e.samplerate;return h.box(h.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,t>>8&255,255&t,0,0]),h.box(h.types.esds,h.esds(e)))},h.mp3=function(e){var t=e.samplerate;return h.box(h.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,t>>8&255,255&t,0,0]))},h.stsd=function(e){return"audio"===e.type?e.isAAC||"mp3"!==e.codec?h.box(h.types.stsd,h.STSD,h.mp4a(e)):h.box(h.types.stsd,h.STSD,h.mp3(e)):h.box(h.types.stsd,h.STSD,h.avc1(e))},h.tkhd=function(e){var t=e.id,i=e.duration*e.timescale,n=e.width,r=e.height,a=Math.floor(i/(1+K)),o=Math.floor(i%(1+K));return h.box(h.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,0,0,0,0,a>>24,a>>16&255,a>>8&255,255&a,o>>24,o>>16&255,o>>8&255,255&o,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,n>>8&255,255&n,0,0,r>>8&255,255&r,0,0]))},h.traf=function(e,t){var i=h.sdtp(e),n=e.id,r=Math.floor(t/(1+K)),a=Math.floor(t%(1+K));return h.box(h.types.traf,h.box(h.types.tfhd,new Uint8Array([0,0,0,0,n>>24,n>>16&255,n>>8&255,255&n])),h.box(h.types.tfdt,new Uint8Array([1,0,0,0,r>>24,r>>16&255,r>>8&255,255&r,a>>24,a>>16&255,a>>8&255,255&a])),h.trun(e,i.length+16+20+8+16+8+8),i)},h.trak=function(e){return e.duration=e.duration||4294967295,h.box(h.types.trak,h.tkhd(e),h.mdia(e))},h.trex=function(e){var t=e.id;return h.box(h.types.trex,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))},h.trun=function(e,t){var i,n,r,a,o,s,l=e.samples||[],d=l.length,u=12+16*d,c=new Uint8Array(u);for(t+=8+u,c.set([0,0,15,1,d>>>24&255,d>>>16&255,d>>>8&255,255&d,t>>>24&255,t>>>16&255,t>>>8&255,255&t],0),i=0;i<d;i++)r=(n=l[i]).duration,a=n.size,o=n.flags,s=n.cts,c.set([r>>>24&255,r>>>16&255,r>>>8&255,255&r,a>>>24&255,a>>>16&255,a>>>8&255,255&a,o.isLeading<<2|o.dependsOn,o.isDependedOn<<6|o.hasRedundancy<<4|o.paddingValue<<1|o.isNonSync,61440&o.degradPrio,15&o.degradPrio,s>>>24&255,s>>>16&255,s>>>8&255,255&s],12+16*i);return h.box(h.types.trun,c)},h.initSegment=function(e){h.types||h.init();var t=h.moov(e),i=new Uint8Array(h.FTYP.byteLength+t.byteLength);return i.set(h.FTYP),i.set(t,h.FTYP.byteLength),i},h}();X.types=void 0,X.HDLR_TYPES=void 0,X.STTS=void 0,X.STSC=void 0,X.STCO=void 0,X.STSZ=void 0,X.VMHD=void 0,X.SMHD=void 0,X.STSD=void 0,X.FTYP=void 0,X.DINF=void 0;var ne=X;function re(e,t){return void 0===t&&(t=!1),function(e,t,i,n){void 0===i&&(i=1),void 0===n&&(n=!1);var r=e*t*i;return n?Math.round(r):r}(e,1e3,1/9e4,t)}function ae(){return(ae=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}var oe=null,J=null,se=!1,Z=function(){function e(e,t,i,n){if(void 0===n&&(n=""),this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.ISGenerated=!1,this._initPTS=void 0,this._initDTS=void 0,this.nextAvcDts=null,this.nextAudioPts=null,this.isAudioContiguous=!1,this.isVideoContiguous=!1,this.observer=e,this.config=t,this.typeSupported=i,this.ISGenerated=!1,null===oe){var r=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);oe=r?parseInt(r[1]):0}if(null===J){var a=navigator.userAgent.match(/Safari\/(\d+)/i);J=a?parseInt(a[1]):0}se=!!oe&&oe<75||!!J&&J<600}var t=e.prototype;return t.destroy=function(){},t.resetTimeStamp=function(e){ie.b.log("[mp4-remuxer]: initPTS & initDTS reset"),this._initPTS=this._initDTS=e},t.resetNextTimestamp=function(){ie.b.log("[mp4-remuxer]: reset next timestamp"),this.isVideoContiguous=!1,this.isAudioContiguous=!1},t.resetInitSegment=function(){ie.b.log("[mp4-remuxer]: ISGenerated flag reset"),this.ISGenerated=!1},t.getVideoStartPts=function(e){var n=!1,t=e.reduce(function(e,t){var i=t.pts-e;return i<-4294967296?(n=!0,le(e,t.pts)):0<i?e:t.pts},e[0].pts);return n&&ie.b.debug("PTS rollover detected"),t},t.remux=function(e,t,i,n,r,a,o){var s,l,d,u,c,h,f=r,p=r,g=-1<e.pid,m=-1<t.pid,v=t.samples.length,y=0<e.samples.length,b=1<v;if((!g||y)&&(!m||b)||this.ISGenerated||o){this.ISGenerated||(d=this.generateIS(e,t,r));var w=this.isVideoContiguous,E=-1;if(b&&(E=function(e){for(var t=0;t<e.length;t++)if(e[t].key)return t;return-1}(t.samples),!w&&this.config.forceKeyFrameOnDiscontinuity))if(h=!0,0<E){ie.b.warn("[mp4-remuxer]: Dropped "+E+" out of "+v+" video samples due to a missing keyframe");var S=this.getVideoStartPts(t.samples);t.samples=t.samples.slice(E),t.dropped+=E,p+=(t.samples[0].pts-S)/(t.timescale||9e4)}else-1===E&&(ie.b.warn("[mp4-remuxer]: No keyframe found out of "+v+" video samples"),h=!1);if(this.ISGenerated){if(y&&b){var A=this.getVideoStartPts(t.samples),T=(le(e.samples[0].pts,A)-A)/t.inputTimeScale;f+=Math.max(0,T),p+=Math.max(0,-T)}if(y){if(e.samplerate||(ie.b.warn("[mp4-remuxer]: regenerate InitSegment as audio detected"),d=this.generateIS(e,t,r)),l=this.remuxAudio(e,f,this.isAudioContiguous,a,b?p:void 0),b){var L=l?l.endPTS-l.startPTS:0;t.inputTimeScale||(ie.b.warn("[mp4-remuxer]: regenerate InitSegment as video detected"),d=this.generateIS(e,t,r)),s=this.remuxVideo(t,p,w,L)}}else b&&(s=this.remuxVideo(t,p,w,0));s&&(s.firstKeyFrame=E,s.independent=-1!==E)}}return this.ISGenerated&&(i.samples.length&&(c=this.remuxID3(i,r)),n.samples.length&&(u=this.remuxText(n,r))),{audio:l,video:s,initSegment:d,independent:h,text:u,id3:c}},t.generateIS=function(e,t,i){var n,r,a,o=e.samples,s=t.samples,l=this.typeSupported,d={},u=!Object(y.a)(this._initPTS),c="audio/mp4";if(u&&(n=r=1/0),e.config&&o.length&&(e.timescale=e.samplerate,e.isAAC||(l.mpeg?(c="audio/mpeg",e.codec=""):l.mp3&&(e.codec="mp3")),d.audio={id:"audio",container:c,codec:e.codec,initSegment:!e.isAAC&&l.mpeg?new Uint8Array(0):ne.initSegment([e]),metadata:{channelCount:e.channelCount}},u&&(a=e.inputTimeScale,n=r=o[0].pts-Math.round(a*i))),t.sps&&t.pps&&s.length&&(t.timescale=t.inputTimeScale,d.video={id:"main",container:"video/mp4",codec:t.codec,initSegment:ne.initSegment([t]),metadata:{width:t.width,height:t.height}},u)){a=t.inputTimeScale;var h=this.getVideoStartPts(s),f=Math.round(a*i);r=Math.min(r,le(s[0].dts,h)-f),n=Math.min(n,h-f)}if(Object.keys(d).length)return this.ISGenerated=!0,u&&(this._initPTS=n,this._initDTS=r),{tracks:d,initPTS:n,timescale:a}},t.remuxVideo=function(e,t,i,n){var r,a,o,s=e.inputTimeScale,l=e.samples,d=[],u=l.length,c=this._initPTS,h=this.nextAvcDts,f=8,p=Number.POSITIVE_INFINITY,g=Number.NEGATIVE_INFINITY,m=0,v=!1;i&&null!==h||(h=t*s-(l[0].pts-le(l[0].dts,l[0].pts)));for(var y=0;y<u;y++){var b=l[y];b.pts=le(b.pts-c,h),b.dts=le(b.dts-c,h),b.dts>b.pts&&(m=Math.max(Math.min(m,b.pts-b.dts),-18e3)),b.dts<l[0<y?y-1:y].dts&&(v=!0)}v&&l.sort(function(e,t){var i=e.dts-t.dts,n=e.pts-t.pts;return i||n}),a=l[0].dts,o=l[l.length-1].dts;var w=Math.round((o-a)/(u-1));if(m<0){if(m<-2*w){ie.b.warn("PTS < DTS detected in video samples, offsetting DTS from PTS by "+re(-w,!0)+" ms");for(var E=m,S=0;S<u;S++)l[S].dts=E=Math.max(E,l[S].pts-w),l[S].pts=Math.max(E,l[S].pts)}else{ie.b.warn("PTS < DTS detected in video samples, shifting DTS by "+re(m,!0)+" ms to overcome this issue");for(var A=0;A<u;A++)l[A].dts=l[A].dts+m}a=l[0].dts}if(i){var T=a-h,L=w<T;if(L||T<-1){L?ie.b.warn("AVC: "+re(T,!0)+" ms ("+T+"dts) hole between fragments detected, filling it"):ie.b.warn("AVC: "+re(-T,!0)+" ms ("+T+"dts) overlapping between fragments detected"),a=h;var C=l[0].pts-T;l[0].dts=a,l[0].pts=C,ie.b.log("Video: First PTS/DTS adjusted: "+re(C,!0)+"/"+re(a,!0)+", delta: "+re(T,!0)+" ms")}}se&&(a=Math.max(0,a));for(var k=0,x=0,P=0;P<u;P++){for(var I=l[P],O=I.units,R=O.length,D=0,M=0;M<R;M++)D+=O[M].data.length;x+=D,k+=R,I.length=D,I.dts=Math.max(I.dts,a),I.pts=Math.max(I.pts,I.dts,0),p=Math.min(I.pts,p),g=Math.max(I.pts,g)}o=l[u-1].dts;var B,F=x+4*k+8;try{B=new Uint8Array(F)}catch(e){return void this.observer.emit(ee.a.ERROR,ee.a.ERROR,{type:te.b.MUX_ERROR,details:te.a.REMUX_ALLOC_ERROR,fatal:!1,bytes:F,reason:"fail allocating video mdat "+F})}var N=new DataView(B.buffer);N.setUint32(0,F),B.set(ne.types.mdat,4);for(var _=0;_<u;_++){for(var U=l[_],V=U.units,j=0,H=0,G=V.length;H<G;H++){var z=V[H],W=z.data,Q=z.data.byteLength;N.setUint32(f,Q),f+=4,B.set(W,f),f+=Q,j+=4+Q}if(_<u-1)r=l[_+1].dts-U.dts;else{var q=this.config,Y=U.dts-l[0<_?_-1:_].dts;if(q.stretchShortVideoTrack&&null!==this.nextAudioPts){var K=Math.floor(q.maxBufferHole*s),X=(n?p+n*s:this.nextAudioPts)-U.pts;K<X?((r=X-Y)<0&&(r=Y),ie.b.log("[mp4-remuxer]: It is approximately "+X/90+" ms to the next segment; using duration "+r/90+" ms for the last video frame.")):r=Y}else r=Y}var J=Math.round(U.pts-U.dts);d.push(new de(U.key,r,j,J))}if(d.length&&oe&&oe<70){var Z=d[0].flags;Z.dependsOn=2,Z.isNonSync=0}this.nextAvcDts=h=o+r,this.isVideoContiguous=!0;var $={data1:ne.moof(e.sequenceNumber++,a,ae({},e,{samples:d})),data2:B,startPTS:p/s,endPTS:(g+r)/s,startDTS:a/s,endDTS:h/s,type:"video",hasAudio:!1,hasVideo:!0,nb:d.length,dropped:e.dropped};return e.samples=[],e.dropped=0,$},t.remuxAudio=function(e,t,i,n,r){var a,o=e.inputTimeScale,s=o/(e.samplerate?e.samplerate:o),l=e.isAAC?1024:1152,d=l*s,u=this._initPTS,c=!e.isAAC&&this.typeSupported.mpeg,h=[],f=e.samples,p=c?0:8,g=this.nextAudioPts||-1,m=t*o;if(this.isAudioContiguous=i=i||f.length&&0<g&&(n&&Math.abs(m-g)<9e3||Math.abs(le(f[0].pts-u,m)-g)<20*d),f.forEach(function(e){e.pts=e.dts=le(e.pts-u,m)}),!i||g<0){if(!(f=f.filter(function(e){return 0<=e.pts})).length)return;g=0===r?0:n?Math.max(0,m):f[0].pts}if(e.isAAC)for(var v=this.config.maxAudioFramesDrift,y=0,b=g;y<f.length;){var w=f[y],E=w.pts,S=E-b,A=Math.abs(1e3*S/o);if(S<=-v*d&&void 0!==r)i||0<y?(ie.b.warn("[mp4-remuxer]: Dropping 1 audio frame @ "+(b/o).toFixed(3)+"s due to "+Math.round(A)+" ms overlap."),f.splice(y,1)):(ie.b.warn("Audio frame @ "+(E/o).toFixed(3)+"s overlaps nextAudioPts by "+Math.round(1e3*S/o)+" ms."),b=E+d,y++);else if(v*d<=S&&A<1e4&&void 0!==r){var T=Math.floor(S/d);b=E-T*d,ie.b.warn("[mp4-remuxer]: Injecting "+T+" audio frame @ "+(b/o).toFixed(3)+"s due to "+Math.round(1e3*S/o)+" ms gap.");for(var L=0;L<T;L++){var C=Math.max(b,0);(a=Y.getSilentFrame(e.manifestCodec||e.codec,e.channelCount))||(ie.b.log("[mp4-remuxer]: Unable to get silent frame for given audio codec; duplicating last frame instead."),a=w.unit.subarray()),f.splice(y,0,{unit:a,pts:C,dts:C}),b+=d,y++}w.pts=w.dts=b,b+=d,y++}else w.pts=w.dts=b,b+=d,y++}for(var k,x=null,P=null,I=0,O=f.length;O--;)I+=f[O].unit.byteLength;for(var R=0,D=f.length;R<D;R++){var M=f[R],B=M.unit,F=M.pts;if(null!==P)h[R-1].duration=Math.round((F-P)/s);else{var N=Math.round(1e3*(F-g)/o),_=0;if(i&&e.isAAC){if(0<N&&N<1e4)_=Math.round((F-g)/d),ie.b.log("[mp4-remuxer]: "+N+" ms hole between AAC samples detected,filling it"),0<_&&((a=Y.getSilentFrame(e.manifestCodec||e.codec,e.channelCount))||(a=B.subarray()),I+=_*a.length);else if(N<-12){ie.b.log("[mp4-remuxer]: drop overlapping AAC sample, expected/parsed/delta:"+(g/o).toFixed(3)+"s/"+(F/o).toFixed(3)+"s/"+-N+"ms"),I-=B.byteLength;continue}F=g}if(x=F,!(0<I))return;I+=p;try{k=new Uint8Array(I)}catch(e){return void this.observer.emit(ee.a.ERROR,ee.a.ERROR,{type:te.b.MUX_ERROR,details:te.a.REMUX_ALLOC_ERROR,fatal:!1,bytes:I,reason:"fail allocating audio mdat "+I})}c||(new DataView(k.buffer).setUint32(0,I),k.set(ne.types.mdat,4));for(var U=0;U<_;U++)(a=Y.getSilentFrame(e.manifestCodec||e.codec,e.channelCount))||(ie.b.log("[mp4-remuxer]: Unable to get silent frame for given audio codec; duplicating the current frame instead"),a=B.subarray()),k.set(a,p),p+=a.byteLength,h.push(new de(!0,1024,a.byteLength,0))}k.set(B,p);var V=B.byteLength;p+=V,h.push(new de(!0,l,V,0)),P=F}var j=h.length;if(j){var H=h[h.length-1];this.nextAudioPts=g=P+s*H.duration;var G=c?new Uint8Array(0):ne.moof(e.sequenceNumber++,x/s,ae({},e,{samples:h}));e.samples=[];var z=x/o,W=g/o,Q={data1:G,data2:k,startPTS:z,endPTS:W,startDTS:z,endDTS:W,type:"audio",hasAudio:!0,hasVideo:!1,nb:j};return this.isAudioContiguous=!0,Q}},t.remuxEmptyAudio=function(e,t,i,n){var r=e.inputTimeScale,a=r/(e.samplerate?e.samplerate:r),o=this.nextAudioPts,s=(null!==o?o:n.startDTS*r)+this._initDTS,l=n.endDTS*r+this._initDTS,d=1024*a,u=Math.ceil((l-s)/d),c=Y.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);if(ie.b.warn("[mp4-remuxer]: remux empty Audio"),c){for(var h=[],f=0;f<u;f++){var p=s+f*d;h.push({unit:c,pts:p,dts:p})}return e.samples=h,this.remuxAudio(e,t,i,!1)}ie.b.trace("[mp4-remuxer]: Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec")},t.remuxID3=function(e,t){var i=e.samples.length;if(i){for(var n=e.inputTimeScale,r=this._initPTS,a=this._initDTS,o=0;o<i;o++){var s=e.samples[o];s.pts=le(s.pts-r,t*n)/n,s.dts=le(s.dts-a,t*n)/n}var l=e.samples;return e.samples=[],{samples:l}}},t.remuxText=function(e,t){var i=e.samples.length;if(i){for(var n=e.inputTimeScale,r=this._initPTS,a=0;a<i;a++){var o=e.samples[a];o.pts=le(o.pts-r,t*n)/n}e.samples.sort(function(e,t){return e.pts-t.pts});var s=e.samples;return e.samples=[],{samples:s}}},e}();function le(e,t){var i;if(null===t)return e;for(i=t<e?-8589934592:8589934592;4294967296<Math.abs(e-t);)e+=i;return e}var de=function(e,t,i,n){this.size=void 0,this.duration=void 0,this.cts=void 0,this.flags=void 0,this.duration=t,this.size=i,this.cts=n,this.flags=new $(e)},$=function(e){this.isLeading=0,this.isDependedOn=0,this.hasRedundancy=0,this.degradPrio=0,this.dependsOn=1,this.isNonSync=1,this.dependsOn=e?2:1,this.isNonSync=e?0:1},ue=i(4),ce=function(){function e(){this.emitInitSegment=!1,this.audioCodec=void 0,this.videoCodec=void 0,this.initData=void 0,this.initPTS=void 0,this.initTracks=void 0,this.lastEndDTS=null}var t=e.prototype;return t.destroy=function(){},t.resetTimeStamp=function(e){this.initPTS=e,this.lastEndDTS=null},t.resetNextTimestamp=function(){this.lastEndDTS=null},t.resetInitSegment=function(e,t,i){this.audioCodec=t,this.videoCodec=i,this.generateInitSegment(e),this.emitInitSegment=!0},t.generateInitSegment=function(e){var t=this.audioCodec,i=this.videoCodec;if(!e||!e.byteLength)return this.initTracks=void 0,void(this.initData=void 0);var n=this.initData=Object(x.f)(e);t=t||fe(n.audio,ue.a.AUDIO),i=i||fe(n.video,ue.a.VIDEO);var r={};n.audio&&n.video?r.audiovideo={container:"video/mp4",codec:t+","+i,initSegment:e,id:"main"}:n.audio?r.audio={container:"audio/mp4",codec:t,initSegment:e,id:"audio"}:n.video?r.video={container:"video/mp4",codec:i,initSegment:e,id:"main"}:ie.b.warn("[passthrough-remuxer.ts]: initSegment does not contain moov or trak boxes."),this.initTracks=r},t.remux=function(e,t,i,n,r){var a=this.initPTS,o=this.lastEndDTS,s={audio:void 0,video:void 0,text:n,id3:i,initSegment:void 0};Object(y.a)(o)||(o=this.lastEndDTS=r||0);var l=t.samples;if(!l||!l.length)return s;var d={initPTS:void 0,timescale:1},u=this.initData;if(u&&u.length||(this.generateInitSegment(l),u=this.initData),!u||!u.length)return ie.b.warn("[passthrough-remuxer.ts]: Failed to generate initSegment."),s;this.emitInitSegment&&(d.tracks=this.initTracks,this.emitInitSegment=!1),Object(y.a)(a)||(this.initPTS=d.initPTS=a=he(u,l,o));var c=Object(x.c)(l,u),h=o,f=c+h;Object(x.e)(u,l,a),0<c?this.lastEndDTS=f:(ie.b.warn("Duration parsed from mp4 should be greater than zero"),this.resetNextTimestamp());var p=!!u.audio,g=!!u.video,m="";p&&(m+="audio"),g&&(m+="video");var v={data1:l,startPTS:h,startDTS:h,endPTS:f,endDTS:f,type:m,hasAudio:p,hasVideo:g,nb:1,dropped:0};return s.audio="audio"===v.type?v:void 0,s.video="audio"!==v.type?v:void 0,s.text=n,s.id3=i,s.initSegment=d,s},e}(),he=function(e,t,i){return Object(x.d)(e,t)-i};function fe(e,t){var i=null==e?void 0:e.codec;return i&&4<i.length?i:"hvc1"===i?"hvc1.1.c.L120.90":"av01"===i?"av01.0.04M.08":"avc1"===i||t===ue.a.VIDEO?"avc1.42e01e":"mp4a.40.5"}var pe,ge=ce,me=i(15);try{pe=self.performance.now.bind(self.performance)}catch(e){ie.b.debug("Unable to use Performance API on this environment"),pe=self.Date.now}var ve=[{demux:z,remux:Z},{demux:E,remux:ge},{demux:p,remux:Z},{demux:q,remux:Z}],ye=1024;ve.forEach(function(e){var t=e.demux;ye=Math.max(ye,t.minProbeByteLength)});var be=function(){function e(e,t,i,n){this.observer=void 0,this.typeSupported=void 0,this.config=void 0,this.vendor=void 0,this.demuxer=void 0,this.remuxer=void 0,this.decrypter=void 0,this.probe=void 0,this.decryptionPromise=null,this.transmuxConfig=void 0,this.currentTransmuxState=void 0,this.cache=new me.a,this.observer=e,this.typeSupported=t,this.config=i,this.vendor=n}var t=e.prototype;return t.configure=function(e){this.transmuxConfig=e,this.decrypter&&this.decrypter.reset()},t.push=function(e,t,i,n){var r=this,a=i.transmuxing;a.executeStart=pe();var o=new Uint8Array(e),s=this.cache,l=this.config,d=this.currentTransmuxState,u=this.transmuxConfig;n&&(this.currentTransmuxState=n);var c=function(e,t){var i=null;return 0<e.byteLength&&null!=t&&null!=t.key&&null!==t.iv&&null!=t.method&&(i=t),i}(o,t);if(c&&"AES-128"===c.method){var h=this.getDecrypter();if(!l.enableSoftwareAES)return this.decryptionPromise=h.webCryptoDecrypt(o,c.key.buffer,c.iv.buffer).then(function(e){var t=r.push(e,null,i);return r.decryptionPromise=null,t}),this.decryptionPromise;var f=h.softwareDecrypt(o,c.key.buffer,c.iv.buffer);if(!f)return a.executeEnd=pe(),we(i);o=new Uint8Array(f)}var p=n||d,g=p.contiguous,m=p.discontinuity,v=p.trackSwitch,y=p.accurateTimeOffset,b=p.timeOffset,w=u.audioCodec,E=u.videoCodec,S=u.defaultInitPts,A=u.duration,T=u.initSegmentData;if((m||v)&&this.resetInitSegment(T,w,E,A),m&&this.resetInitialTimestamp(S),g||this.resetContiguity(),this.needsProbing(o,m,v)){if(s.dataLength){var L=s.flush();o=Object(x.a)(L,o)}this.configureTransmuxer(o,u)}var C=this.transmux(o,c,b,y,i),k=this.currentTransmuxState;return k.contiguous=!0,k.discontinuity=!1,k.trackSwitch=!1,a.executeEnd=pe(),C},t.flush=function(t){var i=this,e=t.transmuxing;e.executeStart=pe();var n=this.decrypter,r=this.cache,a=this.currentTransmuxState,o=this.decryptionPromise;if(o)return o.then(function(){return i.flush(t)});var s=[],l=a.timeOffset;if(n){var d=n.flush();d&&s.push(this.push(d,null,t))}var u=r.dataLength;r.reset();var c=this.demuxer,h=this.remuxer;if(!c||!h)return ye<=u&&this.observer.emit(ee.a.ERROR,ee.a.ERROR,{type:te.b.MEDIA_ERROR,details:te.a.FRAG_PARSING_ERROR,fatal:!0,reason:"no demux matching with content found"}),e.executeEnd=pe(),[we(t)];var f=c.flush(l);return Ee(f)?f.then(function(e){return i.flushRemux(s,e,t),s}):(this.flushRemux(s,f,t),s)},t.flushRemux=function(e,t,i){var n=t.audioTrack,r=t.avcTrack,a=t.id3Track,o=t.textTrack,s=this.currentTransmuxState,l=s.accurateTimeOffset,d=s.timeOffset;ie.b.log("[transmuxer.ts]: Flushed fragment "+i.sn+(-1<i.part?" p: "+i.part:"")+" of level "+i.level);var u=this.remuxer.remux(n,r,a,o,d,l,!0);e.push({remuxResult:u,chunkMeta:i}),i.transmuxing.executeEnd=pe()},t.resetInitialTimestamp=function(e){var t=this.demuxer,i=this.remuxer;t&&i&&(t.resetTimeStamp(e),i.resetTimeStamp(e))},t.resetContiguity=function(){var e=this.demuxer,t=this.remuxer;e&&t&&(e.resetContiguity(),t.resetNextTimestamp())},t.resetInitSegment=function(e,t,i,n){var r=this.demuxer,a=this.remuxer;r&&a&&(r.resetInitSegment(t,i,n),a.resetInitSegment(e,t,i))},t.destroy=function(){this.demuxer&&(this.demuxer.destroy(),this.demuxer=void 0),this.remuxer&&(this.remuxer.destroy(),this.remuxer=void 0)},t.transmux=function(e,t,i,n,r){return t&&"SAMPLE-AES"===t.method?this.transmuxSampleAes(e,t,i,n,r):this.transmuxUnencrypted(e,i,n,r)},t.transmuxUnencrypted=function(e,t,i,n){var r=this.demuxer.demux(e,t,!1,!this.config.progressive),a=r.audioTrack,o=r.avcTrack,s=r.id3Track,l=r.textTrack;return{remuxResult:this.remuxer.remux(a,o,s,l,t,i,!1),chunkMeta:n}},t.transmuxSampleAes=function(e,t,i,n,r){var a=this;return this.demuxer.demuxSampleAes(e,t,i).then(function(e){return{remuxResult:a.remuxer.remux(e.audioTrack,e.avcTrack,e.id3Track,e.textTrack,i,n,!1),chunkMeta:r}})},t.configureTransmuxer=function(e,t){for(var i,n=this.config,r=this.observer,a=this.typeSupported,o=this.vendor,s=t.audioCodec,l=t.defaultInitPts,d=t.duration,u=t.initSegmentData,c=t.videoCodec,h=0,f=ve.length;h<f;h++)if(ve[h].demux.probe(e)){i=ve[h];break}i||(ie.b.warn("Failed to find demuxer by probing frag, treating as mp4 passthrough"),i={demux:E,remux:ge});var p=this.demuxer,g=this.remuxer,m=i.remux,v=i.demux;g&&g instanceof m||(this.remuxer=new m(r,n,a,o)),p&&p instanceof v||(this.demuxer=new v(r,n,a),this.probe=v.probe),this.resetInitSegment(u,s,c,d),this.resetInitialTimestamp(l)},t.needsProbing=function(e,t,i){return!this.demuxer||!this.remuxer||t||i},t.getDecrypter=function(){var e=this.decrypter;return e=e||(this.decrypter=new n.a(this.observer,this.config))},e}(),we=function(e){return{remuxResult:{},chunkMeta:e}};function Ee(e){return"then"in e&&e.then instanceof Function}var Se=function(e,t,i,n,r){this.audioCodec=void 0,this.videoCodec=void 0,this.initSegmentData=void 0,this.duration=void 0,this.defaultInitPts=void 0,this.audioCodec=e,this.videoCodec=t,this.initSegmentData=i,this.duration=n,this.defaultInitPts=r},Ae=function(e,t,i,n,r){this.discontinuity=void 0,this.contiguous=void 0,this.accurateTimeOffset=void 0,this.trackSwitch=void 0,this.timeOffset=void 0,this.discontinuity=e,this.contiguous=t,this.accurateTimeOffset=i,this.trackSwitch=n,this.timeOffset=r}},function(e,t,i){var n,u,r,a,c;n=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/?#]*\/)*[^;?#]*)?(;[^?#]*)?(\?[^#]*)?(#[^]*)?$/,u=/^([^\/?#]*)([^]*)$/,r=/(?:\/|^)\.(?=\/)/g,a=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,c={buildAbsoluteURL:function(e,t,i){if(i=i||{},e=e.trim(),!(t=t.trim())){if(!i.alwaysNormalize)return e;var n=c.parseURL(e);if(!n)throw new Error("Error trying to parse base URL.");return n.path=c.normalizePath(n.path),c.buildURLFromParts(n)}var r=c.parseURL(t);if(!r)throw new Error("Error trying to parse relative URL.");if(r.scheme)return i.alwaysNormalize?(r.path=c.normalizePath(r.path),c.buildURLFromParts(r)):t;var a=c.parseURL(e);if(!a)throw new Error("Error trying to parse base URL.");if(!a.netLoc&&a.path&&"/"!==a.path[0]){var o=u.exec(a.path);a.netLoc=o[1],a.path=o[2]}a.netLoc&&!a.path&&(a.path="/");var s={scheme:a.scheme,netLoc:r.netLoc,path:null,params:r.params,query:r.query,fragment:r.fragment};if(!r.netLoc&&(s.netLoc=a.netLoc,"/"!==r.path[0]))if(r.path){var l=a.path,d=l.substring(0,l.lastIndexOf("/")+1)+r.path;s.path=c.normalizePath(d)}else s.path=a.path,r.params||(s.params=a.params,r.query||(s.query=a.query));return null===s.path&&(s.path=i.alwaysNormalize?c.normalizePath(r.path):r.path),c.buildURLFromParts(s)},parseURL:function(e){var t=n.exec(e);return t?{scheme:t[1]||"",netLoc:t[2]||"",path:t[3]||"",params:t[4]||"",query:t[5]||"",fragment:t[6]||""}:null},normalizePath:function(e){for(e=e.split("").reverse().join("").replace(r,"");e.length!==(e=e.replace(a,"")).length;);return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}},e.exports=c},function(e,t){e.exports=void 0},function(e,t,i){"use strict";i.d(t,"a",function(){return n});var n=function(){this.aborted=!1,this.loaded=0,this.retry=0,this.total=0,this.chunkCount=0,this.bwEstimate=0,this.loading={start:0,first:0,end:0},this.parsing={start:0,end:0},this.buffering={start:0,first:0,end:0}}},function(e,t,i){"use strict";var n=Object.prototype.hasOwnProperty,f="~";function r(){}function s(e,t,i){this.fn=e,this.context=t,this.once=i||!1}function a(e,t,i,n,r){if("function"!=typeof i)throw new TypeError("The listener must be a function");var a=new s(i,n||e,r),o=f?f+t:t;return e._events[o]?e._events[o].fn?e._events[o]=[e._events[o],a]:e._events[o].push(a):(e._events[o]=a,e._eventsCount++),e}function d(e,t){0==--e._eventsCount?e._events=new r:delete e._events[t]}function o(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(f=!1)),o.prototype.eventNames=function(){var e,t,i=[];if(0===this._eventsCount)return i;for(t in e=this._events)n.call(e,t)&&i.push(f?t.slice(1):t);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},o.prototype.listeners=function(e){var t=f?f+e:e,i=this._events[t];if(!i)return[];if(i.fn)return[i.fn];for(var n=0,r=i.length,a=new Array(r);n<r;n++)a[n]=i[n].fn;return a},o.prototype.listenerCount=function(e){var t=f?f+e:e,i=this._events[t];return i?i.fn?1:i.length:0},o.prototype.emit=function(e,t,i,n,r,a){var o=f?f+e:e;if(!this._events[o])return!1;var s,l,d=this._events[o],u=arguments.length;if(d.fn){switch(d.once&&this.removeListener(e,d.fn,void 0,!0),u){case 1:return d.fn.call(d.context),!0;case 2:return d.fn.call(d.context,t),!0;case 3:return d.fn.call(d.context,t,i),!0;case 4:return d.fn.call(d.context,t,i,n),!0;case 5:return d.fn.call(d.context,t,i,n,r),!0;case 6:return d.fn.call(d.context,t,i,n,r,a),!0}for(l=1,s=new Array(u-1);l<u;l++)s[l-1]=arguments[l];d.fn.apply(d.context,s)}else{var c,h=d.length;for(l=0;l<h;l++)switch(d[l].once&&this.removeListener(e,d[l].fn,void 0,!0),u){case 1:d[l].fn.call(d[l].context);break;case 2:d[l].fn.call(d[l].context,t);break;case 3:d[l].fn.call(d[l].context,t,i);break;case 4:d[l].fn.call(d[l].context,t,i,n);break;default:if(!s)for(c=1,s=new Array(u-1);c<u;c++)s[c-1]=arguments[c];d[l].fn.apply(d[l].context,s)}}return!0},o.prototype.on=function(e,t,i){return a(this,e,t,i,!1)},o.prototype.once=function(e,t,i){return a(this,e,t,i,!0)},o.prototype.removeListener=function(e,t,i,n){var r=f?f+e:e;if(!this._events[r])return this;if(!t)return d(this,r),this;var a=this._events[r];if(a.fn)a.fn!==t||n&&!a.once||i&&a.context!==i||d(this,r);else{for(var o=0,s=[],l=a.length;o<l;o++)(a[o].fn!==t||n&&!a[o].once||i&&a[o].context!==i)&&s.push(a[o]);s.length?this._events[r]=1===s.length?s[0]:s:d(this,r)}return this},o.prototype.removeAllListeners=function(e){var t;return e?(t=f?f+e:e,this._events[t]&&d(this,t)):(this._events=new r,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=f,o.EventEmitter=o,e.exports=o},function(e,t,i){"use strict";i.d(t,"a",function(){return n});var o=function(){function e(e,t){this.subtle=void 0,this.aesIV=void 0,this.subtle=e,this.aesIV=t}return e.prototype.decrypt=function(e,t){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},t,e)},e}(),s=function(){function e(e,t){this.subtle=void 0,this.key=void 0,this.subtle=e,this.key=t}return e.prototype.expandKey=function(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])},e}(),d=i(7),u=function(){function e(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.ksRows=0,this.keySize=0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.initTable()}var t=e.prototype;return t.uint8ArrayToUint32Array_=function(e){for(var t=new DataView(e),i=new Uint32Array(4),n=0;n<4;n++)i[n]=t.getUint32(4*n);return i},t.initTable=function(){var e=this.sBox,t=this.invSBox,i=this.subMix,n=i[0],r=i[1],a=i[2],o=i[3],s=this.invSubMix,l=s[0],d=s[1],u=s[2],c=s[3],h=new Uint32Array(256),f=0,p=0,g=0;for(g=0;g<256;g++)h[g]=g<128?g<<1:g<<1^283;for(g=0;g<256;g++){var m=p^p<<1^p<<2^p<<3^p<<4;m=m>>>8^255&m^99,e[f]=m,t[m]=f;var v=h[f],y=h[v],b=h[y],w=257*h[m]^16843008*m;n[f]=w<<24|w>>>8,r[f]=w<<16|w>>>16,a[f]=w<<8|w>>>24,o[f]=w,w=16843009*b^65537*y^257*v^16843008*f,l[m]=w<<24|w>>>8,d[m]=w<<16|w>>>16,u[m]=w<<8|w>>>24,c[m]=w,f?(f=v^h[h[h[b^v]]],p^=h[h[p]]):f=p=1}},t.expandKey=function(e){for(var t=this.uint8ArrayToUint32Array_(e),i=!0,n=0;n<t.length&&i;)i=t[n]===this.key[n],n++;if(!i){this.key=t;var r=this.keySize=t.length;if(4!==r&&6!==r&&8!==r)throw new Error("Invalid aes key size="+r);var a,o,s,l,d=this.ksRows=4*(r+6+1),u=this.keySchedule=new Uint32Array(d),c=this.invKeySchedule=new Uint32Array(d),h=this.sBox,f=this.rcon,p=this.invSubMix,g=p[0],m=p[1],v=p[2],y=p[3];for(a=0;a<d;a++)a<r?s=u[a]=t[a]:(l=s,a%r==0?(l=h[(l=l<<8|l>>>24)>>>24]<<24|h[l>>>16&255]<<16|h[l>>>8&255]<<8|h[255&l],l^=f[a/r|0]<<24):6<r&&a%r==4&&(l=h[l>>>24]<<24|h[l>>>16&255]<<16|h[l>>>8&255]<<8|h[255&l]),u[a]=s=(u[a-r]^l)>>>0);for(o=0;o<d;o++)a=d-o,l=3&o?u[a]:u[a-4],c[o]=o<4||a<=4?l:g[h[l>>>24]]^m[h[l>>>16&255]]^v[h[l>>>8&255]]^y[h[255&l]],c[o]=c[o]>>>0}},t.networkToHostOrderSwap=function(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24},t.decrypt=function(e,t,i){for(var n,r,a,o,s,l,d,u,c,h,f,p,g,m,v=this.keySize+6,y=this.invKeySchedule,b=this.invSBox,w=this.invSubMix,E=w[0],S=w[1],A=w[2],T=w[3],L=this.uint8ArrayToUint32Array_(i),C=L[0],k=L[1],x=L[2],P=L[3],I=new Int32Array(e),O=new Int32Array(I.length),R=this.networkToHostOrderSwap;t<I.length;){for(c=R(I[t]),h=R(I[t+1]),f=R(I[t+2]),p=R(I[t+3]),s=c^y[0],l=p^y[1],d=f^y[2],u=h^y[3],g=4,m=1;m<v;m++)n=E[s>>>24]^S[l>>16&255]^A[d>>8&255]^T[255&u]^y[g],r=E[l>>>24]^S[d>>16&255]^A[u>>8&255]^T[255&s]^y[g+1],a=E[d>>>24]^S[u>>16&255]^A[s>>8&255]^T[255&l]^y[g+2],o=E[u>>>24]^S[s>>16&255]^A[l>>8&255]^T[255&d]^y[g+3],s=n,l=r,d=a,u=o,g+=4;n=b[s>>>24]<<24^b[l>>16&255]<<16^b[d>>8&255]<<8^b[255&u]^y[g],r=b[l>>>24]<<24^b[d>>16&255]<<16^b[u>>8&255]<<8^b[255&s]^y[g+1],a=b[d>>>24]<<24^b[u>>16&255]<<16^b[s>>8&255]<<8^b[255&l]^y[g+2],o=b[u>>>24]<<24^b[s>>16&255]<<16^b[l>>8&255]<<8^b[255&d]^y[g+3],O[t]=R(n^C),O[t+1]=R(o^k),O[t+2]=R(a^x),O[t+3]=R(r^P),C=c,k=h,x=f,P=p,t+=4}return O.buffer},e}(),r=i(1),c=i(5),n=function(){function e(e,t,i){var n=(void 0===i?{}:i).removePKCS7Padding,r=void 0===n||n;if(this.logEnabled=!0,this.observer=void 0,this.config=void 0,this.removePKCS7Padding=void 0,this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null,this.observer=e,this.config=t,this.removePKCS7Padding=r)try{var a=self.crypto;a&&(this.subtle=a.subtle||a.webkitSubtle)}catch(e){}null===this.subtle&&(this.config.enableSoftwareAES=!0)}var t=e.prototype;return t.destroy=function(){this.observer=null},t.isSync=function(){return this.config.enableSoftwareAES},t.flush=function(){var e=this.currentResult;if(e){var t,i,n,r=new Uint8Array(e);return this.reset(),this.removePKCS7Padding?(i=(t=r).byteLength,(n=i&&new DataView(t.buffer).getUint8(i-1))?Object(d.a)(t,0,i-n):t):r}this.reset()},t.reset=function(){this.currentResult=null,this.currentIV=null,this.remainderData=null,this.softwareDecrypter&&(this.softwareDecrypter=null)},t.decrypt=function(e,t,i,n){if(this.config.enableSoftwareAES){this.softwareDecrypt(new Uint8Array(e),t,i);var r=this.flush();r&&n(r.buffer)}else this.webCryptoDecrypt(new Uint8Array(e),t,i).then(n)},t.softwareDecrypt=function(e,t,i){var n=this.currentIV,r=this.currentResult,a=this.remainderData;this.logOnce("JS AES decrypt"),a&&(e=Object(c.a)(a,e),this.remainderData=null);var o=this.getValidChunk(e);if(!o.length)return null;n&&(i=n);var s=this.softwareDecrypter;(s=s||(this.softwareDecrypter=new u)).expandKey(t);var l=r;return this.currentResult=s.decrypt(o.buffer,0,i),this.currentIV=Object(d.a)(o,-16).buffer,l||null},t.webCryptoDecrypt=function(t,i,n){var r=this,a=this.subtle;return this.key===i&&this.fastAesKey||(this.key=i,this.fastAesKey=new s(a,i)),this.fastAesKey.expandKey().then(function(e){return a?new o(a,n).decrypt(t.buffer,e):Promise.reject(new Error("web crypto not initialized"))}).catch(function(e){return r.onWebCryptoError(e,t,i,n)})},t.onWebCryptoError=function(e,t,i,n){return r.b.warn("[decrypter.ts]: WebCrypto Error, disable WebCrypto API:",e),this.config.enableSoftwareAES=!0,this.logEnabled=!0,this.softwareDecrypt(t,i,n)},t.getValidChunk=function(e){var t=e,i=e.length-e.length%16;return i!==e.length&&(t=Object(d.a)(e,0,i),this.remainderData=Object(d.a)(e,i)),t},t.logOnce=function(e){this.logEnabled&&(r.b.log("[decrypter.ts]: "+e),this.logEnabled=!1)},e}()},function(e,t,i){"use strict";i.d(t,"a",function(){return a});var n=i(9);function r(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a=function(){function i(e,t){this._uri=null,this.method=null,this.keyFormat=null,this.keyFormatVersions=null,this.keyID=null,this.key=null,this.iv=null,this._uri=t?Object(n.buildAbsoluteURL)(e,t,{alwaysNormalize:!0}):e}return i.fromURL=function(e,t){return new i(e,t)},i.fromURI=function(e){return new i(e)},r(i.prototype,[{key:"uri",get:function(){return this._uri}}]),i}()},function(e,t,i){"use strict";i.d(t,"a",function(){return n});var n=function(){function e(){this.chunks=[],this.dataLength=0}var t=e.prototype;return t.push=function(e){this.chunks.push(e),this.dataLength+=e.length},t.flush=function(){var e,t=this.chunks,i=this.dataLength;return t.length?(e=1===t.length?t[0]:function(e,t){for(var i=new Uint8Array(t),n=0,r=0;r<e.length;r++){var a=e[r];i.set(a,n),n+=a.length}return i}(t,i),this.reset(),e):new Uint8Array(0)},t.reset=function(){this.chunks.length=0,this.dataLength=0},e}()},function(e,t,f){function l(i){var n={};function r(e){if(n[e])return n[e].exports;var t=n[e]={i:e,l:!1,exports:{}};return i[e].call(t.exports,t,t.exports,r),t.l=!0,t.exports}r.m=i,r.c=n,r.i=function(e){return e},r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:i})},r.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/",r.oe=function(e){throw console.error(e),e};var e=r(r.s=ENTRY_MODULE);return e.default||e}function p(e){return(e+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function h(e,t,i){var n={};n[i]=[];var r=t.toString(),a=r.match(/^function\s?\w*\(\w+,\s*\w+,\s*(\w+)\)/);if(!a)return n;for(var o,s=a[1],l=new RegExp("(\\\\n|\\W)"+p(s)+"\\(\\s*(/\\*.*?\\*/)?\\s*.*?([\\.|\\-|\\+|\\w|/|@]+).*?\\)","g");o=l.exec(r);)"dll-reference"!==o[3]&&n[i].push(o[3]);for(l=new RegExp("\\("+p(s)+'\\("(dll-reference\\s([\\.|\\-|\\+|\\w|/|@]+))"\\)\\)\\(\\s*(/\\*.*?\\*/)?\\s*.*?([\\.|\\-|\\+|\\w|/|@]+).*?\\)',"g");o=l.exec(r);)e[o[2]]||(n[i].push(o[1]),e[o[2]]=f(o[1]).m),n[o[2]]=n[o[2]]||[],n[o[2]].push(o[4]);for(var d,u=Object.keys(n),c=0;c<u.length;c++)for(var h=0;h<n[u[c]].length;h++)d=n[u[c]][h],isNaN(1*d)||(n[u[c]][h]=1*n[u[c]][h]);return n}function g(i){return Object.keys(i).reduce(function(e,t){return e||0<i[t].length},!1)}e.exports=function(e,t){t=t||{};var i={main:f.m},n=t.all?{main:Object.keys(i.main)}:function(e,t){for(var i={main:[t]},n={main:[]},r={main:{}};g(i);)for(var a=Object.keys(i),o=0;o<a.length;o++){var s=a[o],l=i[s].pop();if(r[s]=r[s]||{},!r[s][l]&&e[s][l]){r[s][l]=!0,n[s]=n[s]||[],n[s].push(l);for(var d=h(e,e[s][l],s),u=Object.keys(d),c=0;c<u.length;c++)i[u[c]]=i[u[c]]||[],i[u[c]]=i[u[c]].concat(d[u[c]])}}return n}(i,e),r="";Object.keys(n).filter(function(e){return"main"!==e}).forEach(function(t){for(var e=0;n[t][e];)e++;n[t].push(e),i[t][e]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",r=r+"var "+t+" = ("+l.toString().replace("ENTRY_MODULE",JSON.stringify(e))+")({"+n[t].map(function(e){return JSON.stringify(e)+": "+i[t][e].toString()}).join(",")+"});\n"}),r=r+"new (("+l.toString().replace("ENTRY_MODULE",JSON.stringify(e))+")({"+n.main.map(function(e){return JSON.stringify(e)+": "+i.main[e].toString()}).join(",")+"}))(self);";var a=new window.Blob([r],{type:"text/javascript"});if(t.bare)return a;var o=(window.URL||window.webkitURL||window.mozURL||window.msURL).createObjectURL(a),s=new window.Worker(o);return s.objectURL=o,s}},function(e,t,i){"use strict";i.r(t),i.d(t,"default",function(){return a});var d=i(8),n=i(0),u=i(1),r=i(12);function a(o){var s=new r.EventEmitter,l=function(e,t){o.postMessage({event:e,data:t})};s.on(n.a.FRAG_DECRYPTED,l),s.on(n.a.ERROR,l),o.addEventListener("message",function(e){var t=e.data;switch(t.cmd){case"init":var i=JSON.parse(t.config);o.transmuxer=new d.c(s,t.typeSupported,i,t.vendor),Object(u.a)(i.debug),l("init",null);break;case"configure":o.transmuxer.configure(t.config);break;case"demux":var n=o.transmuxer.push(t.data,t.decryptdata,t.chunkMeta,t.state);Object(d.d)(n)?n.then(function(e){c(o,e)}):c(o,n);break;case"flush":var r=t.chunkMeta,a=o.transmuxer.flush(r);Object(d.d)(a)?a.then(function(e){h(o,e,r)}):h(o,a,r)}})}function c(e,t){if((i=t.remuxResult).audio||i.video||i.text||i.id3||i.initSegment){var i,n=[],r=t.remuxResult,a=r.audio,o=r.video;a&&s(n,a),o&&s(n,o),e.postMessage({event:"transmuxComplete",data:t},n)}}function s(e,t){t.data1&&e.push(t.data1.buffer),t.data2&&e.push(t.data2.buffer)}function h(t,e,i){e.forEach(function(e){c(t,e)}),t.postMessage({event:"flush",data:i})}},function(e,t,i){"use strict";i.r(t),i.d(t,"default",function(){return Tt});var K=i(9),X=i(3),k=i(0),b=i(2),J=i(1),l=i(5),Z=i(4);function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var $=function(){function e(e){this.PTSKnown=!1,this.alignedSliding=!1,this.averagetargetduration=void 0,this.endCC=0,this.endSN=0,this.fragments=void 0,this.fragmentHint=void 0,this.partList=null,this.initSegment=null,this.live=!0,this.ageHeader=0,this.advancedDateTime=void 0,this.updated=!0,this.advanced=!0,this.availabilityDelay=void 0,this.misses=0,this.needSidxRanges=!1,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=void 0,this.m3u8="",this.version=null,this.canBlockReload=!1,this.canSkipUntil=0,this.canSkipDateRanges=!1,this.skippedSegments=0,this.recentlyRemovedDateranges=void 0,this.partHoldBack=0,this.holdBack=0,this.partTarget=0,this.preloadHint=void 0,this.renditionReports=void 0,this.tuneInGoal=0,this.deltaUpdateFailed=void 0,this.driftStartTime=0,this.driftEndTime=0,this.driftStart=0,this.driftEnd=0,this.fragments=[],this.url=e}return e.prototype.reloaded=function(e){if(!e)return this.advanced=!0,void(this.updated=!0);var t=this.lastPartSn-e.lastPartSn,i=this.lastPartIndex-e.lastPartIndex;this.updated=this.endSN!==e.endSN||!!i||!!t,this.advanced=this.endSN>e.endSN||0<t||0==t&&0<i,this.updated||this.advanced?this.misses=Math.floor(.6*e.misses):this.misses=e.misses+1,this.availabilityDelay=e.availabilityDelay},n(e.prototype,[{key:"hasProgramDateTime",get:function(){return!!this.fragments.length&&Object(X.a)(this.fragments[this.fragments.length-1].programDateTime)}},{key:"levelTargetDuration",get:function(){return this.averagetargetduration||this.targetduration||10}},{key:"drift",get:function(){var e=this.driftEndTime-this.driftStartTime;return 0<e?1e3*(this.driftEnd-this.driftStart)/e:1}},{key:"edge",get:function(){return this.partEnd||this.fragmentEnd}},{key:"partEnd",get:function(){var e;return null!==(e=this.partList)&&void 0!==e&&e.length?this.partList[this.partList.length-1].end:this.fragmentEnd}},{key:"fragmentEnd",get:function(){var e;return null!==(e=this.fragments)&&void 0!==e&&e.length?this.fragments[this.fragments.length-1].end:0}},{key:"age",get:function(){return this.advancedDateTime?Math.max(Date.now()-this.advancedDateTime,0)/1e3:0}},{key:"lastPartIndex",get:function(){var e;return null!==(e=this.partList)&&void 0!==e&&e.length?this.partList[this.partList.length-1].index:-1}},{key:"lastPartSn",get:function(){var e;return null!==(e=this.partList)&&void 0!==e&&e.length?this.partList[this.partList.length-1].fragment.sn:this.endSN}}]),e}(),ee=i(14),r=/^(\d+)x(\d+)$/,a=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,te=function(){function i(e){for(var t in"string"==typeof e&&(e=i.parseAttrList(e)),e)e.hasOwnProperty(t)&&(this[t]=e[t])}var e=i.prototype;return e.decimalInteger=function(e){var t=parseInt(this[e],10);return t>Number.MAX_SAFE_INTEGER?1/0:t},e.hexadecimalInteger=function(e){if(this[e]){var t=(this[e]||"0x").slice(2);t=(1&t.length?"0":"")+t;for(var i=new Uint8Array(t.length/2),n=0;n<t.length/2;n++)i[n]=parseInt(t.slice(2*n,2*n+2),16);return i}return null},e.hexadecimalIntegerAsNumber=function(e){var t=parseInt(this[e],16);return t>Number.MAX_SAFE_INTEGER?1/0:t},e.decimalFloatingPoint=function(e){return parseFloat(this[e])},e.optionalFloat=function(e,t){var i=this[e];return i?parseFloat(i):t},e.enumeratedString=function(e){return this[e]},e.bool=function(e){return"YES"===this[e]},e.decimalResolution=function(e){var t=r.exec(this[e]);if(null!==t)return{width:parseInt(t[1],10),height:parseInt(t[2],10)}},i.parseAttrList=function(e){var t,i={};for(a.lastIndex=0;null!==(t=a.exec(e));){var n=t[2];0===n.indexOf('"')&&n.lastIndexOf('"')===n.length-1&&(n=n.slice(1,-1)),i[t[1]]=n}return i},i}(),o={audio:{a3ds:!0,"ac-3":!0,"ac-4":!0,alac:!0,alaw:!0,dra1:!0,"dts+":!0,"dts-":!0,dtsc:!0,dtse:!0,dtsh:!0,"ec-3":!0,enca:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,"raw ":!0,Opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,av01:!0,drac:!0,dvav:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,rv60:!0,s263:!0,svc1:!0,svc2:!0,"vc-1":!0,vp08:!0,vp09:!0},text:{stpp:!0,wvtt:!0}};function p(e,t){return MediaSource.isTypeSupported((t||"video")+'/mp4;codecs="'+e+'"')}var g,v,c=/#EXT-X-STREAM-INF:([^\r\n]*)(?:[\r\n](?:#[^\r\n]*)?)*([^\r\n]+)|#EXT-X-SESSION-DATA:([^\r\n]*)[\r\n]+/g,h=/#EXT-X-MEDIA:(.*)/g,ie=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/(?!#) *(\S[\S ]*)/.source,/#EXT-X-BYTERANGE:*(.+)/.source,/#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/#.*/.source].join("|"),"g"),ne=new RegExp([/#(EXTM3U)/.source,/#EXT-X-(PLAYLIST-TYPE):(.+)/.source,/#EXT-X-(MEDIA-SEQUENCE): *(\d+)/.source,/#EXT-X-(SKIP):(.+)/.source,/#EXT-X-(TARGETDURATION): *(\d+)/.source,/#EXT-X-(KEY):(.+)/.source,/#EXT-X-(START):(.+)/.source,/#EXT-X-(ENDLIST)/.source,/#EXT-X-(DISCONTINUITY-SEQ)UENCE: *(\d+)/.source,/#EXT-X-(DIS)CONTINUITY/.source,/#EXT-X-(VERSION):(\d+)/.source,/#EXT-X-(MAP):(.+)/.source,/#EXT-X-(SERVER-CONTROL):(.+)/.source,/#EXT-X-(PART-INF):(.+)/.source,/#EXT-X-(GAP)/.source,/#EXT-X-(BITRATE):\s*(\d+)/.source,/#EXT-X-(PART):(.+)/.source,/#EXT-X-(PRELOAD-HINT):(.+)/.source,/#EXT-X-(RENDITION-REPORT):(.+)/.source,/(#)([^:]*):(.*)/.source,/(#)(.*)(?:.*)\r?\n?/.source].join("|")),re=/\.(mp4|m4s|m4v|m4a)$/i,m=function(){function u(){}return u.findGroup=function(e,t){for(var i=0;i<e.length;i++){var n=e[i];if(n.id===t)return n}},u.convertAVC1ToAVCOTI=function(e){var t=e.split(".");if(2<t.length){var i=t.shift()+".";return i+=parseInt(t.shift()).toString(16),i+=("000"+parseInt(t.shift()).toString(16)).substr(-4)}return e},u.resolve=function(e,t){return K.buildAbsoluteURL(t,e,{alwaysNormalize:!0})},u.parseMasterPlaylist=function(e,t){var i,n=[],r={},a=!1;for(c.lastIndex=0;null!=(i=c.exec(e));)if(i[1]){var o=new te(i[1]),s={attrs:o,bitrate:o.decimalInteger("AVERAGE-BANDWIDTH")||o.decimalInteger("BANDWIDTH"),name:o.NAME,url:u.resolve(i[2],t)},l=o.decimalResolution("RESOLUTION");l&&(s.width=l.width,s.height=l.height),f((o.CODECS||"").split(/[ ,]+/).filter(function(e){return e}),s),s.videoCodec&&-1!==s.videoCodec.indexOf("avc1")&&(s.videoCodec=u.convertAVC1ToAVCOTI(s.videoCodec)),n.push(s)}else if(i[3]){var d=new te(i[3]);d["DATA-ID"]&&(a=!0,r[d["DATA-ID"]]=d)}return{levels:n,sessionData:a?r:null}},u.parseMasterPlaylistMedia=function(e,t,i,n){var r;void 0===n&&(n=[]);var a=[],o=0;for(h.lastIndex=0;null!==(r=h.exec(e));){var s=new te(r[1]);if(s.TYPE===i){var l={attrs:s,bitrate:0,id:o++,groupId:s["GROUP-ID"],instreamId:s["INSTREAM-ID"],name:s.NAME||s.LANGUAGE||"",type:i,default:s.bool("DEFAULT"),autoselect:s.bool("AUTOSELECT"),forced:s.bool("FORCED"),lang:s.LANGUAGE,url:s.URI?u.resolve(s.URI,t):""};if(n.length){var d=u.findGroup(n,l.groupId)||n[0];y(l,d,"audioCodec"),y(l,d,"textCodec")}a.push(l)}}return a},u.parseLevelPlaylist=function(e,t,i,n,r){var a,o,s,l=new $(t),d=l.fragments,u=0,c=0,h=0,f=0,p=null,g=new Z.b(n,t),m=-1;for(ie.lastIndex=0,l.m3u8=e;null!==(a=ie.exec(e));){var v=a[1];if(v){g.duration=parseFloat(v);var y=(" "+a[2]).slice(1);g.title=y||null,g.tagList.push(y?["INF",v,y]:["INF",v])}else if(a[3])Object(X.a)(g.duration)&&(g.start=h,s&&(g.levelkey=s),g.sn=u,g.level=i,g.cc=f,g.urlId=r,d.push(g),g.relurl=(" "+a[3]).slice(1),ae(g,p),h+=(p=g).duration,u++,c=0,(g=new Z.b(n,t)).start=h,g.sn=u,g.cc=f,g.level=i);else if(a[4]){var b=(" "+a[4]).slice(1);p?g.setByteRange(b,p):g.setByteRange(b)}else if(a[5])g.rawProgramDateTime=(" "+a[5]).slice(1),g.tagList.push(["PROGRAM-DATE-TIME",g.rawProgramDateTime]),-1===m&&(m=d.length);else{if(!(a=a[0].match(ne))){J.b.warn("No matches on slow regex match for level playlist!");continue}for(o=1;o<a.length&&void 0===a[o];o++);var w=(" "+a[o]).slice(1),E=(" "+a[o+1]).slice(1),S=a[o+2]?(" "+a[o+2]).slice(1):"";switch(w){case"PLAYLIST-TYPE":l.type=E.toUpperCase();break;case"MEDIA-SEQUENCE":u=l.startSN=parseInt(E);break;case"SKIP":var A=new te(E),T=A.decimalInteger("SKIPPED-SEGMENTS");if(Object(X.a)(T)){for(var L=l.skippedSegments=T;L--;)d.unshift(null);u+=T}var C=A.enumeratedString("RECENTLY-REMOVED-DATERANGES");C&&(l.recentlyRemovedDateranges=C.split("\t"));break;case"TARGETDURATION":l.targetduration=parseFloat(E);break;case"VERSION":l.version=parseInt(E);break;case"EXTM3U":break;case"ENDLIST":l.live=!1;break;case"#":(E||S)&&g.tagList.push(S?[E,S]:[E]);break;case"DIS":f++;case"GAP":g.tagList.push([w]);break;case"BITRATE":g.tagList.push([w,E]);break;case"DISCONTINUITY-SEQ":f=parseInt(E);break;case"KEY":var k,x=new te(E),P=x.enumeratedString("METHOD"),I=x.URI,O=x.hexadecimalInteger("IV"),R=x.enumeratedString("KEYFORMATVERSIONS"),D=x.enumeratedString("KEYID"),M=null!=(k=x.enumeratedString("KEYFORMAT"))?k:"identity";if(-1<["com.apple.streamingkeydelivery","com.microsoft.playready","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed","com.widevine"].indexOf(M)){J.b.warn("Keyformat "+M+" is not supported from the manifest");continue}if("identity"!==M)continue;P&&(s=ee.a.fromURL(t,I),I&&0<=["AES-128","SAMPLE-AES","SAMPLE-AES-CENC"].indexOf(P)&&(s.method=P,s.keyFormat=M,D&&(s.keyID=D),R&&(s.keyFormatVersions=R),s.iv=O));break;case"START":var B=new te(E).decimalFloatingPoint("TIME-OFFSET");Object(X.a)(B)&&(l.startTimeOffset=B);break;case"MAP":var F=new te(E);g.relurl=F.URI,F.BYTERANGE&&g.setByteRange(F.BYTERANGE),g.level=i,g.sn="initSegment",s&&(g.levelkey=s),l.initSegment=g,(g=new Z.b(n,t)).rawProgramDateTime=l.initSegment.rawProgramDateTime;break;case"SERVER-CONTROL":var N=new te(E);l.canBlockReload=N.bool("CAN-BLOCK-RELOAD"),l.canSkipUntil=N.optionalFloat("CAN-SKIP-UNTIL",0),l.canSkipDateRanges=0<l.canSkipUntil&&N.bool("CAN-SKIP-DATERANGES"),l.partHoldBack=N.optionalFloat("PART-HOLD-BACK",0),l.holdBack=N.optionalFloat("HOLD-BACK",0);break;case"PART-INF":var _=new te(E);l.partTarget=_.decimalFloatingPoint("PART-TARGET");break;case"PART":var U=l.partList;U=U||(l.partList=[]);var V=0<c?U[U.length-1]:void 0,j=c++,H=new Z.c(new te(E),g,t,j,V);U.push(H),g.duration+=H.duration;break;case"PRELOAD-HINT":var G=new te(E);l.preloadHint=G;break;case"RENDITION-REPORT":var z=new te(E);l.renditionReports=l.renditionReports||[],l.renditionReports.push(z);break;default:J.b.warn("line parsed but not handled: "+a)}}}p&&!p.relurl?(d.pop(),h-=p.duration,l.partList&&(l.fragmentHint=p)):l.partList&&(ae(g,p),g.cc=f,l.fragmentHint=g);var W=d.length,Q=d[0],q=d[W-1];if(0<(h+=l.skippedSegments*l.targetduration)&&W&&q){l.averagetargetduration=h/W;var Y=q.sn;l.endSN="initSegment"!==Y?Y:0,Q&&(l.startCC=Q.cc,l.initSegment||l.fragments.every(function(e){return e.relurl&&(t=e.relurl,re.test(null!=(i=null===(n=K.parseURL(t))||void 0===n?void 0:n.path)?i:""));var t,i,n})&&(J.b.warn("MP4 fragments found but no init segment (probably no MAP, incomplete M3U8), trying to fetch SIDX"),(g=new Z.b(n,t)).relurl=q.relurl,g.level=i,g.sn="initSegment",l.initSegment=g,l.needSidxRanges=!0))}else l.endSN=0,l.startCC=0;return l.fragmentHint&&(h+=l.fragmentHint.duration),l.totalduration=h,l.endCC=f,0<m&&function(e,t){for(var i=e[t],n=t;n--;){var r=e[n];if(!r)return;r.programDateTime=i.programDateTime-1e3*r.duration,i=r}}(d,m),l},u}();function f(n,r){["video","audio","text"].forEach(function(t){var i=n.filter(function(e){return function(e,t){var i=o[t];return!!i&&!0===i[e.slice(0,4)]}(e,t)});if(i.length){var e=i.filter(function(e){return 0===e.lastIndexOf("avc1",0)||0===e.lastIndexOf("mp4a",0)});r[t+"Codec"]=0<e.length?e[0]:i[0],n=n.filter(function(e){return-1===i.indexOf(e)})}}),r.unknownCodecs=n}function y(e,t,i){var n=t[i];n&&(e[i]=n)}function ae(e,t){e.rawProgramDateTime?e.programDateTime=Date.parse(e.rawProgramDateTime):null!=t&&t.programDateTime&&(e.programDateTime=t.endProgramDateTime),Object(X.a)(e.programDateTime)||(e.programDateTime=null,e.rawProgramDateTime=null)}function w(e,t){var i=e.url;return void 0!==i&&0!==i.indexOf("data:")||(i=t.url),i}!function(e){e.MANIFEST="manifest",e.LEVEL="level",e.AUDIO_TRACK="audioTrack",e.SUBTITLE_TRACK="subtitleTrack"}(g=g||{}),function(e){e.MAIN="main",e.AUDIO="audio",e.SUBTITLE="subtitle"}(v=v||{});var E=function(){function e(e){this.hls=void 0,this.loaders=Object.create(null),this.hls=e,this.registerListeners()}var t=e.prototype;return t.registerListeners=function(){var e=this.hls;e.on(k.a.MANIFEST_LOADING,this.onManifestLoading,this),e.on(k.a.LEVEL_LOADING,this.onLevelLoading,this),e.on(k.a.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.on(k.a.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)},t.unregisterListeners=function(){var e=this.hls;e.off(k.a.MANIFEST_LOADING,this.onManifestLoading,this),e.off(k.a.LEVEL_LOADING,this.onLevelLoading,this),e.off(k.a.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.off(k.a.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)},t.createInternalLoader=function(e){var t=this.hls.config,i=t.pLoader,n=t.loader,r=new(i||n)(t);return e.loader=r,this.loaders[e.type]=r},t.getInternalLoader=function(e){return this.loaders[e.type]},t.resetInternalLoader=function(e){this.loaders[e]&&delete this.loaders[e]},t.destroyInternalLoaders=function(){for(var e in this.loaders){var t=this.loaders[e];t&&t.destroy(),this.resetInternalLoader(e)}},t.destroy=function(){this.unregisterListeners(),this.destroyInternalLoaders()},t.onManifestLoading=function(e,t){var i=t.url;this.load({id:null,groupId:null,level:0,responseType:"text",type:g.MANIFEST,url:i,deliveryDirectives:null})},t.onLevelLoading=function(e,t){var i=t.id,n=t.level,r=t.url,a=t.deliveryDirectives;this.load({id:i,groupId:null,level:n,responseType:"text",type:g.LEVEL,url:r,deliveryDirectives:a})},t.onAudioTrackLoading=function(e,t){var i=t.id,n=t.groupId,r=t.url,a=t.deliveryDirectives;this.load({id:i,groupId:n,level:null,responseType:"text",type:g.AUDIO_TRACK,url:r,deliveryDirectives:a})},t.onSubtitleTrackLoading=function(e,t){var i=t.id,n=t.groupId,r=t.url,a=t.deliveryDirectives;this.load({id:i,groupId:n,level:null,responseType:"text",type:g.SUBTITLE_TRACK,url:r,deliveryDirectives:a})},t.load=function(e){var t,i,n,r,a,o,s=this.hls.config,l=this.getInternalLoader(e);if(l){var d=l.context;if(d&&d.url===e.url)return void J.b.trace("[playlist-loader]: playlist request ongoing");J.b.log("[playlist-loader]: aborting previous loader for type: "+e.type),l.abort()}switch(e.type){case g.MANIFEST:i=s.manifestLoadingMaxRetry,n=s.manifestLoadingTimeOut,r=s.manifestLoadingRetryDelay,a=s.manifestLoadingMaxRetryTimeout;break;case g.LEVEL:case g.AUDIO_TRACK:case g.SUBTITLE_TRACK:i=0,n=s.levelLoadingTimeOut;break;default:i=s.levelLoadingMaxRetry,n=s.levelLoadingTimeOut,r=s.levelLoadingRetryDelay,a=s.levelLoadingMaxRetryTimeout}if(l=this.createInternalLoader(e),null!==(t=e.deliveryDirectives)&&void 0!==t&&t.part&&(e.type===g.LEVEL&&null!==e.level?o=this.hls.levels[e.level].details:e.type===g.AUDIO_TRACK&&null!==e.id?o=this.hls.audioTracks[e.id].details:e.type===g.SUBTITLE_TRACK&&null!==e.id&&(o=this.hls.subtitleTracks[e.id].details),o)){var u=o.partTarget,c=o.targetduration;u&&c&&(n=Math.min(1e3*Math.max(3*u,.8*c),n))}var h={timeout:n,maxRetry:i,retryDelay:r,maxRetryDelay:a,highWaterMark:0},f={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};l.load(e,h,f)},t.loadsuccess=function(e,t,i,n){if(void 0===n&&(n=null),i.isSidxRequest)return this.handleSidxRequest(e,i),void this.handlePlaylistLoaded(e,t,i,n);this.resetInternalLoader(i.type);var r=e.data;0===r.indexOf("#EXTM3U")?(t.parsing.start=performance.now(),0<r.indexOf("#EXTINF:")||0<r.indexOf("#EXT-X-TARGETDURATION:")?this.handleTrackOrLevelPlaylist(e,t,i,n):this.handleMasterPlaylist(e,t,i,n)):this.handleManifestParsingError(e,i,"no EXTM3U delimiter",n)},t.loaderror=function(e,t,i){void 0===i&&(i=null),this.handleNetworkError(t,i,!1,e)},t.loadtimeout=function(e,t,i){void 0===i&&(i=null),this.handleNetworkError(t,i,!0)},t.handleMasterPlaylist=function(e,t,i,n){var r=this.hls,a=e.data,o=w(e,i),s=m.parseMasterPlaylist(a,o),l=s.levels,d=s.sessionData;if(l.length){var u=l.map(function(e){return{id:e.attrs.AUDIO,audioCodec:e.audioCodec}}),c=l.map(function(e){return{id:e.attrs.SUBTITLES,textCodec:e.textCodec}}),h=m.parseMasterPlaylistMedia(a,o,"AUDIO",u),f=m.parseMasterPlaylistMedia(a,o,"SUBTITLES",c),p=m.parseMasterPlaylistMedia(a,o,"CLOSED-CAPTIONS");h.length&&(h.some(function(e){return!e.url})||!l[0].audioCodec||l[0].attrs.AUDIO||(J.b.log("[playlist-loader]: audio codec signaled in quality level, but no embedded audio track signaled, create one"),h.unshift({type:"main",name:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:new te({}),bitrate:0,url:""}))),r.trigger(k.a.MANIFEST_LOADED,{levels:l,audioTracks:h,subtitles:f,captions:p,url:o,stats:t,networkDetails:n,sessionData:d})}else this.handleManifestParsingError(e,i,"no level found in manifest",n)},t.handleTrackOrLevelPlaylist=function(e,t,i,n){var r=this.hls,a=i.id,o=i.level,s=i.type,l=w(e,i),d=Object(X.a)(a)?a:0,u=Object(X.a)(o)?o:d,c=function(e){switch(e.type){case g.AUDIO_TRACK:return v.AUDIO;case g.SUBTITLE_TRACK:return v.SUBTITLE;default:return v.MAIN}}(i),h=m.parseLevelPlaylist(e.data,l,u,c,d);if(h.fragments.length){if(s===g.MANIFEST){var f={attrs:new te({}),bitrate:0,details:h,name:"",url:l};r.trigger(k.a.MANIFEST_LOADED,{levels:[f],audioTracks:[],url:l,stats:t,networkDetails:n,sessionData:null})}if(t.parsing.end=performance.now(),h.needSidxRanges){var p=h.initSegment.url;this.load({url:p,isSidxRequest:!0,type:s,level:o,levelDetails:h,id:a,groupId:null,rangeStart:0,rangeEnd:2048,responseType:"arraybuffer",deliveryDirectives:null})}else i.levelDetails=h,this.handlePlaylistLoaded(e,t,i,n)}else r.trigger(k.a.ERROR,{type:b.b.NETWORK_ERROR,details:b.a.LEVEL_EMPTY_ERROR,fatal:!1,url:l,reason:"no fragments found in level",level:"number"==typeof i.level?i.level:void 0})},t.handleSidxRequest=function(e,t){var i=Object(l.g)(new Uint8Array(e.data));if(i){var n=i.references,r=t.levelDetails;n.forEach(function(e,t){var i=e.info,n=r.fragments[t];0===n.byteRange.length&&n.setByteRange(String(1+i.end-i.start)+"@"+String(i.start))}),r.initSegment.setByteRange(String(i.moovEndOffset)+"@0")}},t.handleManifestParsingError=function(e,t,i,n){this.hls.trigger(k.a.ERROR,{type:b.b.NETWORK_ERROR,details:b.a.MANIFEST_PARSING_ERROR,fatal:t.type===g.MANIFEST,url:e.url,reason:i,response:e,context:t,networkDetails:n})},t.handleNetworkError=function(e,t,i,n){void 0===i&&(i=!1),J.b.warn("[playlist-loader]: A network "+(i?"timeout":"error")+" occurred while loading "+e.type+" level: "+e.level+" id: "+e.id+' group-id: "'+e.groupId+'"');var r=b.a.UNKNOWN,a=!1,o=this.getInternalLoader(e);switch(e.type){case g.MANIFEST:r=i?b.a.MANIFEST_LOAD_TIMEOUT:b.a.MANIFEST_LOAD_ERROR,a=!0;break;case g.LEVEL:r=i?b.a.LEVEL_LOAD_TIMEOUT:b.a.LEVEL_LOAD_ERROR,a=!1;break;case g.AUDIO_TRACK:r=i?b.a.AUDIO_TRACK_LOAD_TIMEOUT:b.a.AUDIO_TRACK_LOAD_ERROR,a=!1;break;case g.SUBTITLE_TRACK:r=i?b.a.SUBTITLE_TRACK_LOAD_TIMEOUT:b.a.SUBTITLE_LOAD_ERROR,a=!1}o&&this.resetInternalLoader(e.type);var s={type:b.b.NETWORK_ERROR,details:r,fatal:a,url:e.url,loader:o,context:e,networkDetails:t};n&&(s.response=n),this.hls.trigger(k.a.ERROR,s)},t.handlePlaylistLoaded=function(e,t,i,n){var r=i.type,a=i.level,o=i.id,s=i.groupId,l=i.loader,d=i.levelDetails,u=i.deliveryDirectives;if(null!=d&&d.targetduration){if(l)switch(d.live&&(l.getCacheAge&&(d.ageHeader=l.getCacheAge()||0),l.getCacheAge&&!isNaN(d.ageHeader)||(d.ageHeader=0)),r){case g.MANIFEST:case g.LEVEL:this.hls.trigger(k.a.LEVEL_LOADED,{details:d,level:a||0,id:o||0,stats:t,networkDetails:n,deliveryDirectives:u});break;case g.AUDIO_TRACK:this.hls.trigger(k.a.AUDIO_TRACK_LOADED,{details:d,id:o||0,groupId:s||"",stats:t,networkDetails:n,deliveryDirectives:u});break;case g.SUBTITLE_TRACK:this.hls.trigger(k.a.SUBTITLE_TRACK_LOADED,{details:d,id:o||0,groupId:s||"",stats:t,networkDetails:n,deliveryDirectives:u})}}else this.handleManifestParsingError(e,i,"invalid target duration",n)},e}(),S=function(){function e(e){this.hls=void 0,this.loaders={},this.decryptkey=null,this.decrypturl=null,this.hls=e,this._registerListeners()}var t=e.prototype;return t._registerListeners=function(){this.hls.on(k.a.KEY_LOADING,this.onKeyLoading,this)},t._unregisterListeners=function(){this.hls.off(k.a.KEY_LOADING,this.onKeyLoading)},t.destroy=function(){for(var e in this._unregisterListeners(),this.loaders){var t=this.loaders[e];t&&t.destroy()}this.loaders={}},t.onKeyLoading=function(e,t){var i=t.frag,n=i.type,r=this.loaders[n];if(i.decryptdata){var a=i.decryptdata.uri;if(a!==this.decrypturl||null===this.decryptkey){var o=this.hls.config;if(r&&(J.b.warn("abort previous key loader for type:"+n),r.abort()),!a)return void J.b.warn("key uri is falsy");var s=o.loader,l=i.loader=this.loaders[n]=new s(o);this.decrypturl=a,this.decryptkey=null;var d={url:a,frag:i,responseType:"arraybuffer"},u={timeout:o.fragLoadingTimeOut,maxRetry:0,retryDelay:o.fragLoadingRetryDelay,maxRetryDelay:o.fragLoadingMaxRetryTimeout,highWaterMark:0},c={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};l.load(d,u,c)}else this.decryptkey&&(i.decryptdata.key=this.decryptkey,this.hls.trigger(k.a.KEY_LOADED,{frag:i}))}else J.b.warn("Missing decryption data on fragment in onKeyLoading")},t.loadsuccess=function(e,t,i){var n=i.frag;n.decryptdata?(this.decryptkey=n.decryptdata.key=new Uint8Array(e.data),n.loader=null,delete this.loaders[n.type],this.hls.trigger(k.a.KEY_LOADED,{frag:n})):J.b.error("after key load, decryptdata unset")},t.loaderror=function(e,t){var i=t.frag,n=i.loader;n&&n.abort(),delete this.loaders[i.type],this.hls.trigger(k.a.ERROR,{type:b.b.NETWORK_ERROR,details:b.a.KEY_LOAD_ERROR,fatal:!1,frag:i,response:e})},t.loadtimeout=function(e,t){var i=t.frag,n=i.loader;n&&n.abort(),delete this.loaders[i.type],this.hls.trigger(k.a.ERROR,{type:b.b.NETWORK_ERROR,details:b.a.KEY_LOAD_TIMEOUT,fatal:!1,frag:i})},e}();function s(e,t){var i;try{i=new Event("addtrack")}catch(e){(i=document.createEvent("Event")).initEvent("addtrack",!1,!1)}i.track=e,t.dispatchEvent(i)}var A=i(6),T=function(){function e(e){this.hls=void 0,this.id3Track=null,this.media=null,this.hls=e,this._registerListeners()}var t=e.prototype;return t.destroy=function(){this._unregisterListeners()},t._registerListeners=function(){var e=this.hls;e.on(k.a.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(k.a.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(k.a.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.on(k.a.BUFFER_FLUSHING,this.onBufferFlushing,this)},t._unregisterListeners=function(){var e=this.hls;e.off(k.a.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(k.a.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(k.a.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.off(k.a.BUFFER_FLUSHING,this.onBufferFlushing,this)},t.onMediaAttached=function(e,t){this.media=t.media},t.onMediaDetaching=function(){this.id3Track&&(function(e){var t=e.mode;if("disabled"===t&&(e.mode="hidden"),e.cues){for(var i=e.cues.length;i--;)e.removeCue(e.cues[i]);"disabled"===t&&(e.mode=t)}}(this.id3Track),this.id3Track=null,this.media=null)},t.getID3Track=function(e){if(this.media){for(var t=0;t<e.length;t++){var i=e[t];if("metadata"===i.kind&&"id3"===i.label)return s(i,this.media),i}return this.media.addTextTrack("metadata","id3")}},t.onFragParsingMetadata=function(e,t){if(this.media){var i=t.frag,n=t.samples;this.id3Track||(this.id3Track=this.getID3Track(this.media.textTracks),this.id3Track.mode="hidden");for(var r=self.WebKitDataCue||self.VTTCue||self.TextTrackCue,a=0;a<n.length;a++){var o=A.c(n[a].data);if(o){var s=n[a].pts,l=a<n.length-1?n[a+1].pts:i.end;l-s<=0&&(l=s+.25);for(var d=0;d<o.length;d++){var u=o[d];if(!A.e(u)){var c=new r(s,l,"");c.value=u,this.id3Track.addCue(c)}}}}}},t.onBufferFlushing=function(e,t){var i=t.startOffset,n=t.endOffset,r=t.type;if(!r||"audio"===r){var a=this.id3Track;a&&function(e,t,i){var n=e.mode;if("disabled"===n&&(e.mode="hidden"),e.cues&&e.cues.length){for(var r=function(e,t,i){var n=[],r=function(e,t){if(t<e[0].startTime)return 0;var i=e.length-1;if(t>e[i].endTime)return-1;for(var n=0,r=i;n<=r;){var a=Math.floor((r+n)/2);if(t<e[a].startTime)r=a-1;else{if(!(t>e[a].startTime&&n<i))return a;n=a+1}}return e[n].startTime-t<t-e[r].startTime?n:r}(e,t);if(-1<r)for(var a=r,o=e.length;a<o;a++){var s=e[a];if(s.startTime>=t&&s.endTime<=i)n.push(s);else if(s.startTime>i)return n}return n}(e.cues,t,i),a=0;a<r.length;a++)e.removeCue(r[a]);"disabled"===n&&(e.mode=n)}}(a,i,n)}},e}();function d(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var u,L=function(){function e(e){var t=this;this.hls=void 0,this.config=void 0,this.media=null,this.levelDetails=null,this.currentTime=0,this.stallCount=0,this._latency=null,this.timeupdateHandler=function(){return t.timeupdate()},this.hls=e,this.config=e.config,this.registerListeners()}var t=e.prototype;return t.destroy=function(){this.unregisterListeners(),this.onMediaDetaching(),this.levelDetails=null,this.hls=this.timeupdateHandler=null},t.registerListeners=function(){this.hls.on(k.a.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(k.a.MEDIA_DETACHING,this.onMediaDetaching,this),this.hls.on(k.a.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(k.a.LEVEL_UPDATED,this.onLevelUpdated,this),this.hls.on(k.a.ERROR,this.onError,this)},t.unregisterListeners=function(){this.hls.off(k.a.MEDIA_ATTACHED,this.onMediaAttached),this.hls.off(k.a.MEDIA_DETACHING,this.onMediaDetaching),this.hls.off(k.a.MANIFEST_LOADING,this.onManifestLoading),this.hls.off(k.a.LEVEL_UPDATED,this.onLevelUpdated),this.hls.off(k.a.ERROR,this.onError)},t.onMediaAttached=function(e,t){this.media=t.media,this.media.addEventListener("timeupdate",this.timeupdateHandler)},t.onMediaDetaching=function(){this.media&&(this.media.removeEventListener("timeupdate",this.timeupdateHandler),this.media=null)},t.onManifestLoading=function(){this.levelDetails=null,this._latency=null,this.stallCount=0},t.onLevelUpdated=function(e,t){var i=t.details;(this.levelDetails=i).advanced&&this.timeupdate(),!i.live&&this.media&&this.media.removeEventListener("timeupdate",this.timeupdateHandler)},t.onError=function(e,t){t.details===b.a.BUFFER_STALLED_ERROR&&(this.stallCount++,J.b.warn("[playback-rate-controller]: Stall detected, adjusting target latency"))},t.timeupdate=function(){var e=this.media,t=this.levelDetails;if(e&&t){this.currentTime=e.currentTime;var i=this.computeLatency();if(null!==i){this._latency=i;var n=this.config,r=n.lowLatencyMode,a=n.maxLiveSyncPlaybackRate;if(r&&1!==a){var o=this.targetLatency;if(null!==o){var s=i-o,l=s<Math.min(this.maxLatency,o+t.targetduration);if(t.live&&l&&.05<s&&1<this.forwardBufferLength){var d=Math.min(2,Math.max(1,a)),u=Math.round(2/(1+Math.exp(-.75*s-this.edgeStalled))*20)/20;e.playbackRate=Math.min(d,Math.max(1,u))}else 1!==e.playbackRate&&0!==e.playbackRate&&(e.playbackRate=1)}}}}},t.estimateLiveEdge=function(){var e=this.levelDetails;return null===e?null:e.edge+e.age},t.computeLatency=function(){var e=this.estimateLiveEdge();return null===e?null:e-this.currentTime},d(e.prototype,[{key:"latency",get:function(){return this._latency||0}},{key:"maxLatency",get:function(){var e=this.config,t=this.levelDetails;return void 0!==e.liveMaxLatencyDuration?e.liveMaxLatencyDuration:t?e.liveMaxLatencyDurationCount*t.targetduration:0}},{key:"targetLatency",get:function(){var e=this.levelDetails;if(null===e)return null;var t=e.holdBack,i=e.partHoldBack,n=e.targetduration,r=this.config,a=r.liveSyncDuration,o=r.liveSyncDurationCount,s=r.lowLatencyMode,l=this.hls.userConfig,d=s&&i||t;(l.liveSyncDuration||l.liveSyncDurationCount||0===d)&&(d=void 0!==a?a:o*n);var u=n;return d+Math.min(1*this.stallCount,u)}},{key:"liveSyncPosition",get:function(){var e=this.estimateLiveEdge(),t=this.targetLatency,i=this.levelDetails;if(null===e||null===t||null===i)return null;var n=i.edge,r=e-t-this.edgeStalled,a=n-i.totalduration,o=n-(this.config.lowLatencyMode&&i.partTarget||i.targetduration);return Math.min(Math.max(a,r),o)}},{key:"drift",get:function(){var e=this.levelDetails;return null===e?1:e.drift}},{key:"edgeStalled",get:function(){var e=this.levelDetails;if(null===e)return 0;var t=3*(this.config.lowLatencyMode&&e.partTarget||e.targetduration);return Math.max(e.age-t,0)}},{key:"forwardBufferLength",get:function(){var e=this.media,t=this.levelDetails;if(!e||!t)return 0;var i=e.buffered.length;return i?e.buffered.end(i-1):t.edge-this.currentTime}}]),e}();function C(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}!function(e){e.No="",e.Yes="YES",e.v2="v2"}(u=u||{});var x=function(){function e(e,t,i){this.msn=void 0,this.part=void 0,this.skip=void 0,this.msn=e,this.part=t,this.skip=i}return e.prototype.addDirectives=function(e){var t=new self.URL(e);return void 0!==this.msn&&t.searchParams.set("_HLS_msn",this.msn.toString()),void 0!==this.part&&t.searchParams.set("_HLS_part",this.part.toString()),this.skip&&t.searchParams.set("_HLS_skip",this.skip),t.toString()},e}(),P=function(){function e(e){this.attrs=void 0,this.audioCodec=void 0,this.bitrate=void 0,this.codecSet=void 0,this.height=void 0,this.id=void 0,this.name=void 0,this.videoCodec=void 0,this.width=void 0,this.unknownCodecs=void 0,this.audioGroupIds=void 0,this.details=void 0,this.fragmentError=0,this.loadError=0,this.loaded=void 0,this.realBitrate=0,this.textGroupIds=void 0,this.url=void 0,this._urlId=0,this.url=[e.url],this.attrs=e.attrs,this.bitrate=e.bitrate,e.details&&(this.details=e.details),this.id=e.id||0,this.name=e.name,this.width=e.width||0,this.height=e.height||0,this.audioCodec=e.audioCodec,this.videoCodec=e.videoCodec,this.unknownCodecs=e.unknownCodecs,this.codecSet=[e.videoCodec,e.audioCodec].filter(function(e){return e}).join(",").replace(/\.[^.,]+/g,"")}return C(e.prototype,[{key:"maxBitrate",get:function(){return Math.max(this.realBitrate,this.bitrate)}},{key:"uri",get:function(){return this.url[this._urlId]||""}},{key:"urlId",get:function(){return this._urlId},set:function(e){var t=e%this.url.length;this._urlId!==t&&(this.details=void 0,this._urlId=t)}}]),e}();function I(e,t,i){switch(t){case"audio":e.audioGroupIds||(e.audioGroupIds=[]),e.audioGroupIds.push(i);break;case"text":e.textGroupIds||(e.textGroupIds=[]),e.textGroupIds.push(i)}}function O(e){var i={};e.forEach(function(e){var t=e.groupId||"";e.id=i[t]=i[t]||0,i[t]++})}function R(e,t){var i=t.startPTS;if(Object(X.a)(i)){var n,r=0;(n=t.sn>e.sn?(r=i-e.start,e):(r=e.start-i,t)).duration!==r&&(n.duration=r)}else t.sn>e.sn?e.cc===t.cc&&e.minEndPTS?t.start=e.start+(e.minEndPTS-e.start):t.start=e.start+e.duration:t.start=Math.max(e.start-t.duration,0)}function D(e,t,i,n,r,a){n-i<=0&&(J.b.warn("Fragment should have a positive duration",t),n=i+t.duration,a=r+t.duration);var o=i,s=n,l=t.startPTS,d=t.endPTS;if(Object(X.a)(l)){var u=Math.abs(l-i);Object(X.a)(t.deltaPTS)?t.deltaPTS=Math.max(u,t.deltaPTS):t.deltaPTS=u,o=Math.max(i,l),i=Math.min(i,l),r=Math.min(r,t.startDTS),s=Math.min(n,d),n=Math.max(n,d),a=Math.max(a,t.endDTS)}t.duration=n-i;var c=i-t.start;t.appendedPTS=n,t.start=t.startPTS=i,t.maxStartPTS=o,t.startDTS=r,t.endPTS=n,t.minEndPTS=s,t.endDTS=a;var h,f=t.sn;if(!e||f<e.startSN||f>e.endSN)return 0;var p=f-e.startSN,g=e.fragments;for(g[p]=t,h=p;0<h;h--)R(g[h],g[h-1]);for(h=p;h<g.length-1;h++)R(g[h],g[h+1]);return e.fragmentHint&&R(g[g.length-1],e.fragmentHint),e.PTSKnown=e.alignedSliding=!0,c}function M(e,t){var i=t.startSN+t.skippedSegments-e.startSN,n=e.fragments,r=t.fragments;if(!(i<0||i>=n.length)){var a=n[i].start;if(a){for(var o=t.skippedSegments;o<r.length;o++)r[o].start+=a;t.fragmentHint&&(t.fragmentHint.start+=a)}}}var B=function(){function e(e,t){this.hls=void 0,this.timer=-1,this.canLoad=!1,this.retryCount=0,this.log=void 0,this.warn=void 0,this.log=J.b.log.bind(J.b,t+":"),this.warn=J.b.warn.bind(J.b,t+":"),this.hls=e}var t=e.prototype;return t.destroy=function(){this.clearTimer(),this.hls=this.log=this.warn=null},t.onError=function(e,t){t.fatal&&t.type===b.b.NETWORK_ERROR&&this.clearTimer()},t.clearTimer=function(){clearTimeout(this.timer),this.timer=-1},t.startLoad=function(){this.canLoad=!0,this.retryCount=0,this.loadPlaylist()},t.stopLoad=function(){this.canLoad=!1,this.clearTimer()},t.switchParams=function(e,t){var i=null==t?void 0:t.renditionReports;if(i)for(var n=0;n<i.length;n++){var r=i[n],a=""+r.URI;if(a===e.substr(-a.length)){var o=parseInt(r["LAST-MSN"]),s=parseInt(r["LAST-PART"]);if(t&&this.hls.config.lowLatencyMode){var l=Math.min(t.age-t.partTarget,t.targetduration);void 0!==s&&l>t.partTarget&&(s+=1)}if(Object(X.a)(o))return new x(o,Object(X.a)(s)?s:void 0,u.No)}}},t.loadPlaylist=function(e){},t.shouldLoadTrack=function(e){return this.canLoad&&e&&!!e.url&&(!e.details||e.details.live)},t.playlistLoaded=function(e,t,i){var n=this,r=t.details,a=t.stats,o=a.loading.end?Math.max(0,self.performance.now()-a.loading.end):0;if(r.advancedDateTime=Date.now()-o,r.live||null!=i&&i.live){if(r.reloaded(i),i&&this.log("live playlist "+e+" "+(r.advanced?"REFRESHED "+r.lastPartSn+"-"+r.lastPartIndex:"MISSED")),i&&0<r.fragments.length&&function(e,f){f.initSegment&&e.initSegment&&(f.initSegment=e.initSegment),e.fragmentHint&&delete e.fragmentHint.endPTS;var p,g=0;if(function(e,t){for(var i=t.skippedSegments,n=Math.max(e.startSN,t.startSN)-t.startSN,r=(e.fragmentHint?1:0)+(i?t.endSN:Math.min(e.endSN,t.endSN))-t.startSN,a=t.startSN-e.startSN,o=t.fragmentHint?t.fragments.concat(t.fragmentHint):t.fragments,s=e.fragmentHint?e.fragments.concat(e.fragmentHint):e.fragments,l=n;l<=r;l++){var d=s[a+l],u=o[l];i&&!u&&l<i&&(u=t.fragments[l]=d),d&&u&&(h=u,(c=d).relurl&&(g=c.cc-h.cc),Object(X.a)(c.startPTS)&&Object(X.a)(c.endPTS)&&(h.start=h.startPTS=c.startPTS,h.startDTS=c.startDTS,h.appendedPTS=c.appendedPTS,h.maxStartPTS=c.maxStartPTS,h.endPTS=c.endPTS,h.endDTS=c.endDTS,h.minEndPTS=c.minEndPTS,h.duration=c.endPTS-c.startPTS,h.duration&&(p=h),f.PTSKnown=f.alignedSliding=!0),h.elementaryStreams=c.elementaryStreams,h.loader=c.loader,h.stats=c.stats,h.urlId=c.urlId)}var c,h}(e,f),f.skippedSegments&&(f.deltaUpdateFailed=f.fragments.some(function(e){return!e}),f.deltaUpdateFailed)){J.b.warn("[level-helper] Previous playlist missing segments skipped in delta playlist");for(var t=f.skippedSegments;t--;)f.fragments.shift();f.startSN=f.fragments[0].sn,f.startCC=f.fragments[0].cc}var i=f.fragments;if(g){J.b.warn("discontinuity sliding from playlist, take drift into account");for(var n=0;n<i.length;n++)i[n].cc+=g}f.skippedSegments&&(f.initSegment||(f.initSegment=e.initSegment),f.startCC=f.fragments[0].cc),function(e,t){if(e&&t)for(var i=0,n=0,r=e.length;n<=r;n++){var a=e[n],o=t[n+i];a&&o&&a.index===o.index&&a.fragment.sn===o.fragment.sn?(s=a,(l=o).elementaryStreams=s.elementaryStreams,l.stats=s.stats):i--}var s,l}(e.partList,f.partList),p?D(f,p,p.startPTS,p.endPTS,p.startDTS,p.endDTS):M(e,f),i.length&&(f.totalduration=f.edge-i[0].start),f.driftStartTime=e.driftStartTime,f.driftStart=e.driftStart;var r=f.advancedDateTime;if(f.advanced&&r){var a=f.edge;f.driftStart||(f.driftStartTime=r,f.driftStart=a),f.driftEndTime=r,f.driftEnd=a}else f.driftEndTime=e.driftEndTime,f.driftEnd=e.driftEnd,f.advancedDateTime=e.advancedDateTime}(i,r),!this.canLoad||!r.live)return;var s,l=void 0,d=void 0;if(r.canBlockReload&&r.endSN&&r.advanced){var u=this.hls.config.lowLatencyMode,c=r.lastPartSn,h=r.endSN,f=r.lastPartIndex,p=c===h;-1!==f?(l=p?h+1:c,d=p?u?0:f:f+1):l=h+1;var g=r.age,m=g+r.ageHeader,v=Math.min(m-r.partTarget,1.5*r.targetduration);if(0<v){if(i&&v>i.tuneInGoal)this.warn("CDN Tune-in goal increased from: "+i.tuneInGoal+" to: "+v+" with playlist age: "+r.age),v=0;else{var y=Math.floor(v/r.targetduration);l+=y,void 0!==d&&(d+=Math.round(v%r.targetduration/r.partTarget)),this.log("CDN Tune-in age: "+r.ageHeader+"s last advanced "+g.toFixed(2)+"s goal: "+v+" skip sn "+y+" to part "+d)}r.tuneInGoal=v}if(s=this.getDeliveryDirectives(r,t.deliveryDirectives,l,d),u||!p)return void this.loadPlaylist(s)}else s=this.getDeliveryDirectives(r,t.deliveryDirectives,l,d);var b=function(e,t){var i,n=1e3*e.levelTargetDuration,r=n/2,a=e.age,o=0<a&&a<3*n,s=t.loading.end-t.loading.start,l=e.availabilityDelay;if(!1===e.updated)if(o){var d=333*e.misses;i=Math.max(Math.min(r,2*s),d),e.availabilityDelay=(e.availabilityDelay||0)+i}else i=r;else i=o?(l=Math.min(l||n/2,a),(e.availabilityDelay=l)+n-a):n-s;return Math.round(i)}(r,a);void 0!==l&&r.canBlockReload&&(b-=r.partTarget||1),this.log("reload live playlist "+e+" in "+Math.round(b)+" ms"),this.timer=self.setTimeout(function(){return n.loadPlaylist(s)},b)}else this.clearTimer()},t.getDeliveryDirectives=function(e,t,i,n){var r=function(e,t){var i=e.canSkipUntil,n=e.canSkipDateRanges,r=e.endSN;return i&&(void 0!==t?t-r:0)<i?n?u.v2:u.Yes:u.No}(e,i);return null!=t&&t.skip&&e.deltaUpdateFailed&&(i=t.msn,n=t.part,r=u.No),new x(i,n,r)},t.retryLoadingOrFail=function(e){var t,i=this,n=this.hls.config,r=this.retryCount<n.levelLoadingMaxRetry;if(r)if(this.retryCount++,-1<e.details.indexOf("LoadTimeOut")&&null!==(t=e.context)&&void 0!==t&&t.deliveryDirectives)this.warn("retry playlist loading #"+this.retryCount+' after "'+e.details+'"'),this.loadPlaylist();else{var a=Math.min(Math.pow(2,this.retryCount)*n.levelLoadingRetryDelay,n.levelLoadingMaxRetryTimeout);this.timer=self.setTimeout(function(){return i.loadPlaylist()},a),this.warn("retry playlist loading #"+this.retryCount+" in "+a+' ms after "'+e.details+'"')}else this.warn('cannot recover from error "'+e.details+'"'),this.clearTimer(),e.fatal=!0;return r},e}();function F(){return(F=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}function N(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var U,V=/chrome|firefox/.test(navigator.userAgent.toLowerCase()),j=function(l){var e,t;function i(e){var t;return(t=l.call(this,e,"[level-controller]")||this)._levels=[],t._firstLevel=-1,t._startLevel=void 0,t.currentLevelIndex=-1,t.manualLevelIndex=-1,t.onParsedComplete=void 0,t._registerListeners(),t}t=l,(e=i).prototype=Object.create(t.prototype),_(e.prototype.constructor=e,t);var n=i.prototype;return n._registerListeners=function(){var e=this.hls;e.on(k.a.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(k.a.LEVEL_LOADED,this.onLevelLoaded,this),e.on(k.a.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.on(k.a.FRAG_LOADED,this.onFragLoaded,this),e.on(k.a.ERROR,this.onError,this)},n._unregisterListeners=function(){var e=this.hls;e.off(k.a.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(k.a.LEVEL_LOADED,this.onLevelLoaded,this),e.off(k.a.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.off(k.a.FRAG_LOADED,this.onFragLoaded,this),e.off(k.a.ERROR,this.onError,this)},n.destroy=function(){this._unregisterListeners(),this.manualLevelIndex=-1,this._levels.length=0,l.prototype.destroy.call(this)},n.startLoad=function(){this._levels.forEach(function(e){e.loadError=0}),l.prototype.startLoad.call(this)},n.onManifestLoaded=function(e,t){var i,n,r=[],a=[],o=[],s={},l=!1,d=!1,u=!1;if(t.levels.forEach(function(e){var t=e.attrs;l=l||!(!e.width||!e.height),d=d||!!e.videoCodec,u=u||!!e.audioCodec,V&&e.audioCodec&&-1!==e.audioCodec.indexOf("mp4a.40.34")&&(e.audioCodec=void 0),(n=s[e.bitrate])?n.url.push(e.url):(n=new P(e),s[e.bitrate]=n,r.push(n)),t&&(t.AUDIO&&I(n,"audio",t.AUDIO),t.SUBTITLES&&I(n,"text",t.SUBTITLES))}),(l||d)&&u&&(r=r.filter(function(e){var t=e.videoCodec,i=e.width,n=e.height;return!!t||!(!i||!n)})),r=r.filter(function(e){var t=e.audioCodec,i=e.videoCodec;return(!t||p(t,"audio"))&&(!i||p(i,"video"))}),t.audioTracks&&O(a=t.audioTracks.filter(function(e){return!e.audioCodec||p(e.audioCodec,"audio")})),t.subtitles&&O(o=t.subtitles),0<r.length){i=r[0].bitrate,r.sort(function(e,t){return e.bitrate-t.bitrate}),this._levels=r;for(var c=0;c<r.length;c++)if(r[c].bitrate===i){this._firstLevel=c,this.log("manifest loaded, "+r.length+" level(s) found, first bitrate: "+i);break}var h=u&&!d,f={levels:r,audioTracks:a,subtitleTracks:o,firstLevel:this._firstLevel,stats:t.stats,audio:u,video:d,altAudio:!h&&a.some(function(e){return!!e.url})};this.hls.trigger(k.a.MANIFEST_PARSED,f),(this.hls.config.autoStartLoad||this.hls.forceStartLoad)&&this.hls.startLoad(this.hls.config.startPosition)}else this.hls.trigger(k.a.ERROR,{type:b.b.MEDIA_ERROR,details:b.a.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:t.url,reason:"no level with compatible codecs found in manifest"})},n.onError=function(e,t){if(l.prototype.onError.call(this,e,t),!t.fatal){var i=t.context,n=this._levels[this.currentLevelIndex];if(i&&(i.type===g.AUDIO_TRACK&&n.audioGroupIds&&i.groupId===n.audioGroupIds[n.urlId]||i.type===g.SUBTITLE_TRACK&&n.textGroupIds&&i.groupId===n.textGroupIds[n.urlId]))this.redundantFailover(this.currentLevelIndex);else{var r,a=!1,o=!0;switch(t.details){case b.a.FRAG_LOAD_ERROR:case b.a.FRAG_LOAD_TIMEOUT:case b.a.KEY_LOAD_ERROR:case b.a.KEY_LOAD_TIMEOUT:if(t.frag){var s=this._levels[t.frag.level];s?(s.fragmentError++,s.fragmentError>this.hls.config.fragLoadingMaxRetry&&(r=t.frag.level)):r=t.frag.level}break;case b.a.LEVEL_LOAD_ERROR:case b.a.LEVEL_LOAD_TIMEOUT:i&&(i.deliveryDirectives&&(o=!1),r=i.level),a=!0;break;case b.a.REMUX_ALLOC_ERROR:r=t.level,a=!0}void 0!==r&&this.recoverLevel(t,r,a,o)}}},n.recoverLevel=function(e,t,i,n){var r=e.details,a=this._levels[t];if(a.loadError++,i){if(!this.retryLoadingOrFail(e))return void(this.currentLevelIndex=-1);e.levelRetry=!0}if(n){var o=a.url.length;if(1<o&&a.loadError<o)e.levelRetry=!0,this.redundantFailover(t);else if(-1===this.manualLevelIndex){var s=0===t?this._levels.length-1:t-1;this.currentLevelIndex!==s&&0===this._levels[s].loadError&&(this.warn(r+": switch to "+s),e.levelRetry=!0,this.hls.nextAutoLevel=s)}}},n.redundantFailover=function(e){var t=this._levels[e],i=t.url.length;if(1<i){var n=(t.urlId+1)%i;this.warn("Switching to redundant URL-id "+n),this._levels.forEach(function(e){e.urlId=n}),this.level=e}},n.onFragLoaded=function(e,t){var i=t.frag;if(void 0!==i&&i.type===v.MAIN){var n=this._levels[i.level];void 0!==n&&(n.fragmentError=0,n.loadError=0)}},n.onLevelLoaded=function(e,t){var i,n,r=t.level,a=t.details,o=this._levels[r];if(!o)return this.warn("Invalid level index "+r),void(null!==(n=t.deliveryDirectives)&&void 0!==n&&n.skip&&(a.deltaUpdateFailed=!0));r===this.currentLevelIndex?(0===o.fragmentError&&(o.loadError=0,this.retryCount=0),this.playlistLoaded(r,t,o.details)):null!==(i=t.deliveryDirectives)&&void 0!==i&&i.skip&&(a.deltaUpdateFailed=!0)},n.onAudioTrackSwitched=function(e,t){var i=this.hls.levels[this.currentLevelIndex];if(i&&i.audioGroupIds){for(var n=-1,r=this.hls.audioTracks[t.id].groupId,a=0;a<i.audioGroupIds.length;a++)if(i.audioGroupIds[a]===r){n=a;break}n!==i.urlId&&(i.urlId=n,this.startLoad())}},n.loadPlaylist=function(e){var t=this.currentLevelIndex,i=this._levels[t];if(this.canLoad&&i&&0<i.url.length){var n=i.urlId,r=i.url[n];if(e)try{r=e.addDirectives(r)}catch(e){this.warn("Could not construct new URL with HLS Delivery Directives: "+e)}this.log("Attempt loading level index "+t+(e?" at sn "+e.msn+" part "+e.part:"")+" with URL-id "+n+" "+r),this.clearTimer(),this.hls.trigger(k.a.LEVEL_LOADING,{url:r,level:t,id:n,deliveryDirectives:e||null})}},n.removeLevel=function(i,n){var r=function(e,t){return t!==n},e=this._levels.filter(function(e,t){return t!==i||1<e.url.length&&void 0!==n&&(e.url=e.url.filter(r),e.audioGroupIds&&(e.audioGroupIds=e.audioGroupIds.filter(r)),e.textGroupIds&&(e.textGroupIds=e.textGroupIds.filter(r)),!(e.urlId=0))}).map(function(e,t){var i=e.details;return null!=i&&i.fragments&&i.fragments.forEach(function(e){e.level=t}),e});this._levels=e,this.hls.trigger(k.a.LEVELS_UPDATED,{levels:e})},N(i.prototype,[{key:"levels",get:function(){return 0===this._levels.length?null:this._levels}},{key:"level",get:function(){return this.currentLevelIndex},set:function(e){var t,i=this._levels;if(0!==i.length&&(this.currentLevelIndex!==e||null===(t=i[e])||void 0===t||!t.details)){if(e<0||e>=i.length){var n=e<0;if(this.hls.trigger(k.a.ERROR,{type:b.b.OTHER_ERROR,details:b.a.LEVEL_SWITCH_ERROR,level:e,fatal:n,reason:"invalid level idx"}),n)return;e=Math.min(e,i.length-1)}this.clearTimer();var r=this.currentLevelIndex,a=i[r],o=i[e];this.log("switching to level "+e+" from "+r),this.currentLevelIndex=e;var s=F({},o,{level:e,maxBitrate:o.maxBitrate,uri:o.uri,urlId:o.urlId});delete s._urlId,this.hls.trigger(k.a.LEVEL_SWITCHING,s);var l=o.details;if(!l||l.live){var d=this.switchParams(o.uri,null==a?void 0:a.details);this.loadPlaylist(d)}}}},{key:"manualLevel",get:function(){return this.manualLevelIndex},set:function(e){this.manualLevelIndex=e,void 0===this._startLevel&&(this._startLevel=e),-1!==e&&(this.level=e)}},{key:"firstLevel",get:function(){return this._firstLevel},set:function(e){this._firstLevel=e}},{key:"startLevel",get:function(){if(void 0!==this._startLevel)return this._startLevel;var e=this.hls.config.startLevel;return void 0!==e?e:this._firstLevel},set:function(e){this._startLevel=e}},{key:"nextLoadLevel",get:function(){return-1!==this.manualLevelIndex?this.manualLevelIndex:this.hls.nextAutoLevel},set:function(e){this.level=e,-1===this.manualLevelIndex&&(this.hls.nextAutoLevel=e)}}]),i}(B);!function(e){e.NOT_LOADED="NOT_LOADED",e.BACKTRACKED="BACKTRACKED",e.APPENDING="APPENDING",e.PARTIAL="PARTIAL",e.OK="OK"}(U=U||{});var H=function(){function e(e){this.activeFragment=null,this.activeParts=null,this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.bufferPadding=.2,this.hls=void 0,this.hls=e,this._registerListeners()}var t=e.prototype;return t._registerListeners=function(){var e=this.hls;e.on(k.a.BUFFER_APPENDED,this.onBufferAppended,this),e.on(k.a.FRAG_BUFFERED,this.onFragBuffered,this),e.on(k.a.FRAG_LOADED,this.onFragLoaded,this)},t._unregisterListeners=function(){var e=this.hls;e.off(k.a.BUFFER_APPENDED,this.onBufferAppended,this),e.off(k.a.FRAG_BUFFERED,this.onFragBuffered,this),e.off(k.a.FRAG_LOADED,this.onFragLoaded,this)},t.destroy=function(){this._unregisterListeners(),this.fragments=this.timeRanges=null},t.getAppendedFrag=function(e,t){if(t===v.MAIN){var i=this.activeFragment,n=this.activeParts;if(!i)return null;if(n)for(var r=n.length;r--;){var a=n[r],o=a?a.end:i.appendedPTS;if(a.start<=e&&void 0!==o&&e<=o)return 9<r&&(this.activeParts=n.slice(r-9)),a}else if(i.start<=e&&void 0!==i.appendedPTS&&e<=i.appendedPTS)return i}return this.getBufferedFrag(e,t)},t.getBufferedFrag=function(e,t){for(var i=this.fragments,n=Object.keys(i),r=n.length;r--;){var a=i[n[r]];if((null==a?void 0:a.body.type)===t&&a.buffered){var o=a.body;if(o.start<=e&&e<=o.end)return o}}return null},t.detectEvictedFragments=function(n,r,a){var o=this;Object.keys(this.fragments).forEach(function(e){var i=o.fragments[e];if(i)if(i.buffered){var t=i.range[n];t&&t.time.some(function(e){var t=!o.isTimeBuffered(e.startPTS,e.endPTS,r);return t&&o.removeFragment(i.body),t})}else i.body.type===a&&o.removeFragment(i.body)})},t.detectPartialFragments=function(e){var r=this,a=this.timeRanges,o=e.frag,s=e.part;if(a&&"initSegment"!==o.sn){var t=z(o),l=this.fragments[t];l&&(Object.keys(a).forEach(function(e){var t=o.elementaryStreams[e];if(t){var i=a[e],n=null!==s||!0===t.partial;l.range[e]=r.getBufferedTimes(o,s,n,i)}}),l.backtrack=l.loaded=null,Object.keys(l.range).length?l.buffered=!0:this.removeFragment(l.body))}},t.getBufferedTimes=function(e,t,i,n){for(var r={time:[],partial:i},a=t?t.start:e.start,o=t?t.end:e.end,s=e.minEndPTS||o,l=e.maxStartPTS||a,d=0;d<n.length;d++){var u=n.start(d)-this.bufferPadding,c=n.end(d)+this.bufferPadding;if(u<=l&&s<=c){r.time.push({startPTS:Math.max(a,n.start(d)),endPTS:Math.min(o,n.end(d))});break}if(a<c&&u<o)r.partial=!0,r.time.push({startPTS:Math.max(a,n.start(d)),endPTS:Math.min(o,n.end(d))});else if(o<=u)break}return r},t.getPartialFragment=function(i){var n,r,a,o=null,s=0,l=this.bufferPadding,d=this.fragments;return Object.keys(d).forEach(function(e){var t=d[e];t&&G(t)&&(r=t.body.start-l,a=t.body.end+l,r<=i&&i<=a&&(n=Math.min(i-r,a-i),s<=n&&(o=t.body,s=n)))}),o},t.getState=function(e){var t=z(e),i=this.fragments[t];return i?i.buffered?G(i)?U.PARTIAL:U.OK:i.backtrack?U.BACKTRACKED:U.APPENDING:U.NOT_LOADED},t.backtrack=function(e,t){var i=z(e),n=this.fragments[i];if(!n||n.backtrack)return null;var r=n.backtrack=t||n.loaded;return n.loaded=null,r},t.getBacktrackData=function(e){var t=z(e),i=this.fragments[t];if(i){var n,r=i.backtrack;if(null!=r&&null!==(n=r.payload)&&void 0!==n&&n.byteLength)return r;this.removeFragment(e)}return null},t.isTimeBuffered=function(e,t,i){for(var n,r,a=0;a<i.length;a++){if(n=i.start(a)-this.bufferPadding,r=i.end(a)+this.bufferPadding,n<=e&&t<=r)return!0;if(t<=n)return!1}return!1},t.onFragLoaded=function(e,t){var i=t.frag,n=t.part;if("initSegment"!==i.sn&&!i.bitrateTest&&!n){var r=z(i);this.fragments[r]={body:i,loaded:t,backtrack:null,buffered:!1,range:Object.create(null)}}},t.onBufferAppended=function(e,t){var n=this,r=t.frag,a=t.part,o=t.timeRanges;if(r.type===v.MAIN)if(this.activeFragment=r,a){var i=this.activeParts;i||(this.activeParts=i=[]),i.push(a)}else this.activeParts=null;this.timeRanges=o,Object.keys(o).forEach(function(e){var t=o[e];if(n.detectEvictedFragments(e,t),!a)for(var i=0;i<t.length;i++)r.appendedPTS=Math.max(t.end(i),r.appendedPTS||0)})},t.onFragBuffered=function(e,t){this.detectPartialFragments(t)},t.hasFragment=function(e){var t=z(e);return!!this.fragments[t]},t.removeFragment=function(e){var t=z(e);e.stats.loaded=0,e.clearElementaryStreamInfo(),delete this.fragments[t]},t.removeAllFragments=function(){this.fragments=Object.create(null),this.activeFragment=null,this.activeParts=null},e}();function G(e){var t,i;return e.buffered&&((null===(t=e.range.video)||void 0===t?void 0:t.partial)||(null===(i=e.range.audio)||void 0===i?void 0:i.partial))}function z(e){return e.type+"_"+e.level+"_"+e.urlId+"_"+e.sn}var W=function(){function e(){this._boundTick=void 0,this._tickTimer=null,this._tickInterval=null,this._tickCallCount=0,this._boundTick=this.tick.bind(this)}var t=e.prototype;return t.destroy=function(){this.onHandlerDestroying(),this.onHandlerDestroyed()},t.onHandlerDestroying=function(){this.clearNextTick(),this.clearInterval()},t.onHandlerDestroyed=function(){},t.hasInterval=function(){return!!this._tickInterval},t.hasNextTick=function(){return!!this._tickTimer},t.setInterval=function(e){return!this._tickInterval&&(this._tickInterval=self.setInterval(this._boundTick,e),!0)},t.clearInterval=function(){return!(!this._tickInterval||(self.clearInterval(this._tickInterval),this._tickInterval=null))},t.clearNextTick=function(){return!(!this._tickTimer||(self.clearTimeout(this._tickTimer),this._tickTimer=null))},t.tick=function(){this._tickCallCount++,1===this._tickCallCount&&(this.doTick(),1<this._tickCallCount&&this.tickImmediate(),this._tickCallCount=0)},t.tickImmediate=function(){this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)},t.doTick=function(){},e}(),Q={length:0,start:function(){return 0},end:function(){return 0}},q=function(){function o(){}return o.isBuffered=function(e,t){try{if(e)for(var i=o.getBuffered(e),n=0;n<i.length;n++)if(t>=i.start(n)&&t<=i.end(n))return!0}catch(e){}return!1},o.bufferInfo=function(e,t,i){try{if(e){var n,r=o.getBuffered(e),a=[];for(n=0;n<r.length;n++)a.push({start:r.start(n),end:r.end(n)});return this.bufferedInfo(a,t,i)}}catch(e){}return{len:0,start:t,end:t,nextStart:void 0}},o.bufferedInfo=function(e,t,i){e.sort(function(e,t){var i=e.start-t.start;return i||t.end-e.end});var n=[];if(i)for(var r=0;r<e.length;r++){var a=n.length;if(a){var o=n[a-1].end;e[r].start-o<i?e[r].end>o&&(n[a-1].end=e[r].end):n.push(e[r])}else n.push(e[r])}else n=e;for(var s,l=0,d=t,u=t,c=0;c<n.length;c++){var h=n[c].start,f=n[c].end;if(h<=t+i&&t<f)d=h,l=(u=f)-t;else if(t+i<h){s=h;break}}return{len:l,start:d||0,end:u||0,nextStart:s}},o.getBuffered=function(e){try{return e.buffered}catch(e){return J.b.log("failed to get media.buffered",e),Q}},o}(),Y=function(e,t,i,n,r,a){void 0===n&&(n=0),void 0===r&&(r=-1),void 0===a&&(a=!1),this.level=void 0,this.sn=void 0,this.part=void 0,this.id=void 0,this.size=void 0,this.partial=void 0,this.transmuxing={start:0,executeStart:0,executeEnd:0,end:0},this.buffering={audio:{start:0,executeStart:0,executeEnd:0,end:0},video:{start:0,executeStart:0,executeEnd:0,end:0},audiovideo:{start:0,executeStart:0,executeEnd:0,end:0}},this.level=e,this.sn=t,this.id=i,this.size=n,this.part=r,this.partial=a};function oe(e,t){if(e){var i=e.start+t;e.start=e.startPTS=i,e.endPTS=i+e.duration}}function se(e,t){for(var i=t.fragments,n=0,r=i.length;n<r;n++)oe(i[n],e);t.fragmentHint&&oe(t.fragmentHint,e),t.alignedSliding=!0}function le(e,t,i){t&&(function(e,t,i){if(function(e,t,i){return!(!t.details||!(i.endCC>i.startCC||e&&e.cc<i.startCC))}(e,i,t)){var n=function(e,t){var i=e.fragments,n=t.fragments;if(n.length&&i.length){var r=function(e,t){for(var i=null,n=0,r=e.length;n<r;n++){var a=e[n];if(a&&a.cc===t){i=a;break}}return i}(i,n[0].cc);if(r&&(!r||r.startPTS))return r;J.b.log("No frag in previous level to align on")}else J.b.log("No fragments to align")}(i.details,t);n&&Object(X.a)(n.start)&&(J.b.log("Adjusting PTS using last level due to CC increase within current level "+t.url),se(n.start,t))}}(e,i,t),!i.alignedSliding&&t.details&&function(e,t){if(t.fragments.length&&e.hasProgramDateTime&&t.hasProgramDateTime){var i=t.fragments[0].programDateTime,n=e.fragments[0].programDateTime,r=(n-i)/1e3+t.fragments[0].start;r&&Object(X.a)(r)&&(J.b.log("Adjusting PTS using programDateTime delta "+(n-i)+"ms, sliding:"+r.toFixed(3)+" "+e.url+" "),se(r,e))}}(i,t.details),i.alignedSliding||!t.details||i.skippedSegments||M(t.details,i))}var de={search:function(e,t){for(var i=0,n=e.length-1,r=null,a=null;i<=n;){var o=t(a=e[r=(i+n)/2|0]);if(0<o)i=r+1;else{if(!(o<0))return a;n=r-1}}return null}};function ue(e,t,i){void 0===e&&(e=0),void 0===t&&(t=0);var n=Math.min(t,i.duration+(i.deltaPTS?i.deltaPTS:0));return i.start+i.duration-n<=e?1:i.start-n>e&&i.start?-1:0}function ce(e){var n="function"==typeof Map?new Map:void 0;return(ce=function(e){if(null===e||(t=e,-1===Function.toString.call(t).indexOf("[native code]")))return e;var t;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(e))return n.get(e);n.set(e,i)}function i(){return he(e,arguments,pe(this).constructor)}return i.prototype=Object.create(e.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),fe(i,e)})(e)}function he(e,t,i){return(he=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,i){var n=[null];n.push.apply(n,t);var r=new(Function.bind.apply(e,n));return i&&fe(r,i.prototype),r}).apply(null,arguments)}function fe(e,t){return(fe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function pe(e){return(pe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ge=Math.pow(2,17),me=function(){function e(e){this.config=void 0,this.loader=null,this.partLoadTimeout=-1,this.config=e}var t=e.prototype;return t.destroy=function(){this.loader&&(this.loader.destroy(),this.loader=null)},t.abort=function(){this.loader&&this.loader.abort()},t.load=function(o,s){var l=this,e=o.url;if(!e)return Promise.reject(new ye({type:b.b.NETWORK_ERROR,details:b.a.FRAG_LOAD_ERROR,fatal:!1,frag:o,networkDetails:null},"Fragment does not have a "+(e?"part list":"url")));this.abort();var i=this.config,d=i.fLoader,u=i.loader;return new Promise(function(r,n){l.loader&&l.loader.destroy();var a=l.loader=o.loader=d?new d(i):new u(i),e=ve(o),t={timeout:i.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:i.fragLoadingMaxRetryTimeout,highWaterMark:ge};o.stats=a.stats,a.load(e,t,{onSuccess:function(e,t,i,n){l.resetLoader(o,a),r({frag:o,part:null,payload:e.data,networkDetails:n})},onError:function(e,t,i){l.resetLoader(o,a),n(new ye({type:b.b.NETWORK_ERROR,details:b.a.FRAG_LOAD_ERROR,fatal:!1,frag:o,response:e,networkDetails:i}))},onAbort:function(e,t,i){l.resetLoader(o,a),n(new ye({type:b.b.NETWORK_ERROR,details:b.a.INTERNAL_ABORTED,fatal:!1,frag:o,networkDetails:i}))},onTimeout:function(e,t,i){l.resetLoader(o,a),n(new ye({type:b.b.NETWORK_ERROR,details:b.a.FRAG_LOAD_TIMEOUT,fatal:!1,frag:o,networkDetails:i}))},onProgress:function(e,t,i,n){s&&s({frag:o,part:null,payload:i,networkDetails:n})}})})},t.loadPart=function(s,l,d){var u=this;this.abort();var i=this.config,r=i.fLoader,c=i.loader;return new Promise(function(a,n){u.loader&&u.loader.destroy();var o=u.loader=s.loader=r?new r(i):new c(i),e=ve(s,l),t={timeout:i.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:i.fragLoadingMaxRetryTimeout,highWaterMark:ge};l.stats=o.stats,o.load(e,t,{onSuccess:function(e,t,i,n){u.resetLoader(s,o),u.updateStatsFromPart(s,l);var r={frag:s,part:l,payload:e.data,networkDetails:n};d(r),a(r)},onError:function(e,t,i){u.resetLoader(s,o),n(new ye({type:b.b.NETWORK_ERROR,details:b.a.FRAG_LOAD_ERROR,fatal:!1,frag:s,part:l,response:e,networkDetails:i}))},onAbort:function(e,t,i){s.stats.aborted=l.stats.aborted,u.resetLoader(s,o),n(new ye({type:b.b.NETWORK_ERROR,details:b.a.INTERNAL_ABORTED,fatal:!1,frag:s,part:l,networkDetails:i}))},onTimeout:function(e,t,i){u.resetLoader(s,o),n(new ye({type:b.b.NETWORK_ERROR,details:b.a.FRAG_LOAD_TIMEOUT,fatal:!1,frag:s,part:l,networkDetails:i}))}})})},t.updateStatsFromPart=function(e,t){var i=e.stats,n=t.stats,r=n.total;if(i.loaded+=n.loaded,r){var a=Math.round(e.duration/t.duration),o=Math.min(Math.round(i.loaded/r),a),s=(a-o)*Math.round(i.loaded/o);i.total=i.loaded+s}else i.total=Math.max(i.loaded,i.total);var l=i.loading,d=n.loading;l.start?l.first+=d.first-d.start:(l.start=d.start,l.first=d.first),l.end=d.end},t.resetLoader=function(e,t){e.loader=null,this.loader===t&&(self.clearTimeout(this.partLoadTimeout),this.loader=null),t.destroy()},e}();function ve(e,t){void 0===t&&(t=null);var i=t||e,n={frag:e,part:t,responseType:"arraybuffer",url:i.url,rangeStart:0,rangeEnd:0},r=i.byteRangeStartOffset,a=i.byteRangeEndOffset;return Object(X.a)(r)&&Object(X.a)(a)&&(n.rangeStart=r,n.rangeEnd=a),n}var ye=function(a){var e,t;function i(e){for(var t,i=arguments.length,n=new Array(1<i?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];return(t=a.call.apply(a,[this].concat(n))||this).data=void 0,t.data=e,t}return t=a,(e=i).prototype=Object.create(t.prototype),fe(e.prototype.constructor=e,t),i}(ce(Error)),be=i(13),we={toString:function(e){for(var t="",i=e.length,n=0;n<i;n++)t+="["+e.start(n).toFixed(3)+","+e.end(n).toFixed(3)+"]";return t}};function Ee(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Se(e,t){return(Se=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ae="STOPPED",Te="IDLE",Le="KEY_LOADING",Ce="FRAG_LOADING",ke="FRAG_LOADING_WAITING_RETRY",xe="PARSING",Pe="PARSED",Ie="BACKTRACKING",Oe="ENDED",Re="ERROR",De="WAITING_LEVEL",Me=function(r){var e,t;function i(e,t,i){var n;return(n=r.call(this)||this).hls=void 0,n.fragPrevious=null,n.fragCurrent=null,n.fragmentTracker=void 0,n.transmuxer=null,n._state=Ae,n.media=void 0,n.mediaBuffer=void 0,n.config=void 0,n.bitrateTest=!1,n.lastCurrentTime=0,n.nextLoadPosition=0,n.startPosition=0,n.loadedmetadata=!1,n.fragLoadError=0,n.retryDate=0,n.levels=null,n.fragmentLoader=void 0,n.levelLastLoaded=null,n.startFragRequested=!1,n.decrypter=void 0,n.initPTS=[],n.onvseeking=null,n.onvended=null,n.logPrefix="",n.log=void 0,n.warn=void 0,n.logPrefix=i,n.log=J.b.log.bind(J.b,i+":"),n.warn=J.b.warn.bind(J.b,i+":"),n.hls=e,n.fragmentLoader=new me(e.config),n.fragmentTracker=t,n.config=e.config,n.decrypter=new be.a(e,e.config),e.on(k.a.KEY_LOADED,n.onKeyLoaded,function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(n)),n}t=r,(e=i).prototype=Object.create(t.prototype),Se(e.prototype.constructor=e,t);var n=i.prototype;return n.doTick=function(){this.onTickEnd()},n.onTickEnd=function(){},n.startLoad=function(e){},n.stopLoad=function(){this.fragmentLoader.abort();var e=this.fragCurrent;e&&this.fragmentTracker.removeFragment(e),this.resetTransmuxer(),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=Ae},n._streamEnded=function(e,t){var i=this.fragCurrent,n=this.fragmentTracker;if(t.live||!i||i.sn!==t.endSN||e.nextStart)return!1;var r=n.getState(i);return r===U.PARTIAL||r===U.OK},n.onMediaAttached=function(e,t){var i=this.media=this.mediaBuffer=t.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),i.addEventListener("seeking",this.onvseeking),i.addEventListener("ended",this.onvended);var n=this.config;this.levels&&n.autoStartLoad&&this.state===Ae&&this.startLoad(n.startPosition)},n.onMediaDetaching=function(){var e=this.media;null!=e&&e.ended&&(this.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),e&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvended=null),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()},n.onMediaSeeking=function(){var e=this.config,t=this.fragCurrent,i=this.media,n=this.mediaBuffer,r=this.state,a=i?i.currentTime:0,o=q.bufferInfo(n||i,a,e.maxBufferHole);if(this.log("media seeking to "+(Object(X.a)(a)?a.toFixed(3):a)+", state: "+r),r===Oe)this.resetLoadingState();else if(t&&!o.len){var s=e.maxFragLookUpTolerance,l=t.start-s,d=a>t.start+t.duration+s;(a<l||d)&&(d&&t.loader&&(this.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),t.loader.abort()),this.resetLoadingState())}i&&(this.lastCurrentTime=a),this.loadedmetadata||o.len||(this.nextLoadPosition=this.startPosition=a),this.tickImmediate()},n.onMediaEnded=function(){this.startPosition=this.lastCurrentTime=0},n.onKeyLoaded=function(e,t){if(this.state===Le&&t.frag===this.fragCurrent&&this.levels){this.state=Te;var i=this.levels[t.frag.level].details;i&&this.loadFragment(t.frag,i,t.frag.start)}},n.onHandlerDestroying=function(){this.stopLoad(),r.prototype.onHandlerDestroying.call(this)},n.onHandlerDestroyed=function(){this.state=Ae,this.hls.off(k.a.KEY_LOADED,this.onKeyLoaded,this),this.fragmentLoader&&this.fragmentLoader.destroy(),this.decrypter&&this.decrypter.destroy(),this.hls=this.log=this.warn=this.decrypter=this.fragmentLoader=this.fragmentTracker=null,r.prototype.onHandlerDestroyed.call(this)},n.loadKey=function(e,t){this.log("Loading key for "+e.sn+" of ["+t.startSN+"-"+t.endSN+"], "+("[stream-controller]"===this.logPrefix?"level":"track")+" "+e.level),this.state=Le,this.fragCurrent=e,this.hls.trigger(k.a.KEY_LOADING,{frag:e})},n.loadFragment=function(e,t,i){this._loadFragForPlayback(e,t,i)},n._loadFragForPlayback=function(i,e,t){var n=this;this._doFragLoad(i,e,t,function(e){if(n.fragContextChanged(i))return n.warn("Fragment "+i.sn+(e.part?" p: "+e.part.index:"")+" of level "+i.level+" was dropped during download."),void n.fragmentTracker.removeFragment(i);i.stats.chunkCount++,n._handleFragmentLoadProgress(e)}).then(function(e){if(e){n.fragLoadError=0;var t=n.state;if(!n.fragContextChanged(i))return"payload"in e&&(n.log("Loaded fragment "+i.sn+" of level "+i.level),n.hls.trigger(k.a.FRAG_LOADED,e),n.state===Ie)?(n.fragmentTracker.backtrack(i,e),void n.resetFragmentLoading(i)):void n._handleFragmentLoadComplete(e);t!==Ce&&t!==Ie&&(n.fragCurrent||t!==xe)||(n.fragmentTracker.removeFragment(i),n.state=Te)}}).catch(function(e){n.warn(e),n.resetFragmentLoading(i)})},n.flushMainBuffer=function(e,t,i){if(void 0===i&&(i=null),e-t){var n={startOffset:e,endOffset:t,type:i};this.fragLoadError=0,this.hls.trigger(k.a.BUFFER_FLUSHING,n)}},n._loadInitSegment=function(o){var s=this;this._doFragLoad(o).then(function(e){if(!e||s.fragContextChanged(o)||!s.levels)throw new Error("init load aborted");return e}).then(function(i){var n=s.hls,e=i.payload,t=o.decryptdata;if(e&&0<e.byteLength&&t&&t.key&&t.iv&&"AES-128"===t.method){var r=self.performance.now();return s.decrypter.webCryptoDecrypt(new Uint8Array(e),t.key.buffer,t.iv.buffer).then(function(e){var t=self.performance.now();return n.trigger(k.a.FRAG_DECRYPTED,{frag:o,payload:e,stats:{tstart:r,tdecrypt:t}}),i.payload=e,i})}return i}).then(function(e){var t=s.fragCurrent,i=s.hls,n=s.levels;if(!n)throw new Error("init load aborted, missing levels");var r=n[o.level].details.initSegment,a=o.stats;s.state=Te,s.fragLoadError=0,r.data=new Uint8Array(e.payload),a.parsing.start=a.buffering.start=self.performance.now(),a.parsing.end=a.buffering.end=self.performance.now(),e.frag===t&&i.trigger(k.a.FRAG_BUFFERED,{stats:a,frag:t,part:null,id:o.type}),s.tick()}).catch(function(e){s.warn(e),s.resetFragmentLoading(o)})},n.fragContextChanged=function(e){var t=this.fragCurrent;return!e||!t||e.level!==t.level||e.sn!==t.sn||e.urlId!==t.urlId},n.fragBufferedComplete=function(e,t){var i=this.mediaBuffer?this.mediaBuffer:this.media;this.log("Buffered "+e.type+" sn: "+e.sn+(t?" part: "+t.index:"")+" of "+("[stream-controller]"===this.logPrefix?"level":"track")+" "+e.level+" "+we.toString(q.getBuffered(i))),this.state=Te,this.tick()},n._handleFragmentLoadComplete=function(e){var t=this.transmuxer;if(t){var i=e.frag,n=e.part,r=e.partsLoaded,a=!r||0===r.length||r.some(function(e){return!e}),o=new Y(i.level,i.sn,i.stats.chunkCount+1,0,n?n.index:-1,!a);t.flush(o)}},n._handleFragmentLoadProgress=function(e){},n._doFragLoad=function(e,t,i,n){var r=this;if(void 0===i&&(i=null),!this.levels)throw new Error("frag load aborted, missing levels");if(i=Math.max(e.start,i||0),this.config.lowLatencyMode&&t){var a=t.partList;if(a&&n){i>e.end&&t.fragmentHint&&(e=t.fragmentHint);var o=this.getNextPart(a,e,i);if(-1<o){var s=a[o];return this.log("Loading part sn: "+e.sn+" p: "+s.index+" cc: "+e.cc+" of playlist ["+t.startSN+"-"+t.endSN+"] parts [0-"+o+"-"+(a.length-1)+"] "+("[stream-controller]"===this.logPrefix?"level":"track")+": "+e.level+", target: "+parseFloat(i.toFixed(3))),this.nextLoadPosition=s.start+s.duration,this.state=Ce,this.hls.trigger(k.a.FRAG_LOADING,{frag:e,part:a[o],targetBufferTime:i}),this.doFragPartsLoad(e,a,o,n).catch(function(e){return r.handleFragLoadError(e)})}if(!e.url||this.loadedEndOfParts(a,i))return Promise.resolve(null)}}return this.log("Loading fragment "+e.sn+" cc: "+e.cc+" "+(t?"of ["+t.startSN+"-"+t.endSN+"] ":"")+("[stream-controller]"===this.logPrefix?"level":"track")+": "+e.level+", target: "+parseFloat(i.toFixed(3))),Object(X.a)(e.sn)&&!this.bitrateTest&&(this.nextLoadPosition=e.start+e.duration),this.state=Ce,this.hls.trigger(k.a.FRAG_LOADING,{frag:e,targetBufferTime:i}),this.fragmentLoader.load(e,n).catch(function(e){return r.handleFragLoadError(e)})},n.doFragPartsLoad=function(l,d,t,i){var u=this;return new Promise(function(o,e){var s=[];!function n(r){var a=d[r];u.fragmentLoader.loadPart(l,a,i).then(function(e){var t=(s[a.index]=e).part;u.hls.trigger(k.a.FRAG_LOADED,e);var i=d[r+1];if(!i||i.fragment!==l)return o({frag:l,part:t,partsLoaded:s});n(r+1)}).catch(e)}(t)})},n.handleFragLoadError=function(e){var t=e.data;return t&&t.details===b.a.INTERNAL_ABORTED?this.handleFragLoadAborted(t.frag,t.part):this.hls.trigger(k.a.ERROR,t),null},n._handleTransmuxerFlush=function(e){var t=this.getCurrentContext(e);if(t&&this.state===xe){var i=t.frag,n=t.part,r=t.level,a=self.performance.now();i.stats.parsing.end=a,n&&(n.stats.parsing.end=a),this.updateLevelTiming(i,n,r,e.partial)}else this.fragCurrent||(this.state=Te)},n.getCurrentContext=function(e){var t=this.levels,i=e.level,n=e.sn,r=e.part;if(!t||!t[i])return this.warn("Levels object was unset while buffering fragment "+n+" of level "+i+". The current chunk will not be buffered."),null;var a=t[i],o=-1<r?function(e,t,i){if(!e||!e.details)return null;var n=e.details.partList;if(n)for(var r=n.length;r--;){var a=n[r];if(a.index===i&&a.fragment.sn===t)return a}return null}(a,n,r):null,s=o?o.fragment:function(e,t){if(!e||!e.details)return null;var i=e.details,n=i.fragments[t-i.startSN];return n||((n=i.fragmentHint)&&n.sn===t?n:null)}(a,n);return s?{frag:s,part:o,level:a}:null},n.bufferFragmentData=function(e,t,i,n){if(e&&this.state===xe){var r=e.data1,a=e.data2,o=r;if(r&&a&&(o=Object(l.a)(r,a)),o&&o.length){var s={type:e.type,frag:t,part:i,chunkMeta:n,parent:t.type,data:o};this.hls.trigger(k.a.BUFFER_APPENDING,s),e.dropped&&e.independent&&!i&&this.flushBufferGap(t)}}},n.flushBufferGap=function(e){var t=this.media;if(t)if(q.isBuffered(t,t.currentTime)){var i=t.currentTime,n=q.bufferInfo(t,i,0),r=e.duration,a=Math.min(2*this.config.maxFragLookUpTolerance,.25*r),o=Math.max(Math.min(e.start-a,n.end-a),i+a);e.start-o>a&&this.flushMainBuffer(o,e.start)}else this.flushMainBuffer(0,e.start)},n.reduceMaxBufferLength=function(e){var t=this.config,i=e||t.maxBufferLength;return t.maxMaxBufferLength>=i&&(t.maxMaxBufferLength/=2,this.warn("Reduce max buffer length to "+t.maxMaxBufferLength+"s"),!0)},n.getNextFragment=function(e,t){var i=t.fragments,n=i.length;if(!n)return null;var r,a=this.config,o=i[0].start;if(!t.initSegment||t.initSegment.data||this.bitrateTest)if(t.live){var s=a.initialLiveManifestSize;if(n<s)return this.warn("Not enough fragments to start playback (have: "+n+", need: "+s+")"),null;t.PTSKnown||this.startFragRequested||-1!==this.startPosition||(r=this.getInitialLiveFragment(t,i),this.startPosition=r?this.hls.liveSyncPosition||r.start:e)}else e<=o&&(r=i[0]);else r=t.initSegment;if(!r){var l=a.lowLatencyMode?t.partEnd:t.fragmentEnd;r=this.getFragmentAtPosition(e,l,t)}return r},n.getNextPart=function(e,t,i){for(var n=-1,r=!1,a=!0,o=0,s=e.length;o<s;o++){var l=e[o];if(a=a&&!l.independent,-1<n&&i<l.start)break;var d=l.loaded;!d&&(r||l.independent||a)&&l.fragment===t&&(n=o),r=d}return n},n.loadedEndOfParts=function(e,t){var i=e[e.length-1];return i&&t>i.start&&i.loaded},n.getInitialLiveFragment=function(e,t){var i=this.fragPrevious,n=null;if(i){if(e.hasProgramDateTime&&(this.log("Live playlist, switching playlist, load frag with same PDT: "+i.programDateTime),n=function(e,t,i){if(null===t||!Array.isArray(e)||!e.length||!Object(X.a)(t))return null;if(t<(e[0].programDateTime||0))return null;if(t>=(e[e.length-1].endProgramDateTime||0))return null;i=i||0;for(var n=0;n<e.length;++n){var r=e[n];if(a=t,o=i,s=r,l=1e3*Math.min(o,s.duration+(s.deltaPTS?s.deltaPTS:0)),(s.endProgramDateTime||0)-l>a)return r}var a,o,s,l;return null}(t,i.endProgramDateTime,this.config.maxFragLookUpTolerance)),!n){var r=i.sn+1;if(r>=e.startSN&&r<=e.endSN){var a=t[r-e.startSN];i.cc===a.cc&&(n=a,this.log("Live playlist, switching playlist, load frag with next SN: "+n.sn))}n||(n=function(e,t){return de.search(e,function(e){return e.cc<t?1:e.cc>t?-1:0})}(t,i.cc))&&this.log("Live playlist, switching playlist, load frag with same CC: "+n.sn)}}else{var o=this.hls.liveSyncPosition;null!==o&&(n=this.getFragmentAtPosition(o,this.bitrateTest?e.fragmentEnd:e.edge,e))}return n},n.getFragmentAtPosition=function(e,t,i){var n,r=this.config,a=this.fragPrevious,o=i.fragments,s=i.endSN,l=i.fragmentHint,d=r.maxFragLookUpTolerance,u=!!(r.lowLatencyMode&&i.partList&&l);if(u&&l&&!this.bitrateTest&&(o=o.concat(l),s=l.sn),n=e<t?function(e,t,i,n){void 0===i&&(i=0),void 0===n&&(n=0);var r=null;if(e?r=t[e.sn-t[0].sn+1]:0===i&&0===t[0].start&&(r=t[0]),r&&0===ue(i,n,r))return r;var a=de.search(t,ue.bind(null,i,n));return a||r}(a,o,e,t-d<e?0:d):o[o.length-1]){var c=n.sn-i.startSN,h=a&&n.level===a.level,f=o[1+c];if(this.fragmentTracker.getState(n)===U.BACKTRACKED){n=null;for(var p=c;o[p]&&this.fragmentTracker.getState(o[p])===U.BACKTRACKED;)n=a?o[p--]:o[--p];n=n||f}else a&&n.sn===a.sn&&!u&&h&&(n=n.sn<s&&this.fragmentTracker.getState(f)!==U.OK?(this.log("SN "+n.sn+" just loaded, load next one: "+f.sn),f):null)}return n},n.synchronizeToLiveEdge=function(e){var t=this.config,i=this.media;if(i){var n=this.hls.liveSyncPosition,r=i.currentTime,a=e.fragments[0].start,o=e.edge,s=r>=a-t.maxFragLookUpTolerance&&r<=o;if(null!==n&&i.duration>n&&(r<n||!s)){var l=void 0!==t.liveMaxLatencyDuration?t.liveMaxLatencyDuration:t.liveMaxLatencyDurationCount*e.targetduration;(!s&&i.readyState<4||r<o-l)&&(this.loadedmetadata||(this.nextLoadPosition=n),i.readyState&&(this.warn("Playback: "+r.toFixed(3)+" is located too far from the end of live sliding playlist: "+o+", reset currentTime to : "+n.toFixed(3)),i.currentTime=n))}}},n.alignPlaylists=function(e,t){var i=this.levels,n=this.levelLastLoaded,r=null!==n?i[n]:null,a=0;return t&&0<e.fragments.length?(a=e.fragments[0].start,e.alignedSliding&&Object(X.a)(a)?this.log("Live playlist sliding:"+a.toFixed(3)):a||(this.warn("["+this.constructor.name+"] Live playlist - outdated PTS, unknown sliding"),le(this.fragPrevious,r,e))):(this.log("Live playlist - first load, unknown sliding"),le(this.fragPrevious,r,e)),a},n.waitForCdnTuneIn=function(e){return e.live&&e.canBlockReload&&e.tuneInGoal>Math.max(e.partHoldBack,3*e.partTarget)},n.setStartPosition=function(e,t){var i=this.startPosition;if(-1===this.startPosition||-1===this.lastCurrentTime){var n=e.startTimeOffset;Object(X.a)(n)?(n<0&&(this.log("Negative start time offset "+n+", count from end of last fragment"),n=t+e.totalduration+n),this.log("Start time offset found in playlist, adjust startPosition to "+n),this.startPosition=i=n):e.live?i=this.hls.liveSyncPosition||t:this.startPosition=i=0,this.lastCurrentTime=i}this.nextLoadPosition=i},n.getLoadPosition=function(){var e=this.media,t=0;return this.loadedmetadata?t=e.currentTime:this.nextLoadPosition&&(t=this.nextLoadPosition),t},n.handleFragLoadAborted=function(e,t){this.transmuxer&&"initSegment"!==e.sn&&e.stats.aborted&&(this.warn("Fragment "+e.sn+(t?" part"+t.index:"")+" of level "+e.level+" was aborted"),this.resetFragmentLoading(e))},n.resetFragmentLoading=function(e){this.fragCurrent&&this.fragContextChanged(e)||(this.state=Te)},n.onFragmentOrKeyLoadError=function(e,t){if(!t.fatal){var i=t.frag;if(i&&i.type===e){this.fragCurrent;var n=this.config;if(this.fragLoadError+1<=n.fragLoadingMaxRetry){if(this.resetLiveStartWhenNotLoaded(i.level))return;var r=Math.min(Math.pow(2,this.fragLoadError)*n.fragLoadingRetryDelay,n.fragLoadingMaxRetryTimeout);this.warn("Fragment "+i.sn+" of "+e+" "+i.level+" failed to load, retrying in "+r+"ms"),this.retryDate=self.performance.now()+r,this.fragLoadError++,this.state=ke}else t.levelRetry?(e===v.AUDIO&&(this.fragCurrent=null),this.fragLoadError=0,this.state=Te):(J.b.error(t.details+" reaches max retry, redispatch as fatal ..."),t.fatal=!0,this.hls.stopLoad(),this.state=Re)}}},n.afterBufferFlushed=function(e,t,i){if(e){var n=q.getBuffered(e);this.fragmentTracker.detectEvictedFragments(t,n,i),this.state===Oe&&this.resetLoadingState()}},n.resetLoadingState=function(){this.fragCurrent=null,this.fragPrevious=null,this.state=Te},n.resetLiveStartWhenNotLoaded=function(e){if(!this.loadedmetadata){this.startFragRequested=!1;var t=this.levels?this.levels[e].details:null;if(null!=t&&t.live)return this.startPosition=-1,this.setStartPosition(t,0),this.resetLoadingState(),!0;this.nextLoadPosition=this.startPosition}return!1},n.updateLevelTiming=function(a,e,o,s){var l=this,d=o.details;Object.keys(a.elementaryStreams).reduce(function(e,t){var i=a.elementaryStreams[t];if(i){var n=i.endPTS-i.startPTS;if(n<=0)return l.warn("Could not parse fragment "+a.sn+" "+t+" duration reliably ("+n+") resetting transmuxer to fallback to playlist timing"),l.resetTransmuxer(),e||!1;var r=s?0:D(d,a,i.startPTS,i.endPTS,i.startDTS,i.endDTS);return l.hls.trigger(k.a.LEVEL_PTS_UPDATED,{details:d,level:o,drift:r,type:t,frag:a,start:i.startPTS,end:i.endPTS}),!0}return e},!1)?(this.state=Pe,this.hls.trigger(k.a.FRAG_PARSED,{frag:a,part:e})):this.resetLoadingState()},n.resetTransmuxer=function(){this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null)},Ee(i.prototype,[{key:"state",get:function(){return this._state},set:function(e){var t=this._state;t!==e&&(this._state=e,this.log(t+"->"+e))}}]),i}(W);function Be(){return self.MediaSource||self.WebKitMediaSource}function Fe(){return self.SourceBuffer||self.WebKitSourceBuffer}var Ne=i(16),_e=i(8),Ue=i(12),Ve=Be()||{isTypeSupported:function(){return!1}},je=function(){function e(i,e,t,n){var r=this;this.hls=void 0,this.id=void 0,this.observer=void 0,this.frag=null,this.part=null,this.worker=void 0,this.onwmsg=void 0,this.transmuxer=null,this.onTransmuxComplete=void 0,this.onFlush=void 0,this.hls=i,this.id=e,this.onTransmuxComplete=t,this.onFlush=n;var a=i.config,o=function(e,t){(t=t||{}).frag=r.frag,t.id=r.id,i.trigger(e,t)};this.observer=new Ue.EventEmitter,this.observer.on(k.a.FRAG_DECRYPTED,o),this.observer.on(k.a.ERROR,o);var s={mp4:Ve.isTypeSupported("video/mp4"),mpeg:Ve.isTypeSupported("audio/mpeg"),mp3:Ve.isTypeSupported('audio/mp4; codecs="mp3"')},l=navigator.vendor;if(a.enableWorker&&"undefined"!=typeof Worker){var d;J.b.log("demuxing in webworker");try{d=this.worker=Ne(17),this.onwmsg=this.onWorkerMessage.bind(this),d.addEventListener("message",this.onwmsg),d.onerror=function(e){i.trigger(k.a.ERROR,{type:b.b.OTHER_ERROR,details:b.a.INTERNAL_EXCEPTION,fatal:!0,event:"demuxerWorker",error:new Error(e.message+"  ("+e.filename+":"+e.lineno+")")})},d.postMessage({cmd:"init",typeSupported:s,vendor:l,id:e,config:JSON.stringify(a)})}catch(i){J.b.warn("Error in worker:",i),J.b.error("Error while initializing DemuxerWorker, fallback to inline"),d&&self.URL.revokeObjectURL(d.objectURL),this.transmuxer=new _e.c(this.observer,s,a,l),this.worker=null}}else this.transmuxer=new _e.c(this.observer,s,a,l)}var t=e.prototype;return t.destroy=function(){var e=this.worker;if(e)e.removeEventListener("message",this.onwmsg),e.terminate(),this.worker=null;else{var t=this.transmuxer;t&&(t.destroy(),this.transmuxer=null)}var i=this.observer;i&&i.removeAllListeners(),this.observer=null},t.push=function(e,t,i,n,r,a,o,s,l,d){var u=this;l.transmuxing.start=self.performance.now();var c=this.transmuxer,h=this.worker,f=a?a.start:r.start,p=r.decryptdata,g=this.frag,m=!(g&&r.cc===g.cc),v=!(g&&l.level===g.level),y=g?l.sn-g.sn:-1,b=this.part?l.part-this.part.index:1,w=!v&&(1==y||0==y&&1==b),E=self.performance.now();(v||y||0===r.stats.parsing.start)&&(r.stats.parsing.start=E),!a||!b&&w||(a.stats.parsing.start=E);var S=new _e.b(m,w,s,v,f);if(!w||m){J.b.log("[transmuxer-interface, "+r.type+"]: Starting new transmux session for sn: "+l.sn+" p: "+l.part+" level: "+l.level+" id: "+l.id+"\n        discontinuity: "+m+"\n        trackSwitch: "+v+"\n        contiguous: "+w+"\n        accurateTimeOffset: "+s+"\n        timeOffset: "+f);var A=new _e.a(i,n,t,o,d);this.configureTransmuxer(A)}if(this.frag=r,this.part=a,h)h.postMessage({cmd:"demux",data:e,decryptdata:p,chunkMeta:l,state:S},e instanceof ArrayBuffer?[e]:[]);else if(c){var T=c.push(e,p,l,S);Object(_e.d)(T)?T.then(function(e){u.handleTransmuxComplete(e)}):this.handleTransmuxComplete(T)}},t.flush=function(t){var i=this;t.transmuxing.start=self.performance.now();var e=this.transmuxer,n=this.worker;if(n)n.postMessage({cmd:"flush",chunkMeta:t});else if(e){var r=e.flush(t);Object(_e.d)(r)?r.then(function(e){i.handleFlushResult(e,t)}):this.handleFlushResult(r,t)}},t.handleFlushResult=function(e,t){var i=this;e.forEach(function(e){i.handleTransmuxComplete(e)}),this.onFlush(t)},t.onWorkerMessage=function(e){var t=e.data,i=this.hls;switch(t.event){case"init":self.URL.revokeObjectURL(this.worker.objectURL);break;case"transmuxComplete":this.handleTransmuxComplete(t.data);break;case"flush":this.onFlush(t.data);break;default:t.data=t.data||{},t.data.frag=this.frag,t.data.id=this.id,i.trigger(t.event,t.data)}},t.configureTransmuxer=function(e){var t=this.worker,i=this.transmuxer;t?t.postMessage({cmd:"configure",config:e}):i&&i.configure(e)},t.handleTransmuxComplete=function(e){e.chunkMeta.transmuxing.end=self.performance.now(),this.onTransmuxComplete(e)},e}(),He=function(){function e(e,t,i,n){this.config=void 0,this.media=void 0,this.fragmentTracker=void 0,this.hls=void 0,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1,this.config=e,this.media=t,this.fragmentTracker=i,this.hls=n}var t=e.prototype;return t.destroy=function(){this.hls=this.fragmentTracker=this.media=null},t.poll=function(e){var t=this.config,i=this.media,n=this.stalled,r=i.currentTime,a=i.seeking,o=this.seeking&&!a,s=!this.seeking&&a;if(this.seeking=a,r===e){if((s||o)&&(this.stalled=null),!i.paused&&!i.ended&&0!==i.playbackRate&&q.getBuffered(i).length){var l=q.bufferInfo(i,r,0),d=0<l.len,u=l.nextStart||0;if(d||u){if(a){var c=2<l.len,h=!u||2<u-r&&!this.fragmentTracker.getPartialFragment(r);if(c||h)return;this.moved=!1}if(!this.moved&&null!==this.stalled){var f,p=Math.max(u,l.start||0)-r,g=this.hls.levels?this.hls.levels[this.hls.currentLevel]:null,m=(null==g||null===(f=g.details)||void 0===f?void 0:f.live)?2*g.details.targetduration:2;if(0<p&&p<=m)return void this._trySkipBufferHole(null)}var v=self.performance.now();if(null!==n){var y=v-n;!a&&250<=y&&this._reportStall(l.len);var b=q.bufferInfo(i,r,t.maxBufferHole);this._tryFixBufferStall(b,y)}else this.stalled=v}}}else if(this.moved=!0,null!==n){if(this.stallReported){var w=self.performance.now()-n;J.b.warn("playback not stuck anymore @"+r+", after "+Math.round(w)+"ms"),this.stallReported=!1}this.stalled=null,this.nudgeRetry=0}},t._tryFixBufferStall=function(e,t){var i=this.config,n=this.fragmentTracker,r=this.media.currentTime,a=n.getPartialFragment(r);a&&this._trySkipBufferHole(a)||e.len>i.maxBufferHole&&t>1e3*i.highBufferWatchdogPeriod&&(J.b.warn("Trying to nudge playhead over buffer-hole"),this.stalled=null,this._tryNudgeBuffer())},t._reportStall=function(e){var t=this.hls,i=this.media;this.stallReported||(this.stallReported=!0,J.b.warn("Playback stalling at @"+i.currentTime+" due to low buffer (buffer="+e+")"),t.trigger(k.a.ERROR,{type:b.b.MEDIA_ERROR,details:b.a.BUFFER_STALLED_ERROR,fatal:!1,buffer:e}))},t._trySkipBufferHole=function(e){for(var t=this.config,i=this.hls,n=this.media,r=n.currentTime,a=0,o=q.getBuffered(n),s=0;s<o.length;s++){var l=o.start(s);if(r+t.maxBufferHole>=a&&r<l){var d=Math.max(l+.05,n.currentTime+.1);return J.b.warn("skipping hole, adjusting currentTime from "+r+" to "+d),this.moved=!0,this.stalled=null,n.currentTime=d,e&&i.trigger(k.a.ERROR,{type:b.b.MEDIA_ERROR,details:b.a.BUFFER_SEEK_OVER_HOLE,fatal:!1,reason:"fragment loaded with buffer holes, seeking from "+r+" to "+d,frag:e}),d}a=o.end(s)}return 0},t._tryNudgeBuffer=function(){var e=this.config,t=this.hls,i=this.media,n=i.currentTime,r=(this.nudgeRetry||0)+1;if((this.nudgeRetry=r)<e.nudgeMaxRetry){var a=n+r*e.nudgeOffset;J.b.warn("Nudging 'currentTime' from "+n+" to "+a),i.currentTime=a,t.trigger(k.a.ERROR,{type:b.b.MEDIA_ERROR,details:b.a.BUFFER_NUDGE_ON_STALL,fatal:!1})}else J.b.error("Playhead still not moving while enough data buffered @"+n+" after "+e.nudgeMaxRetry+" nudges"),t.trigger(k.a.ERROR,{type:b.b.MEDIA_ERROR,details:b.a.BUFFER_STALLED_ERROR,fatal:!0})},e}();function Ge(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ze(e,t){return(ze=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var We=function(o){var e,t;function i(e,t){var i;return(i=o.call(this,e,t,"[stream-controller]")||this).audioCodecSwap=!1,i.gapController=null,i.level=-1,i._forceStartLoad=!1,i.altAudio=!1,i.audioOnly=!1,i.fragPlaying=null,i.onvplaying=null,i.onvseeked=null,i.fragLastKbps=0,i.stalled=!1,i.couldBacktrack=!1,i.audioCodecSwitch=!1,i.videoBuffer=null,i._registerListeners(),i}t=o,(e=i).prototype=Object.create(t.prototype),ze(e.prototype.constructor=e,t);var n=i.prototype;return n._registerListeners=function(){var e=this.hls;e.on(k.a.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(k.a.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(k.a.MANIFEST_LOADING,this.onManifestLoading,this),e.on(k.a.MANIFEST_PARSED,this.onManifestParsed,this),e.on(k.a.LEVEL_LOADING,this.onLevelLoading,this),e.on(k.a.LEVEL_LOADED,this.onLevelLoaded,this),e.on(k.a.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.on(k.a.ERROR,this.onError,this),e.on(k.a.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(k.a.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.on(k.a.BUFFER_CREATED,this.onBufferCreated,this),e.on(k.a.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(k.a.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(k.a.FRAG_BUFFERED,this.onFragBuffered,this)},n._unregisterListeners=function(){var e=this.hls;e.off(k.a.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(k.a.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(k.a.MANIFEST_LOADING,this.onManifestLoading,this),e.off(k.a.MANIFEST_PARSED,this.onManifestParsed,this),e.off(k.a.LEVEL_LOADED,this.onLevelLoaded,this),e.off(k.a.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.off(k.a.ERROR,this.onError,this),e.off(k.a.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(k.a.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.off(k.a.BUFFER_CREATED,this.onBufferCreated,this),e.off(k.a.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(k.a.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(k.a.FRAG_BUFFERED,this.onFragBuffered,this)},n.onHandlerDestroying=function(){this._unregisterListeners(),this.onMediaDetaching()},n.startLoad=function(e){if(this.levels){var t=this.lastCurrentTime,i=this.hls;if(this.stopLoad(),this.setInterval(100),this.level=-1,this.fragLoadError=0,!this.startFragRequested){var n=i.startLevel;-1===n&&(i.config.testBandwidth?(n=0,this.bitrateTest=!0):n=i.nextAutoLevel),this.level=i.nextLoadLevel=n,this.loadedmetadata=!1}0<t&&-1===e&&(this.log("Override startPosition with lastCurrentTime @"+t.toFixed(3)),e=t),this.state=Te,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}else this._forceStartLoad=!0,this.state=Ae},n.stopLoad=function(){this._forceStartLoad=!1,o.prototype.stopLoad.call(this)},n.doTick=function(){switch(this.state){case Te:this.doTickIdle();break;case De:var e,t=this.levels,i=this.level,n=null==t||null===(e=t[i])||void 0===e?void 0:e.details;if(!n||n.live&&this.levelLastLoaded!==this.level)break;if(this.waitForCdnTuneIn(n))break;this.state=Te;break;case ke:var r,a=self.performance.now(),o=this.retryDate;(!o||o<=a||null!==(r=this.media)&&void 0!==r&&r.seeking)&&(this.log("retryDate reached, switch back to IDLE state"),this.state=Te)}this.onTickEnd()},n.onTickEnd=function(){o.prototype.onTickEnd.call(this),this.checkBuffer(),this.checkFragmentChanged()},n.doTickIdle=function(){var e,t,i=this.hls,n=this.levelLastLoaded,r=this.levels,a=this.media,o=i.config,s=i.nextLoadLevel;if(null!==n&&(a||!this.startFragRequested&&o.startFragPrefetch)&&(!this.altAudio||!this.audioOnly)&&r&&r[s]){var l=r[s];this.level=i.nextLoadLevel=s;var d=l.details;if(!d||this.state===De||d.live&&this.levelLastLoaded!==s)this.state=De;else{var u=this.getLoadPosition();if(Object(X.a)(u)){var c=d.initSegment,h=0;if(!c||c.data||this.bitrateTest){var f,p=l.maxBitrate;f=p?Math.max(8*o.maxBufferSize/p,o.maxBufferLength):o.maxBufferLength,f=Math.min(f,o.maxMaxBufferLength);var g=u<o.maxBufferHole?Math.max(2,o.maxBufferHole):o.maxBufferHole,m=q.bufferInfo(this.mediaBuffer?this.mediaBuffer:a,u,g);if(m.len>=f)return;if(this._streamEnded(m,d)){var v={};return this.altAudio&&(v.type="video"),this.hls.trigger(k.a.BUFFER_EOS,v),void(this.state=Oe)}if(h=m.end,c=this.getNextFragment(h,d),this.couldBacktrack&&!this.fragPrevious&&c&&"initSegment"!==c.sn){var y=c.sn-d.startSN;1<y&&(c=d.fragments[y-1],this.fragmentTracker.removeFragment(c))}if(c&&this.fragmentTracker.getState(c)===U.OK&&this.nextLoadPosition>h&&(c=this.getNextFragment(this.nextLoadPosition,d)),!c)return}"identity"!==(null===(e=c.decryptdata)||void 0===e?void 0:e.keyFormat)||null!==(t=c.decryptdata)&&void 0!==t&&t.key?this.loadFragment(c,d,h):this.loadKey(c,d)}}}},n.loadFragment=function(e,t,i){var n,r=this.fragmentTracker.getState(e);if(this.fragCurrent=e,r===U.BACKTRACKED){var a=this.fragmentTracker.getBacktrackData(e);if(a)return this._handleFragmentLoadProgress(a),void this._handleFragmentLoadComplete(a);r=U.NOT_LOADED}r===U.NOT_LOADED||r===U.PARTIAL?"initSegment"===e.sn?this._loadInitSegment(e):this.bitrateTest?(e.bitrateTest=!0,this.log("Fragment "+e.sn+" of level "+e.level+" is being downloaded to test bitrate and will not be buffered"),this._loadBitrateTestFrag(e)):(this.startFragRequested=!0,o.prototype.loadFragment.call(this,e,t,i)):r===U.APPENDING?this.reduceMaxBufferLength(e.duration)&&this.fragmentTracker.removeFragment(e):0===(null===(n=this.media)||void 0===n?void 0:n.buffered.length)&&this.fragmentTracker.removeAllFragments()},n.getAppendedFrag=function(e){var t=this.fragmentTracker.getAppendedFrag(e,v.MAIN);return t&&"fragment"in t?t.fragment:t},n.getBufferedFrag=function(e){return this.fragmentTracker.getBufferedFrag(e,v.MAIN)},n.followingBufferedFrag=function(e){return e?this.getBufferedFrag(e.end+.5):null},n.immediateLevelSwitch=function(){this.abortCurrentFrag(),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)},n.nextLevelSwitch=function(){var e=this.levels,t=this.media;if(null!=t&&t.readyState){var i,n=this.getAppendedFrag(t.currentTime);if(n&&1<n.start&&this.flushMainBuffer(0,n.start-1),!t.paused&&e){var r=e[this.hls.nextLoadLevel],a=this.fragLastKbps;i=a&&this.fragCurrent?this.fragCurrent.duration*r.maxBitrate/(1e3*a)+1:0}else i=0;var o=this.getBufferedFrag(t.currentTime+i);if(o){var s=this.followingBufferedFrag(o);if(s){this.abortCurrentFrag();var l=s.maxStartPTS?s.maxStartPTS:s.start,d=s.duration,u=Math.max(o.end,l+Math.min(Math.max(d-this.config.maxFragLookUpTolerance,.5*d),.75*d));this.flushMainBuffer(u,Number.POSITIVE_INFINITY)}}}},n.abortCurrentFrag=function(){var e=this.fragCurrent;(this.fragCurrent=null)!=e&&e.loader&&e.loader.abort(),this.state===Le&&(this.state=Te),this.nextLoadPosition=this.getLoadPosition()},n.flushMainBuffer=function(e,t){o.prototype.flushMainBuffer.call(this,e,t,this.altAudio?"video":null)},n.onMediaAttached=function(e,t){o.prototype.onMediaAttached.call(this,e,t);var i=t.media;this.onvplaying=this.onMediaPlaying.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),i.addEventListener("playing",this.onvplaying),i.addEventListener("seeked",this.onvseeked),this.gapController=new He(this.config,i,this.fragmentTracker,this.hls)},n.onMediaDetaching=function(){var e=this.media;e&&(e.removeEventListener("playing",this.onvplaying),e.removeEventListener("seeked",this.onvseeked),this.onvplaying=this.onvseeked=null,this.videoBuffer=null),this.fragPlaying=null,this.gapController&&(this.gapController.destroy(),this.gapController=null),o.prototype.onMediaDetaching.call(this)},n.onMediaPlaying=function(){this.tick()},n.onMediaSeeked=function(){var e=this.media,t=e?e.currentTime:null;Object(X.a)(t)&&this.log("Media seeked to "+t.toFixed(3)),this.tick()},n.onManifestLoading=function(){this.log("Trigger BUFFER_RESET"),this.hls.trigger(k.a.BUFFER_RESET,void 0),this.fragmentTracker.removeAllFragments(),this.couldBacktrack=this.stalled=!1,this.startPosition=this.lastCurrentTime=0,this.fragPlaying=null},n.onManifestParsed=function(e,t){var i,n,r,a=!1,o=!1;t.levels.forEach(function(e){(i=e.audioCodec)&&(-1!==i.indexOf("mp4a.40.2")&&(a=!0),-1!==i.indexOf("mp4a.40.5")&&(o=!0))}),this.audioCodecSwitch=a&&o&&!("function"==typeof(null==(r=Fe())||null===(n=r.prototype)||void 0===n?void 0:n.changeType)),this.audioCodecSwitch&&this.log("Both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=t.levels,this.startFragRequested=!1},n.onLevelLoading=function(e,t){var i=this.levels;if(i&&this.state===Te){var n=i[t.level];(!n.details||n.details.live&&this.levelLastLoaded!==t.level||this.waitForCdnTuneIn(n.details))&&(this.state=De)}},n.onLevelLoaded=function(e,t){var i,n=this.levels,r=t.level,a=t.details,o=a.totalduration;if(n){this.log("Level "+r+" loaded ["+a.startSN+","+a.endSN+"], cc ["+a.startCC+", "+a.endCC+"] duration:"+o);var s=this.fragCurrent;!s||this.state!==Ce&&this.state!==ke||s.level!==t.level&&s.loader&&(this.state=Te,s.loader.abort());var l=n[r],d=0;if(a.live||null!==(i=l.details)&&void 0!==i&&i.live){if(a.fragments[0]||(a.deltaUpdateFailed=!0),a.deltaUpdateFailed)return;d=this.alignPlaylists(a,l.details)}if(l.details=a,this.levelLastLoaded=r,this.hls.trigger(k.a.LEVEL_UPDATED,{details:a,level:r}),this.state===De){if(this.waitForCdnTuneIn(a))return;this.state=Te}this.startFragRequested?a.live&&this.synchronizeToLiveEdge(a):this.setStartPosition(a,d),this.tick()}else this.warn("Levels were reset while loading level "+r)},n._handleFragmentLoadProgress=function(e){var t,i=e.frag,n=e.part,r=e.payload,a=this.levels;if(a){var o=a[i.level],s=o.details;if(s){var l=o.videoCodec,d=s.PTSKnown||!s.live,u=null===(t=s.initSegment)||void 0===t?void 0:t.data,c=this._getAudioCodec(o),h=this.transmuxer=this.transmuxer||new je(this.hls,v.MAIN,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)),f=n?n.index:-1,p=-1!==f,g=new Y(i.level,i.sn,i.stats.chunkCount,r.byteLength,f,p),m=this.initPTS[i.cc];h.push(r,u,c,l,i,n,s.totalduration,d,g,m)}else this.warn("Dropping fragment "+i.sn+" of level "+i.level+" after level details were reset")}else this.warn("Levels were reset while fragment load was in progress. Fragment "+i.sn+" of level "+i.level+" will not be buffered")},n.onAudioTrackSwitching=function(e,t){var i=this.altAudio,n=!!t.url,r=t.id;if(!n){if(this.mediaBuffer!==this.media){this.log("Switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;var a=this.fragCurrent;null!=a&&a.loader&&(this.log("Switching to main audio track, cancel main fragment load"),a.loader.abort()),this.resetTransmuxer(),this.resetLoadingState()}else this.audioOnly&&this.resetTransmuxer();var o=this.hls;i&&o.trigger(k.a.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),o.trigger(k.a.AUDIO_TRACK_SWITCHED,{id:r})}},n.onAudioTrackSwitched=function(e,t){var i=t.id,n=!!this.hls.audioTracks[i].url;if(n){var r=this.videoBuffer;r&&this.mediaBuffer!==r&&(this.log("Switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=r)}this.altAudio=n,this.tick()},n.onBufferCreated=function(e,t){var i,n,r=t.tracks,a=!1;for(var o in r){var s=r[o];if("main"===s.id){if(i=s,"video"===(n=o)){var l=r[o];l&&(this.videoBuffer=l.buffer)}}else a=!0}a&&i?(this.log("Alternate track found, use "+n+".buffered to schedule main fragment loading"),this.mediaBuffer=i.buffer):this.mediaBuffer=this.media},n.onFragBuffered=function(e,t){var i=t.frag,n=t.part;if(!i||i.type===v.MAIN){if(this.fragContextChanged(i))return this.warn("Fragment "+i.sn+(n?" p: "+n.index:"")+" of level "+i.level+" finished buffering, but was aborted. state: "+this.state),void(this.state===Pe&&(this.state=Te));var r=n?n.stats:i.stats;this.fragLastKbps=Math.round(8*r.total/(r.buffering.end-r.loading.first)),"initSegment"!==i.sn&&(this.fragPrevious=i),this.fragBufferedComplete(i,n)}},n.onError=function(e,t){switch(t.details){case b.a.FRAG_LOAD_ERROR:case b.a.FRAG_LOAD_TIMEOUT:case b.a.KEY_LOAD_ERROR:case b.a.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(v.MAIN,t);break;case b.a.LEVEL_LOAD_ERROR:case b.a.LEVEL_LOAD_TIMEOUT:this.state!==Re&&(t.fatal?(this.warn(""+t.details),this.state=Re):t.levelRetry||this.state!==De||(this.state=Te));break;case b.a.BUFFER_FULL_ERROR:"main"!==t.parent||this.state!==xe&&this.state!==Pe||(this.media&&q.isBuffered(this.media,this.media.currentTime)&&q.isBuffered(this.media,this.media.currentTime+.5)?(this.reduceMaxBufferLength(),this.state=Te):(this.warn("buffer full error also media.currentTime is not buffered, flush everything"),this.immediateLevelSwitch()))}},n.checkBuffer=function(){var e=this.media,t=this.gapController;if(e&&t&&e.readyState){var i=q.getBuffered(e);!this.loadedmetadata&&i.length?(this.loadedmetadata=!0,this.seekToStartPos()):t.poll(this.lastCurrentTime),this.lastCurrentTime=e.currentTime}},n.onFragLoadEmergencyAborted=function(){this.state=Te,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tickImmediate()},n.onBufferFlushed=function(e,t){var i=t.type;if(i!==Z.a.AUDIO||this.audioOnly&&!this.altAudio){var n=(i===Z.a.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;this.afterBufferFlushed(n,i,v.MAIN)}},n.onLevelsUpdated=function(e,t){this.levels=t.levels},n.swapAudioCodec=function(){this.audioCodecSwap=!this.audioCodecSwap},n.seekToStartPos=function(){var e=this.media,t=e.currentTime,i=this.startPosition;if(0<=i&&t<i){if(e.seeking)return void J.b.log("could not seek to "+i+", already seeking at "+t);var n=q.getBuffered(e),r=(n.length?n.start(0):0)-i;0<r&&r<this.config.maxBufferHole&&(J.b.log("adjusting start position by "+r+" to match buffer start"),i+=r,this.startPosition=i),this.log("seek to target start position "+i+" from current time "+t),e.currentTime=i}},n._getAudioCodec=function(e){var t=this.config.defaultAudioCodec||e.audioCodec;return this.audioCodecSwap&&t&&(this.log("Swapping audio codec"),t=-1!==t.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),t},n._loadBitrateTestFrag=function(n){var r=this;this._doFragLoad(n).then(function(e){var t=r.hls;if(e&&!t.nextLoadLevel&&!r.fragContextChanged(n)){r.fragLoadError=0,r.state=Te,r.startFragRequested=!1,r.bitrateTest=!1;var i=n.stats;i.parsing.start=i.parsing.end=i.buffering.start=i.buffering.end=self.performance.now(),t.trigger(k.a.FRAG_LOADED,e)}})},n._handleTransmuxComplete=function(e){var t,i="main",n=this.hls,r=e.remuxResult,a=e.chunkMeta,o=this.getCurrentContext(a);if(!o)return this.warn("The loading context changed while buffering fragment "+a.sn+" of level "+a.level+". This chunk will not be buffered."),void this.resetLiveStartWhenNotLoaded(a.level);var s=o.frag,l=o.part,d=o.level,u=r.video,c=r.text,h=r.id3,f=r.initSegment,p=this.altAudio?void 0:r.audio;if(!this.fragContextChanged(s)){if(this.state=xe,f){f.tracks&&(this._bufferInitSegment(d,f.tracks,s,a),n.trigger(k.a.FRAG_PARSING_INIT_SEGMENT,{frag:s,id:i,tracks:f.tracks}));var g=f.initPTS,m=f.timescale;Object(X.a)(g)&&(this.initPTS[s.cc]=g,n.trigger(k.a.INIT_PTS_FOUND,{frag:s,id:i,initPTS:g,timescale:m}))}if(u&&!1!==r.independent){if(d.details){var v=u.startPTS,y=u.endPTS,b=u.startDTS,w=u.endDTS;if(l)l.elementaryStreams[u.type]={startPTS:v,endPTS:y,startDTS:b,endDTS:w};else if(u.firstKeyFrame&&u.independent&&(this.couldBacktrack=!0),u.dropped&&u.independent){if(this.getLoadPosition()+this.config.maxBufferHole<v)return void this.backtrack(s);s.setElementaryStreamInfo(u.type,s.start,y,s.start,w,!0)}s.setElementaryStreamInfo(u.type,v,y,b,w),this.bufferFragmentData(u,s,l,a)}}else if(!1===r.independent)return void this.backtrack(s);if(p){var E=p.startPTS,S=p.endPTS,A=p.startDTS,T=p.endDTS;l&&(l.elementaryStreams[Z.a.AUDIO]={startPTS:E,endPTS:S,startDTS:A,endDTS:T}),s.setElementaryStreamInfo(Z.a.AUDIO,E,S,A,T),this.bufferFragmentData(p,s,l,a)}if(null!=h&&null!==(t=h.samples)&&void 0!==t&&t.length){var L={frag:s,id:i,samples:h.samples};n.trigger(k.a.FRAG_PARSING_METADATA,L)}if(c){var C={frag:s,id:i,samples:c.samples};n.trigger(k.a.FRAG_PARSING_USERDATA,C)}}},n._bufferInitSegment=function(e,i,n,r){var a=this;if(this.state===xe){this.audioOnly=!!i.audio&&!i.video,this.altAudio&&!this.audioOnly&&delete i.audio;var t=i.audio,o=i.video,s=i.audiovideo;if(t){var l=e.audioCodec,d=navigator.userAgent.toLowerCase();this.audioCodecSwitch&&(l=l&&(-1!==l.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),1!==t.metadata.channelCount&&-1===d.indexOf("firefox")&&(l="mp4a.40.5")),-1!==d.indexOf("android")&&"audio/mpeg"!==t.container&&(l="mp4a.40.2",this.log("Android: force audio codec to "+l)),e.audioCodec&&e.audioCodec!==l&&this.log('Swapping manifest audio codec "'+e.audioCodec+'" for "'+l+'"'),t.levelCodec=l,t.id="main",this.log("Init audio buffer, container:"+t.container+", codecs[selected/level/parsed]=["+(l||"")+"/"+(e.audioCodec||"")+"/"+t.codec+"]")}o&&(o.levelCodec=e.videoCodec,o.id="main",this.log("Init video buffer, container:"+o.container+", codecs[level/parsed]=["+(e.videoCodec||"")+"/"+o.codec+"]")),s&&this.log("Init audiovideo buffer, container:"+s.container+", codecs[level/parsed]=["+(e.attrs.CODECS||"")+"/"+s.codec+"]"),this.hls.trigger(k.a.BUFFER_CODECS,i),Object.keys(i).forEach(function(e){var t=i[e].initSegment;null!=t&&t.byteLength&&a.hls.trigger(k.a.BUFFER_APPENDING,{type:e,data:t,frag:n,part:null,chunkMeta:r,parent:n.type})}),this.tick()}},n.backtrack=function(e){this.couldBacktrack=!0,this.resetTransmuxer(),this.flushBufferGap(e);var t=this.fragmentTracker.backtrack(e);this.fragPrevious=null,this.nextLoadPosition=e.start,t?this.resetFragmentLoading(e):this.state=Ie},n.checkFragmentChanged=function(){var e=this.media,t=null;if(e&&1<e.readyState&&!1===e.seeking){var i=e.currentTime;if(q.isBuffered(e,i)?t=this.getAppendedFrag(i):q.isBuffered(e,i+.1)&&(t=this.getAppendedFrag(i+.1)),t){var n=this.fragPlaying,r=t.level;n&&t.sn===n.sn&&n.level===r&&t.urlId===n.urlId||(this.hls.trigger(k.a.FRAG_CHANGED,{frag:t}),n&&n.level===r||this.hls.trigger(k.a.LEVEL_SWITCHED,{level:r}),this.fragPlaying=t)}}},Ge(i.prototype,[{key:"nextLevel",get:function(){var e=this.nextBufferedFrag;return e?e.level:-1}},{key:"currentLevel",get:function(){var e=this.media;if(e){var t=this.getAppendedFrag(e.currentTime);if(t)return t.level}return-1}},{key:"nextBufferedFrag",get:function(){var e=this.media;if(e){var t=this.getAppendedFrag(e.currentTime);return this.followingBufferedFrag(t)}return null}},{key:"forceStartLoad",get:function(){return this._forceStartLoad}}]),i}(Me),Qe=function(){function e(e,t,i){void 0===t&&(t=0),void 0===i&&(i=0),this.halfLife=void 0,this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.halfLife=e,this.alpha_=e?Math.exp(Math.log(.5)/e):0,this.estimate_=t,this.totalWeight_=i}var t=e.prototype;return t.sample=function(e,t){var i=Math.pow(this.alpha_,e);this.estimate_=t*(1-i)+i*this.estimate_,this.totalWeight_+=e},t.getTotalWeight=function(){return this.totalWeight_},t.getEstimate=function(){if(this.alpha_){var e=1-Math.pow(this.alpha_,this.totalWeight_);if(e)return this.estimate_/e}return this.estimate_},e}(),qe=function(){function e(e,t,i){this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.defaultEstimate_=i,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new Qe(e),this.fast_=new Qe(t)}var t=e.prototype;return t.update=function(e,t){var i=this.slow_,n=this.fast_;this.slow_.halfLife!==e&&(this.slow_=new Qe(e,i.getEstimate(),i.getTotalWeight())),this.fast_.halfLife!==t&&(this.fast_=new Qe(t,n.getEstimate(),n.getTotalWeight()))},t.sample=function(e,t){var i=(e=Math.max(e,this.minDelayMs_))/1e3,n=8*t/i;this.fast_.sample(i,n),this.slow_.sample(i,n)},t.canEstimate=function(){var e=this.fast_;return e&&e.getTotalWeight()>=this.minWeight_},t.getEstimate=function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_},t.destroy=function(){},e}();function Ye(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Ke=function(){function e(e){this.hls=void 0,this.lastLoadedFragLevel=0,this._nextAutoLevel=-1,this.timer=void 0,this.onCheck=this._abandonRulesCheck.bind(this),this.fragCurrent=null,this.partCurrent=null,this.bitrateTestDelay=0,this.bwEstimator=void 0;var t=(this.hls=e).config;this.bwEstimator=new qe(t.abrEwmaSlowVoD,t.abrEwmaFastVoD,t.abrEwmaDefaultEstimate),this.registerListeners()}var t=e.prototype;return t.registerListeners=function(){var e=this.hls;e.on(k.a.FRAG_LOADING,this.onFragLoading,this),e.on(k.a.FRAG_LOADED,this.onFragLoaded,this),e.on(k.a.FRAG_BUFFERED,this.onFragBuffered,this),e.on(k.a.LEVEL_LOADED,this.onLevelLoaded,this),e.on(k.a.ERROR,this.onError,this)},t.unregisterListeners=function(){var e=this.hls;e.off(k.a.FRAG_LOADING,this.onFragLoading,this),e.off(k.a.FRAG_LOADED,this.onFragLoaded,this),e.off(k.a.FRAG_BUFFERED,this.onFragBuffered,this),e.off(k.a.LEVEL_LOADED,this.onLevelLoaded,this),e.off(k.a.ERROR,this.onError,this)},t.destroy=function(){this.unregisterListeners(),this.clearTimer(),this.hls=this.onCheck=null,this.fragCurrent=this.partCurrent=null},t.onFragLoading=function(e,t){var i,n=t.frag;n.type===v.MAIN&&(this.timer||(this.fragCurrent=n,this.partCurrent=null!=(i=t.part)?i:null,this.timer=self.setInterval(this.onCheck,100)))},t.onLevelLoaded=function(e,t){var i=this.hls.config;t.details.live?this.bwEstimator.update(i.abrEwmaSlowLive,i.abrEwmaFastLive):this.bwEstimator.update(i.abrEwmaSlowVoD,i.abrEwmaFastVoD)},t._abandonRulesCheck=function(){var e=this.fragCurrent,t=this.partCurrent,i=this.hls,n=i.autoLevelEnabled,r=i.config,a=i.media;if(e&&a){var o=t?t.stats:e.stats,s=t?t.duration:e.duration;if(o.aborted)return J.b.warn("frag loader destroy or aborted, disarm abandonRules"),this.clearTimer(),void(this._nextAutoLevel=-1);if(n&&!a.paused&&a.playbackRate&&a.readyState){var l=performance.now()-o.loading.start,d=Math.abs(a.playbackRate);if(!(l<=500*s/d)){var u=i.levels,c=i.minAutoLevel,h=u[e.level],f=o.total||Math.max(o.loaded,Math.round(s*h.maxBitrate/8)),p=Math.max(1,o.bwEstimate?o.bwEstimate/8:1e3*o.loaded/l),g=(f-o.loaded)/p,m=a.currentTime,v=(q.bufferInfo(a,m,r.maxBufferHole).end-m)/d;if(!(2*s/d<=v||g<=v)){var y,b=Number.POSITIVE_INFINITY;for(y=e.level-1;c<y&&!((b=s*u[y].maxBitrate/(6.4*p))<v);y--);if(!(g<=b)){var w=this.bwEstimator.getEstimate();J.b.warn("Fragment "+e.sn+(t?" part "+t.index:"")+" of level "+e.level+" is loading too slowly and will cause an underbuffer; aborting and switching to level "+y+"\n      Current BW estimate: "+(Object(X.a)(w)?(w/1024).toFixed(3):"Unknown")+" Kb/s\n      Estimated load time for current fragment: "+g.toFixed(3)+" s\n      Estimated load time for the next fragment: "+b.toFixed(3)+" s\n      Time to underbuffer: "+v.toFixed(3)+" s"),i.nextLoadLevel=y,this.bwEstimator.sample(l,o.loaded),this.clearTimer(),e.loader&&(this.fragCurrent=this.partCurrent=null,e.loader.abort()),i.trigger(k.a.FRAG_LOAD_EMERGENCY_ABORTED,{frag:e,part:t,stats:o})}}}}}},t.onFragLoaded=function(e,t){var i=t.frag,n=t.part;if(i.type===v.MAIN&&Object(X.a)(i.sn)){var r=n?n.stats:i.stats,a=n?n.duration:i.duration;if(this.clearTimer(),this.lastLoadedFragLevel=i.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate){var o=this.hls.levels[i.level],s=(o.loaded?o.loaded.bytes:0)+r.loaded,l=(o.loaded?o.loaded.duration:0)+a;o.loaded={bytes:s,duration:l},o.realBitrate=Math.round(8*s/l)}if(i.bitrateTest){var d={stats:r,frag:i,part:n,id:i.type};this.onFragBuffered(k.a.FRAG_BUFFERED,d),i.bitrateTest=!1}}},t.onFragBuffered=function(e,t){var i=t.frag,n=t.part,r=n?n.stats:i.stats;if(!r.aborted&&i.type===v.MAIN&&"initSegment"!==i.sn){var a=r.parsing.end-r.loading.start;this.bwEstimator.sample(a,r.loaded),r.bwEstimate=this.bwEstimator.getEstimate(),i.bitrateTest?this.bitrateTestDelay=a/1e3:this.bitrateTestDelay=0}},t.onError=function(e,t){switch(t.details){case b.a.FRAG_LOAD_ERROR:case b.a.FRAG_LOAD_TIMEOUT:this.clearTimer()}},t.clearTimer=function(){self.clearInterval(this.timer),this.timer=void 0},t.getNextABRAutoLevel=function(){var e=this.fragCurrent,t=this.partCurrent,i=this.hls,n=i.maxAutoLevel,r=i.config,a=i.minAutoLevel,o=i.media,s=t?t.duration:e?e.duration:0,l=o?o.currentTime:0,d=o&&0!==o.playbackRate?Math.abs(o.playbackRate):1,u=this.bwEstimator?this.bwEstimator.getEstimate():r.abrEwmaDefaultEstimate,c=(q.bufferInfo(o,l,r.maxBufferHole).end-l)/d,h=this.findBestLevel(u,a,n,c,r.abrBandWidthFactor,r.abrBandWidthUpFactor);if(0<=h)return h;J.b.trace((c?"rebuffering expected":"buffer is empty")+", finding optimal quality level");var f=s?Math.min(s,r.maxStarvationDelay):r.maxStarvationDelay,p=r.abrBandWidthFactor,g=r.abrBandWidthUpFactor;if(!c){var m=this.bitrateTestDelay;m&&(f=(s?Math.min(s,r.maxLoadingDelay):r.maxLoadingDelay)-m,J.b.trace("bitrate test took "+Math.round(1e3*m)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*f)+" ms"),p=g=1)}return h=this.findBestLevel(u,a,n,c+f,p,g),Math.max(h,0)},t.findBestLevel=function(e,t,i,n,r,a){for(var o,s=this.fragCurrent,l=this.partCurrent,d=this.lastLoadedFragLevel,u=this.hls.levels,c=u[d],h=!(null==c||null===(o=c.details)||void 0===o||!o.live),f=null==c?void 0:c.codecSet,p=l?l.duration:s?s.duration:0,g=i;t<=g;g--){var m=u[g];if(m&&(!f||m.codecSet===f)){var v=m.details,y=(l?null==v?void 0:v.partTarget:null==v?void 0:v.averagetargetduration)||p,b=void 0;b=g<=d?r*e:a*e;var w=u[g].maxBitrate,E=w*y/b;if(J.b.trace("level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: "+g+"/"+Math.round(b)+"/"+w+"/"+y+"/"+n+"/"+E),w<b&&(!E||h&&!this.bitrateTestDelay||E<n))return g}}return-1},Ye(e.prototype,[{key:"nextAutoLevel",get:function(){var e=this._nextAutoLevel,t=this.bwEstimator;if(!(-1===e||t&&t.canEstimate()))return e;var i=this.getNextABRAutoLevel();return-1!==e&&(i=Math.min(e,i)),i},set:function(e){this._nextAutoLevel=e}}]),e}(),Xe=i(10),Je=i.n(Xe),Ze=function(){function e(e){this.buffers=void 0,this.queues={video:[],audio:[],audiovideo:[]},this.buffers=e}var t=e.prototype;return t.append=function(e,t){var i=this.queues[t];i.push(e),1===i.length&&this.buffers[t]&&this.executeNext(t)},t.insertAbort=function(e,t){this.queues[t].unshift(e),this.executeNext(t)},t.appendBlocker=function(e){var t,i=new Promise(function(e){t=e}),n={execute:t,onStart:function(){},onComplete:function(){},onError:function(){}};return this.append(n,e),i},t.executeNext=function(e){var t=this.buffers,i=this.queues,n=t[e],r=i[e];if(r.length){var a=r[0];try{a.execute()}catch(e){J.b.warn("[buffer-operation-queue]: Unhandled exception executing the current operation"),a.onError(e),n&&n.updating||r.shift()}}},t.shiftAndExecuteNext=function(e){this.queues[e].shift(),this.executeNext(e)},t.current=function(e){return this.queues[e][0]},e}(),$e=Be(),et=/([ha]vc.)(?:\.[^.,]+)+/,tt=function(){function e(e){var n=this;this.details=null,this._objectUrl=null,this.operationQueue=void 0,this.listeners=void 0,this.hls=void 0,this.bufferCodecEventsExpected=0,this._bufferCodecEventsTotal=0,this.media=null,this.mediaSource=null,this.appendError=0,this.tracks={},this.pendingTracks={},this.sourceBuffer=void 0,this._onMediaSourceOpen=function(){var e=n.hls,t=n.media,i=n.mediaSource;J.b.log("[buffer-controller]: Media source opened"),t&&(n.updateMediaElementDuration(),e.trigger(k.a.MEDIA_ATTACHED,{media:t})),i&&i.removeEventListener("sourceopen",n._onMediaSourceOpen),n.checkPendingTracks()},this._onMediaSourceClose=function(){J.b.log("[buffer-controller]: Media source closed")},this._onMediaSourceEnded=function(){J.b.log("[buffer-controller]: Media source ended")},this.hls=e,this._initSourceBuffer(),this.registerListeners()}var t=e.prototype;return t.hasSourceTypes=function(){return 0<this.getSourceBufferTypes().length||0<Object.keys(this.pendingTracks).length},t.destroy=function(){this.unregisterListeners(),this.details=null},t.registerListeners=function(){var e=this.hls;e.on(k.a.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(k.a.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(k.a.MANIFEST_PARSED,this.onManifestParsed,this),e.on(k.a.BUFFER_RESET,this.onBufferReset,this),e.on(k.a.BUFFER_APPENDING,this.onBufferAppending,this),e.on(k.a.BUFFER_CODECS,this.onBufferCodecs,this),e.on(k.a.BUFFER_EOS,this.onBufferEos,this),e.on(k.a.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(k.a.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(k.a.FRAG_PARSED,this.onFragParsed,this),e.on(k.a.FRAG_CHANGED,this.onFragChanged,this)},t.unregisterListeners=function(){var e=this.hls;e.off(k.a.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(k.a.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(k.a.MANIFEST_PARSED,this.onManifestParsed,this),e.off(k.a.BUFFER_RESET,this.onBufferReset,this),e.off(k.a.BUFFER_APPENDING,this.onBufferAppending,this),e.off(k.a.BUFFER_CODECS,this.onBufferCodecs,this),e.off(k.a.BUFFER_EOS,this.onBufferEos,this),e.off(k.a.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(k.a.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(k.a.FRAG_PARSED,this.onFragParsed,this),e.off(k.a.FRAG_CHANGED,this.onFragChanged,this)},t._initSourceBuffer=function(){this.sourceBuffer={},this.operationQueue=new Ze(this.sourceBuffer),this.listeners={audio:[],video:[],audiovideo:[]}},t.onManifestParsed=function(e,t){var i=2;(!t.audio||t.video)&&t.altAudio||(i=1),this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=i,this.details=null,J.b.log(this.bufferCodecEventsExpected+" bufferCodec event(s) expected")},t.onMediaAttaching=function(e,t){var i=this.media=t.media;if(i&&$e){var n=this.mediaSource=new $e;n.addEventListener("sourceopen",this._onMediaSourceOpen),n.addEventListener("sourceended",this._onMediaSourceEnded),n.addEventListener("sourceclose",this._onMediaSourceClose),i.src=self.URL.createObjectURL(n),this._objectUrl=i.src}},t.onMediaDetaching=function(){var e=this.media,t=this.mediaSource,i=this._objectUrl;if(t){if(J.b.log("[buffer-controller]: media source detaching"),"open"===t.readyState)try{t.endOfStream()}catch(e){J.b.warn("[buffer-controller]: onMediaDetaching: "+e.message+" while calling endOfStream")}this.onBufferReset(),t.removeEventListener("sourceopen",this._onMediaSourceOpen),t.removeEventListener("sourceended",this._onMediaSourceEnded),t.removeEventListener("sourceclose",this._onMediaSourceClose),e&&(i&&self.URL.revokeObjectURL(i),e.src===i?(e.removeAttribute("src"),e.load()):J.b.warn("[buffer-controller]: media.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.bufferCodecEventsExpected=this._bufferCodecEventsTotal,this.pendingTracks={},this.tracks={}}this.hls.trigger(k.a.MEDIA_DETACHED,void 0)},t.onBufferReset=function(){var i=this;this.getSourceBufferTypes().forEach(function(t){var e=i.sourceBuffer[t];try{e&&(i.removeBufferListeners(t),i.mediaSource&&i.mediaSource.removeSourceBuffer(e),i.sourceBuffer[t]=void 0)}catch(e){J.b.warn("[buffer-controller]: Failed to reset the "+t+" buffer",e)}}),this._initSourceBuffer()},t.onBufferCodecs=function(e,s){var l=this,d=this.getSourceBufferTypes().length;Object.keys(s).forEach(function(e){if(d){var t=l.tracks[e];if(t&&"function"==typeof t.buffer.changeType){var i=s[e],n=i.codec,r=i.levelCodec,a=i.container;if((t.levelCodec||t.codec).replace(et,"$1")!==(r||n).replace(et,"$1")){var o=a+";codecs="+(r||n);l.appendChangeType(e,o)}}}else l.pendingTracks[e]=s[e]}),d||(this.bufferCodecEventsExpected=Math.max(this.bufferCodecEventsExpected-1,0),this.mediaSource&&"open"===this.mediaSource.readyState&&this.checkPendingTracks())},t.appendChangeType=function(t,i){var n=this,r=this.operationQueue,e={execute:function(){var e=n.sourceBuffer[t];e&&(J.b.log("[buffer-controller]: changing "+t+" sourceBuffer type to "+i),e.changeType(i)),r.shiftAndExecuteNext(t)},onStart:function(){},onComplete:function(){},onError:function(e){J.b.warn("[buffer-controller]: Failed to change "+t+" SourceBuffer type",e)}};r.append(e,t)},t.onBufferAppending=function(e,t){var r=this,i=this.hls,n=this.operationQueue,a=this.tracks,o=t.data,s=t.type,l=t.frag,d=t.part,u=t.chunkMeta,c=u.buffering[s],h=self.performance.now();c.start=h;var f=l.stats.buffering,p=d?d.stats.buffering:null;0===f.start&&(f.start=h),p&&0===p.start&&(p.start=h);var g=a.audio,m="audio"===s&&1===u.id&&"audio/mpeg"===(null==g?void 0:g.container),v={execute:function(){if(c.executeStart=self.performance.now(),m){var e=r.sourceBuffer[s];if(e){var t=l.start-e.timestampOffset;.1<=Math.abs(t)&&(J.b.log("[buffer-controller]: Updating audio SourceBuffer timestampOffset to "+l.start+" (delta: "+t+") sn: "+l.sn+")"),e.timestampOffset=l.start)}}r.appendExecutor(o,s)},onStart:function(){},onComplete:function(){var e=self.performance.now();c.executeEnd=c.end=e,0===f.first&&(f.first=e),p&&0===p.first&&(p.first=e);var t=r.sourceBuffer,i={};for(var n in t)i[n]=q.getBuffered(t[n]);r.appendError=0,r.hls.trigger(k.a.BUFFER_APPENDED,{type:s,frag:l,part:d,chunkMeta:u,parent:l.type,timeRanges:i})},onError:function(e){J.b.error("[buffer-controller]: Error encountered while trying to append to the "+s+" SourceBuffer",e);var t={type:b.b.MEDIA_ERROR,parent:l.type,details:b.a.BUFFER_APPEND_ERROR,err:e,fatal:!1};e.code===DOMException.QUOTA_EXCEEDED_ERR?t.details=b.a.BUFFER_FULL_ERROR:(r.appendError++,t.details=b.a.BUFFER_APPEND_ERROR,r.appendError>i.config.appendErrorMaxRetry&&(J.b.error("[buffer-controller]: Failed "+i.config.appendErrorMaxRetry+" times to append segment in sourceBuffer"),t.fatal=!0)),i.trigger(k.a.ERROR,t)}};n.append(v,s)},t.onBufferFlushing=function(e,i){var n=this,t=this.operationQueue,r=function(t){return{execute:n.removeExecutor.bind(n,t,i.startOffset,i.endOffset),onStart:function(){},onComplete:function(){n.hls.trigger(k.a.BUFFER_FLUSHED,{type:t})},onError:function(e){J.b.warn("[buffer-controller]: Failed to remove from "+t+" SourceBuffer",e)}}};i.type?t.append(r(i.type),i.type):this.getSourceBufferTypes().forEach(function(e){t.append(r(e),e)})},t.onFragParsed=function(e,t){var i=this,n=t.frag,r=t.part,a=[],o=r?r.elementaryStreams:n.elementaryStreams;o[Z.a.AUDIOVIDEO]?a.push("audiovideo"):(o[Z.a.AUDIO]&&a.push("audio"),o[Z.a.VIDEO]&&a.push("video")),0===a.length&&J.b.warn("Fragments must have at least one ElementaryStreamType set. type: "+n.type+" level: "+n.level+" sn: "+n.sn),this.blockBuffers(function(){var e=self.performance.now();n.stats.buffering.end=e,r&&(r.stats.buffering.end=e);var t=r?r.stats:n.stats;i.hls.trigger(k.a.FRAG_BUFFERED,{frag:n,part:r,stats:t,id:n.type})},a)},t.onFragChanged=function(e,t){this.flushBackBuffer()},t.onBufferEos=function(e,n){var r=this;this.getSourceBufferTypes().reduce(function(e,t){var i=r.sourceBuffer[t];return n.type&&n.type!==t||i&&!i.ended&&(i.ended=!0,J.b.log("[buffer-controller]: "+t+" sourceBuffer now EOS")),e&&!(i&&!i.ended)},!0)&&this.blockBuffers(function(){var e=r.mediaSource;e&&"open"===e.readyState&&e.endOfStream()})},t.onLevelUpdated=function(e,t){var i=t.details;i.fragments.length&&(this.details=i,this.getSourceBufferTypes().length?this.blockBuffers(this.updateMediaElementDuration.bind(this)):this.updateMediaElementDuration())},t.flushBackBuffer=function(){var n=this.hls,r=this.details,e=this.media,a=this.sourceBuffer;if(e&&null!==r){var t=this.getSourceBufferTypes();if(t.length){var i=r.live&&null!==n.config.liveBackBufferLength?n.config.liveBackBufferLength:n.config.backBufferLength;if(Object(X.a)(i)&&!(i<0)){var o=e.currentTime,s=r.levelTargetDuration,l=Math.max(i,s),d=Math.floor(o/s)*s-l;t.forEach(function(e){var t=a[e];if(t){var i=q.getBuffered(t);0<i.length&&d>i.start(0)&&(n.trigger(k.a.BACK_BUFFER_REACHED,{bufferEnd:d}),r.live&&n.trigger(k.a.LIVE_BACK_BUFFER_REACHED,{bufferEnd:d}),n.trigger(k.a.BUFFER_FLUSHING,{startOffset:0,endOffset:d,type:e}))}})}}}},t.updateMediaElementDuration=function(){if(this.details&&this.media&&this.mediaSource&&"open"===this.mediaSource.readyState){var e=this.details,t=this.hls,i=this.media,n=this.mediaSource,r=e.fragments[0].start+e.totalduration,a=i.duration,o=Object(X.a)(n.duration)?n.duration:0;e.live&&t.config.liveDurationInfinity?(J.b.log("[buffer-controller]: Media Source duration is set to Infinity"),n.duration=1/0,this.updateSeekableRange(e)):(o<r&&a<r||!Object(X.a)(a))&&(J.b.log("[buffer-controller]: Updating Media Source duration to "+r.toFixed(3)),n.duration=r)}},t.updateSeekableRange=function(e){var t=this.mediaSource,i=e.fragments;if(i.length&&e.live&&null!=t&&t.setLiveSeekableRange){var n=Math.max(0,i[0].start),r=Math.max(n,n+e.totalduration);t.setLiveSeekableRange(n,r)}},t.checkPendingTracks=function(){var e=this.bufferCodecEventsExpected,t=this.operationQueue,i=this.pendingTracks,n=Object.keys(i).length;if(n&&!e||2===n){this.createSourceBuffers(i),this.pendingTracks={};var r=this.getSourceBufferTypes();if(0===r.length)return void this.hls.trigger(k.a.ERROR,{type:b.b.MEDIA_ERROR,details:b.a.BUFFER_INCOMPATIBLE_CODECS_ERROR,fatal:!0,reason:"could not create source buffer for media codec(s)"});r.forEach(function(e){t.executeNext(e)})}},t.createSourceBuffers=function(e){var t=this.sourceBuffer,i=this.mediaSource;if(!i)throw Error("createSourceBuffers called when mediaSource was null");var n=0;for(var r in e)if(!t[r]){var a=e[r];if(!a)throw Error("source buffer exists for track "+r+", however track does not");var o=a.levelCodec||a.codec,s=a.container+";codecs="+o;J.b.log("[buffer-controller]: creating sourceBuffer("+s+")");try{var l=t[r]=i.addSourceBuffer(s),d=r;this.addBufferListener(d,"updatestart",this._onSBUpdateStart),this.addBufferListener(d,"updateend",this._onSBUpdateEnd),this.addBufferListener(d,"error",this._onSBUpdateError),this.tracks[r]={buffer:l,codec:o,container:a.container,levelCodec:a.levelCodec,id:a.id},n++}catch(e){J.b.error("[buffer-controller]: error while trying to add sourceBuffer: "+e.message),this.hls.trigger(k.a.ERROR,{type:b.b.MEDIA_ERROR,details:b.a.BUFFER_ADD_CODEC_ERROR,fatal:!1,error:e,mimeType:s})}}n&&this.hls.trigger(k.a.BUFFER_CREATED,{tracks:this.tracks})},t._onSBUpdateStart=function(e){this.operationQueue.current(e).onStart()},t._onSBUpdateEnd=function(e){var t=this.operationQueue;t.current(e).onComplete(),t.shiftAndExecuteNext(e)},t._onSBUpdateError=function(e,t){J.b.error("[buffer-controller]: "+e+" SourceBuffer error",t),this.hls.trigger(k.a.ERROR,{type:b.b.MEDIA_ERROR,details:b.a.BUFFER_APPENDING_ERROR,fatal:!1});var i=this.operationQueue.current(e);i&&i.onError(t)},t.removeExecutor=function(e,t,i){var n=this.media,r=this.mediaSource,a=this.operationQueue,o=this.sourceBuffer[e];if(!n||!r||!o)return J.b.warn("[buffer-controller]: Attempting to remove from the "+e+" SourceBuffer, but it does not exist"),void a.shiftAndExecuteNext(e);var s=Object(X.a)(n.duration)?n.duration:1/0,l=Object(X.a)(r.duration)?r.duration:1/0,d=Math.max(0,t),u=Math.min(i,s,l);d<u?(J.b.log("[buffer-controller]: Removing ["+d+","+u+"] from the "+e+" SourceBuffer"),o.remove(d,u)):a.shiftAndExecuteNext(e)},t.appendExecutor=function(e,t){var i=this.operationQueue,n=this.sourceBuffer[t];if(!n)return J.b.warn("[buffer-controller]: Attempting to append to the "+t+" SourceBuffer, but it does not exist"),void i.shiftAndExecuteNext(t);n.ended=!1,n.appendBuffer(e)},t.blockBuffers=function(e,t){var i=this;if(void 0===t&&(t=this.getSourceBufferTypes()),!t.length)return J.b.log("[buffer-controller]: Blocking operation requested, but no SourceBuffers exist"),void Promise.resolve(e);var n=this.operationQueue,r=t.map(function(e){return n.appendBlocker(e)});Promise.all(r).then(function(){e(),t.forEach(function(e){var t=i.sourceBuffer[e];t&&t.updating||n.shiftAndExecuteNext(e)})})},t.getSourceBufferTypes=function(){return Object.keys(this.sourceBuffer)},t.addBufferListener=function(e,t,i){var n=this.sourceBuffer[e];if(n){var r=i.bind(this,e);this.listeners[e].push({event:t,listener:r}),n.addEventListener(t,r)}},t.removeBufferListeners=function(e){var t=this.sourceBuffer[e];t&&this.listeners[e].forEach(function(e){t.removeEventListener(e.event,e.listener)})},e}();function it(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var nt=function(){function r(e){this.autoLevelCapping=void 0,this.firstLevel=void 0,this.media=void 0,this.restrictedLevels=void 0,this.timer=void 0,this.hls=void 0,this.streamController=void 0,this.clientRect=void 0,this.hls=e,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.firstLevel=-1,this.media=null,this.restrictedLevels=[],this.timer=void 0,this.clientRect=null,this.registerListeners()}var e,t,i=r.prototype;return i.setStreamController=function(e){this.streamController=e},i.destroy=function(){this.unregisterListener(),this.hls.config.capLevelToPlayerSize&&this.stopCapping(),this.media=null,this.clientRect=null,this.hls=this.streamController=null},i.registerListeners=function(){var e=this.hls;e.on(k.a.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.on(k.a.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(k.a.MANIFEST_PARSED,this.onManifestParsed,this),e.on(k.a.BUFFER_CODECS,this.onBufferCodecs,this),e.on(k.a.MEDIA_DETACHING,this.onMediaDetaching,this)},i.unregisterListener=function(){var e=this.hls;e.off(k.a.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.off(k.a.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(k.a.MANIFEST_PARSED,this.onManifestParsed,this),e.off(k.a.BUFFER_CODECS,this.onBufferCodecs,this),e.off(k.a.MEDIA_DETACHING,this.onMediaDetaching,this)},i.onFpsDropLevelCapping=function(e,t){r.isLevelAllowed(t.droppedLevel,this.restrictedLevels)&&this.restrictedLevels.push(t.droppedLevel)},i.onMediaAttaching=function(e,t){this.media=t.media instanceof HTMLVideoElement?t.media:null},i.onManifestParsed=function(e,t){var i=this.hls;this.restrictedLevels=[],this.firstLevel=t.firstLevel,i.config.capLevelToPlayerSize&&t.video&&this.startCapping()},i.onBufferCodecs=function(e,t){this.hls.config.capLevelToPlayerSize&&t.video&&this.startCapping()},i.onMediaDetaching=function(){this.stopCapping()},i.detectPlayerSize=function(){if(this.media&&0<this.mediaHeight&&0<this.mediaWidth){var e=this.hls.levels;if(e.length){var t=this.hls;t.autoLevelCapping=this.getMaxLevel(e.length-1),t.autoLevelCapping>this.autoLevelCapping&&this.streamController&&this.streamController.nextLevelSwitch(),this.autoLevelCapping=t.autoLevelCapping}}},i.getMaxLevel=function(i){var n=this,e=this.hls.levels;if(!e.length)return-1;var t=e.filter(function(e,t){return r.isLevelAllowed(t,n.restrictedLevels)&&t<=i});return this.clientRect=null,r.getMaxLevelByMediaSize(t,this.mediaWidth,this.mediaHeight)},i.startCapping=function(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.hls.firstLevel=this.getMaxLevel(this.firstLevel),self.clearInterval(this.timer),this.timer=self.setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())},i.stopCapping=function(){this.restrictedLevels=[],this.firstLevel=-1,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(self.clearInterval(this.timer),this.timer=void 0)},i.getDimensions=function(){if(this.clientRect)return this.clientRect;var e=this.media,t={width:0,height:0};if(e){var i=e.getBoundingClientRect();t.width=i.width,t.height=i.height,t.width||t.height||(t.width=i.right-i.left||e.width||0,t.height=i.bottom-i.top||e.height||0)}return this.clientRect=t},r.isLevelAllowed=function(e,t){return void 0===t&&(t=[]),-1===t.indexOf(e)},r.getMaxLevelByMediaSize=function(e,t,i){if(!e||!e.length)return-1;for(var n,r,a=e.length-1,o=0;o<e.length;o+=1){var s=e[o];if((s.width>=t||s.height>=i)&&(n=s,!(r=e[o+1])||n.width!==r.width||n.height!==r.height)){a=o;break}}return a},t=[{key:"contentScaleFactor",get:function(){var e=1;try{e=self.devicePixelRatio}catch(e){}return e}}],it((e=r).prototype,[{key:"mediaWidth",get:function(){return this.getDimensions().width*r.contentScaleFactor}},{key:"mediaHeight",get:function(){return this.getDimensions().height*r.contentScaleFactor}}]),it(e,t),r}(),rt=function(){function e(e){this.hls=void 0,this.isVideoPlaybackQualityAvailable=!1,this.timer=void 0,this.media=null,this.lastTime=void 0,this.lastDroppedFrames=0,this.lastDecodedFrames=0,this.streamController=void 0,this.hls=e,this.registerListeners()}var t=e.prototype;return t.setStreamController=function(e){this.streamController=e},t.registerListeners=function(){this.hls.on(k.a.MEDIA_ATTACHING,this.onMediaAttaching,this)},t.unregisterListeners=function(){this.hls.off(k.a.MEDIA_ATTACHING,this.onMediaAttaching)},t.destroy=function(){this.timer&&clearInterval(this.timer),this.unregisterListeners(),this.isVideoPlaybackQualityAvailable=!1,this.media=null},t.onMediaAttaching=function(e,t){var i=this.hls.config;if(i.capLevelOnFPSDrop){var n=t.media instanceof self.HTMLVideoElement?t.media:null;(this.media=n)&&"function"==typeof n.getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),self.clearInterval(this.timer),this.timer=self.setInterval(this.checkFPSInterval.bind(this),i.fpsDroppedMonitoringPeriod)}},t.checkFPS=function(e,t,i){var n=performance.now();if(t){if(this.lastTime){var r=n-this.lastTime,a=i-this.lastDroppedFrames,o=t-this.lastDecodedFrames,s=1e3*a/r,l=this.hls;if(l.trigger(k.a.FPS_DROP,{currentDropped:a,currentDecoded:o,totalDroppedFrames:i}),0<s&&a>l.config.fpsDroppedMonitoringThreshold*o){var d=l.currentLevel;J.b.warn("drop FPS ratio greater than max allowed value for currentLevel: "+d),0<d&&(-1===l.autoLevelCapping||l.autoLevelCapping>=d)&&(d-=1,l.trigger(k.a.FPS_DROP_LEVEL_CAPPING,{level:d,droppedLevel:l.currentLevel}),l.autoLevelCapping=d,this.streamController.nextLevelSwitch())}}this.lastTime=n,this.lastDroppedFrames=i,this.lastDecodedFrames=t}},t.checkFPSInterval=function(){var e=this.media;if(e)if(this.isVideoPlaybackQualityAvailable){var t=e.getVideoPlaybackQuality();this.checkFPS(e,t.totalVideoFrames,t.droppedVideoFrames)}else this.checkFPS(e,e.webkitDecodedFrameCount,e.webkitDroppedFrameCount)},e}(),at=i(11),ot=/^age:\s*[\d.]+\s*$/m,st=function(){function e(e){this.xhrSetup=void 0,this.requestTimeout=void 0,this.retryTimeout=void 0,this.retryDelay=void 0,this.config=null,this.callbacks=null,this.context=void 0,this.loader=null,this.stats=void 0,this.xhrSetup=e?e.xhrSetup:null,this.stats=new at.a,this.retryDelay=0}var t=e.prototype;return t.destroy=function(){this.callbacks=null,this.abortInternal(),this.loader=null,this.config=null},t.abortInternal=function(){var e=this.loader;self.clearTimeout(this.requestTimeout),self.clearTimeout(this.retryTimeout),e&&(e.onreadystatechange=null,e.onprogress=null,4!==e.readyState&&(this.stats.aborted=!0,e.abort()))},t.abort=function(){var e;this.abortInternal(),null!==(e=this.callbacks)&&void 0!==e&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.loader)},t.load=function(e,t,i){if(this.stats.loading.start)throw new Error("Loader can only be used once.");this.stats.loading.start=self.performance.now(),this.context=e,this.config=t,this.callbacks=i,this.retryDelay=t.retryDelay,this.loadInternal()},t.loadInternal=function(){var e=this.config,t=this.context;if(e){var i=this.loader=new self.XMLHttpRequest,n=this.stats;n.loading.first=0,n.loaded=0;var r=this.xhrSetup;try{if(r)try{r(i,t.url)}catch(e){i.open("GET",t.url,!0),r(i,t.url)}i.readyState||i.open("GET",t.url,!0)}catch(e){return void this.callbacks.onError({code:i.status,text:e.message},t,i)}t.rangeEnd&&i.setRequestHeader("Range","bytes="+t.rangeStart+"-"+(t.rangeEnd-1)),i.onreadystatechange=this.readystatechange.bind(this),i.onprogress=this.loadprogress.bind(this),i.responseType=t.responseType,self.clearTimeout(this.requestTimeout),this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),e.timeout),i.send()}},t.readystatechange=function(){var e=this.context,t=this.loader,i=this.stats;if(e&&t){var n=t.readyState,r=this.config;if(!i.aborted&&2<=n)if(self.clearTimeout(this.requestTimeout),0===i.loading.first&&(i.loading.first=Math.max(self.performance.now(),i.loading.start)),4===n){t.onreadystatechange=null,t.onprogress=null;var a=t.status;if(200<=a&&a<300){var o,s;if(i.loading.end=Math.max(self.performance.now(),i.loading.first),s="arraybuffer"===e.responseType?(o=t.response).byteLength:(o=t.responseText).length,i.loaded=i.total=s,!this.callbacks)return;var l=this.callbacks.onProgress;if(l&&l(i,e,o,t),!this.callbacks)return;var d={url:t.responseURL,data:o};this.callbacks.onSuccess(d,i,e,t)}else i.retry>=r.maxRetry||400<=a&&a<499?(J.b.error(a+" while loading "+e.url),this.callbacks.onError({code:a,text:t.statusText},e,t)):(J.b.warn(a+" while loading "+e.url+", retrying in "+this.retryDelay+"..."),this.abortInternal(),this.loader=null,self.clearTimeout(this.retryTimeout),this.retryTimeout=self.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,r.maxRetryDelay),i.retry++)}else self.clearTimeout(this.requestTimeout),this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),r.timeout)}},t.loadtimeout=function(){J.b.warn("timeout while loading "+this.context.url);var e=this.callbacks;e&&(this.abortInternal(),e.onTimeout(this.stats,this.context,this.loader))},t.loadprogress=function(e){var t=this.stats;t.loaded=e.loaded,e.lengthComputable&&(t.total=e.total)},t.getCacheAge=function(){var e=null;if(this.loader&&ot.test(this.loader.getAllResponseHeaders())){var t=this.loader.getResponseHeader("age");e=t?parseFloat(t):null}return e},e}(),lt=i(15);function dt(e){var n="function"==typeof Map?new Map:void 0;return(dt=function(e){if(null===e||(t=e,-1===Function.toString.call(t).indexOf("[native code]")))return e;var t;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(e))return n.get(e);n.set(e,i)}function i(){return ut(e,arguments,ht(this).constructor)}return i.prototype=Object.create(e.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),ct(i,e)})(e)}function ut(e,t,i){return(ut=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,i){var n=[null];n.push.apply(n,t);var r=new(Function.bind.apply(e,n));return i&&ct(r,i.prototype),r}).apply(null,arguments)}function ct(e,t){return(ct=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ht(e){return(ht=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ft=function(){function e(e){this.fetchSetup=void 0,this.requestTimeout=void 0,this.request=void 0,this.response=void 0,this.controller=void 0,this.context=void 0,this.config=null,this.callbacks=null,this.stats=void 0,this.loader=null,this.fetchSetup=e.fetchSetup||pt,this.controller=new self.AbortController,this.stats=new at.a}var t=e.prototype;return t.destroy=function(){this.loader=this.callbacks=null,this.abortInternal()},t.abortInternal=function(){var e=this.response;e&&e.ok||(this.stats.aborted=!0,this.controller.abort())},t.abort=function(){var e;this.abortInternal(),null!==(e=this.callbacks)&&void 0!==e&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.response)},t.load=function(n,r,a){var o=this,s=this.stats;if(s.loading.start)throw new Error("Loader can only be used once.");s.loading.start=self.performance.now();var e=function(e,t){var i={method:"GET",mode:"cors",credentials:"same-origin",signal:t};return e.rangeEnd&&(i.headers=new self.Headers({Range:"bytes="+e.rangeStart+"-"+String(e.rangeEnd-1)})),i}(n,this.controller.signal),l=a.onProgress,d="arraybuffer"===n.responseType,u=d?"byteLength":"length";this.context=n,this.config=r,this.callbacks=a,this.request=this.fetchSetup(n,e),self.clearTimeout(this.requestTimeout),this.requestTimeout=self.setTimeout(function(){o.abortInternal(),a.onTimeout(s,n,o.response)},r.timeout),self.fetch(this.request).then(function(e){if(o.response=o.loader=e,e.ok)return s.loading.first=Math.max(self.performance.now(),s.loading.start),s.total=parseInt(e.headers.get("Content-Length")||"0"),l&&Object(X.a)(r.highWaterMark)?o.loadProgressively(e,s,n,r.highWaterMark,l):d?e.arrayBuffer():e.text();var t=e.status,i=e.statusText;throw new mt(i||"fetch, bad network response",t,e)}).then(function(e){var t=o.response;self.clearTimeout(o.requestTimeout),s.loading.end=Math.max(self.performance.now(),s.loading.first),s.loaded=s.total=e[u];var i={url:t.url,data:e};l&&!Object(X.a)(r.highWaterMark)&&l(s,n,e,t),a.onSuccess(i,s,n,t)}).catch(function(e){if(self.clearTimeout(o.requestTimeout),!s.aborted){var t=e.code||0;a.onError({code:t,text:e.message},n,e.details)}})},t.getCacheAge=function(){var e=null;if(this.response){var t=this.response.headers.get("age");e=t?parseFloat(t):null}return e},t.loadProgressively=function(r,a,o,s,l){void 0===s&&(s=0);var d=new lt.a,e=r.body.getReader();return function n(){return e.read().then(function(e){if(e.done)return d.dataLength&&l(a,o,d.flush(),r),Promise.resolve(new ArrayBuffer(0));var t=e.value,i=t.length;return a.loaded+=i,i<s||d.dataLength?(d.push(t),d.dataLength>=s&&l(a,o,d.flush(),r)):l(a,o,t,r),n()}).catch(function(){return Promise.reject()})}()},e}();function pt(e,t){return new self.Request(e.url,t)}var gt,mt=function(r){var e,t;function i(e,t,i){var n;return(n=r.call(this,e)||this).code=void 0,n.details=void 0,n.code=t,n.details=i,n}return t=r,(e=i).prototype=Object.create(t.prototype),ct(e.prototype.constructor=e,t),i}(dt(Error)),vt=ft;!function(e){e.WIDEVINE="com.widevine.alpha",e.PLAYREADY="com.microsoft.playready"}(gt=gt||{});var yt="undefined"!=typeof self&&self.navigator&&self.navigator.requestMediaKeySystemAccess?self.navigator.requestMediaKeySystemAccess.bind(self.navigator):null;function bt(){return(bt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}function wt(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,n)}return i}function Et(r){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?wt(Object(a),!0).forEach(function(e){var t,i,n;t=r,n=a[i=e],i in t?Object.defineProperty(t,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[i]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(a)):wt(Object(a)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(a,e))})}return r}var St=Et(Et({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,initialLiveManifestSize:1,maxBufferLength:30,backBufferLength:1/0,maxBufferSize:6e7,maxBufferHole:.1,highBufferWatchdogPeriod:2,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxLiveSyncPlaybackRate:1,liveDurationInfinity:!1,liveBackBufferLength:null,maxMaxBufferLength:600,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,startLevel:void 0,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:st,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,licenseResponseCallback:void 0,abrController:Ke,bufferController:tt,capLevelController:nt,fpsController:rt,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystemOptions:{},requestMediaKeySystemAccessFunc:yt,testBandwidth:!0,progressive:!1,lowLatencyMode:!0},{cueHandler:Je.a,enableCEA708Captions:!1,enableWebVTT:!1,enableIMSC1:!1,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}),{},{subtitleStreamController:void 0,subtitleTrackController:void 0,timelineController:void 0,audioStreamController:void 0,audioTrackController:void 0,emeController:void 0});function At(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Tt=function(){function y(e){void 0===e&&(e={}),this.config=void 0,this.userConfig=void 0,this.coreComponents=void 0,this.networkControllers=void 0,this._emitter=new Ue.EventEmitter,this._autoLevelCapping=void 0,this.abrController=void 0,this.bufferController=void 0,this.capLevelController=void 0,this.latencyController=void 0,this.levelController=void 0,this.streamController=void 0,this.audioTrackController=void 0,this.subtitleTrackController=void 0,this.emeController=void 0,this._media=null,this.url=null;var t=this.config=function(e,t){if((t.liveSyncDurationCount||t.liveMaxLatencyDurationCount)&&(t.liveSyncDuration||t.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");if(void 0!==t.liveMaxLatencyDurationCount&&(void 0===t.liveSyncDurationCount||t.liveMaxLatencyDurationCount<=t.liveSyncDurationCount))throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be greater than "liveSyncDurationCount"');if(void 0!==t.liveMaxLatencyDuration&&(void 0===t.liveSyncDuration||t.liveMaxLatencyDuration<=t.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be greater than "liveSyncDuration"');return bt({},e,t)}(y.DefaultConfig,e);this.userConfig=e,Object(J.a)(t.debug),this._autoLevelCapping=-1,t.progressive&&function(e){var t=e.loader;t!==vt&&t!==st?(J.b.log("[config]: Custom loader detected, cannot enable progressive streaming"),e.progressive=!1):function(){if(self.fetch&&self.AbortController&&self.ReadableStream&&self.Request)try{return new self.ReadableStream({}),!0}catch(e){}return!1}()&&(e.loader=vt,e.progressive=!0,e.enableSoftwareAES=!0,J.b.log("[config]: Progressive streaming enabled, using FetchLoader"))}(t);var i=t.abrController,n=t.bufferController,r=t.capLevelController,a=t.fpsController,o=this.abrController=new i(this),s=this.bufferController=new n(this),l=this.capLevelController=new r(this),d=new a(this),u=new E(this),c=new S(this),h=new T(this),f=this.levelController=new j(this),p=new H(this),g=this.streamController=new We(this,p);l.setStreamController(g),d.setStreamController(g);var m=[f,g];this.networkControllers=m;var v=[u,c,o,s,l,d,h,p];this.audioTrackController=this.createController(t.audioTrackController,null,m),this.createController(t.audioStreamController,p,m),this.subtitleTrackController=this.createController(t.subtitleTrackController,null,m),this.createController(t.subtitleStreamController,p,m),this.createController(t.timelineController,null,v),this.emeController=this.createController(t.emeController,null,v),this.latencyController=this.createController(L,null,v),this.coreComponents=v}y.isSupported=function(){return function(){var e=Be();if(!e)return!1;var t=Fe(),i=e&&"function"==typeof e.isTypeSupported&&e.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),n=!t||t.prototype&&"function"==typeof t.prototype.appendBuffer&&"function"==typeof t.prototype.remove;return!!i&&!!n}()};var e,t,i=y.prototype;return i.createController=function(e,t,i){if(e){var n=t?new e(this,t):new e(this);return i&&i.push(n),n}return null},i.on=function(e,t,i){void 0===i&&(i=this),this._emitter.on(e,t,i)},i.once=function(e,t,i){void 0===i&&(i=this),this._emitter.once(e,t,i)},i.removeAllListeners=function(e){this._emitter.removeAllListeners(e)},i.off=function(e,t,i,n){void 0===i&&(i=this),this._emitter.off(e,t,i,n)},i.listeners=function(e){return this._emitter.listeners(e)},i.emit=function(e,t,i){return this._emitter.emit(e,t,i)},i.trigger=function(e,t){if(this.config.debug)return this.emit(e,e,t);try{return this.emit(e,e,t)}catch(t){J.b.error("An internal error happened while handling event "+e+'. Error message: "'+t.message+'". Here is a stacktrace:',t),this.trigger(k.a.ERROR,{type:b.b.OTHER_ERROR,details:b.a.INTERNAL_EXCEPTION,fatal:!1,event:e,error:t})}return!1},i.listenerCount=function(e){return this._emitter.listenerCount(e)},i.destroy=function(){J.b.log("destroy"),this.trigger(k.a.DESTROYING,void 0),this.detachMedia(),this.removeAllListeners(),this._autoLevelCapping=-1,this.url=null,this.networkControllers.forEach(function(e){return e.destroy()}),this.networkControllers.length=0,this.coreComponents.forEach(function(e){return e.destroy()}),this.coreComponents.length=0},i.attachMedia=function(e){J.b.log("attachMedia"),this._media=e,this.trigger(k.a.MEDIA_ATTACHING,{media:e})},i.detachMedia=function(){J.b.log("detachMedia"),this.trigger(k.a.MEDIA_DETACHING,void 0),this._media=null},i.loadSource=function(e){this.stopLoad();var t=this.media,i=this.url,n=this.url=K.buildAbsoluteURL(self.location.href,e,{alwaysNormalize:!0});J.b.log("loadSource:"+n),t&&i&&i!==n&&this.bufferController.hasSourceTypes()&&(this.detachMedia(),this.attachMedia(t)),this.trigger(k.a.MANIFEST_LOADING,{url:e})},i.startLoad=function(t){void 0===t&&(t=-1),J.b.log("startLoad("+t+")"),this.networkControllers.forEach(function(e){e.startLoad(t)})},i.stopLoad=function(){J.b.log("stopLoad"),this.networkControllers.forEach(function(e){e.stopLoad()})},i.swapAudioCodec=function(){J.b.log("swapAudioCodec"),this.streamController.swapAudioCodec()},i.recoverMediaError=function(){J.b.log("recoverMediaError");var e=this._media;this.detachMedia(),e&&this.attachMedia(e)},i.removeLevel=function(e,t){void 0===t&&(t=0),this.levelController.removeLevel(e,t)},t=[{key:"version",get:function(){return"1.0.3"}},{key:"Events",get:function(){return k.a}},{key:"ErrorTypes",get:function(){return b.b}},{key:"ErrorDetails",get:function(){return b.a}},{key:"DefaultConfig",get:function(){return y.defaultConfig?y.defaultConfig:St},set:function(e){y.defaultConfig=e}}],At((e=y).prototype,[{key:"levels",get:function(){var e=this.levelController.levels;return e||[]}},{key:"currentLevel",get:function(){return this.streamController.currentLevel},set:function(e){J.b.log("set currentLevel:"+e),this.loadLevel=e,this.abrController.clearTimer(),this.streamController.immediateLevelSwitch()}},{key:"nextLevel",get:function(){return this.streamController.nextLevel},set:function(e){J.b.log("set nextLevel:"+e),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()}},{key:"loadLevel",get:function(){return this.levelController.level},set:function(e){J.b.log("set loadLevel:"+e),this.levelController.manualLevel=e}},{key:"nextLoadLevel",get:function(){return this.levelController.nextLoadLevel},set:function(e){this.levelController.nextLoadLevel=e}},{key:"firstLevel",get:function(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)},set:function(e){J.b.log("set firstLevel:"+e),this.levelController.firstLevel=e}},{key:"startLevel",get:function(){return this.levelController.startLevel},set:function(e){J.b.log("set startLevel:"+e),-1!==e&&(e=Math.max(e,this.minAutoLevel)),this.levelController.startLevel=e}},{key:"capLevelToPlayerSize",get:function(){return this.config.capLevelToPlayerSize},set:function(e){var t=!!e;t!==this.config.capLevelToPlayerSize&&(t?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=t)}},{key:"autoLevelCapping",get:function(){return this._autoLevelCapping},set:function(e){this._autoLevelCapping!==e&&(J.b.log("set autoLevelCapping:"+e),this._autoLevelCapping=e)}},{key:"bandwidthEstimate",get:function(){var e=this.abrController.bwEstimator;return e?e.getEstimate():NaN}},{key:"autoLevelEnabled",get:function(){return-1===this.levelController.manualLevel}},{key:"manualLevel",get:function(){return this.levelController.manualLevel}},{key:"minAutoLevel",get:function(){var e=this.levels,t=this.config.minAutoBitrate;if(!e)return 0;for(var i=e.length,n=0;n<i;n++)if(e[n].maxBitrate>t)return n;return 0}},{key:"maxAutoLevel",get:function(){var e=this.levels,t=this.autoLevelCapping;return-1===t&&e&&e.length?e.length-1:t}},{key:"nextAutoLevel",get:function(){return Math.min(Math.max(this.abrController.nextAutoLevel,this.minAutoLevel),this.maxAutoLevel)},set:function(e){this.abrController.nextAutoLevel=Math.max(this.minAutoLevel,e)}},{key:"audioTracks",get:function(){var e=this.audioTrackController;return e?e.audioTracks:[]}},{key:"audioTrack",get:function(){var e=this.audioTrackController;return e?e.audioTrack:-1},set:function(e){var t=this.audioTrackController;t&&(t.audioTrack=e)}},{key:"subtitleTracks",get:function(){var e=this.subtitleTrackController;return e?e.subtitleTracks:[]}},{key:"subtitleTrack",get:function(){var e=this.subtitleTrackController;return e?e.subtitleTrack:-1},set:function(e){var t=this.subtitleTrackController;t&&(t.subtitleTrack=e)}},{key:"media",get:function(){return this._media}},{key:"subtitleDisplay",get:function(){var e=this.subtitleTrackController;return!!e&&e.subtitleDisplay},set:function(e){var t=this.subtitleTrackController;t&&(t.subtitleDisplay=e)}},{key:"lowLatencyMode",get:function(){return this.config.lowLatencyMode},set:function(e){this.config.lowLatencyMode=e}},{key:"liveSyncPosition",get:function(){return this.latencyController.liveSyncPosition}},{key:"latency",get:function(){return this.latencyController.latency}},{key:"maxLatency",get:function(){return this.latencyController.maxLatency}},{key:"targetLatency",get:function(){return this.latencyController.targetLatency}},{key:"drift",get:function(){return this.latencyController.drift}},{key:"forceStartLoad",get:function(){return this.streamController.forceStartLoad}}]),At(e,t),y}();Tt.defaultConfig=void 0}]).default)},function(e,t,i){"use strict";i.d(t,"a",function(){return r}),i.d(t,"b",function(){return a}),i.d(t,"c",function(){return o}),i.d(t,"e",function(){return s}),i.d(t,"d",function(){return l});var n=i(4);function r(e){return null!==e&&1==e}function a(e,t){return this.isMobile?null==t||t:null==e||e}function o(e,t,i,n){this.width=this.isMobile&&t||e,this.height=this.isMobile&&n||i}function s(e,t,i,n,r,a){null!=e&&null!=i&&null!=t&&(this.passbackCode=e,this.passbackWidth=t,this.passbackHeight=i,null!=n&&(this.passbackLength=n),null!=r&&(this.passbackAdSlots=r),this.passbackOnFirstBidding=a)}function l(e){(function(e,t){this.outofviewMethod=this.isMobile?t:e}).call(this,this.widgetStaticConfig.oovm,this.widgetStaticConfig.oovmm),function(e,t,i,n,r,a){""!=a&&("adonly"!=e&&"floater"!=e||(this.isMobile?i&&Array.isArray(i)?i.includes(a)||(this.outofviewMethod="play"):r&&Array.isArray(r)&&r.includes(a)&&(this.outofviewMethod="play"):t&&Array.isArray(t)?t.includes(a)||(this.outofviewMethod="play"):n&&Array.isArray(n)&&n.includes(a)&&(this.outofviewMethod="play")))}.call(this,this.outofviewMethod,this.widgetStaticConfig.iflc,this.widgetStaticConfig.iflcm,this.widgetStaticConfig.eflc,this.widgetStaticConfig.eflcm,e),"floater"!=this.outofviewMethod&&"adonly"!=this.outofviewMethod||(function(e,t,i){this.floaterWidthOnOutofview=this.isMobile?t||i:e||i}.call(this,this.widgetStaticConfig.oovfw,this.widgetStaticConfig.oovfwm,this.width),function(e,t,i){this.floaterHeightOnOutofview=this.isMobile?t||i:e||i}.call(this,this.widgetStaticConfig.oovfh,this.widgetStaticConfig.oovfhm,this.height),function(e,t,i){this.floaterPositionOutOfView=this.isMobile?t||i:e||i}.call(this,this.widgetStaticConfig.oovfp,this.widgetStaticConfig.oovfpm,"bottom-right"),function(e,t){this.outofviewFloaterStartWithFloater=this.isMobile?t||!1:e||!1}.call(this,this.widgetStaticConfig.oovfi,this.widgetStaticConfig.oovfim),"adonly"==this.outofviewMethod?(function(e,t){this.outofviewAdOnlyFQ=this.isMobile?t:e}.call(this,this.widgetStaticConfig.oofaofq,this.widgetStaticConfig.oofaofqm),function(e,t){this.outofviewAdOnlyFQDaily=this.isMobile?t:e}.call(this,this.widgetStaticConfig.oofaodfq,this.widgetStaticConfig.oofaodfqm),function(e,t){this.outofviewAdOnlyFQHourly=this.isMobile?t:e}.call(this,this.widgetStaticConfig.oovaohfq,this.widgetStaticConfig.oovadhfqm),(this.outofviewAdOnlyFQDaily||this.outofviewAdOnlyFQHourly)&&d.call(this,this.outofviewAdOnlyFQDaily,this.outofviewAdOnlyFQHourly)):"floater"==this.outofviewMethod&&(function(e,t){this.outofviewFloaterFQ=this.isMobile?t:e}.call(this,this.widgetStaticConfig.oovffq,this.widgetStaticConfig.oovffqm),function(e,t){this.outofviewFloaterFQDaily=this.isMobile?t:e}.call(this,this.widgetStaticConfig.oovfdfq,this.widgetStaticConfig.oovfdfqm),function(e,t){this.outofviewFloaterFQHourly=this.isMobile?t:e}.call(this,this.widgetStaticConfig.oovfhfq,this.widgetStaticConfig.oovfhfqm),(this.outofviewFloaterFQDaily||this.outofviewFloaterFQHourly)&&d.call(this,this.outofviewFloaterFQDaily,this.outofviewFloaterFQHourly)),function(e,t){this.floaterPadding=this.isMobile?t||0:e||0}.call(this,this.widgetStaticConfig.fp,this.widgetStaticConfig.fpm),this.closeFloaterDelay=this.widgetStaticConfig.cfd)}function d(e,t){this.outofviewCookieName="truvid_oov";var i=Object(n.a)(this.outofviewCookieName);i&&(i=JSON.parse(i),e&&(i.timesShown&&i.dailyFQTimestamp&&(new Date-new Date(i.dailyFQTimestamp))/1e3/60/60<24?this.floaterOOVTimesShown=i.timesShown:this.floaterOOVTimesShown=0),t&&(i.timesShownHourly&&i.hourlyFQTimestamp&&(new Date-new Date(i.hourlyFQTimestamp))/1e3/60/60<1?this.floaterOOVTimesShownHourly=i.timesShownHourly:this.floaterOOVTimesShownHourly=0))}},function(e,t,i){"use strict";i.d(t,"d",function(){return n}),i.d(t,"c",function(){return r}),i.d(t,"e",function(){return a}),i.d(t,"f",function(){return o}),i.d(t,"b",function(){return s}),i.d(t,"g",function(){return l}),i.d(t,"a",function(){return d});var n="floater",r="adonly",a="pause",o=864e5,s="truvid_oov",l="truvid_s",d=36e5},function(e,t,i){"use strict";function n(e,t,i){this.type=e,this.mediaFile=t,this.adParameters=i,this.isVAST=function(){return"video/mp4"==this.type},this.isIMA=function(){return"google/ima"==this.type},this.isVPAID=function(){return"application/javascript"==this.type},this.isSpotX=function(){return"spotsdk"==this.type}}i.d(t,"a",function(){return n})},function(e,t,i){"use strict";function n(a,o){return new Promise(function(e,t){void 0!==o&&o||(o=window.document);var i=o.createElement("script");i.src=a;var n=o.getElementsByTagName("head")[0],r=!1;i.onload=i.onreadystatechange=function(){r||this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(r=!0,i.onload=i.onreadystatechange=null,e())},i.onerror=function(){i.onerror=null,t()},n.appendChild(i)})}function r(n){return new Promise(function(e,t){var i=new Image;i.onload=function(){e()},i.onerror=function(){t()},i.src=n})}function a(n,r,a){return new Promise(function(e,t){var i=new XMLHttpRequest;i.onreadystatechange=function(){4==i.readyState&&200==i.status&&e(i.responseText)},a&&(i.ontimeout=function(e){t("on timeout status: "+i.status+" statusText: "+i.statusText)}),i.onerror=function(e){t("on error status: "+i.status+" statusText: "+i.statusText)},i.open("GET",n,!0),a&&(i.timeout=a),r&&(i.withCredentials=!0),i.send(null)})}i.d(t,"c",function(){return n}),i.d(t,"b",function(){return r}),i.d(t,"a",function(){return a})},function(e,t,i){"use strict";i.d(t,"e",function(){return a}),i.d(t,"b",function(){return o}),i.d(t,"c",function(){return s}),i.d(t,"d",function(){return l}),i.d(t,"a",function(){return d});var S=i(1),A=i(3),T=i(12),n=i(0);function w(e){return function(e){if(Array.isArray(e))return r(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return r(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return r(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var a="floaterOpened",o="floaterClosed",s="floaterClosedByUserRequest",l="floaterFQDecreased";function d(e,t){var i=t.enableFq,n=void 0!==i&&i,r=t.fq,a=void 0===r?0:r,o=t.showOnlyOnAds,s=void 0!==o&&o,l=t.showAfterPlayerView,d=void 0!==l&&l,u=t.openFloaterOnNextAd,c=void 0!==u&&u,h=t.width,f=void 0===h?320:h,p=t.height,g=void 0===p?180:p,m=t.padding,v=void 0===m?0:m,y=t.position,b=void 0===y?"bottom-left":y,w=t.counterToCloseFloater,E=void 0===w?0:w;this.player=e,this.fq=a,this.enableFq=n,this.showOnlyOnAds=s,this.openFloaterOnNextAd=c,this.playerElement=e.getPlayerElement(),this.showAfterPlayerView=!!d&&!this.isAvailableByUserPosition(),this.width=f,this.height=g,this.width=f,this.height=g,this.padding=v,this.position=b,this.isFloaterActive=!1,this.closeButtonElement=null,this.closeContainerElement=null,this.counterToCloseFloater=E,this.floaterClosedByUser=!1,this.forcePlayingAdsOnFloaterOnly=!1,this.maxWidthToOpen=this.width,e.subscribe(S.c,this.viewabilityCallback.bind(this)),e.subscribe(S.i,this.onPlayerResize.bind(this)),e.subscribe(S.o,this.onPlayerResize.bind(this)),(s||c)&&(e.subscribe(A.c,this.onAdStarted.bind(this)),s&&(e.subscribe(A.a,this.onAdEnd.bind(this)),e.subscribe(T.a,this.onAdEnd.bind(this)))),this.playerContainer=this.playerElement.parentElement}d.prototype.IsFloaterOpen=function(){return this.isFloaterActive},d.prototype.onAdStarted=function(){this.showOnlyOnAds||this.openFloaterOnNextAd?(this.floaterClosedByUser=!1,this.player.isPlayerInView()?this.forcePlayingAdsOnFloaterOnly&&this.Show(!0):this.Show(!0)):this.isFloaterActive&&this.resetCounter()},d.prototype.onAdEnd=function(e){if(this.isFloaterActive){if(void 0!==e.detail&&void 0!==e.detail.numberOfTimesAdSkipped&&0<e.detail.numberOfTimesAdSkipped&&this.enableFq&&this.fq){this.fq=this.fq-e.detail.numberOfTimesAdSkipped;for(var t=0;t<e.detail.numberOfTimesAdSkipped;t++)this.player.dispatchEvent(l)}this.showOnlyOnAds&&(this.floaterClosedByUser=!1,this.Hide())}},d.prototype.viewabilityCallback=function(e){(e=e.detail[0]).isIntersecting&&this.showAfterPlayerView?this.showAfterPlayerView=!1:e.isIntersecting?this.isFloaterActive&&(this.forcePlayingAdsOnFloaterOnly||this.Hide()):this.showOnlyOnAds&&!this.player.isAdPlaying()||e.isIntersecting||this.Show(!0)},d.prototype.getRealOffsetTop=function(e){for(var t=0;e;)t+=e.offsetTop,e=e.offsetParent;return t},d.prototype.isAvailableByUserPosition=function(){return this.getRealOffsetTop(this.player.getParentElement())<document.documentElement.scrollTop},d.prototype.isAvailableToShow=function(){return!this.isFloaterActive&&this.IsAvailableForAdOnly()&&(!this.showOnlyOnAds&&!this.floaterClosedByUser||this.showOnlyOnAds&&this.player.isAdPlaying()&&!this.floaterClosedByUser)},d.prototype.IsAvailableForAdOnly=function(){return(!this.enableFq||this.enableFq&&0<this.fq)&&!this.showAfterPlayerView},d.prototype.Show=function(e){this.isAvailableToShow()&&!this.isFloaterActive&&(this.isFloaterActive=!0,this.toggle(!0,e),this.player.isAdPlaying()?this.player.resizeAds():this.player.dispatchEvent(S.i),this.player.dispatchEvent(a))},d.prototype.Hide=function(e){this.isFloaterActive&&(this.toggle(!1,e),this.isFloaterActive=!1,this.player.dispatchEvent(S.i),this.player.dispatchEvent(o))},d.prototype.toggle=function(e,t){if(e){var i=document.createElement("div"),n=document.createElement("div");if(n.className="trv-close",i.id=this.playerElement.id+"_close",i.className="trv-close-container",i.style.cssText="width: "+this.width+"px;",this.closeContainerElement=i,this.closeButtonElement=n,this.closeContainerElement.appendChild(this.closeButtonElement),this.playerElement.appendChild(this.closeContainerElement),e&&this.width>document.documentElement.clientWidth&&document.documentElement.clientWidth<=this.maxWidthToOpen){var r=(this.height/this.width).toFixed(2);this.height=document.documentElement.clientWidth*r,this.width=document.documentElement.clientWidth}this.resetCounter(),this.applyStyle(e,t)}else this.applyStyle(e,t)},d.prototype.applyStyle=function(e,t){var i,n,r,a,o,s,l,d,u,c;if(e){switch(i="fixed",c=10,this.closeButtonElement.style.left="0px",this.position){case"top-right":n="auto",a=15+this.padding+"px",o="auto",this.closeContainerElement.style.top="0px",this.closeContainerElement.style.left="-28px",r=t?"-"+this.width+"px":"0px";break;case"top-left":r=n="auto",a=15+this.padding+"px",this.closeContainerElement.style.top="0px",this.closeContainerElement.style.right="-28px",o=t?"-"+this.width+"px":"0px";break;case"bottom-right":this.closeContainerElement.style.top="-28px",this.closeContainerElement.style.right="0px",n=this.padding+"px",r=t?"-"+this.width+"px":"0px",o=a="auto";break;case"bottom-left":this.closeContainerElement.style.top="-28px",this.closeContainerElement.style.left="0px",n=this.padding+"px",a=r="auto",o=t?"-"+this.width+"px":"0px";break;case"left-center":o=t?"-"+this.width+"px":"0px",this.closeContainerElement.style.top="-28px",this.closeContainerElement.style.left="0px",a=document.documentElement.clientHeight/2-this.height/2+"px",n=r="auto";break;case"right-center":o="auto",this.closeContainerElement.style.top="-28px",this.closeContainerElement.style.right="0px",a=document.documentElement.clientHeight/2-this.height/2+"px",r=t?"-"+this.width+"px":"0px",n="auto";break;case"middle-top":o=document.documentElement.clientWidth/2-this.width/2+"px",this.closeContainerElement.style.top="0px",this.closeContainerElement.style.left="-28px",a=t?"-"+this.height+"px":this.padding+"px",n=r="auto";break;case"middle-bottom":o=document.documentElement.clientWidth/2-this.width/2+"px",r=a="auto",this.closeContainerElement.style.top="-28px",this.closeContainerElement.style.left="0px",n=t?"-"+this.height+"px":this.padding+"px";break;default:this.closeContainerElement.style.top="-28px",this.closeContainerElement.style.left="0px",n=this.padding+"px",r="0px",o=a="auto"}this.closeButtonElement.style.position="absolute",this.closeContainerElement.style.position="absolute",s=this.width+"px",l=this.height+"px",d=u="0px"}else i="relative",o=a=r=n="auto",c=1,this.playerElement.style.transition="",this.playerElement.style.transition=null,this.player.isResponsive()?(l=s="100%",u="0px",i="absolute"):(s=this.player.getWidth()+"px",u="0px",l=this.player.getHeight()+"px",d="0px"),this.closeContainerElement.parentNode.removeChild(this.closeContainerElement);var h=document.getElementById(this.playerElement.id+"_close");h&&(h.style.width="23px");var f=this.position.includes("left"),p=this.position.includes("right"),g=this.position.includes("middle-top"),m=this.position.includes("middle-bottom");this.playerElement.style.top=e?g?"-".concat(l):a:"0px",this.playerElement.style.bottom=e?m?"-".concat(l):n:"0px",this.playerElement.style.left=e?f?"-".concat(s):o:"0px",this.playerElement.style.right=e?p?"-".concat(s):r:"0px",this.playerElement.style.width=s,this.playerElement.style.paddingBottom=d,this.playerElement.style.paddingTop=u,this.playerElement.style.setProperty("height",l,"important");var v,y,b=["trvdfloater",f?"trv-left":p?"trv-right":g?"trv-top":m?"trv-bottom":""].filter(Boolean);1<c?((v=this.playerElement.classList).add.apply(v,w(b)),this.playerElement.classList.remove("trvdinstream")):(this.playerElement.classList.add("trvdinstream"),(y=this.playerElement.classList).remove.apply(y,w(b)));this.playerContainer.style.display="block",this.playerContainer.style.width="100%",this.playerElement.style.position=i,this.player.resizeAds()},d.prototype.resetCounter=function(){var e=this.closeButtonElement;e.onclick=function(){this.player.handlePlayerInteraction(n.a.CloseFloater),this.counterToCloseFloater&&this.player.isAdPlaying()?this.closeFloaterCurrentTime<=0&&(clearInterval(this.closeFloaterDelayInterval),this.closeFloaterDelayInterval=null,this.floaterClosedByUser=!0,this.enableFq&&this.fq&&(this.fq--,this.player.dispatchEvent(l)),this.player.dispatchEvent(s),this.Hide()):(this.floaterClosedByUser=!0,this.enableFq&&this.fq&&(this.fq--,this.player.dispatchEvent(l)),this.player.dispatchEvent(s),this.Hide())}.bind(this),this.counterToCloseFloater?(this.closeFloaterCurrentTime=this.counterToCloseFloater,e.textContent="",0<this.closeFloaterCurrentTime?e.style.display="none":(e.textContent="",e.style.display="block",e.appendChild(this.getCloseButton())),this.closeFloaterDelayInterval||(this.closeFloaterDelayInterval=setInterval(function(){var e=document.getElementById(this.playerElement.id+"_close");if(e){var t=e.firstElementChild;this.closeFloaterCurrentTime=this.closeFloaterCurrentTime-1,t.appendChild(this.getCloseButton()),this.closeFloaterCurrentTime<=0?(t.style.display="block",clearInterval(this.closeFloaterDelayInterval),this.closeFloaterDelayInterval=null,t.textContent="",t.appendChild(this.getCloseButton())):(t.style.display="none",t.textContent="")}}.bind(this),1e3))):(e.textContent="",e.appendChild(this.getCloseButton()))},d.prototype.getCloseButton=function(){var e=document.createElementNS("http://www.w3.org/2000/svg","svg");e.setAttributeNS(null,"fill","rgba(15, 20, 22, 0.4)"),e.setAttributeNS(null,"viewBox","0 0 14 14");var t=document.createElementNS("http://www.w3.org/2000/svg","path");t.setAttribute("d","M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z");var i=document.createElementNS("http://www.w3.org/2000/svg","path");return i.setAttribute("d","M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"),e.appendChild(t),e.appendChild(i),e},d.prototype.onPlayerResize=function(){if(document.documentElement.clientWidth<=this.maxWidthToOpen){var e=(this.height/this.width).toFixed(2);this.height=document.documentElement.clientWidth*e,this.width=document.documentElement.clientWidth}if(this.isFloaterActive)switch(this.position){case"left-center":case"right-center":this.applyStyle(!0,!1);break;case"middle-bottom":case"middle-top":default:this.applyStyle(!0,!1)}},d.prototype.ForcePlayingAdsOnlyOnFloater=function(){this.forcePlayingAdsOnFloaterOnly=!0}},function(e,t,i){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(){}function s(e,t){return e?null:new Error(t)}function n(e,t,i,n){e.id=n;var r=function(e,t,i){var n=document.createElement("iframe");n.src=t||"about:blank",n.marginWidth="0",n.marginHeight="0",n.frameBorder="0",n.width="100%",n.height="100%",o(n),i&&(n.style.zIndex=i);return n.setAttribute("SCROLLING","NO"),e.innerHTML="",e.appendChild(n),n}(e,null,i.zIndex);if(function(e,t){var i=e.contentWindow&&e.contentWindow.document;return!!i&&(i.write(t),!0)}(r,function(i,n){return Object.keys(n).forEach(function(e){var t="object"===a(t)?JSON.stringify(n[e]):n[e];i=i.replace(new RegExp("{{"+e+"}}","g"),t)}),i}(t,i)))return r}function o(e){e&&(e.style.position="absolute",e.style.left="0",e.style.top="0",e.style.margin="0px",e.style.padding="0px",e.style.border="none",e.style.width="100%",e.style.height="100%")}function l(t,i){return Object.keys(i).forEach(function(e){t[e]=i[e]}),t}i.d(t,"c",function(){return G}),i.d(t,"a",function(){return z}),i.d(t,"b",function(){return W});var d=["handshakeVersion","initAd","startAd","stopAd","skipAd","resizeAd","pauseAd","resumeAd","expandAd","collapseAd","subscribe","unsubscribe"];function u(e,t,i){}u.prototype.handshakeVersion=function(e,t){},u.prototype.initAd=function(e,t,i,n,r,a,o){},u.prototype.startAd=function(e){},u.prototype.stopAd=function(e){},u.prototype.skipAd=function(e){},u.prototype.resizeAd=function(e,t,i,n){},u.prototype.pauseAd=function(e){},u.prototype.resumeAd=function(e){},u.prototype.expandAd=function(e){},u.prototype.collapseAd=function(e){},u.prototype.subscribe=function(e,t,i){},u.prototype.unsubscribe=function(e,t){},u.prototype.getAdLinear=function(e){},u.prototype.getAdWidth=function(e){},u.prototype.getAdHeight=function(e){},u.prototype.getAdExpanded=function(e){},u.prototype.getAdSkippableState=function(e){},u.prototype.getAdRemainingTime=function(e){},u.prototype.getAdDuration=function(e){},u.prototype.getAdVolume=function(e){},u.prototype.getAdIcons=function(e){},u.prototype.setAdVolume=function(e,t){},h(u,"METHODS",d),h(u,"GETTERS",["getAdLinear","getAdWidth","getAdHeight","getAdExpanded","getAdSkippableState","getAdRemainingTime","getAdDuration","getAdVolume","getAdCompanions","getAdIcons"]),h(u,"SETTERS",["setAdVolume"]),h(u,"EVENTS",["AdLoaded","AdStarted","AdStopped","AdSkipped","AdSkippableStateChange","AdSizeChange","AdLinearChange","AdDurationChange","AdExpandedChange","AdRemainingTimeChange","AdVolumeChange","AdImpression","AdVideoStart","AdVideoFirstQuartile","AdVideoMidpoint","AdVideoThirdQuartile","AdVideoComplete","AdClickThru","AdInteraction","AdUserAcceptInvitation","AdUserMinimize","AdUserClose","AdPaused","AdPlaying","AdLog","AdError"]);var c=d.filter(function(e){return-1===["skipAd"].indexOf(e)});function h(e,t,i){Object.defineProperty(e,t,{writable:!1,configurable:!1,value:i})}function f(){this._subscribers={}}h(u,"checkVPAIDInterface",function(t){return c.every(function(e){return"function"==typeof t[e]})}),f.prototype.subscribe=function(e,t,i){this.isHandlerAttached(e,t)||this.get(t).push({handler:e,context:i,eventName:t})},f.prototype.unsubscribe=function(t,e){this._subscribers[e]=this.get(e).filter(function(e){return t!==e.handler})},f.prototype.unsubscribeAll=function(){this._subscribers={}},f.prototype.trigger=function(e,t){var i=this;this.get(e).concat(this.get("*")).forEach(function(e){setTimeout(function(){i.isHandlerAttached(e.handler,e.eventName)&&e.handler.call(e.context,t)},0)})},f.prototype.triggerSync=function(e,t){this.get(e).concat(this.get("*")).forEach(function(e){e.handler.call(e.context,t)})},f.prototype.get=function(e){return this._subscribers[e]||(this._subscribers[e]=[]),this._subscribers[e]},f.prototype.isHandlerAttached=function(t,e){return this.get(e).some(function(e){return t===e.handler})};var p=u.checkVPAIDInterface,g="AdClickThru",m=u.EVENTS.filter(function(e){return e!=g});function v(e,t,i,n){this._isValid=p(e),this._isValid&&(this._creative=e,this._el=t,this._videoEl=i,this._iframe=n,this._subscribers=new f,o(t),function(){if(m.forEach(function(e){this._creative.subscribe(function(e){this._subscribers.trigger(e,Array.prototype.slice(arguments,1))}.bind(this,e),e)}.bind(this)),this._creative.subscribe(function(e,t,i){this._subscribers.triggerSync(g,{url:e,id:t,playerHandles:i})}.bind(this),g),this._videoEl){var t=this._iframe.contentDocument.documentElement,i=this._videoEl;t.addEventListener("click",function(e){e.target===t&&i.click()})}}.call(this))}function y(e,t,i,n){e?e(i,n):i&&t.trigger("AdError",i)}(v.prototype=Object.create(u.prototype)).isValidVPAIDAd=function(){return this._isValid},u.METHODS.forEach(function(r){-1===["subscribe","unsubscribe","initAd"].indexOf(r)&&(v.prototype[r]=function(){var e=u.prototype[r].length,i=Array.prototype.slice.call(arguments),n=e===i.length?i.pop():void 0;setTimeout(function(){var e,t=null;try{e=this._creative[r].apply(this._creative,i)}catch(e){t=e}y(n,this._subscribers,t,e)}.bind(this),0)})}),v.prototype.initAd=function(e,i,n,r,a,o,s){a=a||{},o=l({slot:this._el,videoSlot:this._videoEl},o||{}),setTimeout(function(){var t;try{a.AdParameters&&a.AdParameters.length&&0==a.AdParameters.indexOf("&lt;?xml")&&-1!=a.AdParameters.indexOf("&")&&(a.AdParameters=a.AdParameters.replace(/&amp;/g,"&"),a.AdParameters=a.AdParameters.replace(/&lt;/g,"<"),a.AdParameters=a.AdParameters.replace(/&gt;/g,">"),a.AdParameters=a.AdParameters.replace(/&quot;/g,'"')),this._creative.initAd(e,i,n,r,a,o)}catch(e){t=e}y(s,this._subscribers,t)}.bind(this),0)},v.prototype.subscribe=function(e,t,i){this._subscribers.subscribe(t,e,i)},v.prototype.unsubscribe=function(e,t){this._subscribers.unsubscribe(t,e)},v.prototype.on=v.prototype.subscribe,v.prototype.off=v.prototype.unsubscribe,u.GETTERS.forEach(function(n){v.prototype[n]=function(i){setTimeout(function(){var e,t=null;try{e=this._creative[n]()}catch(e){t=e}y(i,this._subscribers,t,e)}.bind(this),0)}}),v.prototype.setAdVolume=function(i,n){setTimeout(function(){var e,t=null;try{this._creative.setAdVolume(i),e=i}catch(e){t=e}t=t||s(e===i,"failed to apply volume: "+i),y(n,this._subscribers,t,e)}.bind(this),0)},v.prototype._destroy=function(){this.stopAd(),this._subscribers.unsubscribeAll()};var b,w,E=(b="vpaidIframe",w=-1,function(){return b+"_"+ ++w}),S='<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"></head><body style="margin:0;padding:0"><div class="ad-element"></div><script type="text/javascript" src="{{iframeURL_JS}}"><\/script><script type="text/javascript">window.parent.postMessage(\'{"event": "ready", "id": "{{iframeID}}"}\', \'{{origin}}\');<\/script></body></html>';function B(e,t,i,n){i=i||{},this._id=E(),this._destroyed=!1,this._frameContainer=function(e,t,i){var n=document.createElement(t);return i&&(n.id=i),e.appendChild(n),n}(e,"div"),this._videoEl=t,this._vpaidOptions=n||{timeout:1e4},this._templateConfig={template:i.template||S,extraOptions:i.extraOptions||{}}}function A(){T.call(this),function(){this._adUnit&&(this._adUnit.stopAd(),delete this._adUnit)}.call(this)}function T(){(function(e){var t=this[e];t&&t.parentNode&&(t.parentNode.removeChild(t),delete this[e])}).call(this,"_frame"),L.call(this)}function L(){this._onLoad&&(window.removeEventListener("message",this._onLoad),delete this._onLoad)}function C(){return window.location.origin?window.location.origin:window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")}B.prototype.destroy=function(){this._destroyed||(this._destroyed=!0,A.call(this))},B.prototype.isDestroyed=function(){return this._destroyed},B.prototype.loadAdUnit=function(e,a,t){if(!this._onLoad){(function(){if(this._destroyed)throw new Error("VPAIDHTML5Client already destroyed!")}).call(this),A.call(this);var o=this,i=n(this._frameContainer,this._templateConfig.template,l({iframeURL_JS:e,iframeID:this.getID(),origin:C()},this._templateConfig.extraOptions),t);this._frame=i,this._onLoad=function(e,t,i){var n;return n=setTimeout(function(){t=r,i()},e),function(){t.apply(this,arguments)&&clearTimeout(n)}}(this._vpaidOptions.timeout,function(e){if(e.origin!==C())return;var t,i,n;if(JSON.parse(e.data).id!==o.getID())return;i=o._frame.contentWindow?(n=o._frame.contentWindow.getVPAIDAd,s("function"==typeof n,"the ad didn't return a function to create an ad")):"the iframe is not anymore in the DOM tree";if(!i){var r=o._frame.contentWindow.document.querySelector(".ad-element");(t=new v(n(),r,o._videoEl,o._frame)).subscribe("AdStopped",function(){T.call(this),delete this._adUnit}.bind(o)),i=s(t.isValidVPAIDAd(),"the add is not fully complaint with VPAID specification")}return o._adUnit=t,L.call(o),a(i,i?null:t),!0}.bind(this),function(){a("timeout",null)}.bind(this)),window.addEventListener("message",this._onLoad)}},B.prototype.unloadAdUnit=function(){A.call(this)},B.prototype.getID=function(){return this._id};var N=i(14);function _(e,t){var i=e.tracking.events;if(i)for(var n=0,r=Object.keys(i);n<r.length;n++){var a=r[n];if(0<=a.indexOf("progress")&&i[a][0]&&i[a][0].offset){var o=i[a][0].offset.split(":");if(3==o.length){var s=60*+o[0]*60+60*+o[1]+ +o[2];t.push({eventName:a,eventTime:s})}}}}var F=i(3),U=i(0);function V(e,t){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=function(e,t){if(!e)return;if("string"==typeof e)return k(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return k(e,t)}(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==i.return||i.return()}finally{if(s)throw a}}}}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function x(i,n,e){var a,r=i,o=e,s=o.getPlayerElement(),l=s.getElementsByClassName("media-video")[0],t=s.getElementsByClassName("trv-video")[0],d="truvid_cnt_vpaid_iframe"+Math.floor(1e5*Math.random()+1);document.getElementById(d)||(d="truvid_cnt_vpaid_iframe"+Math.floor(1e5*Math.random()+1));var u,c=null,h=this,f=null,p=!1,g=null,m=null,v=null,y=null,b=l.volume,w=!1,E=0,S=!1,A=null,T=null,L=null,C={},k=[];function x(e,t){y=t,e?a.isStopped()||(window.playerLog("stopping ad unit - onAdUnitLoad"),M(),r.onLoadingContainerFailed(a)):(function(e){e.subscribe("AdVolumeChange",function(){e.getAdVolume(function(e,t){null!=t&&(0<b&&0==t?(a.firePixels("mute"),o.handlePlayerInteraction(U.a.SoundOffAd)):0==b&&0<t&&(a.firePixels("unmute"),o.handlePlayerInteraction(U.a.SoundOnAd)),b=t)})}),e.subscribe("AdUserAcceptInvitation",function(){a.firePixels("acceptInvitation")}),e.subscribe("AdUserMinimize",function(){a.firePixels("collapse")}),e.subscribe("AdUserClose",function(){a.firePixels("close")}),e.subscribe("AdLoaded",function(){window.playerLog("ad unit loaded"),a.isStopped()||(a.firePixels("available"),a.setLoaded(!0),r.onAdLoaded(),r.getStartAdOnAdLoadedEvent()&&(window.playerLog("starting ad unit"),e.startAd()))}),e.subscribe("AdStarted",function(){window.playerLog("ad unit started"),a.firePixels("creativeView")}),e.subscribe("AdVideoStart",function(){window.playerLog("ad unit video start"),a.isStopped()||(a.firePixels("start"),r.onPlayerResize())}),e.subscribe("AdImpression",function(){a.isStopped()||(clearTimeout(T),s.dispatchEvent(new CustomEvent("adImpression")),o.getApiObservable().notify("adImpression",{widgetId:o.getWidgetId(),video:l}),a.setFiredImpression(!0),document.getElementById(d).style.display="block",b=1==l.muted?0:l.volume,y.getAdRemainingTime(function(e,t){0<t&&(E=t)}),function(){if(!c){var e=[],t=document.getElementById(d);t&&e.push(t);var i=null;A&&void 0!==A.as&&1==A.as&&(i={allowSkip:!0}),c=new N.a(h,e,i,o)}}(),I(500),window.playerLog("ad unit impression"),w=!0,r.onAdStarted(),a.fireImpressionPixel("impression",i),S?(window.playerLog("set ad volume 0"),y.setAdVolume(0)):l.muted?(window.playerLog("set ad volume 0"),y.setAdVolume(0)):(window.playerLog("set ad volume "+l.volume),y.setAdVolume(l.volume)),r.onPlayerResize())}),e.subscribe("AdVideoComplete",function(){window.playerLog("ad unit video complete"),a.firePixels("complete"),s.dispatchEvent(new CustomEvent("adComplete")),a.isStopped()||(M(),r.onAdStopped())}),e.subscribe("AdError",function(e){window.playerLog("ad unit error "+e),a.firePixels("error"),a.isStopped()||(M(),1==w?r.onAdStopped():r.onLoadingContainerFailed(a))}),e.subscribe("AdPaused",function(){window.playerLog("ad unit paused"),R(),a.firePixels("pause")}),e.subscribe("AdPlaying",function(){window.playerLog("ad unit playing"),p=!1,a.firePixels("resume"),c&&c.play()}),e.subscribe("AdClickThru",function(e){!0,a.firePixels("click"),o.getApiObservable().notify("adClick",{widgetId:o.getWidgetId(),video:l}),s.dispatchEvent(new CustomEvent("adClick")),e&&void 0!==e.playerHandles&&1==e.playerHandles&&(void 0!==e.url&&e.url&&""!=e.url?window.open(e.url,"_blank"):a.clickThrough&&""!=a.clickThrough&&window.open(a.clickThrough,"_blank")),p?(o.setPlayerPausedOnUserBehalf(!1),o.handlePlayerInteraction(U.a.PlayAd),O()):(o.setPlayerPausedOnUserBehalf(!0),o.handlePlayerInteraction(U.a.PauseAd),D()),c&&c.show()}),e.subscribe("AdSkipped",function(){window.playerLog("ad unit skipped"),a.firePixels("skip"),a.isStopped()||(M(),r.onAdStopped()),s.dispatchEvent(new CustomEvent(F.b))}),e.subscribe("AdStopped",function(){a.isStopped()||(window.playerLog("ad unit stopped"),M(),1==w?r.onAdStopped():r.onLoadingContainerFailed(a))}),e.subscribe("AdVideoFirstQuartile",function(){window.playerLog("ad unit first quartile"),a.firePixels("firstQuartile")}),e.subscribe("AdVideoMidpoint",function(){window.playerLog("ad unit midpoint"),a.firePixels("midpoint")}),e.subscribe("AdVideoThirdQuartile",function(){window.playerLog("ad unit third quartile"),a.firePixels("thirdQuartile"),clearInterval(u),u=I(100)})}(t),_(a,k),t.handshakeVersion("2.0",function(){if(!a.isStopped()){var e=o.isFullScreenState()?"fullscreen":"normal";t.initAd(r.getRequestWidth(),r.getRequestHeight(),e,-1,{AdParameters:n.adParameters},{videoSlotCanAutoPlay:!0},null,P),L=setInterval(function(){l.hasAttribute("data-rbc")&&(l.removeAttribute("data-rbc"),a.isStopped()||(window.playerLog("stopping ad unit - rubicon interval"),M(),r.onLoadingContainerFailed(a)))},100)}}))}function P(e){e?a.isStopped()||(window.playerLog("ad unit error callback"),M(),r.onLoadingContainerFailed(a)):window.playerLog("ad unit init")}function I(e){u=setInterval(function(){a&&!a.isStopped()?y.getAdRemainingTime(function(e,t){if(g=Math.ceil(t),k&&g){var i,n=V(k);try{for(n.s();!(i=n.n()).done;){var r=i.value;r.eventTime!=Math.round(E)-g||C[r.eventName]||(C[r.eventName]=!0,a.firePixels(r.eventName))}}catch(e){n.e(e)}finally{n.f()}}}):clearInterval(u)},e)}function O(){m||v||a.disableTimeout||(v=setInterval(function(){y.getAdRemainingTime(function(e,t){t&&0<t&&(g=Math.ceil(t)),0<g&&(clearTimeout(m),window.playerLog("ad timeout interval "+g))})},3e3)),y.resumeAd(),c&&c.pause(),s.dispatchEvent(new CustomEvent("onUserMediaPlay"))}function R(){p=!0,m&&(window.playerLog("clear ad complete timeout"),clearTimeout(m)),v&&clearInterval(v),c&&c.pause()}function D(){y.pauseAd(),window.playerLog("pause ad by our code"),R(),s.dispatchEvent(new CustomEvent("onUserMediaPause"))}function M(){if(clearInterval(L),clearInterval(T),l.removeAttribute("data-rbc"),!a.isStopped()){a.setStopped(),clearTimeout(m),clearInterval(v);try{f.destroy()}catch(e){}c&&c.destroy();try{var e=document.getElementById(d);e&&e.parentNode.removeChild(e)}catch(e){}}}this.loadAd=function(e){(A=e.adObject?JSON.parse(e.adObject.linear.adParameters):null)&&void 0!==A.ct&&0<A.ct&&A.ct,window.playerLog("loading vpaid ad"),a=e,S=!1,l.muted?S=!0:0==l.volume&&(S=!0),n?(f=new B(t,l,null,{timeout:1e3*e.getLoadingContainerTimeout()})).loadAdUnit(n.mediaFile.src,x,d):(window.playerLog("stopping ad - no media file"),a.isStopped()||(M(),r.onLoadingContainerFailed(e)))},this.getContainerId=function(){return d},this.startAd=function(){y&&!a.isStopped()&&y.startAd()},this.skipAd=function(){y.skipAd(),a.isStopped()||(M(),r.onAdStopped())},this.getAdDuration=function(){return E},this.pauseAd=function(){D()},this.resumeAd=function(){O()},this.stopAd=function(){window.playerLog("stop ad"),y&&w&&(y.stopAd(function(){}),a.isStopped()||(M(),r.onAdStopped()))},this.isCurrentAdPaused=function(){return p},this.togglePlayPause=function(){p?(e.setPlayerPausedOnUserBehalf(!1),O()):(e.setPlayerPausedOnUserBehalf(!0),D())},this.setAdVolume=function(e){y.setAdVolume(e),o.setCurrentVolume(e)},this.resizeAd=function(e,t){y&&y.resizeAd(e,t,"normal")},this.isStopped=function(){return a.isStopped()},this.getAdRemainingTime=function(){return g},this.destroy=function(){M()}}function j(e,t){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=function(e,t){if(!e)return;if("string"==typeof e)return P(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return P(e,t)}(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==i.return||i.return()}finally{if(s)throw a}}}}function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function I(e,t,i){var n,a=null,r=e,o=i,s=o.getPlayerElement(),l=s.getElementsByClassName("media-video")[0],d=this,u=l.muted?0:l.volume,c=!1,h=!1,f=!1,p=!1,g=!1,m=!1,v={},y=[],b=null,w=!1;function E(){A()}function S(){window.playerLog("on video ad loaded"),w||(r.onAdLoaded(),a.setLoaded(!0),w=!0,clearInterval(b),l.removeEventListener("loadeddata",S),l.removeEventListener("loadedmetadata",S),r.getStartAdOnAdLoadedEvent()&&A())}function A(){var e=l.play();e?e.then(function(){c||(c=!0,r.onAdStarted())}).catch(function(e){a.setStopped(),r.onLoadingContainerFailed(a)}):c||(c=!0,r.onAdStarted()),(n=n||new N.a(d,null,null,o))&&n.play()}function T(){clearInterval(b),n&&n.destroy(),l.removeEventListener("volumechange",x),l.removeEventListener("error",P,!0),l.removeEventListener("canplaythrough",I),l.removeEventListener("load",I),l.removeEventListener("ended",O),l.removeEventListener("playing",R),l.removeEventListener("pause",D),l.removeEventListener("loadedmetadata",M),l.removeEventListener("click",B),l.removeEventListener("timeupdate",F)}function L(){h=!0,window.playerLog("vast remove container"),T(),a&&a.setStopped(),r.onAdStopped()}function C(){l.addEventListener("volumechange",x),l.addEventListener("error",P,!0),l.addEventListener("canplaythrough",I),l.addEventListener("load",I),l.addEventListener("ended",O),s.dispatchEvent(new CustomEvent("adComplete")),l.addEventListener("playing",R),l.addEventListener("pause",D),l.addEventListener("loadedmetadata",M),l.addEventListener("click",B),l.addEventListener("timeupdate",F),_(a,y)}function k(){l.pause(),n&&n.pause()}function x(){var e=l.volume;null!=e&&(0<u&&0==e?(a.firePixels("mute"),o.handlePlayerInteraction(U.a.SoundOffAd)):0==u&&0<e&&(a.firePixels("unmute"),o.handlePlayerInteraction(U.a.SoundOnAd)),u=e)}function P(){T(),a.firePixels("error"),a.setStopped(),r.onLoadingContainerFailed(a)}function I(){}function O(){a.firePixels("complete"),window.playerLog("vast video ended"),l.removeEventListener("ended",O),L()}function R(){m||h?(h=!1,a.firePixels("resume")):(m=!0,o.getApiObservable().notify("adImpression",{widgetId:o.getWidgetId(),video:l}),s.dispatchEvent(new CustomEvent("adImpression")),a.setFiredImpression(!0),a.firePixels("creativeView"),a.firePixels("start"),a.fireImpressionPixel("impression",e))}function D(){h=!0,a.firePixels("pause")}function M(){l.removeEventListener("loadedmetadata",M)}function B(){o.getApiObservable().notify("adClick",{widgetId:o.getWidgetId(),video:l}),s.dispatchEvent(new CustomEvent("adClick")),l.paused?(!0,A(),s.dispatchEvent(new CustomEvent("onUserMediaPlay")),o.handlePlayerInteraction(U.a.PlayAd),n&&n.play()):(k(),s.dispatchEvent(new CustomEvent("onUserMediaPause")),o.handlePlayerInteraction(U.a.PauseAd),a.firePixels("click"),a.clickThrough&&""!=a.clickThrough&&window.open(a.clickThrough)),n&&n.show()}function F(e){var t=Math.round(l.currentTime/l.duration*100);if(t&&0<t&&(75<t&&!f?(f=!0,a.firePixels("thirdQuartile")):50<t&&!p?(p=!0,a.firePixels("midpoint")):25<t&&!g&&(g=!0,a.firePixels("firstQuartile"))),y){var i,n=j(y);try{for(n.s();!(i=n.n()).done;){var r=i.value;r.eventTime!=Math.round(l.currentTime)||v[r.eventName]||(v[r.eventName]=!0,a.firePixels(r.eventName))}}catch(e){n.e(e)}finally{n.f()}}}this.resizeAd=function(){},this.clearResources=function(){T()},this.destroy=function(){L()},this.isCurrentAdPaused=function(){return h},this.togglePlayPause=function(){h?(E(),o.setPlayerPausedOnUserBehalf(!1)):(k(),o.setPlayerPausedOnUserBehalf(!0))},this.startAd=function(){c||w&&A()},this.isStopped=function(){return a.isStopped()},this.loadAd=function(e){a=e,t?(window.playerLog("load ad"),a.firePixels("available"),C(),l.src=t.mediaFile.src,l.src="",l.addEventListener("loadeddata",S),l.addEventListener("loadedmetadata",S),l.src=t.mediaFile.src,window.playerLog("load ad "+t.mediaFile.src),C(),b=setInterval(function(){3<=l.readyState&&S()},500),l.load()):(a.setStopped(),r.onLoadingContainerFailed(e))},this.showAd=function(){},this.pauseAd=function(){k()},this.stopAd=function(){c&&L()},this.skipAd=function(){a.firePixels("skip"),o.handlePlayerInteraction(U.a.SkipAd),L()},this.setAdVolume=function(e){l.muted=!(0<e),l.volume=e},this.getAdRemainingTime=function(){return l.duration-l.currentTime},this.getContainerId=function(){return null},this.getAdDuration=function(){return l.duration},this.resumeAd=function(){E()}}var O=i(17),R=i(15),D=i(4),M=i(2);function H(e){return(H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var G="onNoAdStartedInBiddingSession",z="adError";function W(a,e,n){this.stopped=!1,this.adOffset=e?e.adOffset:null,this.adCount=e?e.adCount:null,this.ads=e?e.ads:null,this.advertisingLib=a;var o,t,i,s=this;this.currentVastQueries=0,this.currentVast=null;var l=n;function r(e){var t=new Date;t.setTime(t.getTime()+864e5),Object(D.c)("truvid_d",e,t,l.getDomain())}function d(e){var t=new Date,i=function(){var e=Object(D.a)("truvid_d");if(e)try{return e=JSON.parse(e)}catch(e){return null}}();if(i&&"object"===H(i)&&i[e.dtid]){if((t-new Date(i[e.dtid].t))/1e3/60/60<24)return i[e.dtid].r<e.fq&&(i[e.dtid].r++,r(i),!0);i[e.dtid]=null}return i&&"object"===H(i)&&!i[e.dtid]?(i[e.dtid]={r:1,t:t},r(i),!0):i&&"object"===H(i)?void 0:((i={})[e.dtid]={r:1,t:t},r(i),!0)}this.prebidTypes=["openrtb","relevant","prebid"],this.setCurrentTruvidAd=function(e){o=e},this.resetCurrentTruvidAd=function(){o=null},this.ListenToBiddingSessionEnds=function(e){t=e},this.listenToStartLoadingContainer=function(e){i=e},this.startBiddingSession=function(e){this.stopped||(this.currentVast=e,this.currentVastQueries++,Object(O.b)(e,this.onTruvidVastFetched,this.onTruvidVastError,null,this.setLastVastResponse))},this.getCurrentTruvidAd=function(){return o},this.abort=function(){this.stopped=!0},this.destroy=function(){o&&(window.playerLog("clearing container timeout"),o.clearLoadingContainerTimeout(),o.getAdManager()&&o.getAdManager().destroy()),s.aborted=!0},this.onAdFetch=function(){!s.stopped&&o&&(o.firePixels("win-response"),window.playerLog("on ad fetched"),s.loadMediaFile())},this.onAdError=function(){window.playerLog("on ad error load"),s.loadAdByPriority(),void 0!==this&&void 0!==this.currentVast&&n.getPlayerElement().dispatchEvent(new CustomEvent(z,{detail:{tagUrl:this.currentVast}}))},this.startLoadingLastAds=function(){var e=a.getLastVastAds();e&&Object(O.a)(e,function(e){s.ads=e.ads,s.loadAdByPriority()}.bind(this),this.onTruvidLoadingLastVastError)},this.setLastVastResponse=function(e){a.setLastVastAds(e)},this.onTruvidVastFetched=function(e){s.stopped||(s.ads=e.ads,s.ads&&s.loadAdByPriority())},this.onBiddingSessionEnds=function(){t&&t()},this.onTruvidLoadingLastVastError=function(){s.stopped||(s.stopped=!0,window.playerLog("truvid vast error"),s.onBiddingSessionEnds())},this.onTruvidVastError=function(e){s.currentVastQueries<2&&"no vasts"!=e?s.startBiddingSession(s.currentVast):"no vasts"==e&&(n.dispatchEvent(G),s.advertisingLib.setLoadVastOnNextBiddingSession(!0),s.onTruvidLoadingLastVastError())},this.onLoadingContainerFailed=function(e){e&&!e.isStopped()&&(window.playerLog("set stopping on ad"),e.getAdManager()&&e.getAdManager().destroy(),e.setStopped()),window.playerLog("on loading container failed - bidding session"),s.advertisingLib.stopUpdateCurrentContentTimeState(),e&&e.clearLoadingContainerTimeout(),o==e&&s.advertisingLib.setCurrentAdPlaying(!1),o==e&&s.loadMediaFile()},this.checkIfAdValidForCurrentSlot=function(e,t){var i=JSON.parse(e.linear.adParameters);if(void 0===i.off||0==i.off.length||-1==i.off.indexOf(t))return!1;var n=!1;if(void 0===i.reqv||1!=i.reqv||l.isAdOnlyAvailable()||1!=l.IsPlayerViewable()||(n=!0),void 0!==i.reqvao&&1==i.reqvao&&l.isAdOnlyAvailable()&&1==l.IsPlayerViewable()&&(n=!0),void 0===i.reqov||1!=i.reqov||l.isAdOnlyAvailable()||0!=l.IsPlayerViewable()||(n=!0),void 0!==i.reqovao&&1==i.reqovao&&l.isAdOnlyAvailable()&&0==l.IsPlayerViewable()&&(n=!0),n){if(i.mrdi&&0<i.mrdi&&!function(e){var t=a.getAdSessionInterval(),i=new Date;if(t)return t[e.dtid]?!((i-t[e.dtid])/1e3<e.mrdi)&&(t[e.dtid]=i,!0):(t[e.dtid]=i,!0)}(i))return!1;if(void 0!==i.fqt&&void 0!==i.fq&&0<i.fq){if("s"==i.fqt&&!function(e){var t=a.getAdSessionFQCounter(),i=t[e.dtid];return!(!t||"object"!==H(t))&&(i?i<e.fq&&(t[e.dtid]++,!0):(t[e.dtid]=1,!0))}(i))return!1;if("d"==i.fqt&&!this.advertisingLib.advertisingConfiguration.gdpr&&!d(i))return!1}}return n},this.isPrebidAd=function(e){var t;if(null!==(t=e.linear)&&void 0!==t&&t.adParameters){var i=JSON.parse(e.getLinear().adParameters);return"prebid"===(null==i?void 0:i.dt)}return!1},this.loadAdByPriority=function(){if(!s.stopped){window.playerLog("on load ad by priority");for(var t=null;null==t&&0<s.ads.length;)if((t=s.ads.shift())&&void 0!==t.properties&&void 0!==t.properties.VASTAdTagURI&&""!=t.properties.VASTAdTagURI&&!s.isPrebidAd(t)){if(!this.checkIfAdValidForCurrentSlot(t,this.adOffset)){t=null;continue}window.playerLog("requesting "+t.properties.VASTAdTagURI);var e=t.properties.VASTAdTagURI;s.advertisingLib.adMacros.InjectMacros(e).then(function(e){t.linear.tracking.track("win"),window.playerLog("set current truvid ad"),(o=new R.a(t,e,s.advertisingLib.getAllowedContainers())).requestMediaFiles(s.advertisingLib.getRequestWidth(),s.advertisingLib.getRequestHeight(),s.onAdFetch,s.onAdError),t.linear.tracking.track("request")}).catch(function(e){window.playerLog("error macros"),window.playerLog(e)})}else if(t&&t.linear)try{if(!this.checkIfAdValidForCurrentSlot(t,this.adOffset)){t=null;continue}if(t.linear.tracking.track("win"),(o=new R.a(t,null,s.advertisingLib.getAllowedContainers())).getMediaFilesFromAdResponse(t,s.advertisingLib.getRequestWidth(),s.advertisingLib.getRequestHeight()),o.mediaFiles.length||s.isPrebidAd(t)){var i=o.getAdType();this.prebidTypes.includes(i)?function(){var e=a.getPrebidManager(i,o);e.init().then(function(){e.LoadAd(s.onAdFetch,s.onAdError,o)}).catch(function(e){t=null,window.playerLog("error loading prebid manager")})}():s.advertisingLib.adMacros.InjectMacros(o.mediaFiles[0].mediaFile.src).then(function(e){o.mediaFiles[0].mediaFile.src=e,s.loadMediaFile()}).catch(function(e){Object(M.a)("errorInjectMacrosLinear",{wid:n.getWidgetId()},e),console.log("error macros"),console.log(e)})}else s.loadMediaFile()}catch(e){Object(M.a)("errorLoadingLinear",{wid:n.getWidgetId()},e)}null==t&&(n.dispatchEvent(G),s.onBiddingSessionEnds())}},this.loadTruvidMediaFile=function(e,t){if(e.isVAST()){var i=new I(s.advertisingLib,e,l);return window.playerLog("loading vast container "+o.getDemandTagId()),o.setAdManager(i),a.startUpdatingCurrentContentTimeState(),i.loadAd(o),!0}if(e.isVPAID()){window.playerLog("loading vpaid container "+o.getDemandTagId());var n=new x(s.advertisingLib,e,l);return o.setAdManager(n),a.startUpdatingCurrentContentTimeState(),n.loadAd(o),!0}if(e.isIMA()){var r=s.advertisingLib.getImaAdManager();return o.setAdManager(r),window.playerLog("loading ima container"+o.getDemandTagId()),a.startUpdatingCurrentContentTimeState(),r.loadAd(o,e),!0}},this.startLoadingContainer=function(){if(!s.stopped){var e=o.shiftPrioritizedMediaFiles();if(e){var t=window.setTimeout(s.BeforeLoadingContainerFailed,1e3*o.getLoadingContainerTimeout(),o);return o.setLoadingContainerTimeoutId(t),i&&i(),s.loadTruvidMediaFile(e,t)}}return!1},this.BeforeLoadingContainerFailed=function(e){window.playerLog("timeout reached on loading container"),s.onLoadingContainerFailed(e)},this.loadMediaFile=function(){if(!s.stopped&&o){window.playerLog("load media file");for(var e=!1;!e&&o.mediaFiles.length;)window.playerLog("start loading container"),void 0!==o.demandTagId&&window.playerLog("demand tag id: "+o.demandTagId),e=s.startLoadingContainer();0==e&&(o.mediaFiles.length?s.loadMediaFile():(window.playerLog("reset current truvid ad - going to load ad by priority"),o=null,s.loadAdByPriority()))}else window.playerLog("reset current truvid ad - going to load ad by priority"),o=null,s.loadAdByPriority()}}},function(e,t,i){"use strict";i.d(t,"e",function(){return s}),i.d(t,"a",function(){return a}),i.d(t,"d",function(){return l}),i.d(t,"b",function(){return d}),i.d(t,"c",function(){return u});var n=i(1);function r(e){this.widget=e,this.wasOutOfView=!1,this.activateBonusSlot=!1,this.onVideoTimeUpdateBinding=this.onVideoTimeUpdate.bind(this),this.onViewabilityChangeBinding=this.onViewabilityChange.bind(this),this.widget.player.subscribe(n.n,this.onVideoTimeUpdateBinding),this.widget.player.subscribe(n.j,this.onViewabilityChangeBinding)}r.prototype.onViewabilityChange=function(e){e.detail.isPlayerViewable?this.wasOutOfView&&!this.widget.player.IsFloaterOpen()&&(this.activateBonusSlot=!0):this.wasOutOfView=!0},r.prototype.onVideoTimeUpdate=function(e){this.activateBonusSlot&&(this.widget.adSlots?this.widget.player.IsPlayerViewable()&&this.widget.player.canStartBiddingSession()&&1<e.detail.currentTime&&!this.widget.player.isAdPlaying()&&(this.widget.adSlots.isPreroll?this.widget.adSlots.PushSlot({type:l,offset:e.detail.currentTime}):this.widget.adSlots.midrollCount&&"c"==this.widget.adSlots.midrollType?this.widget.adSlots.PushSlot({type:d,offset:e.detail.currentTime}):this.widget.adSlots.midrollInterval&&"d"==this.widget.adSlots.midrollType?this.widget.adSlots.PushSlot({type:d,offset:e.detail.currentTime}):this.widget.adSlots.isPostroll&&this.widget.adSlots.PushSlot({type:u,offset:e.detail.currentTime}),this.widget.player.unsubscribe(n.n,this.onVideoTimeUpdateBinding),this.widget.player.unsubscribe(n.j,this.onViewabilityChangeBinding)):(this.widget.player.unsubscribe(n.n,this.onVideoTimeUpdateBinding),this.widget.player.unsubscribe(n.j,this.onViewabilityChangeBinding)))};var s="setSlotsEvent";function a(e){this.widget=e,this.slotsOffsets=[],this.slotsOffsetsWithoutModifications=[],this.isPreroll=!1,this.midrollCount=0,this.midrollType="c",this.midrollInterval=0,this.isPostroll=!1,this.widget.widgetStaticConfig.aid?(this.isPreroll=!0,this.midrollCount=1,this.midrollType="c"):(this.isPreroll=1==this.widget.widgetStaticConfig.aip,this.midrollType=this.widget.widgetStaticConfig.amt,"d"==this.midrollType?this.midrollInterval=this.widget.widgetStaticConfig.amd:(this.midrollCount=this.widget.widgetStaticConfig.am||0,this.midrollType="c"),this.isPostroll=1==this.widget.widgetStaticConfig.aipr),this.bonusSlot=new r(e),this.widget.player.subscribe(n.a,this.onNewVideo.bind(this)),this.widget.player.subscribe(n.h,this.onPlayerReady.bind(this))}var l=1,d=2,u=3;a.prototype.IsSlotAvailable=function(e){if(0==this.slotsOffsets.length)return null;for(var t=0;t<this.slotsOffsets.length&&!(this.slotsOffsets[t].offset>e+5);t++)if(Math.abs(this.slotsOffsets[t].offset-e)<=5)return this.slotsOffsets[t];return null},a.prototype.getLastSlotByOffset=function(e){if(!this.slotsOffsetsWithoutModifications.length)return null;for(var t=null,i=0;i<this.slotsOffsetsWithoutModifications.length&&this.slotsOffsetsWithoutModifications[i].offset<=e;i++)t=this.slotsOffsetsWithoutModifications[i];return t},a.prototype.RemoveSlot=function(e){for(var t=0;t<this.slotsOffsets.length;t++)this.slotsOffsets[t].offset==e&&this.slotsOffsets.splice(t,1)},a.prototype.onPlayerReady=function(){var e=this.widget.player.getDuration();this.setSlots(e)},a.prototype.setSlots=function(e){if(this.slotsOffsets=[],this.isPreroll)for(var t=0,i=0;i<this.widget.numberOfPrerolls;i++,t+=4)this.slotsOffsets.push({type:l,offset:t});if(0<this.midrollCount&&"c"==this.midrollType)for(var n=1;n<=this.midrollCount;n++){var r=Math.round(e*(n/(this.midrollCount+1)));this.slotsOffsets.push({type:d,offset:r})}else if("d"==this.midrollType&&0<this.midrollInterval){this.midrollInterval<10&&(this.midrollInterval=10);for(var a=this.isPostroll?e-6:e,o=this.midrollInterval;o<a;o+=this.midrollInterval)this.slotsOffsets.push({type:d,offset:o})}this.isPostroll&&this.slotsOffsets.push({type:u,offset:e}),this.slotsOffsetsWithoutModifications=JSON.parse(JSON.stringify(this.slotsOffsets)),this.widget.player.dispatchEvent(s)},a.prototype.onNewVideo=function(e){var t=e.detail.fileToPlay.dur;this.setSlots(t)},a.prototype.IsPreroll=function(){return this.isPreroll},a.prototype.PushSlot=function(e){this.slotsOffsets.push(e)}},function(e,t,i){"use strict";i.d(t,"a",function(){return n});var c=i(0),h=i(1);function n(e,t,i,n){this.playerObj=n,this.playerElement=this.playerObj.getPlayerElement(),this.controllerId="truvid_cnt_controller"+Math.floor(1e6*Math.random()),this.adControllerTimerInterval=null,this.adContainer=e,this.containers=[],this.showFunc=this.show.bind(this),this.hideFunc=this.hide.bind(this),this.allowSkip=i&&void 0!==i.allowSkip&&1==i.allowSkip;var r=document.createElement("div"),a=document.createElement("style"),o="opacity 0.2s ease-in-out";r.id=this.controllerId,r.innerHTML+='<button class="controller-playPause brpBtn sprite-background" type="button" title="play">Play</button><button class="controller-volume brpBtn sprite-background" type="button" title="volume">volume</button>',this.allowSkip&&(r.innerHTML+='<button class="controller-skip brpBtn" type="button" title="skip">Skip</button>'),r.innerHTML+='<span class="controller-title">Ad</span>';var s,l="#"+this.playerElement.id+" #"+r.id+" { overflow:hidden;position: absolute; display: none;bottom:0px; z-index: 50000; width: 99px; background-color: rgba(15, 20, 22, 0.2); color: #FCFCFC; font-size: 10pt !important; text-align: left; height: 38px;";if(n.isMobile()&&(l+="-webkit-transition: "+o+"; -moz-transition: "+o+"; -o-transition; "+o+"; transition: "+o+"; -ms-transition: "+o+";"),l+="}#"+this.playerElement.id+" #"+r.id+" .controller-playPause { background-position: -48px -8px; height: 22px; margin-left: 20px; margin-right: 4px; transition: none; float: none;margin-top:10px; }#"+this.playerElement.id+" #"+r.id+" .controller-volume { background-position: -"+(0==this.playerObj.getCurrentVolume()?"115":"100")+"px -10px; line-height: normal; margin-right: 12px; margin-left: 12px; transition: none; float: none; margin-top:10px; }",l+="#"+this.playerElement.id+" #"+r.id+">span { float: right; line-height: 22px; font-size: 10pt !important; color: #FCFCFC; font-family: arial; margin-top: 10px; }#"+this.playerElement.id+" #"+r.id+" .controller-title { margin-right: 12px; white-space: nowrap; text-overflow: ellipsis; overflow: hidden; vertical-align: inherit; cursor: default; }#"+this.playerElement.id+" #"+r.id+" .controller-skip { text-indent: 0;width:25px;color:#fff;}",a.innerHTML=l,r.appendChild(a),this.playerElement.appendChild(r),this.containers.push(r),this.adContainer.getContainerId()?this.containers.push(document.getElementById(this.adContainer.getContainerId())):this.containers.push(this.playerElement),t)for(var d=0;d<t.length;d++)this.containers.push(t[d]);if(this.allowSkip&&(document.getElementById(this.controllerId).style.width="142px"),n.isMobile())this.show();else for(s=0;s<this.containers.length;s++)this.containers[s]&&(this.containers[s].addEventListener("mousemove",this.showFunc),this.containers[s].addEventListener("mouseenter",this.showFunc),n.isMobile()||this.containers[s].addEventListener("mouseleave",this.hideFunc));r.getElementsByClassName("controller-playPause")[0].addEventListener("click",function(){this.adContainer.isCurrentAdPaused()?(this.playerObj.handlePlayerInteraction(c.a.PlayAd),this.playerElement.dispatchEvent(new CustomEvent("onUserMediaPlay"))):(this.playerObj.handlePlayerInteraction(c.a.PauseAd),this.playerElement.dispatchEvent(new CustomEvent("onUserMediaPause"))),this.adContainer.togglePlayPause()}.bind(this)),r.getElementsByClassName("controller-volume")[0].addEventListener("click",function(){var e=0==n.getCurrentVolume()?n.getVolume():0;this.playerObj.setMutedByUser(!e),this.adContainer.setAdVolume(e),r.getElementsByClassName("controller-volume")[0].style.backgroundPosition="-"+(0==e?"115":"100")+"px -10px",0==e&&this.playerElement.dispatchEvent(new CustomEvent(h.k))}.bind(this)),this.allowSkip&&r.getElementsByClassName("controller-skip")[0].addEventListener("click",function(){this.playerObj.handlePlayerInteraction(c.a.SkipAd),this.adContainer.skipAd()}.bind(this));var u=this.playerElement.querySelector(".volume-container");u&&(u.style.display="none")}n.prototype.hide=function(){document.getElementById(this.controllerId).style.display="none"},n.prototype.show=function(){document.getElementById(this.controllerId).style.display="block"},n.prototype.pause=function(){var e=this.playerElement.getElementsByClassName("controller-playPause");e.length&&(e[0].style.backgroundPosition="-82px -8px")},n.prototype.play=function(){this.playerElement.getElementsByClassName("controller-playPause")[0].style.backgroundPosition="-48px -8px"},n.prototype.setVolume=function(e){this.playerElement.getElementsByClassName("controller-volume")[0].style.backgroundPosition="-"+(0==e?"115":"100")+"px -10px"},n.prototype.destroy=function(){for(var e=0;e<this.containers.length;e++)this.containers[e].removeEventListener("mousemove",this.showFunc),this.containers[e].removeEventListener("mouseenter",this.showFunc),this.playerObj.isMobile()||this.containers[e].removeEventListener("mouseleave",this.hideFunc);var t=document.getElementById(this.controllerId);t&&t.parentNode.removeChild(t),clearInterval(this.adControllerTimerInterval)}},function(e,t,i){"use strict";i.d(t,"a",function(){return a});var l=i(9),r=i(17),n=i(2);function a(e,t,s){var i,o=this;this.adObject=e,this.tagUrl=t,e&&(i=JSON.parse(e.getLinear().adParameters)),this.demandTagId=i?i.dtid:null,this.type=i?i.dt:null,this.priority=i?i.priority:null,this.disableTimeout=!!i&&(void 0!==i.dist&&1==i.dist),this.mediaFiles=[],this.loadingContainerTimeout=i?i.t:8,this.loadingContainerTimeoutId=null,this.adParameters=i,this.adManager=null,this.stopped=!1,this.tracking=null,this.clickThrough=null,this.isLoaded=!1,this.isPrebid=!1,this.firedImpression=!1,this.numberOfTimesAdSkipped=0,this.firedRequestPixel=!1,this.StoppedTrackingViewability=!1,s&&(this.allowedContainers=s.slice(0)),this.isAdOnly=function(){return void 0!==this.adParameters.reqvao&&1==this.adParameters.reqvao||void 0!==this.adParameters.reqovao&&1==this.adParameters.reqovao},this.setStoppedTrackingViewability=function(){this.StoppedTrackingViewability=!0},this.getStoppedTrackingViewability=function(){return this.StoppedTrackingViewability},this.getNumberOfTimesAdSkipped=function(){return this.numberOfTimesAdSkipped},this.increaseSkipped=function(){this.numberOfTimesAdSkipped++},this.setLoaded=function(e){this.isLoaded=e},this.setIsPrebid=function(e){this.isPrebid=e},this.getIsLoaded=function(){return this.isLoaded},this.requestMediaFiles=function(e,t,i,n){this.tracking=this.adObject?this.adObject.linear.tracking:null,this.playerWidthOnRequest=e,this.playerHeightOnRequest=t,this.onTagFetched=i,this.onTagError=n,window.playerLog("fetch "+this.tagUrl),Object(r.b)(this.tagUrl,this.onTagVastFetch,this.onTagVastError,this.adObject)},this.firePixels=function(e){this.tracking.track(e),window.playerLog("notifyPixelsFire",e)},this.fireImpressionPixel=function(e,t){var i={};i.slotNumber=t.getCurrentSlotNumberMacro(),this.tracking.track(e,i),window.playerLog("notifyPixelsFire",e)},this.resetHasSentImpression=function(){this.tracking.ad.impressionSent(!1)},this.fireViewability=function(){this.firedViewabilityPixel||(this.firedViewabilityPixel=!0,this.firePixels("viewability"))},this.fireRequestPixel=function(){this.firedRequestPixel||(this.firedRequestPixel=!0,this.firePixels("request"))},this.onTagVastFetch=function(e){try{if(e.ads.length)for(var t=0;t<e.ads.length;t++){var i=e.ads[t];o.getMediaFilesFromAdResponse(i,o.playerWidthOnRequest,o.playerHeightOnRequest)}o.onTagFetched&&"function"==typeof o.onTagFetched&&o.onTagFetched(this)}catch(e){o.onTagVastError()}},this.getMediaFilesFromAdResponse=function(e,t,i){var n=e.getLinear();if(void 0!==n.tracking?o.tracking=n.tracking:o.tracking=null,void 0!==n.clickThrough?o.clickThrough=n.clickThrough:o.clickThrough=null,n)for(var r=function(e,t,i){var n=s,r=[];for(;n.length;){var a=n.shift(),o=e.getBestMedia({width:t,height:i},a);o&&r.push(new l.a(a,o,e.adParameters))}return r}(n,t,i),a=0;a<r.length;a++)o.mediaFiles.push(r[a])},this.onTagVastError=function(e,t){if(o.onTagError&&"function"==typeof o.onTagError){if(t&&Array.isArray(t)&&0<t.length)for(var i=0;i<t.length;i++)Object(n.b)(t[i]);o.onTagError(this)}},this.getDemandTagId=function(){return this.demandTagId},this.getLoadingContainerTimeout=function(){return this.loadingContainerTimeout},this.clearLoadingContainerTimeout=function(){0<this.loadingContainerTimeoutId&&(window.playerLog("clearing loading container timeout "+this.loadingContainerTimeoutId),clearTimeout(this.loadingContainerTimeoutId))},this.isStopped=function(){return this.stopped},this.setStopped=function(){this.stopped=!0},this.setFiredImpression=function(e){this.firedImpression=e},this.hasFiredImpression=function(){return this.firedImpression},this.shiftPrioritizedMediaFiles=function(){return this.mediaFiles.shift()},this.setLoadingContainerTimeoutId=function(e){this.loadingContainerTimeoutId=e},this.setAdManager=function(e){this.adManager=e},this.getAdManager=function(){return this.adManager},this.getAdType=function(){return this.type}}},function(e,t,i){"use strict";function n(e){return"string"!=typeof e?e:""==e?e:0==e.indexOf("//")?e=window.location.protocol+e:0==e.indexOf("http://")||0==e.indexOf("https://")?e:e=window.location.protocol+"//"+e}function r(e){return e.length<4e3?e:e.split("?")[0]}i.d(t,"a",function(){return n}),i.d(t,"b",function(){return r})},function(e,t,i){"use strict";i.d(t,"b",function(){return v}),i.d(t,"a",function(){return s});var n=i(16);function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var a,p={XMLHttpRequest:(a=function(){return new XMLHttpRequest},o.toString=function(){return a.toString()},o),onBeforeSend:function(e,t,i){},defaultVASTAbortLimit:-1};function o(){return a.apply(this,arguments)}function v(e,r,a,o,s){var t="Reached abort limit of ("+p.defaultVASTAbortLimit+") wrappers.";a=a||function(){},(!o&&0===p.defaultVASTAbortLimit||o&&0===o.abortLimit)&&(a(new Error(t))||!0)||function e(t,i,n,r,a){var o=p.XMLHttpRequest();o.onreadystatechange=function(){4===o.readyState&&(200===o.status?null!==o.responseXML?n(o.responseXML,i):r(o,i):a?r(o,i):e(t,i,n,r,!0))},o.open("GET",t,!0),a||(o.withCredentials=!0),p.onBeforeSend(t,i,o),o.send(null)}(e,null,function(e){try{s&&"function"==typeof s&&s(e),new d(e,r,a,o)}catch(e){for(var t=e.stack.split(/\n/),i=0;i<t.length;i++){var n=t[i];n=(n=n.replace("[arguments not available]","")).replace(/http:\/\/.*?resources\//,""),window.playerLog("\t"+n)}a()}},function(e){a(e)})}function s(e,t,i,n){try{new d(e,t,i,n)}catch(e){i()}}function l(e,t){if(this.events={},this.ad=t,null!==e){if("TrackingEvents"!==e.tagName){if(1!==(e=e.getElementsByTagName("TrackingEvents")).length)return;e=e.item(0)}for(var i=e.getElementsByTagName("Tracking"),n=0;n<i.length;n++){var r=i[n].getAttribute("event");if(r){var a=null;"progress"===r&&(r+="-"+(a=i[n].getAttribute("offset"))),this.events[r]=this.events[r]||[];var o={url:i[n].textContent.replace(/\s/g,""),offset:a,event:r};this.events[r].push(o)}}}}function d(e,t,i,n){this.ads=[],this.onAdsAvailable=t,this.onAdsError=i,this.onReceivedErrorCounter=0;var r=e.getElementsByTagNameNS("*","Ad"),a=this;if(0!==r.length){var o=function(e){a.onReceivedErrorCounter++,a.onReceivedErrorCounter!==r.length||i(e)};if(0==e.getElementsByTagName("VASTS").length)for(var s=0;s<r.length;s++){if((f=new y(this,r.item(s),n||null)).isEmpty())o();else if(this.ads.push(f),!f.hasData()||f.hasSequence()&&!f.isNumber(1)){var l,d=r.item(s).getElementsByTagName("Wrapper").item(0),u=d.getElementsByTagName("VASTAdTagURI");if(0===u.length){o();continue}u=u.item(0).textContent.replace(/\s/g,""),function(i,n,r){l=function(e){if(i.onLoaded(e,n),r.onAdsAvailable){var t=r.onAdsAvailable;r.onAdsAvailable=null,t.call(r,e)}}}(f,"true"===d.getAttribute("allowMultipleAds"),a),v(u,l,o,f)}else if(t){var c=this.onAdsAvailable;this.onAdsAvailable=null,c.call(this,this)}}else{var h=e.getElementsByTagName("VASTS")[0].getElementsByTagName("VAST");for(s=0;s<h.length;s++){var f;(f=new y(this,r.item(s),n||null)).isEmpty()?o():this.ads.push(f)}if(a.onAdsAvailable){c=a.onAdsAvailable;a.onAdsAvailable=null,c.call(a,a)}}}else{var p=[],g=e.getElementsByTagNameNS("*","Error");if(g&&0<g.length)for(var m=0;m<g.length;m++)p[m]=g[m].textContent;i("no vasts",p)}}function y(e,t,i,n){var r,a;if(this.vast=e,this.pod=e,this.parentAd=i,this.onAdAvailable=n,this.abortLimit=i?0<i.abortLimit?i.abortLimit-1:i.abortLimit:p.defaultVASTAbortLimit,this.sequence=null,this.hasContent=!0,this.loaded=!0,this.linear=null,this.impressions=[],this.errors=[],(this.currentPodAd=this).sentImpression=!1,this.properties={},null!==this.parentAd){var o=this.parentAd;for(a in o.properties)o.properties.hasOwnProperty(a)&&(this.properties[a]=o.properties[a])}t.hasAttribute("sequence")&&(this.sequence=parseInt(t.getAttribute("sequence"),10));var s=t.getElementsByTagName("InLine");if(0!==s.length||(this.loaded=!1,0!==(s=t.getElementsByTagName("Wrapper")).length)){for(var l=(s=s.item(0)).firstChild;null!==l;){if(1===l.nodeType)switch(l.tagName){case"Creatives":case"InLine":case"Wrapper":case"Impression":case"Error":break;default:this.properties[l.tagName]=l.textContent.replace(/^\s*|\s*$/g,"")}l=l.nextSibling}var d=s.getElementsByTagName("Impression");for(r=0;r<d.length;r++)this.impressions.push(d.item(r).textContent.replace(/\s/g,""));var u=s.getElementsByTagName("Error");for(r=0;r<u.length;r++)this.errors.push(u.item(r).textContent.replace(/\s/g,""));var c=s.getElementsByTagName("Creatives");if(0!==c.length)for(c=c.item(0).getElementsByTagName("Creative"),r=0;r<c.length;r++){for(var h=c.item(r).firstChild;null!==h&&"Linear"!=h.tagName;)h=h.nextSibling;if(null!==h&&"Linear"==h.tagName){var f=new g(this,h);this.linear?this.linear.augment(f):(this.linear=f,i&&this.linear&&this.linear.tracking&&void 0!==this.linear.tracking&&i&&i.linear&&void 0!==i.linear&&void 0!==i.linear.tracking&&this.linear.tracking.augment(i.linear.tracking))}}}else this.hasContent=!1}function c(e,t){this.root=t,this.clickThrough=null,this.tracking=new l(t,e)}function g(e,t){var i;c.call(this,e,t),this.mediaFiles=[],this.clickThrough=null,this.duration=null,this.adParameters=null;var n=t.getElementsByTagName("VideoClicks");if(n.length){var r=(n=n.item(0)).getElementsByTagName("ClickThrough");for(r.length&&(this.clickThrough=r.item(0).textContent.replace(/\s/g,"")),r=n.getElementsByTagName("ClickTracking"),i=0;i<r.length;i++)this.tracking.addClickTracking(r.item(i).textContent.replace(/\s/g,""))}var a=t.getElementsByTagName("Duration");a.length&&(this.duration=this.timecodeFromString(a.item(0).textContent.replace(/\s/g,"")));var o=t.getElementsByTagName("AdParameters");o.length&&(this.adParameters=o.item(0).textContent);var s=t.getElementsByTagName("MediaFiles");if(s.length)for(s=s.item(0).getElementsByTagName("MediaFile"),i=0;i<s.length;i++){for(var l=s.item(i),d={},u=0;u<l.attributes.length;u++)d[l.attributes[u].name]=l.attributes[u].value;d.src=s.item(i).textContent.replace(/\s/g,""),this.mediaFiles.push(d)}}l.prototype.copy=function(e){var t=Object.create(l.prototype);for(var i in t.events={},this.events)this.events.hasOwnProperty(i)&&(t.events[i]=[].concat(this.events[i]));return t.ad=e,t},l.prototype.finger=function(e){if(e=Object(n.a)(e),"object"!==("undefined"==typeof window?"undefined":r(window))||"undefined"==typeof Image||"undefined"!=typeof buster){var t=p.XMLHttpRequest();t.open("get",e,!0),p.onBeforeSend(e,"tracking-pixel",t),t.send()}else{(new Image).src=e}},l.prototype.augment=function(e){for(var t in e.events)e.events.hasOwnProperty(t)&&(this.events[t]?this.events[t]=this.events[t].concat(e.events[t]):this.events[t]=e.events[t])},l.prototype.addClickTracking=function(e){var t={url:e,event:"click",offset:null};this.events.click?this.events.click.push(t):this.events.click=[t]},l.prototype.getEventsOfTypes=function(e){var t=[],i=-1<e.indexOf("progress");for(var n in this.events)this.events.hasOwnProperty(n)&&(-1<e.indexOf(n)||i&&0===n.indexOf("progress-"))&&(t=t.concat(this.events[n]));return t},l.prototype.track=function(e,t){if(this.events[e]&&0!==this.events[e].length){var i,n=[].concat(this.events[e]),r={};for(var a in t)t.hasOwnProperty(a)&&(r["["+a+"]"]=encodeURIComponent(t[a]));if("impression"==e)for(var o=this.ad;null!==o&&!o.hasSentImpression();){for(o.impressionSent(),i=0;i<o.impressions.length;i++)n.push({url:o.impressions[i]});o=o.parentAd}if("error"==e)for(i=0;i<o.errors.length;i++)n.push({url:o.errors[i]});for(i=0;i<n.length;i++){for(var s=n[i].url,l=""+parseInt(99999999*Math.random(),10);8!==l.length;)l="0"+l;for(a in r["[CACHEBUSTING]"]=l,r)r.hasOwnProperty(a)&&(s=s.replace(a,r[a]));this.finger(s)}}},d.prototype.getAd=function(e){var t=null;if(e&&(t=this.getAdWithSequence(1))&&!t.current().isEmpty())return t.current();for(var i=0;i<this.ads.length;i++)if(!this.ads[i].hasSequence()&&!this.ads[i].current().isEmpty())return this.ads[i].current()},d.prototype.getAdWithSequence=function(e){for(var t=0;t<this.ads.length;t++)if(this.ads[t].isNumber(e))return this.ads[t];return null},y.prototype.getTag=function(e,t){return this.properties.hasOwnProperty(e)?this.properties[e]:t},y.prototype.onLoaded=function(e,t){this.pod=e,this.currentPodAd=e.getAd(t),this.currentPodAd.isEmpty()||(this.loaded=!0,this.onAdAvailable&&this.onAdAvailable.call(this,this))},y.prototype.hasSentImpression=function(){return this.sentImpression},y.prototype.impressionSent=function(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];this.sentImpression=e},y.prototype.current=function(){return this.currentPodAd},y.prototype.isNumber=function(e){return this.sequence===e},y.prototype.hasSequence=function(){return null!==this.sequence},y.prototype.isEmpty=function(){return!this.hasContent},y.prototype.hasData=function(){return this.loaded},y.prototype.getNextAd=function(){return this.vast!==this.pod&&(this.currentPodAd=this.currentPodAd.getNextAd(),null!==this.currentPod)?this.currentPodAd.current():this.hasSequence()?this.vast.getAdWithSequence(this.sequence+1).current():null},y.prototype.getLinear=function(){return this.linear},c.prototype.track=function(e,t,i){this.tracking.track(e,{CONTENTPLAYHEAD:this.timecodeToString(t),ASSETURI:i})},c.prototype.timecodeToString=function(e){return("0"+parseInt(e/3600,10)+":"+("0"+parseInt(e%3600/60,10))+":"+("0"+e%60)).replace(/(^|:|\.)0(\d{2})/g,"$1$2")},c.prototype.timecodeFromString=function(e){return-1===e.indexOf(":")?e:3600*parseInt(e.substr(0,2),10)+60*parseInt(e.substr(3,2),10)+parseInt(e.substr(6,2),10)},c.prototype.getClickThrough=function(){return this.clickThrough},c.prototype.attribute=function(e,t){if(!this.root.hasAttribute(e))return t;var i=this.root.getAttribute(e);switch(e){case"skipoffset":case"duration":case"offset":case"minSuggestedDuration":i=this.timecodeFromString(i)}return i},(g.prototype=Object.create(c.prototype)).getDuration=function(){return this.duration},g.prototype.getAdParameters=function(){return this.adParameters},g.prototype.copy=function(e){return new g(e,this.root)},g.prototype.augment=function(e){this.adParameters=e.adParameters||this.adParameters,this.duration=e.duration||this.duration,this.mediaFiles=e.mediaFiles.slice(0)||this.mediaFiles.slice(0),this.tracking.augment(e.tracking),this.clickThrough=e.clickThrough||this.clickThrough},g.prototype.getAllMedias=function(){return this.mediaFiles},g.prototype.getBestMedia=function(e,t){for(var i=Number.POSITIVE_INFINITY,n=-1,r=0;r<this.mediaFiles.length;r++)if(this.mediaFiles[r].type==t){var a=this.mediaFiles[r],o=Math.sqrt(Math.pow(e.width-a.width,2)+Math.pow(e.height-a.height,2));if(o<i)i=o,n=r;else if(o===i){var s=this.mediaFiles[n],l=s.bitrate||s.maxBitrate,d=a.bitrate||a.maxBitrate;d&&!l?n=r:e.bitrate&&l&&d?Math.abs(d-e.bitrate)<Math.abs(l-e.bitrate)&&(n=r):l<d&&(n=r)}}if(-1!==n)return this.mediaFiles[n];for(r=0;r<this.mediaFiles.length;r++)if(this.mediaFiles[r].type==t)return this.mediaFiles[r];return null};var u=["start","firstQuartile","midpoint","thirdQuartile","complete","progress","skip"];g.prototype.getTrackingPoints=function(){var e=this.tracking.getEventsOfTypes(u),t=[],i=null;void 0!==this.duration&&this.duration&&(i=this.duration);for(var n=0;n<e.length;n++){var r,a={event:e[n].event,offset:null,percentOffset:null};switch(e[n].event){case"start":a.percentOffset="0%",a.offset=0;break;case"firstQuartile":a.percentOffset="25%",i&&(a.offset=.25*i);break;case"midpoint":a.percentOffset="50%",i&&(a.offset=.5*i);break;case"thirdQuartile":a.percentOffset="75%",i&&(a.offset=.75*i);break;case"complete":a.percentOffset="100%",i&&(a.offset=i);break;case"skip":-1===(r=this.attribute("skipoffset",0)).indexOf("%")?(a.offset=c.prototype.timecodeFromString(r),i&&(a.percentOffset=a.offset/i*100+"%")):(a.percentOffset=r,i&&(a.offset=i*parseInt(a.percentOffset,10)/100));break;default:if(!(r=e[n].offset))continue;"start"===r&&(r="0%"),"end"===r&&(r="100%"),-1===r.indexOf("%")?(a.offset=c.prototype.timecodeFromString(r),i&&(a.percentOffset=a.offset/i*100+"%")):(a.percentOffset=r,i&&(a.offset=i*parseInt(a.percentOffset,10)/100))}t.push(a)}return t.sort(function(e,t){return e.offset&&t.offset?e.offset-t.offset:e.percentOffset&&t.percentOffset?parseInt(e.percentOffset,10)-parseInt(t.percentOffset,10):0}),t}},function(e,t,i){"use strict";i.d(t,"a",function(){return m});var l=i(2);var u=i(1),d=i(7);var c=i(3),h=i(12);function f(e,t,i,n){var r=n.lengthInSeconds,a=void 0===r?null:r,o=n.adSlots,s=void 0===o?null:o,l=n.passbackAfterFirstBiddingWithNoAds,d=void 0!==l&&l;this.widget=e,this.passbackCallback=i,this.lengthInSeconds=a,this.passbackCode=t,this.adSlots=s,null!=this.passbackCode&&null!=this.lengthInSeconds&&0!=this.lengthInSeconds&&null!=this.adSlots&&0!=this.adSlots&&(this.passbackTimeout=null,this.adSlotsCounter=0,this.passbackAfterFirstBiddingWithNoAds=d,0<this.lengthInSeconds&&this.widget.player.subscribe(u.d,function(){clearTimeout(this.passbackTimeout),this.passbackTimeout=setTimeout(function(){this.renderPassback()}.bind(this),1e3*this.lengthInSeconds)}.bind(this)),this.widget.player.subscribe(c.c,function(){clearTimeout(this.passbackTimeout),this.adSlotsCounter=0,this.passbackAfterFirstBiddingWithNoAds=!1}.bind(this)),this.widget.player.subscribe(h.c,function(){this.adSlotsCounter++,(this.adSlots&&this.adSlotsCounter>=this.adSlots||this.passbackAfterFirstBiddingWithNoAds)&&this.renderPassback()}.bind(this)))}f.prototype.renderPassback=function(){clearTimeout(this.passbackTimeout),this.widget.player.DestroyPlayer(),this.passbackCallback()};var n=i(20),r=i(4),a=i(8);function p(e){var t,i,n,r,a,o,s;this.isMuted=!(0<e.volume),this.initialVolume=(null!==(t=e.volume)&&void 0!==t?t:1)/100,this.includeCountries=null!==(i=e.includeCountries)&&void 0!==i?i:[],this.excludeCountries=null!==(n=e.excludeCountries)&&void 0!==n?n:[],this.hourlyFQ=null!==(r=e.hourlyFQ)&&void 0!==r?r:0,this.dailyFQ=null!==(a=e.dailyFQ)&&void 0!==a?a:0,this.currentCountry=null!==(o=e.currentCountry)&&void 0!==o?o:"",this.cookieDomain=null!==(s=e.cookieDomain)&&void 0!==s?s:top.location.host,this.changeFQOnSoundOff=!1}function o(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,n)}return i}function s(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?o(Object(i),!0).forEach(function(e){g(t,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):o(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}function g(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function m(e,t,i,n,r,a){var o;if(this.onPassbackCallback=null,this.floaterOOVTimesShown=0,this.floaterOOVTimesShownHourly=0,this.shown=!1,this.loadPlayer=!0,this.startHidden=!1,this.playInitMethod=null,this.pauseOnHiddenTab=!1,this.autoSkipTimeToAutoSkip=null,this.startAdOnAdLoadedEvent=!0,this.windowToListenToEvents=window,this.serverResponse=e,this.prebidVastParameters=null,this.widgetStaticConfig=t,this.playerRequest=i,this.inFriendlyIframe=i.fiframe,this.isMobile=Object(d.a)(e.m),this.playerElement=a,this.isResponsive=d.b.call(this,t.ir,t.irm),d.c.call(this,t.w,t.wm,t.h,t.hm),function(e,t){this.playInitMethod=this.isMobile?t||"autoplay":e||"autoplay"}.call(this,t.pim,t.pimm),d.d.call(this,e.geo),this.apiObservable=r,this.playerScript=n,this.dynamicPixelPath="https://x.trvdp.com/p.gif",this.pixelPath="https://x.trvdp.com/pixel.gif",this.vastPath="https://stg.truvidplayer.com/v"+e.v+"/v.php",this.version=e.v,this.subUserId=i.sid,this.widgetType=t.wt,this.widgetId=i.wid,this.shown=!1,this.pageUrl=i.purl,this.adId=e.cid,this.domain=e.d,this.isLoop=null==t.lp||t.lp,this.repeatCounter=t.rpc,this.browser=e.b,this.isMobile=e.m,this.floaterCloseButtonPosition=null!=t.cbp?t.cbp:"left",this.debugMessages=t.d,this.ip=e.ip||"",this.userAgent=navigator.userAgent||"",this.pixels=e.p,this.opportunityPixel=Object(l.c)(this.pixels,"op",this.pixelPath),this.playerLoadPixel=Object(l.c)(this.pixels,"pl",this.pixelPath),this.isResponsive=d.b.call(this,t.ir,t.irm),this.geoLocation={},this.geoLocation.lat=e.lat,this.geoLocation.long=e.lng,this.osFamily=e.osf,this.osVersion=e.osv,this.isNativeClickOpensNewWindow=t.nnw,this.isABTestingActive=e.isab,this.useCustomCSS=t.ccss,this.isFullscreen=t.f,this.playlistData=e.c,this.vastParameters=e.vt,this.fia=t.fia,this.playOnlyMp4=t.pomp4,this.isPreroll=!1,this.numberOfPrerolls=null!==(o=t.apc)&&void 0!==o?o:1,this.midrollCount=0,this.midrollType=null,this.midrollInterval=0,this.isPostroll=!1,this.autoplay=!0,this.floaterSettings=null,this.continuePlayingAdOnFloaterClose=t.cpaofc,this.allowBiddingOnVideoChangeEvent=!0,this.startContentAfterBiddingSessionEnds=!0,this.soundInitiator=new p(this.createSoundObj()),this.sellersJsonId=void 0!==e.sj&&void 0!==e.sj.id?e.sj.id:"",this.isMobile?d.e.call(this,t.pcm,t.pwm,t.phm,t.plm,t.pasm,t.pofbm):d.e.call(this,t.pc,t.pw,t.ph,t.pl,t.pas,t.pofb),void 0!==t.aa&&1==t.aa||void 0===t.aa){this.passback=new f(this,this.onPassbackCallback,this.passbackCode,{lengthInSeconds:this.passbackLength,adSlots:this.passbackAdSlots,passbackAfterFirstBiddingWithNoAdsassbackAfterFirstBidding:this.passbackOnFirstBidding}),t.aid?(this.isPreroll=!0,this.midrollCount=1,this.midrollType="c"):(this.isPreroll=1==t.aip,this.midrollType=t.amt,"d"==this.midrollType?this.midrollInterval=t.amd:(this.midrollCount=t.am||0,this.midrollType="c"),this.isPostroll=1==t.aipr);var s={isPreroll:this.isPreroll,midrollType:this.midrollType,midrollInterval:this.midrollInterval,midrollCount:this.midrollCount,isPostroll:this.isPostroll,gdpr:e.g,isClickToPlay:"click_to_play"===this.playInitMethod,usPrivacy:e.ccpam,version:this.version};this.prebidVastParameters&&(s.prebidVastParameters=this.prebidVastParameters),this.ads=s}else this.ads=null;this.player=new u.b}p.prototype.setPlayer=function(e){this.changeFQOnSoundOff&&e.subscribe(u.k,function(){this.isSoundAllowed()}.bind(this))},p.prototype.getIsMuted=function(){return this.isMuted},p.prototype.checkSound=function(){return new Promise(function(e){Object(n.a)(this.isMuted).then(function(e){e&&this.isSoundAllowed()?(this.isMuted=!1,(this.hourlyFQ||this.dailyFQ)&&(this.changeFQOnSoundOff=!0)):this.isMuted=!0}.bind(this)).catch(function(){this.isMuted=!0}.bind(this)).finally(function(){return e()})}.bind(this))},p.prototype.getInitialVolume=function(){return this.initialVolume},p.prototype.isSoundAllowed=function(){var e,t;if(this.getPreviousValuesFromCookie(),null!==(e=this.includeCountries)&&void 0!==e&&e.length&&Array.isArray(this.includeCountries)){if(!this.includeCountries.includes(this.currentCountry))return!1}else if(null!==(t=this.excludeCountries)&&void 0!==t&&t.length&&Array.isArray(this.excludeCountries)&&this.excludeCountries.includes(this.currentCountry))return!1;return this.allowedByFQ()},p.prototype.getPreviousValuesFromCookie=function(){var e=Object(r.a)(a.g);e=e?JSON.parse(e):{},this.timesSoundOnHourly=e.timesSoundOnHourly,this.soundOnHourlyTimestamp=e.soundOnHourlyTimestamp,this.timesSoundOnDaily=e.timesSoundOnDaily,this.soundOnDailyTimestamp=e.soundOnDailyTimestamp},p.prototype.allowedByFQ=function(){var e=this.hourlyFQ||this.dailyFQ?{}:null,t=0,i=0;if(this.hourlyFQ&&(this.soundOnHourlyTimestamp&&(new Date-new Date(this.soundOnHourlyTimestamp))/a.a<1?(t=this.timesSoundOnHourly,e.soundOnHourlyTimestamp=this.soundOnHourlyTimestamp):(e.timesSoundOnHourly=0,e.soundOnHourlyTimestamp=Date.now()),t>=this.hourlyFQ))return!1;if(this.dailyFQ&&(this.soundOnDailyTimestamp&&(new Date-new Date(this.soundOnDailyTimestamp))/a.a<24?(i=this.timesSoundOnDaily,e.soundOnDailyTimestamp=this.soundOnDailyTimestamp):(e.timesSoundOnDaily=0,e.soundOnDailyTimestamp=Date.now()),i>=this.dailyFQ))return!1;if(null!==e&&(this.dailyFQ&&(e.timesSoundOnDaily=++i),this.hourlyFQ&&(e.timesSoundOnHourly=++t),e)){var n=new Date;n.setTime(n.getTime()+24*a.a),Object(r.c)(a.g,e,n,this.cookieDomain)}return!0},m.prototype.loadVideoPlayer=function(){this.onVideoPlayerReady&&this.onVideoPlayerReady()},m.prototype.getVastPath=function(e){var t="[videoUrl]",i="[videoId]",n=this.vastPath+e+"&ver="+this.version+"&adid="+this.adId+"&videoUrl="+t+"&height=[height]&width=[width]&pageHref="+encodeURIComponent(this.pageUrl)+"&videoId="+i+"&d="+this.domain+"&wid="+this.widgetId+"&suid="+this.subUserId+"&env_browser="+this.browser;return this.isMobile&&(n+="&mobile=true"),this.isABTestingActive&&(n+="&isab=true"),n},m.prototype.createSoundObj=function(){return s(s({},{volume:this.isMobile?this.widgetStaticConfig.vm:this.widgetStaticConfig.vd,includeCountries:this.isMobile?this.widgetStaticConfig.socim:this.widgetStaticConfig.soci,excludeCountries:this.isMobile?this.widgetStaticConfig.socem:this.widgetStaticConfig.soce,hourlyFQ:this.isMobile?this.widgetStaticConfig.sofqhm:this.widgetStaticConfig.sofqh,dailyFQ:this.isMobile?this.widgetStaticConfig.sofqdm:this.widgetStaticConfig.sofqd}),{},{currentCountry:this.serverResponse.geo,cookieDomain:this.domain})},m.prototype.renderVideoPlayer=function(){if(!this.shown){this.shown=!0;var e={playerId:"br_video_player_"+this.adId,width:this.width,height:this.height,autoplay:this.autoplay,vastPath:this.getVastPath(this.vastParameters),debugMessages:this.debugMessages,repeat:this.isLoop,repeatCounter:this.repeatCounter,opportunityPixel:this.opportunityPixel,pixelPath:this.pixelPath,playerLoadPixel:this.playerLoadPixel,widgetId:this.widgetId,userFailResponseHistory:this.userFailResponseHistory,domain:this.domain,widgetType:this.widgetType,isResponsive:this.isResponsive,ads:this.ads,isNativeClickOpensNewWindow:this.isNativeClickOpensNewWindow,isFullscreen:this.isFullscreen,pageUrl:this.pageUrl,ip:this.ip,geoLocation:this.geoLocation,apiObservable:this.apiObservable,hideOnPlaylistComplete:this.hideOnPlaylistComplete,autoSkipDuration:this.autoSkipTimeToAutoSkip,autoSkipTimeToStopPlayer:this.autoSkipTimeToStopPlayer,playerElement:this.playerElement,startHidden:this.startHidden,osVersion:this.osVersion,osFamily:this.osFamily,clickPixel:this.pixels.cl,clickPixelPath:"https://x.trvdp.com/c.gif",turnOnSoundWhenSkipAdOOV:!this.isAdOnlyOOVMethod,playlistContent:null};if(e.sellersJsonId=this.sellersJsonId,this.playlistData&&this.playlistData.pl&&0<this.playlistData.pl.length&&"in_read"!=this.widgetType){for(var t=0;t<this.playlistData.pl.length;t++){for(var i=0;i<this.playlistData.pl[t].f.length;i++)this.playlistData.pl[t].f[i].p="https://"+this.playlistData.bu+this.playlistData.pl[t].f[i].p;this.playlistData.pl[t].p="https://src.trvdp.com"+this.playlistData.pl[t].p}e.playlistContent=this.playlistData.pl}this.floaterSettings&&(e.floaterSettings=this.floaterSettings),e.subUserId=this.subUserId,e.playOnlyMp4=this.playOnlyMp4,this.pauseOnHiddenTab&&(e.pauseOnHiddenTab=this.pauseOnHiddenTab),e.ads&&void 0!==this.startAdOnAdLoadedEvent&&(e.ads.startAdOnAdLoadedEvent=this.startAdOnAdLoadedEvent),e.fia=this.fia,null!=this.setupParameters&&(e=function(e,t){var i,n={};for(i in e)n[i]=e[i];for(i in t)n[i]=t[i];return n}(e,this.setupParameters)),this.useCustomCSS&&function(e){var t=document.createElement("link");t.rel="stylesheet",t.href=e,document.head.appendChild(t)}("https://src.trvdp.com/css/"+this.subUserId+"/"+this.widgetId+".css");try{this.soundInitiator.checkSound().then(function(){e.volume=this.soundInitiator.getInitialVolume(),e.mute=this.soundInitiator.getIsMuted(),this.soundInitiator.setPlayer(this.player),this.player.setup(e,null)}.bind(this))}catch(e){Object(l.a)("thisplayersetupErr",this.playerRequest,e)}}},m.prototype.getDynamicPixel=function(e,t,i){return this.dynamicPixelPath+"?e="+this.pixels[e]+"&"+t+"="+i}},function(e,t,i){"use strict";i.d(t,"a",function(){return n});var a=i(7);function n(e,t,i,n){var r;if(null==document.createElement("video").canPlayType||!(0<document.createElement("video").canPlayType("video/mp4").length))throw"html5 and video is not supported";this.serverResponse=e,this.widgetStaticConfig=t,this.playerRequest=i,this.playerScript=n,this.widgetId=t.id,this.pageDocument=document,this.insideFriendlyIframe=!1,this.adId=e.cid,this.subUserId=e.sid,this.passbackRendered=!1,this.domain=null,this.pageUrl=null,this.playerLoaded=!1,this.isMobile=Object(a.a)(e.m),this.insideFriendlyIframe=i.fiframe,this.apiObservable=null,this.playerScript=n,this.passbackCode=null,this.passbackWidth=null,this.passbackHeight=null,this.passbackAdSlots=null,this.passbackLength=null,this.width=null,this.height=null,this.parentElement=null,this.loadOnlyOnce=null==e?void 0:null===(r=e.w)||void 0===r?void 0:r.loo,this.isResponsive=a.b.call(this,t.ir,t.irm),a.c.call(this,t.w,t.wm,t.h,t.hm),this.isMobile?a.e.call(this,t.pcm,t.pwm,t.phm,t.plm,t.pasm,t.pofbm):a.e.call(this,t.pc,t.pw,t.ph,t.pl,t.pas,t.pofb)}n.prototype.SetPlacementPromise=function(){var r=this;return new Promise(function(e,t){var i=!1;if("HEAD"==r.playerScript.parentNode.nodeName)if("complete"==document.readyState)r.SetPlacement(),e();else var n=setInterval(function(){"complete"==document.readyState&&(i||(i=!0,clearInterval(n),r.SetPlacement(),e()))},100);else r.SetPlacement(),e()})},n.prototype.SetPlacement=function(){var e=null;if("function"==typeof this.setPlacementForWidgetType&&(e=this.setPlacementForWidgetType()),!e){for(var t=document.getElementsByClassName("truvid_placeholder_"+this.widgetId),i=0;i<t.length;i++){var n=t[i].getAttribute("data-used");if(""==t[i].innerHTML&&null==n){t[i].setAttribute("data-used","true"),e=t[i];break}}if(!e)if("HEAD"!=this.playerScript.parentElement.nodeName){var r=document.createElement("div");this.playerScript.parentElement.insertBefore(r,this.playerScript.nextSibling),e=r}else e=e||document.getElementsByTagName("body")[0]}this.parentElement=e},n.prototype.renderFallbacks=function(){return!(this.passbackOnFirstBidding||!this.passbackCode||null!=this.passbackAdSlots||null!=this.passbackLength)&&(this.renderPassback(),!0)},n.prototype.renderPassback=function(){var e=this.parentElement,t=document.createElement("iframe");e.style.height=this.passbackHeight+"px",t.id="passback_truvid_"+this.adId,t.width=this.passbackWidth,t.height=this.passbackHeight,t.style.cssText="width: "+this.passbackWidth+"px; height: "+this.passbackHeight+"px; border: none;",e.style.display="flex",e.style.flexDirection="row",e.style.justifyContent="center",e.appendChild(t),t.contentWindow.document.open(),t.contentWindow.document.write('<body style="margin: 0;">'+decodeURIComponent(this.passbackCode)+"</body>"),t.contentWindow.document.close();try{if(this.insideFriendlyIframe){var i=window.frameElement;i.style.cssText="height: "+this.passbackHeight+"px; width: "+this.passbackWidth+"px; border: none; margin-left: "+(i.parentNode.getBoundingClientRect().width-parseFloat(i.style.width))/2+"px; margin-top: "+(i.parentNode.getBoundingClientRect().height-parseFloat(i.style.height))/2+"px",t.style.marginLeft="0px"}}catch(e){}this.passbackRendered=!0},n.prototype.switchToPassback=function(){if(!this.passbackRendered){var e=this.parentElement;if(e)for(;0<e.childNodes.length;)e.removeChild(e.childNodes[0]);else this.SetPlacement();e.style.width=this.width+"px",e.style.height=this.height+"px",this.renderPassback()}},n.prototype.checkLoadOnlyOnce=function(){if(window.trv_widgets_loaded_once||(window.trv_widgets_loaded_once={}),window.trv_widgets_loaded_once[this.widgetId])throw new Error('Load only Once" flag prevents a second instance of this widget Id');window.trv_widgets_loaded_once[this.widgetId]=!0},n.prototype.loadPlayer=function(i){var n=this;return new Promise(function(e,t){this.playerLoaded||(this.playerLoaded=!0,this.apiObservable=i,this.loadOnlyOnce&&this.checkLoadOnlyOnce(),this.SetPlacementPromise().then(function(){this.renderFallbacks()||(this.renderWidget(),e())}.bind(n)).catch(function(e){t(e)}))}.bind(this))},n.prototype.getWidget=function(){return this.widgetObject}},function(e,t,i){"use strict";function n(s){var l=null;return new Promise(function(e,t){if(s)e(!1);else{var i=function(){r.play().then(function(){o(),e(!0)}).catch(function(){o(),t(!1)})},n=new Blob([new Uint8Array([0,0,0,28,102,116,121,112,105,115,111,109,0,0,2,0,105,115,111,109,105,115,111,50,109,112,52,49,0,0,0,8,102,114,101,101,0,0,2,239,109,100,97,116,33,16,5,32,164,27,255,192,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,55,167,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,112,33,16,5,32,164,27,255,192,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,55,167,128,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,112,0,0,2,194,109,111,111,118,0,0,0,108,109,118,104,100,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,232,0,0,0,47,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,1,236,116,114,97,107,0,0,0,92,116,107,104,100,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,47,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,36,101,100,116,115,0,0,0,28,101,108,115,116,0,0,0,0,0,0,0,1,0,0,0,47,0,0,0,0,0,1,0,0,0,0,1,100,109,100,105,97,0,0,0,32,109,100,104,100,0,0,0,0,0,0,0,0,0,0,0,0,0,0,172,68,0,0,8,0,85,196,0,0,0,0,0,45,104,100,108,114,0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0,0,0,1,15,109,105,110,102,0,0,0,16,115,109,104,100,0,0,0,0,0,0,0,0,0,0,0,36,100,105,110,102,0,0,0,28,100,114,101,102,0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1,0,0,0,211,115,116,98,108,0,0,0,103,115,116,115,100,0,0,0,0,0,0,0,1,0,0,0,87,109,112,52,97,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,2,0,16,0,0,0,0,172,68,0,0,0,0,0,51,101,115,100,115,0,0,0,0,3,128,128,128,34,0,2,0,4,128,128,128,20,64,21,0,0,0,0,1,244,0,0,1,243,249,5,128,128,128,2,18,16,6,128,128,128,1,2,0,0,0,24,115,116,116,115,0,0,0,0,0,0,0,1,0,0,0,2,0,0,4,0,0,0,0,28,115,116,115,99,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,2,0,0,0,1,0,0,0,28,115,116,115,122,0,0,0,0,0,0,0,0,0,0,0,2,0,0,1,115,0,0,1,116,0,0,0,20,115,116,99,111,0,0,0,0,0,0,0,1,0,0,0,44,0,0,0,98,117,100,116,97,0,0,0,90,109,101,116,97,0,0,0,0,0,0,0,33,104,100,108,114,0,0,0,0,0,0,0,0,109,100,105,114,97,112,112,108,0,0,0,0,0,0,0,0,0,0,0,0,45,105,108,115,116,0,0,0,37,169,116,111,111,0,0,0,29,100,97,116,97,0,0,0,1,0,0,0,0,76,97,118,102,53,54,46,52,48,46,49,48,49])],{type:"video/mp4"}),r=document.createElement("video");r.style.position="absolute",r.style.height="0px",r.style.width="0px",r.setAttribute("controls","controls"),r.autoplay=!0,r.preload="auto",r.setAttribute("webkit-playsinline","webkit-playsinline"),r.setAttribute("playsinline","playsinline");var a=function(){(0<r.currentTime||1==r.ended)&&(o(),e(!0))},o=function(){clearTimeout(l),r.removeEventListener("playing",a),r.removeEventListener("timeupdate",a),r.removeEventListener("loadeddata",i)};r.addEventListener("playing",a),r.addEventListener("timeupdate",a),r.addEventListener("loadeddata",i),r.src=URL.createObjectURL(n),r.load(),l=setTimeout(function(){o(),e(!1)},3e3)}})}i.d(t,"a",function(){return n})},function(e,t,i){"use strict";i.d(t,"a",function(){return r});var a=i(8),n=i(11),o=i(4);function r(e){this.widget=e,this.isDailyOrSessionFqEnabled=!1,this.isHourFQEnabled=!1,this.shouldWriteToCookie=!1,this.isDailyFQEnabled=!1,e.outofviewMethod==a.c?this.SetFQ(e.outofviewAdOnlyFQ,e.outofviewAdOnlyFQDaily,e.outofviewAdOnlyFQHourly):e.outofviewMethod==a.d&&this.SetFQ(e.outofviewFloaterFQ,e.outofviewFloaterFQDaily,e.outofviewFloaterFQHourly),this.shouldWriteToCookie&&(this.isDailyOrSessionFqEnabled||this.isHourFQEnabled)&&this.widget.player.subscribe(n.d,this.onFloaterFQDecreased.bind(this))}r.prototype.SetFQ=function(e,t,i){this.isDailyOrSessionFqEnabled=e,this.numberOfTimesFloaterIsAllowedToBeOpened=e,t&&(this.isDailyFQEnabled=!0,this.numberOfTimesFloaterIsAllowedToBeOpened=e-this.widget.floaterOOVTimesShown),i&&(this.isHourFQEnabled=!0,this.numberOfTimesFloaterIsAllowedToBeOpened=i-this.widget.floaterOOVTimesShownHourly),this.shouldWriteToCookie=t||i},r.prototype.onFloaterFQDecreased=function(){this.widget.floaterOOVTimesShown++,this.widget.floaterOOVTimesShownHourly++;var e=Object(o.a)(a.b);e=e&&JSON.parse(e);var t=null;if(this.isHourFQEnabled){t={};var i=0;e&&e.hourlyFQTimestamp&&(new Date-new Date(e.hourlyFQTimestamp))/1e3/60/60<1?(i=e.timesShownHourly,t.hourlyFQTimestamp=e.hourlyFQTimestamp):t.hourlyFQTimestamp=Date.now(),i++,t.timesShownHourly=i}else if(this.isDailyFQEnabled){t={};var n=0;e&&e.dailyFQTimestamp&&(new Date-new Date(e.dailyFQTimestamp))/1e3/60/60<24?(n=e.timesShown,t.dailyFQTimestamp=e.dailyFQTimestamp):t.dailyFQTimestamp=Date.now(),n++,t.timesShown=n}if(t){var r=new Date;r.setTime(r.getTime()+a.f),Object(o.c)(a.b,t,r,this.widget.playerRequest.dcookie)}},r.prototype.IsFQEnabled=function(){return this.isDailyOrSessionFqEnabled||this.isHourFQEnabled},r.prototype.GetNumberOfTimesFloaterIsAllowedToBeOpened=function(){return this.numberOfTimesFloaterIsAllowedToBeOpened}},function(e,t,i){"use strict";i.d(t,"a",function(){return o});var n=i(1),r=i(3),a=i(13);function o(e){this.widget=e,this.widget.autoplay=!1,this.isBidding=!1,this.onBiddingSessionEndsHandler=this.onBiddingSessionEnds.bind(this),this.onAdStartedHandler=this.onAdStarted.bind(this),this.widget.player.subscribe(n.d,function(t){return new Promise(function(e){void 0!==t.detail.switchToCTP&&t.detail.switchToCTP&&(this.widget.allowBiddingOnVideoChangeEvent=!1),this.widget.adSlots.IsPreroll()&&(window.playerLog("setting click to play because preroll exist"),this.widget.player.setPlayerContentStatus(n.e)),e()}.bind(this))}.bind(this)),this.widget.player.subscribe(a.e,function(){this.widget.allowBiddingOnVideoChangeEvent&&this.StartBidding()}.bind(this))}o.prototype.IsBidding=function(){return this.isBidding},o.prototype.IsBiddingFinished=function(){return!this.isBidding&&!this.widget.adSlots.IsSlotAvailable(0)},o.prototype.StartBidding=function(){var e=this.widget.adSlots.IsSlotAvailable(0);e&&(this.isBidding=!0,this.RegisterToPrerollEvents(),this.widget.adSlots.RemoveSlot(e.offset),this.widget.player.StartBiddingSession(e))},o.prototype.onBiddingSessionEnds=function(){this.isBidding=!1,this.widget.player.getPlayerContentStatus()==n.e&&this.widget.allowToStartContentAfterPreroll&&(this.widget.player.SetAllowStartingContentOnPlayRequest(!0),this.widget.player.play()),this.widget.player.unsubscribe(r.g,this.onBiddingSessionEndsHandler),this.widget.player.unsubscribe(r.c,this.onAdStartedHandler)},o.prototype.RegisterToPrerollEvents=function(){this.widget.player.subscribe(r.g,this.onBiddingSessionEndsHandler),this.widget.player.subscribe(r.c,this.onAdStartedHandler)},o.prototype.onAdStarted=function(){this.isBidding=!1,this.widget.player.setPlayerContentStatus(n.g),this.widget.player.SetAllowStartingContentOnPlayRequest(!0),this.widget.player.unsubscribe(r.c,this.onAdStartedHandler),this.widget.player.unsubscribe(r.g,this.onBiddingSessionEndsHandler)}},function(e,t,i){"use strict";function g(e){this.api=e}function m(){this.subscribers=[],this.allowedEvents=["loaded","ready","click","adImpression","adClick"]}i.d(t,"a",function(){return n}),g.prototype.notify=function(e,t){this.api.fire(e,t)},m.prototype.on=function(e,t,i){if("function"!=typeof t)throw"callback is not a function";if(!(-1<this.allowedEvents.indexOf(e)))throw"event registration is not allowed";void 0===this.subscribers[e]&&(this.subscribers[e]=[]),this.subscribers[e].push({callback:t,context:i||this})},m.prototype.off=function(e,t){for(var i=this.subscribers[e],n=i?i.length:0,r=0;r<n;r++)i[r].callback==t&&i.splice(r,1)},m.prototype.fire=function(e,t){for(var i=this.subscribers[e],n=i?i.length:0,r=0;r<n;r++)i[r].callback.call(i[r].context,t)};var v=i(4),y=i(10);function b(r,a,o,s,l,d,u,c,h,f,p,g,m,v){return new Promise(function(i,n){void 0===window.truvid_protected&&(window.truvid_protected={result:null,fraud:null});var e=function(e,t,i,n){if(e){if(!i)return!0;try{var r;return!(r=n||A())||(r.geo!=t||(void 0===r.val||void 0===r.timestamp?1==parseInt(r.level):Math.round((new Date).getTime()/1e3)-r.timestamp<600?"t"==r.val||"c"!=r.val&&null:"t"==r.val||("c"==r.val&&1==parseInt(r.level)||("c"!=r.val||2!=parseInt(r.level)))))}catch(e){return!0}}return!1}(r,s,o,v);if(null===e)n();else if(!1===e)i(!0);else if(null==window.truvid_protected.result)(function(t,a,o,s,l,d,u,c,h,f,p){return new Promise(function(i,n){var r=w(t,a,o,s,f);l&&T(r[0],r[1],d,u,c,h,f);var e="https://rt.ad-score.com/score/cors?s=1".concat("&pid=",r[0],"&tid=truvidTraffic&",r[1],"&cb=",Math.random().toString());Object(y.a)(e,!0,2500).then(function(e){if("error"===e)S("ex",r[0],r[1]),i(null);else if("timeout"==e)S("t",r[0],r[1]),E(o,"t",d,p,f),i(null);else{var t=JSON.parse(e.toString());t&&"undefined"!=t.score&&void 0!==t.score.black?i(t):(S("ex",r[0],r[1]),n("error from protected"))}}).catch(function(e){console.log(e),n("error protected code")})})})(l,c,s,u,h,d,f,p,g,m,v).then(function(e){if(e){var t=100==e.score.black;if(window.truvid_protected.fraud=t,window.truvid_protected.result=!0,o)E(s,1==t?"f":"c",d,v,m);a&&t?n("protected error"):i(!0)}else i(!0)}).catch(function(e){console.log("error fetching protected"),console.log(e),i(!0)});else{if(h){var t=w(l,c,s,u,m);T(t[0],t[1],d,f,p,g,m)}0==window.truvid_protected.fraud?i(!0):a&&n("protected error")}})}function w(e,t,i,n,r){var a="pub_domain="+window.location.hostname+"&l1="+e;return a+="&l2="+t,a+="&l3="+i,a+=n?"&l4=mobile":"&l4=desktop",["1000032",a+="&l5="+r]}function E(e,t,i,n,r){var a,o=0;(a=n||A())&&a.level?(0==(o=parseInt(a.level))||1==o&&e==a.geo)&&(void 0!==a.fraud?0==a.fraud&&"c"==t&&(o+=1):void 0!==a.val&&("t"!=a.val&&"c"!=a.val||"c"!=t?"f"==t&&(o=0):o+=1)):"c"==t&&(o+=1);var s=Math.round((new Date).getTime()/1e3),l={val:t,level:o,geo:e,timestamp:s};a&&a.jsdt&&(l.jsdt=a.jsdt);var d=h();Object(v.c)("truvid_protected",l,d,i),c(t,e,s,o,r)}function c(e,t,i,n,r){var a=document.createElement("div");a.innerHTML='<iframe class="truvid-protected-c" height="0" width="0" marginwidth="0" marginheight="0" scrolling="no" frameborder="0" src="https://stg.truvidplayer.com/v'+r+"/prtct.php?val="+e+"&geo="+t+"&timestamp="+i+"&level="+n+'" style="border: 0; display: none;"></iframe>',document.body.appendChild(a)}function h(){var e=new Date;return e.setTime(e.getTime()+5184e6),e}function S(e,t,i){document.createElement("img").src="https://rt.ad-score.com/score/img?s="+e+"&r="+Math.random()+"&pid="+t+"&tid=truvidTraffic&"+i}function A(){try{var e=Object(v.a)("truvid_protected");if((e=JSON.parse(e))&&((void 0!==e.fraud||void 0!==e.val)&&void 0!==e.level&&void 0!==e.geo||void 0!==e.jsdt))return e}catch(e){}return null}function T(e,t,i,n,r,a,o){var s=A();if(s&&s.jsdt&&(Date.now()-s.jsdt)/1e3/60/60<24)return!1;var l="&ref="+a+"&cid="+n+"&uip="+r+"&pub_ua="+navigator.userAgent,d=document.createElement("script");d.type="text/javascript",d.async=!0,d.src="https://js.ad-score.com/score.min.js?pid="+e+"&tt=g#tid=videoJS&"+t+l+"&cb="+Math.random().toString(),document.head.appendChild(d),(s=s||{}).jsdt=(new Date).getTime();var u=h();Object(v.c)("truvid_protected",s,u,i),c(s.val,s.geo,s.timestamp,s.level,o)}var L=i(5),C=i(2);function n(c,h,f,p){return new Promise(function(e,t){h.fiframe=Object(L.c)();var i=new m;if(void 0!==window.truvid_callback)try{window.truvid_callback(i)}catch(e){}var n=new g(i);n.notify("loaded",{widgetId:h.wid});var r=c.w,a=Object(v.b)(c.d);h.dcookie=a;var o=null==r.pra||r.pra,s=null==r.prb||r.prb,l=null==r.prc||r.prc;l&&(c.g||c.ou)&&(l=!1);var d=l&&c.pjs,u=c.v+(void 0!==c.isab&&c.isab?"B":"");b(o,s,l,c.geo,h.wid,a,c.m,c.d,d,c.cid,c.ip,h.purl,u,c.prtct).then(function(){new p(c,r,h,f).loadPlayer(n).then(function(){e()}).catch(function(e){Object(C.a)("initcatchEx",h,e),console.log("error on loading player"),console.log(e),t(e)})}).catch(function(e){t(e)})})}},,function(e,t,i){"use strict";i.r(t);var r=i(19),o=i(18),n=i(1),a=i(3),s=i(13),l=i(11);function d(e){this.widget=e,this.playerReady=!1,this.lastBidDate=null,this.biddingInterval=null,this.interval=3e4,this.biddingIntervalFunctionBinding=null,this.pauseOnNextOutOfView=!1,this.switchedToC2P=!1,this.onBiddingSessionEndsBinding=this.onBiddingSessionEnds.bind(this),this.onAdStartedBinding=this.onAdStarted.bind(this),this.onBeforeBiddingSessionStartBinding=this.onBeforeBiddingSessionStart.bind(this)}d.prototype.Init=function(){return new Promise(function(e){this.setAdInitiation(),e()}.bind(this))},d.prototype.onPlayerViewabilityChange=function(){this.slotsReady&&(this.widget.player.IsPlayerViewable()?(this.widget.player.isAdPlaying()||(this.pauseOnNextOutOfView=!0),this.widget.allowBiddingOnVideoChangeEvent=!0,this.widget.player.SetAllowRestoringContent(!0),this.playerReady&&this.widget.player.SetAllowStartingContentOnPlayRequest(!0),this.widget.player.isAdPlaying()||this.stop()):this.pauseOnNextOutOfView&&!this.widget.player.isAdPlaying()&&(this.pauseOnNextOutOfView=!1,this.widget.player.SetAllowStartingContentOnPlayRequest(!1),this.widget.player.SetAllowRestoringContent(!1),this.widget.player.pause(!1),this.start()))},d.prototype.setAdInitiation=function(){this.biddingIntervalFunctionBinding=this.biddingIntervalFunction.bind(this),this.widget.allowBiddingOnVideoChangeEvent=!1,this.widget.player.subscribe(a.f,function(){this.lastBidDate=new Date}.bind(this)),this.widget.player.subscribe(n.j,function(e){var t=e.detail.isPlayerViewable;this.onPlayerViewabilityChange(t)}.bind(this)),this.widget.player.subscribe(a.c,function(){this.clearBiddingTimeout(),this.pauseOnNextOutOfView=!1,this.widget.player.SetAllowRestoringContent(!0),this.widget.player.SetAllowStartingContentOnPlayRequest(!0),this.widget.player.setPlayerContentStatus(n.g)}.bind(this)),this.widget.player.subscribe(n.a,function(){this.widget.player.SetLoadVideoOnPlaylistChange(!0),this.widget.player.IsPlayerViewable()||(this.clearBiddingTimeout(),this.start())}.bind(this)),this.widget.player.subscribe(n.h,function(){this.playerReady=!0,this.widget.player.IsPlayerViewable()?this.widget.Play():(this.widget.player.SetAllowStartingContentOnPlayRequest(!1),this.widget.player.SetAllowRestoringContent(!1),this.start(),this.biddingIntervalFunction())}.bind(this)),this.widget.player.subscribe(n.d,this.onNewVideoBeforeVideoChanged.bind(this)),this.widget.player.subscribe(s.e,this.onSetSlotsEvents.bind(this)),this.widget.player.subscribe(a.e,this.onBeforeBiddingSessionStartBinding),this.widget.player.subscribe(l.c,function(){this.widget.continuePlayingAdOnFloaterClose||this.widget.player.killBiddingSession()}.bind(this))},d.prototype.onSetSlotsEvents=function(){this.slotsReady=!0,this.widget.player.IsPlayerViewable()?(this.pauseOnNextOutOfView=!0,this.widget.allowBiddingOnVideoChangeEvent=!0,this.widget.player.SetAllowRestoringContent(!0),this.playerReady&&this.widget.player.SetAllowStartingContentOnPlayRequest(!0),this.stop()):this.pauseOnNextOutOfView&&(this.pauseOnNextOutOfView=!1,this.widget.player.SetAllowStartingContentOnPlayRequest(!1),this.widget.player.SetAllowRestoringContent(!1),this.widget.player.pause(!1),this.start()),this.switchedToC2P=!1},d.prototype.start=function(){this.widget.player.unsubscribe(a.g,this.onBiddingSessionEndsBinding),this.widget.player.unsubscribe(a.c,this.onAdStartedBinding),null==this.biddingInterval&&(window.playerLog("setting interval bidding"),this.biddingInterval=setInterval(this.biddingIntervalFunctionBinding,this.interval))},d.prototype.biddingIntervalFunction=function(){if(this.widget.player.canStartBiddingSession()){var e=this.widget.player.getVideo().currentTime,t=this.widget.adSlots.getLastSlotByOffset(e);t?this.widget.player.StartBiddingSession(t):window.playerLog("no ad slot")}else window.playerLog("can not start bidding session")},d.prototype.clearBiddingTimeout=function(){clearInterval(this.biddingInterval),this.biddingInterval=null},d.prototype.stop=function(){this.clearBiddingTimeout(),this.switchedToC2P||0!=this.widget.player.getCurrentContentTime()||null==this.widget.preroll||!this.widget.preroll.IsBiddingFinished()?this.switchedToC2P||(this.widget.Play(),this.widget.preroll&&!this.widget.preroll.IsBiddingFinished()&&this.widget.preroll.IsBidding()&&(this.widget.player.subscribe(a.g,this.onBiddingSessionEndsBinding),this.widget.player.subscribe(a.c,this.onAdStartedBinding))):this.widget.preroll.IsBidding()||this.widget.Play()},d.prototype.onNewVideoBeforeVideoChanged=function(e){this.slotsReady=!1,this.widget.player.IsPlayerViewable()?this.widget.allowToStartContentAfterPreroll=!0:(window.playerLog("dont load video on next video"),this.widget.player.SetAllowStartingContentOnPlayRequest(!1),this.widget.allowToStartContentAfterPreroll=!1),this.widget.isPreroll&&this.widget.player.SetLoadVideoOnPlaylistChange(!1),this.switchedToC2P=e.detail.switchToCTP},d.prototype.onBiddingSessionEnds=function(){this.widget.player.unsubscribe(a.c,this.onAdStartedBinding),this.widget.player.unsubscribe(a.g,this.onBiddingSessionEndsBinding),this.widget.player.IsPlayerViewable()&&(window.playerLog("play from bidding session ends"),this.widget.Play())},d.prototype.onAdStarted=function(){this.widget.player.unsubscribe(a.g,this.onBiddingSessionEndsBinding),this.widget.player.unsubscribe(a.c,this.onAdStartedBinding)},d.prototype.onBeforeBiddingSessionStart=function(){return new Promise(function(e,t){this.widget.player.getPlayerDimension().height<=50?setTimeout(function(){this.widget.player.getPlayerDimension().height<=50?setTimeout(function(){this.widget.player.getPlayerDimension().height<=50?this.widget.player.isAdOnlyAvailable()?e():t():e()}.bind(this),2e3):e()}.bind(this),2e3):e()}.bind(this))};var u=i(20);function c(e){this.widget=e}function h(e){this.widget=e}c.prototype.Init=function(){return new Promise(function(e){Object(u.a)(this.widget.mute).then(function(){this.setAutoplay(),e()}.bind(this)).catch(function(){this.widget.autoplay=!1,this.widget.allowBiddingOnVideoChangeEvent=!1,e()}.bind(this))}.bind(this))},c.prototype.setAutoplay=function(){this.widget.adSlots&&this.widget.adSlots.IsPreroll()&&(this.widget.autoplay=!1,this.widget.player.subscribe(n.h,function(){this.widget.adSlots.IsSlotAvailable(0)&&this.widget.preroll.StartBidding()}.bind(this)))},h.prototype.Init=function(){return new Promise(function(e){this.widget.autoplay=!1,this.widget.allowBiddingOnVideoChangeEvent=!1,e()}.bind(this))};var f=i(21),p=i(22);function g(e){this.widget=e,this.savingModeForContentTimeout=null,this.widget.player.subscribe(n.h,function(){this.initSavingModeTracking()}.bind(this))}function m(e){this.widget=e,this.sessionTotalTime=0,this.viewabilityTotalTime=0,this.widget.player.subscribe(n.h,function(){this.viewabilityInterval=window.setInterval(function(){this.widget.player.isAdPlaying()||(this.sessionTotalTime+=250,this.widget.player.IsPlayerViewable()&&(this.viewabilityTotalTime+=250))}.bind(this),250),window.addEventListener("unload",function(){var e=this.widget.getDynamicPixel("dvw","vw",(this.viewabilityTotalTime/this.sessionTotalTime*100).toFixed(0));navigator.sendBeacon(e,null)}.bind(this))}.bind(this))}g.prototype.initSavingModeTracking=function(){var e=new IntersectionObserver(this.onSavingModeViewabilityCallback.bind(this),{root:null,rootMargin:"0px",threshold:.25}),t=this.widget.player.getPlayerElement();t&&e.observe(t)},g.prototype.onSavingModeViewabilityCallback=function(e){e[0].intersectionRatio<.25?this.savingModeForContentTimeout||(this.savingModeForContentTimeout=setTimeout(function(){this.savingModeForContentTimeout=null,this.widget.player.EnableSavingModeForContent()}.bind(this),2e3)):(clearTimeout(this.savingModeForContentTimeout),this.savingModeForContentTimeout=null,this.widget.player.isAdPlaying()&&"adonly"==this.widget.outofviewMethod||this.widget.player.DisableSavingModeForContent())};var v=i(8);function y(e){this.widget=e,this.pausedByOutOfView=!1,this.widget.player.subscribe(n.j,function(e){e.detail.isPlayerViewable||this.widget.player.getPlayerContentStatus()!=n.g?this.pausedByOutOfView&&this.widget.player.play():(this.pausedByOutOfView=!0,this.widget.player.pause())}.bind(this))}var b=i(2);function w(e,t,i,n,r,a){this.playerRequest=i,o.a.call(this,e,t,i,n,r,a),this.setInstreamConfig(),void 0!==t.aa&&0==t.aa?this.renderWidget():this.setAdvertising().then(function(){this.renderWidget()}.bind(this)).catch(function(e){Object(b.a)("setAdvertisingError",this.playerRequest,e)}.bind(this))}function E(e,t,i,n){r.a.call(this,e,t,i,n)}(w.prototype=Object.create(o.a.prototype)).constructor=o.a,w.prototype.setInstreamConfig=function(){if(this.playerRequest.adblock&&(this.playInitMethod="click_to_play"),this.inFriendlyIframe&&(this.windowToListenToEvents=window.top),this.autoSkipTimeToStopPlayer=this.widgetStaticConfig.asstsc,this.autoSkipTimeToAutoSkip=this.widgetStaticConfig.asct,this.pauseOnHiddenTab=this.widgetStaticConfig.poht||!1,this.isPrebidActive=this.widgetStaticConfig.hba||!1,this.floateFq=new f.a(this),"adonly"==this.outofviewMethod||"floater"==this.outofviewMethod){var e=!1;"floater"==this.outofviewMethod&&(e=!this.outofviewFloaterStartWithFloater),"adonly"==this.outofviewMethod&&(e=this.isMobile?this.widgetStaticConfig.oovaoavm||!1:this.widgetStaticConfig.oovaoav||!1),this.floaterSettings={enableFq:this.floateFq.IsFQEnabled(),fq:this.floateFq.GetNumberOfTimesFloaterIsAllowedToBeOpened(),showOnlyOnAds:"adonly"==this.outofviewMethod,openFloaterOnNextAd:"floater"==this.outofviewMethod,showAfterPlayerView:e,width:this.floaterWidthOnOutofview,height:this.floaterHeightOnOutofview,padding:this.floaterPadding,position:this.floaterPositionOutOfView,closeButtonPosition:this.floaterCloseButtonPosition,counterToCloseFloater:this.closeFloaterDelay}}this.isAdOnlyOOVMethod="adonly"===this.outofviewMethod,this.savingMode=new g(this),this.viewabilityCounter=new m(this),this.outofviewMethod==v.e&&(this.outofviewMethodPause=new y(this))},w.prototype.setPlayInitMethod=function(){return new Promise(function(t){switch(this.playInitMethod){case"autoplay":this.SetAutoplayMethod();break;case"click_to_play":this.SetClickToPlay();break;default:this.playInitMethodObj=new d(this)}this.playInitMethodObj?this.playInitMethodObj.Init().then(function(){t()}.bind(this)).catch(function(e){Object(b.a)("playinitmehtod.initEx",this.playerRequest,e),t()}.bind(this)):t()}.bind(this))},w.prototype.Play=function(){this.player.getPlayerPausedOnUserBehalf()||(this.preroll&&!this.preroll.IsBiddingFinished()?this.preroll.IsBidding()||this.preroll.StartBidding():this.preroll&&this.preroll.IsBidding()||this.player.play())},w.prototype.SetClickToPlay=function(){this.playInitMethodObj=new h(this)},w.prototype.SetAutoplayMethod=function(){this.playInitMethodObj=new c(this)},w.prototype.renderWidget=function(){this.loadPlayer&&(this.renderVideoPlayer(),this.initStyle())},w.prototype.afterPlaylistChange=function(){this.adSlots.IsSlotAvailable(0)&&(window.playerLog("setting click to play because afterplaylistchange"),this.player.setPlayerContentStatus(n.e))},w.prototype.initStyle=function(){},w.prototype.SetOnPassbackCallback=function(e){this.onPassbackCallback=e},w.prototype.listenToPlayerEvents=function(){this.player.subscribe(n.n,function(e){if(void 0!==e.detail.currentTime){var t=this.adSlots.IsSlotAvailable(e.detail.currentTime);if(t)this.player.canStartBiddingSession()&&(this.adSlots.RemoveSlot(t.offset),this.player.StartBiddingSession(t))}}.bind(this)),this.player.subscribe(n.m,function(){this.allowBiddingOnVideoChangeEvent=!0}.bind(this))},w.prototype.setAdvertising=function(){return new Promise(function(t){this.adSlots=new s.a(this),this.allowToStartContentAfterPreroll=!0,this.adSlots.isPreroll&&(this.preroll=new p.a(this)),this.setPlayInitMethod().then(function(){this.listenToPlayerEvents(),t()}.bind(this)).catch(function(e){Object(b.a)("setPlayerinitMethodListenEx",this.playerRequest,e),t()}.bind(this))}.bind(this))},(E.prototype=Object.create(r.a.prototype)).constructor=r.a,E.prototype.renderWidget=function(){try{this.widgetObject=new w(this.serverResponse,this.widgetStaticConfig,this.playerRequest,this.playerScript,this.apiObservable,this.parentElement),this.widgetObject.SetOnPassbackCallback(this.switchToPassback.bind(this))}catch(e){console.log("error loading player",e),Object(b.a)("renderWidgetEx",this.playerRequest,e)}},E.prototype.setPlacementForWidgetType=function(e){var t=this.serverResponse.pl,i=this.widgetStaticConfig.ppnpf,n=null,r=null,a="";if(null!=t&&t.length)for(var o=0;o<t.length;o++)try{var s=t[o].s,l=document.querySelector(s);if(null!=l&&l.parentElement&&!"BODY".includes(l.parentElement.nodeName)){r=l,a=t[o].i;break}}catch(e){continue}if(!r){var d;if(null!=t&&t.length&&i&&e)return e(),null;var u=null===(d=localStorage)||void 0===d?void 0:d.getItem("truvid_place_selector");u&&(r=document.querySelector(u))}return r&&(n=document.createElement("div"),"before"===a?r.parentElement.insertBefore(n,r):"after"===a?r.after(n):r.appendChild(n)),n};var S=i(23);window.brWidgetInit={init:function(e,t,i){Object(S.a)(e,t,i,E).catch(function(e){console.log("error construct widget"),console.log(e)})}}}]);