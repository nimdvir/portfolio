/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./src/gpt_script_ynet.js");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./modules/AdTruvidScriptClass.js":
/*!****************************************!*\
  !*** ./modules/AdTruvidScriptClass.js ***!
  \****************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/classCallCheck */ \"./node_modules/@babel/runtime/helpers/classCallCheck.js\");\n/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/createClass */ \"./node_modules/@babel/runtime/helpers/createClass.js\");\n/* harmony import */ var _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _AdUnitFunctionsClass__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./AdUnitFunctionsClass */ \"./modules/AdUnitFunctionsClass.js\");\n/* harmony import */ var _AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./AdUnitPropertiesClass */ \"./modules/AdUnitPropertiesClass.js\");\n/* harmony import */ var _InfrastructureClass__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./InfrastructureClass */ \"./modules/InfrastructureClass.js\");\n\n\n\n\n\nvar Log = _InfrastructureClass__WEBPACK_IMPORTED_MODULE_4__[\"default\"].Log;\nvar _window = window,\n    googletag = _window.googletag,\n    Templates = _window.Templates;\n\nvar AdTruvidScriptClass =\n/*#__PURE__*/\nfunction () {\n  function AdTruvidScriptClass() {\n    _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default()(this, AdTruvidScriptClass);\n\n    this.dccg = window.dcCG;\n    this.dcPath = window.dcPath;\n    this.dcSite = window.dcSite.includes(\"mynet\") ? \"mynet\" : window.dcSite;\n    this.video = window.video;\n    this.video_youtube = false;\n    this.video_other = false;\n  }\n\n  _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1___default()(AdTruvidScriptClass, [{\n    key: \"Define_Unit\",\n    value: function Define_Unit(site, id, sizes) {\n      switch (site) {\n        case \"yns\":\n          {\n            _AdUnitFunctionsClass__WEBPACK_IMPORTED_MODULE_2__[\"default\"].defineSlotsYns_func(id, sizes);\n            break;\n          }\n\n        case \"ynv\":\n          {\n            _AdUnitFunctionsClass__WEBPACK_IMPORTED_MODULE_2__[\"default\"].defineSlots_func(id, sizes);\n            break;\n          }\n\n        case \"ynes\":\n          {\n            _AdUnitFunctionsClass__WEBPACK_IMPORTED_MODULE_2__[\"default\"].defineSlotsYnes_func(id, sizes);\n            break;\n          }\n\n        case \"mynet\":\n          {\n            _AdUnitFunctionsClass__WEBPACK_IMPORTED_MODULE_2__[\"default\"].defineSlotsMynet_func(id, sizes);\n            break;\n          }\n\n        default:\n          {\n            break;\n          }\n      }\n    }\n  }, {\n    key: \"AddTrudiv_func\",\n    value: function AddTrudiv_func(id, sizes, paragraph) {\n      try {\n        if (document.querySelector('iframe[src*=\"https://www.youtube.com/embed\"]')) {\n          this.video_youtube = true;\n        }\n\n        if (document.querySelector('.VideoLiveComponenta')) {\n          this.video_other = true;\n        }\n      } catch (ex) {\n        console.error(ex);\n      }\n\n      if (this.dccg == \"article\" && this.video == 0 && this.video_youtube == false && this.video_other == false) {\n        var P_INDEX_TO_PLACE = 0;\n        var PCOUNT_INDEX = 3;\n        var paragraphs = new Array();\n        var s = document.createElement('div');\n        s.setAttribute('id', id);\n        var br_count = 0;\n        var p_count = 0;\n\n        if (document.querySelectorAll(\".text_editor_paragraph\")) {\n          var p_element = document.querySelectorAll(\".text_editor_paragraph\");\n          var p_array = Array.from(p_element);\n\n          if (p_count <= PCOUNT_INDEX) {\n            var _iteratorNormalCompletion = true;\n            var _didIteratorError = false;\n            var _iteratorError = undefined;\n\n            try {\n              for (var _iterator = p_array[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n                var elem = _step.value;\n                var br_elem = elem.getElementsByTagName(\"br\");\n\n                if (br_elem.length > 0) {\n                  if (p_count <= PCOUNT_INDEX) {\n                    var _iteratorNormalCompletion2 = true;\n                    var _didIteratorError2 = false;\n                    var _iteratorError2 = undefined;\n\n                    try {\n                      for (var _iterator2 = br_elem[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n                        var tag = _step2.value;\n\n                        if (tag.tagName == \"BR\") {\n                          br_count++;\n                        }\n                      }\n                    } catch (err) {\n                      _didIteratorError2 = true;\n                      _iteratorError2 = err;\n                    } finally {\n                      try {\n                        if (!_iteratorNormalCompletion2 && _iterator2.return != null) {\n                          _iterator2.return();\n                        }\n                      } finally {\n                        if (_didIteratorError2) {\n                          throw _iteratorError2;\n                        }\n                      }\n                    }\n                  }\n                } else {\n                  p_count++;\n                  paragraphs.push(p_array.indexOf(elem));\n                }\n              }\n            } catch (err) {\n              _didIteratorError = true;\n              _iteratorError = err;\n            } finally {\n              try {\n                if (!_iteratorNormalCompletion && _iterator.return != null) {\n                  _iterator.return();\n                }\n              } finally {\n                if (_didIteratorError) {\n                  throw _iteratorError;\n                }\n              }\n            }\n          }\n\n          if (p_array.length >= PCOUNT_INDEX && p_count > 2) {\n            if (br_count > P_INDEX_TO_PLACE) {\n              if (paragraphs.length > paragraph && paragraphs.indexOf(paragraph) == paragraph) {\n                p_array[paragraph].parentNode.insertBefore(s, p_array[paragraph].nextSibling);\n                this.Define_Unit(this.dcSite, id, sizes);\n              } else {\n                p_array[paragraphs[paragraph]].parentNode.insertBefore(s, p_array[paragraphs[paragraph]].nextSibling);\n                this.Define_Unit(this.dcSite, id, sizes);\n              }\n            } else {\n              p_array[paragraph].parentNode.insertBefore(s, p_array[paragraph].nextSibling);\n              this.Define_Unit(this.dcSite, id, sizes);\n            }\n          }\n        }\n      }\n    }\n  }]);\n\n  return AdTruvidScriptClass;\n}(); // end class MainFanctionClass\n\n\nvar _AdTruvidScriptClass = new AdTruvidScriptClass();\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (_AdTruvidScriptClass);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9tb2R1bGVzL0FkVHJ1dmlkU2NyaXB0Q2xhc3MuanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9tb2R1bGVzL0FkVHJ1dmlkU2NyaXB0Q2xhc3MuanM/YWM0YiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgQWRVbml0RnVuY3Rpb25zQ2xhc3NPYmogZnJvbSBcIi4vQWRVbml0RnVuY3Rpb25zQ2xhc3NcIjtcclxuaW1wb3J0IEFkVW5pdFByb3BlcnRpZXNDbGFzc09iaiBmcm9tIFwiLi9BZFVuaXRQcm9wZXJ0aWVzQ2xhc3NcIjtcclxuaW1wb3J0IEluZnJhc3J1Y3R1cmVDbGFzc09iaiBmcm9tIFwiLi9JbmZyYXN0cnVjdHVyZUNsYXNzXCI7XHJcbmNvbnN0IHsgTG9nIH0gPSBJbmZyYXNydWN0dXJlQ2xhc3NPYmo7XHJcblxyXG5sZXQgeyBnb29nbGV0YWcsIFRlbXBsYXRlcyB9ID0gd2luZG93O1xyXG5cclxuY2xhc3MgQWRUcnV2aWRTY3JpcHRDbGFzcyB7XHJcbiAgY29uc3RydWN0b3IoKSB7XHJcbiAgICB0aGlzLmRjY2cgPSB3aW5kb3cuZGNDRztcclxuICAgIHRoaXMuZGNQYXRoID0gd2luZG93LmRjUGF0aDtcclxuICAgIHRoaXMuZGNTaXRlID0gd2luZG93LmRjU2l0ZS5pbmNsdWRlcyhcIm15bmV0XCIpID8gXCJteW5ldFwiIDogd2luZG93LmRjU2l0ZTtcclxuICAgIHRoaXMudmlkZW8gPSB3aW5kb3cudmlkZW87XHJcbiAgICB0aGlzLnZpZGVvX3lvdXR1YmUgPSBmYWxzZTtcclxuICAgIHRoaXMudmlkZW9fb3RoZXIgPSBmYWxzZTtcclxuICB9XHJcbiAgRGVmaW5lX1VuaXQoc2l0ZSwgaWQsIHNpemVzKSB7XHJcbiAgICBzd2l0Y2goc2l0ZSkgeyBcclxuICAgICAgY2FzZSBcInluc1wiOiB7IFxyXG4gICAgICAgICBBZFVuaXRGdW5jdGlvbnNDbGFzc09iai5kZWZpbmVTbG90c1luc19mdW5jKGlkLCBzaXplcyk7ICAgXHJcbiAgICAgICAgIGJyZWFrOyBcclxuICAgICAgfSBcclxuICAgICAgY2FzZSBcInludlwiOiB7IFxyXG4gICAgICAgICBBZFVuaXRGdW5jdGlvbnNDbGFzc09iai5kZWZpbmVTbG90c19mdW5jKGlkLCBzaXplcyk7ICBcclxuICAgICAgICAgYnJlYWs7IFxyXG4gICAgICB9IFxyXG4gICAgICBjYXNlIFwieW5lc1wiOiB7IFxyXG4gICAgICAgIEFkVW5pdEZ1bmN0aW9uc0NsYXNzT2JqLmRlZmluZVNsb3RzWW5lc19mdW5jKGlkLCBzaXplcyk7ICBcclxuICAgICAgICBicmVhazsgXHJcbiAgICAgfSBjYXNlIFwibXluZXRcIjogeyBcclxuICAgICAgQWRVbml0RnVuY3Rpb25zQ2xhc3NPYmouZGVmaW5lU2xvdHNNeW5ldF9mdW5jKGlkLCBzaXplcyk7ICBcclxuICAgICAgYnJlYWs7IFxyXG4gICAgIH0gXHJcbiAgICAgIGRlZmF1bHQ6IHsgXHJcbiAgICAgICAgIGJyZWFrOyBcclxuICAgICAgfSBcclxuICAgICBcclxuICB9XHJcbn1cclxuICBBZGRUcnVkaXZfZnVuYyhpZCwgc2l6ZXMsIHBhcmFncmFwaCkgeyBcclxuICAgIHRyeSB7XHJcbiAgICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdpZnJhbWVbc3JjKj1cImh0dHBzOi8vd3d3LnlvdXR1YmUuY29tL2VtYmVkXCJdJykpIHtcclxuICAgICAgICB0aGlzLnZpZGVvX3lvdXR1YmUgPSB0cnVlO1xyXG4gICAgICB9XHJcbiAgICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuVmlkZW9MaXZlQ29tcG9uZW50YScpKSB7XHJcbiAgICAgICAgdGhpcy52aWRlb19vdGhlciA9IHRydWU7XHJcbiAgICAgIH1cclxuICAgIH0gY2F0Y2ggKGV4KSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXgpO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXMuZGNjZyA9PSBcImFydGljbGVcIiAmJiB0aGlzLnZpZGVvID09IDAgJiYgdGhpcy52aWRlb195b3V0dWJlID09IGZhbHNlICYmIHRoaXMudmlkZW9fb3RoZXIgPT0gZmFsc2UpIHtcclxuICAgICAgY29uc3QgUF9JTkRFWF9UT19QTEFDRSA9IDA7XHJcbiAgICAgIGxldCBQQ09VTlRfSU5ERVggPSAzO1xyXG4gICAgICBsZXQgcGFyYWdyYXBocyA9IG5ldyBBcnJheSgpO1xyXG4gICAgICBsZXQgcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICBzLnNldEF0dHJpYnV0ZSgnaWQnLCBpZCk7XHJcbiAgICAgIGxldCBicl9jb3VudCA9IDBcclxuICAgICAgbGV0IHBfY291bnQgPSAwXHJcbiAgICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnRleHRfZWRpdG9yX3BhcmFncmFwaFwiKSkge1xyXG4gICAgICBjb25zdCBwX2VsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnRleHRfZWRpdG9yX3BhcmFncmFwaFwiKTtcclxuICAgICAgbGV0IHBfYXJyYXkgPSBBcnJheS5mcm9tKHBfZWxlbWVudCk7XHJcbiAgICAgIGlmIChwX2NvdW50IDw9IFBDT1VOVF9JTkRFWCkge1xyXG4gICAgICAgICAgZm9yIChsZXQgZWxlbSBvZiBwX2FycmF5KSB7XHJcbiAgICAgICAgICAgICAgbGV0IGJyX2VsZW0gPSBlbGVtLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiYnJcIik7XHJcbiAgICAgICAgICAgICAgaWYgKGJyX2VsZW0ubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICBpZiAocF9jb3VudCA8PSBQQ09VTlRfSU5ERVgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IHRhZyBvZiBicl9lbGVtKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRhZy50YWdOYW1lID09IFwiQlJcIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicl9jb3VudCsrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgIHBfY291bnQrKztcclxuICAgICAgICAgICAgICAgICAgcGFyYWdyYXBocy5wdXNoKHBfYXJyYXkuaW5kZXhPZihlbGVtKSk7IFxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICAgaWYgKHBfYXJyYXkubGVuZ3RoID49IFBDT1VOVF9JTkRFWCAmJiBwX2NvdW50ID4gMikge1xyXG4gICAgICAgICAgICBpZiAoYnJfY291bnQgPiBQX0lOREVYX1RPX1BMQUNFKSB7XHJcbiAgICAgICAgICAgICAgaWYgKHBhcmFncmFwaHMubGVuZ3RoID4gcGFyYWdyYXBoICYmIHBhcmFncmFwaHMuaW5kZXhPZihwYXJhZ3JhcGgpID09IHBhcmFncmFwaCkge1xyXG4gICAgICAgICAgICAgICAgcF9hcnJheVtwYXJhZ3JhcGhdLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHMsIHBfYXJyYXlbcGFyYWdyYXBoXS5uZXh0U2libGluZyk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLkRlZmluZV9Vbml0KHRoaXMuZGNTaXRlLCBpZCwgc2l6ZXMpO1xyXG4gICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBwX2FycmF5W3BhcmFncmFwaHNbcGFyYWdyYXBoXV0ucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUocywgcF9hcnJheVtwYXJhZ3JhcGhzW3BhcmFncmFwaF1dLm5leHRTaWJsaW5nKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuRGVmaW5lX1VuaXQodGhpcy5kY1NpdGUsIGlkLCBzaXplcyk7IFxyXG4gICAgICAgICAgICAgIH0gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgcF9hcnJheVtwYXJhZ3JhcGhdLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHMsIHBfYXJyYXlbcGFyYWdyYXBoXS5uZXh0U2libGluZyk7XHJcbiAgICAgICAgICAgICAgdGhpcy5EZWZpbmVfVW5pdCh0aGlzLmRjU2l0ZSwgaWQsIHNpemVzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICB9XHJcbiAgICAgfVxyXG4gICAgfSBcclxuICB9XHJcbn0gLy8gZW5kIGNsYXNzIE1haW5GYW5jdGlvbkNsYXNzXHJcbmNvbnN0IF9BZFRydXZpZFNjcmlwdENsYXNzID0gbmV3IEFkVHJ1dmlkU2NyaXB0Q2xhc3MoKTtcclxuZXhwb3J0IGRlZmF1bHQgX0FkVHJ1dmlkU2NyaXB0Q2xhc3M7XHJcblxyXG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7OztBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQWxCQTtBQXFCQTs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFmQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBZ0JBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBOzs7O0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFDQTtBQUFBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./modules/AdTruvidScriptClass.js\n");

/***/ }),

/***/ "./modules/AdUnitAdditionalStylesClass.js":
/*!************************************************!*\
  !*** ./modules/AdUnitAdditionalStylesClass.js ***!
  \************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/classCallCheck */ \"./node_modules/@babel/runtime/helpers/classCallCheck.js\");\n/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/createClass */ \"./node_modules/@babel/runtime/helpers/createClass.js\");\n/* harmony import */ var _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./AdUnitPropertiesClass */ \"./modules/AdUnitPropertiesClass.js\");\n/* harmony import */ var _AdUnitFunctionsClass__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./AdUnitFunctionsClass */ \"./modules/AdUnitFunctionsClass.js\");\n/* harmony import */ var _InfrastructureClass__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./InfrastructureClass */ \"./modules/InfrastructureClass.js\");\n\n\n\n\n\nvar Log = _InfrastructureClass__WEBPACK_IMPORTED_MODULE_4__[\"default\"].Log;\nvar _window = window,\n    console = _window.console;\n\nwindow.CloseSargel = function () {\n  document.getElementById(\"ads.sargel\").innerHTML = \"\";\n};\n\nvar AdUnitAdditionalStylesClass =\n/*#__PURE__*/\nfunction () {\n  function AdUnitAdditionalStylesClass() {\n    _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default()(this, AdUnitAdditionalStylesClass);\n\n    this.innerWidth = window.innerWidth;\n  }\n\n  _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1___default()(AdUnitAdditionalStylesClass, [{\n    key: \"styleNewspaper_func\",\n    value: function styleNewspaper_func() {\n      Log(\"styleNewspaper_func\");\n      var newspaper = window.newMedia == 'True' && window.dcSite == \"ynt\" ? \"ads.top.promo\" : \"ads.newspaper\";\n      var newspaper_xnt = window.newMedia == 'True' && window.dcSite == \"xnt\" ? \"ads.top.promo\" : \"ads.top.2\";\n      _AdUnitFunctionsClass__WEBPACK_IMPORTED_MODULE_3__[\"default\"].findAllDiv_func();\n\n      if (_InfrastructureClass__WEBPACK_IMPORTED_MODULE_4__[\"default\"].Site && _InfrastructureClass__WEBPACK_IMPORTED_MODULE_4__[\"default\"].Site == \"is_xnet\") {\n        if (_AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_2__[\"default\"].Slots[newspaper_xnt] != undefined) {\n          //AdUnitPropertiesClassObj.Slots['ads.top.2'].children().css({ 'display': 'inline' });\n          if (_AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_2__[\"default\"].Slots[newspaper_xnt][0] != undefined) {\n            _AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_2__[\"default\"].Slots[newspaper_xnt][0].setAttribute(\"style\", \"display:inline;\");\n          }\n\n          ;\n          _AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_2__[\"default\"].Slots[newspaper_xnt].setAttribute(\"style\", 'padding: 5px,background-image:url(\"//totalmedia2.ynet.co.il/pic/970x90_jambo.gif\"),background-repeat: no-repeat,width:970px,margin: 10px auto;');\n        }\n      } else {\n        if (_AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_2__[\"default\"].Slots[newspaper] != undefined) {\n          if (document.querySelector(\".grid1280\") != null || document.querySelector(\".grid1280\") != undefined || document.querySelector(\".grid1280_2\") != null || document.querySelector(\".grid1280_2\") != undefined) {\n            document.getElementById(newspaper).setAttribute(\"style\", \"padding:15px 0px 0px 0px; margin:0 auto; display:flex; justify-content:center; display:-webkit-box; -webkit-box-pack:center; display:-ms-flexbox; -ms-flex-pack:center; text-align:center;\");\n            setTimeout(function () {\n              if (document.getElementById(newspaper).getElementsByTagName(\"div\")[0] != undefined) {\n                document.getElementById(newspaper).getElementsByTagName(\"div\")[0].style.textAlign = \"center\";\n                document.getElementById(newspaper).getElementsByTagName(\"div\")[0].style.margin = \"0 auto\";\n              }\n            }, 1500);\n          } else {\n            _AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_2__[\"default\"].Slots[newspaper].setAttribute(\"style\", \"padding:15px 0px 0px 0px; margin:0 auto; text-align:center;\");\n          }\n\n          if (_AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_2__[\"default\"].Slots[newspaper].getElementsByTagName(\"iframe\")[0] != undefined) {\n            _AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_2__[\"default\"].Slots[newspaper].getElementsByTagName(\"iframe\")[0].setAttribute(\"style\", 'padding:5px 5px 5px 5px; background-image:url(\"//totalmedia2.ynet.co.il/pic/970x125_newspaper.gif\");background-repeat:no-repeat;');\n          }\n        }\n      }\n    }\n  }, {\n    key: \"styleMivzakon_func\",\n    value: function styleMivzakon_func() {\n      Log(\"styleMivzakon_func\");\n      _AdUnitFunctionsClass__WEBPACK_IMPORTED_MODULE_3__[\"default\"].findAllDiv_func();\n\n      if (_AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_2__[\"default\"].Slots[\"ads.mivzakon\"] != undefined) {\n        if (document.querySelector(\".RelativeElementsContainer\") != null || document.querySelector(\".RelativeElementsContainer\") != undefined) {\n          _AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_2__[\"default\"].Slots[\"ads.mivzakon\"].setAttribute(\"style\", \"display: block; position:absolute; height:0px; top:15px; left:-95px; width:80px;\");\n        } else {\n          _AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_2__[\"default\"].Slots[\"ads.mivzakon\"].setAttribute(\"style\", \"position:relative; height:0px; top:15px; right:95px; width:80px;\");\n        }\n      }\n    }\n  }, {\n    key: \"styleSargel_func\",\n    value: function styleSargel_func() {\n      Log(\"styleSargel_func\");\n      _AdUnitFunctionsClass__WEBPACK_IMPORTED_MODULE_3__[\"default\"].findAllDiv_func();\n\n      if (_AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_2__[\"default\"].Slots[\"ads.sargel\"] != undefined) {\n        _AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_2__[\"default\"].Slots[\"ads.sargel\"].setAttribute(\"style\", \"position:fixed;bottom:0px;\"); //const _Ymove = '0px';\n\n        var _Y = 0;\n        var tplozen1 = Math.floor((document.body.clientWidth - 980) / 2 - _Y); // this is internet explorer 10\n\n        if (navigator.userAgent.match(/MSIE ([0-9]+)\\./) && navigator.userAgent.indexOf(\"MSIE\") >= 0 && navigator.userAgent.indexOf(\"MSIE 10\") <= 0) {\n          var _y = window.innerHeight || document.documentElement.clientHeight || document.getElementsByTagName(\"body\")[0].clientHeight;\n\n          var _down = _y - 50 + 4;\n\n          _AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_2__[\"default\"].Slots[\"ads.sargel\"].setAttribute(\"style\", \"right:\".concat(tplozen1, \";top:\").concat(_down, \";position:fixed;z-index:555;width:980px;height:50px;\"));\n        } else {\n          _AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_2__[\"default\"].Slots[\"ads.sargel\"].setAttribute(\"style\", \"right:\".concat(tplozen1, \";bottom:0px;position:fixed;z-index:555;width:980px;height:50px;\")); //$(window).resize(function () {\n\n          window.addEventListener(\"resize\", function () {\n            //var _Ymove = '0px';\n            var _Y = 0;\n            var tplozen1 = Math.floor((document.body.clientWidth - 980) / 2 - _Y);\n            _AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_2__[\"default\"].Slots[\"ads.sargel\"].setAttribute(\"style\", \"right:\".concat(tplozen1, \";bottom:0px;position:fixed;z-index:555;width:980px;height:50px;\"));\n          });\n        }\n\n        var buttom_width = 14;\n        var buttom_height = 14;\n        var buttom_URL = \"//totalmedia2.ynet.co.il/pic/30-30.gif\";\n        var buttoncose = '<img style=\"cursor: pointer\" onclick=\"javascript:CloseSargel();\"  src=\"' + buttom_URL + '\" width=\"' + buttom_width + 'px\" height=\"' + buttom_height + 'px\" />';\n        var butoonDiv = document.createElement(\"div\");\n        butoonDiv.id = \"Sargel_Close_button\";\n        butoonDiv.innerHTML = buttoncose;\n        var adsdiv3 = parent.document.getElementById(\"ads.sargel\");\n        adsdiv3.appendChild(butoonDiv);\n        var butoonid = parent.document.getElementById(butoonDiv.id);\n        butoonid.style.display = \"none\"; // butoonid.style.position = \"relative\";\n        // butoonid.style.bottom = 50 + \"px\";\n        // butoonid.style.left = 965 + \"px\"\n        // butoonid.style.width = \"14px\"\n        // butoonid.style.height = \"14px\"\n\n        butoonid.style.zIndex = 99999999999999;\n      }\n    }\n  }, {\n    key: \"ozen_func\",\n    value: function ozen_func() {\n      var _this = this;\n\n      //let that = this;\n      _AdUnitFunctionsClass__WEBPACK_IMPORTED_MODULE_3__[\"default\"].findAllDiv_func();\n      var container_width = 980;\n\n      if (document.querySelector(\".RelativeElementsContainer\") != null || document.querySelector(\".RelativeElementsContainer\") != undefined) {\n        if (window.dcPath.includes(\"3456.Magazine\")) {\n          if (document.querySelector(\".top-story-blazer\") != null) {\n            container_width = document.querySelector(\".top-story-blazer\").offsetWidth;\n          }\n\n          if (document.querySelectorAll(\".layoutContainer\")[2] != null) {\n            container_width = document.querySelectorAll(\".layoutContainer\")[2].offsetWidth;\n          }\n        } else {\n          container_width = window.dcSite.includes(\"mynet\") ? document.querySelector(\".layoutContainer\").offsetWidth : document.querySelector(\".RelativeElementsContainer\").offsetWidth;\n        }\n      }\n\n      if (document.querySelector(\".HtmlLayoutItem\") != null || document.querySelector(\".HtmlLayoutItem\") != undefined) {\n        container_width = document.querySelector(\".HtmlLayoutItem\").offsetWidth;\n      }\n\n      if (_AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_2__[\"default\"].Slots[\"ads.skyscraper\"] != undefined) {\n        if (window.dcPath.includes(\"3456.Magazine\")) {\n          _AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_2__[\"default\"].Slots[\"ads.skyscraper\"].style.top = \"70px\";\n          setTimeout(function () {\n            if (document.querySelector(\".cc-invisible\") != undefined) {\n              _AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_2__[\"default\"].Slots[\"ads.skyscraper\"].style.top = \"70px\";\n            } else {\n              _AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_2__[\"default\"].Slots[\"ads.skyscraper\"].style.top = \"123px\";\n            }\n          }, 18000);\n        }\n\n        window.addEventListener('resize', function () {\n          _this.displaySkyscraperRight_func(container_width);\n        });\n      }\n\n      if (_AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_2__[\"default\"].Slots[\"ads.skyscraper.left\"] != undefined) {\n        window.addEventListener('resize', function () {\n          _this.displaySkyscraperLeft_func(container_width);\n        });\n      }\n\n      if (_AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_2__[\"default\"].Slots[\"ads.ozen.right\"] != undefined) {\n        if (window.dcPath.includes(\"3456.Magazine\")) {\n          _AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_2__[\"default\"].Slots[\"ads.ozen.right\"].style.top = \"70px\";\n          setTimeout(function () {\n            if (document.querySelector(\".cc-invisible\") != undefined) {\n              _AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_2__[\"default\"].Slots[\"ads.ozen.right\"].style.top = \"70px\";\n            } else {\n              _AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_2__[\"default\"].Slots[\"ads.ozen.right\"].style.top = \"123px\";\n            }\n          }, 18000);\n        } // this.displayOzenRight_func(adsOzenRightWidth);\n\n\n        window.addEventListener('resize', function () {\n          _this.displayOzenRight_func(container_width);\n        });\n      }\n\n      if (_AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_2__[\"default\"].Slots[\"ads.ozen\"] != undefined) {\n        var adsOzenWidth = _AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_2__[\"default\"].Slots[\"ads.ozen\"].offsetWidth;\n        this.displayOzen_func(adsOzenWidth);\n      }\n\n      if (_AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_2__[\"default\"].Slots[\"ads.ozen_right\"] != undefined) {\n        window.addEventListener('resize', function () {\n          _this.displayOzen_Mynet_func(container_width, \"ozen_right\");\n        });\n      }\n\n      if (_AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_2__[\"default\"].Slots[\"ads.ozen_left\"] != undefined) {\n        window.addEventListener('resize', function () {\n          _this.displayOzen_Mynet_func(container_width, \"ozen_left\");\n        });\n      }\n\n      if (_AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_2__[\"default\"].Slots[\"ads.ozen.left\"] != undefined) {\n        var adsOzenLeftWidth = _AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_2__[\"default\"].Slots[\"ads.ozen.left\"].offsetWidth;\n        this.displayOzenLeft_func(adsOzenLeftWidth);\n      }\n    }\n  }, {\n    key: \"displaySkyscraperRight_func\",\n    value: function displaySkyscraperRight_func(container_width) {\n      var ozen_right_width = 0;\n\n      if (document.querySelector('iframe[id*=\"skyscraper\"]') != undefined || document.querySelector('iframe[id*=\"skyscraper\"]') != null) {\n        ozen_right_width = document.querySelector('iframe[id*=\"skyscraper\"]').width;\n      }\n\n      var l = (window.innerWidth - container_width) / 2 - 10;\n\n      if (ozen_right_width >= l || ozen_right_width == 0) {\n        document.getElementById(\"ads.skyscraper\").style.display = \"none\";\n      } else {\n        document.getElementById(\"ads.skyscraper\").style.display = \"block\";\n      }\n    }\n  }, {\n    key: \"displaySkyscraperLeft_func\",\n    value: function displaySkyscraperLeft_func(container_width) {\n      var ozen_left_width = 0;\n\n      if (document.querySelector('iframe[id*=\"skyscraper.left\"]') != undefined || document.querySelector('iframe[id*=\"skyscraper.left\"]') != null) {\n        ozen_left_width = document.querySelector('iframe[id*=\"skyscraper.left\"]').width;\n      }\n\n      var l = (window.innerWidth - container_width) / 2 - 10;\n\n      if (ozen_left_width >= l || ozen_left_width == 0) {\n        document.getElementById(\"ads.skyscraper.left\").style.display = \"none\";\n      } else {\n        document.getElementById(\"ads.skyscraper.left\").style.display = \"block\";\n      }\n    }\n  }, {\n    key: \"displayOzenRight_func\",\n    value: function displayOzenRight_func(container_width) {\n      var ozen_right_width = 0;\n\n      if (document.querySelector('iframe[id*=\"ozen.right\"]') != undefined || document.querySelector('iframe[id*=\"ozen.right\"]') != null) {\n        ozen_right_width = document.querySelector('iframe[id*=\"ozen.right\"]').width;\n      }\n\n      var l = (window.innerWidth - container_width) / 2 - 10;\n\n      if (ozen_right_width >= l || ozen_right_width == 0) {\n        document.getElementById(\"ads.ozen.right\").style.display = \"none\";\n      } else {\n        document.getElementById(\"ads.ozen.right\").style.display = \"block\";\n      }\n    }\n  }, {\n    key: \"displayOzenLeft_func\",\n    value: function displayOzenLeft_func(adsOzenLeftWidth) {\n      var l = (this.innerWidth - 980) / 2 - 10;\n\n      if (adsOzenLeftWidth >= l || adsOzenLeftWidth == 0) {\n        document.getElementById(\"ads.ozen.left\").style.display = \"none\";\n      } else {\n        document.getElementById(\"ads.ozen.left\").style.display = \"block\";\n      }\n    }\n  }, {\n    key: \"displayOzen_func\",\n    value: function displayOzen_func(adsOzenWidth) {\n      var l = (this.innerWidth - 980) / 2 - 10;\n\n      if (adsOzenWidth >= l || adsOzenWidth == 0) {\n        document.getElementById(\"ads.ozen\").style.display = \"none\";\n      } else {\n        document.getElementById(\"ads.ozen\").style.display = \"block\";\n      }\n    }\n  }, {\n    key: \"displayOzen_Mynet_func\",\n    value: function displayOzen_Mynet_func(container_width, ad) {\n      var ozen_width = 0;\n\n      if (document.querySelector(\"iframe[id*=\".concat(ad, \"]\")) != undefined || document.querySelector(\"iframe[id*=\".concat(ad, \"]\")) != null) {\n        ozen_width = document.querySelector(\"iframe[id*=\".concat(ad, \"]\")).width;\n      }\n\n      var l = (window.innerWidth - container_width) / 2 - 10;\n\n      if (ozen_width >= l || ozen_width == 0) {\n        document.getElementById(\"ads.\".concat(ad)).style.display = \"none\";\n      } else {\n        document.getElementById(\"ads.\".concat(ad)).style.display = \"block\";\n      }\n    }\n  }, {\n    key: \"resizeOzen_func\",\n    value: function resizeOzen_func() {\n      var new_blazer_width;\n      var new_blazer_article_width;\n      var middle_width = 1440;\n      var small_width = 1230;\n      var big_width = 1660;\n\n      if (document.querySelector(\".RelativeElementsContainer\") != null || document.querySelector(\".RelativeElementsContainer\") != undefined) {\n        if (document.querySelector(\".top-story-blazer\") != null) {\n          new_blazer_width = document.querySelector(\".top-story-blazer\").offsetWidth;\n        }\n\n        if (document.querySelectorAll(\".layoutContainer\")[2] != null) {\n          new_blazer_article_width = document.querySelectorAll(\".layoutContainer\")[2].offsetWidth;\n        }\n\n        var new_grid_width = document.querySelector(\".RelativeElementsContainer\").offsetWidth;\n\n        if (new_grid_width != undefined && new_grid_width >= 1191) {\n          small_width = 1470;\n          middle_width = 1550;\n          big_width = 1820;\n        }\n      }\n\n      if (document.querySelector(\".HtmlLayoutItem\") != null || document.querySelector(\".HtmlLayoutItem\") != undefined) {\n        var HtmlLayoutItem_width = document.querySelector(\".HtmlLayoutItem\").offsetWidth;\n\n        if (HtmlLayoutItem_width != undefined && HtmlLayoutItem_width >= 1191) {\n          small_width = 1520;\n          middle_width = 1600;\n          big_width = 1885;\n        }\n      }\n\n      if (this.innerWidth > small_width) {\n        if (this.innerWidth > middle_width) {\n          if (this.innerWidth > big_width) {\n            return [[300, 600], [300, 601], [1, 1]];\n          } else {\n            return [[160, 600], [160, 601], [1, 1]];\n          }\n        } else {\n          return [[120, 600], [120, 601], [1, 1]];\n        }\n      } else {\n        return [1, 1];\n      }\n    }\n  }, {\n    key: \"resizeOzen800_func\",\n    value: function resizeOzen800_func() {\n      if (window.dcVideo != true) {\n        if (this.innerWidth > 1230) {\n          if (this.innerWidth > 1440) {\n            if (this.innerWidth > 1660) {\n              return [[300, 600], [300, 601]];\n            } else {\n              return [[160, 600], [160, 601]];\n            }\n          } else {\n            return [[120, 600], [120, 601]];\n          }\n        }\n      } else {\n        return [120, 600];\n      }\n    }\n  }, {\n    key: \"resizeOzenYnsYnv_func\",\n    value: function resizeOzenYnsYnv_func() {\n      var middle_width = window.dcSite.includes(\"mynet\") ? 1350 : 1430;\n      var small_width = 1230;\n      var big_width = window.dcSite.includes(\"mynet\") ? 1599 : 1660;\n\n      if (document.querySelector(\".RelativeElementsContainer\") != null || document.querySelector(\".RelativeElementsContainer\") != undefined) {\n        var new_grid_width = document.querySelector(\".RelativeElementsContainer\").offsetWidth;\n\n        if (new_grid_width != undefined && new_grid_width >= 1191) {\n          small_width = window.dcSite.includes(\"mynet\") ? 1350 : 1470;\n          middle_width = 1550;\n          big_width = window.dcSite.includes(\"mynet\") ? 1599 : 1820;\n        }\n      }\n\n      if (this.innerWidth > small_width) {\n        if (this.innerWidth > middle_width) {\n          if (this.innerWidth > big_width) {\n            return [[300, 600], [300, 601]];\n          } else {\n            return [[160, 600], [160, 601]];\n          }\n        } else {\n          return [[120, 600], [120, 601]];\n        }\n      }\n    }\n  }, {\n    key: \"top_func\",\n    value: function top_func() {\n      _AdUnitFunctionsClass__WEBPACK_IMPORTED_MODULE_3__[\"default\"].findAllDiv_func();\n\n      if (_AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_2__[\"default\"].Slots[\"ads.top\"] != undefined) {\n        //if ($(AdUnitPropertiesClassObj.Slots['ads.top']).children('div').children('iframe') != \"\") {\n        //$(AdUnitPropertiesClassObj.Slots['ads.top']).children('div').first().css('border', '5px solid #e9e9e9');\n        if (_AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_2__[\"default\"].Slots[\"ads.top\"].getElementsByTagName(\"div\")[0] != undefined && _AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_2__[\"default\"].Slots[\"ads.top\"].getElementsByTagName(\"div\")[0].getElementsByTagName(\"iframe\") != \"\") {\n          _AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_2__[\"default\"].Slots[\"ads.top\"].getElementsByTagName(\"div\")[0].style.border = \"5px solid #e9e9e9\";\n        }\n      } //if (AdUnitPropertiesClassObj.Slots['ads.top'].getElementsByTagName('div') != \"\") alert(1);\n\n    }\n  }, {\n    key: \"styleSticky_func\",\n    value: function styleSticky_func() {\n      var stickySlot = window.dcPath.includes(\"PnaiPlus\") ? \"ads.banner\" : _AdUnitFunctionsClass__WEBPACK_IMPORTED_MODULE_3__[\"default\"].sticky;\n      var sticky_unit = \"default\";\n\n      if (window.dcPath.includes(\"3456.Magazine\") || (window.dcPath.includes(\"Weather\") || window.dcPath.includes(\"weather\")) && _AdUnitFunctionsClass__WEBPACK_IMPORTED_MODULE_3__[\"default\"].dcSite == \"ynet\") {\n        if (window.dcPath.includes(\"3456.Magazine\")) {\n          sticky_unit = \"magazine\";\n        }\n\n        if (window.dcPath.includes(\"Weather\") || window.dcPath.includes(\"weather\")) {\n          sticky_unit = \"weather\";\n        }\n\n        if (_AdUnitFunctionsClass__WEBPACK_IMPORTED_MODULE_3__[\"default\"].getDevice_func() == \"Android\") {\n          stickySlot = \"ads.ynet_mobileweb_banners_android_\" + sticky_unit + \"_sticky\";\n        } else if (_AdUnitFunctionsClass__WEBPACK_IMPORTED_MODULE_3__[\"default\"].getDevice_func() == \"iPhone\") {\n          stickySlot = \"ads.ynet_mobileweb_banners_iphone_\" + sticky_unit + \"_sticky\";\n        }\n      }\n\n      _AdUnitFunctionsClass__WEBPACK_IMPORTED_MODULE_3__[\"default\"].findAllDiv_func();\n      _InfrastructureClass__WEBPACK_IMPORTED_MODULE_4__[\"default\"].SlotRenderEnd(function (event) {\n        var TopLoaded = false;\n\n        if (event.slot == _AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_2__[\"default\"].Define_slots[stickySlot]) {\n          if (!TopLoaded) {\n            if (!event.isEmpty) {\n              try {\n                _AdUnitFunctionsClass__WEBPACK_IMPORTED_MODULE_3__[\"default\"].findAllDiv_func();\n                var banner_h = \"\";\n\n                if (!window.dcSite.includes(\"mynet\")) {\n                  banner_h = window.is_IOS() == true && /CriOS/i.test(navigator.userAgent) ? \"height: 85px !important;\" : \"\";\n                }\n\n                var banner_width;\n                var banner_id = stickySlot == \"ads.banner\" ? \"banner\" : \"sticky\";\n\n                if (document.querySelector('iframe[id*=\"' + banner_id + '\"]') != null || document.querySelector('iframe[id*=\"' + banner_id + '\"]') != undefined) {\n                  banner_width = document.querySelector('iframe[id*=\"' + banner_id + '\"]').width;\n                }\n\n                var sticky_slot = _AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_2__[\"default\"].Slots[stickySlot];\n\n                if (window.dcPath.includes(\"PnaiPlus\")) {\n                  sticky_slot.setAttribute(\"style\", \"position:fixed;\" + banner_h + \"bottom:0px;left:0px;display:flex;justify-content:center;display:-webkit-box;-webkit-box-pack:center;display:-ms-flexbox;-ms-flex-pack:center;text-align:center;width:100%;z-index:9998;margin:0 auto;background-color:#fff\");\n                } else {\n                  sticky_slot.setAttribute(\"style\", \"position:fixed;bottom:0px;left:0px;display:flex;justify-content:center;display:-webkit-box;-webkit-box-pack:center;display:-ms-flexbox;-ms-flex-pack:center;text-align:center;width:100%;z-index:999;margin:0 auto;background-color:#fff\");\n                }\n\n                sticky_slot.getElementsByTagName(\"div\")[0].setAttribute(\"style\", \"min-width:\" + banner_width + \"px;\" + banner_h + \"margin: 0 auto;\");\n\n                if (window.dcSite == 'ynes' && window.isMobile1) {\n                  var mobile_block = document.querySelector('.hContainer');\n                  mobile_block.setAttribute(\"style\", \"padding-bottom: 40px;\");\n                }\n              } catch (ex) {\n                console.error(ex);\n              }\n            }\n\n            TopLoaded = true;\n          }\n        }\n      });\n    }\n  }, {\n    key: \"mw_videoinpage_func\",\n    value: function mw_videoinpage_func() {\n      _InfrastructureClass__WEBPACK_IMPORTED_MODULE_4__[\"default\"].SlotRenderEnd(function (event) {\n        var TopLoaded = false;\n\n        if (event.slot == _AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_2__[\"default\"].Define_slots[\"ads.mw.videoinpage\"]) {\n          if (!TopLoaded) {\n            if (!event.isEmpty) {\n              try {\n                _AdUnitFunctionsClass__WEBPACK_IMPORTED_MODULE_3__[\"default\"].findAllDiv_func();\n                var banner_width = document.querySelector('iframe[id*=\"mw.videoinpage\"]').width;\n                var sticky_slot = _AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_2__[\"default\"].Slots[\"ads.mw.videoinpage\"];\n                sticky_slot.setAttribute(\"style\", \"position:fixed;bottom:0px;left:0px;display:flex;justify-content:center;display:-webkit-box;-webkit-box-pack:center;display:-ms-flexbox;-ms-flex-pack:center;text-align:center;width:100%;z-index:55555;margin:0 auto;background-color:#fff\");\n                sticky_slot.getElementsByTagName(\"div\")[0].setAttribute(\"style\", \"width:\" + banner_width + \"px;margin: auto auto auto auto;\");\n              } catch (ex) {\n                console.error(ex);\n              }\n            }\n\n            TopLoaded = true;\n          }\n        }\n      });\n    }\n  }, {\n    key: \"biglivebox_func\",\n    value: function biglivebox_func() {\n      _AdUnitFunctionsClass__WEBPACK_IMPORTED_MODULE_3__[\"default\"].findAllDiv_func();\n      var biglivebox_slot = _AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_2__[\"default\"].Slots[\"ads.biglivebox\"];\n\n      if (biglivebox_slot != undefined) {\n        // setTimeout(function() { \n        // document.getElementById('ads.biglivebox').children[0].setAttribute(\"style\", \"text-align: center\");\n        // }, 1500);\n        if (document.querySelector('.RelativeElementsContainer') || document.querySelector('.HtmlLayoutItem')) {\n          if (document.querySelector('.vesty-search') !== null) {\n            var marginBottomBox = window.dcCG != \"article\" ? '-52px' : '-45px';\n\n            if (document.querySelector('.MobileTickerComponenta')) {\n              biglivebox_slot.setAttribute(\"style\", \"margin:105px auto -93px auto; position: relative; display:flex; justify-content:center; text-align:center;\");\n            } else {\n              biglivebox_slot.setAttribute(\"style\", \"margin:52px auto \" + marginBottomBox + \" auto; position: relative; display:flex; justify-content:center; text-align:center;\");\n            }\n          } else {\n            if (document.querySelector('.YnetNewsMutamHeader')) {\n              biglivebox_slot.setAttribute(\"style\", \"margin:170px auto -155px auto !important; position: relative; display:flex !important; justify-content:center; text-align:center;\");\n            } else {\n              biglivebox_slot.setAttribute(\"style\", \"margin:60px auto -48px auto; position: relative; display:flex; justify-content:center; text-align:center;\");\n            }\n          }\n        } else {\n          biglivebox_slot.setAttribute(\"style\", \"margin-top: 40px; position: relative; display:flex; justify-content:center; text-align:center;\");\n          document.getElementById('main').getElementsByClassName('area content')[0].setAttribute(\"style\", \"margin-top: 5px;\");\n        }\n\n        _InfrastructureClass__WEBPACK_IMPORTED_MODULE_4__[\"default\"].SlotRenderEnd(function (event) {\n          var TopLoaded = false;\n\n          if (event.slot == _AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_2__[\"default\"].Define_slots[_AdUnitFunctionsClass__WEBPACK_IMPORTED_MODULE_3__[\"default\"].biglivebox]) {\n            if (!TopLoaded) {\n              if (!event.isEmpty) {\n                if (document.querySelector('iframe[id*=\"biglivebox\"]') != undefined || document.querySelector('iframe[id*=\"biglivebox\"]') != null) {\n                  var iframe_biglivebox = document.querySelector('iframe[id*=\"biglivebox\"]');\n                  iframe_biglivebox.style.cssText += 'text-align:center; display:flex; justify-content:center;';\n                }\n\n                var bg_slot = document.getElementById(\"ads.biglivebox\");\n                bg_slot.style.cssText += 'display:flex; justify-content:center; text-align: center; margin-left: auto !important; margin-right: auto !important;';\n\n                window.CloseBox = function () {\n                  document.getElementById(_AdUnitFunctionsClass__WEBPACK_IMPORTED_MODULE_3__[\"default\"].biglivebox).innerHTML = \"\";\n                };\n\n                if (event.lineItemId != null) {\n                  setTimeout(function () {\n                    var buttom_width = 30;\n                    var buttom_height = 30;\n                    var buttom_URL = \"//totalmedia2.ynet.co.il/pic/30-30.gif\";\n                    var buttonclose = '<img style=\"cursor: pointer\" onclick=\"javascript:CloseBox();\"  src=\"' + buttom_URL + '\" width=\"' + buttom_width + 'px\" height=\"' + buttom_height + 'px\" />';\n                    var butoonDiv = document.createElement('div');\n                    butoonDiv.id = 'Biglivebox_Close_button';\n                    butoonDiv.innerHTML = buttonclose;\n                    var adsdiv3 = parent.document.getElementById(_AdUnitFunctionsClass__WEBPACK_IMPORTED_MODULE_3__[\"default\"].biglivebox);\n                    adsdiv3.appendChild(butoonDiv);\n                    var butoonid = parent.document.getElementById(butoonDiv.id);\n                    butoonid.style.position = \"absolute\";\n                    butoonid.style.top = 0 + \"px\";\n                    butoonid.style.right = 0 + \"px\";\n                    butoonid.style.width = \"30px\";\n                    butoonid.style.height = \"30px\";\n                    butoonid.style.zIndex = 1;\n                  }, 1000);\n                  window.addEventListener('message', function (event) {\n                    if (event.data.eventName === 'inboardclsoed') {\n                      document.getElementById(\"Biglivebox_Close_button\").style = \"display: none\";\n                    }\n                  }, false);\n                }\n              }\n\n              TopLoaded = true;\n            }\n          }\n        });\n      }\n    }\n  }, {\n    key: \"mw_biglivebox_func\",\n    value: function mw_biglivebox_func() {\n      _AdUnitFunctionsClass__WEBPACK_IMPORTED_MODULE_3__[\"default\"].findAllDiv_func();\n      var mw_biglivebox_slot = _AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_2__[\"default\"].Slots[_AdUnitFunctionsClass__WEBPACK_IMPORTED_MODULE_3__[\"default\"].biglivebox];\n\n      if (mw_biglivebox_slot != undefined) {\n        if (document.querySelector('.RelativeElementsContainer') || document.querySelector('.HtmlLayoutItem')) {\n          if (document.querySelector('.ynet-news-english-search') !== null) {\n            if (document.querySelector('.MobileTickerComponenta')) {\n              mw_biglivebox_slot.setAttribute(\"style\", \"margin:105px auto -97px auto; position: relative; display:flex; justify-content:center; text-align:center;\");\n            } else {\n              mw_biglivebox_slot.setAttribute(\"style\", \"margin:60px auto -48px auto; position: relative; display:flex; justify-content:center; text-align:center;\");\n            }\n          } else {\n            if (document.querySelector('.YnetNewsMutamHeader')) {\n              mw_biglivebox_slot.setAttribute(\"style\", \"margin:170px auto -155px auto; position: relative; display:flex; justify-content:center; text-align:center;\");\n            } else {\n              mw_biglivebox_slot.setAttribute(\"style\", \"margin:60px auto -48px auto; position: relative; display:flex; justify-content:center; text-align:center;\");\n            }\n          }\n        } else {\n          document.getElementById('main').getElementsByClassName('area content')[0].setAttribute(\"style\", \"margin-top: 5px;\");\n\n          if (window.dcCG == 'article') {\n            mw_biglivebox_slot.setAttribute(\"style\", \"margin-top: 40px; position: relative;\");\n          }\n\n          if (window.dcCG == 'main' || window.dcCG == 'sub') {\n            mw_biglivebox_slot.setAttribute(\"style\", \"margin-top: 33px; position: relative;\");\n          }\n        }\n\n        _InfrastructureClass__WEBPACK_IMPORTED_MODULE_4__[\"default\"].SlotRenderEnd(function (event) {\n          var TopLoaded = false;\n\n          if (event.slot == _AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_2__[\"default\"].Define_slots[_AdUnitFunctionsClass__WEBPACK_IMPORTED_MODULE_3__[\"default\"].biglivebox]) {\n            if (!TopLoaded) {\n              if (!event.isEmpty) {\n                var bg_slot = document.getElementById(\"ads.biglivebox\");\n                bg_slot.style.cssText += 'display:flex; justify-content:center; text-align: center; margin-left: auto !important; margin-right: auto !important;';\n\n                window.CloseBox = function () {\n                  document.getElementById(_AdUnitFunctionsClass__WEBPACK_IMPORTED_MODULE_3__[\"default\"].biglivebox).innerHTML = \"\";\n                };\n\n                if (event.lineItemId != null) {\n                  setTimeout(function () {\n                    var buttom_width = 30;\n                    var buttom_height = 30;\n                    var buttom_URL = \"//totalmedia2.ynet.co.il/pic/30-30.gif\";\n                    var buttonclose = '<img style=\"cursor: pointer\" onclick=\"javascript:CloseBox();\"  src=\"' + buttom_URL + '\" width=\"' + buttom_width + 'px\" height=\"' + buttom_height + 'px\" />';\n                    var butoonDiv = document.createElement('div');\n                    butoonDiv.id = 'Biglivebox_Close_button';\n                    butoonDiv.innerHTML = buttonclose;\n                    var adsdiv3 = parent.document.getElementById(_AdUnitFunctionsClass__WEBPACK_IMPORTED_MODULE_3__[\"default\"].biglivebox);\n                    adsdiv3.appendChild(butoonDiv);\n                    var butoonid = parent.document.getElementById(butoonDiv.id);\n                    butoonid.style.position = \"absolute\";\n                    butoonid.style.top = 0 + \"px\";\n                    butoonid.style.right = 0 + \"px\";\n                    butoonid.style.width = \"30px\";\n                    butoonid.style.height = \"30px\";\n                    butoonid.style.zIndex = 1;\n                  }, 1000);\n                  window.addEventListener('message', function (event) {\n                    if (event.data.eventName === 'inboardclsoed') {\n                      document.getElementById(\"Biglivebox_Close_button\").style = \"display: none\";\n                    }\n                  }, false);\n                }\n              }\n\n              TopLoaded = true;\n            }\n          }\n        });\n      }\n    }\n  }, {\n    key: \"livebox_func\",\n    value: function livebox_func() {\n      _AdUnitFunctionsClass__WEBPACK_IMPORTED_MODULE_3__[\"default\"].findAllDiv_func();\n      _InfrastructureClass__WEBPACK_IMPORTED_MODULE_4__[\"default\"].SlotRenderEnd(function (event) {\n        var TopLoaded = false;\n\n        if (event.slot == _AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_2__[\"default\"].Define_slots[\"ads.livebox\"]) {\n          if (!TopLoaded) {\n            if (!event.isEmpty) {\n              window.CloseBox = function () {\n                document.getElementById('ads.livebox').innerHTML = \"\";\n              };\n\n              setTimeout(function () {\n                var buttom_width = 30;\n                var buttom_height = 30;\n                var buttom_URL = \"//totalmedia2.ynet.co.il/pic/30-30.gif\";\n                var buttonclose = '<img style=\"cursor: pointer\" onclick=\"javascript:CloseBox();\"  src=\"' + buttom_URL + '\" width=\"' + buttom_width + 'px\" height=\"' + buttom_height + 'px\" />';\n                var butoonDiv = document.createElement('div');\n                butoonDiv.id = 'LiveBox_Close_button';\n                butoonDiv.innerHTML = buttonclose;\n                var adsdiv3 = parent.document.getElementById(\"ads.livebox\");\n                adsdiv3.appendChild(butoonDiv);\n                var butoonid = parent.document.getElementById(butoonDiv.id);\n                butoonid.style.position = \"absolute\";\n                butoonid.style.top = 0 + \"px\";\n                butoonid.style.right = 0 + \"px\";\n                butoonid.style.width = \"30px\";\n                butoonid.style.height = \"30px\";\n                butoonid.style.zIndex = 1;\n              }, 1000);\n            }\n\n            TopLoaded = true;\n          }\n        }\n      });\n      window.addEventListener('message', function (event) {\n        if (event.data.eventName === 'inboardclsoed') {\n          document.getElementById(\"LiveBox_Close_button\").style = \"display: none\";\n        }\n      }, false);\n      var livebox_slot = _AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_2__[\"default\"].Slots[\"ads.livebox\"];\n\n      if (livebox_slot != undefined) {\n        if (window.dcCG == 'article') {\n          livebox_slot.setAttribute(\"style\", \"margin-top: 115px; margin-bottom: -65px; position: relative;\");\n        }\n\n        if (window.dcCG == 'main' || window.dcCG == 'sub') {\n          livebox_slot.setAttribute(\"style\", \"margin-top: 115px; margin-bottom: -65px; position: relative;\");\n        }\n      }\n    }\n  }, {\n    key: \"inbord_func\",\n    value: function inbord_func() {\n      _AdUnitFunctionsClass__WEBPACK_IMPORTED_MODULE_3__[\"default\"].findAllDiv_func();\n      _InfrastructureClass__WEBPACK_IMPORTED_MODULE_4__[\"default\"].SlotRenderEnd(function (event) {\n        var TopLoaded = false;\n\n        if (event.slot == _AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_2__[\"default\"].Define_slots[\"ads.inbord\"]) {\n          if (!TopLoaded) {\n            if (!event.isEmpty) {\n              if (event.lineItemId != null) {\n                window.CloseBox = function () {\n                  document.getElementById('ads.inbord').innerHTML = \"\";\n                };\n\n                setTimeout(function () {\n                  var buttom_width = 30;\n                  var buttom_height = 30;\n                  var buttom_URL = \"//totalmedia2.ynet.co.il/pic/30-30.gif\";\n                  var buttonclose = '<img style=\"cursor: pointer\" onclick=\"javascript:CloseBox();\"  src=\"' + buttom_URL + '\" width=\"' + buttom_width + 'px\" height=\"' + buttom_height + 'px\" />';\n                  var butoonDiv = document.createElement('div');\n                  butoonDiv.id = 'Biglivebox_Close_button';\n                  butoonDiv.innerHTML = buttonclose;\n                  var adsdiv3 = parent.document.getElementById(\"ads.inbord\");\n                  adsdiv3.appendChild(butoonDiv);\n                  var butoonid = parent.document.getElementById(butoonDiv.id);\n                  butoonid.style.position = \"absolute\";\n                  butoonid.style.top = 0 + \"px\";\n                  butoonid.style.right = 0 + \"px\";\n                  butoonid.style.width = \"30px\";\n                  butoonid.style.height = \"30px\";\n                  butoonid.style.zIndex = 1;\n                }, 1000);\n              }\n            }\n\n            TopLoaded = true;\n          }\n        }\n      });\n      var biglivebox_slot = _AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_2__[\"default\"].Slots[\"ads.inbord\"];\n\n      if (biglivebox_slot != undefined) {\n        if (document.querySelector('.MobileTickerComponenta')) {\n          biglivebox_slot.setAttribute(\"style\", \"margin:105px auto -97px auto; position: relative;\");\n        } else {\n          biglivebox_slot.setAttribute(\"style\", \"margin:60px auto -48px auto; position: relative;\");\n        }\n      }\n    }\n  }, {\n    key: \"inbordMynet_func\",\n    value: function inbordMynet_func() {\n      _AdUnitFunctionsClass__WEBPACK_IMPORTED_MODULE_3__[\"default\"].findAllDiv_func();\n      document.getElementById(\"ads.320x450\").style = \"display:none;\";\n      var biglivebox_slot = document.getElementById(\"ads.300x100.inbord\");\n\n      if (biglivebox_slot != undefined) {\n        biglivebox_slot.setAttribute(\"style\", \"margin:65px 0 2px 0; position: relative; display:flex; justify-content:center; display:-webkit-box; -webkit-box-pack:center; display:-ms-flexbox; -ms-flex-pack:center; text-align:center; width:100%;\");\n      }\n    } // inbordMynetBig_func() {\n    //   AdUnitFunctionsClassObj.findAllDiv_func();   \n    //   InfrasructureClassObj.SlotRenderEnd(function(event) {\n    //     let TopLoaded = false;\n    //       if (event.slot == AdUnitPropertiesClassObj.Define_slots[\"ads.320x450\"]) {\n    //         if (!TopLoaded) {  \n    //           if(!event.isEmpty) {   \n    //               window.CloseBox = function () {\n    //                 document.getElementById(\"ads.320x450\").style = \"display:none;\"; \n    //                 document.getElementById('ads.320x450').innerHTML = \"\";\n    //                AdUnitFunctionsClassObj.Mynet_renderSmallInbord();\n    //               }                                                                             \n    //               setTimeout(function() { \n    //               const buttom_width = 30;\n    //               const buttom_height = 30;\n    //               const buttom_URL = \"//totalmedia2.ynet.co.il/pic/30-30.gif\";\n    //               const buttonclose = \n    //               '<img style=\"cursor: pointer\" onclick=\"javascript:CloseBox();\"  src=\"' +\n    //                buttom_URL +\n    //                 '\" width=\"' +\n    //                  buttom_width +\n    //                   'px\" height=\"' +\n    //                    buttom_height + \n    //                    'px\" />';\n    //               const butoonDiv = document.createElement('div');\n    //               butoonDiv.id = 'Biglivebox_Close_button';\n    //               butoonDiv.innerHTML = buttonclose;\n    //               const adsdiv3 = parent.document.getElementById(\"ads.320x450\");\n    //               adsdiv3.appendChild(butoonDiv);\n    //               let butoonid = parent.document.getElementById(butoonDiv.id);\n    //               butoonid.style.position = \"absolute\";\n    //               butoonid.style.top = 0 + \"px\";\n    //               butoonid.style.right = 0 + \"px\";\n    //               butoonid.style.width = \"30px\";\n    //               butoonid.style.height = \"30px\";\n    //               butoonid.style.zIndex = 1;\n    //               }, 1000); \n    //             }                                                \n    //           TopLoaded=true;\n    //         }    \n    //       }\n    //     }); \n    //     window.addEventListener('message', function (event) {\n    //       if (event.data.eventName === 'inboardclsoed') {\n    //           document.getElementById(\"Biglivebox_Close_button\").style = \"display: none\"; \n    //           document.getElementById(\"ads.320x450\").style = \"display:none;\"; \n    //           document.getElementById('ads.320x450').innerHTML = \"\";\n    //           AdUnitFunctionsClassObj.Mynet_renderSmallInbord();              \n    //       }\n    //    }, false);\n    //   let biglivebox_slot = document.getElementById(\"ads.320x450\");\n    //   if (biglivebox_slot != undefined) {\n    //     biglivebox_slot.setAttribute(\n    //       \"style\",\n    //       \"margin:65px 0 -2px 0; position: relative;display:flex;justify-content:center;display:-webkit-box;-webkit-box-pack:center;display:-ms-flexbox;-ms-flex-pack:center;text-align:center;width:100%;\"\n    //       ); \n    //    }   \n    // }\n\n  }, {\n    key: \"Ynet_livebox_func\",\n    value: function Ynet_livebox_func() {\n      var livebox_slot = \"\";\n\n      if (window.ynet_responsive_sites || window.dcPath.includes(\"3456.Magazine\") && _AdUnitFunctionsClass__WEBPACK_IMPORTED_MODULE_3__[\"default\"].newMedia == \"True\") {\n        livebox_slot = \"ads.inboard\";\n      } else {\n        if (_AdUnitFunctionsClass__WEBPACK_IMPORTED_MODULE_3__[\"default\"].getDevice_func() == \"Android\") {\n          livebox_slot = \"ads.ynet_mobileweb_android_livebox\";\n        } else if (_AdUnitFunctionsClass__WEBPACK_IMPORTED_MODULE_3__[\"default\"].getDevice_func() == \"iPhone\") {\n          livebox_slot = \"ads.ynet_mobileweb_iphone_livebox\";\n        }\n      }\n\n      _AdUnitFunctionsClass__WEBPACK_IMPORTED_MODULE_3__[\"default\"].findAllDiv_func();\n      _InfrastructureClass__WEBPACK_IMPORTED_MODULE_4__[\"default\"].SlotRenderEnd(function (event) {\n        var livebox_loaded = false;\n\n        if (event.slot == _AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_2__[\"default\"].Define_slots[livebox_slot]) {\n          if (!livebox_loaded) {\n            if (!event.isEmpty) {\n              window.CloseBox = function () {\n                document.getElementById(livebox_slot).innerHTML = \"\";\n              };\n\n              setTimeout(function () {\n                var buttom_width = 30;\n                var buttom_height = 30;\n                var buttom_URL = \"//totalmedia2.ynet.co.il/pic/30-30.gif\";\n                var buttonclose = '<img style=\"cursor: pointer\" onclick=\"javascript:CloseBox();\"  src=\"' + buttom_URL + '\" width=\"' + buttom_width + 'px\" height=\"' + buttom_height + 'px\" />';\n                var butoonDiv = document.createElement('div');\n                butoonDiv.id = 'LiveBox_Close_button';\n                butoonDiv.innerHTML = buttonclose;\n                var adsdiv3 = parent.document.getElementById(livebox_slot);\n                adsdiv3.appendChild(butoonDiv);\n                var butoonid = parent.document.getElementById(butoonDiv.id);\n                butoonid.style.position = \"absolute\";\n                butoonid.style.top = 0 + \"px\";\n                butoonid.style.right = 0 + \"px\";\n                butoonid.style.width = \"30px\";\n                butoonid.style.height = \"30px\";\n                butoonid.style.zIndex = 1;\n              }, 1000);\n            } else {}\n\n            livebox_loaded = true;\n          }\n        } else {}\n      });\n      window.addEventListener('message', function (event) {\n        if (event.data.eventName === 'inboardclsoed') {\n          document.getElementById(\"LiveBox_Close_button\").style = \"display: none\";\n        }\n      }, false);\n      var biglivebox_slot = document.getElementById(livebox_slot);\n\n      if (biglivebox_slot != undefined) {\n        biglivebox_slot.setAttribute(\"style\", \"margin:0 auto; position: relative; display:flex; justify-content:center; display:-webkit-box; -webkit-box-pack:center; display:-ms-flexbox; -ms-flex-pack:center; text-align:center; width:100%;\");\n      }\n    }\n  }, {\n    key: \"Ynet_biglivebox_func\",\n    value: function Ynet_biglivebox_func() {\n      _AdUnitFunctionsClass__WEBPACK_IMPORTED_MODULE_3__[\"default\"].findAllDiv_func();\n      var bigliveboxSlot = \"\";\n\n      if (window.ynet_responsive_sites || window.dcPath.includes(\"3456.Magazine\") && _AdUnitFunctionsClass__WEBPACK_IMPORTED_MODULE_3__[\"default\"].newMedia == \"True\") {\n        bigliveboxSlot = \"ads.biglivebox\";\n      } else {\n        if (_AdUnitFunctionsClass__WEBPACK_IMPORTED_MODULE_3__[\"default\"].getDevice_func() == \"Android\") {\n          bigliveboxSlot = \"ads.ynet_mobileweb_android_pnimi_bigliveBox\";\n        } else if (_AdUnitFunctionsClass__WEBPACK_IMPORTED_MODULE_3__[\"default\"].getDevice_func() == \"iPhone\") {\n          bigliveboxSlot = \"ads.ynet_mobileweb_iphone_pnimi_bigliveBox\";\n        }\n      }\n\n      _InfrastructureClass__WEBPACK_IMPORTED_MODULE_4__[\"default\"].SlotRenderEnd(function (event) {\n        var TopLoaded = false;\n\n        if (event.slot == _AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_2__[\"default\"].Define_slots[bigliveboxSlot]) {\n          if (!TopLoaded) {\n            if (!event.isEmpty) {\n              window.CloseBox = function () {\n                document.getElementById(bigliveboxSlot).innerHTML = \"\";\n                _AdUnitFunctionsClass__WEBPACK_IMPORTED_MODULE_3__[\"default\"].Ynet_renderSmallInbord();\n              };\n\n              setTimeout(function () {\n                var buttom_width = 30;\n                var buttom_height = 30;\n                var buttom_URL = \"//totalmedia2.ynet.co.il/pic/30-30.gif\";\n                var buttonclose = '<img style=\"cursor: pointer\" onclick=\"javascript:CloseBox();\"  src=\"' + buttom_URL + '\" width=\"' + buttom_width + 'px\" height=\"' + buttom_height + 'px\" />';\n                var butoonDiv = document.createElement('div');\n                butoonDiv.id = 'Biglivebox_Close_button';\n                butoonDiv.innerHTML = buttonclose;\n                var adsdiv3 = parent.document.getElementById(bigliveboxSlot);\n                adsdiv3.appendChild(butoonDiv);\n                var butoonid = parent.document.getElementById(butoonDiv.id);\n                butoonid.style.position = \"absolute\";\n                butoonid.style.top = 0 + \"px\";\n                butoonid.style.right = 0 + \"px\";\n                butoonid.style.width = \"30px\";\n                butoonid.style.height = \"30px\";\n                butoonid.style.zIndex = 1;\n              }, 1000);\n            }\n\n            TopLoaded = true;\n          }\n        }\n      });\n      window.addEventListener('message', function (event) {\n        if (event.data.eventName === 'inboardclsoed') {\n          document.getElementById(\"Biglivebox_Close_button\").style = \"display: none\";\n          _AdUnitFunctionsClass__WEBPACK_IMPORTED_MODULE_3__[\"default\"].Ynet_renderSmallInbord();\n        }\n      }, false);\n      var biglivebox_slot = document.getElementById(bigliveboxSlot);\n\n      if (biglivebox_slot != undefined) {\n        biglivebox_slot.setAttribute(\"style\", \"margin:0 auto; position: relative;display:flex;justify-content:center;display:-webkit-box;-webkit-box-pack:center;display:-ms-flexbox;-ms-flex-pack:center;text-align:center;width:100%;\");\n      }\n    }\n  }, {\n    key: \"Interstitial_responsive_func\",\n    value: function Interstitial_responsive_func() {\n      _AdUnitFunctionsClass__WEBPACK_IMPORTED_MODULE_3__[\"default\"].findAllDiv_func();\n      _InfrastructureClass__WEBPACK_IMPORTED_MODULE_4__[\"default\"].SlotRenderEnd(function (event) {\n        var Interstitial_loaded = false;\n\n        if (event.slot == _AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_2__[\"default\"].Define_slots[\"ads.interstitial.inner\"]) {\n          if (!Interstitial_loaded) {\n            if (!event.isEmpty) {\n              //if (window.document.getElementById(\"dcMaavaronDiv\") == null || window.document.getElementById(\"dcMaavaronDiv\") == undefined) {\n              window.closeTransitions = function () {\n                var transition = document.getElementById(\"ads.interstitial.inner\");\n\n                if (transition) {\n                  transition.style.height = '0px';\n                }\n              }; // window.Close = function () {\n              //   document.getElementById(\"ads.interstitial.inner\").style.display = \"none\";\n              // }\n\n\n              if (document.getElementById(\"close-btn\") == null) {\n                window.Close = function () {\n                  //googletag.cmd.push(function() { googletag.destroySlots([AdUnitPropertiesClassObj.Define_slots[\"ads.interstitial.inner\"]]); }); \n                  try {\n                    document.querySelector('#dcMaavaronDiv').remove();\n                  } catch (e) {}\n\n                  document.getElementById(\"ads.interstitial.inner\").style.height = '0px';\n\n                  try {\n                    document.getElementById(\"Close_btn_interstitial\").style.display = 'none';\n                  } catch (e) {}\n                };\n\n                setTimeout(function () {\n                  if (document.getElementById(\"closeButton\")) {\n                    document.getElementById(\"closeButton\").style.display = \"none\";\n                  }\n\n                  if (document.getElementById(\"b1142532\")) {\n                    document.getElementById(\"b1142532\").style.display = \"none\";\n                  }\n\n                  var div_interstitial = parent.document.getElementById(\"ads.interstitial.inner\");\n                  var img_interstitial = document.createElement(\"img\");\n                  img_interstitial.id = \"Close_button\";\n                  img_interstitial.src = \"https://images1.ynet.co.il/PicServer3/2013/12/17/5044137/320x.png\";\n                  img_interstitial.setAttribute(\"onClick\", \"window.Close();\");\n                  img_interstitial.setAttribute(\"style\", \"cursor: pointer; position: fixed; width: 10%; top: 0; right: 0; z-index: 9999999999;\");\n                  div_interstitial.appendChild(img_interstitial);\n                }, 300);\n              } //  setTimeout(function() { \n              //  const buttom_width = 10;\n              //  const buttom_URL = \"https://images1.ynet.co.il/PicServer3/2013/12/17/5044137/320x.png\";\n              //  const buttonclose = \n              //  '<img id=\"Close_btn\" style=\"cursor: pointer; position: fixed; width: 10%; top: 0; right: 0; z-index: 2147483648;\" onclick=\"javascript:Close();\"  src=\"' +\n              //   buttom_URL +\n              //    '\" width=\"' +\n              //     buttom_width +\n              //      '%\"  />';\n              //  const butoonDiv = document.createElement('div');\n              //  butoonDiv.id = 'Close_button';\n              //  butoonDiv.innerHTML = buttonclose;\n              //  const adsdiv3 = parent.document.getElementById(\"ads.interstitial.inner\");\n              //  adsdiv3.appendChild(butoonDiv);\n              //  let butoonid = parent.document.getElementById(butoonDiv.id);\n              //  butoonid.style.position = \"fixed\";\n              //  butoonid.style.top = 0 + \"px\";\n              //  butoonid.style.right = 0 + \"px\";\n              //  butoonid.style.width = \"10%\";\n              //  butoonid.style.zIndex = 2147483648;\n              //  }, 1000);\n              //}\n\n            } else {}\n\n            Interstitial_loaded = true;\n          }\n        }\n      });\n    }\n  }, {\n    key: \"pplus_strips\",\n    value: function pplus_strips() {\n      _AdUnitFunctionsClass__WEBPACK_IMPORTED_MODULE_3__[\"default\"].findAllDiv_func();\n      var strips_pplus = document.querySelectorAll('div[id^=\"ads.strip.marketing\"]');\n      strips_pplus.forEach(function (userItem) {\n        var unit_strip = userItem.id;\n        _InfrastructureClass__WEBPACK_IMPORTED_MODULE_4__[\"default\"].SlotRenderEnd(function (event) {\n          var StripPplus = false;\n\n          if (event.slot == _AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_2__[\"default\"].Define_slots[unit_strip]) {\n            var container_strips = document.querySelector(\".slotContentDiv\");\n\n            if (!StripPplus) {\n              if (!event.isEmpty) {\n                setTimeout(function () {\n                  var stripSize = document.getElementById(unit_strip).offsetHeight;\n\n                  if (stripSize < 226) {\n                    container_strips.style.height = parseInt(container_strips.offsetHeight - (226 - stripSize)) + 'px';\n                  }\n                }, 3000);\n              } else {\n                container_strips.style.height = parseInt(container_strips.offsetHeight - 226) + 'px';\n              }\n\n              StripPplus = true;\n            }\n          }\n        });\n      });\n    }\n  }]);\n\n  return AdUnitAdditionalStylesClass;\n}(); //end AdUnitAdditionalStylesClass\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (new AdUnitAdditionalStylesClass());//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9tb2R1bGVzL0FkVW5pdEFkZGl0aW9uYWxTdHlsZXNDbGFzcy5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL21vZHVsZXMvQWRVbml0QWRkaXRpb25hbFN0eWxlc0NsYXNzLmpzPzkyMTgiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEFkVW5pdFByb3BlcnRpZXNDbGFzc09iaiBmcm9tIFwiLi9BZFVuaXRQcm9wZXJ0aWVzQ2xhc3NcIjtcclxuaW1wb3J0IEFkVW5pdEZ1bmN0aW9uc0NsYXNzT2JqIGZyb20gXCIuL0FkVW5pdEZ1bmN0aW9uc0NsYXNzXCI7XHJcbmltcG9ydCBJbmZyYXNydWN0dXJlQ2xhc3NPYmogZnJvbSBcIi4vSW5mcmFzdHJ1Y3R1cmVDbGFzc1wiO1xyXG5jb25zdCB7IExvZyB9ID0gSW5mcmFzcnVjdHVyZUNsYXNzT2JqO1xyXG5jb25zdCB7IGNvbnNvbGUgfSA9IHdpbmRvdztcclxud2luZG93LkNsb3NlU2FyZ2VsID0gZnVuY3Rpb24oKSB7XHJcbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhZHMuc2FyZ2VsXCIpLmlubmVySFRNTCA9IFwiXCI7XHJcbn07XHJcbmNsYXNzIEFkVW5pdEFkZGl0aW9uYWxTdHlsZXNDbGFzcyB7XHJcbiAgY29uc3RydWN0b3IoKSB7XHJcbiAgICB0aGlzLmlubmVyV2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aDtcclxuICB9XHJcbiAgc3R5bGVOZXdzcGFwZXJfZnVuYygpIHtcclxuICAgIExvZyhcInN0eWxlTmV3c3BhcGVyX2Z1bmNcIik7XHJcbiAgICBsZXQgbmV3c3BhcGVyID0gKHdpbmRvdy5uZXdNZWRpYSA9PSAnVHJ1ZScgJiYgd2luZG93LmRjU2l0ZSA9PSBcInludFwiKSA/IFwiYWRzLnRvcC5wcm9tb1wiIDogXCJhZHMubmV3c3BhcGVyXCI7XHJcbiAgICBsZXQgbmV3c3BhcGVyX3hudCA9ICh3aW5kb3cubmV3TWVkaWEgPT0gJ1RydWUnICYmIHdpbmRvdy5kY1NpdGUgPT0gXCJ4bnRcIikgPyBcImFkcy50b3AucHJvbW9cIiA6IFwiYWRzLnRvcC4yXCI7XHJcbiAgICBBZFVuaXRGdW5jdGlvbnNDbGFzc09iai5maW5kQWxsRGl2X2Z1bmMoKTtcclxuICAgIGlmIChJbmZyYXNydWN0dXJlQ2xhc3NPYmouU2l0ZSAmJiBJbmZyYXNydWN0dXJlQ2xhc3NPYmouU2l0ZSA9PSBcImlzX3huZXRcIikge1xyXG4gICAgICBpZiAoQWRVbml0UHJvcGVydGllc0NsYXNzT2JqLlNsb3RzW25ld3NwYXBlcl94bnRdICE9IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIC8vQWRVbml0UHJvcGVydGllc0NsYXNzT2JqLlNsb3RzWydhZHMudG9wLjInXS5jaGlsZHJlbigpLmNzcyh7ICdkaXNwbGF5JzogJ2lubGluZScgfSk7XHJcbiAgICAgICAgaWYgKEFkVW5pdFByb3BlcnRpZXNDbGFzc09iai5TbG90c1tuZXdzcGFwZXJfeG50XVswXSAhPSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgIEFkVW5pdFByb3BlcnRpZXNDbGFzc09iai5TbG90c1tuZXdzcGFwZXJfeG50XVswXS5zZXRBdHRyaWJ1dGUoXHJcbiAgICAgICAgICAgIFwic3R5bGVcIixcclxuICAgICAgICAgICAgXCJkaXNwbGF5OmlubGluZTtcIlxyXG4gICAgICAgICAgKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIEFkVW5pdFByb3BlcnRpZXNDbGFzc09iai5TbG90c1tuZXdzcGFwZXJfeG50XS5zZXRBdHRyaWJ1dGUoXHJcbiAgICAgICAgICBcInN0eWxlXCIsXHJcbiAgICAgICAgICAncGFkZGluZzogNXB4LGJhY2tncm91bmQtaW1hZ2U6dXJsKFwiLy90b3RhbG1lZGlhMi55bmV0LmNvLmlsL3BpYy85NzB4OTBfamFtYm8uZ2lmXCIpLGJhY2tncm91bmQtcmVwZWF0OiBuby1yZXBlYXQsd2lkdGg6OTcwcHgsbWFyZ2luOiAxMHB4IGF1dG87J1xyXG4gICAgICAgICk7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGlmIChBZFVuaXRQcm9wZXJ0aWVzQ2xhc3NPYmouU2xvdHNbbmV3c3BhcGVyXSAhPSB1bmRlZmluZWQpIHtcclxuICAgICAgICBpZiAoKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZ3JpZDEyODBcIikgIT0gbnVsbCB8fCBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmdyaWQxMjgwXCIpICE9IHVuZGVmaW5lZCkgfHwgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZ3JpZDEyODBfMlwiKSAhPSBudWxsIHx8IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZ3JpZDEyODBfMlwiKSAhPSB1bmRlZmluZWQpICkge1xyXG4gICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQobmV3c3BhcGVyKS5zZXRBdHRyaWJ1dGUoXCJzdHlsZVwiLCBcInBhZGRpbmc6MTVweCAwcHggMHB4IDBweDsgbWFyZ2luOjAgYXV0bzsgZGlzcGxheTpmbGV4OyBqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyOyBkaXNwbGF5Oi13ZWJraXQtYm94OyAtd2Via2l0LWJveC1wYWNrOmNlbnRlcjsgZGlzcGxheTotbXMtZmxleGJveDsgLW1zLWZsZXgtcGFjazpjZW50ZXI7IHRleHQtYWxpZ246Y2VudGVyO1wiKTtcclxuICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7IFxyXG4gICAgICAgICAgaWYgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKG5ld3NwYXBlcikuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJkaXZcIilbMF0gIT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKG5ld3NwYXBlcikuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJkaXZcIilbMF0uc3R5bGUudGV4dEFsaWduID0gXCJjZW50ZXJcIjtcclxuICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQobmV3c3BhcGVyKS5nZXRFbGVtZW50c0J5VGFnTmFtZShcImRpdlwiKVswXS5zdHlsZS5tYXJnaW4gPSBcIjAgYXV0b1wiO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgIH0sIDE1MDApO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBBZFVuaXRQcm9wZXJ0aWVzQ2xhc3NPYmouU2xvdHNbbmV3c3BhcGVyXS5zZXRBdHRyaWJ1dGUoXCJzdHlsZVwiLCBcInBhZGRpbmc6MTVweCAwcHggMHB4IDBweDsgbWFyZ2luOjAgYXV0bzsgdGV4dC1hbGlnbjpjZW50ZXI7XCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoQWRVbml0UHJvcGVydGllc0NsYXNzT2JqLlNsb3RzW25ld3NwYXBlcl0uZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJpZnJhbWVcIilbMF0gIT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICBBZFVuaXRQcm9wZXJ0aWVzQ2xhc3NPYmouU2xvdHNbbmV3c3BhcGVyXS5nZXRFbGVtZW50c0J5VGFnTmFtZShcImlmcmFtZVwiKVswXS5zZXRBdHRyaWJ1dGUoXCJzdHlsZVwiLCAncGFkZGluZzo1cHggNXB4IDVweCA1cHg7IGJhY2tncm91bmQtaW1hZ2U6dXJsKFwiLy90b3RhbG1lZGlhMi55bmV0LmNvLmlsL3BpYy85NzB4MTI1X25ld3NwYXBlci5naWZcIik7YmFja2dyb3VuZC1yZXBlYXQ6bm8tcmVwZWF0OycpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuICBzdHlsZU1pdnpha29uX2Z1bmMoKSB7XHJcbiAgICBMb2coXCJzdHlsZU1pdnpha29uX2Z1bmNcIik7XHJcbiAgICBBZFVuaXRGdW5jdGlvbnNDbGFzc09iai5maW5kQWxsRGl2X2Z1bmMoKTtcclxuICAgIGlmIChBZFVuaXRQcm9wZXJ0aWVzQ2xhc3NPYmouU2xvdHNbXCJhZHMubWl2emFrb25cIl0gIT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLlJlbGF0aXZlRWxlbWVudHNDb250YWluZXJcIikgIT0gbnVsbCB8fCBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLlJlbGF0aXZlRWxlbWVudHNDb250YWluZXJcIikgIT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgQWRVbml0UHJvcGVydGllc0NsYXNzT2JqLlNsb3RzW1wiYWRzLm1pdnpha29uXCJdLnNldEF0dHJpYnV0ZShcInN0eWxlXCIsIFwiZGlzcGxheTogYmxvY2s7IHBvc2l0aW9uOmFic29sdXRlOyBoZWlnaHQ6MHB4OyB0b3A6MTVweDsgbGVmdDotOTVweDsgd2lkdGg6ODBweDtcIik7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgQWRVbml0UHJvcGVydGllc0NsYXNzT2JqLlNsb3RzW1wiYWRzLm1pdnpha29uXCJdLnNldEF0dHJpYnV0ZShcInN0eWxlXCIsIFwicG9zaXRpb246cmVsYXRpdmU7IGhlaWdodDowcHg7IHRvcDoxNXB4OyByaWdodDo5NXB4OyB3aWR0aDo4MHB4O1wiKTtcclxuICAgICAgfSAgICAgIFxyXG4gICAgfVxyXG4gIH1cclxuICBzdHlsZVNhcmdlbF9mdW5jKCkge1xyXG4gICAgTG9nKFwic3R5bGVTYXJnZWxfZnVuY1wiKTtcclxuICAgIEFkVW5pdEZ1bmN0aW9uc0NsYXNzT2JqLmZpbmRBbGxEaXZfZnVuYygpO1xyXG4gICAgaWYgKEFkVW5pdFByb3BlcnRpZXNDbGFzc09iai5TbG90c1tcImFkcy5zYXJnZWxcIl0gIT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgIEFkVW5pdFByb3BlcnRpZXNDbGFzc09iai5TbG90c1tcImFkcy5zYXJnZWxcIl0uc2V0QXR0cmlidXRlKFxyXG4gICAgICAgIFwic3R5bGVcIixcclxuICAgICAgICBcInBvc2l0aW9uOmZpeGVkO2JvdHRvbTowcHg7XCJcclxuICAgICAgKTtcclxuXHJcbiAgICAgIC8vY29uc3QgX1ltb3ZlID0gJzBweCc7XHJcbiAgICAgIGNvbnN0IF9ZID0gMDtcclxuICAgICAgY29uc3QgdHBsb3plbjEgPSBNYXRoLmZsb29yKChkb2N1bWVudC5ib2R5LmNsaWVudFdpZHRoIC0gOTgwKSAvIDIgLSBfWSk7XHJcbiAgICAgIC8vIHRoaXMgaXMgaW50ZXJuZXQgZXhwbG9yZXIgMTBcclxuICAgICAgaWYgKFxyXG4gICAgICAgIG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL01TSUUgKFswLTldKylcXC4vKSAmJlxyXG4gICAgICAgIG5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZihcIk1TSUVcIikgPj0gMCAmJlxyXG4gICAgICAgIG5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZihcIk1TSUUgMTBcIikgPD0gMFxyXG4gICAgICApIHtcclxuICAgICAgICBjb25zdCBfeSA9XHJcbiAgICAgICAgICB3aW5kb3cuaW5uZXJIZWlnaHQgfHxcclxuICAgICAgICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQgfHxcclxuICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiYm9keVwiKVswXS5jbGllbnRIZWlnaHQ7XHJcbiAgICAgICAgY29uc3QgX2Rvd24gPSBfeSAtIDUwICsgNDtcclxuICAgICAgICBBZFVuaXRQcm9wZXJ0aWVzQ2xhc3NPYmouU2xvdHNbXCJhZHMuc2FyZ2VsXCJdLnNldEF0dHJpYnV0ZShcclxuICAgICAgICAgIFwic3R5bGVcIixcclxuICAgICAgICAgIGByaWdodDoke3RwbG96ZW4xfTt0b3A6JHtfZG93bn07cG9zaXRpb246Zml4ZWQ7ei1pbmRleDo1NTU7d2lkdGg6OTgwcHg7aGVpZ2h0OjUwcHg7YFxyXG4gICAgICAgICk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgQWRVbml0UHJvcGVydGllc0NsYXNzT2JqLlNsb3RzW1wiYWRzLnNhcmdlbFwiXS5zZXRBdHRyaWJ1dGUoXHJcbiAgICAgICAgICBcInN0eWxlXCIsXHJcbiAgICAgICAgICBgcmlnaHQ6JHt0cGxvemVuMX07Ym90dG9tOjBweDtwb3NpdGlvbjpmaXhlZDt6LWluZGV4OjU1NTt3aWR0aDo5ODBweDtoZWlnaHQ6NTBweDtgXHJcbiAgICAgICAgKTtcclxuICAgICAgICAvLyQod2luZG93KS5yZXNpemUoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicmVzaXplXCIsICgpID0+IHtcclxuICAgICAgICAgIC8vdmFyIF9ZbW92ZSA9ICcwcHgnO1xyXG4gICAgICAgICAgY29uc3QgX1kgPSAwO1xyXG4gICAgICAgICAgY29uc3QgdHBsb3plbjEgPSBNYXRoLmZsb29yKFxyXG4gICAgICAgICAgICAoZG9jdW1lbnQuYm9keS5jbGllbnRXaWR0aCAtIDk4MCkgLyAyIC0gX1lcclxuICAgICAgICAgICk7XHJcbiAgICAgICAgICBBZFVuaXRQcm9wZXJ0aWVzQ2xhc3NPYmouU2xvdHNbXCJhZHMuc2FyZ2VsXCJdLnNldEF0dHJpYnV0ZShcclxuICAgICAgICAgICAgXCJzdHlsZVwiLFxyXG4gICAgICAgICAgICBgcmlnaHQ6JHt0cGxvemVuMX07Ym90dG9tOjBweDtwb3NpdGlvbjpmaXhlZDt6LWluZGV4OjU1NTt3aWR0aDo5ODBweDtoZWlnaHQ6NTBweDtgXHJcbiAgICAgICAgICApO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zdCBidXR0b21fd2lkdGggPSAxNDtcclxuICAgICAgY29uc3QgYnV0dG9tX2hlaWdodCA9IDE0O1xyXG4gICAgICBjb25zdCBidXR0b21fVVJMID0gXCIvL3RvdGFsbWVkaWEyLnluZXQuY28uaWwvcGljLzMwLTMwLmdpZlwiO1xyXG4gICAgICBjb25zdCBidXR0b25jb3NlID1cclxuICAgICAgICAnPGltZyBzdHlsZT1cImN1cnNvcjogcG9pbnRlclwiIG9uY2xpY2s9XCJqYXZhc2NyaXB0OkNsb3NlU2FyZ2VsKCk7XCIgIHNyYz1cIicgK1xyXG4gICAgICAgIGJ1dHRvbV9VUkwgK1xyXG4gICAgICAgICdcIiB3aWR0aD1cIicgK1xyXG4gICAgICAgIGJ1dHRvbV93aWR0aCArXHJcbiAgICAgICAgJ3B4XCIgaGVpZ2h0PVwiJyArXHJcbiAgICAgICAgYnV0dG9tX2hlaWdodCArXHJcbiAgICAgICAgJ3B4XCIgLz4nO1xyXG4gICAgICBjb25zdCBidXRvb25EaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICBidXRvb25EaXYuaWQgPSBcIlNhcmdlbF9DbG9zZV9idXR0b25cIjtcclxuICAgICAgYnV0b29uRGl2LmlubmVySFRNTCA9IGJ1dHRvbmNvc2U7XHJcbiAgICAgIGNvbnN0IGFkc2RpdjMgPSBwYXJlbnQuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhZHMuc2FyZ2VsXCIpO1xyXG4gICAgICBhZHNkaXYzLmFwcGVuZENoaWxkKGJ1dG9vbkRpdik7XHJcbiAgICAgIGNvbnN0IGJ1dG9vbmlkID0gcGFyZW50LmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGJ1dG9vbkRpdi5pZCk7XHJcbiAgICAgIGJ1dG9vbmlkLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuICAgICAgLy8gYnV0b29uaWQuc3R5bGUucG9zaXRpb24gPSBcInJlbGF0aXZlXCI7XHJcbiAgICAgIC8vIGJ1dG9vbmlkLnN0eWxlLmJvdHRvbSA9IDUwICsgXCJweFwiO1xyXG4gICAgICAvLyBidXRvb25pZC5zdHlsZS5sZWZ0ID0gOTY1ICsgXCJweFwiXHJcbiAgICAgIC8vIGJ1dG9vbmlkLnN0eWxlLndpZHRoID0gXCIxNHB4XCJcclxuICAgICAgLy8gYnV0b29uaWQuc3R5bGUuaGVpZ2h0ID0gXCIxNHB4XCJcclxuICAgICAgYnV0b29uaWQuc3R5bGUuekluZGV4ID0gOTk5OTk5OTk5OTk5OTk7XHJcbiAgICB9XHJcbiAgfVxyXG4gXHJcbiAgb3plbl9mdW5jKCkge1xyXG4gICAgLy9sZXQgdGhhdCA9IHRoaXM7XHJcbiAgICBBZFVuaXRGdW5jdGlvbnNDbGFzc09iai5maW5kQWxsRGl2X2Z1bmMoKTtcclxuICAgIGxldCBjb250YWluZXJfd2lkdGggPSA5ODA7XHJcbiAgICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5SZWxhdGl2ZUVsZW1lbnRzQ29udGFpbmVyXCIpICE9IG51bGwgfHwgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5SZWxhdGl2ZUVsZW1lbnRzQ29udGFpbmVyXCIpICE9IHVuZGVmaW5lZCkge1xyXG4gICAgICBpZiAod2luZG93LmRjUGF0aC5pbmNsdWRlcyhcIjM0NTYuTWFnYXppbmVcIikpIHtcclxuICAgICAgICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50b3Atc3RvcnktYmxhemVyXCIpICE9IG51bGwpIHtcclxuICAgICAgICAgIGNvbnRhaW5lcl93aWR0aCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudG9wLXN0b3J5LWJsYXplclwiKS5vZmZzZXRXaWR0aDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIubGF5b3V0Q29udGFpbmVyXCIpWzJdICE9IG51bGwpIHtcclxuICAgICAgICAgIGNvbnRhaW5lcl93aWR0aCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIubGF5b3V0Q29udGFpbmVyXCIpWzJdLm9mZnNldFdpZHRoO1xyXG4gICAgICAgIH1cclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBjb250YWluZXJfd2lkdGggPSB3aW5kb3cuZGNTaXRlLmluY2x1ZGVzKFwibXluZXRcIikgPyBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmxheW91dENvbnRhaW5lclwiKS5vZmZzZXRXaWR0aCA6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuUmVsYXRpdmVFbGVtZW50c0NvbnRhaW5lclwiKS5vZmZzZXRXaWR0aDtcclxuICAgICAgfSBcclxuICAgIH1cclxuICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLkh0bWxMYXlvdXRJdGVtXCIpICE9IG51bGwgfHwgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5IdG1sTGF5b3V0SXRlbVwiKSAhPSB1bmRlZmluZWQpIHtcclxuICAgICAgY29udGFpbmVyX3dpZHRoID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5IdG1sTGF5b3V0SXRlbVwiKS5vZmZzZXRXaWR0aDtcclxuICAgIH0gXHJcbiAgICBpZiAoQWRVbml0UHJvcGVydGllc0NsYXNzT2JqLlNsb3RzW1wiYWRzLnNreXNjcmFwZXJcIl0gIT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgIGlmICh3aW5kb3cuZGNQYXRoLmluY2x1ZGVzKFwiMzQ1Ni5NYWdhemluZVwiKSkge1xyXG4gICAgICAgIEFkVW5pdFByb3BlcnRpZXNDbGFzc09iai5TbG90c1tcImFkcy5za3lzY3JhcGVyXCJdLnN0eWxlLnRvcCA9IFwiNzBweFwiO1xyXG4gICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHsgXHJcbiAgICAgICAgICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYy1pbnZpc2libGVcIikgIT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIEFkVW5pdFByb3BlcnRpZXNDbGFzc09iai5TbG90c1tcImFkcy5za3lzY3JhcGVyXCJdLnN0eWxlLnRvcCA9IFwiNzBweFwiO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgQWRVbml0UHJvcGVydGllc0NsYXNzT2JqLlNsb3RzW1wiYWRzLnNreXNjcmFwZXJcIl0uc3R5bGUudG9wID0gXCIxMjNweFwiO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgfSwgMTgwMDApO1xyXG4gICAgfVxyXG4gICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgKCkgPT4ge1xyXG4gICAgICB0aGlzLmRpc3BsYXlTa3lzY3JhcGVyUmlnaHRfZnVuYyhjb250YWluZXJfd2lkdGgpO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuICAgIGlmIChBZFVuaXRQcm9wZXJ0aWVzQ2xhc3NPYmouU2xvdHNbXCJhZHMuc2t5c2NyYXBlci5sZWZ0XCJdICE9IHVuZGVmaW5lZCkge1xyXG4gICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgKCkgPT4ge1xyXG4gICAgICB0aGlzLmRpc3BsYXlTa3lzY3JhcGVyTGVmdF9mdW5jKGNvbnRhaW5lcl93aWR0aCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKEFkVW5pdFByb3BlcnRpZXNDbGFzc09iai5TbG90c1tcImFkcy5vemVuLnJpZ2h0XCJdICE9IHVuZGVmaW5lZCkgeyAgXHJcbiAgICAgIGlmICh3aW5kb3cuZGNQYXRoLmluY2x1ZGVzKFwiMzQ1Ni5NYWdhemluZVwiKSkge1xyXG4gICAgICAgIEFkVW5pdFByb3BlcnRpZXNDbGFzc09iai5TbG90c1tcImFkcy5vemVuLnJpZ2h0XCJdLnN0eWxlLnRvcCA9IFwiNzBweFwiO1xyXG4gICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHsgXHJcbiAgICAgICAgICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYy1pbnZpc2libGVcIikgIT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIEFkVW5pdFByb3BlcnRpZXNDbGFzc09iai5TbG90c1tcImFkcy5vemVuLnJpZ2h0XCJdLnN0eWxlLnRvcCA9IFwiNzBweFwiO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgQWRVbml0UHJvcGVydGllc0NsYXNzT2JqLlNsb3RzW1wiYWRzLm96ZW4ucmlnaHRcIl0uc3R5bGUudG9wID0gXCIxMjNweFwiO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgfSwgMTgwMDApO1xyXG4gICAgfVxyXG4gICAgIC8vIHRoaXMuZGlzcGxheU96ZW5SaWdodF9mdW5jKGFkc096ZW5SaWdodFdpZHRoKTtcclxuICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsICgpID0+IHtcclxuICAgICAgICB0aGlzLmRpc3BsYXlPemVuUmlnaHRfZnVuYyhjb250YWluZXJfd2lkdGgpO1xyXG4gICAgICB9KTtcclxuICAgIH0gXHJcbiAgICBpZiAoQWRVbml0UHJvcGVydGllc0NsYXNzT2JqLlNsb3RzW1wiYWRzLm96ZW5cIl0gIT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgIGNvbnN0IGFkc096ZW5XaWR0aCA9XHJcbiAgICAgICAgQWRVbml0UHJvcGVydGllc0NsYXNzT2JqLlNsb3RzW1wiYWRzLm96ZW5cIl0ub2Zmc2V0V2lkdGg7XHJcbiAgICAgIHRoaXMuZGlzcGxheU96ZW5fZnVuYyhhZHNPemVuV2lkdGgpO1xyXG4gICAgfVxyXG4gICAgaWYgKEFkVW5pdFByb3BlcnRpZXNDbGFzc09iai5TbG90c1tcImFkcy5vemVuX3JpZ2h0XCJdICE9IHVuZGVmaW5lZCkge1xyXG4gICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuZGlzcGxheU96ZW5fTXluZXRfZnVuYyhjb250YWluZXJfd2lkdGgsIFwib3plbl9yaWdodFwiKTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAoQWRVbml0UHJvcGVydGllc0NsYXNzT2JqLlNsb3RzW1wiYWRzLm96ZW5fbGVmdFwiXSAhPSB1bmRlZmluZWQpIHtcclxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuZGlzcGxheU96ZW5fTXluZXRfZnVuYyhjb250YWluZXJfd2lkdGgsIFwib3plbl9sZWZ0XCIpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICB9XHJcbiAgICBpZiAoQWRVbml0UHJvcGVydGllc0NsYXNzT2JqLlNsb3RzW1wiYWRzLm96ZW4ubGVmdFwiXSAhPSB1bmRlZmluZWQpIHtcclxuICAgICAgY29uc3QgYWRzT3plbkxlZnRXaWR0aCA9IEFkVW5pdFByb3BlcnRpZXNDbGFzc09iai5TbG90c1tcImFkcy5vemVuLmxlZnRcIl0ub2Zmc2V0V2lkdGg7XHJcbiAgICAgIHRoaXMuZGlzcGxheU96ZW5MZWZ0X2Z1bmMoYWRzT3plbkxlZnRXaWR0aCk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIGRpc3BsYXlTa3lzY3JhcGVyUmlnaHRfZnVuYyhjb250YWluZXJfd2lkdGgpIHtcclxuICAgIGxldCBvemVuX3JpZ2h0X3dpZHRoID0gMDtcclxuICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdpZnJhbWVbaWQqPVwic2t5c2NyYXBlclwiXScpICE9IHVuZGVmaW5lZCB8fCBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdpZnJhbWVbaWQqPVwic2t5c2NyYXBlclwiXScpICE9IG51bGwpIHtcclxuICAgICAgb3plbl9yaWdodF93aWR0aCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2lmcmFtZVtpZCo9XCJza3lzY3JhcGVyXCJdJykud2lkdGg7XHJcbiAgICB9IFxyXG4gICAgbGV0IGwgPSAod2luZG93LmlubmVyV2lkdGggLSBjb250YWluZXJfd2lkdGgpIC8gMiAtIDEwO1xyXG4gICAgaWYgKG96ZW5fcmlnaHRfd2lkdGggPj0gbCB8fCBvemVuX3JpZ2h0X3dpZHRoID09IDApIHtcclxuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhZHMuc2t5c2NyYXBlclwiKS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFkcy5za3lzY3JhcGVyXCIpLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XHJcbiAgICB9XHJcbiAgfVxyXG4gIGRpc3BsYXlTa3lzY3JhcGVyTGVmdF9mdW5jKGNvbnRhaW5lcl93aWR0aCkge1xyXG4gICAgbGV0IG96ZW5fbGVmdF93aWR0aCA9IDA7XHJcbiAgICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdpZnJhbWVbaWQqPVwic2t5c2NyYXBlci5sZWZ0XCJdJykgIT0gdW5kZWZpbmVkIHx8IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2lmcmFtZVtpZCo9XCJza3lzY3JhcGVyLmxlZnRcIl0nKSAhPSBudWxsKSB7XHJcbiAgICAgICAgb3plbl9sZWZ0X3dpZHRoID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaWZyYW1lW2lkKj1cInNreXNjcmFwZXIubGVmdFwiXScpLndpZHRoO1xyXG4gICAgIH1cclxuICAgIGxldCBsID0gKHdpbmRvdy5pbm5lcldpZHRoIC0gY29udGFpbmVyX3dpZHRoKSAvIDIgLSAxMDtcclxuICAgIGlmIChvemVuX2xlZnRfd2lkdGggPj0gbCB8fCBvemVuX2xlZnRfd2lkdGggPT0gMCkge1xyXG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFkcy5za3lzY3JhcGVyLmxlZnRcIikuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhZHMuc2t5c2NyYXBlci5sZWZ0XCIpLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XHJcbiAgICB9XHJcbiAgfVxyXG4gIGRpc3BsYXlPemVuUmlnaHRfZnVuYyhjb250YWluZXJfd2lkdGgpIHtcclxuICAgIGxldCBvemVuX3JpZ2h0X3dpZHRoID0gMDtcclxuICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdpZnJhbWVbaWQqPVwib3plbi5yaWdodFwiXScpICE9IHVuZGVmaW5lZCB8fCBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdpZnJhbWVbaWQqPVwib3plbi5yaWdodFwiXScpICE9IG51bGwpIHtcclxuICAgICAgb3plbl9yaWdodF93aWR0aCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2lmcmFtZVtpZCo9XCJvemVuLnJpZ2h0XCJdJykud2lkdGg7XHJcbiAgICB9IFxyXG4gICAgbGV0IGwgPSAod2luZG93LmlubmVyV2lkdGggLSBjb250YWluZXJfd2lkdGgpIC8gMiAtIDEwO1xyXG4gICAgaWYgKG96ZW5fcmlnaHRfd2lkdGggPj0gbCB8fCBvemVuX3JpZ2h0X3dpZHRoID09IDApIHtcclxuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhZHMub3plbi5yaWdodFwiKS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFkcy5vemVuLnJpZ2h0XCIpLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XHJcbiAgICB9XHJcbiAgfVxyXG4gIGRpc3BsYXlPemVuTGVmdF9mdW5jKGFkc096ZW5MZWZ0V2lkdGgpIHtcclxuICAgIGxldCBsID0gKHRoaXMuaW5uZXJXaWR0aCAtIDk4MCkgLyAyIC0gMTA7XHJcbiAgICBpZiAoYWRzT3plbkxlZnRXaWR0aCA+PSBsIHx8IGFkc096ZW5MZWZ0V2lkdGggPT0gMCkge1xyXG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFkcy5vemVuLmxlZnRcIikuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhZHMub3plbi5sZWZ0XCIpLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XHJcbiAgICB9XHJcbiAgfVxyXG4gIGRpc3BsYXlPemVuX2Z1bmMoYWRzT3plbldpZHRoKSB7XHJcbiAgICBsZXQgbCA9ICh0aGlzLmlubmVyV2lkdGggLSA5ODApIC8gMiAtIDEwO1xyXG4gICAgaWYgKGFkc096ZW5XaWR0aCA+PSBsIHx8IGFkc096ZW5XaWR0aCA9PSAwKSB7XHJcbiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYWRzLm96ZW5cIikuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhZHMub3plblwiKS5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZGlzcGxheU96ZW5fTXluZXRfZnVuYyhjb250YWluZXJfd2lkdGgsIGFkKSB7XHJcbiAgICBsZXQgb3plbl93aWR0aCA9IDA7XHJcbiAgICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBpZnJhbWVbaWQqPSR7YWR9XWApICE9IHVuZGVmaW5lZCB8fCBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBpZnJhbWVbaWQqPSR7YWR9XWApICE9IG51bGwpIHtcclxuICAgICAgICBvemVuX3dpZHRoID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgaWZyYW1lW2lkKj0ke2FkfV1gKS53aWR0aDtcclxuICAgICB9XHJcbiAgICBsZXQgbCA9ICh3aW5kb3cuaW5uZXJXaWR0aCAtIGNvbnRhaW5lcl93aWR0aCkgLyAyIC0gMTA7XHJcbiAgICBpZiAob3plbl93aWR0aCA+PSBsIHx8IG96ZW5fd2lkdGggPT0gMCkge1xyXG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChgYWRzLiR7YWR9YCkuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYGFkcy4ke2FkfWApLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XHJcbiAgICB9XHJcbiAgfVxyXG4gIHJlc2l6ZU96ZW5fZnVuYygpIHtcclxuICAgIGxldCBuZXdfYmxhemVyX3dpZHRoO1xyXG4gICAgbGV0IG5ld19ibGF6ZXJfYXJ0aWNsZV93aWR0aDtcclxuICAgIGxldCBtaWRkbGVfd2lkdGggPSAxNDQwO1xyXG4gICAgbGV0IHNtYWxsX3dpZHRoID0gMTIzMDtcclxuICAgIGxldCBiaWdfd2lkdGggPSAxNjYwO1xyXG4gICAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuUmVsYXRpdmVFbGVtZW50c0NvbnRhaW5lclwiKSAhPSBudWxsIHx8IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuUmVsYXRpdmVFbGVtZW50c0NvbnRhaW5lclwiKSAhPSB1bmRlZmluZWQpIHtcclxuICAgICAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudG9wLXN0b3J5LWJsYXplclwiKSAhPSBudWxsKSB7XHJcbiAgICAgICAgbmV3X2JsYXplcl93aWR0aCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudG9wLXN0b3J5LWJsYXplclwiKS5vZmZzZXRXaWR0aDtcclxuICAgICAgfVxyXG4gICAgICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5sYXlvdXRDb250YWluZXJcIilbMl0gIT0gbnVsbCkge1xyXG4gICAgICAgIG5ld19ibGF6ZXJfYXJ0aWNsZV93aWR0aCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIubGF5b3V0Q29udGFpbmVyXCIpWzJdLm9mZnNldFdpZHRoO1xyXG4gICAgICB9XHJcbiAgICAgIGxldCBuZXdfZ3JpZF93aWR0aCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuUmVsYXRpdmVFbGVtZW50c0NvbnRhaW5lclwiKS5vZmZzZXRXaWR0aDtcclxuICAgICAgaWYgKG5ld19ncmlkX3dpZHRoICE9IHVuZGVmaW5lZCAmJiBuZXdfZ3JpZF93aWR0aCA+PSAxMTkxKSB7XHJcbiAgICAgICAgc21hbGxfd2lkdGggPSAxNDcwO1xyXG4gICAgICAgIG1pZGRsZV93aWR0aCA9IDE1NTA7XHJcbiAgICAgICAgYmlnX3dpZHRoID0gMTgyMDtcclxuICAgICAgfSBcclxuICAgIH1cdFx0XHRcdFxyXG4gICAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuSHRtbExheW91dEl0ZW1cIikgIT0gbnVsbCB8fCBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLkh0bWxMYXlvdXRJdGVtXCIpICE9IHVuZGVmaW5lZCkge1xyXG4gICAgICBsZXQgSHRtbExheW91dEl0ZW1fd2lkdGggPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLkh0bWxMYXlvdXRJdGVtXCIpLm9mZnNldFdpZHRoO1xyXG4gICAgICBpZiAoSHRtbExheW91dEl0ZW1fd2lkdGggIT0gdW5kZWZpbmVkICYmIEh0bWxMYXlvdXRJdGVtX3dpZHRoID49IDExOTEpIHtcclxuICAgICAgICBzbWFsbF93aWR0aCA9IDE1MjA7XHJcbiAgICAgICAgbWlkZGxlX3dpZHRoID0gMTYwMDtcclxuICAgICAgICBiaWdfd2lkdGggPSAxODg1O1xyXG4gICAgICB9IFxyXG4gICAgfVx0XHRcdFx0XHRcdFx0XHRcdFx0XHJcbiAgICAgIGlmICh0aGlzLmlubmVyV2lkdGggPiBzbWFsbF93aWR0aCkge1xyXG4gICAgICAgIGlmICh0aGlzLmlubmVyV2lkdGggPiBtaWRkbGVfd2lkdGgpIHtcclxuICAgICAgICAgIGlmICh0aGlzLmlubmVyV2lkdGggPiBiaWdfd2lkdGgpIHtcclxuICBcclxuICAgICAgICAgICAgcmV0dXJuIFtbMzAwLCA2MDBdLCBbMzAwLCA2MDFdLCBbMSwgMV1dO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIFtbMTYwLCA2MDBdLCBbMTYwLCA2MDFdLCBbMSwgMV1dO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICByZXR1cm4gW1sxMjAsIDYwMF0sIFsxMjAsIDYwMV0sIFsxLCAxXV07XHJcbiAgICAgICAgfVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJldHVybiBbMSwgMV07XHJcbiAgICAgIH1cclxuICB9XHJcbiAgcmVzaXplT3plbjgwMF9mdW5jKCkge1xyXG4gICAgaWYgKHdpbmRvdy5kY1ZpZGVvICE9IHRydWUpIHtcclxuICAgICAgaWYgKHRoaXMuaW5uZXJXaWR0aCA+IDEyMzApIHtcclxuICAgICAgICBpZiAodGhpcy5pbm5lcldpZHRoID4gMTQ0MCkge1xyXG4gICAgICAgICAgaWYgKHRoaXMuaW5uZXJXaWR0aCA+IDE2NjApIHtcclxuICAgICAgICAgICAgcmV0dXJuIFtbMzAwLCA2MDBdLCBbMzAwLCA2MDFdXTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBbWzE2MCwgNjAwXSwgWzE2MCwgNjAxXV07XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHJldHVybiBbWzEyMCwgNjAwXSwgWzEyMCwgNjAxXV07XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gWzEyMCwgNjAwXTtcclxuICAgIH1cclxuICB9XHJcbiAgcmVzaXplT3plblluc1ludl9mdW5jKCkge1xyXG4gICAgbGV0IG1pZGRsZV93aWR0aCA9IHdpbmRvdy5kY1NpdGUuaW5jbHVkZXMoXCJteW5ldFwiKSA/IDEzNTAgOiAxNDMwO1xyXG4gICAgbGV0IHNtYWxsX3dpZHRoID0gMTIzMDtcclxuICAgIGxldCBiaWdfd2lkdGggPSB3aW5kb3cuZGNTaXRlLmluY2x1ZGVzKFwibXluZXRcIikgPyAxNTk5IDogMTY2MDtcclxuICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLlJlbGF0aXZlRWxlbWVudHNDb250YWluZXJcIikgIT0gbnVsbCB8fCBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLlJlbGF0aXZlRWxlbWVudHNDb250YWluZXJcIikgIT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgIGxldCBuZXdfZ3JpZF93aWR0aCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuUmVsYXRpdmVFbGVtZW50c0NvbnRhaW5lclwiKS5vZmZzZXRXaWR0aDtcclxuICAgICAgaWYgKG5ld19ncmlkX3dpZHRoICE9IHVuZGVmaW5lZCAmJiBuZXdfZ3JpZF93aWR0aCA+PSAxMTkxKSB7XHJcbiAgICAgICAgc21hbGxfd2lkdGggPSB3aW5kb3cuZGNTaXRlLmluY2x1ZGVzKFwibXluZXRcIikgPyAxMzUwIDogMTQ3MDtcclxuICAgICAgICBtaWRkbGVfd2lkdGggPSAxNTUwO1xyXG4gICAgICAgIGJpZ193aWR0aCA9IHdpbmRvdy5kY1NpdGUuaW5jbHVkZXMoXCJteW5ldFwiKSA/IDE1OTkgOiAxODIwO1xyXG4gICAgICB9IFxyXG4gICAgfVxyXG4gICAgaWYgKHRoaXMuaW5uZXJXaWR0aCA+IHNtYWxsX3dpZHRoKSB7XHJcbiAgICAgIGlmICh0aGlzLmlubmVyV2lkdGggPiBtaWRkbGVfd2lkdGgpIHtcclxuICAgICAgICBpZiAodGhpcy5pbm5lcldpZHRoID4gYmlnX3dpZHRoKSB7XHJcblxyXG4gICAgICAgICAgcmV0dXJuIFtbMzAwLCA2MDBdLCBbMzAwLCA2MDFdXTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgcmV0dXJuIFtbMTYwLCA2MDBdLCBbMTYwLCA2MDFdXTtcclxuICAgICAgICB9XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIFtbMTIwLCA2MDBdLCBbMTIwLCA2MDFdXTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuICB0b3BfZnVuYygpIHtcclxuICAgIEFkVW5pdEZ1bmN0aW9uc0NsYXNzT2JqLmZpbmRBbGxEaXZfZnVuYygpO1xyXG4gICAgaWYgKEFkVW5pdFByb3BlcnRpZXNDbGFzc09iai5TbG90c1tcImFkcy50b3BcIl0gIT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgIC8vaWYgKCQoQWRVbml0UHJvcGVydGllc0NsYXNzT2JqLlNsb3RzWydhZHMudG9wJ10pLmNoaWxkcmVuKCdkaXYnKS5jaGlsZHJlbignaWZyYW1lJykgIT0gXCJcIikge1xyXG4gICAgICAvLyQoQWRVbml0UHJvcGVydGllc0NsYXNzT2JqLlNsb3RzWydhZHMudG9wJ10pLmNoaWxkcmVuKCdkaXYnKS5maXJzdCgpLmNzcygnYm9yZGVyJywgJzVweCBzb2xpZCAjZTllOWU5Jyk7XHJcbiAgICAgIGlmIChBZFVuaXRQcm9wZXJ0aWVzQ2xhc3NPYmouU2xvdHNbXCJhZHMudG9wXCJdLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiZGl2XCIpWzBdICE9IHVuZGVmaW5lZCAmJlxyXG4gICAgICAgIEFkVW5pdFByb3BlcnRpZXNDbGFzc09iai5TbG90c1tcImFkcy50b3BcIl0uZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJkaXZcIilbMF0uZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJpZnJhbWVcIikgIT0gXCJcIikge1xyXG4gICAgICAgIEFkVW5pdFByb3BlcnRpZXNDbGFzc09iai5TbG90c1tcImFkcy50b3BcIl0uZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJkaXZcIilbMF0uc3R5bGUuYm9yZGVyID0gXCI1cHggc29saWQgI2U5ZTllOVwiO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICAvL2lmIChBZFVuaXRQcm9wZXJ0aWVzQ2xhc3NPYmouU2xvdHNbJ2Fkcy50b3AnXS5nZXRFbGVtZW50c0J5VGFnTmFtZSgnZGl2JykgIT0gXCJcIikgYWxlcnQoMSk7XHJcbiAgfVxyXG4gIHN0eWxlU3RpY2t5X2Z1bmMoKSB7XHJcbiAgICBsZXQgc3RpY2t5U2xvdCA9ICB3aW5kb3cuZGNQYXRoLmluY2x1ZGVzKFwiUG5haVBsdXNcIikgPyBcImFkcy5iYW5uZXJcIiA6IEFkVW5pdEZ1bmN0aW9uc0NsYXNzT2JqLnN0aWNreTtcclxuICAgIGxldCBzdGlja3lfdW5pdCA9IFwiZGVmYXVsdFwiO1xyXG5cclxuICAgIGlmICh3aW5kb3cuZGNQYXRoLmluY2x1ZGVzKFwiMzQ1Ni5NYWdhemluZVwiKSB8fCAoKHdpbmRvdy5kY1BhdGguaW5jbHVkZXMoXCJXZWF0aGVyXCIpIHx8IHdpbmRvdy5kY1BhdGguaW5jbHVkZXMoXCJ3ZWF0aGVyXCIpKSAmJiBBZFVuaXRGdW5jdGlvbnNDbGFzc09iai5kY1NpdGUgPT1cInluZXRcIikpIHsgXHJcbiAgICAgIGlmICh3aW5kb3cuZGNQYXRoLmluY2x1ZGVzKFwiMzQ1Ni5NYWdhemluZVwiKSkge1xyXG4gICAgICAgIHN0aWNreV91bml0ID0gXCJtYWdhemluZVwiO1xyXG4gICAgICB9XHJcbiAgICAgIGlmICh3aW5kb3cuZGNQYXRoLmluY2x1ZGVzKFwiV2VhdGhlclwiKSB8fCB3aW5kb3cuZGNQYXRoLmluY2x1ZGVzKFwid2VhdGhlclwiKSkge1xyXG4gICAgICAgIHN0aWNreV91bml0ID0gXCJ3ZWF0aGVyXCI7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKEFkVW5pdEZ1bmN0aW9uc0NsYXNzT2JqLmdldERldmljZV9mdW5jKCkgPT0gXCJBbmRyb2lkXCIpIHtcclxuICAgICAgICBzdGlja3lTbG90ID0gXCJhZHMueW5ldF9tb2JpbGV3ZWJfYmFubmVyc19hbmRyb2lkX1wiICsgc3RpY2t5X3VuaXQgKyBcIl9zdGlja3lcIjtcdFx0XHRcdFx0XHRcdFxyXG4gICAgICB9IGVsc2UgaWYgKEFkVW5pdEZ1bmN0aW9uc0NsYXNzT2JqLmdldERldmljZV9mdW5jKCkgPT0gXCJpUGhvbmVcIikge1xyXG4gICAgICAgIHN0aWNreVNsb3QgPSBcImFkcy55bmV0X21vYmlsZXdlYl9iYW5uZXJzX2lwaG9uZV9cIiArIHN0aWNreV91bml0ICsgXCJfc3RpY2t5XCI7XHRcdFx0XHRcdFxyXG4gICAgICB9IFxyXG4gICAgfVxyXG4gICAgICBcclxuICBBZFVuaXRGdW5jdGlvbnNDbGFzc09iai5maW5kQWxsRGl2X2Z1bmMoKTsgICBcclxuICAgIEluZnJhc3J1Y3R1cmVDbGFzc09iai5TbG90UmVuZGVyRW5kKGZ1bmN0aW9uKGV2ZW50KSB7XHJcbiAgICAgIGxldCBUb3BMb2FkZWQgPSBmYWxzZTtcclxuICAgICAgaWYgKGV2ZW50LnNsb3QgPT0gQWRVbml0UHJvcGVydGllc0NsYXNzT2JqLkRlZmluZV9zbG90c1tzdGlja3lTbG90XSkge1xyXG4gICAgICAgIGlmICghVG9wTG9hZGVkKSB7XHJcbiAgICAgICAgICBpZiAoIWV2ZW50LmlzRW1wdHkpIHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICBBZFVuaXRGdW5jdGlvbnNDbGFzc09iai5maW5kQWxsRGl2X2Z1bmMoKTtcclxuICAgICAgICAgICAgICBsZXQgYmFubmVyX2ggPSBcIlwiO1xyXG4gICAgICAgICAgICAgIGlmICghd2luZG93LmRjU2l0ZS5pbmNsdWRlcyhcIm15bmV0XCIpKSB7XHJcbiAgICAgICAgICAgICAgICBiYW5uZXJfaCA9ICh3aW5kb3cuaXNfSU9TKCkgPT0gdHJ1ZSAmJiAvQ3JpT1MvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpKSA/IFwiaGVpZ2h0OiA4NXB4ICFpbXBvcnRhbnQ7XCIgOiBcIlwiO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICBsZXQgYmFubmVyX3dpZHRoO1xyXG4gICAgICAgICAgICAgIGxldCBiYW5uZXJfaWQgPSAoc3RpY2t5U2xvdCA9PSBcImFkcy5iYW5uZXJcIikgPyBcImJhbm5lclwiIDogXCJzdGlja3lcIjtcclxuICAgICAgICAgICAgICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaWZyYW1lW2lkKj1cIicgKyBiYW5uZXJfaWQgKyAnXCJdJykgIT0gbnVsbCB8fCBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdpZnJhbWVbaWQqPVwiJyArIGJhbm5lcl9pZCArICdcIl0nKSAhPSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIGJhbm5lcl93aWR0aCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2lmcmFtZVtpZCo9XCInICsgYmFubmVyX2lkICsgJ1wiXScpLndpZHRoO1xyXG4gICAgICAgICAgICAgIH0gICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgIGxldCBzdGlja3lfc2xvdCA9IEFkVW5pdFByb3BlcnRpZXNDbGFzc09iai5TbG90c1tzdGlja3lTbG90XTtcclxuICAgICAgICAgICAgICBpZiAod2luZG93LmRjUGF0aC5pbmNsdWRlcyhcIlBuYWlQbHVzXCIpKSB7XHJcbiAgICAgICAgICAgICAgICBzdGlja3lfc2xvdC5zZXRBdHRyaWJ1dGUoXCJzdHlsZVwiLCBcInBvc2l0aW9uOmZpeGVkO1wiICsgYmFubmVyX2ggKyBcImJvdHRvbTowcHg7bGVmdDowcHg7ZGlzcGxheTpmbGV4O2p1c3RpZnktY29udGVudDpjZW50ZXI7ZGlzcGxheTotd2Via2l0LWJveDstd2Via2l0LWJveC1wYWNrOmNlbnRlcjtkaXNwbGF5Oi1tcy1mbGV4Ym94Oy1tcy1mbGV4LXBhY2s6Y2VudGVyO3RleHQtYWxpZ246Y2VudGVyO3dpZHRoOjEwMCU7ei1pbmRleDo5OTk4O21hcmdpbjowIGF1dG87YmFja2dyb3VuZC1jb2xvcjojZmZmXCIpO1xyXG4gICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBzdGlja3lfc2xvdC5zZXRBdHRyaWJ1dGUoXCJzdHlsZVwiLCBcInBvc2l0aW9uOmZpeGVkO2JvdHRvbTowcHg7bGVmdDowcHg7ZGlzcGxheTpmbGV4O2p1c3RpZnktY29udGVudDpjZW50ZXI7ZGlzcGxheTotd2Via2l0LWJveDstd2Via2l0LWJveC1wYWNrOmNlbnRlcjtkaXNwbGF5Oi1tcy1mbGV4Ym94Oy1tcy1mbGV4LXBhY2s6Y2VudGVyO3RleHQtYWxpZ246Y2VudGVyO3dpZHRoOjEwMCU7ei1pbmRleDo5OTk7bWFyZ2luOjAgYXV0bztiYWNrZ3JvdW5kLWNvbG9yOiNmZmZcIik7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIHN0aWNreV9zbG90LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiZGl2XCIpWzBdLnNldEF0dHJpYnV0ZShcInN0eWxlXCIsIFwibWluLXdpZHRoOlwiICsgYmFubmVyX3dpZHRoICsgXCJweDtcIiArIGJhbm5lcl9oICsgXCJtYXJnaW46IDAgYXV0bztcIik7XHJcbiAgICAgICAgICAgICAgICBpZiAod2luZG93LmRjU2l0ZSA9PSAneW5lcycgJiYgd2luZG93LmlzTW9iaWxlMSkge1xyXG4gICAgICAgICAgICAgICAgICBsZXQgbW9iaWxlX2Jsb2NrID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhDb250YWluZXInKTtcclxuICAgICAgICAgICAgICAgICAgbW9iaWxlX2Jsb2NrLnNldEF0dHJpYnV0ZShcInN0eWxlXCIsIFwicGFkZGluZy1ib3R0b206IDQwcHg7XCIpO1xyXG4gICAgICAgICAgICAgICAgfSAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgfSBjYXRjaCAoZXgpIHtcclxuICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGV4KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgVG9wTG9hZGVkID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH0gXHJcbiAgbXdfdmlkZW9pbnBhZ2VfZnVuYygpIHtcclxuICAgIEluZnJhc3J1Y3R1cmVDbGFzc09iai5TbG90UmVuZGVyRW5kKGZ1bmN0aW9uKGV2ZW50KSB7XHJcbiAgICAgIGxldCBUb3BMb2FkZWQgPSBmYWxzZTtcclxuICAgICAgaWYgKGV2ZW50LnNsb3QgPT0gQWRVbml0UHJvcGVydGllc0NsYXNzT2JqLkRlZmluZV9zbG90c1tcImFkcy5tdy52aWRlb2lucGFnZVwiXSkge1xyXG4gICAgICAgIGlmICghVG9wTG9hZGVkKSB7XHJcbiAgICAgICAgICBpZiAoIWV2ZW50LmlzRW1wdHkpIHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICBBZFVuaXRGdW5jdGlvbnNDbGFzc09iai5maW5kQWxsRGl2X2Z1bmMoKTtcclxuICAgICAgICAgICAgICBsZXQgYmFubmVyX3dpZHRoID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaWZyYW1lW2lkKj1cIm13LnZpZGVvaW5wYWdlXCJdJykud2lkdGg7XHJcbiAgICAgICAgICAgICAgbGV0IHN0aWNreV9zbG90ID0gQWRVbml0UHJvcGVydGllc0NsYXNzT2JqLlNsb3RzW1wiYWRzLm13LnZpZGVvaW5wYWdlXCJdO1xyXG4gICAgICAgICAgICAgIHN0aWNreV9zbG90LnNldEF0dHJpYnV0ZShcclxuICAgICAgICAgICAgICAgIFwic3R5bGVcIixcclxuICAgICAgICAgICAgICAgIFwicG9zaXRpb246Zml4ZWQ7Ym90dG9tOjBweDtsZWZ0OjBweDtkaXNwbGF5OmZsZXg7anVzdGlmeS1jb250ZW50OmNlbnRlcjtkaXNwbGF5Oi13ZWJraXQtYm94Oy13ZWJraXQtYm94LXBhY2s6Y2VudGVyO2Rpc3BsYXk6LW1zLWZsZXhib3g7LW1zLWZsZXgtcGFjazpjZW50ZXI7dGV4dC1hbGlnbjpjZW50ZXI7d2lkdGg6MTAwJTt6LWluZGV4OjU1NTU1O21hcmdpbjowIGF1dG87YmFja2dyb3VuZC1jb2xvcjojZmZmXCJcclxuICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgIHN0aWNreV9zbG90XHJcbiAgICAgICAgICAgICAgICAuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJkaXZcIilbMF1cclxuICAgICAgICAgICAgICAgIC5zZXRBdHRyaWJ1dGUoXHJcbiAgICAgICAgICAgICAgICAgIFwic3R5bGVcIixcclxuICAgICAgICAgICAgICAgICAgXCJ3aWR0aDpcIiArIGJhbm5lcl93aWR0aCArIFwicHg7bWFyZ2luOiBhdXRvIGF1dG8gYXV0byBhdXRvO1wiXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB9IGNhdGNoIChleCkge1xyXG4gICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBUb3BMb2FkZWQgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG4gIGJpZ2xpdmVib3hfZnVuYygpIHtcclxuICAgIEFkVW5pdEZ1bmN0aW9uc0NsYXNzT2JqLmZpbmRBbGxEaXZfZnVuYygpOyAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgIGxldCBiaWdsaXZlYm94X3Nsb3QgPSBBZFVuaXRQcm9wZXJ0aWVzQ2xhc3NPYmouU2xvdHNbXCJhZHMuYmlnbGl2ZWJveFwiXTtcclxuICAgIGlmIChiaWdsaXZlYm94X3Nsb3QgIT0gdW5kZWZpbmVkKSB7IFxyXG4gICAgICAvLyBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgeyBcclxuICAgICAgLy8gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Fkcy5iaWdsaXZlYm94JykuY2hpbGRyZW5bMF0uc2V0QXR0cmlidXRlKFwic3R5bGVcIiwgXCJ0ZXh0LWFsaWduOiBjZW50ZXJcIik7XHJcbiAgICAgIC8vIH0sIDE1MDApO1xyXG4gICAgICAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5SZWxhdGl2ZUVsZW1lbnRzQ29udGFpbmVyJykgfHwgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLkh0bWxMYXlvdXRJdGVtJykpIHtcclxuICAgICAgICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnZlc3R5LXNlYXJjaCcpICE9PSBudWxsKSB7ICBcclxuICAgICAgICAgIGxldCBtYXJnaW5Cb3R0b21Cb3ggPSAod2luZG93LmRjQ0cgIT0gXCJhcnRpY2xlXCIpID8gJy01MnB4JyA6ICctNDVweCc7XHJcbiAgICAgICAgICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLk1vYmlsZVRpY2tlckNvbXBvbmVudGEnKSkge1xyXG4gICAgICAgICAgICBiaWdsaXZlYm94X3Nsb3Quc2V0QXR0cmlidXRlKFwic3R5bGVcIiwgXCJtYXJnaW46MTA1cHggYXV0byAtOTNweCBhdXRvOyBwb3NpdGlvbjogcmVsYXRpdmU7IGRpc3BsYXk6ZmxleDsganVzdGlmeS1jb250ZW50OmNlbnRlcjsgdGV4dC1hbGlnbjpjZW50ZXI7XCIpOyAgICAgICAgICAgIFxyXG4gICAgICAgICAgfSBlbHNlIHsgICAgICAgIFxyXG4gICAgICAgICAgICBiaWdsaXZlYm94X3Nsb3Quc2V0QXR0cmlidXRlKFwic3R5bGVcIiwgXCJtYXJnaW46NTJweCBhdXRvIFwiICsgbWFyZ2luQm90dG9tQm94ICsgXCIgYXV0bzsgcG9zaXRpb246IHJlbGF0aXZlOyBkaXNwbGF5OmZsZXg7IGp1c3RpZnktY29udGVudDpjZW50ZXI7IHRleHQtYWxpZ246Y2VudGVyO1wiKTtcclxuICAgICAgICAgIH0gXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuWW5ldE5ld3NNdXRhbUhlYWRlcicpKSB7XHJcbiAgICAgICAgICAgIGJpZ2xpdmVib3hfc2xvdC5zZXRBdHRyaWJ1dGUoXCJzdHlsZVwiLCBcIm1hcmdpbjoxNzBweCBhdXRvIC0xNTVweCBhdXRvICFpbXBvcnRhbnQ7IHBvc2l0aW9uOiByZWxhdGl2ZTsgZGlzcGxheTpmbGV4ICFpbXBvcnRhbnQ7IGp1c3RpZnktY29udGVudDpjZW50ZXI7IHRleHQtYWxpZ246Y2VudGVyO1wiKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGJpZ2xpdmVib3hfc2xvdC5zZXRBdHRyaWJ1dGUoXCJzdHlsZVwiLCBcIm1hcmdpbjo2MHB4IGF1dG8gLTQ4cHggYXV0bzsgcG9zaXRpb246IHJlbGF0aXZlOyBkaXNwbGF5OmZsZXg7IGp1c3RpZnktY29udGVudDpjZW50ZXI7IHRleHQtYWxpZ246Y2VudGVyO1wiKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgYmlnbGl2ZWJveF9zbG90LnNldEF0dHJpYnV0ZShcInN0eWxlXCIsIFwibWFyZ2luLXRvcDogNDBweDsgcG9zaXRpb246IHJlbGF0aXZlOyBkaXNwbGF5OmZsZXg7IGp1c3RpZnktY29udGVudDpjZW50ZXI7IHRleHQtYWxpZ246Y2VudGVyO1wiKTsgXHJcbiAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWFpbicpLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2FyZWEgY29udGVudCcpWzBdLnNldEF0dHJpYnV0ZShcInN0eWxlXCIsIFwibWFyZ2luLXRvcDogNXB4O1wiKTtcclxuICAgICAgfSAgIFxyXG4gICAgICBcclxuICAgICAgXHJcbiAgICAgICBcclxuXHJcbiAgICAgIEluZnJhc3J1Y3R1cmVDbGFzc09iai5TbG90UmVuZGVyRW5kKGZ1bmN0aW9uKGV2ZW50KSB7XHJcbiAgICAgICAgbGV0IFRvcExvYWRlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgaWYgKGV2ZW50LnNsb3QgPT0gQWRVbml0UHJvcGVydGllc0NsYXNzT2JqLkRlZmluZV9zbG90c1tBZFVuaXRGdW5jdGlvbnNDbGFzc09iai5iaWdsaXZlYm94XSkge1xyXG4gICAgICAgICAgICBpZiAoIVRvcExvYWRlZCkgeyAgXHJcbiAgICAgICAgICAgICAgaWYoIWV2ZW50LmlzRW1wdHkpIHsgICBcclxuICAgICAgICAgICAgICAgICAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2lmcmFtZVtpZCo9XCJiaWdsaXZlYm94XCJdJykgIT0gdW5kZWZpbmVkIHx8IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2lmcmFtZVtpZCo9XCJiaWdsaXZlYm94XCJdJykgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBpZnJhbWVfYmlnbGl2ZWJveCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2lmcmFtZVtpZCo9XCJiaWdsaXZlYm94XCJdJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWZyYW1lX2JpZ2xpdmVib3guc3R5bGUuY3NzVGV4dCArPSAndGV4dC1hbGlnbjpjZW50ZXI7IGRpc3BsYXk6ZmxleDsganVzdGlmeS1jb250ZW50OmNlbnRlcjsnO1xyXG4gICAgICAgICAgICAgICAgICB9ICBcclxuICAgICAgICAgICAgICAgICAgbGV0IGJnX3Nsb3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFkcy5iaWdsaXZlYm94XCIpO1xyXG4gICAgICAgICAgICAgICAgICBiZ19zbG90LnN0eWxlLmNzc1RleHQgKz0gJ2Rpc3BsYXk6ZmxleDsganVzdGlmeS1jb250ZW50OmNlbnRlcjsgdGV4dC1hbGlnbjogY2VudGVyOyBtYXJnaW4tbGVmdDogYXV0byAhaW1wb3J0YW50OyBtYXJnaW4tcmlnaHQ6IGF1dG8gIWltcG9ydGFudDsnO1xyXG4gICAgICAgICAgICAgICAgICB3aW5kb3cuQ2xvc2VCb3ggPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKEFkVW5pdEZ1bmN0aW9uc0NsYXNzT2JqLmJpZ2xpdmVib3gpLmlubmVySFRNTCA9IFwiXCI7XHJcbiAgICAgICAgICAgICAgICAgIH0gICBcclxuICAgICAgICAgICAgICAgICAgaWYgKGV2ZW50LmxpbmVJdGVtSWQgIT0gbnVsbCkgIHsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgeyBcclxuICAgICAgICAgICAgICAgICAgY29uc3QgYnV0dG9tX3dpZHRoID0gMzA7XHJcbiAgICAgICAgICAgICAgICAgIGNvbnN0IGJ1dHRvbV9oZWlnaHQgPSAzMDtcclxuICAgICAgICAgICAgICAgICAgY29uc3QgYnV0dG9tX1VSTCA9IFwiLy90b3RhbG1lZGlhMi55bmV0LmNvLmlsL3BpYy8zMC0zMC5naWZcIjtcclxuICAgICAgICAgICAgICAgICAgY29uc3QgYnV0dG9uY2xvc2UgPSBcclxuICAgICAgICAgICAgICAgICAgJzxpbWcgc3R5bGU9XCJjdXJzb3I6IHBvaW50ZXJcIiBvbmNsaWNrPVwiamF2YXNjcmlwdDpDbG9zZUJveCgpO1wiICBzcmM9XCInICsgYnV0dG9tX1VSTCArICdcIiB3aWR0aD1cIicgKyBidXR0b21fd2lkdGggKyAncHhcIiBoZWlnaHQ9XCInICsgYnV0dG9tX2hlaWdodCArICdweFwiIC8+JztcclxuICAgICAgICAgICAgICAgICAgY29uc3QgYnV0b29uRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICAgICAgICAgIGJ1dG9vbkRpdi5pZCA9ICdCaWdsaXZlYm94X0Nsb3NlX2J1dHRvbic7XHJcbiAgICAgICAgICAgICAgICAgIGJ1dG9vbkRpdi5pbm5lckhUTUwgPSBidXR0b25jbG9zZTtcclxuICAgICAgICAgICAgICAgICAgY29uc3QgYWRzZGl2MyA9IHBhcmVudC5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChBZFVuaXRGdW5jdGlvbnNDbGFzc09iai5iaWdsaXZlYm94KTtcclxuICAgICAgICAgICAgICAgICAgYWRzZGl2My5hcHBlbmRDaGlsZChidXRvb25EaXYpO1xyXG4gICAgICAgICAgICAgICAgICBsZXQgYnV0b29uaWQgPSBwYXJlbnQuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYnV0b29uRGl2LmlkKTtcclxuICAgICAgICAgICAgICAgICAgYnV0b29uaWQuc3R5bGUucG9zaXRpb24gPSBcImFic29sdXRlXCI7XHJcbiAgICAgICAgICAgICAgICAgIGJ1dG9vbmlkLnN0eWxlLnRvcCA9IDAgKyBcInB4XCI7XHJcbiAgICAgICAgICAgICAgICAgIGJ1dG9vbmlkLnN0eWxlLnJpZ2h0ID0gMCArIFwicHhcIjtcclxuICAgICAgICAgICAgICAgICAgYnV0b29uaWQuc3R5bGUud2lkdGggPSBcIjMwcHhcIjtcclxuICAgICAgICAgICAgICAgICAgYnV0b29uaWQuc3R5bGUuaGVpZ2h0ID0gXCIzMHB4XCI7XHJcbiAgICAgICAgICAgICAgICAgIGJ1dG9vbmlkLnN0eWxlLnpJbmRleCA9IDE7XHJcbiAgICAgICAgICAgICAgICAgIH0sIDEwMDApO1xyXG5cclxuICAgICAgICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZXZlbnQuZGF0YS5ldmVudE5hbWUgPT09ICdpbmJvYXJkY2xzb2VkJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIkJpZ2xpdmVib3hfQ2xvc2VfYnV0dG9uXCIpLnN0eWxlID0gXCJkaXNwbGF5OiBub25lXCI7IFxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0sIGZhbHNlKTsgXHJcblxyXG4gICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgIH0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICBUb3BMb2FkZWQ9dHJ1ZTtcclxuICAgICAgICAgICAgfSAgICBcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTsgICAgICBcclxuICAgIH1cclxuICB9XHJcbiAgbXdfYmlnbGl2ZWJveF9mdW5jKCkge1xyXG4gICAgQWRVbml0RnVuY3Rpb25zQ2xhc3NPYmouZmluZEFsbERpdl9mdW5jKCk7ICBcclxuICAgIGxldCBtd19iaWdsaXZlYm94X3Nsb3QgPSBBZFVuaXRQcm9wZXJ0aWVzQ2xhc3NPYmouU2xvdHNbQWRVbml0RnVuY3Rpb25zQ2xhc3NPYmouYmlnbGl2ZWJveF07XHJcbiAgICBpZiAobXdfYmlnbGl2ZWJveF9zbG90ICE9IHVuZGVmaW5lZCkge1xyXG4gICAgICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLlJlbGF0aXZlRWxlbWVudHNDb250YWluZXInKSB8fCBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuSHRtbExheW91dEl0ZW0nKSkge1xyXG4gICAgICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcueW5ldC1uZXdzLWVuZ2xpc2gtc2VhcmNoJykgIT09IG51bGwpIHsgIFxyXG4gICAgICAgICAgICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLk1vYmlsZVRpY2tlckNvbXBvbmVudGEnKSkge1xyXG4gICAgICAgICAgICAgIG13X2JpZ2xpdmVib3hfc2xvdC5zZXRBdHRyaWJ1dGUoXCJzdHlsZVwiLCBcIm1hcmdpbjoxMDVweCBhdXRvIC05N3B4IGF1dG87IHBvc2l0aW9uOiByZWxhdGl2ZTsgZGlzcGxheTpmbGV4OyBqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyOyB0ZXh0LWFsaWduOmNlbnRlcjtcIik7ICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIH0gZWxzZSB7ICAgICAgICAgXHJcbiAgICAgICAgICAgIG13X2JpZ2xpdmVib3hfc2xvdC5zZXRBdHRyaWJ1dGUoXCJzdHlsZVwiLCBcIm1hcmdpbjo2MHB4IGF1dG8gLTQ4cHggYXV0bzsgcG9zaXRpb246IHJlbGF0aXZlOyBkaXNwbGF5OmZsZXg7IGp1c3RpZnktY29udGVudDpjZW50ZXI7IHRleHQtYWxpZ246Y2VudGVyO1wiKTtcclxuICAgICAgICAgICAgfSAgXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuWW5ldE5ld3NNdXRhbUhlYWRlcicpKSB7XHJcbiAgICAgICAgICAgIG13X2JpZ2xpdmVib3hfc2xvdC5zZXRBdHRyaWJ1dGUoXCJzdHlsZVwiLCBcIm1hcmdpbjoxNzBweCBhdXRvIC0xNTVweCBhdXRvOyBwb3NpdGlvbjogcmVsYXRpdmU7IGRpc3BsYXk6ZmxleDsganVzdGlmeS1jb250ZW50OmNlbnRlcjsgdGV4dC1hbGlnbjpjZW50ZXI7XCIpO1xyXG4gICAgICAgICAgfSAgZWxzZSB7XHJcbiAgICAgICAgICAgIG13X2JpZ2xpdmVib3hfc2xvdC5zZXRBdHRyaWJ1dGUoXCJzdHlsZVwiLCBcIm1hcmdpbjo2MHB4IGF1dG8gLTQ4cHggYXV0bzsgcG9zaXRpb246IHJlbGF0aXZlOyBkaXNwbGF5OmZsZXg7IGp1c3RpZnktY29udGVudDpjZW50ZXI7IHRleHQtYWxpZ246Y2VudGVyO1wiKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWFpbicpLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2FyZWEgY29udGVudCcpWzBdXHJcbiAgICAgICAgICAuc2V0QXR0cmlidXRlKFxyXG4gICAgICAgICAgICBcInN0eWxlXCIsXHJcbiAgICAgICAgICAgIFwibWFyZ2luLXRvcDogNXB4O1wiXHJcbiAgICAgICAgICApO1xyXG4gICAgICAgICAgaWYgKHdpbmRvdy5kY0NHID09ICdhcnRpY2xlJykgeyAgIFxyXG4gICAgICAgICAgICAgIG13X2JpZ2xpdmVib3hfc2xvdC5zZXRBdHRyaWJ1dGUoXHJcbiAgICAgICAgICAgICAgXCJzdHlsZVwiLFxyXG4gICAgICAgICAgICAgIFwibWFyZ2luLXRvcDogNDBweDsgcG9zaXRpb246IHJlbGF0aXZlO1wiXHJcbiAgICAgICAgICAgICAgKTsgIFxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgaWYgKHdpbmRvdy5kY0NHID09ICdtYWluJyB8fCB3aW5kb3cuZGNDRyA9PSAnc3ViJykgeyAgXHJcbiAgICAgICAgICAgIG13X2JpZ2xpdmVib3hfc2xvdC5zZXRBdHRyaWJ1dGUoXHJcbiAgICAgICAgICAgICAgXCJzdHlsZVwiLFxyXG4gICAgICAgICAgICAgIFwibWFyZ2luLXRvcDogMzNweDsgcG9zaXRpb246IHJlbGF0aXZlO1wiXHJcbiAgICAgICAgICAgICAgKTsgIFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBcclxuICAgICBcclxuICAgXHJcbiAgICAgICAgSW5mcmFzcnVjdHVyZUNsYXNzT2JqLlNsb3RSZW5kZXJFbmQoZnVuY3Rpb24oZXZlbnQpIHtcclxuICAgICAgICAgIGxldCBUb3BMb2FkZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgaWYgKGV2ZW50LnNsb3QgPT0gQWRVbml0UHJvcGVydGllc0NsYXNzT2JqLkRlZmluZV9zbG90c1tBZFVuaXRGdW5jdGlvbnNDbGFzc09iai5iaWdsaXZlYm94XSkge1xyXG4gICAgICAgICAgICAgIGlmICghVG9wTG9hZGVkKSB7ICBcclxuICAgICAgICAgICAgICAgIGlmKCFldmVudC5pc0VtcHR5KSB7ICBcclxuICAgICAgICAgICAgICAgICAgbGV0IGJnX3Nsb3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFkcy5iaWdsaXZlYm94XCIpO1xyXG4gICAgICAgICAgICAgICAgICBiZ19zbG90LnN0eWxlLmNzc1RleHQgKz0gJ2Rpc3BsYXk6ZmxleDsganVzdGlmeS1jb250ZW50OmNlbnRlcjsgdGV4dC1hbGlnbjogY2VudGVyOyBtYXJnaW4tbGVmdDogYXV0byAhaW1wb3J0YW50OyBtYXJnaW4tcmlnaHQ6IGF1dG8gIWltcG9ydGFudDsnO1xyXG4gICAgICAgICAgICAgICAgICB3aW5kb3cuQ2xvc2VCb3ggPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKEFkVW5pdEZ1bmN0aW9uc0NsYXNzT2JqLmJpZ2xpdmVib3gpLmlubmVySFRNTCA9IFwiXCI7XHJcbiAgICAgICAgICAgICAgICAgIH0gICBcclxuICAgICAgICAgICAgICAgICAgaWYgKGV2ZW50LmxpbmVJdGVtSWQgIT0gbnVsbCkgIHsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7IFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGJ1dHRvbV93aWR0aCA9IDMwO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGJ1dHRvbV9oZWlnaHQgPSAzMDtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBidXR0b21fVVJMID0gXCIvL3RvdGFsbWVkaWEyLnluZXQuY28uaWwvcGljLzMwLTMwLmdpZlwiO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGJ1dHRvbmNsb3NlID0gXHJcbiAgICAgICAgICAgICAgICAgICAgJzxpbWcgc3R5bGU9XCJjdXJzb3I6IHBvaW50ZXJcIiBvbmNsaWNrPVwiamF2YXNjcmlwdDpDbG9zZUJveCgpO1wiICBzcmM9XCInICsgYnV0dG9tX1VSTCArICdcIiB3aWR0aD1cIicgKyBidXR0b21fd2lkdGggKyAncHhcIiBoZWlnaHQ9XCInICsgYnV0dG9tX2hlaWdodCArICdweFwiIC8+JztcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBidXRvb25EaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgICAgICAgICBidXRvb25EaXYuaWQgPSAnQmlnbGl2ZWJveF9DbG9zZV9idXR0b24nO1xyXG4gICAgICAgICAgICAgICAgICAgIGJ1dG9vbkRpdi5pbm5lckhUTUwgPSBidXR0b25jbG9zZTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBhZHNkaXYzID0gcGFyZW50LmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKEFkVW5pdEZ1bmN0aW9uc0NsYXNzT2JqLmJpZ2xpdmVib3gpO1xyXG4gICAgICAgICAgICAgICAgICAgIGFkc2RpdjMuYXBwZW5kQ2hpbGQoYnV0b29uRGl2KTtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgYnV0b29uaWQgPSBwYXJlbnQuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYnV0b29uRGl2LmlkKTtcclxuICAgICAgICAgICAgICAgICAgICBidXRvb25pZC5zdHlsZS5wb3NpdGlvbiA9IFwiYWJzb2x1dGVcIjtcclxuICAgICAgICAgICAgICAgICAgICBidXRvb25pZC5zdHlsZS50b3AgPSAwICsgXCJweFwiO1xyXG4gICAgICAgICAgICAgICAgICAgIGJ1dG9vbmlkLnN0eWxlLnJpZ2h0ID0gMCArIFwicHhcIjtcclxuICAgICAgICAgICAgICAgICAgICBidXRvb25pZC5zdHlsZS53aWR0aCA9IFwiMzBweFwiO1xyXG4gICAgICAgICAgICAgICAgICAgIGJ1dG9vbmlkLnN0eWxlLmhlaWdodCA9IFwiMzBweFwiO1xyXG4gICAgICAgICAgICAgICAgICAgIGJ1dG9vbmlkLnN0eWxlLnpJbmRleCA9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgfSwgMTAwMCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXZlbnQuZGF0YS5ldmVudE5hbWUgPT09ICdpbmJvYXJkY2xzb2VkJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiQmlnbGl2ZWJveF9DbG9zZV9idXR0b25cIikuc3R5bGUgPSBcImRpc3BsYXk6IG5vbmVcIjsgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIGZhbHNlKTsgIFxyXG5cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgIH0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIFRvcExvYWRlZD10cnVlO1xyXG4gICAgICAgICAgICAgIH0gICAgXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pOyAgICAgIFxyXG5cclxuICAgICAgICAgICAgICBcclxuICAgICAgfVxyXG4gICAgfSAgIFxyXG4gICAgIGxpdmVib3hfZnVuYygpIHtcclxuICAgICAgQWRVbml0RnVuY3Rpb25zQ2xhc3NPYmouZmluZEFsbERpdl9mdW5jKCk7XHJcbiAgICAgIEluZnJhc3J1Y3R1cmVDbGFzc09iai5TbG90UmVuZGVyRW5kKGZ1bmN0aW9uKGV2ZW50KSB7XHJcbiAgICAgICAgbGV0IFRvcExvYWRlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgaWYgKGV2ZW50LnNsb3QgPT0gQWRVbml0UHJvcGVydGllc0NsYXNzT2JqLkRlZmluZV9zbG90c1tcImFkcy5saXZlYm94XCJdKSB7XHJcbiAgICAgICAgICAgIGlmICghVG9wTG9hZGVkKSB7ICBcclxuICAgICAgICAgICAgICBpZighZXZlbnQuaXNFbXB0eSkgeyAgICBcclxuICAgICAgICAgICAgICAgICAgd2luZG93LkNsb3NlQm94ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Fkcy5saXZlYm94JykuaW5uZXJIVE1MID0gXCJcIjtcclxuICAgICAgICAgICAgICAgICAgfSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7IFxyXG4gICAgICAgICAgICAgICAgICBjb25zdCBidXR0b21fd2lkdGggPSAzMDtcclxuICAgICAgICAgICAgICAgICAgY29uc3QgYnV0dG9tX2hlaWdodCA9IDMwO1xyXG4gICAgICAgICAgICAgICAgICBjb25zdCBidXR0b21fVVJMID0gXCIvL3RvdGFsbWVkaWEyLnluZXQuY28uaWwvcGljLzMwLTMwLmdpZlwiO1xyXG4gICAgICAgICAgICAgICAgICBsZXQgYnV0dG9uY2xvc2UgPSAnPGltZyBzdHlsZT1cImN1cnNvcjogcG9pbnRlclwiIG9uY2xpY2s9XCJqYXZhc2NyaXB0OkNsb3NlQm94KCk7XCIgIHNyYz1cIicgKyBidXR0b21fVVJMICsgJ1wiIHdpZHRoPVwiJyArIGJ1dHRvbV93aWR0aCArICdweFwiIGhlaWdodD1cIicgKyBidXR0b21faGVpZ2h0ICsgJ3B4XCIgLz4nO1xyXG4gICAgICAgICAgICAgICAgICBjb25zdCBidXRvb25EaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgICAgICAgYnV0b29uRGl2LmlkID0gJ0xpdmVCb3hfQ2xvc2VfYnV0dG9uJztcclxuICAgICAgICAgICAgICAgICAgYnV0b29uRGl2LmlubmVySFRNTCA9IGJ1dHRvbmNsb3NlO1xyXG4gICAgICAgICAgICAgICAgICBjb25zdCBhZHNkaXYzID0gcGFyZW50LmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYWRzLmxpdmVib3hcIik7XHJcbiAgICAgICAgICAgICAgICAgIGFkc2RpdjMuYXBwZW5kQ2hpbGQoYnV0b29uRGl2KTtcclxuICAgICAgICAgICAgICAgICAgbGV0IGJ1dG9vbmlkID0gcGFyZW50LmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGJ1dG9vbkRpdi5pZCk7XHJcbiAgICAgICAgICAgICAgICAgIGJ1dG9vbmlkLnN0eWxlLnBvc2l0aW9uID0gXCJhYnNvbHV0ZVwiO1xyXG4gICAgICAgICAgICAgICAgICBidXRvb25pZC5zdHlsZS50b3AgPSAwICsgXCJweFwiO1xyXG4gICAgICAgICAgICAgICAgICBidXRvb25pZC5zdHlsZS5yaWdodCA9IDAgKyBcInB4XCI7XHJcbiAgICAgICAgICAgICAgICAgIGJ1dG9vbmlkLnN0eWxlLndpZHRoID0gXCIzMHB4XCI7XHJcbiAgICAgICAgICAgICAgICAgIGJ1dG9vbmlkLnN0eWxlLmhlaWdodCA9IFwiMzBweFwiO1xyXG4gICAgICAgICAgICAgICAgICBidXRvb25pZC5zdHlsZS56SW5kZXggPSAxO1xyXG4gICAgICAgICAgICAgICAgICB9LCAxMDAwKTtcclxuICAgICAgICAgICAgICAgIH0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICBUb3BMb2FkZWQ9dHJ1ZTtcclxuICAgICAgICAgICAgfSAgICBcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTsgICAgXHJcbiAgICAgICAgXHJcbiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICBpZiAoZXZlbnQuZGF0YS5ldmVudE5hbWUgPT09ICdpbmJvYXJkY2xzb2VkJykge1xyXG4gICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiTGl2ZUJveF9DbG9zZV9idXR0b25cIikuc3R5bGUgPSBcImRpc3BsYXk6IG5vbmVcIjsgXHJcbiAgICAgICAgICB9XHJcbiAgICAgIH0sIGZhbHNlKTtcclxuXHJcbiAgICAgIGxldCBsaXZlYm94X3Nsb3QgPSBBZFVuaXRQcm9wZXJ0aWVzQ2xhc3NPYmouU2xvdHNbXCJhZHMubGl2ZWJveFwiXTtcclxuICAgICAgaWYgKGxpdmVib3hfc2xvdCAhPSB1bmRlZmluZWQpIHtcclxuICAgICAgICBpZiAod2luZG93LmRjQ0cgPT0gJ2FydGljbGUnKSB7XHJcbiAgICAgICAgICBsaXZlYm94X3Nsb3Quc2V0QXR0cmlidXRlKFxyXG4gICAgICAgICAgICBcInN0eWxlXCIsXHJcbiAgICAgICAgICAgIFwibWFyZ2luLXRvcDogMTE1cHg7IG1hcmdpbi1ib3R0b206IC02NXB4OyBwb3NpdGlvbjogcmVsYXRpdmU7XCIpOyAgXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh3aW5kb3cuZGNDRyA9PSAnbWFpbicgfHwgd2luZG93LmRjQ0cgPT0gJ3N1YicgKSB7XHJcbiAgICAgICAgICBsaXZlYm94X3Nsb3Quc2V0QXR0cmlidXRlKFxyXG4gICAgICAgICAgICBcInN0eWxlXCIsXHJcbiAgICAgICAgICAgIFwibWFyZ2luLXRvcDogMTE1cHg7IG1hcmdpbi1ib3R0b206IC02NXB4OyBwb3NpdGlvbjogcmVsYXRpdmU7XCJcclxuICAgICAgICAgICAgKTsgIFxyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICB9ICAgXHJcbiAgfVxyXG4gIGluYm9yZF9mdW5jKCkge1xyXG4gICAgQWRVbml0RnVuY3Rpb25zQ2xhc3NPYmouZmluZEFsbERpdl9mdW5jKCk7ICAgXHJcbiAgICBJbmZyYXNydWN0dXJlQ2xhc3NPYmouU2xvdFJlbmRlckVuZChmdW5jdGlvbihldmVudCkge1xyXG4gICAgICBsZXQgVG9wTG9hZGVkID0gZmFsc2U7XHJcbiAgICAgICAgaWYgKGV2ZW50LnNsb3QgPT0gQWRVbml0UHJvcGVydGllc0NsYXNzT2JqLkRlZmluZV9zbG90c1tcImFkcy5pbmJvcmRcIl0pIHtcclxuICAgICAgICAgIGlmICghVG9wTG9hZGVkKSB7ICBcclxuICAgICAgICAgICAgaWYoIWV2ZW50LmlzRW1wdHkpIHsgICBcclxuICAgICAgICAgICAgICAgIGlmIChldmVudC5saW5lSXRlbUlkICE9IG51bGwpIHsgXHJcbiAgICAgICAgICAgICAgICAgIHdpbmRvdy5DbG9zZUJveCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Fkcy5pbmJvcmQnKS5pbm5lckhUTUwgPSBcIlwiO1xyXG4gICAgICAgICAgICAgICAgICB9ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHsgXHJcbiAgICAgICAgICAgICAgICAgIGNvbnN0IGJ1dHRvbV93aWR0aCA9IDMwO1xyXG4gICAgICAgICAgICAgICAgICBjb25zdCBidXR0b21faGVpZ2h0ID0gMzA7XHJcbiAgICAgICAgICAgICAgICAgIGNvbnN0IGJ1dHRvbV9VUkwgPSBcIi8vdG90YWxtZWRpYTIueW5ldC5jby5pbC9waWMvMzAtMzAuZ2lmXCI7XHJcbiAgICAgICAgICAgICAgICAgIGNvbnN0IGJ1dHRvbmNsb3NlID0gXHJcbiAgICAgICAgICAgICAgICAgICc8aW1nIHN0eWxlPVwiY3Vyc29yOiBwb2ludGVyXCIgb25jbGljaz1cImphdmFzY3JpcHQ6Q2xvc2VCb3goKTtcIiAgc3JjPVwiJyArXHJcbiAgICAgICAgICAgICAgICAgIGJ1dHRvbV9VUkwgK1xyXG4gICAgICAgICAgICAgICAgICAgICdcIiB3aWR0aD1cIicgK1xyXG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbV93aWR0aCArXHJcbiAgICAgICAgICAgICAgICAgICAgICAncHhcIiBoZWlnaHQ9XCInICtcclxuICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvbV9oZWlnaHQgKyBcclxuICAgICAgICAgICAgICAgICAgICAgICdweFwiIC8+JztcclxuICAgICAgICAgICAgICAgICAgY29uc3QgYnV0b29uRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICAgICAgICAgIGJ1dG9vbkRpdi5pZCA9ICdCaWdsaXZlYm94X0Nsb3NlX2J1dHRvbic7XHJcbiAgICAgICAgICAgICAgICAgIGJ1dG9vbkRpdi5pbm5lckhUTUwgPSBidXR0b25jbG9zZTtcclxuICAgICAgICAgICAgICAgICAgY29uc3QgYWRzZGl2MyA9IHBhcmVudC5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFkcy5pbmJvcmRcIik7XHJcbiAgICAgICAgICAgICAgICAgIGFkc2RpdjMuYXBwZW5kQ2hpbGQoYnV0b29uRGl2KTtcclxuICAgICAgICAgICAgICAgICAgbGV0IGJ1dG9vbmlkID0gcGFyZW50LmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGJ1dG9vbkRpdi5pZCk7XHJcbiAgICAgICAgICAgICAgICAgIGJ1dG9vbmlkLnN0eWxlLnBvc2l0aW9uID0gXCJhYnNvbHV0ZVwiO1xyXG4gICAgICAgICAgICAgICAgICBidXRvb25pZC5zdHlsZS50b3AgPSAwICsgXCJweFwiO1xyXG4gICAgICAgICAgICAgICAgICBidXRvb25pZC5zdHlsZS5yaWdodCA9IDAgKyBcInB4XCI7XHJcbiAgICAgICAgICAgICAgICAgIGJ1dG9vbmlkLnN0eWxlLndpZHRoID0gXCIzMHB4XCI7XHJcbiAgICAgICAgICAgICAgICAgIGJ1dG9vbmlkLnN0eWxlLmhlaWdodCA9IFwiMzBweFwiO1xyXG4gICAgICAgICAgICAgICAgICBidXRvb25pZC5zdHlsZS56SW5kZXggPSAxO1xyXG4gICAgICAgICAgICAgICAgICB9LCAxMDAwKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIFRvcExvYWRlZD10cnVlO1xyXG4gICAgICAgICAgfSAgICBcclxuICAgICAgICB9XHJcbiAgICAgIH0pOyAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgbGV0IGJpZ2xpdmVib3hfc2xvdCA9IEFkVW5pdFByb3BlcnRpZXNDbGFzc09iai5TbG90c1tcImFkcy5pbmJvcmRcIl07XHJcbiAgICBpZiAoYmlnbGl2ZWJveF9zbG90ICE9IHVuZGVmaW5lZCkgeyAgICAgICBcclxuICAgICAgICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuTW9iaWxlVGlja2VyQ29tcG9uZW50YScpKSB7XHJcbiAgICAgICAgICAgIGJpZ2xpdmVib3hfc2xvdC5zZXRBdHRyaWJ1dGUoXCJzdHlsZVwiLCBcIm1hcmdpbjoxMDVweCBhdXRvIC05N3B4IGF1dG87IHBvc2l0aW9uOiByZWxhdGl2ZTtcIik7ICAgICAgICAgICAgXHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBiaWdsaXZlYm94X3Nsb3Quc2V0QXR0cmlidXRlKFwic3R5bGVcIiwgXCJtYXJnaW46NjBweCBhdXRvIC00OHB4IGF1dG87IHBvc2l0aW9uOiByZWxhdGl2ZTtcIik7XHJcbiAgICAgICAgICB9ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgfSAgIFxyXG4gXHJcbiAgfVxyXG4gIGluYm9yZE15bmV0X2Z1bmMoKSB7XHJcbiAgICBBZFVuaXRGdW5jdGlvbnNDbGFzc09iai5maW5kQWxsRGl2X2Z1bmMoKTsgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhZHMuMzIweDQ1MFwiKS5zdHlsZSA9IFwiZGlzcGxheTpub25lO1wiOyAgICAgICAgICAgICAgICAgICBcclxuICAgIGxldCBiaWdsaXZlYm94X3Nsb3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFkcy4zMDB4MTAwLmluYm9yZFwiKTtcclxuICAgIGlmIChiaWdsaXZlYm94X3Nsb3QgIT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgIGJpZ2xpdmVib3hfc2xvdC5zZXRBdHRyaWJ1dGUoXHJcbiAgICAgICAgXCJzdHlsZVwiLFxyXG4gICAgICAgIFwibWFyZ2luOjY1cHggMCAycHggMDsgcG9zaXRpb246IHJlbGF0aXZlOyBkaXNwbGF5OmZsZXg7IGp1c3RpZnktY29udGVudDpjZW50ZXI7IGRpc3BsYXk6LXdlYmtpdC1ib3g7IC13ZWJraXQtYm94LXBhY2s6Y2VudGVyOyBkaXNwbGF5Oi1tcy1mbGV4Ym94OyAtbXMtZmxleC1wYWNrOmNlbnRlcjsgdGV4dC1hbGlnbjpjZW50ZXI7IHdpZHRoOjEwMCU7XCJcclxuICAgICAgICApOyBcclxuICAgICB9ICAgXHJcbiBcclxuICB9XHJcbiAgLy8gaW5ib3JkTXluZXRCaWdfZnVuYygpIHtcclxuICAvLyAgIEFkVW5pdEZ1bmN0aW9uc0NsYXNzT2JqLmZpbmRBbGxEaXZfZnVuYygpOyAgIFxyXG4gIC8vICAgSW5mcmFzcnVjdHVyZUNsYXNzT2JqLlNsb3RSZW5kZXJFbmQoZnVuY3Rpb24oZXZlbnQpIHtcclxuICAvLyAgICAgbGV0IFRvcExvYWRlZCA9IGZhbHNlO1xyXG4gIC8vICAgICAgIGlmIChldmVudC5zbG90ID09IEFkVW5pdFByb3BlcnRpZXNDbGFzc09iai5EZWZpbmVfc2xvdHNbXCJhZHMuMzIweDQ1MFwiXSkge1xyXG4gIC8vICAgICAgICAgaWYgKCFUb3BMb2FkZWQpIHsgIFxyXG4gIC8vICAgICAgICAgICBpZighZXZlbnQuaXNFbXB0eSkgeyAgIFxyXG4gIC8vICAgICAgICAgICAgICAgd2luZG93LkNsb3NlQm94ID0gZnVuY3Rpb24gKCkge1xyXG4gIC8vICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFkcy4zMjB4NDUwXCIpLnN0eWxlID0gXCJkaXNwbGF5Om5vbmU7XCI7IFxyXG4gIC8vICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWRzLjMyMHg0NTAnKS5pbm5lckhUTUwgPSBcIlwiO1xyXG4gIC8vICAgICAgICAgICAgICAgIEFkVW5pdEZ1bmN0aW9uc0NsYXNzT2JqLk15bmV0X3JlbmRlclNtYWxsSW5ib3JkKCk7XHJcbiAgLy8gICAgICAgICAgICAgICB9ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAvLyAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7IFxyXG4gIC8vICAgICAgICAgICAgICAgY29uc3QgYnV0dG9tX3dpZHRoID0gMzA7XHJcbiAgLy8gICAgICAgICAgICAgICBjb25zdCBidXR0b21faGVpZ2h0ID0gMzA7XHJcbiAgLy8gICAgICAgICAgICAgICBjb25zdCBidXR0b21fVVJMID0gXCIvL3RvdGFsbWVkaWEyLnluZXQuY28uaWwvcGljLzMwLTMwLmdpZlwiO1xyXG4gIC8vICAgICAgICAgICAgICAgY29uc3QgYnV0dG9uY2xvc2UgPSBcclxuICAvLyAgICAgICAgICAgICAgICc8aW1nIHN0eWxlPVwiY3Vyc29yOiBwb2ludGVyXCIgb25jbGljaz1cImphdmFzY3JpcHQ6Q2xvc2VCb3goKTtcIiAgc3JjPVwiJyArXHJcbiAgLy8gICAgICAgICAgICAgICAgYnV0dG9tX1VSTCArXHJcbiAgLy8gICAgICAgICAgICAgICAgICdcIiB3aWR0aD1cIicgK1xyXG4gIC8vICAgICAgICAgICAgICAgICAgYnV0dG9tX3dpZHRoICtcclxuICAvLyAgICAgICAgICAgICAgICAgICAncHhcIiBoZWlnaHQ9XCInICtcclxuICAvLyAgICAgICAgICAgICAgICAgICAgYnV0dG9tX2hlaWdodCArIFxyXG4gIC8vICAgICAgICAgICAgICAgICAgICAncHhcIiAvPic7XHJcbiAgLy8gICAgICAgICAgICAgICBjb25zdCBidXRvb25EaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAvLyAgICAgICAgICAgICAgIGJ1dG9vbkRpdi5pZCA9ICdCaWdsaXZlYm94X0Nsb3NlX2J1dHRvbic7XHJcbiAgLy8gICAgICAgICAgICAgICBidXRvb25EaXYuaW5uZXJIVE1MID0gYnV0dG9uY2xvc2U7XHJcbiAgLy8gICAgICAgICAgICAgICBjb25zdCBhZHNkaXYzID0gcGFyZW50LmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYWRzLjMyMHg0NTBcIik7XHJcbiAgLy8gICAgICAgICAgICAgICBhZHNkaXYzLmFwcGVuZENoaWxkKGJ1dG9vbkRpdik7XHJcbiAgLy8gICAgICAgICAgICAgICBsZXQgYnV0b29uaWQgPSBwYXJlbnQuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYnV0b29uRGl2LmlkKTtcclxuICAvLyAgICAgICAgICAgICAgIGJ1dG9vbmlkLnN0eWxlLnBvc2l0aW9uID0gXCJhYnNvbHV0ZVwiO1xyXG4gIC8vICAgICAgICAgICAgICAgYnV0b29uaWQuc3R5bGUudG9wID0gMCArIFwicHhcIjtcclxuICAvLyAgICAgICAgICAgICAgIGJ1dG9vbmlkLnN0eWxlLnJpZ2h0ID0gMCArIFwicHhcIjtcclxuICAvLyAgICAgICAgICAgICAgIGJ1dG9vbmlkLnN0eWxlLndpZHRoID0gXCIzMHB4XCI7XHJcbiAgLy8gICAgICAgICAgICAgICBidXRvb25pZC5zdHlsZS5oZWlnaHQgPSBcIjMwcHhcIjtcclxuICAvLyAgICAgICAgICAgICAgIGJ1dG9vbmlkLnN0eWxlLnpJbmRleCA9IDE7XHJcbiAgLy8gICAgICAgICAgICAgICB9LCAxMDAwKTsgXHJcbiAgLy8gICAgICAgICAgICAgfSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gIC8vICAgICAgICAgICBUb3BMb2FkZWQ9dHJ1ZTtcclxuICAvLyAgICAgICAgIH0gICAgXHJcbiAgLy8gICAgICAgfVxyXG4gIC8vICAgICB9KTsgXHJcblxyXG4gIC8vICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gIC8vICAgICAgIGlmIChldmVudC5kYXRhLmV2ZW50TmFtZSA9PT0gJ2luYm9hcmRjbHNvZWQnKSB7XHJcbiAgLy8gICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiQmlnbGl2ZWJveF9DbG9zZV9idXR0b25cIikuc3R5bGUgPSBcImRpc3BsYXk6IG5vbmVcIjsgXHJcbiAgLy8gICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYWRzLjMyMHg0NTBcIikuc3R5bGUgPSBcImRpc3BsYXk6bm9uZTtcIjsgXHJcbiAgLy8gICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhZHMuMzIweDQ1MCcpLmlubmVySFRNTCA9IFwiXCI7XHJcbiAgLy8gICAgICAgICAgIEFkVW5pdEZ1bmN0aW9uc0NsYXNzT2JqLk15bmV0X3JlbmRlclNtYWxsSW5ib3JkKCk7ICAgICAgICAgICAgICBcclxuICAvLyAgICAgICB9XHJcbiAgLy8gICAgfSwgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAvLyAgIGxldCBiaWdsaXZlYm94X3Nsb3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFkcy4zMjB4NDUwXCIpO1xyXG4gIC8vICAgaWYgKGJpZ2xpdmVib3hfc2xvdCAhPSB1bmRlZmluZWQpIHtcclxuICAvLyAgICAgYmlnbGl2ZWJveF9zbG90LnNldEF0dHJpYnV0ZShcclxuICAvLyAgICAgICBcInN0eWxlXCIsXHJcbiAgLy8gICAgICAgXCJtYXJnaW46NjVweCAwIC0ycHggMDsgcG9zaXRpb246IHJlbGF0aXZlO2Rpc3BsYXk6ZmxleDtqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyO2Rpc3BsYXk6LXdlYmtpdC1ib3g7LXdlYmtpdC1ib3gtcGFjazpjZW50ZXI7ZGlzcGxheTotbXMtZmxleGJveDstbXMtZmxleC1wYWNrOmNlbnRlcjt0ZXh0LWFsaWduOmNlbnRlcjt3aWR0aDoxMDAlO1wiXHJcbiAgLy8gICAgICAgKTsgXHJcbiAgLy8gICAgfSAgIFxyXG4gXHJcbiAgLy8gfVxyXG4gIFluZXRfbGl2ZWJveF9mdW5jKCkge1xyXG4gICAgbGV0IGxpdmVib3hfc2xvdCA9IFwiXCI7XHJcbiAgICBpZiAod2luZG93LnluZXRfcmVzcG9uc2l2ZV9zaXRlcyB8fCAod2luZG93LmRjUGF0aC5pbmNsdWRlcyhcIjM0NTYuTWFnYXppbmVcIikgJiYgQWRVbml0RnVuY3Rpb25zQ2xhc3NPYmoubmV3TWVkaWEgPT0gXCJUcnVlXCIpKSB7XHJcbiAgICAgIGxpdmVib3hfc2xvdCA9IFwiYWRzLmluYm9hcmRcIjtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGlmIChBZFVuaXRGdW5jdGlvbnNDbGFzc09iai5nZXREZXZpY2VfZnVuYygpID09IFwiQW5kcm9pZFwiKSB7XHRcclxuICAgICAgICBsaXZlYm94X3Nsb3QgPSBcImFkcy55bmV0X21vYmlsZXdlYl9hbmRyb2lkX2xpdmVib3hcIjtcdFx0XHRcdFx0XHRcdFxyXG4gICAgICB9IGVsc2UgaWYgKEFkVW5pdEZ1bmN0aW9uc0NsYXNzT2JqLmdldERldmljZV9mdW5jKCkgPT0gXCJpUGhvbmVcIikge1x0XHJcbiAgICAgICAgbGl2ZWJveF9zbG90ID0gXCJhZHMueW5ldF9tb2JpbGV3ZWJfaXBob25lX2xpdmVib3hcIjtcdFx0XHRcdFx0XHJcbiAgICAgIH0gIFxyXG4gICAgfVxyXG4gICAgICAgIFxyXG4gICAgQWRVbml0RnVuY3Rpb25zQ2xhc3NPYmouZmluZEFsbERpdl9mdW5jKCk7ICBcclxuICAgIFxyXG5cclxuICAgIEluZnJhc3J1Y3R1cmVDbGFzc09iai5TbG90UmVuZGVyRW5kKGZ1bmN0aW9uKGV2ZW50KSB7XHJcbiAgICAgIGxldCBsaXZlYm94X2xvYWRlZCA9IGZhbHNlO1xyXG4gICAgICAgIGlmIChldmVudC5zbG90ID09IEFkVW5pdFByb3BlcnRpZXNDbGFzc09iai5EZWZpbmVfc2xvdHNbbGl2ZWJveF9zbG90XSkge1xyXG4gICAgICAgICAgaWYgKCFsaXZlYm94X2xvYWRlZCkgeyAgXHJcbiAgICAgICAgICAgIGlmKCFldmVudC5pc0VtcHR5KSB7ICAgXHJcbiAgICAgICAgICAgICAgICB3aW5kb3cuQ2xvc2VCb3ggPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQobGl2ZWJveF9zbG90KS5pbm5lckhUTUwgPSBcIlwiO1xyXG4gICAgICAgICAgICAgICAgfSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgeyBcclxuICAgICAgICAgICAgICAgIGNvbnN0IGJ1dHRvbV93aWR0aCA9IDMwO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgYnV0dG9tX2hlaWdodCA9IDMwO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgYnV0dG9tX1VSTCA9IFwiLy90b3RhbG1lZGlhMi55bmV0LmNvLmlsL3BpYy8zMC0zMC5naWZcIjtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGJ1dHRvbmNsb3NlID0gXHJcbiAgICAgICAgICAgICAgICAnPGltZyBzdHlsZT1cImN1cnNvcjogcG9pbnRlclwiIG9uY2xpY2s9XCJqYXZhc2NyaXB0OkNsb3NlQm94KCk7XCIgIHNyYz1cIicgK1xyXG4gICAgICAgICAgICAgICAgIGJ1dHRvbV9VUkwgK1xyXG4gICAgICAgICAgICAgICAgICAnXCIgd2lkdGg9XCInICtcclxuICAgICAgICAgICAgICAgICAgIGJ1dHRvbV93aWR0aCArXHJcbiAgICAgICAgICAgICAgICAgICAgJ3B4XCIgaGVpZ2h0PVwiJyArXHJcbiAgICAgICAgICAgICAgICAgICAgIGJ1dHRvbV9oZWlnaHQgKyBcclxuICAgICAgICAgICAgICAgICAgICAgJ3B4XCIgLz4nO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgYnV0b29uRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICAgICAgICBidXRvb25EaXYuaWQgPSAnTGl2ZUJveF9DbG9zZV9idXR0b24nO1xyXG4gICAgICAgICAgICAgICAgYnV0b29uRGl2LmlubmVySFRNTCA9IGJ1dHRvbmNsb3NlO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgYWRzZGl2MyA9IHBhcmVudC5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChsaXZlYm94X3Nsb3QpO1xyXG4gICAgICAgICAgICAgICAgYWRzZGl2My5hcHBlbmRDaGlsZChidXRvb25EaXYpO1xyXG4gICAgICAgICAgICAgICAgbGV0IGJ1dG9vbmlkID0gcGFyZW50LmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGJ1dG9vbkRpdi5pZCk7XHJcbiAgICAgICAgICAgICAgICBidXRvb25pZC5zdHlsZS5wb3NpdGlvbiA9IFwiYWJzb2x1dGVcIjtcclxuICAgICAgICAgICAgICAgIGJ1dG9vbmlkLnN0eWxlLnRvcCA9IDAgKyBcInB4XCI7XHJcbiAgICAgICAgICAgICAgICBidXRvb25pZC5zdHlsZS5yaWdodCA9IDAgKyBcInB4XCI7XHJcbiAgICAgICAgICAgICAgICBidXRvb25pZC5zdHlsZS53aWR0aCA9IFwiMzBweFwiO1xyXG4gICAgICAgICAgICAgICAgYnV0b29uaWQuc3R5bGUuaGVpZ2h0ID0gXCIzMHB4XCI7XHJcbiAgICAgICAgICAgICAgICBidXRvb25pZC5zdHlsZS56SW5kZXggPSAxO1xyXG4gICAgICAgICAgICAgICAgfSwgMTAwMCk7IFxyXG4gICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgfSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgIGxpdmVib3hfbG9hZGVkPXRydWU7XHJcbiAgICAgICAgICB9ICAgIFxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTsgXHJcblxyXG4gICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgIGlmIChldmVudC5kYXRhLmV2ZW50TmFtZSA9PT0gJ2luYm9hcmRjbHNvZWQnKSB7XHJcbiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiTGl2ZUJveF9DbG9zZV9idXR0b25cIikuc3R5bGUgPSBcImRpc3BsYXk6IG5vbmVcIjsgIFxyXG4gICAgICAgIH1cclxuICAgICB9LCBmYWxzZSk7ICAgICAgICAgICAgICAgICBcclxuXHJcblxyXG4gICAgbGV0IGJpZ2xpdmVib3hfc2xvdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGxpdmVib3hfc2xvdCk7XHJcbiAgICBpZiAoYmlnbGl2ZWJveF9zbG90ICE9IHVuZGVmaW5lZCkge1xyXG4gICAgICBiaWdsaXZlYm94X3Nsb3Quc2V0QXR0cmlidXRlKFxyXG4gICAgICAgIFwic3R5bGVcIixcclxuICAgICAgICBcIm1hcmdpbjowIGF1dG87IHBvc2l0aW9uOiByZWxhdGl2ZTsgZGlzcGxheTpmbGV4OyBqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyOyBkaXNwbGF5Oi13ZWJraXQtYm94OyAtd2Via2l0LWJveC1wYWNrOmNlbnRlcjsgZGlzcGxheTotbXMtZmxleGJveDsgLW1zLWZsZXgtcGFjazpjZW50ZXI7IHRleHQtYWxpZ246Y2VudGVyOyB3aWR0aDoxMDAlO1wiXHJcbiAgICAgICAgKTsgXHJcbiAgICAgfSAgIFxyXG4gXHJcbiAgfVxyXG4gIFluZXRfYmlnbGl2ZWJveF9mdW5jKCkge1xyXG4gICAgQWRVbml0RnVuY3Rpb25zQ2xhc3NPYmouZmluZEFsbERpdl9mdW5jKCk7XHJcbiAgICBsZXQgYmlnbGl2ZWJveFNsb3QgPSBcIlwiO1xyXG4gICAgICBpZiAod2luZG93LnluZXRfcmVzcG9uc2l2ZV9zaXRlcyB8fCAod2luZG93LmRjUGF0aC5pbmNsdWRlcyhcIjM0NTYuTWFnYXppbmVcIikgJiYgQWRVbml0RnVuY3Rpb25zQ2xhc3NPYmoubmV3TWVkaWEgPT0gXCJUcnVlXCIpKSB7XHJcbiAgICAgICAgYmlnbGl2ZWJveFNsb3QgPSBcImFkcy5iaWdsaXZlYm94XCI7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgaWYgKEFkVW5pdEZ1bmN0aW9uc0NsYXNzT2JqLmdldERldmljZV9mdW5jKCkgPT0gXCJBbmRyb2lkXCIpIHtcclxuICAgICAgICAgIGJpZ2xpdmVib3hTbG90ID0gXCJhZHMueW5ldF9tb2JpbGV3ZWJfYW5kcm9pZF9wbmltaV9iaWdsaXZlQm94XCI7XHRcdFx0XHRcdFx0XHRcclxuICAgICAgICB9IGVsc2UgaWYgKEFkVW5pdEZ1bmN0aW9uc0NsYXNzT2JqLmdldERldmljZV9mdW5jKCkgPT0gXCJpUGhvbmVcIikge1xyXG4gICAgICAgICAgYmlnbGl2ZWJveFNsb3QgPSBcImFkcy55bmV0X21vYmlsZXdlYl9pcGhvbmVfcG5pbWlfYmlnbGl2ZUJveFwiO1x0XHRcdFx0XHRcclxuICAgICAgICB9ICAgXHJcbiAgICAgIH1cclxuICAgICAgICAgICAgICBcclxuICAgIEluZnJhc3J1Y3R1cmVDbGFzc09iai5TbG90UmVuZGVyRW5kKGZ1bmN0aW9uKGV2ZW50KSB7XHJcbiAgICAgIGxldCBUb3BMb2FkZWQgPSBmYWxzZTtcclxuICAgICAgICBpZiAoZXZlbnQuc2xvdCA9PSBBZFVuaXRQcm9wZXJ0aWVzQ2xhc3NPYmouRGVmaW5lX3Nsb3RzW2JpZ2xpdmVib3hTbG90XSkge1xyXG4gICAgICAgICAgaWYgKCFUb3BMb2FkZWQpIHsgIFxyXG4gICAgICAgICAgICBpZighZXZlbnQuaXNFbXB0eSkgeyAgIFxyXG4gICAgICAgICAgICAgICAgd2luZG93LkNsb3NlQm94ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGJpZ2xpdmVib3hTbG90KS5pbm5lckhUTUwgPSBcIlwiO1xyXG4gICAgICAgICAgICAgICAgIEFkVW5pdEZ1bmN0aW9uc0NsYXNzT2JqLlluZXRfcmVuZGVyU21hbGxJbmJvcmQoKTtcclxuICAgICAgICAgICAgICAgIH0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHsgXHJcbiAgICAgICAgICAgICAgICBjb25zdCBidXR0b21fd2lkdGggPSAzMDtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGJ1dHRvbV9oZWlnaHQgPSAzMDtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGJ1dHRvbV9VUkwgPSBcIi8vdG90YWxtZWRpYTIueW5ldC5jby5pbC9waWMvMzAtMzAuZ2lmXCI7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBidXR0b25jbG9zZSA9IFxyXG4gICAgICAgICAgICAgICAgJzxpbWcgc3R5bGU9XCJjdXJzb3I6IHBvaW50ZXJcIiBvbmNsaWNrPVwiamF2YXNjcmlwdDpDbG9zZUJveCgpO1wiICBzcmM9XCInICtcclxuICAgICAgICAgICAgICAgICBidXR0b21fVVJMICtcclxuICAgICAgICAgICAgICAgICAgJ1wiIHdpZHRoPVwiJyArXHJcbiAgICAgICAgICAgICAgICAgICBidXR0b21fd2lkdGggK1xyXG4gICAgICAgICAgICAgICAgICAgICdweFwiIGhlaWdodD1cIicgK1xyXG4gICAgICAgICAgICAgICAgICAgICBidXR0b21faGVpZ2h0ICsgXHJcbiAgICAgICAgICAgICAgICAgICAgICdweFwiIC8+JztcclxuICAgICAgICAgICAgICAgIGNvbnN0IGJ1dG9vbkRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICAgICAgYnV0b29uRGl2LmlkID0gJ0JpZ2xpdmVib3hfQ2xvc2VfYnV0dG9uJztcclxuICAgICAgICAgICAgICAgIGJ1dG9vbkRpdi5pbm5lckhUTUwgPSBidXR0b25jbG9zZTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGFkc2RpdjMgPSBwYXJlbnQuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYmlnbGl2ZWJveFNsb3QpO1xyXG4gICAgICAgICAgICAgICAgYWRzZGl2My5hcHBlbmRDaGlsZChidXRvb25EaXYpO1xyXG4gICAgICAgICAgICAgICAgbGV0IGJ1dG9vbmlkID0gcGFyZW50LmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGJ1dG9vbkRpdi5pZCk7XHJcbiAgICAgICAgICAgICAgICBidXRvb25pZC5zdHlsZS5wb3NpdGlvbiA9IFwiYWJzb2x1dGVcIjtcclxuICAgICAgICAgICAgICAgIGJ1dG9vbmlkLnN0eWxlLnRvcCA9IDAgKyBcInB4XCI7XHJcbiAgICAgICAgICAgICAgICBidXRvb25pZC5zdHlsZS5yaWdodCA9IDAgKyBcInB4XCI7XHJcbiAgICAgICAgICAgICAgICBidXRvb25pZC5zdHlsZS53aWR0aCA9IFwiMzBweFwiO1xyXG4gICAgICAgICAgICAgICAgYnV0b29uaWQuc3R5bGUuaGVpZ2h0ID0gXCIzMHB4XCI7XHJcbiAgICAgICAgICAgICAgICBidXRvb25pZC5zdHlsZS56SW5kZXggPSAxO1xyXG4gICAgICAgICAgICAgICAgfSwgMTAwMCk7XHJcbiAgICAgICAgICAgICAgfSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBUb3BMb2FkZWQ9dHJ1ZTtcclxuICAgICAgICAgIH0gICAgXHJcbiAgICAgICAgfVxyXG4gICAgICB9KTsgXHJcblxyXG4gICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgIGlmIChldmVudC5kYXRhLmV2ZW50TmFtZSA9PT0gJ2luYm9hcmRjbHNvZWQnKSB7XHJcbiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiQmlnbGl2ZWJveF9DbG9zZV9idXR0b25cIikuc3R5bGUgPSBcImRpc3BsYXk6IG5vbmVcIjsgXHJcbiAgICAgICAgICAgIEFkVW5pdEZ1bmN0aW9uc0NsYXNzT2JqLlluZXRfcmVuZGVyU21hbGxJbmJvcmQoKTsgIFxyXG4gICAgICAgIH1cclxuICAgICB9LCBmYWxzZSk7ICAgICAgICAgIFxyXG5cclxuICAgIGxldCBiaWdsaXZlYm94X3Nsb3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChiaWdsaXZlYm94U2xvdCk7XHJcbiAgICBpZiAoYmlnbGl2ZWJveF9zbG90ICE9IHVuZGVmaW5lZCkge1xyXG4gICAgICBiaWdsaXZlYm94X3Nsb3Quc2V0QXR0cmlidXRlKFxyXG4gICAgICAgIFwic3R5bGVcIixcclxuICAgICAgICBcIm1hcmdpbjowIGF1dG87IHBvc2l0aW9uOiByZWxhdGl2ZTtkaXNwbGF5OmZsZXg7anVzdGlmeS1jb250ZW50OmNlbnRlcjtkaXNwbGF5Oi13ZWJraXQtYm94Oy13ZWJraXQtYm94LXBhY2s6Y2VudGVyO2Rpc3BsYXk6LW1zLWZsZXhib3g7LW1zLWZsZXgtcGFjazpjZW50ZXI7dGV4dC1hbGlnbjpjZW50ZXI7d2lkdGg6MTAwJTtcIlxyXG4gICAgICAgICk7IFxyXG4gICAgIH0gICBcclxuIFxyXG4gIH1cclxuICBJbnRlcnN0aXRpYWxfcmVzcG9uc2l2ZV9mdW5jKCkge1xyXG4gICAgXHJcbiAgICBBZFVuaXRGdW5jdGlvbnNDbGFzc09iai5maW5kQWxsRGl2X2Z1bmMoKTsgIFxyXG4gICAgXHJcbiAgICBJbmZyYXNydWN0dXJlQ2xhc3NPYmouU2xvdFJlbmRlckVuZChmdW5jdGlvbihldmVudCkge1xyXG4gICAgICBsZXQgSW50ZXJzdGl0aWFsX2xvYWRlZCA9IGZhbHNlO1xyXG4gICAgICAgIGlmIChldmVudC5zbG90ID09IEFkVW5pdFByb3BlcnRpZXNDbGFzc09iai5EZWZpbmVfc2xvdHNbXCJhZHMuaW50ZXJzdGl0aWFsLmlubmVyXCJdKSB7XHJcbiAgICAgICAgICBpZiAoIUludGVyc3RpdGlhbF9sb2FkZWQpIHsgIFxyXG4gICAgICAgICAgICBpZighZXZlbnQuaXNFbXB0eSkgeyAgIFxyXG4gICAgICAgICAgICAgIC8vaWYgKHdpbmRvdy5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImRjTWFhdmFyb25EaXZcIikgPT0gbnVsbCB8fCB3aW5kb3cuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJkY01hYXZhcm9uRGl2XCIpID09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIHdpbmRvdy5jbG9zZVRyYW5zaXRpb25zID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHRyYW5zaXRpb24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFkcy5pbnRlcnN0aXRpYWwuaW5uZXJcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYodHJhbnNpdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgdHJhbnNpdGlvbi5zdHlsZS5oZWlnaHQgPSAnMHB4JztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyB3aW5kb3cuQ2xvc2UgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAvLyAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYWRzLmludGVyc3RpdGlhbC5pbm5lclwiKS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcbiAgICAgICAgICAgICAgICAvLyB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY2xvc2UtYnRuXCIpID09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgd2luZG93LkNsb3NlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vZ29vZ2xldGFnLmNtZC5wdXNoKGZ1bmN0aW9uKCkgeyBnb29nbGV0YWcuZGVzdHJveVNsb3RzKFtBZFVuaXRQcm9wZXJ0aWVzQ2xhc3NPYmouRGVmaW5lX3Nsb3RzW1wiYWRzLmludGVyc3RpdGlhbC5pbm5lclwiXV0pOyB9KTsgXHJcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZGNNYWF2YXJvbkRpdicpLnJlbW92ZSgpO30gY2F0Y2ggKGUpIHt9XHJcbiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhZHMuaW50ZXJzdGl0aWFsLmlubmVyXCIpLnN0eWxlLmhlaWdodCA9ICcwcHgnO1xyXG4gICAgICAgICAgICAgICAgICAgIHRyeSB7ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJDbG9zZV9idG5faW50ZXJzdGl0aWFsXCIpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7fSBjYXRjaCAoZSkge31cclxuICAgICAgICAgICAgICAgICAgfSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7IFxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNsb3NlQnV0dG9uXCIpKSB7IFxyXG4gICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjbG9zZUJ1dHRvblwiKS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImIxMTQyNTMyXCIpKSB7IFxyXG4gICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJiMTE0MjUzMlwiKS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGRpdl9pbnRlcnN0aXRpYWwgPSBwYXJlbnQuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhZHMuaW50ZXJzdGl0aWFsLmlubmVyXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBpbWdfaW50ZXJzdGl0aWFsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImltZ1wiKTtcclxuICAgICAgICAgICAgICAgICAgICBpbWdfaW50ZXJzdGl0aWFsLmlkID0gXCJDbG9zZV9idXR0b25cIjtcclxuICAgICAgICAgICAgICAgICAgICBpbWdfaW50ZXJzdGl0aWFsLnNyYyA9IFwiaHR0cHM6Ly9pbWFnZXMxLnluZXQuY28uaWwvUGljU2VydmVyMy8yMDEzLzEyLzE3LzUwNDQxMzcvMzIweC5wbmdcIjtcclxuICAgICAgICAgICAgICAgICAgICBpbWdfaW50ZXJzdGl0aWFsLnNldEF0dHJpYnV0ZShcIm9uQ2xpY2tcIiwgXCJ3aW5kb3cuQ2xvc2UoKTtcIik7IFxyXG4gICAgICAgICAgICAgICAgICAgIGltZ19pbnRlcnN0aXRpYWwuc2V0QXR0cmlidXRlKFwic3R5bGVcIiwgXCJjdXJzb3I6IHBvaW50ZXI7IHBvc2l0aW9uOiBmaXhlZDsgd2lkdGg6IDEwJTsgdG9wOiAwOyByaWdodDogMDsgei1pbmRleDogOTk5OTk5OTk5OTtcIik7IFxyXG4gICAgICAgICAgICAgICAgICAgIGRpdl9pbnRlcnN0aXRpYWwuYXBwZW5kQ2hpbGQoaW1nX2ludGVyc3RpdGlhbCk7IFxyXG4gICAgICAgICAgICAgICAgICB9LCAzMDApO1xyXG4gICAgICAgICAgICAgICAgfSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7IFxyXG4gICAgICAgICAgICAgICAgLy8gIGNvbnN0IGJ1dHRvbV93aWR0aCA9IDEwO1xyXG4gICAgICAgICAgICAgICAgLy8gIGNvbnN0IGJ1dHRvbV9VUkwgPSBcImh0dHBzOi8vaW1hZ2VzMS55bmV0LmNvLmlsL1BpY1NlcnZlcjMvMjAxMy8xMi8xNy81MDQ0MTM3LzMyMHgucG5nXCI7XHJcbiAgICAgICAgICAgICAgICAvLyAgY29uc3QgYnV0dG9uY2xvc2UgPSBcclxuICAgICAgICAgICAgICAgIC8vICAnPGltZyBpZD1cIkNsb3NlX2J0blwiIHN0eWxlPVwiY3Vyc29yOiBwb2ludGVyOyBwb3NpdGlvbjogZml4ZWQ7IHdpZHRoOiAxMCU7IHRvcDogMDsgcmlnaHQ6IDA7IHotaW5kZXg6IDIxNDc0ODM2NDg7XCIgb25jbGljaz1cImphdmFzY3JpcHQ6Q2xvc2UoKTtcIiAgc3JjPVwiJyArXHJcbiAgICAgICAgICAgICAgICAvLyAgIGJ1dHRvbV9VUkwgK1xyXG4gICAgICAgICAgICAgICAgLy8gICAgJ1wiIHdpZHRoPVwiJyArXHJcbiAgICAgICAgICAgICAgICAvLyAgICAgYnV0dG9tX3dpZHRoICtcclxuICAgICAgICAgICAgICAgIC8vICAgICAgJyVcIiAgLz4nO1xyXG4gICAgICAgICAgICAgICAgLy8gIGNvbnN0IGJ1dG9vbkRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICAgICAgLy8gIGJ1dG9vbkRpdi5pZCA9ICdDbG9zZV9idXR0b24nO1xyXG4gICAgICAgICAgICAgICAgLy8gIGJ1dG9vbkRpdi5pbm5lckhUTUwgPSBidXR0b25jbG9zZTtcclxuICAgICAgICAgICAgICAgIC8vICBjb25zdCBhZHNkaXYzID0gcGFyZW50LmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYWRzLmludGVyc3RpdGlhbC5pbm5lclwiKTtcclxuICAgICAgICAgICAgICAgIC8vICBhZHNkaXYzLmFwcGVuZENoaWxkKGJ1dG9vbkRpdik7XHJcbiAgICAgICAgICAgICAgICAvLyAgbGV0IGJ1dG9vbmlkID0gcGFyZW50LmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGJ1dG9vbkRpdi5pZCk7XHJcbiAgICAgICAgICAgICAgICAvLyAgYnV0b29uaWQuc3R5bGUucG9zaXRpb24gPSBcImZpeGVkXCI7XHJcbiAgICAgICAgICAgICAgICAvLyAgYnV0b29uaWQuc3R5bGUudG9wID0gMCArIFwicHhcIjtcclxuICAgICAgICAgICAgICAgIC8vICBidXRvb25pZC5zdHlsZS5yaWdodCA9IDAgKyBcInB4XCI7XHJcbiAgICAgICAgICAgICAgICAvLyAgYnV0b29uaWQuc3R5bGUud2lkdGggPSBcIjEwJVwiO1xyXG4gICAgICAgICAgICAgICAgLy8gIGJ1dG9vbmlkLnN0eWxlLnpJbmRleCA9IDIxNDc0ODM2NDg7XHJcbiAgICAgICAgICAgICAgICAvLyAgfSwgMTAwMCk7XHJcbiAgICAgICAgICAgICAgLy99XHJcbiBcclxuICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIH0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICBJbnRlcnN0aXRpYWxfbG9hZGVkPXRydWU7XHJcbiAgICAgICAgICB9ICAgIFxyXG4gICAgICAgIH0gXHJcbiAgICAgIH0pOyAgICAgICAgICAgICAgICAgXHJcbiAgfVxyXG4gIHBwbHVzX3N0cmlwcygpIHtcclxuICAgIFxyXG4gICAgQWRVbml0RnVuY3Rpb25zQ2xhc3NPYmouZmluZEFsbERpdl9mdW5jKCk7ICBcclxuXHJcbiAgICAgICAgICBsZXQgc3RyaXBzX3BwbHVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnZGl2W2lkXj1cImFkcy5zdHJpcC5tYXJrZXRpbmdcIl0nKTtcclxuICAgICAgICAgIHN0cmlwc19wcGx1cy5mb3JFYWNoKGZ1bmN0aW9uKHVzZXJJdGVtKSB7XHJcbiAgICAgICAgICBsZXQgdW5pdF9zdHJpcCA9IHVzZXJJdGVtLmlkOyAgICAgICAgICAgICAgICBcclxuICAgICAgICAgIFxyXG4gICAgICAgICAgSW5mcmFzcnVjdHVyZUNsYXNzT2JqLlNsb3RSZW5kZXJFbmQoZnVuY3Rpb24oZXZlbnQpIHsgIFxyXG4gICAgICAgICAgbGV0IFN0cmlwUHBsdXMgPSBmYWxzZTtcclxuICAgICAgICAgIGlmIChldmVudC5zbG90ID09IEFkVW5pdFByb3BlcnRpZXNDbGFzc09iai5EZWZpbmVfc2xvdHNbdW5pdF9zdHJpcF0pIHtcclxuICAgICAgICAgIGxldCBjb250YWluZXJfc3RyaXBzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zbG90Q29udGVudERpdlwiKTsgXHJcbiAgICAgICAgICAgIGlmICghU3RyaXBQcGx1cykge1xyXG4gICAgICAgICAgICAgIGlmICghZXZlbnQuaXNFbXB0eSkgeyAgXHJcbiAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7ICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBzdHJpcFNpemUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh1bml0X3N0cmlwKS5vZmZzZXRIZWlnaHQ7ICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdHJpcFNpemUgPCAyMjYpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBjb250YWluZXJfc3RyaXBzLnN0eWxlLmhlaWdodCA9IHBhcnNlSW50KGNvbnRhaW5lcl9zdHJpcHMub2Zmc2V0SGVpZ2h0IC0gKDIyNiAtIHN0cmlwU2l6ZSkpICsgJ3B4JzsgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgIH0sIDMwMDApOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250YWluZXJfc3RyaXBzLnN0eWxlLmhlaWdodCA9IHBhcnNlSW50KGNvbnRhaW5lcl9zdHJpcHMub2Zmc2V0SGVpZ2h0IC0gMjI2KSArICdweCc7ICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICBTdHJpcFBwbHVzID0gdHJ1ZTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0pOyAgICAgICBcclxuICB9XHJcbn0gLy9lbmQgQWRVbml0QWRkaXRpb25hbFN0eWxlc0NsYXNzXHJcbmV4cG9ydCBkZWZhdWx0IG5ldyBBZFVuaXRBZGRpdGlvbmFsU3R5bGVzQ2xhc3MoKTtcclxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBOzs7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBREE7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUdBO0FBQ0E7QUFBQTtBQUlBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTs7O0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFJQTtBQUNBO0FBQUE7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFBQTtBQUNBO0FBSUE7QUFFQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFRQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBSUE7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBOzs7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBUUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUFBO0FBQ0E7QUFJQTtBQUVBOzs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFRQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBSUE7QUFFQTs7O0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUFDQTtBQUNBO0FBQ0E7QUFEQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./modules/AdUnitAdditionalStylesClass.js\n");

/***/ }),

/***/ "./modules/AdUnitFunctionsClass.js":
/*!*****************************************!*\
  !*** ./modules/AdUnitFunctionsClass.js ***!
  \*****************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/toConsumableArray */ \"./node_modules/@babel/runtime/helpers/toConsumableArray.js\");\n/* harmony import */ var _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/classCallCheck */ \"./node_modules/@babel/runtime/helpers/classCallCheck.js\");\n/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/createClass */ \"./node_modules/@babel/runtime/helpers/createClass.js\");\n/* harmony import */ var _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _AdunitDcPathClass__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./AdunitDcPathClass */ \"./modules/AdunitDcPathClass.js\");\n/* harmony import */ var _AdUnitAdditionalStylesClass__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./AdUnitAdditionalStylesClass */ \"./modules/AdUnitAdditionalStylesClass.js\");\n/* harmony import */ var _AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./AdUnitPropertiesClass */ \"./modules/AdUnitPropertiesClass.js\");\n/* harmony import */ var _AdUnitStylesClass__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./AdUnitStylesClass */ \"./modules/AdUnitStylesClass.js\");\n/* harmony import */ var _AdUnitTemplateFunctionsClass__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./AdUnitTemplateFunctionsClass */ \"./modules/AdUnitTemplateFunctionsClass.js\");\n/* harmony import */ var _CoockiesFunctionClass__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./CoockiesFunctionClass */ \"./modules/CoockiesFunctionClass.js\");\n/* harmony import */ var _InfrastructureClass__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./InfrastructureClass */ \"./modules/InfrastructureClass.js\");\n/* harmony import */ var _MainFanctionClass__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./MainFanctionClass */ \"./modules/MainFanctionClass.js\");\n/* harmony import */ var _AdTruvidScriptClass__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./AdTruvidScriptClass */ \"./modules/AdTruvidScriptClass.js\");\n\n\n\n\n\n\n\n\n\n\n\n\nvar Log = _InfrastructureClass__WEBPACK_IMPORTED_MODULE_9__[\"default\"].Log;\nvar _window = window,\n    googletag = _window.googletag,\n    general_banners_divs = _window.general_banners_divs,\n    general_banners_divs_sizes = _window.general_banners_divs_sizes,\n    console = _window.console;\n\nvar AdUnitFunctionsClass =\n/*#__PURE__*/\nfunction () {\n  function AdUnitFunctionsClass() {\n    _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_1___default()(this, AdUnitFunctionsClass);\n\n    this.browsi_on_gpt = window.browsi_on_gpt;\n    this.newMedia = window.newMedia;\n    this.Ozen_800 = window.newMedia == 'True' ? \"ads.skyscraper\" : \"ads.ozen\";\n    this.Ozen_right = window.newMedia == 'True' ? \"ads.skyscraper\" : \"ads.ozen.right\";\n    this.Ozen_left = window.newMedia == 'True' ? \"ads.skyscraper.left\" : \"ads.ozen_left\";\n    this.Maavaron_slot = window.newMedia == 'True' ? \"ads.interstitial\" : \"ads.maavaron\";\n    this.newspaper = window.newMedia == 'True' ? \"ads.top.promo\" : \"ads.newspaper\";\n    this.Ozen = window.newMedia == 'True' ? \"ads.skyscraper\" : \"ads.ozen\";\n    this.Ozen_left_VN = window.newMedia == 'True' ? \"ads.skyscraper.left\" : \"ads.ozen.left\";\n    this.Maavaron_mobile_VN = window.newMedia == 'True' ? \"ads.interstitial.1\" : \"ads.transition\";\n    this.box = window.newMedia == 'True' ? \"ads.box.3\" : \"ads.300x250.3\";\n    this.sticky = window.newMedia == 'True' ? \"ads.banner\" : \"ads.sticky\";\n    this.biglivebox = window.newMedia == 'True' ? \"ads.biglivebox\" : \"ads.mw.biglivebox\";\n    this.Maavaron_mobile_xnt = window.newMedia == 'True' && window.dcSite == \"xnt\" ? \"ads.interstitial.1\" : \"ads.transitial.1\";\n    this.newspaper_xnt = window.newMedia == 'True' && window.dcSite == \"xnt\" ? \"ads.top.promo\" : \"ads.top.2\";\n    this.top_middle_xnt = window.newMedia == 'True' && window.dcSite == \"xnt\" ? \"ads.top_middle\" : \"ads.970x90.2\";\n    this.parent_category = window.ParentCategory;\n    this.platform_path = window.innerWidth >= \"767\" ? \"/desktop/\" : \"/mobileweb/\";\n    this.dccg = window.dcCG;\n    this.maxdcpath_level = 2;\n    this.new_dcPath = \"\";\n    this.dcPath = window.dcPath;\n    this.dcSite = window.dcSite;\n    this.video = window.video;\n    this.truvid_mobile = window.show_truvid_mobile;\n    this.truvid_desktop = window.show_truvid_desktop;\n    this.NetworkNumber = \"6870\";\n    this.dcTags = window.dcTags;\n    this.innerWidth = window.innerWidth;\n    this.counter_biglivebox = 1;\n    this.counter_livebox = 1;\n    this.showMaaavaronSticky = this.getUrlVars_func(\"IsApp\") == \"true\" && !window.dcPath.includes(\"PnaiPlus\") ? 1 : 0;\n\n    if (_InfrastructureClass__WEBPACK_IMPORTED_MODULE_9__[\"default\"].Site == \"is_yns_ynv\") {\n      this.len = dcPatchArray.length < this.maxdcpath_level ? dcPatchArray.length : this.maxdcpath_level; //this.au = AddAds.substring(4);\n\n      this.temp = dcPatchArray[0].indexOf(\".\");\n      this.new_dcPath = dcPatchArray[0].substring(this.temp);\n      var dcPatchArray = this.dcPath.split(\"-\");\n    } //this.dcGetNextView_func(CoockiesFunctionClassObj.viewCoockies_func())\n\n\n    this._EP = \"\";\n    this.jsonObj = {};\n  } //end constructor\n  //Browsi in house\n\n\n  _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_2___default()(AdUnitFunctionsClass, [{\n    key: \"add_Browsi_inhouse\",\n    value: function add_Browsi_inhouse(site) {\n      var all_slots = document.querySelectorAll(\"[id^='ads.inread']\");\n\n      if (all_slots.length >= 1) {\n        window.inreads = all_slots.length;\n\n        for (var inread_i = 1; inread_i <= all_slots.length; inread_i++) {\n          if (_AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].Slots[\"ads.inread.\" + inread_i]) {\n            if (site == \"ynews\" || site == \"ynews_responsive\") {\n              this.defineSlotsYns_func(\"ads.inread.\" + inread_i, [['fluid'], [1, 1], [300, 250], [300, 300], [336, 280], [468, 60], [728, 90]]);\n            } else {\n              this.defineSlots_func(\"ads.inread.\" + inread_i, [['fluid'], [1, 1], [300, 250], [300, 300], [336, 280], [468, 60], [728, 90]]);\n            }\n          }\n        }\n\n        _InfrastructureClass__WEBPACK_IMPORTED_MODULE_9__[\"default\"].SlotRenderEnd(function (event) {\n          var slot_id = event.slot.getSlotElementId();\n          var BoxLoaded = false;\n          var browsi_banners = [];\n\n          for (var bbrowsi_i = 1; bbrowsi_i <= all_slots.length; bbrowsi_i++) {\n            browsi_banners.push(\"ads.inread.\" + bbrowsi_i);\n          }\n\n          var browsi_banner = browsi_banners.filter(function (x) {\n            return x.includes(slot_id);\n          }) == slot_id ? slot_id : false;\n\n          if (browsi_banner && event.slot == _AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].Define_slots[browsi_banner]) {\n            if (!BoxLoaded) {\n              if (event.isEmpty) {\n                var banner_ = document.getElementById(browsi_banner);\n                var get_banner = banner_.children[0].children[0];\n                var get_height = get_banner ? get_banner.clientHeight : 0;\n\n                if (get_height < 1) {\n                  var closest_div = banner_.closest(\".articleBodyInreadWrapper\");\n                  closest_div.setAttribute(\"style\", \"min-height: 0; height: 0; transition: min-height 0.5s\");\n                }\n              }\n\n              BoxLoaded = true;\n            }\n          }\n        });\n      }\n    }\n  }, {\n    key: \"Change_promo_and_mivzakon_place\",\n    value: function Change_promo_and_mivzakon_place() {\n      if (window.isMobile1 == false && document.getElementById('ads.mivzakon') && (document.querySelector(\".grid1280\") != null || document.querySelector(\".grid1280\") != undefined || document.querySelector(\".grid1280_2\") != null || document.querySelector(\".grid1280_2\") != undefined)) {\n        if (document.querySelector('.CategoryHeader')) {\n          var container = document.querySelector('.CategoryHeader');\n          var mivzakon_div = document.getElementById('ads.mivzakon');\n          container.prepend(mivzakon_div);\n        }\n      }\n\n      if (window.isMobile1 == false && document.getElementById(\"ads.top.promo\") && (document.querySelector(\".grid1280\") != null || document.querySelector(\".grid1280\") != undefined || document.querySelector(\".grid1280_2\") != null || document.querySelector(\".grid1280_2\") != undefined)) {\n        if (document.getElementById('ads.top')) {\n          var container_top = document.getElementById('ads.top');\n          var promo_div = document.getElementById(\"ads.top.promo\");\n          container_top.parentNode.insertBefore(promo_div, container_top.nextSibling);\n          promo_div.setAttribute(\"style\", \"padding:15px 0px 0px 0px; margin:0 auto; display:flex; justify-content:center; display:-webkit-box; -webkit-box-pack:center; display:-ms-flexbox; -ms-flex-pack:center; text-align:center;\");\n\n          if (document.getElementById(\"ads.top.promo\").getElementsByTagName(\"div\")[0] != undefined) {\n            document.getElementById(\"ads.top.promo\").getElementsByTagName(\"div\")[0].style.textAlign = \"center\";\n            document.getElementById(\"ads.top.promo\").getElementsByTagName(\"div\")[0].style.margin = \"0 auto\";\n          }\n        }\n      }\n    }\n  }, {\n    key: \"AddDivs\",\n    value: function AddDivs() {\n      var banners = {\n        \"ads.doublestripon_desktop.1\": \"ads.doublestripon.1\",\n        \"ads.ivory_desktop.1\": \"ads.ivory.1\",\n        \"ads.586x88.1\": \"ads.strip.channel.1\",\n        \"ads.490x88.1\": \"ads.strip.1\",\n        \"ads.300x600.1\": \"ads.bigbox.1\",\n        \"ads.300x250.1\": \"ads.box.1\",\n        \"ads.300x250.2\": \"ads.box.2\",\n        \"ads.300x250.3\": \"ads.box.3\",\n        \"ads.300x250.4\": \"ads.box.4\",\n        \"ads.980x90.1\": \"ads.bottombanner.1\",\n        \"ads.topstripon_desktop.1\": \"ads.topstripon.1\",\n        \"ads.bottomstripon_desktop.1\": \"ads.bottomstripon.1\",\n        \"ads.rightstripon_desktop.1\": \"ads.rightstripon.1\"\n      };\n\n      function insertAfter(referenceNode, newNode) {\n        referenceNode.parentNode.insertBefore(newNode, referenceNode.nextSibling);\n      }\n\n      for (var k in banners) {\n        if (banners.hasOwnProperty(k)) {\n          if (document.getElementById(k) != null || document.getElementById(k) != undefined) {\n            var div = document.getElementById(k);\n            var el = document.createElement(\"div\");\n            el.id = banners[k];\n            el.setAttribute(\"class\", \"general_banner_ad\");\n            el.setAttribute(\"data-adunit\", banners[k]);\n            el.setAttribute(\"data-old\", div.id);\n            el.style.padding = div.style.padding;\n            insertAfter(div, el);\n            div.remove();\n          }\n        }\n\n        continue;\n      }\n    }\n  }, {\n    key: \"getKeyValues_func\",\n    value: function getKeyValues_func() {\n      //getKeyValues_func function create key value Object.\n      //This object contain all keys that has been used in DFP in aim to display gpt\n      //This function is used from all main scripts that start with 'gpt_scipt_...'\n      var _DY = \"\";\n      var stage = \"\";\n      var platform = \"\";\n\n      if (window.dcSite == \"ynt\" && window.matchMedia && window.matchMedia('only screen and (max-width:768px ) and (orientation: portrait), only screen and (max-width: 900px) and (orientation: landscape)').matches) {\n        if (window.matchMedia('(prefers-color-scheme: dark)').matches) {\n          this.jsonObj[\"Dark_Mode\"] = \"on\";\n        } else {\n          this.jsonObj[\"Dark_Mode\"] = \"off\";\n        }\n      }\n\n      if (location.href.includes(\"qa.\") || location.href.includes(\"de-qa-wcm-cloud.yit.co.il\")) {\n        this.jsonObj[\"env\"] = \"QA\";\n      }\n\n      if (window.dcCG == \"article\") {\n        this.jsonObj[\"article_class\"] = window.dataLayer[0].article_class ? window.dataLayer[0].article_class : \"\";\n      }\n\n      if (\"undefined\" != typeof window.dcForumID && window.dcForumID != null) {\n        this.jsonObj[\"ynfi\"] = window.dcForumID;\n      } else {\n        this.jsonObj[\"ynfi\"] = \"0\";\n      }\n\n      if (\"undefined\" != typeof window.dcKeyword && window.dcKeyword != null) {\n        this.jsonObj[\"dckw\"] = window.dcKeyword;\n      } else {\n        this.jsonObj[\"dckw\"] = \"0\";\n      }\n\n      if (\"undefined\" != typeof window.dcCategory && window.dcCategory != null) {\n        this.jsonObj[\"ngch\"] = window.dcCategory;\n      } else {\n        this.jsonObj[\"ngch\"] = \"0\";\n      }\n\n      if (\"undefined\" != typeof window.dcCategoryID && window.dcCategoryID != null) {\n        this.jsonObj[\"yrca\"] = window.dcCategoryID;\n      } else {\n        this.jsonObj[\"yrca\"] = \"0\";\n      }\n\n      if (\"undefined\" != typeof window.dcTags && window.dcTags != null) {\n        if ((window.dcPath.includes(\"tags\") || window.dcPath.includes(\"Topics\")) && window.dcTags.length == 0) {\n          this.jsonObj[\"dcTag\"] = document.title;\n        } else {\n          this.jsonObj[\"dcTag\"] = window.dcTags;\n        }\n      } else {\n        this.jsonObj[\"dcTag\"] = \"0\";\n      }\n\n      if (\"undefined\" != typeof this.dcPath && this.dcPath != null) {\n        this.jsonObj[\"ynch\"] = this.dcPath;\n      } else {\n        this.jsonObj[\"ynch\"] = \"0\";\n      }\n\n      if (\"undefined\" != typeof this.dcPath && this.dcPath != null) {\n        this.jsonObj[\"dcPath\"] = this.dcPath;\n      } else {\n        this.jsonObj[\"dcPath\"] = \"0\";\n      }\n\n      if (\"undefined\" != typeof window.dcCG && window.dcCG != null) {\n        this.jsonObj[\"dccg\"] = window.dcCG;\n      } else {\n        this.jsonObj[\"dccg\"] = \"0\";\n      }\n\n      if (\"undefined\" != typeof window.dcVideo && window.dcVideo != null) {\n        this.jsonObj[\"ynvc\"] = window.dcVideo;\n      } else {\n        this.jsonObj[\"ynvc\"] = \"0\";\n      }\n\n      if (\"undefined\" != typeof window.dcContentID && window.dcContentID != null) {\n        this.jsonObj[\"yncd\"] = window.dcContentID;\n      } else {\n        this.jsonObj[\"yd\"] = \"0\";\n      }\n\n      this.jsonObj[\"callType\"] = \"GPT\";\n      stage = this.getUrlVars_func(\"dcStage\");\n      if (stage) this.jsonObj[\"ynst\"] = stage;\n      if (stage) this.jsonObj[\"dcStage\"] = stage;\n      platform = window.isMobile1 || window.innerWidth < 768 && window.dcPath.includes(\"PnaiPlus\") ? \"mobile\" : \"desktop\";\n      if (window.dcSite.includes(\"mynet\") && platform) this.jsonObj[\"mynet_platform\"] = platform;\n\n      if (window.dcSite.includes(\"mynet\")) {\n        var Sitestr = window.dcSite;\n        var site_name = Sitestr.substr(5, Sitestr.length);\n        this.jsonObj[\"mynet_cities\"] = site_name;\n      }\n\n      if (\"undefined\" != typeof this.dcPath && this.dcPath.includes(\"3456.Magazine\")) {\n        this.jsonObj[\"blazer\"] = \"blazer\";\n      }\n\n      if (_InfrastructureClass__WEBPACK_IMPORTED_MODULE_9__[\"default\"].Site == \"is_yns\" || _InfrastructureClass__WEBPACK_IMPORTED_MODULE_9__[\"default\"].Site == \"is_xnet\") {\n        _DY = _CoockiesFunctionClass__WEBPACK_IMPORTED_MODULE_8__[\"default\"].readCookie_func(\"TM_dyaud_nchc\");\n      } else {\n        // var _DY = CoockiesFunctionClassObj.readCookie_func('TM_dyaud_nchc')\n        //this.readDY_func(); //RUN DY FUNCTION\n        _DY = localStorage._dy; //GET DATA FROM DY STORED IN LOCALSTORAGE\n      }\n\n      if (_DY) {\n        _DY = _DY.split(\"*\")[0];\n\n        if (_DY.length > 0) {\n          _DY = _DY.split(\".\");\n          this.jsonObj[\"DYA\"] = _DY;\n        }\n      }\n\n      var _EP = this.readExposebox_func();\n\n      if (_EP) {\n        _EP = _EP.split(\"*\")[0];\n\n        if (_EP.length > 0) {\n          _EP = _EP.split(\".\");\n          this.jsonObj[\"Exposebox\"] = _EP;\n        }\n      }\n\n      _EP = _CoockiesFunctionClass__WEBPACK_IMPORTED_MODULE_8__[\"default\"].readCookie_func(\"TM_DCCGroup\");\n\n      if (_EP) {\n        _EP = _EP.split(\"*\")[0];\n\n        if (_EP.length > 0) {\n          _EP = _EP.split(\".\");\n          this.jsonObj[\"DCCGroup\"] = _EP;\n        }\n      }\n\n      this.jsonObj[\"dcsch\"] = \"null\";\n      this.jsonObj[\"dccw\"] = \"\" + \"high_res\" + \"\";\n      this.jsonObj[\"dcsw\"] = \"\" + screen.width + \"\";\n      _CoockiesFunctionClass__WEBPACK_IMPORTED_MODULE_8__[\"default\"].setViewCookies_func(); // old\n\n      if (_InfrastructureClass__WEBPACK_IMPORTED_MODULE_9__[\"default\"].Site == \"is_yns\") {\n        _CoockiesFunctionClass__WEBPACK_IMPORTED_MODULE_8__[\"default\"].viewCoockies_func(); // new\n      } else {\n        this.dcGetNextView_func(_CoockiesFunctionClass__WEBPACK_IMPORTED_MODULE_8__[\"default\"].viewCoockies_func()); // new\n      }\n\n      if (_InfrastructureClass__WEBPACK_IMPORTED_MODULE_9__[\"default\"].Site == \"is_800\" || _InfrastructureClass__WEBPACK_IMPORTED_MODULE_9__[\"default\"].Site == \"is_yns_ynv\" || _InfrastructureClass__WEBPACK_IMPORTED_MODULE_9__[\"default\"].Site == \"is_yns\") {\n        if (\"undefined\" != typeof _AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].DCview && _AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].DCview != null) {\n          if (_AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].DCview <= 5) {\n            this.jsonObj[\"dcunigpt\"] = \"view\" + _AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].DCview;\n          } else {\n            this.jsonObj[\"dcunigpt\"] = \"view\";\n          }\n        }\n      } else {\n        if (\"undefined\" != typeof _AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].DCview && _AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].DCview != null) {\n          if (window.dcCG == \"home\" || window.dcPath == \"2775.Knesset-32472.yuval1280\") {\n            if (_AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].DCview <= 5) {\n              this.jsonObj[\"dcunigpt\"] = \"view\" + _AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].DCview;\n            } else {\n              this.jsonObj[\"dcunigpt\"] = \"view\";\n            }\n          } else {\n            if (_AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].DCview <= 5) {\n              this.jsonObj[\"dcunigpt\"] = \"view\" + _AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].DCview;\n            } else {\n              this.jsonObj[\"dcunigpt\"] = \"view\";\n            }\n          }\n        }\n      }\n\n      this.jsonObj[\"charset\"] = \"UTF-8\"; //this.dfpParam = this.jsonObj;\n    } // end of getKeyValues_func\n\n  }, {\n    key: \"readExposebox_func\",\n    value: function readExposebox_func() {\n      //readExposebox_func call from function getKeyValues_func()\n      //The EXPOSEBOX server uses our function that preserves the submission time of categories from their server.\n      Log(\"readExposebox_func\");\n      var time_now = +new Date();\n\n      if (localStorage._Exposebox_expire != null || localStorage._Exposebox_expire != undefined) {\n        if (time_now > +localStorage._Exposebox_expire) {\n          localStorage._expo = \"\";\n        }\n      }\n\n      if (localStorage._expo != null && localStorage._expo != undefined && localStorage._expo != \"\") {\n        _AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].Expo = localStorage._expo;\n        return _AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].Expo;\n      }\n    }\n  }, {\n    key: \"findAllDiv_func\",\n    value: function findAllDiv_func() {\n      //findAllDiv_func function use many times in all scripts it get all alement for the gpt, it need to run only after the html build.. therefor there is\n      //another function in InfrastructureClass that using await to get all element\n      var elems = _InfrastructureClass__WEBPACK_IMPORTED_MODULE_9__[\"default\"].adsElements;\n\n      for (var i = 0; i < elems.length; i++) {\n        _AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].Slots[elems[i].id] = elems[i];\n      }\n    }\n  }, {\n    key: \"dcGetNextView_func\",\n    value: function dcGetNextView_func(key) {\n      //dcGetNextView_func function get key from the viewCoockies_func and use it to set the DCview (the view)\n      //console.log('dcGetNextView_func')\n      var dcDate = new Date(new Date().getTime() + 10 * 60 * 60 * 1000).getUTCDate();\n      var views = {};\n\n      try {\n        views = JSON.parse(localStorage._dcViews);\n      } catch (e) {\n        views = {};\n        localStorage.removeItem(\"_dcViews\");\n        localStorage.removeItem(\"_dcDate\");\n      }\n\n      if (dcDate != localStorage._dcDate) {\n        localStorage._dcDate = dcDate;\n        views = {};\n      }\n\n      views[key] == undefined ? views[key] = 1 : views[key]++;\n      localStorage._dcViews = JSON.stringify(views);\n      _AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].DCview = views[key];\n\n      if (_AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].DCview > 5) {\n        _AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].DCview = undefined;\n      }\n\n      return _AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].DCview;\n    }\n  }, {\n    key: \"getDcPath_func\",\n    value: function getDcPath_func(dc_path) {\n      // get windows dcPath and return\n      Log(\"getDcPath_func\");\n      var this_path = dc_path;\n      var patch_array = this_path.split(\"-\");\n      var temp_path = patch_array[0].indexOf(\".\");\n      var new_dcPath = patch_array[0].substring(temp_path);\n      return new_dcPath;\n    }\n  }, {\n    key: \"getUrlVars_func\",\n    value: function getUrlVars_func(dcStage_string) {\n      Log(\"getUrlVars_func\");\n      var vars_list = [];\n      var hash_list = [];\n      var hashes = window.location.href.slice(window.location.href.indexOf(\"?\") + 1).split(\"&\");\n      var hashesLen = hashes.length;\n\n      for (var i = 0; i < hashesLen; i++) {\n        hash_list = hashes[i].split(\"=\");\n        vars_list.push(hash_list[0]);\n        vars_list[hash_list[0]] = hash_list[1];\n      }\n\n      if (dcStage_string) {\n        return vars_list[dcStage_string];\n      } else {\n        return vars_list;\n      }\n    }\n  }, {\n    key: \"adUnitCallYnsYnv_func\",\n    value: function adUnitCallYnsYnv_func(AddAds) {\n      //adUnitCallXnet_func call from defineSlots_func\n      //The function create adUnitPath for googletag.defineSlot\n      var ad_unit_path = \"/\";\n\n      var path = __webpack_require__(/*! path */ \"./node_modules/path-browserify/index.js\");\n\n      var dcPatchArray = this.dcPath.split(\"-\");\n      var len = dcPatchArray.length < this.maxdcpath_level ? dcPatchArray.length : this.maxdcpath_level;\n      var au = AddAds.substring(4); //let parentCategory = this.parent_category;\n\n      if (this.newMedia == \"True\") {\n        //if (parentCategory.charAt(0) == \"V\" && parentCategory.charAt(1) != \"V\" || parentCategory != \"Vesti\") {\n        //  parentCategory = parentCategory.slice(1);\n        // }\n        //const main_category = (this.dcPath == \"50.Vesti\" || this.parent_category == \"Vesti\") ? \"/central\" : (\"/\" + parentCategory.toLowerCase());\n        var site = \"vesty\";\n        ad_unit_path = path.join(ad_unit_path, this.NetworkNumber, site + this.platform_path + au + \"/\" + _AdunitDcPathClass__WEBPACK_IMPORTED_MODULE_3__[\"default\"].get(this.dcPath));\n        return ad_unit_path;\n      } else {\n        var _dcPatchArray = this.dcPath.split(\"-\");\n\n        var _len = _dcPatchArray.length < this.maxdcpath_level ? _dcPatchArray.length : this.maxdcpath_level;\n\n        var temp = _dcPatchArray[0].indexOf(\".\");\n\n        var new_dcPath = _dcPatchArray[0].substring(temp);\n\n        if (this.innerWidth >= \"768\") {\n          if (this.dccg == \"main\" || this.dccg == \"article\" || this.dccg == \"sub\") {\n            ad_unit_path = path.join(ad_unit_path, this.NetworkNumber, this.dcSite + \".\" + au);\n\n            for (var i = 0; i < _len; i++) {\n              temp = _dcPatchArray[i].indexOf(\".\");\n              ad_unit_path = path.join(ad_unit_path, this.dcSite + \".\" + au + _dcPatchArray[i].substring(temp));\n            }\n\n            return ad_unit_path;\n          } else {\n            ad_unit_path = path.join(ad_unit_path, this.NetworkNumber, this.dcSite + \".\" + au + new_dcPath);\n            return ad_unit_path;\n          }\n        } else {\n          var mobile_path = \"/ynet_mobile/\";\n\n          if (this.dcSite == \"yns\") {\n            if (this.dccg == \"main\" || this.dccg == \"article\" || this.dccg == \"sub\") {\n              ad_unit_path = path.join(ad_unit_path, this.NetworkNumber + mobile_path + this.dcSite + \".\" + au, \"/\");\n\n              for (var _i = 0; _i < _len; _i++) {\n                temp = _dcPatchArray[_i].indexOf(\".\");\n                ad_unit_path = ad_unit_path + this.dcSite + \".\" + au + _dcPatchArray[_i].substring(temp);\n              }\n\n              return ad_unit_path;\n            } else {\n              ad_unit_path = path.join(ad_unit_path, this.NetworkNumber + mobile_path + this.dcSite + \".\" + au + new_dcPath);\n              return ad_unit_path;\n            }\n          } else if (this.dcSite == \"ynv\") {\n            ad_unit_path = path.join(ad_unit_path, this.NetworkNumber + mobile_path + \"vesti_mobileweb_\" + au);\n            Log(\"PATH VESTI:\" + ad_unit_path);\n            return ad_unit_path;\n          }\n        }\n      }\n    } //end of adUnitCallYnsYnv_func\n\n  }, {\n    key: \"adUnitCall_func\",\n    value: function adUnitCall_func(AddAds) {\n      //adUnitCallXnet_func call from defineSlots_func\n      //The function create adUnitPath for googletag.defineSlot\n      var site = window.dcPath.includes(\"PnaiPlus\") ? \"pplus\" : \"ynet\";\n      var ad_unit_path = \"/\";\n\n      var path = __webpack_require__(/*! path */ \"./node_modules/path-browserify/index.js\");\n\n      var dcPatchArray = this.dcPath.split(\"-\");\n      var len = dcPatchArray.length < this.maxdcpath_level ? dcPatchArray.length : this.maxdcpath_level;\n      var au = AddAds.substring(4);\n      var mobile_path = this.getDevice_func() == \"Android\" ? \"/mobileweb_android/\" : \"/mobileweb_iphone/\";\n\n      if (window.innerWidth <= \"767\" && window.dcPath.includes(\"PnaiPlus\")) {\n        if (au == \"interstitial.inner\" && window.dcPath == '11211.PnaiPlus-1.Home' && (window.performance && window.performance.navigation.type == window.performance.navigation.TYPE_BACK_FORWARD || localStorage.getItem('BACK_HOME_CLICKED'))) {\n          ad_unit_path = path.join(ad_unit_path, this.NetworkNumber, site + mobile_path + \"interstitial.backhome/central\");\n        } else {\n          ad_unit_path = path.join(ad_unit_path, this.NetworkNumber, site + mobile_path + au + \"/\" + _AdunitDcPathClass__WEBPACK_IMPORTED_MODULE_3__[\"default\"].get(this.dcPath));\n        }\n\n        return ad_unit_path;\n      } else if (this.newMedia == 'True') {\n        if (window.innerWidth >= \"767\") {\n          if (this.dccg == \"home\" || window.dcPath == \"2775.Knesset-32472.yuval1280\") {\n            ad_unit_path = path.join(ad_unit_path, this.NetworkNumber, site + this.platform_path + au + \"/central\");\n            return ad_unit_path;\n          } else {\n            if (window.dcPath.includes(\"weather\") || window.dcPath.includes(\"Weather\")) {\n              ad_unit_path = path.join(ad_unit_path, this.NetworkNumber, site + this.platform_path + au + \"/weather\");\n            } else {\n              if ((document.querySelector(\".blogs-auto-feed-widget\") || document.querySelector(\".article-blog-componenta-wrapper\")) && au.includes(\"inread\")) {\n                ad_unit_path = path.join(ad_unit_path, this.NetworkNumber, site + this.platform_path + au + \"/blogs\");\n              } else {\n                ad_unit_path = path.join(ad_unit_path, this.NetworkNumber, site + this.platform_path + au + \"/\" + _AdunitDcPathClass__WEBPACK_IMPORTED_MODULE_3__[\"default\"].get(this.dcPath));\n              }\n            }\n\n            return ad_unit_path;\n          }\n        }\n\n        if (window.innerWidth <= \"767\") {\n          if (window.dcPath.includes(\"weather\") || window.dcPath.includes(\"Weather\")) {\n            ad_unit_path = path.join(ad_unit_path, this.NetworkNumber, site + mobile_path + au + \"/weather\");\n            return ad_unit_path;\n          } else {\n            if (window.ynet_responsive_sites && au == \"interstitial.inner\" && window.dcPath.includes(\"-1.Home\") && window.dcCG != \"article\" && (window.performance && window.performance.navigation.type == window.performance.navigation.TYPE_BACK_FORWARD || localStorage.getItem('BACK_HOME_CLICKED'))) {\n              ad_unit_path = path.join(ad_unit_path, this.NetworkNumber, site + mobile_path + \"interstitial.backhome\" + \"/\" + _AdunitDcPathClass__WEBPACK_IMPORTED_MODULE_3__[\"default\"].get(this.dcPath));\n            } else if ((document.querySelector(\".blogs-auto-feed-widget\") || document.querySelector(\".article-blog-componenta-wrapper\")) && au.includes(\"inread\")) {\n              ad_unit_path = path.join(ad_unit_path, this.NetworkNumber, site + mobile_path + au + \"/blogs\");\n            } else {\n              ad_unit_path = path.join(ad_unit_path, this.NetworkNumber, site + mobile_path + au + \"/\" + _AdunitDcPathClass__WEBPACK_IMPORTED_MODULE_3__[\"default\"].get(this.dcPath));\n            }\n\n            return ad_unit_path;\n          }\n        }\n      } else {\n        //The function create adUnitPath for googletag.defineSlot\n        var _dcPatchArray2 = this.dcPath.split(\"-\");\n\n        var _len2 = _dcPatchArray2.length < this.maxdcpath_level ? _dcPatchArray2.length : this.maxdcpath_level;\n\n        var temp = _dcPatchArray2[0].indexOf(\".\");\n\n        var new_dcPath = _dcPatchArray2[0].substring(temp);\n\n        if (this.innerWidth <= \"767\") {\n          if (window.dcPath.includes(\"3456.Magazine\") || window.dcPath.includes(\"weather\") || window.dcPath.includes(\"Weather\")) {\n            var new_path = \"\";\n            var _mobile_path = \"/ynet_mobile/\";\n            new_path = ad_unit_path + this.NetworkNumber + _mobile_path + au;\n            return new_path;\n          } else {\n            var _new_path = \"\";\n            var device_path = this.getDevice_func() == \"Android\" ? \"mobileweb_android\" : \"mobileweb_iphone\";\n            _new_path = ad_unit_path + this.NetworkNumber + \"/\" + site + \"/\" + device_path + \"/\" + au + \"/\" + this.parent_category.toLowerCase();\n            return _new_path;\n          }\n        } else {\n          if (this.dccg == \"main\" || this.dccg == \"article\" || this.dccg == \"sub\") {\n            ad_unit_path = path.join(ad_unit_path, this.NetworkNumber, this.dcSite + \".\" + au);\n\n            for (var i = 0; i < _len2; i++) {\n              temp = _dcPatchArray2[i].indexOf(\".\");\n              ad_unit_path = path.join(ad_unit_path, this.dcSite + \".\" + au + _dcPatchArray2[i].substring(temp));\n            }\n\n            return ad_unit_path;\n          } else {\n            ad_unit_path = path.join(ad_unit_path, this.NetworkNumber, this.dcSite + \".\" + au + new_dcPath);\n            return ad_unit_path;\n          }\n        }\n      }\n    }\n  }, {\n    key: \"adUnitCallYns_func\",\n    value: function adUnitCallYns_func(AddAds) {\n      //adUnitCallXnet_func call from defineSlots_func\n      //The function create adUnitPath for googletag.defineSlot\n      Log(\"adUnitCallYns_func\");\n      var ad_unit_path = \"/\";\n\n      var path = __webpack_require__(/*! path */ \"./node_modules/path-browserify/index.js\");\n\n      var dcPatchArray = this.dcPath.split(\"-\");\n      var len = dcPatchArray.length < this.maxdcpath_level ? dcPatchArray.length : this.maxdcpath_level;\n      var au = AddAds.substring(4);\n      var network_num = window.dcSite == \"yns\" && window.ads_jmedia == true ? \"22215292831\" : \"6870\";\n\n      if (this.newMedia == \"True\") {\n        var site = \"ynetnews\";\n        ad_unit_path = path.join(ad_unit_path, network_num, site + this.platform_path + au + \"/\" + _AdunitDcPathClass__WEBPACK_IMPORTED_MODULE_3__[\"default\"].get(this.dcPath));\n        return ad_unit_path;\n      } else {\n        var _dcPatchArray3 = this.dcPath.split(\"-\");\n\n        var _len3 = _dcPatchArray3.length < this.maxdcpath_level ? _dcPatchArray3.length : this.maxdcpath_level;\n\n        var temp = _dcPatchArray3[0].indexOf(\".\");\n\n        var new_dcPath = _dcPatchArray3[0].substring(temp);\n\n        if (this.innerWidth >= \"768\") {\n          if (this.dccg == \"main\" || this.dccg == \"article\" || this.dccg == \"sub\") {\n            ad_unit_path = path.join(ad_unit_path, network_num, this.dcSite + \".\" + au);\n\n            for (var i = 0; i < _len3; i++) {\n              temp = _dcPatchArray3[i].indexOf(\".\");\n              ad_unit_path = path.join(ad_unit_path, this.dcSite + \".\" + au + _dcPatchArray3[i].substring(temp));\n            }\n\n            return ad_unit_path;\n          } else {\n            ad_unit_path = path.join(ad_unit_path, this.NetworkNumber, this.dcSite + \".\" + au + new_dcPath);\n            return ad_unit_path;\n          }\n        } else {\n          var mobile_path = \"/ynet_mobile/\";\n\n          if (this.dcSite == \"yns\") {\n            if (this.dccg == \"main\" || this.dccg == \"article\" || this.dccg == \"sub\") {\n              ad_unit_path = path.join(ad_unit_path, this.NetworkNumber + mobile_path + this.dcSite + \".\" + au, \"/\");\n\n              for (var _i2 = 0; _i2 < _len3; _i2++) {\n                temp = _dcPatchArray3[_i2].indexOf(\".\");\n                ad_unit_path = ad_unit_path + this.dcSite + \".\" + au + _dcPatchArray3[_i2].substring(temp);\n              }\n\n              return ad_unit_path;\n            } else {\n              ad_unit_path = path.join(ad_unit_path, this.NetworkNumber + mobile_path + this.dcSite + \".\" + au + new_dcPath);\n              return ad_unit_path;\n            }\n          } else if (this.dcSite == \"ynv\") {\n            ad_unit_path = path.join(ad_unit_path, this.NetworkNumber + mobile_path + \"vesti_mobileweb_\" + au);\n            return ad_unit_path;\n          }\n        }\n      }\n    } //end adUnitCallYns_func\n\n  }, {\n    key: \"adUnitCallYnes_func\",\n    value: function adUnitCallYnes_func(AddAds) {\n      //adUnitCallYnes_func call from defineSlots_func\n      //The function create adUnitPath for googletag.defineSlot\n      Log(\"adUnitCallYnes_func\");\n      var separator = \"/\";\n      var new_path = \"\";\n      var path = \"/espanol/Desktop/\";\n      var au = AddAds.substring(4);\n\n      if (this.innerWidth >= \"768\") {\n        new_path = separator + this.NetworkNumber + path + au;\n        return new_path;\n      } else {\n        var mobile_path = \"/espanol/mobile_web/\";\n        new_path = separator + this.NetworkNumber + mobile_path + au;\n        return new_path;\n      }\n    } //end adUnitCallYnes_func\n\n  }, {\n    key: \"adUnitCallMynet_func\",\n    value: function adUnitCallMynet_func(AddAds) {\n      //adUnitCallMynet_func call from defineSlots_func\n      //The function create adUnitPath for googletag.defineSlot\n      Log(\"adUnitCallMynet_func\");\n      var new_path = \"\";\n      var path = \"/mynet/\";\n      var au = AddAds.substring(4);\n      new_path = \"/\" + this.NetworkNumber + path + au;\n      return new_path;\n    } //end adUnitCallMynet_func\n\n  }, {\n    key: \"adUnitCallXnet_func\",\n    value: function adUnitCallXnet_func(AddAds) {\n      Log('adUnitCallXnet_func'); //adUnitCallXnet_func call from defineSlots_func\n      //The function create adUnitPath for googletag.defineSlot\n\n      var ad_unit_path = \"/\";\n\n      var path = __webpack_require__(/*! path */ \"./node_modules/path-browserify/index.js\");\n\n      var dcPatchArray = window.dcPath.split(\"-\");\n      var len = dcPatchArray.length < this.maxdcpath_level ? dcPatchArray.length : this.maxdcpath_level;\n      var au = AddAds.substring(4);\n      var ref = document.referrer;\n\n      if (window.newMedia == \"True\") {\n        var main_category = this.dcPath == \"10.Xnet\" || this.parent_category == \"Xnet\" ? \"/central\" : \"/\" + this.parent_category.toLowerCase();\n        var site = \"xnet\";\n\n        var _dcPatchArray4 = this.dcPath.split(\"-\");\n\n        var sub_xnt = _dcPatchArray4[1] != undefined ? 1 : 0;\n        var mobile_path = \"/mobileweb\";\n\n        if (window.innerWidth >= 767) {\n          ad_unit_path = path.join(ad_unit_path, this.NetworkNumber, site + this.platform_path + au + main_category);\n          return ad_unit_path;\n        } else {\n          if (this.dccg == 'sub' && sub_xnt == 0) {\n            if (ref.match(/^https?:\\/\\/([^\\/]+\\.)?ynet\\.co\\.il(\\/|$)/i) && au == \"interstitial.1\") {\n              var this_device = this.getDevice_func();\n\n              if (this_device == \"iPhone\" || this_device == \"iPad\" || this_device == \"iPod\") {\n                if (ref.match(/^https?:\\/\\/([^\\/]+\\.)?m\\.ynet\\.co\\.il(\\/|$)/i) || ref.match(/^https?:\\/\\/([^\\/]+\\.)?cel-test2\\.ynet\\.co\\.il(\\/|$)/i)) {\n                  // \n                  ad_unit_path = \"/6870/xnet/android/interstitial\";\n                  return ad_unit_path;\n                } else {\n                  //\n                  ad_unit_path = \"/6870/xnet/android/interstitial_inner\";\n                  return ad_unit_path;\n                }\n              } else if (this_device == \"Android\") {\n                if (ref.match(/^https?:\\/\\/([^\\/]+\\.)?m\\.ynet\\.co\\.il(\\/|$)/i) || ref.match(/^https?:\\/\\/([^\\/]+\\.)?cel-test2\\.ynet\\.co\\.il(\\/|$)/i)) {\n                  // \n                  ad_unit_path = \"/6870/xnet/iphone/interstitial\";\n                  return ad_unit_path;\n                } else {\n                  //\n                  ad_unit_path = \"/6870/xnet/iphone/interstitial_inner\";\n                  return ad_unit_path;\n                }\n              }\n            } else {\n              ad_unit_path = path.join(ad_unit_path, this.NetworkNumber, site + this.platform_path + au + main_category);\n              return ad_unit_path;\n            }\n          } else {\n            ad_unit_path = path.join(ad_unit_path, this.NetworkNumber, site + this.platform_path + au + main_category);\n            return ad_unit_path;\n          }\n\n          return ad_unit_path;\n        }\n      } else {\n        //adUnitCallXnet_func call from defineSlots_func\n        //The function create adUnitPath for googletag.defineSlot\n        var _dcPatchArray5 = window.dcPath.split(\"-\");\n\n        var _len4 = _dcPatchArray5.length < this.maxdcpath_level ? _dcPatchArray5.length : this.maxdcpath_level;\n\n        var temp = _dcPatchArray5[0].indexOf(\".\");\n\n        this.new_dcPath = _dcPatchArray5[0].substring(temp);\n\n        var _sub_xnt = _dcPatchArray5[1] != undefined ? 1 : 0;\n\n        if (this.innerWidth >= \"767\") {\n          if (this.dccg == \"main\" || this.dccg == \"article\" || this.dccg == \"sub\" && _sub_xnt == 1) {\n            ad_unit_path = path.join(ad_unit_path, this.NetworkNumber, this.dcSite + \".\" + au);\n\n            for (var i = 0; i < _len4; i++) {\n              temp = _dcPatchArray5[i].indexOf(\".\");\n              ad_unit_path = path.join(ad_unit_path, this.dcSite + \".\" + au + _dcPatchArray5[i].substring(temp));\n            }\n\n            return ad_unit_path;\n          } else if (this.dccg == \"sub\" && _sub_xnt == 0) {\n            ad_unit_path = path.join(ad_unit_path, this.NetworkNumber, this.dcSite + \".\" + au, this.dcSite + \".\" + au + \".Central\");\n            return ad_unit_path;\n          } else {\n            ad_unit_path = path.join(ad_unit_path, this.NetworkNumber, this.dcSite + \".\" + au + this.new_dcPath);\n            return ad_unit_path;\n          }\n        } else {\n          //ad_unit_path = path.join(ad_unit_path,this.NetworkNumber)\n          var _mobile_path2 = \"/ynet_mobile\";\n\n          if (this.dccg == \"main\" || this.dccg == \"article\" || this.dccg == \"sub\" && _sub_xnt == 1) {\n            if (_dcPatchArray5[1] != undefined) {\n              var sub_path = _dcPatchArray5[1].split(\".\");\n\n              ad_unit_path = path.join(ad_unit_path, this.NetworkNumber + _mobile_path2, this.dcSite + \".\" + au, this.dcSite + \".\" + au + \".\" + sub_path[1]);\n            } else if (_dcPatchArray5[1] == undefined && this.dcPath == \"10.Xnet\") {\n              ad_unit_path = path.join(ad_unit_path, this.NetworkNumber + _mobile_path2, this.dcSite + \".\" + au, this.dcSite + \".\" + au + \".Central\");\n              Log(\"AD UNIT B : \" + ad_unit_path);\n            } else {\n              ad_unit_path = path.join(ad_unit_path, this.NetworkNumber + _mobile_path2, this.dcSite + \".\" + au, this.dcSite + \".\" + au + this.new_dcPath);\n              Log(\"AD UNIT C : \" + ad_unit_path);\n            }\n\n            Log(\"AD UNIT 0 : \" + ad_unit_path);\n            return ad_unit_path;\n          } else if (this.dccg == \"sub\" && _sub_xnt == 0) {\n            if (ref.match(/^https?:\\/\\/([^\\/]+\\.)?ynet\\.co\\.il(\\/|$)/i) && au == \"transitial.1\") {\n              var _this_device = this.getDevice_func();\n\n              if (_this_device == \"iPhone\" || _this_device == \"iPad\" || _this_device == \"iPod\") {\n                if (ref.match(/^https?:\\/\\/([^\\/]+\\.)?m\\.ynet\\.co\\.il(\\/|$)/i) || ref.match(/^https?:\\/\\/([^\\/]+\\.)?cel-test2\\.ynet\\.co\\.il(\\/|$)/i)) {\n                  // \n                  ad_unit_path = \"/6870/ynet_mobile/ynet_mobileweb_transitions/ynet_mobileweb_transitions_general/ynet_mobileweb_transitions_general_iphone_main_ip\";\n                  return ad_unit_path;\n                } else {\n                  //\n                  ad_unit_path = \"/6870/ynet_mobile/ynet_iphone_transitions/ynet_iphone_transitions_channels\";\n                  return ad_unit_path;\n                }\n              } else if (_this_device == \"Android\") {\n                if (ref.match(/^https?:\\/\\/([^\\/]+\\.)?m\\.ynet\\.co\\.il(\\/|$)/i) || ref.match(/^https?:\\/\\/([^\\/]+\\.)?cel-test2\\.ynet\\.co\\.il(\\/|$)/i)) {\n                  // \n                  ad_unit_path = \"/6870/ynet_mobile/ynet_mobileweb_transitions/ynet_mobileweb_transitions_general/ynet_mobileweb_transitions_general_android_main_ip\";\n                  return ad_unit_path;\n                } else {\n                  //\n                  ad_unit_path = \"/6870/ynet_mobile/ynet_android_transitions/ynet_android_transitions_channels\";\n                  return ad_unit_path;\n                }\n              }\n            } else {\n              ad_unit_path = path.join(ad_unit_path, this.NetworkNumber + _mobile_path2, this.dcSite + \".\" + au, this.dcSite + \".\" + au + \".Central\");\n              Log(\"AD UNIT 1 : \" + ad_unit_path);\n              return ad_unit_path;\n            }\n          } else {\n            ad_unit_path = path.join(ad_unit_path, this.NetworkNumber + _mobile_path2, this.dcSite + \".\" + au + this.new_dcPath);\n            Log(\"AD UNIT 2 : \" + ad_unit_path);\n            return ad_unit_path;\n          }\n        }\n      }\n    } //end adUnitCallXnet_func\n    //for xnet\n\n  }, {\n    key: \"destroyMaavaron_func\",\n    value: function destroyMaavaron_func() {\n      Log(\"destroyMaavaron_func\");\n      var MAAVRON = window.newMedia == \"True\" ? \"ads.interstitial\" : \"ads.maavaron\";\n      googletag.cmd.push(function () {\n        googletag.destroySlots([_AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].Define_slots[MAAVRON]]);\n        googletag.enableServices();\n      });\n      document.getElementById(\"maavaron_overlay\").style.display = \"none\";\n    } //end of destroyMaavaron_func\n\n  }, {\n    key: \"setTargeting_function\",\n    value: function setTargeting_function(a) {\n      for (var i in a) {\n        googletag.pubads().setTargeting(i, a[i]);\n      }\n    }\n  }, {\n    key: \"defineUnitsYnsYnv_func\",\n    value: function defineUnitsYnsYnv_func() {\n      var _this = this;\n\n      Log(\"defineUnitsYnsYnv_func\");\n      var jsonObj_dict = this.jsonObj;\n      var showMaaavaron = 0;\n      googletag.cmd.push(function () {\n        for (var _i3 = 0, _Object$keys = Object.keys(jsonObj_dict); _i3 < _Object$keys.length; _i3++) {\n          var key = _Object$keys[_i3];\n          googletag.pubads().setTargeting(key, jsonObj_dict[key]);\n        }\n      });\n\n      if (this.innerWidth <= \"768\") {\n        this.findAllDiv_func();\n        showMaaavaron = 1;\n\n        if (this.getUrlVars_func(\"IsApp\") == \"1\" || this.getUrlVars_func(\"IsApp\") == 1 || this.getUrlVars_func(\"isapp\") == \"1\" || this.getUrlVars_func(\"isapp\") == 1) {\n          showMaaavaron = 0;\n        }\n\n        if (showMaaavaron == 1 && _AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].Slots[this.Maavaron_mobile_VN] && document.referrer.includes('vesty.co.il/article') || showMaaavaron == 1 && _AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].Slots[this.Maavaron_mobile_VN] && document.referrer.includes('vesty.co.il/articles') || showMaaavaron == 1 && _AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].Slots[this.Maavaron_mobile_VN] && window.dcCG == 'article' && document.referrer.includes('vesty.co.il')) {\n          this.Trans = true;\n\n          if (document.getElementById(\"maavaronstyle\") != null) {\n            document.getElementById(\"maavaronstyle\").innerHTML = \"\";\n          }\n\n          this.defineSlots_func(this.Maavaron_mobile_VN, [1, 2]);\n        } else {\n          this.defineSlots_func(\"ads.biglivebox\", [[1, 1], ['fluid'], [320, 1], [320, 450], [320, 120], [350, 197], [336, 280], [300, 250], [320, 100]]);\n          _AdUnitStylesClass__WEBPACK_IMPORTED_MODULE_6__[\"default\"][\"ads.biglivebox\"](\"ads.biglivebox\");\n        } //if (AdUnitPropertiesClassObj.Slots['ads.mw.videoinpage']) this.defineSlots_func('ads.mw.videoinpage', [[1, 1], [1, 2], 'fluid']);\n\n\n        this.defineSlots_func(this.sticky, [[320, 50], [360, 50]]);\n        _AdUnitStylesClass__WEBPACK_IMPORTED_MODULE_6__[\"default\"][\"ads.sticky\"](\"ads.sticky\");\n        if (window.dcCG == \"article\") this.add_Browsi_inhouse(\"vesty\");\n      } else {\n        (function () {\n          var vesty_newgrid = document.querySelector(\".hContainer.grid1280_2\") ? true : false;\n\n          if (window.dcCG != \"main\" && document.getElementById(\"ads.interstitial\") != undefined) {\n            _this.Double_Jumbo = true;\n\n            if (!_this.Double_Jumbo) {\n              document.getElementById(\"ads.interstitial\").innerHTML = \"\";\n            }\n\n            if (vesty_newgrid) {\n              _this.defineSlots_func(\"ads.top\", [[1, 1], [1, 2], [970, 90], [970, 250], [1000, 200], [970, 130], [970, 350], [970, 100], [1192, 250], [1192, 350], [1192, 90], [1192, 100], [1192, 130]]);\n\n              var TopLoaded = false;\n              _InfrastructureClass__WEBPACK_IMPORTED_MODULE_9__[\"default\"].SlotRenderEnd(function (event) {\n                if (event.slot == _AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].Define_slots[\"ads.top\"]) {\n                  if (!TopLoaded) {\n                    if (!event.isEmpty) {\n                      var event_size = event.size + \"\";\n                      var event_w = event_size.split(\",\");\n\n                      if (event_w[0] == \"1192\") {\n                        document.getElementById(\"ads.top\").setAttribute(\"style\", \"background-color: rgb(233, 233, 233); clear: both; min-height: auto !important; text-align:center; padding: 0; width: 1202px; margin: 0px auto; border: 5px solid rgb(233, 233, 233); box-sizing: border-box;\");\n                      } else {\n                        var width_top = event_w[0] == \"1\" || event_size == \"fluid\" ? document.getElementById(\"ads.top\").offsetWidth : parseInt(event_w[0], 10);\n\n                        if (document.getElementById(\"yboximg\")) {\n                          width_top = document.getElementById(\"yboximg\").offsetWidth;\n                        }\n\n                        document.getElementById(\"ads.top\").setAttribute(\"style\", \"clear: both; min-height: auto !important; text-align:center; padding: 0 !important; width: \" + parseInt(width_top + 10) + \"px !important;\" + \"margin: 0px auto; border: 5px solid rgb(233, 233, 233); box-sizing: border-box;\");\n                      }\n\n                      if (event.size == \"970,130\" || event.size == \"970,90\" || event.size == \"980,100\" || event.size == \"1192,90\" || event.size == \"1192,130\" || event.size == \"1005,124\") {\n                        AdUnitFunctionsClassObj.findAllDiv_func();\n                        _MainFanctionClass__WEBPACK_IMPORTED_MODULE_10__[\"default\"].getStyleTop_func(event);\n                      }\n                    }\n\n                    TopLoaded = true;\n                  }\n                }\n              });\n            } else {\n              _this.defineSlots_func(\"ads.top\", [[970, 90], [970, 250], [770, 350], [970, 350]]);\n            }\n\n            _AdUnitStylesClass__WEBPACK_IMPORTED_MODULE_6__[\"default\"][\"ads.top\"](\"ads.top\"); // define Maavaron\n\n            if (window.frequencyLogic && localStorage.frequencyLogic != undefined && frequencyLogic.displayedlast.includes(\"adx\") && frequencyLogic.add == \"loaded\") {\n              localStorage.removeItem('frequencyLogic');\n            } else {\n              _this.defineSlots_func(\"ads.interstitial\", [[1, 1], [2, 1], [970, 250]], \"\", \"gpt_maavaron\");\n            }\n\n            var MaavaronLoaded = false;\n            var video_on = \"\";\n            var cont_wh = document.getElementById(\"content-w\");\n            var content_wh = cont_wh !== null;\n            _InfrastructureClass__WEBPACK_IMPORTED_MODULE_9__[\"default\"].SlotRenderEnd(function (event) {\n              var video_data = \"\";\n\n              if (event.slot == _AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].Define_slots[\"ads.interstitial\"]) {\n                if (!MaavaronLoaded) {\n                  if (!event.isEmpty) {\n                    if (document.getElementById('blanket') != undefined || document.getElementById('blanket') != null) {\n                      document.getElementById('blanket').style.display = 'none';\n                    }\n\n                    document.getElementsByTagName('body')[0].style.setProperty('overflow', 'visible', 'important'); //that.is_maavaron = true;\n\n                    if (content_wh) {\n                      cont_wh.style.display = \"none\";\n                    }\n\n                    try {\n                      video_on = document.getElementsByClassName(\"video-container-flp6\");\n\n                      for (var i = 0; i < video_on.length; i++) {\n                        var iframe_video = video_on[i].children[0];\n                        iframe_video.src = \"\";\n                      }\n                    } catch (ex) {\n                      console.log(ex);\n                    }\n                  } else {\n                    document.getElementsByTagName('body')[0].style.setProperty('overflow', 'visible', 'important');\n\n                    if (document.getElementById('blanket') != undefined || document.getElementById('blanket') != null) {\n                      document.getElementById('blanket').style.display = 'none';\n                    }\n\n                    video_data = _MainFanctionClass__WEBPACK_IMPORTED_MODULE_10__[\"default\"].videoOff_func();\n                  }\n\n                  MaavaronLoaded = true;\n\n                  if (video_data != \"\") {\n                    video_on.src = video_data;\n                  }\n                }\n              }\n            });\n          } else {\n            if (vesty_newgrid) {\n              _this.defineSlots_func(\"ads.top\", [[1, 1], [1, 2], [970, 90], [970, 250], [1000, 200], [970, 130], [970, 350], [970, 100], [1192, 250], [1192, 350], [1192, 90], [1192, 100], [1192, 130]]);\n\n              var _TopLoaded = false;\n              _InfrastructureClass__WEBPACK_IMPORTED_MODULE_9__[\"default\"].SlotRenderEnd(function (event) {\n                if (event.slot == _AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].Define_slots[\"ads.top\"]) {\n                  if (!_TopLoaded) {\n                    if (!event.isEmpty) {\n                      var event_size = event.size + \"\";\n                      var event_w = event_size.split(\",\");\n\n                      if (event_w[0] == \"1192\") {\n                        document.getElementById(\"ads.top\").setAttribute(\"style\", \"background-color: rgb(233, 233, 233); clear: both; min-height: auto !important; text-align:center; padding: 0; width: 1202px; margin: 0px auto; border: 5px solid rgb(233, 233, 233); box-sizing: border-box;\");\n                      } else {\n                        var width_top = event_w[0] == \"1\" || event_size == \"fluid\" ? document.getElementById(\"ads.top\").offsetWidth : parseInt(event_w[0], 10);\n\n                        if (document.getElementById(\"yboximg\")) {\n                          width_top = document.getElementById(\"yboximg\").offsetWidth;\n                        }\n\n                        document.getElementById(\"ads.top\").setAttribute(\"style\", \"clear: both; min-height: auto !important; text-align:center; padding: 0 !important; width: \" + parseInt(width_top + 10) + \"px !important;\" + \"margin: 0px auto; border: 5px solid rgb(233, 233, 233); box-sizing: border-box;\");\n                      }\n\n                      if (event.size == \"970,130\" || event.size == \"970,90\" || event.size == \"980,100\" || event.size == \"1192,90\" || event.size == \"1192,130\" || event.size == \"1005,124\") {\n                        AdUnitFunctionsClassObj.findAllDiv_func();\n                        _MainFanctionClass__WEBPACK_IMPORTED_MODULE_10__[\"default\"].getStyleTop_func(event);\n                      }\n                    }\n\n                    _TopLoaded = true;\n                  }\n                }\n              });\n            } else {\n              _this.defineSlots_func(\"ads.top\", [[970, 90], [970, 250], [770, 350], [970, 350]]);\n            }\n\n            _AdUnitStylesClass__WEBPACK_IMPORTED_MODULE_6__[\"default\"][\"ads.top\"](\"ads.top\");\n          }\n\n          _this.findAllDiv_func();\n\n          if (window.dcCG == \"article\") _this.add_Browsi_inhouse(\"vesty\");\n          var old_divs = new Array();\n          var new_divs = new Array();\n          var general_divs = new Array();\n          var className = general_banners_divs;\n          var div_sizes = general_banners_divs_sizes;\n          var classnameCount = className.length;\n\n          if (className != \"\") {\n            for (var j = 0; j < classnameCount; j++) {\n              var div_size = div_sizes[j];\n              var w_div = div_size.substr(0, div_size.indexOf(\"x\"));\n              var h_div = div_size.substr(div_size.indexOf(\"x\") + 1);\n              general_divs.push([className[j], parseInt(w_div, 10), parseInt(h_div, 10)]);\n\n              if (_this.newMedia == \"True\") {\n                old_divs.push(\"ads.300x250.1\", \"ads.300x250.2\", \"ads.300x250.3\");\n                new_divs.push(\"ads.box.1\", \"ads.box.2\", \"ads.box.3\");\n                general_divs.map(function (gd) {\n                  var index = old_divs.indexOf(gd[0]);\n\n                  if (index > -1) {\n                    gd[0] = new_divs[index];\n                  }\n                });\n              }\n\n              var style_divs = document.createElement(\"style\");\n              style_divs.innerHTML = \"div[id='\".concat(general_divs[j][0], \"'] {\\n              margin:0 auto;\\n              width: \").concat(general_divs[j][1], \"px;\\n              height: \").concat(general_divs[j][2], \"px !important;\\n              text-align: center;\\n              display: flex !important;\\n              justify-content: center;\\n            \\n          }\\n          div[id='\").concat(general_divs[j][0], \"'] iframe {\\n              text-align: center;\\n              display: flex !important;\\n              justify-content: center;\\n          }\");\n\n              if (document.getElementById(general_divs[j][0])) {\n                var current = document.getElementById(general_divs[j][0]);\n                current.parentNode.insertBefore(style_divs, current.nextSibling);\n              }\n\n              if (general_divs[j][0] == \"ads.slider.1\") {\n                _this.defineSlots_func(general_divs[j][0], [1, 1]);\n              } else if (general_divs[j][0] == \"ads.display.videoinpage.1\") {\n                var videoinpage_sizes = vesty_newgrid ? [[1, 1], [1, 2], [610, 300], ['fluid']] : [[1, 1], ['fluid']];\n\n                _this.defineSlots_func(general_divs[j][0], videoinpage_sizes);\n              } else if (vesty_newgrid && (general_divs[j][0] == \"ads.box.2\" || general_divs[j][0] == \"ads.box.3\" || general_divs[j][0] == \"ads.box.4\")) {\n                _this.defineSlots_func(general_divs[j][0], [[general_divs[j][1], general_divs[j][2]], ['fluid']]);\n              } else if (vesty_newgrid && window.dcPath == \"50.Vesti-1.Home\" && general_divs[j][0].includes(\"ads.big.strip\")) {\n                _this.defineSlots_func(general_divs[j][0], [[general_divs[j][1], general_divs[j][2]], [970, 90]]); // document.getElementById(general_divs[j][0]).setAttribute(\"style\", \"margin:0 auto; text-align:center; display: flex; justify-content: center;\");                     \n                // let StripLoaded = false;\n                // InfrasructureClassObj.SlotRenderEnd(function(event) {\n                //   if (event.slot == AdUnitPropertiesClassObj.Define_slots[general_divs[j][0]]) {\n                //     if (!StripLoaded) {\n                //       if (!event.isEmpty) {\n                //         let width_strip = general_divs[j][1];\n                //         let strip_size = event.size + \"\";\n                //         let strip_w = strip_size.split(\",\");         \n                //         if (strip_w[0] == \"970\") {\n                //           width_strip = 970;\n                //         }\n                //         let style_strip = document.createElement(\"style\");\n                //         style_strip.innerHTML = `div[id=${general_divs[j][0]}] {\n                //            width:${width_strip}px !important;\n                //            height: ${general_divs[j][2]}px !important;                \n                //         }\n                //         div[id=${general_divs[j][0]}] iframe {\n                //           width:${width_strip}px !important;\n                //           height: ${general_divs[j][2]}px !important;\n                //         }`; \n                //         let strip = document.getElementById(general_divs[j][0]);   \n                //         strip.parentNode.insertBefore(style_strip, strip.nextSibling);\n                //       }\n                //       StripLoaded = true;\n                //     }\n                //   }\n                // });\n\n              } else {\n                _this.defineSlots_func(general_divs[j][0], [general_divs[j][1], general_divs[j][2]]);\n              }\n            }\n          }\n\n          if (vesty_newgrid) {\n            // Banner in home page - multi images comp\n            if (_AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].Slots[\"ads.hotbox\"]) {\n              _this.defineSlots_func(\"ads.hotbox\", [['fluid'], [190, 208]]);\n\n              var BannerLoaded = false;\n              _InfrastructureClass__WEBPACK_IMPORTED_MODULE_9__[\"default\"].SlotRenderEnd(function (event) {\n                if (event.slot == _AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].Define_slots[\"ads.hotbox\"]) {\n                  if (!BannerLoaded) {\n                    if (!event.isEmpty) {\n                      var style_banner = document.createElement(\"style\");\n                      style_banner.innerHTML = \"div[id='ads.hotbox'] {\\n                     width:190px !important;\\n                     height: 208px !important;                \\n                  }\\n                  div[id='ads.hotbox'] iframe {\\n                    width:190px !important;\\n                    height: 208px !important;\\n                  }\";\n                      var hotbox_banner = document.getElementById(\"ads.hotbox\");\n                      hotbox_banner.parentNode.insertBefore(style_banner, hotbox_banner.nextSibling);\n                    }\n\n                    BannerLoaded = true;\n                  }\n                }\n              });\n            } // Banner in category page - multi-strip componenta\n\n\n            if (_AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].Slots[\"ads.strip.channel.1\"]) {\n              _this.defineSlots_func(\"ads.strip.channel.1\", [['fluid'], [300, 256]]);\n\n              var StripBannerLoaded = false;\n              _InfrastructureClass__WEBPACK_IMPORTED_MODULE_9__[\"default\"].SlotRenderEnd(function (event) {\n                if (event.slot == _AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].Define_slots[\"ads.strip.channel.1\"]) {\n                  if (!StripBannerLoaded) {\n                    if (!event.isEmpty) {\n                      var Stripstyle_banner = document.createElement(\"style\");\n                      Stripstyle_banner.innerHTML = \"div[id='ads.strip.channel.1'] {\\n                    width:300px !important;\\n                    height: 280px !important; \\n                    border-bottom: 5px solid #1417ac;               \\n                   }\\n                   div[id='ads.strip.channel.1'] iframe {\\n                     width:300px !important;\\n                     height: 280px !important;\\n                   }\";\n                      var strip_banner = document.getElementById(\"ads.strip.channel.1\");\n                      strip_banner.parentNode.insertBefore(Stripstyle_banner, strip_banner.nextSibling);\n                    }\n\n                    StripBannerLoaded = true;\n                  }\n                }\n              });\n            }\n          }\n\n          if (_this.dccg == \"article\" && _this.truvid_desktop == \"True\") {\n            _AdTruvidScriptClass__WEBPACK_IMPORTED_MODULE_11__[\"default\"].AddTrudiv_func(\"ads.display.videoinpage.1\", [[1, 1], [1, 2], ['fluid']], 0);\n          }\n\n          if (_AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].Slots[_this.Ozen_left_VN] && window.innerWidth > 1520) {\n            _this.defineSlots_func(_this.Ozen_left_VN, _AdUnitAdditionalStylesClass__WEBPACK_IMPORTED_MODULE_4__[\"default\"].resizeOzen_func());\n\n            _AdUnitStylesClass__WEBPACK_IMPORTED_MODULE_6__[\"default\"][\"ads.ozen.left\"](\"ads.ozen.left\");\n          }\n\n          if (_AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].Slots[\"ads.sargel\"]) {\n            setTimeout(_this.defineSargel_func(\"ads.sargel\"), 2500);\n          }\n\n          if (_AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].Slots[_this.Ozen] && window.innerWidth > 1520) {\n            _this.defineSlots_func(_this.Ozen, _AdUnitAdditionalStylesClass__WEBPACK_IMPORTED_MODULE_4__[\"default\"].resizeOzen_func());\n\n            _AdUnitStylesClass__WEBPACK_IMPORTED_MODULE_6__[\"default\"][\"ads.ozen\"](\"ads.ozen\");\n          }\n        })();\n      } //end else\n\n    } //end defineUnitsYnsYnv_func\n\n  }, {\n    key: \"defineUnitsYnes_func\",\n    value: function defineUnitsYnes_func() {\n      Log(\"defineUnitsYnes_func\");\n      var jsonObj_dict = this.jsonObj;\n      var showMaaavaron = 0;\n      googletag.cmd.push(function () {\n        for (var _i4 = 0, _Object$keys2 = Object.keys(jsonObj_dict); _i4 < _Object$keys2.length; _i4++) {\n          var key = _Object$keys2[_i4];\n          googletag.pubads().setTargeting(key, jsonObj_dict[key]);\n        }\n      });\n\n      if (this.innerWidth <= \"768\") {\n        this.findAllDiv_func();\n        showMaaavaron = 1;\n\n        if (this.getUrlVars_func(\"IsApp\") == \"1\" || this.getUrlVars_func(\"IsApp\") == 1 || this.getUrlVars_func(\"isapp\") == \"1\" || this.getUrlVars_func(\"isapp\") == 1) {\n          showMaaavaron = 0;\n        }\n\n        if (showMaaavaron == 1 && _AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].Slots['ads.transition']) {\n          _AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].Trans = true;\n\n          if (document.getElementById(\"maavaronstyle\") != null) {\n            document.getElementById(\"maavaronstyle\").innerHTML = \"\";\n          }\n\n          this.defineSlotsYnes_func(\"ads.transition\", [[1, 2], [1, 1], [320, 450]]);\n        }\n\n        this.defineSlotsYnes_func(\"ads.inbord\", [['fluid'], [320, 450], [320, 200], [320, 180], [360, 200], [360, 360]]);\n        _AdUnitStylesClass__WEBPACK_IMPORTED_MODULE_6__[\"default\"][\"ads.inbord\"](\"ads.inbord\");\n\n        if (this.dccg == \"article\") {\n          if (this.truvid_mobile == \"True\") {\n            _AdTruvidScriptClass__WEBPACK_IMPORTED_MODULE_11__[\"default\"].AddTrudiv_func(\"ads.mw.videoinpage\", [[1, 1], [1, 2], 'fluid'], 1);\n          }\n        } else {\n          if (_AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].Slots['ads.mw.videoinpage']) {\n            this.defineSlotsYnes_func('ads.mw.videoinpage', [[1, 1], [1, 2], 'fluid']);\n          }\n        } // this.defineSlotsYnes_func(\"ads.sticky\", [[360, 50], [320, 50]]); \n        // adUnitStylesClassObj[\"ads.sticky\"](\"ads.sticky\");\n\n\n        if (window.dcCG == \"article\") this.add_Browsi_inhouse(\"espanol\");\n      } else {\n        this.defineSlotsYnes_func(\"ads.top\", [[970, 350], [970, 90], ['fluid'], [970, 100], [970, 250]]);\n        _AdUnitStylesClass__WEBPACK_IMPORTED_MODULE_6__[\"default\"][\"ads.top\"](\"ads.top\");\n        this.findAllDiv_func();\n\n        if (_AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].Slots[\"ads.ozen_left\"]) {\n          this.defineSlotsYnes_func(\"ads.ozen_left\", _AdUnitAdditionalStylesClass__WEBPACK_IMPORTED_MODULE_4__[\"default\"].resizeOzenYnsYnv_func());\n          _AdUnitStylesClass__WEBPACK_IMPORTED_MODULE_6__[\"default\"][\"ads.ozen_left\"](\"ads.ozen_left\");\n        }\n\n        if (_AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].Slots[\"ads.ozen_right\"]) {\n          this.defineSlotsYnes_func(\"ads.ozen_right\", _AdUnitAdditionalStylesClass__WEBPACK_IMPORTED_MODULE_4__[\"default\"].resizeOzenYnsYnv_func());\n          _AdUnitStylesClass__WEBPACK_IMPORTED_MODULE_6__[\"default\"][\"ads.ozen_right\"](\"ads.ozen_right\");\n        }\n\n        if (this.dccg == \"article\" && this.truvid_desktop == \"True\") {\n          _AdTruvidScriptClass__WEBPACK_IMPORTED_MODULE_11__[\"default\"].AddTrudiv_func(\"ads.display.videoinpage.1\", [[1, 1], [2, 1], ['fluid']], 1);\n        }\n\n        this.findAllDiv_func();\n        if (window.dcCG == \"article\") this.add_Browsi_inhouse(\"espanol\");\n        var general_divs = new Array();\n        var className = general_banners_divs;\n        var div_sizes = general_banners_divs_sizes;\n        var classnameCount = className.length;\n\n        if (className != \"\") {\n          for (var j = 0; j < classnameCount; j++) {\n            var div_size = div_sizes[j];\n            var w_div = div_size.substr(0, div_size.indexOf(\"x\"));\n            var h_div = div_size.substr(div_size.indexOf(\"x\") + 1);\n            general_divs.push([className[j], parseInt(w_div, 10), parseInt(h_div, 10)]);\n\n            if (general_divs[j][0] == \"ads.300x250.1\") {\n              this.defineSlots_func(general_divs[j][0], [[general_divs[j][1], general_divs[j][2]], ['fluid']]);\n            } else if (general_divs[j][0] == \"ads.display.videoinpage.1\") {\n              this.defineSlotsYnes_func(general_divs[j][0], [[1, 1], ['fluid']]);\n            } else {\n              this.defineSlotsYnes_func(general_divs[j][0], [general_divs[j][1], general_divs[j][2]]);\n            }\n          }\n        }\n      } //end else\n\n    } //end defineUnitsYnes_func\n\n  }, {\n    key: \"defineUnitsMynet_func\",\n    value: function defineUnitsMynet_func() {\n      Log(\"defineUnitsMynet_func\");\n      var jsonObj_dict = this.jsonObj;\n      var showMaaavaron = 0;\n      googletag.cmd.push(function () {\n        for (var _i5 = 0, _Object$keys3 = Object.keys(jsonObj_dict); _i5 < _Object$keys3.length; _i5++) {\n          var key = _Object$keys3[_i5];\n          googletag.pubads().setTargeting(key, jsonObj_dict[key]);\n        }\n      });\n\n      if (this.innerWidth <= \"768\") {\n        this.findAllDiv_func();\n        showMaaavaron = 1;\n\n        if (this.getUrlVars_func(\"IsApp\") == \"1\" || this.getUrlVars_func(\"IsApp\") == 1 || this.getUrlVars_func(\"isapp\") == \"1\" || this.getUrlVars_func(\"isapp\") == 1) {\n          showMaaavaron = 0;\n        }\n\n        if (showMaaavaron == 1 && _AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].Slots['ads.transition'] && document.referrer.includes('mynet.co.il') && document.referrer.includes('/article') || showMaaavaron == 1 && _AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].Slots['ads.transition'] && window.dcCG == 'article' && document.referrer.includes('mynet.co.il')) {\n          _AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].Trans = true;\n\n          if (document.getElementById(\"maavaronstyle\") != null) {\n            document.getElementById(\"maavaronstyle\").innerHTML = \"\";\n          }\n\n          this.defineSlotsMynet_func(\"ads.transition\", [[1, 1], [320, 480]]);\n        } else {\n          if (document.querySelector('.MynetHeaderMobileComponenta')) {\n            var header_comp = document.querySelector('.MynetHeaderMobileComponenta');\n            var inbord_big_div = document.createElement('div');\n            inbord_big_div.setAttribute('id', 'ads.320x450');\n            inbord_big_div.setAttribute('class', '320x450');\n            header_comp.prepend(inbord_big_div);\n            var inbord_small_div = document.createElement('div');\n            inbord_small_div.setAttribute('id', 'ads.300x100.inbord');\n            header_comp.prepend(inbord_small_div);\n          }\n\n          this.defineSlotsMynet_func(\"ads.320x450\", [320, 450]);\n          _InfrastructureClass__WEBPACK_IMPORTED_MODULE_9__[\"default\"].SlotRenderEnd(function (event) {\n            var TopLoaded = false;\n\n            if (event.slot == _AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].Define_slots[\"ads.320x450\"]) {\n              if (!TopLoaded) {\n                if (!event.isEmpty) {\n                  window.CloseBox = function () {\n                    document.getElementById(\"ads.320x450\").style = \"display:none;\";\n                    document.getElementById('ads.320x450').innerHTML = \"\";\n                    AdUnitFunctionsClassObj.Mynet_renderSmallInbord();\n                  };\n\n                  setTimeout(function () {\n                    var buttom_width = 30;\n                    var buttom_height = 30;\n                    var buttom_URL = \"//totalmedia2.ynet.co.il/pic/30-30.gif\";\n                    var buttonclose = '<img style=\"cursor: pointer\" onclick=\"javascript:CloseBox();\"  src=\"' + buttom_URL + '\" width=\"' + buttom_width + 'px\" height=\"' + buttom_height + 'px\" />';\n                    var butoonDiv = document.createElement('div');\n                    butoonDiv.id = 'Biglivebox_Close_button';\n                    butoonDiv.innerHTML = buttonclose;\n                    var adsdiv3 = parent.document.getElementById(\"ads.320x450\");\n                    adsdiv3.appendChild(butoonDiv);\n                    var butoonid = parent.document.getElementById(butoonDiv.id);\n                    butoonid.style.position = \"absolute\";\n                    butoonid.style.top = 0 + \"px\";\n                    butoonid.style.right = 0 + \"px\";\n                    butoonid.style.width = \"30px\";\n                    butoonid.style.height = \"30px\";\n                    butoonid.style.zIndex = 1;\n                  }, 1000);\n                } else {\n                  AdUnitFunctionsClassObj.Mynet_renderSmallInbord();\n                }\n\n                TopLoaded = true;\n              }\n            }\n          });\n          window.addEventListener('message', function (event) {\n            if (event.data.eventName === 'inboardclsoed') {\n              document.getElementById(\"Biglivebox_Close_button\").style = \"display: none\";\n              document.getElementById(\"ads.320x450\").style = \"display:none;\";\n              document.getElementById('ads.320x450').innerHTML = \"\";\n              AdUnitFunctionsClassObj.Mynet_renderSmallInbord();\n            }\n          }, false);\n          var biglivebox_slot = document.getElementById(\"ads.320x450\");\n\n          if (biglivebox_slot != undefined) {\n            biglivebox_slot.setAttribute(\"style\", \"margin:65px 0 -2px 0; position: relative;display:flex;justify-content:center;display:-webkit-box;-webkit-box-pack:center;display:-ms-flexbox;-ms-flex-pack:center;text-align:center;width:100%;\");\n          }\n        }\n\n        if (this.dccg == \"article\") {\n          if (this.truvid_mobile == \"True\") {\n            _AdTruvidScriptClass__WEBPACK_IMPORTED_MODULE_11__[\"default\"].AddTrudiv_func(\"ads.display.videoinpage.1\", [[1, 1], [2, 1], ['fluid']], 1);\n          }\n        }\n\n        this.defineSlotsMynet_func(\"ads.sticky\", [[320, 50], [360, 50]]);\n        _AdUnitStylesClass__WEBPACK_IMPORTED_MODULE_6__[\"default\"][\"ads.sticky\"](\"ads.sticky\");\n        this.findAllDiv_func();\n\n        for (var k = 1; k < 10; k++) {\n          var ads_name = \"ads.300x250.\" + k;\n          var banner_box = _AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].Slots[ads_name];\n\n          if (banner_box) {\n            this.defineSlotsMynet_func(ads_name, [300, 250]);\n            banner_box.setAttribute(\"style\", \"display:flex; justify-content:center; display:-webkit-box; -webkit-box-pack:center; display:-ms-flexbox; -ms-flex-pack:center; text-align:center; width:100%;\");\n          }\n        }\n\n        if (window.dcCG == \"article\") this.add_Browsi_inhouse(\"mynet\");\n      } else {\n        this.defineSlotsMynet_func(\"ads.top\", [[970, 250], [970, 90], [970, 100], [1, 1], [970, 350]]);\n        _AdUnitStylesClass__WEBPACK_IMPORTED_MODULE_6__[\"default\"][\"ads.top\"](\"ads.top\");\n        this.findAllDiv_func();\n\n        if (this.dccg == \"article\" && this.truvid_desktop == \"True\") {\n          _AdTruvidScriptClass__WEBPACK_IMPORTED_MODULE_11__[\"default\"].AddTrudiv_func(\"ads.display.videoinpage.1\", [[1, 1], [2, 1], ['fluid']], 1);\n        }\n\n        if (_AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].Slots[\"ads.ozen_right\"]) {\n          if (window.innerWidth > 1350) {\n            this.defineSlotsMynet_func(\"ads.ozen_right\", _AdUnitAdditionalStylesClass__WEBPACK_IMPORTED_MODULE_4__[\"default\"].resizeOzenYnsYnv_func());\n            _AdUnitStylesClass__WEBPACK_IMPORTED_MODULE_6__[\"default\"][\"ads.ozen_right\"](\"ads.ozen_right\");\n          }\n        }\n\n        if (_AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].Slots[\"ads.ozen_left\"]) {\n          this.defineSlotsMynet_func(\"ads.ozen_left\", _AdUnitAdditionalStylesClass__WEBPACK_IMPORTED_MODULE_4__[\"default\"].resizeOzenYnsYnv_func());\n          _AdUnitStylesClass__WEBPACK_IMPORTED_MODULE_6__[\"default\"][\"ads.ozen_left\"](\"ads.ozen_left\");\n        }\n\n        this.findAllDiv_func();\n        if (window.dcCG == \"article\") this.add_Browsi_inhouse(\"mynet\");\n        var general_divs = new Array();\n        var className = general_banners_divs;\n        var div_sizes = general_banners_divs_sizes;\n        var classnameCount = className.length;\n\n        if (className != \"\") {\n          for (var j = 0; j < classnameCount; j++) {\n            var div_size = div_sizes[j];\n            var w_div = div_size.substr(0, div_size.indexOf(\"x\"));\n            var h_div = div_size.substr(div_size.indexOf(\"x\") + 1);\n            general_divs.push([className[j], parseInt(w_div, 10), parseInt(h_div, 10)]);\n\n            if (general_divs[j][0] == \"ads.marketing_ordering\") {\n              this.defineSlotsMynet_func(general_divs[j][0], [[1, 1], ['fluid']]);\n            } else {\n              this.defineSlotsMynet_func(general_divs[j][0], [general_divs[j][1], general_divs[j][2]]);\n            }\n          }\n        }\n\n        if (_AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].Slots[\"ads.inread\"]) {\n          this.defineSlotsMynet_func(\"ads.inread\", ['fluid'], \"\", \"\");\n        }\n\n        if (_AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].Slots[\"ads.abovecomments\"]) {\n          this.defineSlotsMynet_func(\"ads.abovecomments\", ['fluid'], \"\", \"\");\n        }\n      } //end else\n\n    } //end defineUnitsMynet_func\n\n  }, {\n    key: \"defineUnitsYns_func\",\n    value: function defineUnitsYns_func() {\n      var _this2 = this;\n\n      Log(\"defineUnitsYns_func\");\n      var jsonObj_dict = this.jsonObj;\n      var showMaaavaron = 0;\n      googletag.cmd.push(function () {\n        for (var _i6 = 0, _Object$keys4 = Object.keys(jsonObj_dict); _i6 < _Object$keys4.length; _i6++) {\n          var key = _Object$keys4[_i6];\n          googletag.pubads().setTargeting(key, jsonObj_dict[key]);\n        }\n      });\n\n      if (this.innerWidth <= \"768\") {\n        this.findAllDiv_func();\n        showMaaavaron = 0; // closed from 19.06.22 - instead it we put interstitial.adx from pixel screen\n        // if (\n        //   this.getUrlVars_func(\"IsApp\") == \"1\" ||\n        //   this.getUrlVars_func(\"IsApp\") == 1 ||\n        //   this.getUrlVars_func(\"isapp\") == \"1\" ||\n        //   this.getUrlVars_func(\"isapp\") == 1\n        // ) {\n        //   showMaaavaron = 0;\n        // }\n        // if ((showMaaavaron == 1 && AdUnitPropertiesClassObj.Slots[this.Maavaron_mobile_VN] && document.referrer.includes('ynetnews.com/article')) || \n        // (showMaaavaron == 1 && AdUnitPropertiesClassObj.Slots[this.Maavaron_mobile_VN] && document.referrer.includes('ynetnews.com/articles')) ||\n        // (showMaaavaron == 1 && AdUnitPropertiesClassObj.Slots[this.Maavaron_mobile_VN] && window.dcCG == 'article' && document.referrer.includes('ynetnews.com'))) {\n        //   AdUnitPropertiesClassObj.Trans = true;\n        //   if (document.getElementById(\"maavaronstyle\") != null) {\n        //     document.getElementById(\"maavaronstyle\").innerHTML = \"\";\n        //   }\n        //   this.defineSlotsYns_func(this.Maavaron_mobile_VN, [[1, 1], [320, 480]]);\n        // } else {\n\n        this.defineSlotsYns_func(this.biglivebox, [[320, 100], [336, 280], 'fluid', [320, 1], [300, 250], [320, 120], [320, 450], [1, 1]]);\n        _AdUnitStylesClass__WEBPACK_IMPORTED_MODULE_6__[\"default\"][\"ads.mw.biglivebox\"](\"ads.mw.biglivebox\"); // }\n\n        this.defineSlotsYns_func(this.sticky, [[320, 50], [320, 100], [360, 50]]);\n        _AdUnitStylesClass__WEBPACK_IMPORTED_MODULE_6__[\"default\"][\"ads.sticky\"](\"ads.sticky\");\n        if (window.dcCG == \"article\") this.add_Browsi_inhouse(\"ynews\");\n\n        if (this.dccg == \"article\") {\n          if (this.truvid_mobile == \"True\") {\n            _AdTruvidScriptClass__WEBPACK_IMPORTED_MODULE_11__[\"default\"].AddTrudiv_func(\"ads.mw.videoinpage\", [[1, 1], [1, 2], 'fluid'], 1);\n          }\n\n          if (this.newMedia == \"True\") {\n            if (_AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].Slots[\"ads.box.3\"] != null && _AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].Slots[\"ads.box.3\"] != undefined) {\n              if (_AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].Slots[\"ads.300x250.3\"] != null && _AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].Slots[\"ads.300x250.3\"] != undefined) {\n                document.getElementById(\"ads.300x250.3\").remove();\n              }\n\n              var box_3 = document.getElementById(\"ads.box.3\");\n              box_3.setAttribute(\"style\", \"display:flex; justify-content:center; display:-webkit-box; -webkit-box-pack:center; display:-ms-flexbox; -ms-flex-pack:center; text-align:center !important; width:300px; height: 250px; margin: 0 auto;\");\n              this.defineSlotsYns_func(\"ads.box.3\", [300, 250]);\n            }\n\n            if (_AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].Slots[\"ads.300x250.3\"] != null && _AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].Slots[\"ads.300x250.3\"] != undefined && _AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].Slots[\"ads.box.3\"] == null && _AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].Slots[\"ads.box.3\"] == undefined) {\n              var div = document.getElementById(\"ads.300x250.3\");\n              var el = document.createElement(\"div\");\n              el.id = \"ads.box.3\";\n              div.parentNode.insertBefore(el, div.nextSibling);\n              this.defineSlotsYns_func(\"ads.box.3\", [300, 250]);\n              div.remove();\n            }\n          } else {\n            if (_AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].Slots[\"ads.300x250.3\"]) {\n              this.defineSlotsYns_func(\"ads.300x250.3\", [300, 250]);\n            }\n          }\n        } else {\n          if (_AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].Slots['ads.mw.videoinpage']) {\n            this.defineSlotsYns_func('ads.mw.videoinpage', [[1, 1], [1, 2], 'fluid']);\n          }\n        }\n      } else {\n        (function () {\n          var ynetnews_newgrid = document.querySelector(\".hContainer.grid1280_2.ynetnews\") ? true : false;\n\n          if (ynetnews_newgrid) {\n            _this2.defineSlotsYns_func(\"ads.top\", [[1, 1], [1, 2], [970, 90], [970, 250], [1000, 200], [970, 130], [970, 350], [970, 100], [1192, 250], [1192, 350], [1192, 90], [1192, 100], [1192, 130]]);\n\n            var TopLoaded = false;\n            _InfrastructureClass__WEBPACK_IMPORTED_MODULE_9__[\"default\"].SlotRenderEnd(function (event) {\n              if (event.slot == _AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].Define_slots[\"ads.top\"]) {\n                if (!TopLoaded) {\n                  if (!event.isEmpty) {\n                    var event_size = event.size + \"\";\n                    var event_w = event_size.split(\",\");\n\n                    if (event_w[0] == \"1192\") {\n                      document.getElementById(\"ads.top\").setAttribute(\"style\", \"background-color: rgb(233, 233, 233); clear: both; min-height: auto !important; text-align:center; padding: 0; width: 1202px; margin: 0px auto; border: 5px solid rgb(233, 233, 233); box-sizing: border-box;\");\n                    } else {\n                      var width_top = event_w[0] == \"1\" || event_size == \"fluid\" ? document.getElementById(\"ads.top\").offsetWidth : parseInt(event_w[0], 10);\n\n                      if (document.getElementById(\"yboximg\")) {\n                        width_top = document.getElementById(\"yboximg\").offsetWidth;\n                      }\n\n                      document.getElementById(\"ads.top\").setAttribute(\"style\", \"clear: both; min-height: auto !important; text-align:center; padding: 0 !important; width: \" + parseInt(width_top + 10) + \"px !important;\" + \"margin: 0px auto; border: 5px solid rgb(233, 233, 233); box-sizing: border-box;\");\n                    }\n\n                    if (event.size == \"970,130\" || event.size == \"970,90\" || event.size == \"980,100\" || event.size == \"1192,90\" || event.size == \"1192,130\" || event.size == \"1005,124\") {\n                      AdUnitFunctionsClassObj.findAllDiv_func();\n                      _MainFanctionClass__WEBPACK_IMPORTED_MODULE_10__[\"default\"].getStyleTop_func(event);\n                    }\n                  }\n\n                  TopLoaded = true;\n                }\n              }\n            });\n          } else {\n            _this2.defineSlotsYns_func(\"ads.top\", [[770, 350], [970, 350], [770, 61], ['fluid'], [1, 1], [970, 250], [970, 90], [750, 200]]);\n          }\n\n          _AdUnitStylesClass__WEBPACK_IMPORTED_MODULE_6__[\"default\"][\"ads.top\"](\"ads.top\");\n\n          _this2.findAllDiv_func();\n\n          if (window.dcCG == \"article\") _this2.add_Browsi_inhouse(\"ynews\");\n          var old_divs = new Array();\n          var new_divs = new Array();\n          var general_divs = new Array();\n          var className = general_banners_divs;\n          var div_sizes = general_banners_divs_sizes;\n          var classnameCount = className.length;\n\n          if (className != \"\") {\n            for (var j = 0; j < classnameCount; j++) {\n              var div_size = div_sizes[j];\n              var w_div = div_size.substr(0, div_size.indexOf(\"x\"));\n              var h_div = div_size.substr(div_size.indexOf(\"x\") + 1);\n              general_divs.push([className[j], parseInt(w_div, 10), parseInt(h_div, 10)]);\n\n              if (_this2.newMedia == \"True\") {\n                old_divs.push(\"ads.300x250.1\", \"ads.300x250.2\", \"ads.300x250.3\");\n                new_divs.push(\"ads.box.1\", \"ads.box.2\", \"ads.box.3\");\n                general_divs.map(function (gd) {\n                  var index = old_divs.indexOf(gd[0]);\n\n                  if (index > -1) {\n                    gd[0] = new_divs[index];\n                  }\n                });\n              }\n\n              if (general_divs[j][0] == \"ads.slider.1\") {\n                _this2.defineSlotsYns_func(general_divs[j][0], [1, 1]);\n              } else if (general_divs[j][0] == \"ads.display.videoinpage.1\") {\n                var videoinpage_sizes = ynetnews_newgrid ? [[1, 1], [1, 2], [610, 300], ['fluid']] : [[1, 1], ['fluid']];\n\n                _this2.defineSlotsYns_func(general_divs[j][0], videoinpage_sizes);\n              } else if (general_divs[j][0] == \"ads.box.2\" && ynetnews_newgrid) {\n                _this2.defineSlotsYns_func(general_divs[j][0], [[general_divs[j][1], general_divs[j][2]], ['fluid']]);\n              } else {\n                _this2.defineSlotsYns_func(general_divs[j][0], [general_divs[j][1], general_divs[j][2]]);\n              }\n            }\n          }\n\n          if (_this2.dccg == \"article\" && _this2.truvid_desktop == \"True\") {\n            _AdTruvidScriptClass__WEBPACK_IMPORTED_MODULE_11__[\"default\"].AddTrudiv_func(\"ads.display.videoinpage.1\", [[1, 1], [1, 2], ['fluid']], 1);\n          }\n\n          if (_AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].Slots[_this2.Ozen]) {\n            _this2.defineSlotsYns_func(_this2.Ozen, _AdUnitAdditionalStylesClass__WEBPACK_IMPORTED_MODULE_4__[\"default\"].resizeOzen_func()); //googletag.cmd.push(function() { googletag.display('ads.ozen'); });\n\n\n            _AdUnitStylesClass__WEBPACK_IMPORTED_MODULE_6__[\"default\"][\"ads.ozen\"](\"ads.ozen\");\n          }\n\n          if (_AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].Slots[_this2.Ozen_left_VN]) {\n            _this2.defineSlotsYns_func(_this2.Ozen_left_VN, _AdUnitAdditionalStylesClass__WEBPACK_IMPORTED_MODULE_4__[\"default\"].resizeOzen_func());\n\n            _AdUnitStylesClass__WEBPACK_IMPORTED_MODULE_6__[\"default\"][\"ads.ozen.left\"](\"ads.ozen.left\");\n          }\n\n          if (_AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].Slots[\"ads.spot.1\"]) {\n            _this2.defineSlotsYns_func(\"ads.spot.1\", [300, 250]); //googletag.cmd.push(function() { googletag.display('ads.spot.1'); });\n\n          }\n\n          if (_AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].Slots[\"ads.spot.17\"]) {\n            _this2.defineSlotsYns_func(\"ads.spot.17\", [300, 250]); //googletag.cmd.push(function() { googletag.display('ads.spot.17'); });\n\n          }\n\n          var mini_organic_content_sizes = ynetnews_newgrid ? [['fluid'], [190, 188]] : [220, 113];\n\n          if (_AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].Slots[\"ads.mini.organic.content.1\"]) {\n            _this2.defineSlotsYns_func(\"ads.mini.organic.content.1\", mini_organic_content_sizes);\n          }\n\n          if (_AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].Slots[\"ads.mini.organic.content.2\"]) {\n            _this2.defineSlotsYns_func(\"ads.mini.organic.content.2\", mini_organic_content_sizes);\n          }\n\n          if (_AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].Slots[\"ads.mini.organic.content.3\"]) {\n            _this2.defineSlotsYns_func(\"ads.mini.organic.content.3\", mini_organic_content_sizes);\n          }\n        })();\n      } //end else\n\n    } //end defineUnitsYns_func\n\n  }, {\n    key: \"defineUnits800_func\",\n    value: function defineUnits800_func() {\n      Log(\"defineUnits800_func\");\n      var jsonObj_dict = this.jsonObj;\n      googletag.cmd.push(function () {\n        for (var _i7 = 0, _Object$keys5 = Object.keys(jsonObj_dict); _i7 < _Object$keys5.length; _i7++) {\n          var key = _Object$keys5[_i7];\n          googletag.pubads().setTargeting(key, jsonObj_dict[key]);\n        }\n      });\n\n      if (window.dcSite == \"yntho\") {\n        this.defineSlots800_func(\"ads.topright\", [[728, 90], [721, 180], [745, 162]]);\n      } else {\n        this.defineSlots800_func(\"ads.top\", [728, 90]);\n      }\n\n      this.findAllDiv_func();\n\n      if (_AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].Slots[this.Ozen_800]) {\n        this.defineSlots800_func(this.Ozen_800, _AdUnitAdditionalStylesClass__WEBPACK_IMPORTED_MODULE_4__[\"default\"].resizeOzen800_func()); //googletag.cmd.push(function () {\n        //googletag.display('ads.ozen');\n        //});\n\n        _AdUnitStylesClass__WEBPACK_IMPORTED_MODULE_6__[\"default\"][this.Ozen_800](this.Ozen_800);\n      }\n\n      if (window.dcSite == \"yntho\") {\n        if (_AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].Slots[\"ads.120x600.1\"]) {\n          this.defineSlots800_func(\"ads.120x600.1\", [120, 600]); //googletag.cmd.push(function () {\n          // googletag.display('ads.120x600.1');\n          //});\n        }\n\n        if (_AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].Slots[\"ads.120x600.2\"]) {\n          this.defineSlots800_func(\"ads.120x600.2\", [120, 600]); //googletag.cmd.push(function () {\n          //googletag.display('ads.120x600.2');\n          //});\n        }\n      }\n    }\n  }, {\n    key: \"defineUnits_func\",\n    value: function defineUnits_func() {\n      var _this3 = this;\n\n      //defineUnits_func function all from gpt_script_ynet and create all Slots for the GPT\n      var that = this;\n      var jsonObj_dict = this.jsonObj;\n      googletag.cmd.push(function () {\n        for (var _i8 = 0, _Object$keys6 = Object.keys(jsonObj_dict); _i8 < _Object$keys6.length; _i8++) {\n          var key = _Object$keys6[_i8];\n          var myKey = key !== \"\" ? key : \"noKey\";\n          googletag.pubads().setTargeting(myKey, jsonObj_dict[key]);\n        }\n      });\n      window.ynet_responsive_sites = false;\n      window.ynet_responsive_special = false;\n\n      if (window.dcSite == \"ynt\" && window.matchMedia && window.matchMedia('only screen and (max-width:768px ) and (orientation: portrait), only screen and (max-width: 900px) and (orientation: landscape)').matches) {\n        window.ynet_responsive_sites = true;\n      }\n\n      if (document.querySelector(\".blogs-auto-feed-widget\") || document.querySelector(\".article-blog-componenta-wrapper\") || window.dcSite == \"ynt\" && (window.dcPath.includes(\"201.Weather\") || window.dcPath.includes(\"7755\") && window.dcPath.includes(\"Topics\"))) {\n        window.ynet_responsive_special = true;\n      }\n\n      if (window.innerWidth <= \"767\") {\n        this.findAllDiv_func(); //Browsi in house\n\n        if (window.dcCG == \"article\") this.add_Browsi_inhouse(\"ynet_responsive\");\n\n        if (window.ynet_responsive_special) {\n          var is_app = AdUnitFunctionsClassObj.getUrlVars_func(\"IsApp\") == \"true\";\n\n          if (!is_app) {\n            if (this.showMaaavaronSticky == 0) {\n              if (localStorage.getItem('ynet_mobileweb_interstitial_adx_displayed')) {\n                localStorage.removeItem('maavaronAdx');\n                localStorage.removeItem('ynet_mobileweb_interstitial_adx_displayed');\n              } else {\n                var transition_mobile = \"ads.interstitial.inner\";\n\n                if (this.getDevice_func() == \"Android\" && this.newMedia == \"False\") {\n                  transition_mobile = \"ads.ynet_mobileweb_transitions_general_android_main_ip\";\n                } else if (this.getDevice_func() == \"iPhone\" && this.newMedia == \"False\") {\n                  transition_mobile = \"ads.ynet_mobileweb_transitions_general_iphone_main_ip\";\n                }\n\n                var maavaron_weather = document.createElement('div');\n                maavaron_weather.setAttribute('id', transition_mobile);\n                document.body.insertBefore(maavaron_weather, document.body.firstChild);\n                this.defineSlots_func(transition_mobile, [[1, 1], [1, 2]]);\n                var Interstitial_loaded = false;\n                _InfrastructureClass__WEBPACK_IMPORTED_MODULE_9__[\"default\"].SlotRenderEnd(function (event) {\n                  if (event.slot == _AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].Define_slots[transition_mobile]) {\n                    if (!Interstitial_loaded) {\n                      if (!event.isEmpty) {\n                        if (document.getElementById(\"close-btn\") == null) {\n                          window.Close = function () {\n                            googletag.cmd.push(function () {\n                              googletag.destroySlots([_AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].Define_slots[transition_mobile]]);\n                            });\n\n                            try {\n                              document.querySelector('#dcMaavaronDiv').remove();\n                            } catch (e) {}\n\n                            document.getElementById(transition_mobile).style.height = '0px';\n\n                            try {\n                              document.getElementById(\"Close_btn_interstitial\").style.display = 'none';\n                            } catch (e) {}\n                          };\n\n                          setTimeout(function () {\n                            if (document.getElementById(\"closeButton\")) {\n                              document.getElementById(\"closeButton\").style.display = \"none\";\n                            }\n\n                            if (document.getElementById(\"b1142532\")) {\n                              document.getElementById(\"b1142532\").style.display = \"none\";\n                            }\n\n                            var div_interstitial = parent.document.getElementById(transition_mobile);\n                            var img_interstitial = document.createElement(\"img\");\n                            img_interstitial.id = \"Close_btn_interstitial\";\n                            img_interstitial.src = \"https://images1.ynet.co.il/PicServer3/2013/12/17/5044137/320x.png\";\n                            img_interstitial.setAttribute(\"onClick\", \"window.Close();\");\n                            img_interstitial.setAttribute(\"style\", \"cursor: pointer; position: fixed; width: 10%; top: 0; right: 0; z-index: 9999999999;\");\n                            div_interstitial.appendChild(img_interstitial);\n                          }, 800);\n                        }\n                      } else {}\n\n                      Interstitial_loaded = true;\n                    }\n                  }\n                });\n              }\n            }\n          } // wait for elements - appears just when scrolling, checking for element and if a div was created\n\n\n          window.addEventListener('scroll', function (event) {\n            function create_and_define(num, after_div) {\n              var blog_banner_sizes = [['fluid'], [320, 200]];\n              var blog_banner = document.createElement('div');\n              blog_banner.setAttribute('id', 'ads.inread.' + num);\n              var blog_banner_style = document.createElement(\"style\");\n              blog_banner_style.innerHTML = \"div[id='\".concat(blog_banner.id, \"'] {\\n                    display: flex !important;\\n                    justify-content: center !important;\\n                    margin: 0px 0 15px 0;\\n                    text-align: center;            \\n                  }\");\n              var blogs_elements = document.querySelectorAll(\".blogs-item-wrapper\");\n              var blogs_array = Array.from(blogs_elements);\n              blogs_array[after_div].parentNode.insertBefore(blog_banner, blogs_array[after_div].nextSibling);\n              blog_banner.parentNode.insertBefore(blog_banner_style, blog_banner.nextSibling);\n              AdUnitFunctionsClassObj.defineSlots_func(blog_banner.id, blog_banner_sizes);\n              googletag.cmd.push(function () {\n                googletag.display(\"ads.inread.\" + num);\n              }); //blog_banner.setAttribute('style','display: flex !important; justify-content: center; margin: 0px 0 15px 0; text-align: center;');\n            }\n\n            if (document.querySelectorAll(\".blogs-item-wrapper\")[3] && !document.getElementById(\"ads.inread.1\")) {\n              create_and_define(1, 3);\n            } else if (document.querySelectorAll(\".blogs-item-wrapper\")[7] && !document.getElementById(\"ads.inread.2\")) {\n              create_and_define(2, 7);\n            } else if (document.querySelectorAll(\".blogs-item-wrapper\")[11] && !document.getElementById(\"ads.inread.3\")) {\n              create_and_define(3, 11);\n            } else if (document.querySelectorAll(\".blogs-item-wrapper\")[15] && !document.getElementById(\"ads.inread.4\")) {\n              create_and_define(4, 15);\n            }\n          });\n        }\n\n        if ((window.dcPath.includes(\"3456.Magazine\") || window.ynet_responsive_sites) && window.ynet_responsive_special == false) {\n          this.findAllDiv_func(); //let sticky_slot = (this.getDevice_func() == \"Android\") ? \"ads.ynet_mobileweb_banners_android_default_sticky\" : \"ads.ynet_mobileweb_banners_iphone_default_sticky\";\n\n          var biglivebox_slot = \"\";\n          var livebox_slot = \"\";\n          var maavaron_mobile = \"\";\n\n          if (this.newMedia == \"True\" || window.ynet_responsive_sites) {\n            biglivebox_slot = \"ads.biglivebox\";\n            livebox_slot = \"ads.inboard\";\n            maavaron_mobile = \"ads.interstitial.inner\";\n          } else {\n            if (this.getDevice_func() == \"Android\") {\n              biglivebox_slot = \"ads.ynet_mobileweb_android_pnimi_bigliveBox\";\n              livebox_slot = \"ads.ynet_mobileweb_android_livebox\";\n              maavaron_mobile = \"ads.ynet_mobileweb_transitions_general_android_main_ip\";\n            } else if (this.getDevice_func() == \"iPhone\") {\n              biglivebox_slot = \"ads.ynet_mobileweb_iphone_pnimi_bigliveBox\";\n              livebox_slot = \"ads.ynet_mobileweb_iphone_livebox\";\n              maavaron_mobile = \"ads.ynet_mobileweb_transitions_general_iphone_main_ip\";\n            }\n          }\n\n          if (this.showMaaavaronSticky == 0) {\n            var maavaron = document.createElement('div');\n            maavaron.setAttribute('id', maavaron_mobile);\n            document.body.insertBefore(maavaron, document.body.firstChild);\n          }\n\n          var header = \".article-header-magazine\";\n\n          if (window.dcPath.includes(\"3456.Magazine\")) {\n            header = '.blazer-header';\n          }\n\n          if (window.ynet_responsive_sites) {\n            header = '.laisha-header';\n\n            if (document.querySelector(header) == undefined || document.querySelector(header) == null) {\n              header = \".article-header-magazine\";\n            }\n\n            if (window.dcPath.includes(\"PnaiPlus\")) {\n              header = \".pplus-header\";\n            }\n          }\n\n          if (document.querySelector(header)) {\n            var header_comp = document.querySelector(header);\n            var inbord_big_div = document.createElement('div');\n            inbord_big_div.setAttribute('id', biglivebox_slot);\n            header_comp.parentNode.insertBefore(inbord_big_div, header_comp.nextSibling);\n            var inbord_small_div = document.createElement('div');\n            inbord_small_div.setAttribute('id', livebox_slot);\n            header_comp.parentNode.insertBefore(inbord_small_div, header_comp.nextSibling);\n          }\n\n          var hasVisited = sessionStorage.getItem('Site_visited');\n          window.show_biglivebox = false;\n\n          if (document.referrer == \"\" && !hasVisited) {\n            window.show_biglivebox = true;\n            this.RenderBiglivebox();\n            sessionStorage.setItem('Site_visited', true);\n          }\n\n          var _is_app = AdUnitFunctionsClassObj.getUrlVars_func(\"IsApp\") == \"true\";\n\n          if (_is_app) {\n            this.RenderSmallInbord();\n            console.log(\"IApp on - no interstitial\");\n          } else if (window.show_biglivebox == false && localStorage.getItem('ynet_mobileweb_interstitial_adx_displayed')) {\n            localStorage.removeItem('maavaronAdx');\n            localStorage.removeItem('ynet_mobileweb_interstitial_adx_displayed');\n            this.RenderSmallInbord();\n          } else {\n            if (this.showMaaavaronSticky == 0) {\n              if (window.show_biglivebox == false || window.show_biglivebox == false && window.dcCG == 'article' || window.dcPath.includes(\"-1.Home\") && hasVisited && window.show_biglivebox == false && (window.performance && window.performance.navigation.type == window.performance.navigation.TYPE_BACK_FORWARD || localStorage.getItem('BACK_HOME_CLICKED'))) {\n                this.defineSlots_func(\"ads.interstitial.inner\", [[1, 1], [1, 2]]);\n                var Interstitial_not_empty = true;\n                var InterstitialMobileLoaded = false;\n                _InfrastructureClass__WEBPACK_IMPORTED_MODULE_9__[\"default\"].SlotRenderEnd(function (event) {\n                  if (event.slot == _AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].Define_slots[\"ads.interstitial.inner\"]) {\n                    if (!InterstitialMobileLoaded) {\n                      if (!event.isEmpty) {\n                        if (document.getElementById(\"closeButton\")) {\n                          document.getElementById(\"closeButton\").remove();\n                        }\n\n                        if (document.getElementById(\"b1142532\")) {\n                          document.getElementById(\"b1142532\").remove();\n                        }\n\n                        window.Close = function () {\n                          //googletag.cmd.push(function() { googletag.destroySlots([AdUnitPropertiesClassObj.Define_slots[\"ads.interstitial.inner\"]]); }); \n                          try {\n                            document.querySelector('#dcMaavaronDiv').remove();\n                          } catch (e) {}\n\n                          document.getElementById(\"ads.interstitial.inner\").style.height = '0px';\n                          document.getElementById(\"ads.interstitial.inner\").style.display = 'none';\n\n                          try {\n                            document.getElementById(\"Close_btn_interstitial\").style.display = 'none';\n                          } catch (e) {}\n                        };\n\n                        setTimeout(function () {\n                          var div_interstitial = parent.document.getElementById(\"ads.interstitial.inner\");\n                          var img_interstitial = document.createElement(\"img\");\n                          img_interstitial.id = \"Close_btn_interstitial\";\n                          img_interstitial.src = \"https://totalmedia2.ynet.co.il/new_gpt/ynet_mutam/close.png\";\n                          img_interstitial.setAttribute(\"onClick\", \"window.Close();\");\n                          img_interstitial.setAttribute(\"style\", \"cursor: pointer; position: fixed; top: 14px; left: 14px; z-index: 9999999999;\");\n                          div_interstitial.appendChild(img_interstitial);\n                        }, 300);\n                      } else {\n                        AdUnitFunctionsClassObj.RenderSmallInbord();\n                        Interstitial_not_empty = false;\n                      }\n\n                      InterstitialMobileLoaded = true;\n                    }\n                  }\n                });\n\n                if (Interstitial_not_empty) {\n                  this.RenderSmallInbord();\n                }\n              }\n            } else if (window.show_biglivebox == false) {\n              this.RenderSmallInbord();\n            }\n          }\n        }\n\n        if (window.ynet_responsive_sites && window.ynet_responsive_special == false) {\n          if (this.showMaaavaronSticky == 0) {\n            this.defineSlots_func(\"ads.banner\", [[320, 50], [360, 50]]);\n            _AdUnitStylesClass__WEBPACK_IMPORTED_MODULE_6__[\"default\"][\"ads.sticky\"](\"ads.sticky\");\n          }\n\n          if (_AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].Slots[\"ads.strip.content.1\"]) {\n            this.defineSlots_func(\"ads.strip.content.1\", ['fluid']);\n            document.getElementById(\"ads.strip.content.1\").setAttribute(\"style\", \"width:100%; height:auto;\");\n          }\n\n          if (_AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].Slots[\"ads.strip.content.2\"]) {\n            this.defineSlots_func(\"ads.strip.content.2\", ['fluid']);\n            document.getElementById(\"ads.strip.content.2\").setAttribute(\"style\", \"width:100%; height:auto;\");\n          }\n\n          if (_AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].Slots[\"ads.box.content.1\"]) {\n            this.defineSlots_func(\"ads.box.content.1\", ['fluid']);\n            document.getElementById(\"ads.box.content.1\").setAttribute(\"style\", \"width:100%; height:auto;\");\n          } //14004\n\n\n          if (window.dcCG == \"sub\" && document.querySelector(\".article-headlines-auto-pplus\")) {\n            if (document.querySelector(\".PplusArticleHeadlinesAuto.show-ad-true\")) {\n              var banner_sizes = [['fluid']];\n              var flash_elements = document.querySelectorAll(\".PplusArticleHeadlinesAuto .slotView\");\n              var element_array = Array.from(flash_elements);\n\n              for (var i = 1; i < 3; i++) {\n                var banner = document.createElement('div');\n                banner.setAttribute('id', 'ads.strip.ordering.' + i);\n                banner.setAttribute('style', 'display: flex; justify-content: center;');\n\n                if (element_array.length >= 4 * i && element_array[4 * i] != undefined) {\n                  element_array[4 * i - 1].parentNode.insertBefore(banner, element_array[4 * i - 1].nextSibling);\n                  this.defineSlots_func(banner.id, banner_sizes);\n                }\n              }\n            }\n          }\n\n          if (window.dcCG == \"main\" && document.querySelector(\".pplus-multi-article\")) {\n            if (document.querySelector(\".PplusMultiArticleComponenta.show-ad-true\")) {\n              var _banner_sizes = [['fluid'], [360, 200], [320, 200]];\n\n              var _flash_elements = document.querySelectorAll(\".PplusMultiArticleComponenta .slotView\");\n\n              var _element_array = Array.from(_flash_elements);\n\n              for (var _i9 = 1; _i9 < 3; _i9++) {\n                var _banner = document.createElement('div');\n\n                _banner.setAttribute('id', 'ads.inbox.' + _i9);\n\n                _banner.setAttribute('style', 'display: flex; justify-content: center;');\n\n                if (_element_array.length >= 4 * _i9 && _element_array[4 * _i9] != undefined) {\n                  _element_array[4 * _i9 - 1].parentNode.insertBefore(_banner, _element_array[4 * _i9 - 1].nextSibling);\n\n                  this.defineSlots_func(_banner.id, _banner_sizes);\n                }\n              }\n            }\n          }\n        }\n\n        if (window.ynet_responsive_sites && window.dcCG == \"article\") {\n          if (document.getElementById(\"ads.box\") && document.getElementById(\"ads.box\").classList.contains(\"CommentsBox\")) {\n            document.getElementById(\"ads.box\").setAttribute(\"style\", \"display: flex !important;\");\n            this.defineSlots_func(\"ads.box\", [[300, 250], ['fluid']]);\n            googletag.cmd.push(function () {\n              googletag.display(\"ads.box\");\n            }); // document.getElementById(\"ads.box\").setAttribute(\"style\", \"display: flex !important; margin: 10.625vw auto; justify-content: center; text-align:center;\");                             \n\n            _InfrastructureClass__WEBPACK_IMPORTED_MODULE_9__[\"default\"].SlotRenderEnd(function (event) {\n              var BoxLoaded = false;\n\n              if (event.slot == _AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].Define_slots[\"ads.box\"]) {\n                if (!BoxLoaded) {\n                  if (!event.isEmpty) {\n                    document.getElementById(\"ads.box\").setAttribute(\"style\", \"display: flex !important; margin: 10.625vw auto; justify-content: center; text-align:center;\");\n                  }\n\n                  BoxLoaded = true;\n                }\n              }\n            });\n          }\n        }\n      } else {\n        var ii;\n\n        (function () {\n          if (window.dcSite == \"ynt\" || window.dcSite == \"ynusa\") {\n            if ((window.dcCG == \"main\" || window.dcCG == \"article\" || window.dcCG == \"sub\") && document.getElementById(_this3.Maavaron_slot) != undefined) {\n              //   if (true) {\n              // if number less than 4, get parameter dcunigpt = view(number), if more than 4 then don't get parameter\n              if (document.getElementById(\"maavaronstyle\") != null) {\n                document.getElementById(\"maavaronstyle\").innerHTML = \"\";\n              }\n\n              _this3.Double_Jumbo = true;\n\n              if (!_this3.Double_Jumbo) {\n                document.getElementById(_this3.Maavaron_slot).innerHTML = \"\";\n              }\n\n              if (document.querySelector(\".grid1280\") != null || document.querySelector(\".grid1280\") != undefined || document.querySelector(\".grid1280_2\") != null || document.querySelector(\".grid1280_2\") != undefined || document.querySelector(\".magazine_grid1280\") != null || document.querySelector(\".magazine_grid1280\") != undefined || document.querySelector(\".hContainer.pplus\") || document.querySelector(\".magazine2025\")) {\n                _this3.defineSlots_func(\"ads.top\", [[1, 1], [1, 2], [728, 90], [970, 90], [970, 250], [1000, 200], [970, 130], [970, 350], [970, 100], [1192, 250], [1192, 350], [1192, 90], [1192, 100], [1192, 130]], \"\", \"\");\n              } else {\n                _this3.defineSlots_func(\"ads.top\", [[1, 1], [1, 2], [728, 90], [970, 90], [970, 250], [1000, 200], [970, 130], [970, 350], [970, 100]], \"\", \"\");\n              } // define Maavaron\n\n\n              if (window.frequencyLogic && localStorage.frequencyLogic != undefined && frequencyLogic.displayedlast.includes(\"adx\") && frequencyLogic.add == \"loaded\") {\n                localStorage.removeItem('frequencyLogic');\n              } else {\n                var is_adx = window.is_adx == false ? false : true;\n\n                if (is_adx) {\n                  // Define a web interstitial ad slot.\n                  // https://developers.google.com/publisher-tag/samples/display-web-interstitial-ad?hl=en\n                  var interstitialSlot;\n                  googletag.cmd.push(function () {\n                    interstitialSlot = googletag.defineOutOfPageSlot(\"/6870/ynet/desktop/interstitial.adx/ynet\", googletag.enums.OutOfPageFormat.INTERSTITIAL); // Slot returns null if the page or device does not support interstitials.\n\n                    if (interstitialSlot) {\n                      // Enable optional interstitial triggers and register the slot.\n                      interstitialSlot.addService(googletag.pubads()).setConfig({\n                        interstitial: {\n                          triggers: {\n                            navBar: true,\n                            unhideWindow: true\n                          }\n                        }\n                      });\n                      console.log(\"Interstitial is loading...\");\n                      googletag.pubads().addEventListener(\"slotOnload\", function (event) {\n                        if (interstitialSlot === event.slot) {\n                          console.log(\"Interstitial is loaded.\");\n                        }\n                      });\n                    }\n\n                    googletag.display(interstitialSlot);\n                  });\n                }\n\n                _this3.defineSlots_func(_this3.Maavaron_slot, [[1, 1], [2, 1], [970, 250]], \"\", \"gpt_maavaron\");\n              }\n\n              var MaavaronLoaded = false;\n              var video_on = \"\";\n              var cont_wh = document.getElementById(\"content-w\");\n              var content_wh = cont_wh !== null;\n              _InfrastructureClass__WEBPACK_IMPORTED_MODULE_9__[\"default\"].SlotRenderEnd(function (event) {\n                var video_data = \"\";\n\n                if (event.slot == _AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].Define_slots[\"ads.interstitial\"]) {\n                  if (!MaavaronLoaded) {\n                    if (!event.isEmpty) {\n                      if (document.getElementById('blanket') != undefined || document.getElementById('blanket') != null) {\n                        document.getElementById('blanket').style.display = 'none';\n                      }\n\n                      document.getElementsByTagName('body')[0].style.setProperty('overflow', 'visible', 'important');\n                      that.is_maavaron = true;\n\n                      if (content_wh) {\n                        cont_wh.style.display = \"none\";\n                      }\n\n                      try {\n                        video_on = document.getElementsByClassName(\"video-container-flp6\");\n\n                        for (var _i10 = 0; _i10 < video_on.length; _i10++) {\n                          var iframe_video = video_on[_i10].children[0];\n                          iframe_video.src = \"\";\n                        }\n                      } catch (ex) {\n                        console.log(ex);\n                      }\n                    } else {\n                      document.getElementsByTagName('body')[0].style.setProperty('overflow', 'visible', 'important');\n\n                      if (document.getElementById('blanket') != undefined || document.getElementById('blanket') != null) {\n                        document.getElementById('blanket').style.display = 'none';\n                      }\n\n                      video_data = _MainFanctionClass__WEBPACK_IMPORTED_MODULE_10__[\"default\"].videoOff_func();\n                    }\n\n                    MaavaronLoaded = true;\n\n                    if (video_data != \"\") {\n                      video_on.src = video_data;\n                    }\n                  }\n                }\n              });\n            } else {\n              if (document.querySelector(\".grid1280\") != null || document.querySelector(\".grid1280\") != undefined || document.querySelector(\".grid1280_2\") != null || document.querySelector(\".grid1280_2\") != undefined || document.querySelector(\".magazine_grid1280\") != null || document.querySelector(\".magazine_grid1280\") != undefined || document.querySelector(\".hContainer.pplus\")) {\n                _this3.defineSlots_func(\"ads.top\", [[1, 1], [1, 2], [728, 90], [970, 90], [970, 250], [1000, 200], [970, 130], [970, 350], [970, 100], [1192, 250], [1192, 350], [1192, 90], [1192, 100], [1192, 130]], \"\", \"\");\n              } else {\n                _this3.defineSlots_func(\"ads.top\", [[1, 1], [1, 2], [728, 90], [970, 90], [970, 250], [1000, 200], [970, 130], [970, 350], [970, 100]], \"\", \"\");\n              }\n            }\n          }\n\n          var TopLoaded = false;\n          _InfrastructureClass__WEBPACK_IMPORTED_MODULE_9__[\"default\"].SlotRenderEnd(function (event) {\n            if (event.slot == _AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].Define_slots[\"ads.top\"]) {\n              if (!TopLoaded) {\n                if (!event.isEmpty) {\n                  var event_size = event.size + \"\";\n                  var event_w = event_size.split(\",\");\n\n                  if (event_w[0] == \"1192\") {\n                    document.getElementById(\"ads.top\").setAttribute(\"style\", \"background-color: rgb(233, 233, 233); clear: both; min-height: auto !important; text-align:center; padding: 0; width: 1202px; margin: 0px auto; border: 5px solid rgb(233, 233, 233); box-sizing: border-box;\");\n                  } else {\n                    var width_top = event_w[0] == \"1\" || event_size == \"fluid\" ? document.getElementById(\"ads.top\").offsetWidth : parseInt(event_w[0], 10);\n\n                    if (document.getElementById(\"yboximg\")) {\n                      width_top = document.getElementById(\"yboximg\").offsetWidth;\n                    }\n\n                    document.getElementById(\"ads.top\").setAttribute(\"style\", \"clear: both; min-height: auto !important; text-align:center; padding: 0 !important; width: \" + parseInt(width_top + 10) + \"px !important;\" + \"margin: 0px auto; border: 5px solid rgb(233, 233, 233); box-sizing: border-box;\");\n                  }\n\n                  if (event.size == \"970,130\" || event.size == \"970,90\" || event.size == \"980,100\" || event.size == \"1192,90\" || event.size == \"1192,130\" || event.size == \"1005,124\") {\n                    AdUnitFunctionsClassObj.findAllDiv_func();\n                    var gridfirma = document.querySelector(\".grid1280_2\") != null || document.querySelector(\".grid1280_2\") != undefined ? true : false;\n                    var newgrid = document.querySelector(\".grid1280\") != null || document.querySelector(\".grid1280\") != undefined || document.querySelector(\".grid1280_2\") != null || document.querySelector(\".grid1280_2\") != undefined ? 1470 : 1200;\n\n                    if (gridfirma == false && (window.innerWidth > newgrid && window.dcPath == \"8.Central-1.Home\" && _AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].Slots[\"ads.mivzakon\"] && _AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].Define_mivzakon[\"ads.mivzakon\"] == undefined || window.innerWidth > newgrid && window.dcPath == \"2775.Knesset-32472.yuval1280\" && _AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].Slots[\"ads.mivzakon\"] && _AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].Define_mivzakon[\"ads.mivzakon\"] == undefined)) {\n                      _AdUnitTemplateFunctionsClass__WEBPACK_IMPORTED_MODULE_7__[\"default\"].defineMivzakon_function(\"ads.mivzakon\");\n                    }\n\n                    _MainFanctionClass__WEBPACK_IMPORTED_MODULE_10__[\"default\"].getStyleTop_func(event);\n                  }\n                }\n\n                TopLoaded = true;\n              }\n            }\n          });\n\n          _this3.findAllDiv_func(); //Browsi in house\n\n\n          if (window.dcCG == \"article\") _this3.add_Browsi_inhouse(\"ynet\"); //Mivzakim firma banners\n\n          if (document.querySelector(\".flash-ad-true\")) {\n            if (document.querySelector(\".AccordionSection\")) {\n              var _banner_sizes2 = [['fluid'], [728, 90]];\n\n              var _flash_elements2 = document.querySelectorAll(\".AccordionSection\");\n\n              var _element_array2 = Array.from(_flash_elements2);\n\n              for (var _i11 = 1; _i11 < 5; _i11++) {\n                var _banner2 = document.createElement('div');\n\n                _banner2.setAttribute('id', 'ads.flash.banner.' + _i11);\n\n                _banner2.setAttribute('style', 'margin:10px 29px 25px 0;');\n\n                if (_element_array2.length >= 5 * _i11 && _element_array2[6 * _i11] != undefined) {\n                  _element_array2[6 * _i11 - 1].parentNode.insertBefore(_banner2, _element_array2[6 * _i11 - 1].nextSibling);\n\n                  _this3.defineSlots_func(_banner2.id, _banner_sizes2);\n                }\n              }\n            }\n          } // define promo\n\n\n          if (document.getElementById(\"ads.promo.magazines\")) {\n            var promo_slot = \"ads.promo.magazines\";\n            var promo_banner = document.getElementById(promo_slot);\n            var promo_size = promo_banner.getAttribute(\"data-ad-sizes\");\n            var promo_size_obj;\n\n            if (promo_size == undefined || promo_size == null || promo_size == [null, null] || promo_size.includes(null)) {\n              promo_size_obj = [[1192, 100], [970, 125]];\n            } else {\n              promo_size_obj = JSON.parse(promo_size);\n            }\n\n            var promo_fluid = promo_banner.getAttribute(\"data-fluid-checked\");\n\n            if (promo_fluid == \"true\" || promo_fluid == true) {\n              var new_promo_sizes_obj;\n\n              if (promo_size_obj[1][0] == undefined) {\n                new_promo_sizes_obj = [promo_size_obj, ['fluid']];\n              } else {\n                new_promo_sizes_obj = [].concat(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0___default()(promo_size_obj), [['fluid']]);\n              }\n\n              _this3.defineSlots_func(promo_slot, new_promo_sizes_obj);\n            } else {\n              _this3.defineSlots_func(promo_slot, promo_size_obj);\n            }\n\n            document.getElementById(promo_slot).setAttribute(\"style\", \"background-color: #ffffff; margin:0 auto 15px auto; text-align:center; display: flex; justify-content: center;\");\n          }\n\n          if (_AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].Slots[_this3.Ozen_right]) {\n            if (window.innerWidth > 1520) {\n              _this3.defineSlots_func(_this3.Ozen_right, _AdUnitAdditionalStylesClass__WEBPACK_IMPORTED_MODULE_4__[\"default\"].resizeOzen_func());\n\n              _AdUnitStylesClass__WEBPACK_IMPORTED_MODULE_6__[\"default\"][_this3.Ozen_right](_this3.Ozen_right);\n            }\n          }\n\n          if (window.isAbroad == true && _AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].Slots[_this3.Ozen_left]) {\n            _this3.defineSlots_func(_this3.Ozen_left, _AdUnitAdditionalStylesClass__WEBPACK_IMPORTED_MODULE_4__[\"default\"].resizeOzenYnsYnv_func());\n\n            _AdUnitStylesClass__WEBPACK_IMPORTED_MODULE_6__[\"default\"][_this3.Ozen_left](_this3.Ozen_left);\n          }\n\n          if (window.isAbroad == true && _AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].Slots[\"ads.video_ynettv\"]) {\n            _this3.defineSlots_func(\"ads.video_ynettv\", [1, 1]);\n          }\n\n          if (document.querySelector(\".grid1280_2\") != null || document.querySelector(\".grid1280_2\") != undefined) {\n            if (_AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].Slots[\"ads.box.elections\"]) {\n              _this3.defineSlots_func(\"ads.box.elections\", [190, 218]);\n            }\n\n            if (_AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].Slots[\"ads.box.nadlan.1\"]) {\n              _this3.defineSlots_func(\"ads.box.nadlan.1\", [['fluid'], [190, 188]]);\n            }\n\n            if (_AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].Slots[\"ads.box.nadlan.2\"]) {\n              _this3.defineSlots_func(\"ads.box.nadlan.2\", [['fluid'], [190, 188]]);\n            }\n\n            if (_AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].Slots[\"ads.box.nadlan.3\"]) {\n              _this3.defineSlots_func(\"ads.box.nadlan.3\", [['fluid'], [190, 188]]);\n            }\n\n            if (_AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].Slots[\"ads.box.laisha.1\"]) {\n              _this3.defineSlots_func(\"ads.box.laisha.1\", [['fluid'], [268, 305]]);\n            }\n\n            if (_AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].Slots[\"ads.box.laisha.2\"]) {\n              _this3.defineSlots_func(\"ads.box.laisha.2\", [['fluid'], [268, 305]]);\n            }\n\n            if (_AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].Slots[\"ads.box.menta.1\"]) {\n              _this3.defineSlots_func(\"ads.box.menta.1\", [['fluid'], [190, 218]]);\n            }\n\n            for (var bcontent_i = 1; bcontent_i < 10; bcontent_i++) {\n              if (_AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].Slots[\"ads.box.content.\" + bcontent_i]) {\n                _this3.defineSlots_func(\"ads.box.content.\" + bcontent_i, [['fluid'], [190, 210]]);\n              }\n            }\n\n            var menta_banners = document.querySelectorAll('div[id^=\"ads.box.menta\"]');\n            menta_banners.forEach(function (userItem) {\n              var unit = userItem.id;\n\n              if (userItem != undefined) {\n                var current = userItem;\n                var style_div = document.createElement(\"style\");\n                style_div.innerHTML = \"div[id='\".concat(unit, \"'], div[id='\").concat(unit, \"'] iframe {\\n           min-height: 218px !important;                      \\n           }\");\n                current.parentNode.insertBefore(style_div, current.nextSibling);\n              }\n\n              var MentaLoaded = false;\n              _InfrastructureClass__WEBPACK_IMPORTED_MODULE_9__[\"default\"].SlotRenderEnd(function (event) {\n                if (event.slot == _AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].Define_slots[unit]) {\n                  if (!MentaLoaded) {\n                    if (!event.isEmpty) {\n                      var splited_id = unit.split(\"ads.\");\n\n                      if (document.querySelector('iframe[id*=' + '\"' + splited_id[1] + '\"' + ']') != null || document.querySelector('iframe[id*=' + '\"' + splited_id[1] + '\"' + ']') != undefined) {\n                        var banner_style = document.querySelector('iframe[id*=' + '\"' + splited_id[1] + '\"' + ']').style;\n                        banner_style.minHeight = \"218px\";\n                      }\n                    }\n\n                    MentaLoaded = true;\n                  }\n                }\n              });\n            });\n            var nadlan_banners = document.querySelectorAll('div[id^=\"ads.box.nadlan\"]');\n            nadlan_banners.forEach(function (userItem) {\n              var unit = userItem.id;\n\n              if (userItem != undefined) {\n                var current = userItem;\n                var style_div = document.createElement(\"style\");\n                style_div.innerHTML = \"div[id='\".concat(unit, \"'], div[id='\").concat(unit, \"'] iframe {\\n           min-height: 178px !important;                      \\n           }\");\n                current.parentNode.insertBefore(style_div, current.nextSibling);\n              }\n\n              var NadlanLoaded = false;\n              _InfrastructureClass__WEBPACK_IMPORTED_MODULE_9__[\"default\"].SlotRenderEnd(function (event) {\n                if (event.slot == _AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].Define_slots[unit]) {\n                  if (!NadlanLoaded) {\n                    if (!event.isEmpty) {\n                      var splited_id = unit.split(\"ads.\");\n\n                      if (document.querySelector('iframe[id*=' + '\"' + splited_id[1] + '\"' + ']') != null || document.querySelector('iframe[id*=' + '\"' + splited_id[1] + '\"' + ']') != undefined) {\n                        var banner_style = document.querySelector('iframe[id*=' + '\"' + splited_id[1] + '\"' + ']').style;\n                        banner_style.minHeight = \"178px\";\n                      }\n                    }\n\n                    NadlanLoaded = true;\n                  }\n                }\n              });\n            });\n            var laisha_banners = document.querySelectorAll('div[id^=\"ads.box.laisha\"]');\n            laisha_banners.forEach(function (userItem) {\n              var unit = userItem.id;\n\n              if (userItem != undefined) {\n                var current = userItem;\n                var style_div = document.createElement(\"style\");\n                style_div.innerHTML = \"div[id='\".concat(unit, \"'], div[id='\").concat(unit, \"'] iframe {\\n           min-height: 287px !important;                      \\n           }\");\n                current.parentNode.insertBefore(style_div, current.nextSibling);\n              }\n\n              var LaishaLoaded = false;\n              _InfrastructureClass__WEBPACK_IMPORTED_MODULE_9__[\"default\"].SlotRenderEnd(function (event) {\n                if (event.slot == _AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].Define_slots[unit]) {\n                  if (!LaishaLoaded) {\n                    if (!event.isEmpty) {\n                      var splited_id = unit.split(\"ads.\");\n\n                      if (document.querySelector('iframe[id*=' + '\"' + splited_id[1] + '\"' + ']') != null || document.querySelector('iframe[id*=' + '\"' + splited_id[1] + '\"' + ']') != undefined) {\n                        var banner_style = document.querySelector('iframe[id*=' + '\"' + splited_id[1] + '\"' + ']').style;\n                        banner_style.minHeight = \"287px\";\n                      }\n                    }\n\n                    LaishaLoaded = true;\n                  }\n                }\n              });\n            }); // componenta strip marketing\n\n            var strip_marketing_banners = document.querySelectorAll('div[id^=\"ads.box.content\"]');\n            strip_marketing_banners.forEach(function (userItem) {\n              var unit = userItem.id;\n\n              if (userItem != undefined) {\n                var current = userItem;\n                var style_div = document.createElement(\"style\");\n                style_div.innerHTML = \"div[id='\".concat(unit, \"'], div[id='\").concat(unit, \"'] iframe {\\n           min-height: 210px !important;                      \\n           }\");\n                current.parentNode.insertBefore(style_div, current.nextSibling);\n              }\n\n              var StripMarletingLoaded = false;\n              _InfrastructureClass__WEBPACK_IMPORTED_MODULE_9__[\"default\"].SlotRenderEnd(function (event) {\n                if (event.slot == _AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].Define_slots[unit]) {\n                  if (!StripMarletingLoaded) {\n                    if (!event.isEmpty) {\n                      var splited_id = unit.split(\"ads.\");\n\n                      if (document.querySelector('iframe[id*=' + '\"' + splited_id[1] + '\"' + ']') != null || document.querySelector('iframe[id*=' + '\"' + splited_id[1] + '\"' + ']') != undefined) {\n                        var banner_style = document.querySelector('iframe[id*=' + '\"' + splited_id[1] + '\"' + ']').style;\n                        banner_style.minHeight = \"210px\";\n                      }\n                    }\n\n                    StripMarletingLoaded = true;\n                  }\n                }\n              });\n            });\n\n            if (_AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].Slots[\"ads.strip.channel.1\"]) {\n              _this3.defineSlots_func(\"ads.strip.channel.1\", [['fluid'], [300, 256]]);\n\n              var StripBannerLoaded = false;\n              _InfrastructureClass__WEBPACK_IMPORTED_MODULE_9__[\"default\"].SlotRenderEnd(function (event) {\n                if (event.slot == _AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].Define_slots[\"ads.strip.channel.1\"]) {\n                  if (!StripBannerLoaded) {\n                    if (!event.isEmpty) {\n                      var Stripstyle_banner = document.createElement(\"style\");\n                      Stripstyle_banner.innerHTML = \"div[id='ads.strip.channel.1'] {\\n                width:300px !important;\\n                height: 280px !important; \\n                border-bottom: 5px solid #1417ac;               \\n               }\\n               div[id='ads.strip.channel.1'] iframe {\\n                 width:300px !important;\\n                 height: 280px !important;\\n               }\";\n                      var strip_banner = document.getElementById(\"ads.strip.channel.1\"); //strip_banner.appendChild(Stripstyle_banner); \n\n                      strip_banner.parentNode.insertBefore(Stripstyle_banner, strip_banner.nextSibling);\n                    }\n\n                    StripBannerLoaded = true;\n                  }\n                }\n              });\n            }\n          } //Banners on the page, where blog widget is exists\n\n\n          if (document.querySelector(\".blogs-auto-feed-widget\") || document.querySelector(\".article-blog-componenta-wrapper\")) {\n            // wait for elements - appears just when scrolling, checking for element and if a div was created\n            window.addEventListener('scroll', function (event) {\n              function create_and_define(num, after_div) {\n                var blog_banner_sizes = [['fluid'], [728, 90]];\n                var blog_banner = document.createElement('div');\n                blog_banner.setAttribute('id', 'ads.inread.' + num);\n                var blog_banner_style = document.createElement(\"style\");\n                blog_banner_style.innerHTML = \"div[id='\".concat(blog_banner.id, \"'] {\\n                  display: flex !important;\\n                  justify-content: center !important;\\n                  margin: 0px 0 15px 0;\\n                  text-align: center;            \\n                 }\");\n                var blogs_elements = document.querySelectorAll(\".blogs-item-wrapper\");\n                var blogs_array = Array.from(blogs_elements);\n                blogs_array[after_div].parentNode.insertBefore(blog_banner, blogs_array[after_div].nextSibling);\n                blog_banner.parentNode.insertBefore(blog_banner_style, blog_banner.nextSibling);\n                AdUnitFunctionsClassObj.defineSlots_func(blog_banner.id, blog_banner_sizes);\n                googletag.cmd.push(function () {\n                  googletag.display(\"ads.inread.\" + num);\n                }); //blog_banner.setAttribute('style','display: flex !important; justify-content: center; margin: 0px 0 15px 0; text-align: center;');\n              }\n\n              if (document.querySelectorAll(\".blogs-item-wrapper\")[3] && !document.getElementById(\"ads.inread.1\")) {\n                create_and_define(1, 3);\n              } else if (document.querySelectorAll(\".blogs-item-wrapper\")[7] && !document.getElementById(\"ads.inread.2\")) {\n                create_and_define(2, 7);\n              } else if (document.querySelectorAll(\".blogs-item-wrapper\")[11] && !document.getElementById(\"ads.inread.3\")) {\n                create_and_define(3, 11);\n              } else if (document.querySelectorAll(\".blogs-item-wrapper\")[15] && !document.getElementById(\"ads.inread.4\")) {\n                create_and_define(4, 15);\n              }\n            });\n          }\n\n          var magazines2025 = document.querySelector(\".magazine2025\");\n\n          if (window.ynet_sites && !magazines2025) {\n            if (_AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].Slots[\"ads.strip.content.1\"]) {\n              _this3.defineSlots_func(\"ads.strip.content.1\", [['fluid'], [344, 100]]);\n\n              var stripcontent_banner_1 = document.createElement(\"style\");\n              stripcontent_banner_1.innerHTML = \"div[id='ads.strip.content.1']{min-height: 100px !important;}\\n        div[id='ads.strip.content.1'] iframe {min-height: 100px !important;}\";\n              var strip_banner_1 = document.getElementById(\"ads.strip.content.1\");\n              strip_banner_1.parentNode.insertBefore(stripcontent_banner_1, strip_banner_1.nextSibling);\n            }\n\n            if (_AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].Slots[\"ads.strip.content.2\"]) {\n              _this3.defineSlots_func(\"ads.strip.content.2\", [['fluid'], [344, 100]]);\n\n              var stripcontent_banner_2 = document.createElement(\"style\");\n              stripcontent_banner_2.innerHTML = \"div[id='ads.strip.content.2']{min-height: 100px !important;}\\n        div[id='ads.strip.content.2'] iframe {min-height: 100px !important;}\";\n              var strip_banner_2 = document.getElementById(\"ads.strip.content.2\");\n              strip_banner_2.parentNode.insertBefore(stripcontent_banner_2, strip_banner_2.nextSibling);\n            }\n\n            if (_AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].Slots[\"ads.box.content.1\"]) {\n              _this3.defineSlots_func(\"ads.box.content.1\", ['fluid']);\n            }\n          } // laisha new design\n\n\n          if (magazines2025) {\n            var define_natives_magazines = function define_natives_magazines(id, sizes, min_size) {\n              if (_AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].Slots[id]) {\n                window.AdUnitFunctionsClassObj.defineSlots_func(id, sizes);\n                var add_style = document.createElement(\"style\");\n                add_style.innerHTML = \"div[id='\".concat(id, \"']{min-height: \").concat(min_size, \"px !important;}\\n          div[id='\").concat(id, \"'] iframe {min-height:  \").concat(min_size, \"px !important;}\");\n                var add_banner_1 = document.getElementById(id);\n                add_banner_1.parentNode.insertBefore(add_style, add_banner_1.nextSibling);\n              }\n            };\n\n            define_natives_magazines(\"ads.dontmiss.1\", [['fluid'], [295, 410]], 410);\n            define_natives_magazines(\"ads.strip.content.1\", [['fluid'], [299, 70]], 70);\n            define_natives_magazines(\"ads.hotbox.1\", [['fluid'], [595, 549]], 549);\n            define_natives_magazines(\"ads.box.marketing.1\", [['fluid'], [380, 384]], 384);\n            define_natives_magazines(\"ads.box.marketing.2\", [['fluid'], [380, 384]], 384);\n          }\n\n          for (var hotbox_i = 1; hotbox_i < 3; hotbox_i++) {\n            if (_AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].Slots[\"ads.hotbox.native.\" + hotbox_i]) {\n              _this3.defineSlots_func(\"ads.hotbox.native.\" + hotbox_i, [['fluid'], [190, 208]]);\n            }\n          }\n\n          var hotbox_banners = document.querySelectorAll('div[id^=\"ads.hotbox.native\"]');\n          hotbox_banners.forEach(function (Item) {\n            var unit_hotbox = Item.id;\n            var hotboxLoaded = false;\n            _InfrastructureClass__WEBPACK_IMPORTED_MODULE_9__[\"default\"].SlotRenderEnd(function (event) {\n              if (event.slot == _AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].Define_slots[unit_hotbox]) {\n                if (!hotboxLoaded) {\n                  if (!event.isEmpty) {\n                    var style_hotbox = document.createElement(\"style\");\n                    style_hotbox.innerHTML = \"div[id='\".concat(unit_hotbox, \"'] {\\n                 width:190px !important;\\n                 height: 208px !important;                \\n              }\\n              div[id='\").concat(unit_hotbox, \"'] iframe {\\n                width:190px !important;\\n                height: 208px !important;\\n              }\");\n                    Item.parentNode.insertBefore(style_hotbox, Item.nextSibling);\n                    var splited_id = unit_hotbox.split(\"ads.\");\n\n                    if (document.querySelector('iframe[id*=' + '\"' + splited_id[1] + '\"' + ']') != null || document.querySelector('iframe[id*=' + '\"' + splited_id[1] + '\"' + ']') != undefined) {\n                      var hotbox_style = document.querySelector('iframe[id*=' + '\"' + splited_id[1] + '\"' + ']').style;\n                      hotbox_style.maxHeight = \"218px\";\n                    }\n                  }\n\n                  hotboxLoaded = true;\n                }\n              }\n            });\n          }); //Get all general banners on the page (with class general_banner_ad) and define them.\n\n          var general_divs = new Array();\n          var old_divs = new Array();\n          var new_divs = new Array();\n          var className = window.general_banners_divs;\n          var div_sizes = window.general_banners_divs_sizes;\n          var classnameCount = className.length;\n          var topstripon = \"ads.topstripon_desktop.1\";\n          var bottomstripon = \"ads.bottomstripon_desktop.1\";\n          var box_1 = \"ads.300x250.1\";\n          var box_2 = \"ads.300x250.2\";\n          var box_3 = \"ads.300x250.3\";\n          var box_4 = \"ads.300x250.4\";\n\n          if (className != \"\") {\n            var _loop = function _loop(j) {\n              var div_size = div_sizes[j];\n              var w_div = div_size.substr(0, div_size.indexOf(\"x\"));\n              var h_div = div_size.substr(div_size.indexOf(\"x\") + 1);\n              general_divs.push([className[j], parseInt(w_div, 10), parseInt(h_div, 10)]);\n\n              if (_this3.newMedia == 'True') {\n                topstripon = \"ads.topstripon.1\";\n                bottomstripon = \"ads.bottomstripon.1\";\n                box_1 = \"ads.box.1\";\n                box_2 = \"ads.box.2\";\n                box_3 = \"ads.box.3\";\n                box_4 = \"ads.box.4\";\n                old_divs.push(\"ads.doublestripon_desktop.1\", \"ads.ivory_desktop.1\", \"ads.586x88.1\", \"ads.490x88.1\", \"ads.300x600.1\", \"ads.300x250.1\", \"ads.300x250.2\", \"ads.300x250.3\", \"ads.300x250.4\", \"ads.980x90.1\", \"ads.topstripon_desktop.1\", \"ads.bottomstripon_desktop.1\", \"ads.rightstripon_desktop.1\");\n                new_divs.push(\"ads.doublestripon.1\", \"ads.ivory.1\", \"ads.strip.channel.1\", \"ads.strip.1\", \"ads.bigbox.1\", \"ads.box.1\", \"ads.box.2\", \"ads.box.3\", \"ads.box.4\", \"ads.bottombanner.1\", \"ads.topstripon.1\", \"ads.bottomstripon.1\", \"ads.rightstripon.1\");\n                general_divs.map(function (gd) {\n                  var index = old_divs.indexOf(gd[0]);\n\n                  if (index > -1) {\n                    gd[0] = new_divs[index];\n                  }\n                });\n              }\n\n              if (general_divs[j][0] != box_1 && _this3.browsi_on_gpt == \"True\" || _this3.browsi_on_gpt == \"False\" || window.browsi_on_gpt == undefined) {\n                if (document.querySelector(\".grid1280\") != null || document.querySelector(\".grid1280\") != undefined || document.querySelector(\".grid1280_2\") != null || document.querySelector(\".grid1280_2\") != undefined) {\n                  if (general_divs[j][0] == \"ads.outofpage.1\") {\n                    _this3.defineSlots_func(general_divs[j][0], [1, 1]);\n                  } else if (general_divs[j][0] == box_1 || general_divs[j][0] == box_2 || general_divs[j][0] == box_3 || general_divs[j][0] == box_4 || general_divs[j][0] == \"ads.ivory.1\" || general_divs[j][0] == \"ads.topstripon.1\" || general_divs[j][0] == \"ads.rightstripon.1\" || general_divs[j][0] == \"ads.doublestripon.1\" || general_divs[j][0] == \"ads.rightbox_native.1\" || general_divs[j][0] == \"ads.bottombox_native.1\" || general_divs[j][0] == \"ads.bottombox_native.2\" || general_divs[j][0] == \"ads.rightbox_native.2\" || general_divs[j][0] == \"ads.150x200.1\" || general_divs[j][0] == \"ads.skyscraper.inner.1\" || general_divs[j][0] == \"ads.gray.big.strip.1\" || general_divs[j][0] == \"ads.gray.box.1\" || general_divs[j][0] == \"ads.gray.box.2\" || (general_divs[j][0] == \"ads.bottombox_native.4\" || general_divs[j][0] == \"ads.bottombox_native.3\") && (document.querySelector(\".grid1280_2\") != null || document.querySelector(\".grid1280_2\") != undefined)) {\n                    if (document.querySelector(\".Extended_banner\")) {\n                      var Extended_banner = document.querySelectorAll(\".Extended_banner\");\n\n                      for (var _i12 = 0; _i12 < Extended_banner.length; _i12++) {\n                        for (ii = 0; ii < Extended_banner[_i12].childNodes.length; ii++) {\n                          if (Extended_banner[_i12].childNodes[ii] != null) {\n                            if (Extended_banner[_i12].childNodes[ii].id == \"ads.gray.box.1\" || Extended_banner[_i12].childNodes[ii].id == \"ads.gray.box.2\") {\n                              var container_div = document.createElement(\"div\");\n                              container_div.setAttribute(\"class\", \"gray_box\");\n\n                              Extended_banner[_i12].appendChild(container_div);\n\n                              container_div.appendChild(Extended_banner[_i12].childNodes[ii]);\n                            }\n                          }\n                        }\n                      }\n                    }\n\n                    if (document.querySelector(\".TitleTab\")) {\n                      var container_banner = document.querySelectorAll(\".TitleTab\");\n\n                      for (var _i13 = 0; _i13 < container_banner.length; _i13++) {\n                        if (container_banner[_i13].innerHTML.indexOf(\"\") !== -1) {\n                          container_banner[_i13].setAttribute(\"style\", \"visibility:hidden;\");\n                        }\n                      }\n                    }\n\n                    var style_divs = document.createElement(\"style\");\n\n                    if (general_divs[j][0] == \"ads.gray.box.1\" || general_divs[j][0] == \"ads.gray.box.2\") {\n                      style_divs.innerHTML = \"div[id='\".concat(general_divs[j][0], \"'] {\\n                  width: 300px;\\n                  height: 250px !important;\\n                  display:flex;\\n                  margin: 0 auto;\\n                  align-items:center;                        \\n                }\\n                div .gray_box {\\n                  padding: 45px 37px 45px 37px;\\n                  background-color: #eeeeef; \\n                  height: 250px;                    \\n                }\\n                div[id='\").concat(general_divs[j][0], \"'] iframe {\\n                  width: 300px;\\n                  height: 250px !important;\\n                }\");\n                    } else if (general_divs[j][0] == \"ads.rightbox_native.1\" || general_divs[j][0] == \"ads.rightbox_native.2\") {\n                      if (document.querySelector('iframe[id*=\"rightbox_native.1\"]') != null || document.querySelector('iframe[id*=\"rightbox_native.1\"]') != undefined) {\n                        var b_style = document.querySelector('iframe[id*=\"rightbox_native.1\"]').style;\n                        b_style.minHeight = \"232px\";\n                      }\n\n                      style_divs.innerHTML = \"div[id='\".concat(general_divs[j][0], \"'] {\\n                      width: \").concat(general_divs[j][1], \"px;\\n                      height: \").concat(general_divs[j][2], \"px !important;\\n                      object-fit: contain;\\n                      box-shadow: 0 1px 3px 0 rgba(218, 218, 221, 0.8);\\n                      background-color: #fff;\\n                    }\\n                    div[id='\").concat(general_divs[j][0], \"'] iframe {\\n                      width: \").concat(general_divs[j][1], \"px;\\n                      height: \").concat(general_divs[j][2], \"px !important;\\n                      min-height: 232px !important;   \\n                    }\");\n                    } else {\n                      style_divs.innerHTML = \"div[id='\".concat(general_divs[j][0], \"'] {\\n                  width: \").concat(general_divs[j][1], \"px;\\n                  height: \").concat(general_divs[j][2], \"px !important;\\n                \\n              }\\n              div[id='\").concat(general_divs[j][0], \"'] iframe {\\n                  width: \").concat(general_divs[j][1], \"px;\\n                  height: \").concat(general_divs[j][2], \"px !important;\\n              }\");\n                    }\n\n                    if (document.getElementById(general_divs[j][0])) {\n                      var current = document.getElementById(general_divs[j][0]); //current.appendChild(style_div);    \n\n                      current.parentNode.insertBefore(style_divs, current.nextSibling);\n                    }\n\n                    if ((general_divs[j][0] == box_1 || general_divs[j][0] == box_2 || general_divs[j][0] == box_3 || general_divs[j][0] == box_4) && (document.querySelector(\".grid1280_2\") != null || document.querySelector(\".grid1280_2\") != undefined) && window.dcCG == \"home\" || general_divs[j][0] == \"ads.ivory.1\" || general_divs[j][0] == \"ads.topstripon.1\" || general_divs[j][0] == \"ads.rightstripon.1\" || general_divs[j][0] == \"ads.gray.big.strip.1\" || general_divs[j][0] == \"ads.skyscraper.inner.1\" || general_divs[j][0] == \"ads.doublestripon.1\" && (document.querySelector(\".grid1280\") != null || document.querySelector(\".grid1280\") != undefined)) {\n                      if (general_divs[j][0] == \"ads.gray.big.strip.1\") {\n                        _this3.defineSlots_func(general_divs[j][0], [[general_divs[j][1], general_divs[j][2]], [970, 90]]);\n\n                        document.getElementById(\"ads.gray.big.strip.1\").setAttribute(\"style\", \"background-color:#eeeeef; padding:35px 24px; margin:0 auto; text-align:center; display: flex; justify-content: center;\");\n                        var StripLoaded = false;\n                        _InfrastructureClass__WEBPACK_IMPORTED_MODULE_9__[\"default\"].SlotRenderEnd(function (event) {\n                          if (event.slot == _AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].Define_slots[\"ads.gray.big.strip.1\"]) {\n                            if (!StripLoaded) {\n                              if (!event.isEmpty) {\n                                var width_strip = general_divs[j][1];\n                                var strip_size = event.size + \"\";\n                                var strip_w = strip_size.split(\",\");\n\n                                if (strip_w[0] == \"970\") {\n                                  width_strip = 970;\n                                }\n\n                                var style_strip = document.createElement(\"style\");\n                                style_strip.innerHTML = \"div[id='ads.gray.big.strip.1'] {\\n                                   width:\".concat(width_strip, \"px !important;\\n                                   height: \").concat(general_divs[j][2], \"px !important;                \\n                                }\\n                                div[id='ads.gray.big.strip.1'] iframe {\\n                                  width:\").concat(width_strip, \"px !important;\\n                                  height: \").concat(general_divs[j][2], \"px !important;\\n                                }\");\n                                var strip = document.getElementById(general_divs[j][0]);\n                                strip.parentNode.insertBefore(style_strip, strip.nextSibling);\n                              }\n\n                              StripLoaded = true;\n                            }\n                          }\n                        });\n                      } else {\n                        _this3.defineSlots_func(general_divs[j][0], [general_divs[j][1], general_divs[j][2]]);\n                      }\n                    } else if (general_divs[j][0] == \"ads.gray.box.1\" || general_divs[j][0] == \"ads.gray.box.2\") {\n                      _this3.defineSlots_func(general_divs[j][0], [300, 250]);\n                    } else {\n                      _this3.defineSlots_func(general_divs[j][0], [[general_divs[j][1], general_divs[j][2]], ['fluid']]);\n                    }\n                  } else if (window.dcPath == \"8.Central-1.Home\" && general_divs[j][0] == topstripon || window.dcPath == \"2775.Knesset-32472.yuval1280\" && general_divs[j][0] == topstripon) {\n                    _this3.defineSlots_func(general_divs[j][0], [[general_divs[j][1], general_divs[j][2]], [[300, 102], [300, 100]]]);\n                  } else if (window.dcPath == \"8.Central-1.Home\" && general_divs[j][0] == \"ads.rightstripon_desktop.1\" || window.dcPath == \"2775.Knesset-32472.yuval1280\" && general_divs[j][0] == \"ads.rightstripon_desktop.1\") {\n                    _this3.defineSlots_func(general_divs[j][0], [[general_divs[j][1], general_divs[j][2]], [[150, 218]]]);\n                  } else {\n                    _this3.defineSlots_func(general_divs[j][0], [general_divs[j][1], general_divs[j][2]]);\n                  }\n                } else {\n                  if (general_divs[j][0] == \"ads.outofpage.1\") {\n                    _this3.defineSlots_func(general_divs[j][0], [1, 1]);\n                  } else if (window.dcPath == \"8.Central-1.Home\" && general_divs[j][0] != topstripon && general_divs[j][0] != bottomstripon || window.dcPath == \"2775.Knesset-32472.yuval1280\" && general_divs[j][0] != topstripon && general_divs[j][0] != bottomstripon || general_divs[j][0] == \"ads.150x200.1\" || general_divs[j][0] == box_1 || general_divs[j][0] == box_2 || general_divs[j][0] == box_3 || general_divs[j][0] == box_4) {\n                    _this3.defineSlots_func(general_divs[j][0], [[general_divs[j][1], general_divs[j][2]], ['fluid']]);\n                  } else if (document.querySelector(\".magazine_grid1280\") && (general_divs[j][0].includes(\"strip.marketing\") || general_divs[j][0].includes(\"strip.ordering\"))) {\n                    _this3.defineSlots_func(general_divs[j][0], [[general_divs[j][1], general_divs[j][2]], ['fluid']]);\n                  } else {\n                    _this3.defineSlots_func(general_divs[j][0], [general_divs[j][1], general_divs[j][2]]);\n                  }\n                }\n              }\n            };\n\n            for (var j = 0; j < classnameCount; j++) {\n              _loop(j);\n            }\n          }\n\n          if (document.querySelector(\".article-headlines-auto-pplus\")) {\n            if (document.querySelector(\".PplusArticleHeadlinesAuto.show-ad-true\")) {\n              var _banner_sizes3 = [['fluid'], [900, 200]];\n\n              var _flash_elements3 = document.querySelectorAll(\".PplusArticleHeadlinesAuto .slotView\");\n\n              var _element_array3 = Array.from(_flash_elements3);\n\n              for (var _i14 = 1; _i14 < 5; _i14++) {\n                var _banner3 = document.createElement('div');\n\n                _banner3.setAttribute('id', 'ads.strip.marketing.' + _i14);\n\n                _banner3.setAttribute('style', 'display: flex; justify-content: center;');\n\n                if (_element_array3.length >= 4 * _i14 && _element_array3[4 * _i14] != undefined) {\n                  _element_array3[4 * _i14 - 1].parentNode.insertBefore(_banner3, _element_array3[4 * _i14 - 1].nextSibling);\n\n                  _this3.defineSlots_func(_banner3.id, _banner_sizes3);\n                }\n              }\n\n              _AdUnitStylesClass__WEBPACK_IMPORTED_MODULE_6__[\"default\"][\"pplus_strips\"](\"pplus_strips\");\n            }\n          } // Function for adding ads into auto components\n\n\n          var bannerAtAutoCOmponents = function bannerAtAutoCOmponents(selector, id, sizes, item) {\n            var comp_version = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : \"new\";\n            var item_ad = document.createElement('div');\n            item_ad.setAttribute('id', id);\n            var item_ad_element = selector.querySelectorAll(\".slotView\")[item];\n            item_ad_element.parentNode.insertBefore(item_ad, item_ad_element.nextSibling);\n            window.AdUnitFunctionsClassObj.defineSlots_func(id, sizes);\n\n            if (id.includes(\"ads.strip.marketing\")) {\n              var add_style = comp_version == \"old\" ? \" margin-bottom:30px; \" : \"padding: 20px 0;border-bottom: 1px solid #D7D5D5;\";\n              item_ad.setAttribute('style', \"text-align:center;\".concat(add_style, \"display: flex; justify-content:center;\"));\n            }\n\n            if (id.includes(\"ads.box.marketing\")) item_ad.setAttribute('class', 'slotView');\n          }; // adding ads into auto components\n\n\n          var mamultiArticleMagazineAutoComponenta = document.querySelector(\".multiArticleMagazineAutoComponenta.show-ad-true\");\n          var magazine_headlines_old = document.querySelector(\".LaishaArticleHeadlines.show-ad-true\");\n          var magazine_headlines_new = document.querySelector(\".magazineArticleHeadlinesAuto.show-ad-true\");\n\n          if (mamultiArticleMagazineAutoComponenta) {\n            var ad_units = document.querySelectorAll(\".multiArticleMagazineAutoComponenta.show-ad-true\");\n            ad_units.forEach(function (y, index) {\n              bannerAtAutoCOmponents(y, \"ads.box.marketing.\" + parseInt(index + 1), [['fluid'], [380, 384]], 1);\n            });\n          }\n\n          if (window.ynet_sites && magazine_headlines_old && magazine_headlines_old.querySelectorAll(\".slotView\")[3] != undefined) {\n            bannerAtAutoCOmponents(magazine_headlines_old, \"ads.strip.marketing.1\", [['fluid'], [850, 180]], 3, \"old\");\n          }\n\n          if (window.ynet_sites && magazine_headlines_new && magazine_headlines_new.querySelectorAll(\".slotView\")[3] != undefined) {\n            [2, 5, 8].forEach(function (index, i) {\n              bannerAtAutoCOmponents(magazine_headlines_new, \"ads.strip.marketing.\".concat(i + 1), [['fluid'], [820, 184]], index);\n            });\n          }\n\n          if (_this3.dcPath.includes(\"3456.Magazine\") && document.querySelector(\".show-ad-true\")) {\n            if (document.querySelector(\".BlazerArticleHeadlines\")) {\n              var _banner_sizes4 = [['fluid'], [850, 187]];\n              var elements = document.querySelectorAll(\".BlazerArticleHeadlines .slotView\");\n\n              var _element_array4 = Array.from(elements);\n\n              for (var _i15 = 1; _i15 < 4; _i15++) {\n                var _banner4 = document.createElement('div');\n\n                _banner4.setAttribute('id', 'ads.strip.marketing.' + _i15);\n\n                _banner4.style.textAlign = \"center\";\n                _banner4.style.marginBottom = \"10px\";\n\n                if (_element_array4.length >= 3 && _i15 == 1) {\n                  _element_array4[3].parentNode.insertBefore(_banner4, _element_array4[3].nextSibling);\n\n                  _this3.defineSlots_func(_banner4.id, _banner_sizes4);\n                }\n\n                if (_element_array4.length >= 8 && _i15 == 2) {\n                  _element_array4[7].parentNode.insertBefore(_banner4, _element_array4[7].nextSibling);\n\n                  _this3.defineSlots_func(_banner4.id, _banner_sizes4);\n                }\n\n                if (_element_array4.length >= 12 && _i15 == 3) {\n                  _element_array4[11].parentNode.insertBefore(_banner4, _element_array4[11].nextSibling);\n\n                  _this3.defineSlots_func(_banner4.id, _banner_sizes4);\n                }\n              }\n            }\n          }\n\n          if (_AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].Slots[\"ads.sargel\"]) {\n            setTimeout(that.defineSargel_func(\"ads.sargel\"), 2500);\n          }\n\n          if (_AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].Slots['ads.plus.1']) {\n            that.defineSlots_func('ads.plus.1', [[490, 88], ['fluid']]);\n            googletag.cmd.push(function () {\n              googletag.display('ads.plus.1');\n            });\n          }\n\n          if (_AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].Slots[_this3.newspaper]) {\n            if (document.querySelector(\".grid1280\") != null || document.querySelector(\".grid1280\") != undefined || document.querySelector(\".grid1280_2\") != null || document.querySelector(\".grid1280_2\") != undefined) {\n              that.defineSlots_func(_this3.newspaper, [[970, 90], [970, 125], [1192, 90], [1192, 100]], \"\", \"\");\n            } else {\n              that.defineSlots_func(_this3.newspaper, [[970, 90], [970, 125]], \"\", \"\");\n            } // googletag.cmd.push(function() {\n            //   googletag.display(this.newspaper);\n            // });\n\n\n            _AdUnitStylesClass__WEBPACK_IMPORTED_MODULE_6__[\"default\"][\"ads.newspaper\"](\"ads.newspaper\");\n          }\n\n          var show_spot_1 = 1;\n\n          if (_this3.dccg == \"article\") {\n            for (var _i16 = 0; _i16 < _this3.dcTags.length; _i16++) {\n              if (_this3.dcTags[_i16] == \" \" || _this3.dcTags[_i16] == \" \") {\n                if (document.getElementById(\"ads.spot.1\") != null || document.getElementById(\"ads.spot.1\") != undefined) {\n                  document.getElementById(\"ads.spot.1\").style.display = 'none';\n                }\n\n                show_spot_1 = 0;\n              }\n            }\n\n            if (show_spot_1 == 1 && _AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].Slots[\"ads.spot.1\"]) {\n              that.defineSlots_func(\"ads.spot.1\", [300, 250], \"\", \"\"); //googletag.cmd.push(function () { googletag.display('ads.spot.1'); });\n            }\n          } //if (AdUnitPropertiesClassObj.Slots[\"ads.spot.17\"]) {\n          //that.defineSlots_func(\"ads.spot.17\", [300, 250], \"\", \"\");\n          //googletag.cmd.push(function () { googletakg.display('ads.spot.17'); });\n          //}\n          // function waitForComPplus(callback) {\n          //         var poops = setInterval(function(){\n          //             if(document.querySelector(pplus_headlines)) {\n          //                 clearInterval(poops);            \n          //                 callback();\n          //             }\n          //         }, 100);\n          // }\n          //  waitForComPplus(function() {\n          //   });\n\n\n          if (_AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].Slots[\"ads.box.shopping.zira.1\"] || _AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].Slots[\"ads.box.shopping.zira.2\"]) {\n            that.defineSlots_func(\"ads.box.shopping.zira.1\", [[300, 60], ['fluid']]);\n            that.defineSlots_func(\"ads.box.shopping.zira.2\", [[300, 60], ['fluid']]);\n          }\n\n          if (_AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].Slots[\"ads.650x115.1\"]) {\n            that.defineSlots_func(\"ads.650x115.1\", [650, 115], \"\", \"\"); //googletag.cmd.push(function () { googletag.display('ads.650x115.1'); });\n          }\n\n          if (window.ynet_sites == false && (document.querySelector(\".grid1280_2\") == null || document.querySelector(\".grid1280_2\") == undefined)) {\n            if (_AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].Slots[\"ads.inread\"]) {\n              that.defineSlots_func(\"ads.inread\", ['fluid'], \"\", \"\");\n            }\n\n            if (_AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].Slots[\"ads.abovecomments\"]) {\n              that.defineSlots_func(\"ads.abovecomments\", ['fluid'], \"\", \"\");\n            }\n          } // Vertical video ads\n\n\n          var vertical_video = document.querySelector(\".ynet-video-vertical-1280\");\n\n          if (vertical_video) {\n            var ads_ids = [];\n            var defined_ads = [];\n            window.ads_array = [];\n            vertical_video.addEventListener('click', function (e) {\n              if (document.querySelector('.ads_vertical_video')) {\n                document.querySelectorAll('.ads_vertical_video').forEach(function (y, index) {\n                  var ad_id = y.id;\n                  var num_ad = ad_id.substr(ad_id.length - 1);\n\n                  if (defined_ads.indexOf(ad_id) < 0) {\n                    googletag.cmd.push(function () {\n                      window.ads_array[num_ad] = googletag.defineSlot(AdUnitFunctionsClassObj.adUnitCall_func(ad_id), [[360, 666], [\"fluid\"]], ad_id).addService(googletag.pubads());\n                      googletag.enableServices();\n                      defined_ads.push(ad_id);\n                    });\n                  }\n                });\n              }\n\n              document.querySelectorAll('.ynet-video-vertical-1280 .slick-slide').forEach(function (i, index) {\n                var observer = new MutationObserver(function () {\n                  if (i.classList.contains(\"slick-active\")) {\n                    if (i.querySelector('.ads_vertical_video') !== null) {\n                      var video_banner = i.querySelector('.ads_vertical_video');\n                      var banner_id = video_banner.id;\n\n                      if (ads_ids.indexOf(banner_id) < 0) {\n                        googletag.cmd.push(function () {\n                          googletag.display(banner_id);\n                        });\n                        video_banner.style.width = \"640px\";\n                        video_banner.style.textAlign = \"center\";\n                        ads_ids.push(banner_id);\n                      } else {\n                        if (i.querySelector('.ads_vertical_video').innerHTML == \"\") {\n                          var nm_ad = banner_id.substr(banner_id.length - 1);\n                          googletag.pubads().refresh([window.ads_array[nm_ad]]);\n                          video_banner.style.width = \"640px\";\n                          video_banner.style.textAlign = \"center\";\n                        }\n                      }\n                    }\n                  }\n                });\n                observer.observe(i, {\n                  attributes: true,\n                  childList: true\n                });\n              });\n            });\n          }\n        })();\n      }\n    }\n  }, {\n    key: \"Mynet_renderSmallInbord\",\n    value: function Mynet_renderSmallInbord() {\n      Log('RENDERED SMALL INBORD');\n      AdUnitFunctionsClassObj.defineSlotsMynet_func(\"ads.300x100.inbord\", [300, 100]);\n      googletag.cmd.push(function () {\n        googletag.display(\"ads.300x100.inbord\");\n      });\n      _AdUnitStylesClass__WEBPACK_IMPORTED_MODULE_6__[\"default\"][\"ads.300x100.inbord\"](\"ads.300x100.inbord\");\n    }\n  }, {\n    key: \"RenderSmallInbord\",\n    value: function RenderSmallInbord() {\n      this.counter_livebox++;\n      Log('RENDERED SMALL INBOARD ' + this.counter_livebox);\n\n      if (this.counter_livebox > 2) {\n        return false;\n      }\n\n      var livebox_sizes = this.getDevice_func() == \"Android\" ? [[350, 197], [320, 450], 'fluid', [310, 175]] : [[360, 180], 'fluid', [320, 180], [350, 197], [320, 450]];\n\n      if (window.dcPath.includes(\"PnaiPlus\")) {\n        livebox_sizes = ['fluid', [320, 180], [350, 197], [320, 450]];\n\n        if (this.getDevice_func() == \"Android\") {\n          livebox_sizes = [[350, 197], [320, 450], [320, 180], 'fluid'];\n        }\n      }\n\n      this.defineSlots_func(\"ads.inboard\", livebox_sizes);\n\n      if (this.showMaaavaronSticky == 0 || this.showMaaavaronSticky == 1 && window.show_biglivebox == true) {\n        googletag.cmd.push(function () {\n          googletag.display(\"ads.inboard\");\n        });\n      }\n\n      _InfrastructureClass__WEBPACK_IMPORTED_MODULE_9__[\"default\"].SlotRenderEnd(function (event) {\n        if (event.slot == _AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].Define_slots[\"ads.inboard\"]) {\n          var liveboxLoaded = false;\n\n          if (!liveboxLoaded) {\n            if (!event.isEmpty) {\n              var livebox_slot = document.getElementById(\"ads.inboard\");\n\n              if (window.dcCG == \"article\" && window.dcPath.includes(\"PnaiPlus\")) {\n                livebox_slot.setAttribute(\"style\", \"position: relative; display:flex; justify-content:center; -webkit-box-pack:center; display:-ms-flexbox; -ms-flex-pack:center; text-align:center; margin:0 -3.90625vw; width: calc(100% + 7.8125vw) !important;\");\n              } else {\n                livebox_slot.setAttribute(\"style\", \"position: relative; display:flex; justify-content:center; -webkit-box-pack:center; display:-ms-flexbox; -ms-flex-pack:center; text-align:center; margin:0 auto; width: 100%;\");\n              }\n\n              if (livebox_slot.children[0]) {\n                livebox_slot.children[0].style.display = 'flex';\n              }\n\n              if (event.lineItemId != null) {\n                window.CloseLivebox = function () {\n                  document.getElementById(\"ads.inboard\").innerHTML = \"\";\n\n                  try {\n                    document.getElementById(\"LiveBox_Close_button\").style.display = 'none';\n                  } catch (e) {}\n                };\n\n                setTimeout(function () {\n                  var img_livebox = document.createElement(\"img\");\n                  img_livebox.id = \"LiveBox_Close_button\";\n                  img_livebox.src = \"https://totalmedia2.ynet.co.il/new_gpt/ynet_mutam/close.png\";\n                  img_livebox.setAttribute(\"onClick\", \"window.CloseLivebox();\");\n                  img_livebox.setAttribute(\"style\", \"cursor: pointer; position: absolute; top: 14px; left: 14px; z-index: 999;\");\n                  livebox_slot.appendChild(img_livebox);\n                }, 1000);\n                window.addEventListener('message', function (event) {\n                  if (event.data.eventName === 'inboardclsoed') {\n                    try {\n                      document.getElementById(\"LiveBox_Close_button\").style.display = 'none';\n                    } catch (e) {}\n                  }\n                }, false);\n              }\n            }\n\n            liveboxLoaded = true;\n          }\n        }\n      });\n    }\n  }, {\n    key: \"RenderBiglivebox\",\n    value: function RenderBiglivebox() {\n      this.counter_biglivebox++;\n      Log('RENDERED BIGLIVEBOX' + this.counter_biglivebox);\n\n      if (this.counter_biglivebox > 2) {\n        return false;\n      }\n\n      this.defineSlots_func(\"ads.biglivebox\", [[320, 450], [360, 360], 'fluid']);\n\n      if (this.showMaaavaronSticky == 0) {\n        googletag.cmd.push(function () {\n          googletag.display(\"ads.biglivebox\");\n        });\n      }\n\n      _InfrastructureClass__WEBPACK_IMPORTED_MODULE_9__[\"default\"].SlotRenderEnd(function (event) {\n        var BigliveboxLoaded = false;\n\n        if (event.slot == _AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].Define_slots[\"ads.biglivebox\"]) {\n          if (!BigliveboxLoaded) {\n            if (!event.isEmpty) {\n              var div_biglivebox = document.getElementById(\"ads.biglivebox\");\n              div_biglivebox.setAttribute(\"style\", \"margin:0 auto; position: relative;display:flex;justify-content:center; -webkit-box-pack:center;display:-ms-flexbox;-ms-flex-pack:center;text-align:center;width:100%;\");\n\n              if (event.lineItemId != null) {\n                window.CloseBox = function () {\n                  try {\n                    document.getElementById(\"ads.biglivebox\").style.display = 'none';\n                  } catch (e) {}\n\n                  try {\n                    document.getElementById(\"Close_btn_biglivebox\").style.display = 'none';\n                  } catch (e) {}\n\n                  AdUnitFunctionsClassObj.RenderSmallInbord();\n                };\n\n                setTimeout(function () {\n                  var img_biglivebox = document.createElement(\"img\");\n                  img_biglivebox.id = \"Close_btn_biglivebox\";\n                  img_biglivebox.src = \"https://totalmedia2.ynet.co.il/new_gpt/ynet_mutam/close.png\";\n                  img_biglivebox.setAttribute(\"onClick\", \"window.CloseBox();\");\n                  img_biglivebox.setAttribute(\"style\", \"cursor: pointer; position: absolute; top: 14px; left: 14px; z-index: 999;\");\n                  div_biglivebox.appendChild(img_biglivebox);\n                }, 1000);\n                window.addEventListener('message', function (event) {\n                  if (event.data.eventName === 'inboardclsoed') {\n                    try {\n                      document.getElementById(\"Close_btn_biglivebox\").style.display = 'none';\n                    } catch (e) {}\n\n                    AdUnitFunctionsClassObj.RenderSmallInbord();\n                  }\n                }, false);\n              }\n\n              window.addEventListener('message', function (event) {\n                if (event.data.eventName === 'inboardclsoed') {\n                  AdUnitFunctionsClassObj.RenderSmallInbord();\n                }\n              }, false);\n            } else {\n              AdUnitFunctionsClassObj.RenderSmallInbord();\n            }\n\n            BigliveboxLoaded = true;\n          }\n        }\n      });\n    }\n  }, {\n    key: \"Ynet_renderSmallInbord\",\n    value: function Ynet_renderSmallInbord() {\n      Log('Blazer RENDERED SMALL INBORD');\n      var livebox_slot = \"\";\n      var livebox_sizes;\n\n      if (this.getDevice_func() == \"Android\") {\n        livebox_slot = window.newMedia == 'True' || window.ynet_responsive_sites ? \"ads.inboard\" : \"ads.ynet_mobileweb_android_livebox\";\n        livebox_sizes = [[350, 197], [320, 450], 'fluid', [310, 175]];\n      } else if (this.getDevice_func() == \"iPhone\") {\n        livebox_slot = window.newMedia == 'True' || window.ynet_responsive_sites ? \"ads.inboard\" : \"ads.ynet_mobileweb_iphone_livebox\";\n        livebox_sizes = [[360, 180], 'fluid', [320, 180], [350, 197], [320, 450]];\n      }\n\n      AdUnitFunctionsClassObj.defineSlots_func(livebox_slot, livebox_sizes);\n      googletag.cmd.push(function () {\n        googletag.display(livebox_slot);\n      });\n      _AdUnitStylesClass__WEBPACK_IMPORTED_MODULE_6__[\"default\"][\"Ynet_livebox\"](\"Ynet_livebox\");\n    }\n  }, {\n    key: \"renderAd\",\n    value: function renderAd(id, sizes) {\n      // For dynamic banners\n      var jsonObj_dict = this.jsonObj;\n      googletag.cmd.push(function () {\n        for (var _i17 = 0, _Object$keys7 = Object.keys(jsonObj_dict); _i17 < _Object$keys7.length; _i17++) {\n          var key = _Object$keys7[_i17];\n          googletag.pubads().setTargeting(key, jsonObj_dict[key]);\n        }\n      });\n      var element_id = document.getElementById(id);\n\n      if (element_id != undefined || element_id != null || element_id != \"undefined\") {\n        if (window.dcSite == \"ynv\") {\n          this.defineSlots_func(id, sizes);\n        } else if (window.dcSite == \"yns\") {\n          this.defineSlotsYns_func(id, sizes);\n        } else if (window.dcSite == \"ynes\") {\n          this.defineSlotsYnes_func(id, sizes);\n        } else if (window.dcSite.includes(\"mynet\")) {\n          this.defineSlotsMynet_func(id, sizes);\n        } else if (window.dcSite.includes(\"ynt\") && this.innerWidth <= \"767\") {\n          this.defineSlots_func(id, sizes);\n        }\n      }\n    }\n  }, {\n    key: \"defineUnitsXnet_func\",\n    value: function defineUnitsXnet_func() {\n      var _this4 = this;\n\n      Log(\"defineUnitsXnet_func\");\n      var that = this;\n      var jsonObj_dict = this.jsonObj;\n      googletag.cmd.push(function () {\n        for (var _i18 = 0, _Object$keys8 = Object.keys(jsonObj_dict); _i18 < _Object$keys8.length; _i18++) {\n          var key = _Object$keys8[_i18];\n          googletag.pubads().setTargeting(key, jsonObj_dict[key]);\n        }\n      });\n\n      if (this.innerWidth <= \"767\") {\n        this.findAllDiv_func();\n        var channel_path_xnt = this.dcPath;\n        var showMaaavaron = 0; //const path_array_xnt = channel_path_xnt.split('-');\n        // let num_channel_xnt;\n        // if (path_array_xnt[1] != undefined) {\n        //     num_channel_xnt = path_array_xnt[1].substr(0, path_array_xnt[1].indexOf('.'));\n        // }\n        /// IF Channel not LAISHA, then don't appear from the iframe, appear from define\n\n        if (channel_path_xnt.includes(\"laisha\")) {\n          showMaaavaron = 0;\n        } else {\n          showMaaavaron = 1;\n          Log(\"TRANSITIAL LODADED: \" + showMaaavaron);\n        }\n\n        if (this.getUrlVars_func(\"IsApp\") == \"1\" || this.getUrlVars_func(\"IsApp\") == 1 || this.getUrlVars_func(\"isapp\") == \"1\" || this.getUrlVars_func(\"isapp\") == 1) {\n          showMaaavaron = 0;\n          Log(\"TRANSITIAL LODADED 1: \" + showMaaavaron);\n        }\n\n        if (showMaaavaron == 1 && _AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].Slots[this.Maavaron_mobile_xnt]) {\n          this.Trans = true;\n\n          if (document.getElementById(\"maavaronstyle\") != null) {\n            document.getElementById(\"maavaronstyle\").innerHTML = \"\";\n          }\n\n          var maavaron_size = this.getDevice_func() == \"iPhone\" || this.getDevice_func() == \"iPad\" || this.getDevice_func() == \"iPod\" ? [1, 1] : [1, 2];\n          Log(\"TRANSITIAL LODADED 2: \" + showMaaavaron);\n          this.defineSlots_func(this.Maavaron_mobile_xnt, maavaron_size); //googletag.cmd.push(function () { googletag.display('ads.transitial.1'); });\n        }\n\n        this.findAllDiv_func();\n\n        if (_AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].Slots[this.box]) {\n          this.defineSlots_func(this.box, [300, 250]);\n        }\n\n        if (this.dccg == \"sub\" || this.dccg == \"article\") {\n          if (_AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].Slots[\"ads.livebox\"]) {\n            this.defineSlots_func(\"ads.livebox\", [['fluid'], [320, 450], [310, 175], [320, 180], [350, 197]]);\n            _AdUnitStylesClass__WEBPACK_IMPORTED_MODULE_6__[\"default\"]['ads.livebox']('ads.livebox');\n          }\n        }\n\n        if (this.dccg == \"article\") {\n          if (_AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].Slots[\"ads.unread\"]) {\n            this.defineSlots_func(\"ads.unread\", [[310, 175], [320, 180], [350, 197]]);\n          }\n        }\n      } else {\n        (function () {\n          if (_this4.getUrlVars_func(\"snap\") == undefined || _this4.getUrlVars_func(\"snap\") != \"shot\") {\n            if (_this4.dcSite == \"xnt\") {\n              Log(\"defineUnitsXnet_func 222\" + _this4.dccg);\n\n              if ((window.dcCG == \"main\" || window.dcCG == \"article\" || window.dcCG == \"sub\") && document.getElementById(_this4.Maavaron_slot) != undefined) {\n                //if (true) {\n                // if number less than 4, get parameter dcunigpt = view(number), if more than 4 then don't get parameter\n                if (document.getElementById(\"maavaronstyle\") != null) {\n                  document.getElementById(\"maavaronstyle\").innerHTML = \"\";\n                }\n\n                _this4.Double_Jumbo = true;\n\n                if (!_this4.Double_Jumbo) {\n                  document.getElementById(_this4.Maavaron_slot).innerHTML = \"\";\n                }\n\n                _this4.defineSlots_func(\"ads.top\", [[1, 1], [1, 2], [970, 90], [970, 250], [1000, 200], [970, 130], [970, 350], [970, 100]]);\n\n                _this4.defineSlots_func(_this4.Maavaron_slot, [[1, 1], [2, 1]], \"\", \"gpt_maavaron\");\n\n                var cont_w = document.getElementById(\"content-w\");\n                var content_w = cont_w !== null;\n                var Xnt_MaavaronLoaded = false;\n                _InfrastructureClass__WEBPACK_IMPORTED_MODULE_9__[\"default\"].SlotRenderEnd(function (event) {\n                  if (event.slot == _AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].Define_slots[\"ads.interstitial\"]) {\n                    if (!Xnt_MaavaronLoaded) {\n                      if (!event.isEmpty) {\n                        that.is_maavaron = true;\n\n                        if (content_w) {\n                          cont_w.style.display = \"none\";\n                        }\n                      }\n\n                      Xnt_MaavaronLoaded = true;\n                    }\n                  }\n                }); // } else {\n                //     //document.head.removeChild(document.getElementById('maavaronstyle'));\n                //     if (document.getElementById('maavaronstyle') != null) {\n                //         document.getElementById('maavaronstyle').innerHTML = '';\n                //     }\n                // }\n              } else {\n                _this4.defineSlots_func(\"ads.top\", [[1, 1], [970, 90], [970, 250], [1000, 200], [970, 130], [970, 350], [970, 100]]);\n              }\n            }\n          } // function Return_DOuble_Jumbo() {\n          //     if (AdUnitPropertiesClassObj.Double_Jumbo == true) {\n          //       return [1, 1], [1, 2];\n          //     } else {\n          //       return [1, 1];\n          //     }\n          // }\n\n\n          _this4.findAllDiv_func(); //this.defineSlots_func('ads.top', [Return_DOuble_Jumbo(), [970, 90], [970, 250], [1000, 200], [970, 130], [970, 350], [970, 100]]);\n\n\n          if (_AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].Slots[_this4.Ozen_right]) {\n            _this4.defineSlots_func(_this4.Ozen_right, _AdUnitAdditionalStylesClass__WEBPACK_IMPORTED_MODULE_4__[\"default\"].resizeOzen_func());\n\n            _AdUnitStylesClass__WEBPACK_IMPORTED_MODULE_6__[\"default\"][_this4.Ozen_right](_this4.Ozen_right);\n          } //Get all general banners on the page (with class general_banner_ad) and define them.\n\n\n          var old_divs = new Array();\n          var new_divs = new Array();\n          var general_divs = new Array();\n          var className = general_banners_divs;\n          var div_sizes = general_banners_divs_sizes;\n          var classnameCount = className.length;\n\n          if (className != \"\") {\n            for (var j = 0; j < classnameCount; j++) {\n              var div_size = div_sizes[j];\n              var w_div = div_size.substr(0, div_size.indexOf(\"x\"));\n              var h_div = div_size.substr(div_size.indexOf(\"x\") + 1);\n              general_divs.push([className[j], parseInt(w_div, 10), parseInt(h_div, 10)]);\n\n              if (window.newMedia == \"True\") {\n                old_divs.push(\"ads.300x250.1\", \"ads.300x250.2\", \"ads.300x250.3\");\n                new_divs.push(\"ads.box.1\", \"ads.box.2\", \"ads.box.3\");\n                general_divs.map(function (gd) {\n                  var index = old_divs.indexOf(gd[0]);\n\n                  if (index > -1) {\n                    gd[0] = new_divs[index];\n                  }\n                });\n              }\n\n              _this4.defineSlots_func(general_divs[j][0], [general_divs[j][1], general_divs[j][2]]);\n            }\n          }\n\n          if (_AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].Slots[\"ads.sargel\"]) {\n            setTimeout(_this4.defineSargel_func(\"ads.sargel\"), 2500);\n          }\n\n          if (_AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].Slots[_this4.newspaper_xnt]) {\n            var nwsp_day = _AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].Get_day.getDay();\n            var nwsp_hour = _AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].Get_day.getHours(); //const nwsp_minutes = ('0' + AdUnitPropertiesClassObj.Get_day.getMinutes()).slice(-2);\n\n            if (nwsp_day == 4 && nwsp_hour >= 13 || nwsp_day == 5 && nwsp_hour < 14) {\n              _this4.defineSlots_func(_this4.newspaper_xnt, [[970, 90], [970, 125]]); //googletag.cmd.push(function () { googletag.display('ads.top.2'); });\n\n\n              _AdUnitStylesClass__WEBPACK_IMPORTED_MODULE_6__[\"default\"][\"ads.top.2\"](\"ads.top.2\");\n            } else if (nwsp_day == 0 && nwsp_hour >= 13 || nwsp_day == 1 && nwsp_hour < 13) {\n              _this4.defineSlots_func(_this4.newspaper_xnt, [[970, 90], [970, 125]]); //googletag.cmd.push(function () { googletag.display('ads.top.2'); });\n\n\n              _AdUnitStylesClass__WEBPACK_IMPORTED_MODULE_6__[\"default\"][\"ads.top.2\"](\"ads.top.2\");\n            }\n          }\n\n          if (_this4.dccg == \"article\") {\n            _this4.defineSlots_func(_this4.top_middle_xnt, [970, 90]);\n          }\n\n          if (_AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].Slots[\"ads.spot.1\"]) {\n            _this4.defineSlots_func(\"ads.spot.1\", [300, 250]); //googletag.cmd.push(function () { googletag.display('ads.spot.1'); });\n\n          }\n\n          if (_AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].Slots[\"ads.spot.17\"]) {\n            _this4.defineSlots_func(\"ads.spot.17\", [300, 250]); //googletag.cmd.push(function () { googletag.display('ads.spot.17'); });\n\n          }\n        })();\n      }\n    } //end of defineUnitsXnet_func\n\n  }, {\n    key: \"defineSargel_func\",\n    value: function defineSargel_func(id) {\n      Log(\"defineSargel_func\");\n      _AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].Define_slots[id] = this.defineSlots_func(id, [[980, 50], [1920, 50]]); //googletag.cmd.push(function () { googletag.display(id); });\n      //adUnitStylesClassObj[id](id);\n    }\n  }, {\n    key: \"defineSlots800_func\",\n    value: function defineSlots800_func(id, size) {\n      Log(\"defineSlots800_func\");\n      var that = this;\n      googletag.cmd.push(function () {\n        if (id == \"ads.topright\") {\n          _AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].Define_slots[id] = googletag.defineSlot(that.adUnitCall_func(id), size, id).addService(googletag.pubads().setTargeting(\"dcfm\", \"base\")).setCollapseEmptyDiv(true);\n        } else {\n          _AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].Define_slots[id] = googletag.defineSlot(that.adUnitCall_func(id), size, id).addService(googletag.pubads()).setCollapseEmptyDiv(true);\n        } //googletag.pubads().enableSingleRequest();\n\n\n        googletag.pubads().addEventListener(\"slotRenderEnded\", function (event) {\n          _InfrastructureClass__WEBPACK_IMPORTED_MODULE_9__[\"default\"].onRender(event, id);\n        }); //googletag.enableServices();\n      });\n    }\n  }, {\n    key: \"defineSlotsYns_func\",\n    value: function defineSlotsYns_func(id, size, atrr) {\n      Log(\"defineSlotsYns_func\");\n      var that = this;\n\n      if (arguments.length > 2) {\n        var target_attr = atrr;\n        googletag.cmd.push(function () {\n          _AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].Define_slots[id] = googletag.defineSlot(that.adUnitCallYns_func(id), size, id).addService(googletag.pubads().setTargeting(target_attr[0], target_attr[1])).setCollapseEmptyDiv(true, true); //googletag.pubads().enableSingleRequest();\n\n          googletag.pubads().addEventListener(\"slotRenderEnded\", function (event) {\n            _InfrastructureClass__WEBPACK_IMPORTED_MODULE_9__[\"default\"].onRender(event, id);\n          }); //googletag.enableServices();\n        });\n      } else {\n        googletag.cmd.push(function () {\n          _AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].Define_slots[id] = googletag.defineSlot(that.adUnitCallYns_func(id), size, id).addService(googletag.pubads()).setCollapseEmptyDiv(true, true); //googletag.pubads().enableSingleRequest();\n\n          googletag.pubads().addEventListener(\"slotRenderEnded\", function (event) {\n            _InfrastructureClass__WEBPACK_IMPORTED_MODULE_9__[\"default\"].onRender(event, id);\n          }); //googletag.enableServices();\n        });\n      }\n    } //end defineSlotsYns_func\n\n  }, {\n    key: \"defineSlotsYnes_func\",\n    value: function defineSlotsYnes_func(id, size, atrr) {\n      Log(\"defineSlotsYnes_func\");\n      var that = this;\n\n      if (arguments.length > 2) {\n        var target_attr = atrr;\n        googletag.cmd.push(function () {\n          _AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].Define_slots[id] = googletag.defineSlot(that.adUnitCallYnes_func(id), size, id).addService(googletag.pubads().setTargeting(target_attr[0], target_attr[1])).setCollapseEmptyDiv(true, true); //googletag.pubads().enableSingleRequest();\n\n          googletag.pubads().addEventListener(\"slotRenderEnded\", function (event) {\n            _InfrastructureClass__WEBPACK_IMPORTED_MODULE_9__[\"default\"].onRender(event, id);\n          }); //googletag.enableServices();\n        });\n      } else {\n        googletag.cmd.push(function () {\n          _AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].Define_slots[id] = googletag.defineSlot(that.adUnitCallYnes_func(id), size, id).addService(googletag.pubads()).setCollapseEmptyDiv(true, true); //googletag.pubads().enableSingleRequest();\n\n          googletag.pubads().addEventListener(\"slotRenderEnded\", function (event) {\n            _InfrastructureClass__WEBPACK_IMPORTED_MODULE_9__[\"default\"].onRender(event, id);\n          }); //googletag.enableServices();\n        });\n      }\n    } //end defineSlotsYnes_func\n\n  }, {\n    key: \"defineSlotsMynet_func\",\n    value: function defineSlotsMynet_func(id, size, atrr) {\n      Log(\"defineSlotsMynet_func\");\n      var that = this;\n\n      if (arguments.length > 2) {\n        var target_attr = atrr;\n        googletag.cmd.push(function () {\n          _AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].Define_slots[id] = googletag.defineSlot(that.adUnitCallMynet_func(id), size, id).addService(googletag.pubads().setTargeting(target_attr[0], target_attr[1])).setCollapseEmptyDiv(true, true); //googletag.pubads().enableSingleRequest();\n\n          googletag.pubads().addEventListener(\"slotRenderEnded\", function (event) {\n            _InfrastructureClass__WEBPACK_IMPORTED_MODULE_9__[\"default\"].onRender(event, id);\n          }); //googletag.enableServices();\n        });\n      } else {\n        googletag.cmd.push(function () {\n          _AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].Define_slots[id] = googletag.defineSlot(that.adUnitCallMynet_func(id), size, id).addService(googletag.pubads()).setCollapseEmptyDiv(true, true); //googletag.pubads().enableSingleRequest();\n\n          googletag.pubads().addEventListener(\"slotRenderEnded\", function (event) {\n            _InfrastructureClass__WEBPACK_IMPORTED_MODULE_9__[\"default\"].onRender(event, id);\n          }); //googletag.enableServices();\n        });\n      }\n    } //end defineSlotsMynet_func\n\n  }, {\n    key: \"defineSlots_func\",\n    value: function defineSlots_func(id, size_arry) {\n      var atrr = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : \"\";\n      var attr_2 = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : \"\";\n      //defineSlots_func functon call from defineUnits_func and create slots all data for each slot save at Define_slots Object\n      var ad_unit_path = \"\";\n\n      if (_InfrastructureClass__WEBPACK_IMPORTED_MODULE_9__[\"default\"].Site == \"is_xnet\") {\n        ad_unit_path = this.adUnitCallXnet_func(id);\n      } else if (_InfrastructureClass__WEBPACK_IMPORTED_MODULE_9__[\"default\"].Site == \"is_yns_ynv\") {\n        ad_unit_path = this.adUnitCallYnsYnv_func(id);\n      } else if (_InfrastructureClass__WEBPACK_IMPORTED_MODULE_9__[\"default\"].Site == \"is_ynes\") {\n        ad_unit_path = this.adUnitCallYnes_func(id);\n      } else if (_InfrastructureClass__WEBPACK_IMPORTED_MODULE_9__[\"default\"].Site == \"is_mynet\") {\n        ad_unit_path = this.adUnitCallMynet_func(id);\n      } else {\n        ad_unit_path = this.adUnitCall_func(id);\n      }\n\n      Log(\"AD UNIT PATH:\" + ad_unit_path + \" \" + id + \" \" + attr_2);\n\n      if (arguments.length > 2) {\n        var target_attr = atrr;\n        var target_1 = target_attr[0] || \"\";\n        var target_2 = target_attr[1] || \"\";\n        googletag.cmd.push(function () {\n          if (id == \"ads.maavaron\" && attr_2 == \"gpt_maavaron\") {\n            if (_InfrastructureClass__WEBPACK_IMPORTED_MODULE_9__[\"default\"].Site == \"is_xnet\") {\n              _AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].Define_slots[id] = googletag.defineSlot(\"/6870/xnt.outofframe\", size_arry, id).addService(googletag.pubads()).setCollapseEmptyDiv(true);\n            } else {\n              _AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].Define_slots[id] = googletag.defineSlot(\"/6870/outofframe\", size_arry, id).addService(googletag.pubads()).setCollapseEmptyDiv(true);\n            }\n          } else if (target_1 != \"\" && target_2 != \"\") {\n            _AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].Define_slots[id] = googletag.defineSlot(ad_unit_path, size_arry, id).addService(googletag.pubads().setTargeting(target_1, target_2)).setCollapseEmptyDiv(true);\n          } else {\n            _AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].Define_slots[id] = googletag.defineSlot(ad_unit_path, size_arry, id).addService(googletag.pubads()).setCollapseEmptyDiv(true);\n          } //googletag.pubads().enableSingleRequest();\n\n\n          googletag.pubads().addEventListener(\"slotRenderEnded\", function (event) {\n            _InfrastructureClass__WEBPACK_IMPORTED_MODULE_9__[\"default\"].onRender(event, id);\n          }); //googletag.enableServices();\n        });\n      } else {\n        googletag.cmd.push(function () {\n          if ((window.dcPath.includes(\"3456.Magazine\") || window.ynet_responsive_special) && window.newMedia == \"False\" && window.innerWidth <= \"767\") {\n            var new_id = id.substring(4);\n\n            if (id.includes(\"transitions\")) {\n              _AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].Define_slots[id] = googletag.defineSlot(\"/6870/ynet_mobile/ynet_mobileweb_transitions/ynet_mobileweb_transitions_general/\" + new_id, size_arry, id).addService(googletag.pubads()).setCollapseEmptyDiv(true);\n            } else if (id.includes(\"sticky\")) {\n              _AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].Define_slots[id] = googletag.defineSlot(\"/6870/ynet_mobile/Ynet_MobileWeb_Banners/\" + new_id, size_arry, id).addService(googletag.pubads()).setCollapseEmptyDiv(true);\n            } else {\n              _AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].Define_slots[id] = googletag.defineSlot(ad_unit_path, size_arry, id).addService(googletag.pubads()).setCollapseEmptyDiv(true);\n            }\n          } else {\n            var unit_id = id.substring(4);\n\n            if (id == \"ads.video_ynettv\") {\n              _AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].Define_slots[id] = googletag.defineSlot(\"/6870/ynet/video_desktop/video_ynettv\", size_arry, id).addService(googletag.pubads()).setCollapseEmptyDiv(true);\n            } else if (window.dcSite == \"ynv\" && (id == \"ads.ordering_tourism\" || id == \"ads.ordering_health\" || id == \"ads.ordering_sport\")) {\n              _AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].Define_slots[id] = googletag.defineSlot(\"/6870/ynet_mobile/vesti_mobileweb_ordering/vesti_mobileweb_\" + id.substring(4), size_arry, id).addService(googletag.pubads()).setCollapseEmptyDiv(true, true);\n            } else {\n              _AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].Define_slots[id] = googletag.defineSlot(ad_unit_path, size_arry, id).addService(googletag.pubads()).setCollapseEmptyDiv(true);\n            }\n          } //googletag.pubads().enableSingleRequest();\n\n\n          googletag.pubads().addEventListener(\"slotRenderEnded\", function (event) {\n            _InfrastructureClass__WEBPACK_IMPORTED_MODULE_9__[\"default\"].onRender(event, id);\n          }); //googletag.enableServices();\n        });\n      }\n    } //end defineSlots_func\n\n  }, {\n    key: \"getDevice_func\",\n    value: function getDevice_func() {\n      var _window2 = window,\n          navigator = _window2.navigator;\n\n      if (navigator.userAgent.match(/Android/i)) {\n        return \"Android\";\n      } else if (navigator.userAgent.match(/Android/i)) {\n        return \"Android\";\n      } else if (navigator.userAgent.match(/BlackBerry/i)) {\n        return \"BlackBerry\";\n      } else if (navigator.userAgent.match(/iPhone/i)) {\n        return \"iPhone\";\n      } else if (navigator.userAgent.match(/iPad/i)) {\n        return \"iPad\";\n      } else if (navigator.userAgent.match(/iPod/i)) {\n        return \"iPod\";\n      } else if (navigator.userAgent.match(/IEMobile/i)) {\n        return \"IEMobile\";\n      } else if (navigator.userAgent.match(/Macintosh/i)) {\n        return \"Macintosh\";\n      } else {\n        return \"PC\";\n      }\n    }\n  }]);\n\n  return AdUnitFunctionsClass;\n}();\n\nvar _AdUnitFunctionsClass = new AdUnitFunctionsClass();\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (_AdUnitFunctionsClass);\nwindow.AdUnitFunctionsClassObj = _AdUnitFunctionsClass;\nwindow.AdUnit_properties = _AdUnitFunctionsClass;\nwindow.renderAd = _AdUnitFunctionsClass.renderAd.bind(_AdUnitFunctionsClass);\nwindow.closeTransitions = _AdUnitFunctionsClass.defineUnits_func.bind(_AdUnitFunctionsClass);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9tb2R1bGVzL0FkVW5pdEZ1bmN0aW9uc0NsYXNzLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbW9kdWxlcy9BZFVuaXRGdW5jdGlvbnNDbGFzcy5qcz83MTYxIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBBZHVuaXREY1BhdGhDbGFzcyBmcm9tIFwiLi9BZHVuaXREY1BhdGhDbGFzc1wiO1xyXG5pbXBvcnQgQWRVbml0QWRkaXRpb25hbFN0eWxlc0NsYXNzIGZyb20gXCIuL0FkVW5pdEFkZGl0aW9uYWxTdHlsZXNDbGFzc1wiO1xyXG5pbXBvcnQgQWRVbml0UHJvcGVydGllc0NsYXNzT2JqIGZyb20gXCIuL0FkVW5pdFByb3BlcnRpZXNDbGFzc1wiO1xyXG5pbXBvcnQgYWRVbml0U3R5bGVzQ2xhc3NPYmogZnJvbSBcIi4vQWRVbml0U3R5bGVzQ2xhc3NcIjtcclxuaW1wb3J0IEFkVW5pdFRlbXBsYXRlRnVuY3Rpb25zQ2xhc3NPYmogZnJvbSBcIi4vQWRVbml0VGVtcGxhdGVGdW5jdGlvbnNDbGFzc1wiO1xyXG5pbXBvcnQgQ29vY2tpZXNGdW5jdGlvbkNsYXNzT2JqIGZyb20gXCIuL0Nvb2NraWVzRnVuY3Rpb25DbGFzc1wiO1xyXG5pbXBvcnQgSW5mcmFzcnVjdHVyZUNsYXNzT2JqIGZyb20gXCIuL0luZnJhc3RydWN0dXJlQ2xhc3NcIjtcclxuaW1wb3J0IE1haW5GdW5jdGlvbkNsYXNzT2JqIGZyb20gXCIuL01haW5GYW5jdGlvbkNsYXNzXCI7XHJcbmltcG9ydCBBZFRydXZpZFNjcmlwdENsYXNzb2JqIGZyb20gXCIuL0FkVHJ1dmlkU2NyaXB0Q2xhc3NcIjtcclxuXHJcbmNvbnN0IHsgTG9nIH0gPSBJbmZyYXNydWN0dXJlQ2xhc3NPYmo7XHJcbmxldCB7XHJcbiAgZ29vZ2xldGFnLFxyXG4gIGdlbmVyYWxfYmFubmVyc19kaXZzLFxyXG4gIGdlbmVyYWxfYmFubmVyc19kaXZzX3NpemVzLFxyXG4gIGNvbnNvbGVcclxufSA9IHdpbmRvdztcclxuXHJcbmNsYXNzIEFkVW5pdEZ1bmN0aW9uc0NsYXNzIHtcclxuICBjb25zdHJ1Y3RvcigpIHtcclxuXHJcbiAgICB0aGlzLmJyb3dzaV9vbl9ncHQgPSB3aW5kb3cuYnJvd3NpX29uX2dwdDtcclxuICAgIHRoaXMubmV3TWVkaWEgPSB3aW5kb3cubmV3TWVkaWE7XHJcbiAgICB0aGlzLk96ZW5fODAwID0gKHdpbmRvdy5uZXdNZWRpYSA9PSAnVHJ1ZScpID8gXCJhZHMuc2t5c2NyYXBlclwiIDogXCJhZHMub3plblwiO1xyXG4gICAgdGhpcy5PemVuX3JpZ2h0ID0gKHdpbmRvdy5uZXdNZWRpYSA9PSAnVHJ1ZScpID8gXCJhZHMuc2t5c2NyYXBlclwiIDogXCJhZHMub3plbi5yaWdodFwiO1xyXG4gICAgdGhpcy5PemVuX2xlZnQgPSAod2luZG93Lm5ld01lZGlhID09ICdUcnVlJykgPyBcImFkcy5za3lzY3JhcGVyLmxlZnRcIiA6IFwiYWRzLm96ZW5fbGVmdFwiO1xyXG4gICAgdGhpcy5NYWF2YXJvbl9zbG90ID0gKHdpbmRvdy5uZXdNZWRpYSA9PSAnVHJ1ZScpID8gXCJhZHMuaW50ZXJzdGl0aWFsXCIgOiBcImFkcy5tYWF2YXJvblwiO1xyXG4gICAgdGhpcy5uZXdzcGFwZXIgPSAod2luZG93Lm5ld01lZGlhID09ICdUcnVlJykgPyBcImFkcy50b3AucHJvbW9cIiA6IFwiYWRzLm5ld3NwYXBlclwiO1xyXG4gICAgdGhpcy5PemVuID0gKHdpbmRvdy5uZXdNZWRpYSA9PSAnVHJ1ZScpID8gXCJhZHMuc2t5c2NyYXBlclwiIDogXCJhZHMub3plblwiO1xyXG4gICAgdGhpcy5PemVuX2xlZnRfVk4gPSAod2luZG93Lm5ld01lZGlhID09ICdUcnVlJykgPyBcImFkcy5za3lzY3JhcGVyLmxlZnRcIiA6IFwiYWRzLm96ZW4ubGVmdFwiO1xyXG4gICAgdGhpcy5NYWF2YXJvbl9tb2JpbGVfVk4gPSAod2luZG93Lm5ld01lZGlhID09ICdUcnVlJykgPyBcImFkcy5pbnRlcnN0aXRpYWwuMVwiIDogXCJhZHMudHJhbnNpdGlvblwiO1xyXG4gICAgdGhpcy5ib3ggPSAod2luZG93Lm5ld01lZGlhID09ICdUcnVlJykgPyBcImFkcy5ib3guM1wiIDogXCJhZHMuMzAweDI1MC4zXCI7XHJcbiAgICB0aGlzLnN0aWNreSA9ICh3aW5kb3cubmV3TWVkaWEgPT0gJ1RydWUnKSA/IFwiYWRzLmJhbm5lclwiIDogXCJhZHMuc3RpY2t5XCI7XHJcbiAgICB0aGlzLmJpZ2xpdmVib3ggPSAod2luZG93Lm5ld01lZGlhID09ICdUcnVlJykgPyBcImFkcy5iaWdsaXZlYm94XCIgOiBcImFkcy5tdy5iaWdsaXZlYm94XCI7XHJcbiAgICB0aGlzLk1hYXZhcm9uX21vYmlsZV94bnQgPSAod2luZG93Lm5ld01lZGlhID09ICdUcnVlJyAmJiB3aW5kb3cuZGNTaXRlID09IFwieG50XCIpID8gXCJhZHMuaW50ZXJzdGl0aWFsLjFcIiA6IFwiYWRzLnRyYW5zaXRpYWwuMVwiO1xyXG4gICAgdGhpcy5uZXdzcGFwZXJfeG50ID0gKHdpbmRvdy5uZXdNZWRpYSA9PSAnVHJ1ZScgJiYgd2luZG93LmRjU2l0ZSA9PSBcInhudFwiKSA/IFwiYWRzLnRvcC5wcm9tb1wiIDogXCJhZHMudG9wLjJcIjtcclxuICAgIHRoaXMudG9wX21pZGRsZV94bnQgPSAod2luZG93Lm5ld01lZGlhID09ICdUcnVlJyAmJiB3aW5kb3cuZGNTaXRlID09IFwieG50XCIpID8gXCJhZHMudG9wX21pZGRsZVwiIDogXCJhZHMuOTcweDkwLjJcIjtcclxuICAgIHRoaXMucGFyZW50X2NhdGVnb3J5ID0gd2luZG93LlBhcmVudENhdGVnb3J5O1xyXG4gICAgdGhpcy5wbGF0Zm9ybV9wYXRoID0gKHdpbmRvdy5pbm5lcldpZHRoID49IFwiNzY3XCIpID8gXCIvZGVza3RvcC9cIiA6IFwiL21vYmlsZXdlYi9cIjtcclxuICAgIHRoaXMuZGNjZyA9IHdpbmRvdy5kY0NHO1xyXG4gICAgdGhpcy5tYXhkY3BhdGhfbGV2ZWwgPSAyO1xyXG4gICAgdGhpcy5uZXdfZGNQYXRoID0gXCJcIjtcclxuICAgIHRoaXMuZGNQYXRoID0gd2luZG93LmRjUGF0aDtcclxuICAgIHRoaXMuZGNTaXRlID0gd2luZG93LmRjU2l0ZTtcclxuICAgIHRoaXMudmlkZW8gPSB3aW5kb3cudmlkZW87XHJcbiAgICB0aGlzLnRydXZpZF9tb2JpbGUgPSB3aW5kb3cuc2hvd190cnV2aWRfbW9iaWxlO1xyXG4gICAgdGhpcy50cnV2aWRfZGVza3RvcCA9IHdpbmRvdy5zaG93X3RydXZpZF9kZXNrdG9wOyBcclxuICAgIHRoaXMuTmV0d29ya051bWJlciA9IFwiNjg3MFwiO1xyXG4gICAgdGhpcy5kY1RhZ3MgPSB3aW5kb3cuZGNUYWdzO1xyXG4gICAgdGhpcy5pbm5lcldpZHRoID0gd2luZG93LmlubmVyV2lkdGg7XHJcbiAgICB0aGlzLmNvdW50ZXJfYmlnbGl2ZWJveCA9IDE7XHJcbiAgICB0aGlzLmNvdW50ZXJfbGl2ZWJveCA9IDE7XHJcbiAgICB0aGlzLnNob3dNYWFhdmFyb25TdGlja3kgPSAodGhpcy5nZXRVcmxWYXJzX2Z1bmMoXCJJc0FwcFwiKSA9PSBcInRydWVcIiAmJiAhd2luZG93LmRjUGF0aC5pbmNsdWRlcyhcIlBuYWlQbHVzXCIpKSA/IDEgOiAwO1xyXG4gICAgaWYgKEluZnJhc3J1Y3R1cmVDbGFzc09iai5TaXRlID09IFwiaXNfeW5zX3ludlwiKSB7XHJcbiAgICAgIHRoaXMubGVuID1cclxuICAgICAgICBkY1BhdGNoQXJyYXkubGVuZ3RoIDwgdGhpcy5tYXhkY3BhdGhfbGV2ZWxcclxuICAgICAgICAgID8gZGNQYXRjaEFycmF5Lmxlbmd0aFxyXG4gICAgICAgICAgOiB0aGlzLm1heGRjcGF0aF9sZXZlbDtcclxuICAgICAgLy90aGlzLmF1ID0gQWRkQWRzLnN1YnN0cmluZyg0KTtcclxuICAgICAgdGhpcy50ZW1wID0gZGNQYXRjaEFycmF5WzBdLmluZGV4T2YoXCIuXCIpO1xyXG4gICAgICB0aGlzLm5ld19kY1BhdGggPSBkY1BhdGNoQXJyYXlbMF0uc3Vic3RyaW5nKHRoaXMudGVtcCk7XHJcbiAgICAgIHZhciBkY1BhdGNoQXJyYXkgPSB0aGlzLmRjUGF0aC5zcGxpdChcIi1cIik7XHJcbiAgICB9XHJcbiAgICAvL3RoaXMuZGNHZXROZXh0Vmlld19mdW5jKENvb2NraWVzRnVuY3Rpb25DbGFzc09iai52aWV3Q29vY2tpZXNfZnVuYygpKVxyXG4gICAgdGhpcy5fRVAgPSBcIlwiO1xyXG4gICAgdGhpcy5qc29uT2JqID0ge307XHJcbiAgfSAvL2VuZCBjb25zdHJ1Y3RvclxyXG4gIC8vQnJvd3NpIGluIGhvdXNlXHJcbiAgYWRkX0Jyb3dzaV9pbmhvdXNlKHNpdGUpIHtcclxuICAgICAgbGV0IGFsbF9zbG90cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCJbaWRePSdhZHMuaW5yZWFkJ11cIik7XHJcbiAgICAgIGlmIChhbGxfc2xvdHMubGVuZ3RoID49IDEpIHtcclxuICAgICAgICB3aW5kb3cuaW5yZWFkcyA9IGFsbF9zbG90cy5sZW5ndGg7XHJcbiAgICAgICAgZm9yIChsZXQgaW5yZWFkX2kgPSAxOyBpbnJlYWRfaSA8PSBhbGxfc2xvdHMubGVuZ3RoOyBpbnJlYWRfaSsrKSB7XHJcbiAgICAgICAgICBpZiAoQWRVbml0UHJvcGVydGllc0NsYXNzT2JqLlNsb3RzW1wiYWRzLmlucmVhZC5cIiArIGlucmVhZF9pXSkge1xyXG4gICAgICAgICAgICBpZiAoc2l0ZSA9PSBcInluZXdzXCIgfHwgc2l0ZSA9PSBcInluZXdzX3Jlc3BvbnNpdmVcIikge1xyXG4gICAgICAgICAgICAgIHRoaXMuZGVmaW5lU2xvdHNZbnNfZnVuYyhcImFkcy5pbnJlYWQuXCIgKyBpbnJlYWRfaSwgW1snZmx1aWQnXSwgWzEsIDFdLCBbMzAwLCAyNTBdLCBbMzAwLCAzMDBdLCBbMzM2LCAyODBdLCBbNDY4LCA2MF0sIFs3MjgsIDkwXV0pOyAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIHRoaXMuZGVmaW5lU2xvdHNfZnVuYyhcImFkcy5pbnJlYWQuXCIgKyBpbnJlYWRfaSwgW1snZmx1aWQnXSwgWzEsIDFdLCBbMzAwLCAyNTBdLCBbMzAwLCAzMDBdLCBbMzM2LCAyODBdLCBbNDY4LCA2MF0sIFs3MjgsIDkwXV0pOyAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9ICAgICAgICAgICAgIFxyXG4gICAgICAgIH1cclxuICAgICAgICBJbmZyYXNydWN0dXJlQ2xhc3NPYmouU2xvdFJlbmRlckVuZChmdW5jdGlvbihldmVudCkge1xyXG4gICAgICAgICAgbGV0IHNsb3RfaWQgPSBldmVudC5zbG90LmdldFNsb3RFbGVtZW50SWQoKTsgIFxyXG4gICAgICAgICAgbGV0IEJveExvYWRlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgbGV0IGJyb3dzaV9iYW5uZXJzID0gW107XHJcbiAgICAgICAgICBmb3IgKGxldCBiYnJvd3NpX2kgPSAxOyBiYnJvd3NpX2kgPD0gYWxsX3Nsb3RzLmxlbmd0aDsgYmJyb3dzaV9pKyspIGJyb3dzaV9iYW5uZXJzLnB1c2goXCJhZHMuaW5yZWFkLlwiICsgYmJyb3dzaV9pKTtcclxuICAgICAgICAgIGxldCBicm93c2lfYmFubmVyID0gKGJyb3dzaV9iYW5uZXJzLmZpbHRlcih4ID0+IHguaW5jbHVkZXMoc2xvdF9pZCkpID09IHNsb3RfaWQpID8gc2xvdF9pZCA6IGZhbHNlO1xyXG4gICAgICAgICAgICBpZiAoYnJvd3NpX2Jhbm5lciAmJiBldmVudC5zbG90ID09IEFkVW5pdFByb3BlcnRpZXNDbGFzc09iai5EZWZpbmVfc2xvdHNbYnJvd3NpX2Jhbm5lcl0pIHtcclxuICAgICAgICAgICAgICBpZiAoIUJveExvYWRlZCkgeyAgXHJcbiAgICAgICAgICAgICAgICBpZihldmVudC5pc0VtcHR5KSB7ICAgICBcclxuICAgICAgICAgICAgICAgICAgbGV0IGJhbm5lcl8gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChicm93c2lfYmFubmVyKTsgXHJcbiAgICAgICAgICAgICAgICAgICBsZXQgZ2V0X2Jhbm5lciA9IGJhbm5lcl8uY2hpbGRyZW5bMF0uY2hpbGRyZW5bMF07XHJcbiAgICAgICAgICAgICAgICAgICBsZXQgZ2V0X2hlaWdodCA9IChnZXRfYmFubmVyKSA/ICBnZXRfYmFubmVyLmNsaWVudEhlaWdodCA6IDA7ICBcclxuICAgICAgICAgICAgICAgICAgIGlmIChnZXRfaGVpZ2h0IDwgMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBjbG9zZXN0X2RpdiA9IGJhbm5lcl8uY2xvc2VzdChcIi5hcnRpY2xlQm9keUlucmVhZFdyYXBwZXJcIik7ICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICBjbG9zZXN0X2Rpdi5zZXRBdHRyaWJ1dGUoXCJzdHlsZVwiLCBcIm1pbi1oZWlnaHQ6IDA7IGhlaWdodDogMDsgdHJhbnNpdGlvbjogbWluLWhlaWdodCAwLjVzXCIpOyAgXHJcbiAgICAgICAgICAgICAgICAgICB9ICAgIFxyXG4gICAgICAgICAgICAgICAgICB9ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgIEJveExvYWRlZD10cnVlO1xyXG4gICAgICAgICAgICAgIH0gICAgXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgfVxyXG4gIENoYW5nZV9wcm9tb19hbmRfbWl2emFrb25fcGxhY2UoKSB7XHJcbiAgICBpZiAod2luZG93LmlzTW9iaWxlMSA9PSBmYWxzZSAmJiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWRzLm1pdnpha29uJykgJiYgKChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmdyaWQxMjgwXCIpICE9IG51bGwgfHwgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5ncmlkMTI4MFwiKSAhPSB1bmRlZmluZWQpIHx8IChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmdyaWQxMjgwXzJcIikgIT0gbnVsbCB8fCBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmdyaWQxMjgwXzJcIikgIT0gdW5kZWZpbmVkKSkpIHtcclxuICAgICAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5DYXRlZ29yeUhlYWRlcicpKSB7XHJcbiAgICAgIGxldCBjb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuQ2F0ZWdvcnlIZWFkZXInKTtcclxuICAgICAgbGV0IG1pdnpha29uX2RpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhZHMubWl2emFrb24nKTsgICAgICBcclxuICAgICAgY29udGFpbmVyLnByZXBlbmQobWl2emFrb25fZGl2KTsgXHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpZiAod2luZG93LmlzTW9iaWxlMSA9PSBmYWxzZSAmJiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFkcy50b3AucHJvbW9cIikgJiYgKChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmdyaWQxMjgwXCIpICE9IG51bGwgfHwgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5ncmlkMTI4MFwiKSAhPSB1bmRlZmluZWQpIHx8IChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmdyaWQxMjgwXzJcIikgIT0gbnVsbCB8fCBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmdyaWQxMjgwXzJcIikgIT0gdW5kZWZpbmVkKSkpIHtcclxuICAgICAgaWYgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhZHMudG9wJykpIHtcclxuICAgICAgbGV0IGNvbnRhaW5lcl90b3AgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWRzLnRvcCcpO1xyXG4gICAgICBsZXQgcHJvbW9fZGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhZHMudG9wLnByb21vXCIpOyAgICAgXHJcbiAgICAgIGNvbnRhaW5lcl90b3AucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUocHJvbW9fZGl2LCBjb250YWluZXJfdG9wLm5leHRTaWJsaW5nKTsgXHJcbiAgICAgIHByb21vX2Rpdi5zZXRBdHRyaWJ1dGUoXCJzdHlsZVwiLCBcInBhZGRpbmc6MTVweCAwcHggMHB4IDBweDsgbWFyZ2luOjAgYXV0bzsgZGlzcGxheTpmbGV4OyBqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyOyBkaXNwbGF5Oi13ZWJraXQtYm94OyAtd2Via2l0LWJveC1wYWNrOmNlbnRlcjsgZGlzcGxheTotbXMtZmxleGJveDsgLW1zLWZsZXgtcGFjazpjZW50ZXI7IHRleHQtYWxpZ246Y2VudGVyO1wiKTsgICAgIFxyXG4gICAgICBpZiAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhZHMudG9wLnByb21vXCIpLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiZGl2XCIpWzBdICE9IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYWRzLnRvcC5wcm9tb1wiKS5nZXRFbGVtZW50c0J5VGFnTmFtZShcImRpdlwiKVswXS5zdHlsZS50ZXh0QWxpZ24gPSBcImNlbnRlclwiO1xyXG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYWRzLnRvcC5wcm9tb1wiKS5nZXRFbGVtZW50c0J5VGFnTmFtZShcImRpdlwiKVswXS5zdHlsZS5tYXJnaW4gPSBcIjAgYXV0b1wiO1xyXG4gICAgICB9XHJcbiAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuICBBZGREaXZzKCkge1xyXG4gICAgICBsZXQgYmFubmVycyA9IHtcclxuICAgICAgICBcImFkcy5kb3VibGVzdHJpcG9uX2Rlc2t0b3AuMVwiIDogXCJhZHMuZG91Ymxlc3RyaXBvbi4xXCIsXHJcbiAgICAgICAgXCJhZHMuaXZvcnlfZGVza3RvcC4xXCIgOiBcImFkcy5pdm9yeS4xXCIsXHJcbiAgICAgICAgXCJhZHMuNTg2eDg4LjFcIiA6IFwiYWRzLnN0cmlwLmNoYW5uZWwuMVwiLFxyXG4gICAgICAgIFwiYWRzLjQ5MHg4OC4xXCIgOiBcImFkcy5zdHJpcC4xXCIsXHJcbiAgICAgICAgXCJhZHMuMzAweDYwMC4xXCIgOiBcImFkcy5iaWdib3guMVwiLFxyXG4gICAgICAgIFwiYWRzLjMwMHgyNTAuMVwiIDogXCJhZHMuYm94LjFcIixcclxuICAgICAgICBcImFkcy4zMDB4MjUwLjJcIiA6IFwiYWRzLmJveC4yXCIsXHJcbiAgICAgICAgXCJhZHMuMzAweDI1MC4zXCIgOiBcImFkcy5ib3guM1wiLFxyXG4gICAgICAgIFwiYWRzLjMwMHgyNTAuNFwiIDogXCJhZHMuYm94LjRcIixcclxuICAgICAgICBcImFkcy45ODB4OTAuMVwiIDogXCJhZHMuYm90dG9tYmFubmVyLjFcIixcclxuICAgICAgICBcImFkcy50b3BzdHJpcG9uX2Rlc2t0b3AuMVwiIDogXCJhZHMudG9wc3RyaXBvbi4xXCIsXHJcbiAgICAgICAgXCJhZHMuYm90dG9tc3RyaXBvbl9kZXNrdG9wLjFcIiA6IFwiYWRzLmJvdHRvbXN0cmlwb24uMVwiLFxyXG4gICAgICAgIFwiYWRzLnJpZ2h0c3RyaXBvbl9kZXNrdG9wLjFcIiA6IFwiYWRzLnJpZ2h0c3RyaXBvbi4xXCIsXHJcbiAgICAgIH1cclxuICBcclxuICAgICAgZnVuY3Rpb24gaW5zZXJ0QWZ0ZXIocmVmZXJlbmNlTm9kZSwgbmV3Tm9kZSkge1xyXG4gICAgICByZWZlcmVuY2VOb2RlLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKG5ld05vZGUsIHJlZmVyZW5jZU5vZGUubmV4dFNpYmxpbmcpO1xyXG4gICAgICB9ICAgICBcclxuICAgICAgICAgICAgZm9yIChsZXQgayBpbiBiYW5uZXJzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICBpZiAoYmFubmVycy5oYXNPd25Qcm9wZXJ0eShrKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZChrKSAgIT0gbnVsbCB8fCBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChrKSAhPSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBkaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChrKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbC5pZCA9IGJhbm5lcnNba107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbC5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBcImdlbmVyYWxfYmFubmVyX2FkXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWwuc2V0QXR0cmlidXRlKFwiZGF0YS1hZHVuaXRcIiwgYmFubmVyc1trXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbC5zZXRBdHRyaWJ1dGUoXCJkYXRhLW9sZFwiLCBkaXYuaWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWwuc3R5bGUucGFkZGluZyA9IGRpdi5zdHlsZS5wYWRkaW5nO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5zZXJ0QWZ0ZXIoZGl2LCBlbCk7IFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGl2LnJlbW92ZSgpOyAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBcclxuICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgICAgfSBcclxuICAgICAgICAgICAgXHJcbiAgfVxyXG4gIGdldEtleVZhbHVlc19mdW5jKCkge1xyXG4gICAgLy9nZXRLZXlWYWx1ZXNfZnVuYyBmdW5jdGlvbiBjcmVhdGUga2V5IHZhbHVlIE9iamVjdC5cclxuICAgIC8vVGhpcyBvYmplY3QgY29udGFpbiBhbGwga2V5cyB0aGF0IGhhcyBiZWVuIHVzZWQgaW4gREZQIGluIGFpbSB0byBkaXNwbGF5IGdwdFxyXG4gICAgLy9UaGlzIGZ1bmN0aW9uIGlzIHVzZWQgZnJvbSBhbGwgbWFpbiBzY3JpcHRzIHRoYXQgc3RhcnQgd2l0aCAnZ3B0X3NjaXB0Xy4uLidcclxuICAgIGxldCBfRFkgPSBcIlwiO1xyXG4gICAgbGV0IHN0YWdlID0gXCJcIjtcclxuICAgIGxldCBwbGF0Zm9ybSA9IFwiXCI7XHJcbiAgICBpZiAod2luZG93LmRjU2l0ZSA9PSBcInludFwiICYmIHdpbmRvdy5tYXRjaE1lZGlhICYmIHdpbmRvdy5tYXRjaE1lZGlhKCdvbmx5IHNjcmVlbiBhbmQgKG1heC13aWR0aDo3NjhweCApIGFuZCAob3JpZW50YXRpb246IHBvcnRyYWl0KSwgb25seSBzY3JlZW4gYW5kIChtYXgtd2lkdGg6IDkwMHB4KSBhbmQgKG9yaWVudGF0aW9uOiBsYW5kc2NhcGUpJykubWF0Y2hlcykge1xyXG4gICAgICBpZiAod2luZG93Lm1hdGNoTWVkaWEoJyhwcmVmZXJzLWNvbG9yLXNjaGVtZTogZGFyayknKS5tYXRjaGVzKSB7XHJcbiAgICAgICAgdGhpcy5qc29uT2JqW1wiRGFya19Nb2RlXCJdID0gXCJvblwiO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhpcy5qc29uT2JqW1wiRGFya19Nb2RlXCJdID0gXCJvZmZcIjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAobG9jYXRpb24uaHJlZi5pbmNsdWRlcyhcInFhLlwiKSB8fCBsb2NhdGlvbi5ocmVmLmluY2x1ZGVzKFwiZGUtcWEtd2NtLWNsb3VkLnlpdC5jby5pbFwiKSkge1xyXG4gICAgICB0aGlzLmpzb25PYmpbXCJlbnZcIl0gPSBcIlFBXCI7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHdpbmRvdy5kY0NHID09IFwiYXJ0aWNsZVwiKSB7XHJcbiAgICAgIHRoaXMuanNvbk9ialtcImFydGljbGVfY2xhc3NcIl0gPSB3aW5kb3cuZGF0YUxheWVyWzBdLmFydGljbGVfY2xhc3MgPyB3aW5kb3cuZGF0YUxheWVyWzBdLmFydGljbGVfY2xhc3MgOiBcIlwiOyBcclxuICAgIH1cclxuICAgIFxyXG4gICAgaWYgKFwidW5kZWZpbmVkXCIgIT0gdHlwZW9mIHdpbmRvdy5kY0ZvcnVtSUQgJiYgd2luZG93LmRjRm9ydW1JRCAhPSBudWxsKSB7XHJcbiAgICAgIHRoaXMuanNvbk9ialtcInluZmlcIl0gPSB3aW5kb3cuZGNGb3J1bUlEO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5qc29uT2JqW1wieW5maVwiXSA9IFwiMFwiO1xyXG4gICAgfVxyXG4gICAgaWYgKFwidW5kZWZpbmVkXCIgIT0gdHlwZW9mIHdpbmRvdy5kY0tleXdvcmQgJiYgd2luZG93LmRjS2V5d29yZCAhPSBudWxsKSB7XHJcbiAgICAgIHRoaXMuanNvbk9ialtcImRja3dcIl0gPSB3aW5kb3cuZGNLZXl3b3JkO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5qc29uT2JqW1wiZGNrd1wiXSA9IFwiMFwiO1xyXG4gICAgfVxyXG4gICAgaWYgKFwidW5kZWZpbmVkXCIgIT0gdHlwZW9mIHdpbmRvdy5kY0NhdGVnb3J5ICYmIHdpbmRvdy5kY0NhdGVnb3J5ICE9IG51bGwpIHtcclxuICAgICAgdGhpcy5qc29uT2JqW1wibmdjaFwiXSA9IHdpbmRvdy5kY0NhdGVnb3J5O1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5qc29uT2JqW1wibmdjaFwiXSA9IFwiMFwiO1xyXG4gICAgfVxyXG4gICAgaWYgKFxyXG4gICAgICBcInVuZGVmaW5lZFwiICE9IHR5cGVvZiB3aW5kb3cuZGNDYXRlZ29yeUlEICYmXHJcbiAgICAgIHdpbmRvdy5kY0NhdGVnb3J5SUQgIT0gbnVsbFxyXG4gICAgKSB7XHJcbiAgICAgIHRoaXMuanNvbk9ialtcInlyY2FcIl0gPSB3aW5kb3cuZGNDYXRlZ29yeUlEO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5qc29uT2JqW1wieXJjYVwiXSA9IFwiMFwiO1xyXG4gICAgfVxyXG4gICAgaWYgKFwidW5kZWZpbmVkXCIgIT0gdHlwZW9mIHdpbmRvdy5kY1RhZ3MgJiYgd2luZG93LmRjVGFncyAhPSBudWxsKSB7XHJcbiAgICAgIGlmICgod2luZG93LmRjUGF0aC5pbmNsdWRlcyhcInRhZ3NcIikgfHwgd2luZG93LmRjUGF0aC5pbmNsdWRlcyhcIlRvcGljc1wiKSkgJiYgd2luZG93LmRjVGFncy5sZW5ndGggPT0gMCkge1xyXG4gICAgICAgIHRoaXMuanNvbk9ialtcImRjVGFnXCJdID0gZG9jdW1lbnQudGl0bGU7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhpcy5qc29uT2JqW1wiZGNUYWdcIl0gPSB3aW5kb3cuZGNUYWdzO1xyXG4gICAgICB9ICAgICBcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuanNvbk9ialtcImRjVGFnXCJdID0gXCIwXCI7XHJcbiAgICB9XHJcbiAgICBpZiAoXCJ1bmRlZmluZWRcIiAhPSB0eXBlb2YgdGhpcy5kY1BhdGggJiYgdGhpcy5kY1BhdGggIT0gbnVsbCkge1xyXG4gICAgICB0aGlzLmpzb25PYmpbXCJ5bmNoXCJdID0gdGhpcy5kY1BhdGg7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLmpzb25PYmpbXCJ5bmNoXCJdID0gXCIwXCI7XHJcbiAgICB9XHJcbiAgICBpZiAoXCJ1bmRlZmluZWRcIiAhPSB0eXBlb2YgdGhpcy5kY1BhdGggJiYgdGhpcy5kY1BhdGggIT0gbnVsbCkge1xyXG4gICAgICB0aGlzLmpzb25PYmpbXCJkY1BhdGhcIl0gPSB0aGlzLmRjUGF0aDtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuanNvbk9ialtcImRjUGF0aFwiXSA9IFwiMFwiO1xyXG4gICAgfVxyXG4gICAgaWYgKFwidW5kZWZpbmVkXCIgIT0gdHlwZW9mIHdpbmRvdy5kY0NHICYmIHdpbmRvdy5kY0NHICE9IG51bGwpIHtcclxuICAgICAgdGhpcy5qc29uT2JqW1wiZGNjZ1wiXSA9IHdpbmRvdy5kY0NHO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5qc29uT2JqW1wiZGNjZ1wiXSA9IFwiMFwiO1xyXG4gICAgfVxyXG4gICAgaWYgKFwidW5kZWZpbmVkXCIgIT0gdHlwZW9mIHdpbmRvdy5kY1ZpZGVvICYmIHdpbmRvdy5kY1ZpZGVvICE9IG51bGwpIHtcclxuICAgICAgdGhpcy5qc29uT2JqW1wieW52Y1wiXSA9IHdpbmRvdy5kY1ZpZGVvO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5qc29uT2JqW1wieW52Y1wiXSA9IFwiMFwiO1xyXG4gICAgfVxyXG4gICAgaWYgKFxyXG4gICAgICBcInVuZGVmaW5lZFwiICE9IHR5cGVvZiB3aW5kb3cuZGNDb250ZW50SUQgJiZcclxuICAgICAgd2luZG93LmRjQ29udGVudElEICE9IG51bGxcclxuICAgICkge1xyXG4gICAgICB0aGlzLmpzb25PYmpbXCJ5bmNkXCJdID0gd2luZG93LmRjQ29udGVudElEO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5qc29uT2JqW1wieWRcIl0gPSBcIjBcIjtcclxuICAgIH1cclxuICAgIHRoaXMuanNvbk9ialtcImNhbGxUeXBlXCJdID0gXCJHUFRcIjtcclxuICAgIHN0YWdlID0gdGhpcy5nZXRVcmxWYXJzX2Z1bmMoXCJkY1N0YWdlXCIpO1xyXG4gICAgaWYgKHN0YWdlKSB0aGlzLmpzb25PYmpbXCJ5bnN0XCJdID0gc3RhZ2U7XHJcbiAgICBpZiAoc3RhZ2UpIHRoaXMuanNvbk9ialtcImRjU3RhZ2VcIl0gPSBzdGFnZTtcclxuICAgIHBsYXRmb3JtID0gKHdpbmRvdy5pc01vYmlsZTEgfHwgKHdpbmRvdy5pbm5lcldpZHRoIDwgNzY4ICYmIHdpbmRvdy5kY1BhdGguaW5jbHVkZXMoXCJQbmFpUGx1c1wiKSkpID8gXCJtb2JpbGVcIiA6IFwiZGVza3RvcFwiO1xyXG4gICAgaWYgKHdpbmRvdy5kY1NpdGUuaW5jbHVkZXMoXCJteW5ldFwiKSAmJiBwbGF0Zm9ybSkgdGhpcy5qc29uT2JqW1wibXluZXRfcGxhdGZvcm1cIl0gPSBwbGF0Zm9ybTtcclxuICAgIGlmICh3aW5kb3cuZGNTaXRlLmluY2x1ZGVzKFwibXluZXRcIikpIHtcclxuICAgICAgbGV0IFNpdGVzdHIgPSB3aW5kb3cuZGNTaXRlO1xyXG4gICAgICBsZXQgc2l0ZV9uYW1lID0gU2l0ZXN0ci5zdWJzdHIoNSwgU2l0ZXN0ci5sZW5ndGgpO1xyXG4gICAgICB0aGlzLmpzb25PYmpbXCJteW5ldF9jaXRpZXNcIl0gPSBzaXRlX25hbWU7XHJcbiAgICB9XHJcbiAgICBpZiAoXCJ1bmRlZmluZWRcIiAhPSB0eXBlb2YgdGhpcy5kY1BhdGggJiYgdGhpcy5kY1BhdGguaW5jbHVkZXMoXCIzNDU2Lk1hZ2F6aW5lXCIpKSB7XHJcbiAgICAgIHRoaXMuanNvbk9ialtcImJsYXplclwiXSA9IFwiYmxhemVyXCI7XHJcbiAgICB9IFxyXG4gICAgaWYgKFxyXG4gICAgICBJbmZyYXNydWN0dXJlQ2xhc3NPYmouU2l0ZSA9PSBcImlzX3luc1wiIHx8XHJcbiAgICAgIEluZnJhc3J1Y3R1cmVDbGFzc09iai5TaXRlID09IFwiaXNfeG5ldFwiXHJcbiAgICApIHtcclxuICAgICAgX0RZID0gQ29vY2tpZXNGdW5jdGlvbkNsYXNzT2JqLnJlYWRDb29raWVfZnVuYyhcIlRNX2R5YXVkX25jaGNcIik7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAvLyB2YXIgX0RZID0gQ29vY2tpZXNGdW5jdGlvbkNsYXNzT2JqLnJlYWRDb29raWVfZnVuYygnVE1fZHlhdWRfbmNoYycpXHJcbiAgICAgIC8vdGhpcy5yZWFkRFlfZnVuYygpOyAvL1JVTiBEWSBGVU5DVElPTlxyXG4gICAgICBfRFkgPSBsb2NhbFN0b3JhZ2UuX2R5OyAvL0dFVCBEQVRBIEZST00gRFkgU1RPUkVEIElOIExPQ0FMU1RPUkFHRVxyXG4gICAgfVxyXG5cclxuICAgIGlmIChfRFkpIHtcclxuICAgICAgX0RZID0gX0RZLnNwbGl0KFwiKlwiKVswXTtcclxuICAgICAgaWYgKF9EWS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgX0RZID0gX0RZLnNwbGl0KFwiLlwiKTtcclxuICAgICAgICB0aGlzLmpzb25PYmpbXCJEWUFcIl0gPSBfRFk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGxldCBfRVAgPSB0aGlzLnJlYWRFeHBvc2Vib3hfZnVuYygpO1xyXG4gICAgaWYgKF9FUCkge1xyXG4gICAgICBfRVAgPSBfRVAuc3BsaXQoXCIqXCIpWzBdO1xyXG4gICAgICBpZiAoX0VQLmxlbmd0aCA+IDApIHtcclxuICAgICAgICBfRVAgPSBfRVAuc3BsaXQoXCIuXCIpO1xyXG4gICAgICAgIHRoaXMuanNvbk9ialtcIkV4cG9zZWJveFwiXSA9IF9FUDtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgX0VQID0gQ29vY2tpZXNGdW5jdGlvbkNsYXNzT2JqLnJlYWRDb29raWVfZnVuYyhcIlRNX0RDQ0dyb3VwXCIpO1xyXG4gICAgaWYgKF9FUCkge1xyXG4gICAgICBfRVAgPSBfRVAuc3BsaXQoXCIqXCIpWzBdO1xyXG4gICAgICBpZiAoX0VQLmxlbmd0aCA+IDApIHtcclxuICAgICAgICBfRVAgPSBfRVAuc3BsaXQoXCIuXCIpO1xyXG4gICAgICAgIHRoaXMuanNvbk9ialtcIkRDQ0dyb3VwXCJdID0gX0VQO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5qc29uT2JqW1wiZGNzY2hcIl0gPSBcIm51bGxcIjtcclxuICAgIHRoaXMuanNvbk9ialtcImRjY3dcIl0gPSBcIlwiICsgXCJoaWdoX3Jlc1wiICsgXCJcIjtcclxuICAgIHRoaXMuanNvbk9ialtcImRjc3dcIl0gPSBcIlwiICsgc2NyZWVuLndpZHRoICsgXCJcIjtcclxuICAgIENvb2NraWVzRnVuY3Rpb25DbGFzc09iai5zZXRWaWV3Q29va2llc19mdW5jKCk7IC8vIG9sZFxyXG4gICAgaWYgKEluZnJhc3J1Y3R1cmVDbGFzc09iai5TaXRlID09IFwiaXNfeW5zXCIpIHtcclxuICAgICAgQ29vY2tpZXNGdW5jdGlvbkNsYXNzT2JqLnZpZXdDb29ja2llc19mdW5jKCk7IC8vIG5ld1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5kY0dldE5leHRWaWV3X2Z1bmMoQ29vY2tpZXNGdW5jdGlvbkNsYXNzT2JqLnZpZXdDb29ja2llc19mdW5jKCkpOyAvLyBuZXdcclxuICAgIH1cclxuICAgIGlmIChcclxuICAgICAgSW5mcmFzcnVjdHVyZUNsYXNzT2JqLlNpdGUgPT0gXCJpc184MDBcIiB8fFxyXG4gICAgICBJbmZyYXNydWN0dXJlQ2xhc3NPYmouU2l0ZSA9PSBcImlzX3luc195bnZcIiB8fFxyXG4gICAgICBJbmZyYXNydWN0dXJlQ2xhc3NPYmouU2l0ZSA9PSBcImlzX3luc1wiXHJcbiAgICApIHtcclxuICAgICAgaWYgKFxyXG4gICAgICAgIFwidW5kZWZpbmVkXCIgIT0gdHlwZW9mIEFkVW5pdFByb3BlcnRpZXNDbGFzc09iai5EQ3ZpZXcgJiZcclxuICAgICAgICBBZFVuaXRQcm9wZXJ0aWVzQ2xhc3NPYmouREN2aWV3ICE9IG51bGxcclxuICAgICAgKSB7XHJcbiAgICAgICAgaWYgKEFkVW5pdFByb3BlcnRpZXNDbGFzc09iai5EQ3ZpZXcgPD0gNSkge1xyXG4gICAgICAgICAgdGhpcy5qc29uT2JqW1wiZGN1bmlncHRcIl0gPSBcInZpZXdcIiArIEFkVW5pdFByb3BlcnRpZXNDbGFzc09iai5EQ3ZpZXc7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHRoaXMuanNvbk9ialtcImRjdW5pZ3B0XCJdID0gXCJ2aWV3XCI7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBpZiAoXHJcbiAgICAgICAgXCJ1bmRlZmluZWRcIiAhPSB0eXBlb2YgQWRVbml0UHJvcGVydGllc0NsYXNzT2JqLkRDdmlldyAmJlxyXG4gICAgICAgIEFkVW5pdFByb3BlcnRpZXNDbGFzc09iai5EQ3ZpZXcgIT0gbnVsbFxyXG4gICAgICApIHtcclxuICAgICAgICBpZiAod2luZG93LmRjQ0cgPT0gXCJob21lXCIgfHwgd2luZG93LmRjUGF0aCA9PSBcIjI3NzUuS25lc3NldC0zMjQ3Mi55dXZhbDEyODBcIikge1xyXG4gICAgICAgICAgaWYgKEFkVW5pdFByb3BlcnRpZXNDbGFzc09iai5EQ3ZpZXcgPD0gNSkge1xyXG4gICAgICAgICAgICB0aGlzLmpzb25PYmpbXCJkY3VuaWdwdFwiXSA9IFwidmlld1wiICsgQWRVbml0UHJvcGVydGllc0NsYXNzT2JqLkRDdmlldztcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuanNvbk9ialtcImRjdW5pZ3B0XCJdID0gXCJ2aWV3XCI7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGlmIChBZFVuaXRQcm9wZXJ0aWVzQ2xhc3NPYmouREN2aWV3IDw9IDUpIHtcclxuICAgICAgICAgICAgdGhpcy5qc29uT2JqW1wiZGN1bmlncHRcIl0gPSBcInZpZXdcIiArIEFkVW5pdFByb3BlcnRpZXNDbGFzc09iai5EQ3ZpZXc7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmpzb25PYmpbXCJkY3VuaWdwdFwiXSA9IFwidmlld1wiO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuanNvbk9ialtcImNoYXJzZXRcIl0gPSBcIlVURi04XCI7XHJcbiAgICAvL3RoaXMuZGZwUGFyYW0gPSB0aGlzLmpzb25PYmo7XHJcbiAgfSAvLyBlbmQgb2YgZ2V0S2V5VmFsdWVzX2Z1bmNcclxuICByZWFkRXhwb3NlYm94X2Z1bmMoKSB7XHJcbiAgICAvL3JlYWRFeHBvc2Vib3hfZnVuYyBjYWxsIGZyb20gZnVuY3Rpb24gZ2V0S2V5VmFsdWVzX2Z1bmMoKVxyXG4gICAgLy9UaGUgRVhQT1NFQk9YIHNlcnZlciB1c2VzIG91ciBmdW5jdGlvbiB0aGF0IHByZXNlcnZlcyB0aGUgc3VibWlzc2lvbiB0aW1lIG9mIGNhdGVnb3JpZXMgZnJvbSB0aGVpciBzZXJ2ZXIuXHJcbiAgICBMb2coXCJyZWFkRXhwb3NlYm94X2Z1bmNcIik7XHJcbiAgICBsZXQgdGltZV9ub3cgPSArbmV3IERhdGUoKTtcclxuICAgIGlmIChcclxuICAgICAgbG9jYWxTdG9yYWdlLl9FeHBvc2Vib3hfZXhwaXJlICE9IG51bGwgfHxcclxuICAgICAgbG9jYWxTdG9yYWdlLl9FeHBvc2Vib3hfZXhwaXJlICE9IHVuZGVmaW5lZFxyXG4gICAgKSB7XHJcbiAgICAgIGlmICh0aW1lX25vdyA+ICtsb2NhbFN0b3JhZ2UuX0V4cG9zZWJveF9leHBpcmUpIHtcclxuICAgICAgICBsb2NhbFN0b3JhZ2UuX2V4cG8gPSBcIlwiO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAoXHJcbiAgICAgIGxvY2FsU3RvcmFnZS5fZXhwbyAhPSBudWxsICYmXHJcbiAgICAgIGxvY2FsU3RvcmFnZS5fZXhwbyAhPSB1bmRlZmluZWQgJiZcclxuICAgICAgbG9jYWxTdG9yYWdlLl9leHBvICE9IFwiXCJcclxuICAgICkge1xyXG4gICAgICBBZFVuaXRQcm9wZXJ0aWVzQ2xhc3NPYmouRXhwbyA9IGxvY2FsU3RvcmFnZS5fZXhwbztcclxuICAgICAgcmV0dXJuIEFkVW5pdFByb3BlcnRpZXNDbGFzc09iai5FeHBvO1xyXG4gICAgfVxyXG4gIH1cclxuICBmaW5kQWxsRGl2X2Z1bmMoKSB7XHJcbiAgICAvL2ZpbmRBbGxEaXZfZnVuYyBmdW5jdGlvbiB1c2UgbWFueSB0aW1lcyBpbiBhbGwgc2NyaXB0cyBpdCBnZXQgYWxsIGFsZW1lbnQgZm9yIHRoZSBncHQsIGl0IG5lZWQgdG8gcnVuIG9ubHkgYWZ0ZXIgdGhlIGh0bWwgYnVpbGQuLiB0aGVyZWZvciB0aGVyZSBpc1xyXG4gICAgLy9hbm90aGVyIGZ1bmN0aW9uIGluIEluZnJhc3RydWN0dXJlQ2xhc3MgdGhhdCB1c2luZyBhd2FpdCB0byBnZXQgYWxsIGVsZW1lbnRcclxuICAgIHZhciBlbGVtcyA9IEluZnJhc3J1Y3R1cmVDbGFzc09iai5hZHNFbGVtZW50cztcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZWxlbXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgQWRVbml0UHJvcGVydGllc0NsYXNzT2JqLlNsb3RzW2VsZW1zW2ldLmlkXSA9IGVsZW1zW2ldO1xyXG4gICAgfVxyXG4gIH1cclxuICBkY0dldE5leHRWaWV3X2Z1bmMoa2V5KSB7XHJcbiAgICAvL2RjR2V0TmV4dFZpZXdfZnVuYyBmdW5jdGlvbiBnZXQga2V5IGZyb20gdGhlIHZpZXdDb29ja2llc19mdW5jIGFuZCB1c2UgaXQgdG8gc2V0IHRoZSBEQ3ZpZXcgKHRoZSB2aWV3KVxyXG4gICAgLy9jb25zb2xlLmxvZygnZGNHZXROZXh0Vmlld19mdW5jJylcclxuICAgIGxldCBkY0RhdGUgPSBuZXcgRGF0ZShcclxuICAgICAgbmV3IERhdGUoKS5nZXRUaW1lKCkgKyAxMCAqIDYwICogNjAgKiAxMDAwXHJcbiAgICApLmdldFVUQ0RhdGUoKTtcclxuICAgIGxldCB2aWV3cyA9IHt9O1xyXG4gICAgdHJ5IHtcclxuICAgICAgdmlld3MgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5fZGNWaWV3cyk7XHJcbiAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgIHZpZXdzID0ge307XHJcbiAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKFwiX2RjVmlld3NcIik7XHJcbiAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKFwiX2RjRGF0ZVwiKTtcclxuICAgIH1cclxuICAgIGlmIChkY0RhdGUgIT0gbG9jYWxTdG9yYWdlLl9kY0RhdGUpIHtcclxuICAgICAgbG9jYWxTdG9yYWdlLl9kY0RhdGUgPSBkY0RhdGU7XHJcbiAgICAgIHZpZXdzID0ge307XHJcbiAgICB9XHJcbiAgICB2aWV3c1trZXldID09IHVuZGVmaW5lZCA/ICh2aWV3c1trZXldID0gMSkgOiB2aWV3c1trZXldKys7XHJcbiAgICBsb2NhbFN0b3JhZ2UuX2RjVmlld3MgPSBKU09OLnN0cmluZ2lmeSh2aWV3cyk7XHJcbiAgICBBZFVuaXRQcm9wZXJ0aWVzQ2xhc3NPYmouREN2aWV3ID0gdmlld3Nba2V5XTtcclxuICAgIGlmIChBZFVuaXRQcm9wZXJ0aWVzQ2xhc3NPYmouREN2aWV3ID4gNSkge1xyXG4gICAgICBBZFVuaXRQcm9wZXJ0aWVzQ2xhc3NPYmouREN2aWV3ID0gdW5kZWZpbmVkO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIEFkVW5pdFByb3BlcnRpZXNDbGFzc09iai5EQ3ZpZXc7XHJcbiAgfVxyXG4gIGdldERjUGF0aF9mdW5jKGRjX3BhdGgpIHtcclxuICAgIC8vIGdldCB3aW5kb3dzIGRjUGF0aCBhbmQgcmV0dXJuXHJcbiAgICBMb2coXCJnZXREY1BhdGhfZnVuY1wiKTtcclxuICAgIGxldCB0aGlzX3BhdGggPSBkY19wYXRoO1xyXG4gICAgbGV0IHBhdGNoX2FycmF5ID0gdGhpc19wYXRoLnNwbGl0KFwiLVwiKTtcclxuICAgIGxldCB0ZW1wX3BhdGggPSBwYXRjaF9hcnJheVswXS5pbmRleE9mKFwiLlwiKTtcclxuICAgIGxldCBuZXdfZGNQYXRoID0gcGF0Y2hfYXJyYXlbMF0uc3Vic3RyaW5nKHRlbXBfcGF0aCk7XHJcbiAgICByZXR1cm4gbmV3X2RjUGF0aDtcclxuICB9XHJcbiAgZ2V0VXJsVmFyc19mdW5jKGRjU3RhZ2Vfc3RyaW5nKSB7XHJcbiAgICBMb2coXCJnZXRVcmxWYXJzX2Z1bmNcIik7XHJcbiAgICBjb25zdCB2YXJzX2xpc3QgPSBbXTtcclxuICAgIGxldCBoYXNoX2xpc3QgPSBbXTtcclxuICAgIGxldCBoYXNoZXMgPSB3aW5kb3cubG9jYXRpb24uaHJlZlxyXG4gICAgICAuc2xpY2Uod2luZG93LmxvY2F0aW9uLmhyZWYuaW5kZXhPZihcIj9cIikgKyAxKVxyXG4gICAgICAuc3BsaXQoXCImXCIpO1xyXG4gICAgbGV0IGhhc2hlc0xlbiA9IGhhc2hlcy5sZW5ndGg7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGhhc2hlc0xlbjsgaSsrKSB7XHJcbiAgICAgIGhhc2hfbGlzdCA9IGhhc2hlc1tpXS5zcGxpdChcIj1cIik7XHJcbiAgICAgIHZhcnNfbGlzdC5wdXNoKGhhc2hfbGlzdFswXSk7XHJcbiAgICAgIHZhcnNfbGlzdFtoYXNoX2xpc3RbMF1dID0gaGFzaF9saXN0WzFdO1xyXG4gICAgfVxyXG4gICAgaWYgKGRjU3RhZ2Vfc3RyaW5nKSB7XHJcbiAgICAgIHJldHVybiB2YXJzX2xpc3RbZGNTdGFnZV9zdHJpbmddO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIHZhcnNfbGlzdDtcclxuICAgIH1cclxuICB9XHJcbiAgYWRVbml0Q2FsbFluc1ludl9mdW5jKEFkZEFkcykge1xyXG4gICAgLy9hZFVuaXRDYWxsWG5ldF9mdW5jIGNhbGwgZnJvbSBkZWZpbmVTbG90c19mdW5jXHJcbiAgICAvL1RoZSBmdW5jdGlvbiBjcmVhdGUgYWRVbml0UGF0aCBmb3IgZ29vZ2xldGFnLmRlZmluZVNsb3RcclxuICAgIGxldCBhZF91bml0X3BhdGggPSBcIi9cIjtcclxuICAgIGxldCBwYXRoID0gcmVxdWlyZShcInBhdGhcIik7XHJcbiAgICBjb25zdCBkY1BhdGNoQXJyYXkgPSB0aGlzLmRjUGF0aC5zcGxpdChcIi1cIik7XHJcbiAgICBjb25zdCBsZW4gPVxyXG4gICAgICBkY1BhdGNoQXJyYXkubGVuZ3RoIDwgdGhpcy5tYXhkY3BhdGhfbGV2ZWxcclxuICAgICAgICA/IGRjUGF0Y2hBcnJheS5sZW5ndGhcclxuICAgICAgICA6IHRoaXMubWF4ZGNwYXRoX2xldmVsO1xyXG4gICAgY29uc3QgYXUgPSBBZGRBZHMuc3Vic3RyaW5nKDQpO1xyXG5cclxuICAgIC8vbGV0IHBhcmVudENhdGVnb3J5ID0gdGhpcy5wYXJlbnRfY2F0ZWdvcnk7XHJcbiAgICBpZiAodGhpcy5uZXdNZWRpYSA9PSBcIlRydWVcIikge1xyXG4gICAgICAvL2lmIChwYXJlbnRDYXRlZ29yeS5jaGFyQXQoMCkgPT0gXCJWXCIgJiYgcGFyZW50Q2F0ZWdvcnkuY2hhckF0KDEpICE9IFwiVlwiIHx8IHBhcmVudENhdGVnb3J5ICE9IFwiVmVzdGlcIikge1xyXG4gICAgICAvLyAgcGFyZW50Q2F0ZWdvcnkgPSBwYXJlbnRDYXRlZ29yeS5zbGljZSgxKTtcclxuICAgICAgLy8gfVxyXG4gICAgICAvL2NvbnN0IG1haW5fY2F0ZWdvcnkgPSAodGhpcy5kY1BhdGggPT0gXCI1MC5WZXN0aVwiIHx8IHRoaXMucGFyZW50X2NhdGVnb3J5ID09IFwiVmVzdGlcIikgPyBcIi9jZW50cmFsXCIgOiAoXCIvXCIgKyBwYXJlbnRDYXRlZ29yeS50b0xvd2VyQ2FzZSgpKTtcclxuICAgICAgY29uc3Qgc2l0ZSA9IFwidmVzdHlcIjtcclxuICAgICAgYWRfdW5pdF9wYXRoID0gcGF0aC5qb2luKGFkX3VuaXRfcGF0aCwgdGhpcy5OZXR3b3JrTnVtYmVyLCBzaXRlICsgdGhpcy5wbGF0Zm9ybV9wYXRoICsgYXUgKyBcIi9cIiArIEFkdW5pdERjUGF0aENsYXNzLmdldCh0aGlzLmRjUGF0aCkpO1xyXG4gICAgICByZXR1cm4gYWRfdW5pdF9wYXRoO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY29uc3QgZGNQYXRjaEFycmF5ID0gdGhpcy5kY1BhdGguc3BsaXQoXCItXCIpO1xyXG4gICAgICBjb25zdCBsZW4gPVxyXG4gICAgICAgIGRjUGF0Y2hBcnJheS5sZW5ndGggPCB0aGlzLm1heGRjcGF0aF9sZXZlbFxyXG4gICAgICAgICAgPyBkY1BhdGNoQXJyYXkubGVuZ3RoXHJcbiAgICAgICAgICA6IHRoaXMubWF4ZGNwYXRoX2xldmVsO1xyXG4gICAgICBsZXQgdGVtcCA9IGRjUGF0Y2hBcnJheVswXS5pbmRleE9mKFwiLlwiKTtcclxuICAgICAgY29uc3QgbmV3X2RjUGF0aCA9IGRjUGF0Y2hBcnJheVswXS5zdWJzdHJpbmcodGVtcCk7XHJcbiAgICAgIGlmICh0aGlzLmlubmVyV2lkdGggPj0gXCI3NjhcIikge1xyXG4gICAgICAgIGlmICh0aGlzLmRjY2cgPT0gXCJtYWluXCIgfHwgdGhpcy5kY2NnID09IFwiYXJ0aWNsZVwiIHx8IHRoaXMuZGNjZyA9PSBcInN1YlwiKSB7XHJcbiAgICAgICAgICBhZF91bml0X3BhdGggPSBwYXRoLmpvaW4oXHJcbiAgICAgICAgICAgIGFkX3VuaXRfcGF0aCxcclxuICAgICAgICAgICAgdGhpcy5OZXR3b3JrTnVtYmVyLFxyXG4gICAgICAgICAgICB0aGlzLmRjU2l0ZSArIFwiLlwiICsgYXVcclxuICAgICAgICAgICk7XHJcbiAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XHJcbiAgICAgICAgICAgIHRlbXAgPSBkY1BhdGNoQXJyYXlbaV0uaW5kZXhPZihcIi5cIik7XHJcbiAgICAgICAgICAgIGFkX3VuaXRfcGF0aCA9IHBhdGguam9pbihcclxuICAgICAgICAgICAgICBhZF91bml0X3BhdGgsXHJcbiAgICAgICAgICAgICAgdGhpcy5kY1NpdGUgKyBcIi5cIiArIGF1ICsgZGNQYXRjaEFycmF5W2ldLnN1YnN0cmluZyh0ZW1wKVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgcmV0dXJuIGFkX3VuaXRfcGF0aDtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgYWRfdW5pdF9wYXRoID0gcGF0aC5qb2luKFxyXG4gICAgICAgICAgICBhZF91bml0X3BhdGgsXHJcbiAgICAgICAgICAgIHRoaXMuTmV0d29ya051bWJlcixcclxuICAgICAgICAgICAgdGhpcy5kY1NpdGUgKyBcIi5cIiArIGF1ICsgbmV3X2RjUGF0aFxyXG4gICAgICAgICAgKTtcclxuICAgICAgICAgIHJldHVybiBhZF91bml0X3BhdGg7XHJcbiAgICAgICAgfVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGNvbnN0IG1vYmlsZV9wYXRoID0gXCIveW5ldF9tb2JpbGUvXCI7XHJcbiAgICAgICAgaWYgKHRoaXMuZGNTaXRlID09IFwieW5zXCIpIHtcclxuICAgICAgICAgIGlmIChcclxuICAgICAgICAgICAgdGhpcy5kY2NnID09IFwibWFpblwiIHx8XHJcbiAgICAgICAgICAgIHRoaXMuZGNjZyA9PSBcImFydGljbGVcIiB8fFxyXG4gICAgICAgICAgICB0aGlzLmRjY2cgPT0gXCJzdWJcIlxyXG4gICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgIGFkX3VuaXRfcGF0aCA9IHBhdGguam9pbihcclxuICAgICAgICAgICAgICBhZF91bml0X3BhdGgsXHJcbiAgICAgICAgICAgICAgdGhpcy5OZXR3b3JrTnVtYmVyICsgbW9iaWxlX3BhdGggKyB0aGlzLmRjU2l0ZSArIFwiLlwiICsgYXUsXHJcbiAgICAgICAgICAgICAgXCIvXCJcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW47IGkrKykge1xyXG4gICAgICAgICAgICAgIHRlbXAgPSBkY1BhdGNoQXJyYXlbaV0uaW5kZXhPZihcIi5cIik7XHJcbiAgICAgICAgICAgICAgYWRfdW5pdF9wYXRoID1cclxuICAgICAgICAgICAgICAgIGFkX3VuaXRfcGF0aCArXHJcbiAgICAgICAgICAgICAgICB0aGlzLmRjU2l0ZSArXHJcbiAgICAgICAgICAgICAgICBcIi5cIiArXHJcbiAgICAgICAgICAgICAgICBhdSArXHJcbiAgICAgICAgICAgICAgICBkY1BhdGNoQXJyYXlbaV0uc3Vic3RyaW5nKHRlbXApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBhZF91bml0X3BhdGg7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBhZF91bml0X3BhdGggPSBwYXRoLmpvaW4oXHJcbiAgICAgICAgICAgICAgYWRfdW5pdF9wYXRoLFxyXG4gICAgICAgICAgICAgIHRoaXMuTmV0d29ya051bWJlciArXHJcbiAgICAgICAgICAgICAgICBtb2JpbGVfcGF0aCArXHJcbiAgICAgICAgICAgICAgICB0aGlzLmRjU2l0ZSArXHJcbiAgICAgICAgICAgICAgICBcIi5cIiArXHJcbiAgICAgICAgICAgICAgICBhdSArXHJcbiAgICAgICAgICAgICAgICBuZXdfZGNQYXRoXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIHJldHVybiBhZF91bml0X3BhdGg7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmRjU2l0ZSA9PSBcInludlwiKSB7XHJcbiAgICAgICAgICBhZF91bml0X3BhdGggPSBwYXRoLmpvaW4oXHJcbiAgICAgICAgICAgIGFkX3VuaXRfcGF0aCxcclxuICAgICAgICAgICAgdGhpcy5OZXR3b3JrTnVtYmVyICsgbW9iaWxlX3BhdGggKyBcInZlc3RpX21vYmlsZXdlYl9cIiArIGF1XHJcbiAgICAgICAgICApO1xyXG4gICAgICAgICAgTG9nKFwiUEFUSCBWRVNUSTpcIiArIGFkX3VuaXRfcGF0aCk7XHJcbiAgICAgICAgICByZXR1cm4gYWRfdW5pdF9wYXRoO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgXHJcbiAgfSAvL2VuZCBvZiBhZFVuaXRDYWxsWW5zWW52X2Z1bmNcclxuICBhZFVuaXRDYWxsX2Z1bmMoQWRkQWRzKSB7XHJcbiAgICAvL2FkVW5pdENhbGxYbmV0X2Z1bmMgY2FsbCBmcm9tIGRlZmluZVNsb3RzX2Z1bmNcclxuICAgIC8vVGhlIGZ1bmN0aW9uIGNyZWF0ZSBhZFVuaXRQYXRoIGZvciBnb29nbGV0YWcuZGVmaW5lU2xvdFxyXG4gICAgY29uc3Qgc2l0ZSA9ICh3aW5kb3cuZGNQYXRoLmluY2x1ZGVzKFwiUG5haVBsdXNcIikpID8gXCJwcGx1c1wiIDogXCJ5bmV0XCI7XHJcbiAgICBsZXQgYWRfdW5pdF9wYXRoID0gXCIvXCI7XHJcbiAgICBsZXQgcGF0aCA9IHJlcXVpcmUoXCJwYXRoXCIpO1xyXG4gICAgY29uc3QgZGNQYXRjaEFycmF5ID0gdGhpcy5kY1BhdGguc3BsaXQoXCItXCIpO1xyXG4gICAgY29uc3QgbGVuID1cclxuICAgICAgZGNQYXRjaEFycmF5Lmxlbmd0aCA8IHRoaXMubWF4ZGNwYXRoX2xldmVsXHJcbiAgICAgICAgPyBkY1BhdGNoQXJyYXkubGVuZ3RoXHJcbiAgICAgICAgOiB0aGlzLm1heGRjcGF0aF9sZXZlbDtcclxuICAgIGNvbnN0IGF1ID0gQWRkQWRzLnN1YnN0cmluZyg0KTtcclxuICAgIGxldCBtb2JpbGVfcGF0aCA9ICh0aGlzLmdldERldmljZV9mdW5jKCkgPT0gXCJBbmRyb2lkXCIpID8gXCIvbW9iaWxld2ViX2FuZHJvaWQvXCIgOiBcIi9tb2JpbGV3ZWJfaXBob25lL1wiO1xyXG4gICAgaWYgKHdpbmRvdy5pbm5lcldpZHRoIDw9IFwiNzY3XCIgJiYgd2luZG93LmRjUGF0aC5pbmNsdWRlcyhcIlBuYWlQbHVzXCIpKSB7XHJcbiAgICAgIGlmIChhdSA9PSBcImludGVyc3RpdGlhbC5pbm5lclwiICYmIHdpbmRvdy5kY1BhdGggPT0gJzExMjExLlBuYWlQbHVzLTEuSG9tZScgJiYgKCh3aW5kb3cucGVyZm9ybWFuY2UgJiYgd2luZG93LnBlcmZvcm1hbmNlLm5hdmlnYXRpb24udHlwZSA9PSB3aW5kb3cucGVyZm9ybWFuY2UubmF2aWdhdGlvbi5UWVBFX0JBQ0tfRk9SV0FSRCkgfHwgbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ0JBQ0tfSE9NRV9DTElDS0VEJykpKSB7IFxyXG4gICAgICAgIGFkX3VuaXRfcGF0aCA9IHBhdGguam9pbihhZF91bml0X3BhdGgsIHRoaXMuTmV0d29ya051bWJlciwgc2l0ZSArIG1vYmlsZV9wYXRoICsgXCJpbnRlcnN0aXRpYWwuYmFja2hvbWUvY2VudHJhbFwiKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBhZF91bml0X3BhdGggPSBwYXRoLmpvaW4oYWRfdW5pdF9wYXRoLCB0aGlzLk5ldHdvcmtOdW1iZXIsIHNpdGUgKyBtb2JpbGVfcGF0aCArIGF1ICsgXCIvXCIgKyBBZHVuaXREY1BhdGhDbGFzcy5nZXQodGhpcy5kY1BhdGgpKTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gYWRfdW5pdF9wYXRoO1xyXG4gICAgfSBlbHNlIGlmICh0aGlzLm5ld01lZGlhID09ICdUcnVlJykgeyAgICAgIFxyXG4gICAgICAgIGlmICh3aW5kb3cuaW5uZXJXaWR0aCA+PSBcIjc2N1wiKSB7XHJcbiAgICAgICAgICBpZiAodGhpcy5kY2NnID09IFwiaG9tZVwiIHx8IHdpbmRvdy5kY1BhdGggPT0gXCIyNzc1LktuZXNzZXQtMzI0NzIueXV2YWwxMjgwXCIpIHtcclxuICAgICAgICAgICAgYWRfdW5pdF9wYXRoID0gcGF0aC5qb2luKGFkX3VuaXRfcGF0aCwgdGhpcy5OZXR3b3JrTnVtYmVyLCBzaXRlICsgdGhpcy5wbGF0Zm9ybV9wYXRoICsgYXUgKyBcIi9jZW50cmFsXCIpO1xyXG4gICAgICAgICAgICByZXR1cm4gYWRfdW5pdF9wYXRoO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKHdpbmRvdy5kY1BhdGguaW5jbHVkZXMoXCJ3ZWF0aGVyXCIpIHx8IHdpbmRvdy5kY1BhdGguaW5jbHVkZXMoXCJXZWF0aGVyXCIpKSB7ICBcclxuICAgICAgICAgICAgICBhZF91bml0X3BhdGggPSBwYXRoLmpvaW4oYWRfdW5pdF9wYXRoLCB0aGlzLk5ldHdvcmtOdW1iZXIsIHNpdGUgKyB0aGlzLnBsYXRmb3JtX3BhdGggKyBhdSArIFwiL3dlYXRoZXJcIik7ICAgICAgIFxyXG4gICAgICAgICAgICB9IGVsc2UgeyAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgaWYgKChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmJsb2dzLWF1dG8tZmVlZC13aWRnZXRcIikgfHwgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5hcnRpY2xlLWJsb2ctY29tcG9uZW50YS13cmFwcGVyXCIpKSAmJiBhdS5pbmNsdWRlcyhcImlucmVhZFwiKSkge1xyXG4gICAgICAgICAgICAgICAgYWRfdW5pdF9wYXRoID0gcGF0aC5qb2luKGFkX3VuaXRfcGF0aCwgdGhpcy5OZXR3b3JrTnVtYmVyLCBzaXRlICsgdGhpcy5wbGF0Zm9ybV9wYXRoICsgYXUgKyBcIi9ibG9nc1wiKTtcclxuICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgYWRfdW5pdF9wYXRoID0gcGF0aC5qb2luKGFkX3VuaXRfcGF0aCwgdGhpcy5OZXR3b3JrTnVtYmVyLCBzaXRlICsgdGhpcy5wbGF0Zm9ybV9wYXRoICsgYXUgKyBcIi9cIiArIEFkdW5pdERjUGF0aENsYXNzLmdldCh0aGlzLmRjUGF0aCkpO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSAgICAgICAgICAgIFxyXG4gICAgICAgICAgICByZXR1cm4gYWRfdW5pdF9wYXRoO1xyXG4gICAgICAgICAgfVxyXG4gICAgICB9IFxyXG4gICAgICBpZiAod2luZG93LmlubmVyV2lkdGggPD0gXCI3NjdcIikge1xyXG4gICAgICAgIGlmICh3aW5kb3cuZGNQYXRoLmluY2x1ZGVzKFwid2VhdGhlclwiKSB8fCB3aW5kb3cuZGNQYXRoLmluY2x1ZGVzKFwiV2VhdGhlclwiKSkgeyAgICAgICAgIFxyXG4gICAgICAgICAgYWRfdW5pdF9wYXRoID0gcGF0aC5qb2luKGFkX3VuaXRfcGF0aCwgdGhpcy5OZXR3b3JrTnVtYmVyLCBzaXRlICsgbW9iaWxlX3BhdGggKyBhdSArIFwiL3dlYXRoZXJcIik7XHJcbiAgICAgICAgICByZXR1cm4gYWRfdW5pdF9wYXRoO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBpZiAod2luZG93LnluZXRfcmVzcG9uc2l2ZV9zaXRlcyAmJiBhdSA9PSBcImludGVyc3RpdGlhbC5pbm5lclwiICYmIHdpbmRvdy5kY1BhdGguaW5jbHVkZXMoXCItMS5Ib21lXCIpICYmIHdpbmRvdy5kY0NHICE9IFwiYXJ0aWNsZVwiICYmICgod2luZG93LnBlcmZvcm1hbmNlICYmIHdpbmRvdy5wZXJmb3JtYW5jZS5uYXZpZ2F0aW9uLnR5cGUgPT0gd2luZG93LnBlcmZvcm1hbmNlLm5hdmlnYXRpb24uVFlQRV9CQUNLX0ZPUldBUkQpIHx8IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdCQUNLX0hPTUVfQ0xJQ0tFRCcpKSkge1xyXG4gICAgICAgICAgICBhZF91bml0X3BhdGggPSBwYXRoLmpvaW4oYWRfdW5pdF9wYXRoLCB0aGlzLk5ldHdvcmtOdW1iZXIsIHNpdGUgKyBtb2JpbGVfcGF0aCArIFwiaW50ZXJzdGl0aWFsLmJhY2tob21lXCIgKyBcIi9cIiArIEFkdW5pdERjUGF0aENsYXNzLmdldCh0aGlzLmRjUGF0aCkpO1xyXG4gICAgICAgICAgfSBlbHNlIGlmICgoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5ibG9ncy1hdXRvLWZlZWQtd2lkZ2V0XCIpIHx8IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYXJ0aWNsZS1ibG9nLWNvbXBvbmVudGEtd3JhcHBlclwiKSkgJiYgYXUuaW5jbHVkZXMoXCJpbnJlYWRcIikpIHsgXHJcbiAgICAgICAgICAgIGFkX3VuaXRfcGF0aCA9IHBhdGguam9pbihhZF91bml0X3BhdGgsIHRoaXMuTmV0d29ya051bWJlciwgc2l0ZSArIG1vYmlsZV9wYXRoICsgYXUgKyBcIi9ibG9nc1wiKTsgIFxyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgYWRfdW5pdF9wYXRoID0gcGF0aC5qb2luKGFkX3VuaXRfcGF0aCwgdGhpcy5OZXR3b3JrTnVtYmVyLCBzaXRlICsgbW9iaWxlX3BhdGggKyBhdSArIFwiL1wiICsgQWR1bml0RGNQYXRoQ2xhc3MuZ2V0KHRoaXMuZGNQYXRoKSk7ICBcclxuICAgICAgICAgIH0gIFxyXG4gICAgICAgICAgcmV0dXJuIGFkX3VuaXRfcGF0aDtcclxuICAgICAgICB9ICAgICAgICBcclxuICAgICAgfSBcclxuICAgICAgXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgLy9UaGUgZnVuY3Rpb24gY3JlYXRlIGFkVW5pdFBhdGggZm9yIGdvb2dsZXRhZy5kZWZpbmVTbG90XHJcbiAgICBjb25zdCBkY1BhdGNoQXJyYXkgPSB0aGlzLmRjUGF0aC5zcGxpdChcIi1cIik7XHJcbiAgICBjb25zdCBsZW4gPSBkY1BhdGNoQXJyYXkubGVuZ3RoIDwgdGhpcy5tYXhkY3BhdGhfbGV2ZWwgPyBkY1BhdGNoQXJyYXkubGVuZ3RoOiB0aGlzLm1heGRjcGF0aF9sZXZlbDtcclxuICAgIGxldCB0ZW1wID0gZGNQYXRjaEFycmF5WzBdLmluZGV4T2YoXCIuXCIpO1xyXG4gICAgY29uc3QgbmV3X2RjUGF0aCA9IGRjUGF0Y2hBcnJheVswXS5zdWJzdHJpbmcodGVtcCk7XHJcbiAgICBpZiAodGhpcy5pbm5lcldpZHRoIDw9IFwiNzY3XCIpIHtcclxuICAgICAgaWYgKHdpbmRvdy5kY1BhdGguaW5jbHVkZXMoXCIzNDU2Lk1hZ2F6aW5lXCIpIHx8ICh3aW5kb3cuZGNQYXRoLmluY2x1ZGVzKFwid2VhdGhlclwiKSB8fCB3aW5kb3cuZGNQYXRoLmluY2x1ZGVzKFwiV2VhdGhlclwiKSkpIHtcclxuICAgICAgICBsZXQgbmV3X3BhdGggPSBcIlwiO1xyXG4gICAgICAgIGNvbnN0IG1vYmlsZV9wYXRoID0gXCIveW5ldF9tb2JpbGUvXCI7XHJcbiAgICAgICAgbmV3X3BhdGggPSBhZF91bml0X3BhdGggKyB0aGlzLk5ldHdvcmtOdW1iZXIgKyBtb2JpbGVfcGF0aCArIGF1O1xyXG4gICAgICAgIHJldHVybiBuZXdfcGF0aDtcclxuICAgICAgfSAgZWxzZSB7XHJcbiAgICAgICAgbGV0IG5ld19wYXRoID0gXCJcIjtcclxuICAgICAgICBsZXQgZGV2aWNlX3BhdGggPSAodGhpcy5nZXREZXZpY2VfZnVuYygpID09IFwiQW5kcm9pZFwiKSA/IFwibW9iaWxld2ViX2FuZHJvaWRcIiA6IFwibW9iaWxld2ViX2lwaG9uZVwiO1xyXG4gICAgICAgIG5ld19wYXRoID0gYWRfdW5pdF9wYXRoICsgdGhpcy5OZXR3b3JrTnVtYmVyICsgXCIvXCIgKyBzaXRlICsgXCIvXCIgKyBkZXZpY2VfcGF0aCArIFwiL1wiICsgYXUgKyBcIi9cIiArIHRoaXMucGFyZW50X2NhdGVnb3J5LnRvTG93ZXJDYXNlKCk7XHJcbiAgICAgICAgcmV0dXJuIG5ld19wYXRoO1xyXG4gICAgICB9ICAgIFxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgaWYgKHRoaXMuZGNjZyA9PSBcIm1haW5cIiB8fCB0aGlzLmRjY2cgPT0gXCJhcnRpY2xlXCIgfHwgdGhpcy5kY2NnID09IFwic3ViXCIpIHtcclxuICAgICAgYWRfdW5pdF9wYXRoID0gcGF0aC5qb2luKFxyXG4gICAgICAgIGFkX3VuaXRfcGF0aCxcclxuICAgICAgICB0aGlzLk5ldHdvcmtOdW1iZXIsXHJcbiAgICAgICAgdGhpcy5kY1NpdGUgKyBcIi5cIiArIGF1XHJcbiAgICAgICk7XHJcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcclxuICAgICAgICB0ZW1wID0gZGNQYXRjaEFycmF5W2ldLmluZGV4T2YoXCIuXCIpO1xyXG4gICAgICAgIGFkX3VuaXRfcGF0aCA9IHBhdGguam9pbihcclxuICAgICAgICAgIGFkX3VuaXRfcGF0aCxcclxuICAgICAgICAgIHRoaXMuZGNTaXRlICsgXCIuXCIgKyBhdSArIGRjUGF0Y2hBcnJheVtpXS5zdWJzdHJpbmcodGVtcClcclxuICAgICAgICApO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBhZF91bml0X3BhdGg7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBhZF91bml0X3BhdGggPSBwYXRoLmpvaW4oXHJcbiAgICAgICAgYWRfdW5pdF9wYXRoLFxyXG4gICAgICAgIHRoaXMuTmV0d29ya051bWJlcixcclxuICAgICAgICB0aGlzLmRjU2l0ZSArIFwiLlwiICsgYXUgKyBuZXdfZGNQYXRoXHJcbiAgICAgICk7XHJcbiAgICAgIHJldHVybiBhZF91bml0X3BhdGg7XHJcbiAgICAgfVxyXG4gICAgfVxyXG4gICB9XHJcbiAgfVxyXG4gIGFkVW5pdENhbGxZbnNfZnVuYyhBZGRBZHMpIHtcclxuICAgIC8vYWRVbml0Q2FsbFhuZXRfZnVuYyBjYWxsIGZyb20gZGVmaW5lU2xvdHNfZnVuY1xyXG4gICAgLy9UaGUgZnVuY3Rpb24gY3JlYXRlIGFkVW5pdFBhdGggZm9yIGdvb2dsZXRhZy5kZWZpbmVTbG90XHJcbiAgICBMb2coXCJhZFVuaXRDYWxsWW5zX2Z1bmNcIik7XHJcbiAgICBsZXQgYWRfdW5pdF9wYXRoID0gXCIvXCI7XHJcbiAgICBsZXQgcGF0aCA9IHJlcXVpcmUoXCJwYXRoXCIpO1xyXG4gICAgY29uc3QgZGNQYXRjaEFycmF5ID0gdGhpcy5kY1BhdGguc3BsaXQoXCItXCIpO1xyXG4gICAgY29uc3QgbGVuID1cclxuICAgICAgZGNQYXRjaEFycmF5Lmxlbmd0aCA8IHRoaXMubWF4ZGNwYXRoX2xldmVsXHJcbiAgICAgICAgPyBkY1BhdGNoQXJyYXkubGVuZ3RoXHJcbiAgICAgICAgOiB0aGlzLm1heGRjcGF0aF9sZXZlbDtcclxuICAgIGNvbnN0IGF1ID0gQWRkQWRzLnN1YnN0cmluZyg0KTtcclxuICAgIGNvbnN0IG5ldHdvcmtfbnVtID0gKHdpbmRvdy5kY1NpdGUgPT0gXCJ5bnNcIiAmJiB3aW5kb3cuYWRzX2ptZWRpYSA9PSB0cnVlKSA/IFwiMjIyMTUyOTI4MzFcIiA6IFwiNjg3MFwiO1xyXG5cclxuICAgIGlmICh0aGlzLm5ld01lZGlhID09IFwiVHJ1ZVwiKSB7XHJcbiAgICAgICBjb25zdCBzaXRlID0gXCJ5bmV0bmV3c1wiO1xyXG4gICAgICAgYWRfdW5pdF9wYXRoID0gcGF0aC5qb2luKGFkX3VuaXRfcGF0aCwgbmV0d29ya19udW0sIHNpdGUgKyB0aGlzLnBsYXRmb3JtX3BhdGggKyBhdSArIFwiL1wiICsgQWR1bml0RGNQYXRoQ2xhc3MuZ2V0KHRoaXMuZGNQYXRoKSk7XHJcbiAgICAgICByZXR1cm4gYWRfdW5pdF9wYXRoO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY29uc3QgZGNQYXRjaEFycmF5ID0gdGhpcy5kY1BhdGguc3BsaXQoXCItXCIpO1xyXG4gICAgICBjb25zdCBsZW4gPVxyXG4gICAgICAgIGRjUGF0Y2hBcnJheS5sZW5ndGggPCB0aGlzLm1heGRjcGF0aF9sZXZlbFxyXG4gICAgICAgICAgPyBkY1BhdGNoQXJyYXkubGVuZ3RoXHJcbiAgICAgICAgICA6IHRoaXMubWF4ZGNwYXRoX2xldmVsO1xyXG4gICAgICBsZXQgdGVtcCA9IGRjUGF0Y2hBcnJheVswXS5pbmRleE9mKFwiLlwiKTtcclxuICAgICAgY29uc3QgbmV3X2RjUGF0aCA9IGRjUGF0Y2hBcnJheVswXS5zdWJzdHJpbmcodGVtcCk7XHJcbiAgICAgIGlmICh0aGlzLmlubmVyV2lkdGggPj0gXCI3NjhcIikge1xyXG4gICAgICAgIGlmICh0aGlzLmRjY2cgPT0gXCJtYWluXCIgfHwgdGhpcy5kY2NnID09IFwiYXJ0aWNsZVwiIHx8IHRoaXMuZGNjZyA9PSBcInN1YlwiKSB7XHJcbiAgICAgICAgICBhZF91bml0X3BhdGggPSBwYXRoLmpvaW4oXHJcbiAgICAgICAgICAgIGFkX3VuaXRfcGF0aCxcclxuICAgICAgICAgICAgbmV0d29ya19udW0sXHJcbiAgICAgICAgICAgIHRoaXMuZGNTaXRlICsgXCIuXCIgKyBhdVxyXG4gICAgICAgICAgKTtcclxuICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcclxuICAgICAgICAgICAgdGVtcCA9IGRjUGF0Y2hBcnJheVtpXS5pbmRleE9mKFwiLlwiKTtcclxuICAgICAgICAgICAgYWRfdW5pdF9wYXRoID0gcGF0aC5qb2luKFxyXG4gICAgICAgICAgICAgIGFkX3VuaXRfcGF0aCxcclxuICAgICAgICAgICAgICB0aGlzLmRjU2l0ZSArIFwiLlwiICsgYXUgKyBkY1BhdGNoQXJyYXlbaV0uc3Vic3RyaW5nKHRlbXApXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICByZXR1cm4gYWRfdW5pdF9wYXRoO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBhZF91bml0X3BhdGggPSBwYXRoLmpvaW4oXHJcbiAgICAgICAgICAgIGFkX3VuaXRfcGF0aCxcclxuICAgICAgICAgICAgdGhpcy5OZXR3b3JrTnVtYmVyLFxyXG4gICAgICAgICAgICB0aGlzLmRjU2l0ZSArIFwiLlwiICsgYXUgKyBuZXdfZGNQYXRoXHJcbiAgICAgICAgICApO1xyXG4gICAgICAgICAgcmV0dXJuIGFkX3VuaXRfcGF0aDtcclxuICAgICAgICB9XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgY29uc3QgbW9iaWxlX3BhdGggPSBcIi95bmV0X21vYmlsZS9cIjtcclxuICAgICAgICBpZiAodGhpcy5kY1NpdGUgPT0gXCJ5bnNcIikge1xyXG4gICAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICB0aGlzLmRjY2cgPT0gXCJtYWluXCIgfHxcclxuICAgICAgICAgICAgdGhpcy5kY2NnID09IFwiYXJ0aWNsZVwiIHx8XHJcbiAgICAgICAgICAgIHRoaXMuZGNjZyA9PSBcInN1YlwiXHJcbiAgICAgICAgICApIHtcclxuICAgICAgICAgICAgYWRfdW5pdF9wYXRoID0gcGF0aC5qb2luKFxyXG4gICAgICAgICAgICAgIGFkX3VuaXRfcGF0aCxcclxuICAgICAgICAgICAgICB0aGlzLk5ldHdvcmtOdW1iZXIgKyBtb2JpbGVfcGF0aCArIHRoaXMuZGNTaXRlICsgXCIuXCIgKyBhdSxcclxuICAgICAgICAgICAgICBcIi9cIlxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgdGVtcCA9IGRjUGF0Y2hBcnJheVtpXS5pbmRleE9mKFwiLlwiKTtcclxuICAgICAgICAgICAgICBhZF91bml0X3BhdGggPVxyXG4gICAgICAgICAgICAgICAgYWRfdW5pdF9wYXRoICtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGNTaXRlICtcclxuICAgICAgICAgICAgICAgIFwiLlwiICtcclxuICAgICAgICAgICAgICAgIGF1ICtcclxuICAgICAgICAgICAgICAgIGRjUGF0Y2hBcnJheVtpXS5zdWJzdHJpbmcodGVtcCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGFkX3VuaXRfcGF0aDtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGFkX3VuaXRfcGF0aCA9IHBhdGguam9pbihcclxuICAgICAgICAgICAgICBhZF91bml0X3BhdGgsXHJcbiAgICAgICAgICAgICAgdGhpcy5OZXR3b3JrTnVtYmVyICtcclxuICAgICAgICAgICAgICAgIG1vYmlsZV9wYXRoICtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGNTaXRlICtcclxuICAgICAgICAgICAgICAgIFwiLlwiICtcclxuICAgICAgICAgICAgICAgIGF1ICtcclxuICAgICAgICAgICAgICAgIG5ld19kY1BhdGhcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgcmV0dXJuIGFkX3VuaXRfcGF0aDtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuZGNTaXRlID09IFwieW52XCIpIHtcclxuICAgICAgICAgIGFkX3VuaXRfcGF0aCA9IHBhdGguam9pbihcclxuICAgICAgICAgICAgYWRfdW5pdF9wYXRoLFxyXG4gICAgICAgICAgICB0aGlzLk5ldHdvcmtOdW1iZXIgKyBtb2JpbGVfcGF0aCArIFwidmVzdGlfbW9iaWxld2ViX1wiICsgYXVcclxuICAgICAgICAgICk7XHJcbiAgICAgICAgICByZXR1cm4gYWRfdW5pdF9wYXRoO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSAgICBcclxuICB9IC8vZW5kIGFkVW5pdENhbGxZbnNfZnVuY1xyXG4gIGFkVW5pdENhbGxZbmVzX2Z1bmMoQWRkQWRzKSB7XHJcbiAgICAvL2FkVW5pdENhbGxZbmVzX2Z1bmMgY2FsbCBmcm9tIGRlZmluZVNsb3RzX2Z1bmNcclxuICAgIC8vVGhlIGZ1bmN0aW9uIGNyZWF0ZSBhZFVuaXRQYXRoIGZvciBnb29nbGV0YWcuZGVmaW5lU2xvdFxyXG4gICAgTG9nKFwiYWRVbml0Q2FsbFluZXNfZnVuY1wiKTtcclxuICAgIGxldCBzZXBhcmF0b3IgPSBcIi9cIjtcclxuICAgIGxldCBuZXdfcGF0aCA9IFwiXCI7XHJcbiAgICBsZXQgcGF0aCA9IFwiL2VzcGFub2wvRGVza3RvcC9cIjtcclxuICAgIGNvbnN0IGF1ID0gQWRkQWRzLnN1YnN0cmluZyg0KTtcclxuICAgIGlmICh0aGlzLmlubmVyV2lkdGggPj0gXCI3NjhcIikge1xyXG4gICAgICBuZXdfcGF0aCA9IHNlcGFyYXRvciArIHRoaXMuTmV0d29ya051bWJlciArIHBhdGggKyBhdTtcclxuICAgICAgcmV0dXJuIG5ld19wYXRoOyAgICAgXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjb25zdCBtb2JpbGVfcGF0aCA9IFwiL2VzcGFub2wvbW9iaWxlX3dlYi9cIjtcclxuICAgICAgbmV3X3BhdGggPSBzZXBhcmF0b3IgKyB0aGlzLk5ldHdvcmtOdW1iZXIgKyBtb2JpbGVfcGF0aCArIGF1O1xyXG4gICAgICByZXR1cm4gbmV3X3BhdGg7XHJcbiAgICB9XHJcbiAgfSAvL2VuZCBhZFVuaXRDYWxsWW5lc19mdW5jXHJcbiAgYWRVbml0Q2FsbE15bmV0X2Z1bmMoQWRkQWRzKSB7XHJcbiAgICAvL2FkVW5pdENhbGxNeW5ldF9mdW5jIGNhbGwgZnJvbSBkZWZpbmVTbG90c19mdW5jXHJcbiAgICAvL1RoZSBmdW5jdGlvbiBjcmVhdGUgYWRVbml0UGF0aCBmb3IgZ29vZ2xldGFnLmRlZmluZVNsb3RcclxuICAgIExvZyhcImFkVW5pdENhbGxNeW5ldF9mdW5jXCIpO1xyXG4gICAgbGV0IG5ld19wYXRoID0gXCJcIjtcclxuICAgIGxldCBwYXRoID0gXCIvbXluZXQvXCI7XHJcbiAgICBjb25zdCBhdSA9IEFkZEFkcy5zdWJzdHJpbmcoNCk7XHJcbiAgICBuZXdfcGF0aCA9IFwiL1wiICsgdGhpcy5OZXR3b3JrTnVtYmVyICsgcGF0aCArIGF1O1xyXG4gICAgcmV0dXJuIG5ld19wYXRoOyAgICAgXHJcbiAgfSAvL2VuZCBhZFVuaXRDYWxsTXluZXRfZnVuY1xyXG4gIGFkVW5pdENhbGxYbmV0X2Z1bmMoQWRkQWRzKSB7XHJcbiAgICBMb2coJ2FkVW5pdENhbGxYbmV0X2Z1bmMnKTtcclxuICAgIC8vYWRVbml0Q2FsbFhuZXRfZnVuYyBjYWxsIGZyb20gZGVmaW5lU2xvdHNfZnVuY1xyXG4gICAgLy9UaGUgZnVuY3Rpb24gY3JlYXRlIGFkVW5pdFBhdGggZm9yIGdvb2dsZXRhZy5kZWZpbmVTbG90XHJcbiAgICBsZXQgYWRfdW5pdF9wYXRoID0gXCIvXCI7XHJcbiAgICBsZXQgcGF0aCA9IHJlcXVpcmUoXCJwYXRoXCIpO1xyXG4gICAgY29uc3QgZGNQYXRjaEFycmF5ID0gd2luZG93LmRjUGF0aC5zcGxpdChcIi1cIik7XHJcbiAgICBjb25zdCBsZW4gPVxyXG4gICAgICBkY1BhdGNoQXJyYXkubGVuZ3RoIDwgdGhpcy5tYXhkY3BhdGhfbGV2ZWxcclxuICAgICAgICA/IGRjUGF0Y2hBcnJheS5sZW5ndGhcclxuICAgICAgICA6IHRoaXMubWF4ZGNwYXRoX2xldmVsO1xyXG4gICAgY29uc3QgYXUgPSBBZGRBZHMuc3Vic3RyaW5nKDQpO1xyXG4gICAgbGV0IHJlZiA9IGRvY3VtZW50LnJlZmVycmVyO1xyXG4gICAgIFxyXG4gICAgaWYgKHdpbmRvdy5uZXdNZWRpYSA9PSBcIlRydWVcIikge1xyXG4gICAgY29uc3QgbWFpbl9jYXRlZ29yeSA9ICh0aGlzLmRjUGF0aCA9PSBcIjEwLlhuZXRcIiB8fCB0aGlzLnBhcmVudF9jYXRlZ29yeSA9PSBcIlhuZXRcIikgPyBcIi9jZW50cmFsXCIgOiAoXCIvXCIgKyB0aGlzLnBhcmVudF9jYXRlZ29yeS50b0xvd2VyQ2FzZSgpKTtcclxuICAgIGNvbnN0IHNpdGUgPSBcInhuZXRcIjtcclxuICAgIGxldCBkY1BhdGNoQXJyYXkgPSB0aGlzLmRjUGF0aC5zcGxpdChcIi1cIik7XHJcbiAgICBsZXQgc3ViX3hudCA9IChkY1BhdGNoQXJyYXlbMV0gIT0gdW5kZWZpbmVkKSA/IDEgOiAwO1xyXG4gICAgY29uc3QgbW9iaWxlX3BhdGggPSBcIi9tb2JpbGV3ZWJcIjtcclxuICAgIGlmICh3aW5kb3cuaW5uZXJXaWR0aCA+PSA3NjcpIHtcclxuICAgICAgYWRfdW5pdF9wYXRoID0gcGF0aC5qb2luKGFkX3VuaXRfcGF0aCwgdGhpcy5OZXR3b3JrTnVtYmVyLCBzaXRlICsgdGhpcy5wbGF0Zm9ybV9wYXRoICsgYXUgKyBtYWluX2NhdGVnb3J5KTtcclxuICAgICAgcmV0dXJuIGFkX3VuaXRfcGF0aDtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGlmICh0aGlzLmRjY2cgPT0gJ3N1YicgJiYgc3ViX3hudCA9PSAwKSB7IFxyXG4gICAgICAgIGlmIChyZWYubWF0Y2goL15odHRwcz86XFwvXFwvKFteXFwvXStcXC4pP3luZXRcXC5jb1xcLmlsKFxcL3wkKS9pKSAmJiBhdT09XCJpbnRlcnN0aXRpYWwuMVwiKSB7XHJcbiAgICAgICAgbGV0IHRoaXNfZGV2aWNlID0gdGhpcy5nZXREZXZpY2VfZnVuYygpO1xyXG4gICAgICAgICAgaWYgKHRoaXNfZGV2aWNlID09IFwiaVBob25lXCIgfHwgdGhpc19kZXZpY2UgPT0gXCJpUGFkXCIgfHx0aGlzX2RldmljZSA9PSBcImlQb2RcIikge1xyXG4gICAgICAgICAgICAgIGlmKHJlZi5tYXRjaCgvXmh0dHBzPzpcXC9cXC8oW15cXC9dK1xcLik/bVxcLnluZXRcXC5jb1xcLmlsKFxcL3wkKS9pKSB8fCByZWYubWF0Y2goL15odHRwcz86XFwvXFwvKFteXFwvXStcXC4pP2NlbC10ZXN0MlxcLnluZXRcXC5jb1xcLmlsKFxcL3wkKS9pKSkge1xyXG4gICAgICAgICAgICAgICAgICAvL9eQ16rXqCDXnteV16rXkNedXHJcbiAgICAgICAgICAgICAgICAgIGFkX3VuaXRfcGF0aCA9IFwiLzY4NzAveG5ldC9hbmRyb2lkL2ludGVyc3RpdGlhbFwiXHJcbiAgICAgICAgICAgICAgICAgIHJldHVybiBhZF91bml0X3BhdGhcclxuICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy/XkNek15zXmden16bXmdeV16pcclxuICAgICAgICAgICAgICAgICAgYWRfdW5pdF9wYXRoID0gXCIvNjg3MC94bmV0L2FuZHJvaWQvaW50ZXJzdGl0aWFsX2lubmVyXCJcclxuICAgICAgICAgICAgICAgICAgcmV0dXJuIGFkX3VuaXRfcGF0aFxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0gZWxzZSBpZiAodGhpc19kZXZpY2UgPT0gXCJBbmRyb2lkXCIpIHtcclxuICAgICAgICAgICAgICBpZiAocmVmLm1hdGNoKC9eaHR0cHM/OlxcL1xcLyhbXlxcL10rXFwuKT9tXFwueW5ldFxcLmNvXFwuaWwoXFwvfCQpL2kpIHx8IHJlZi5tYXRjaCgvXmh0dHBzPzpcXC9cXC8oW15cXC9dK1xcLik/Y2VsLXRlc3QyXFwueW5ldFxcLmNvXFwuaWwoXFwvfCQpL2kpKSB7XHJcbiAgICAgICAgICAgICAgICAgIC8v15DXqteoINee15XXqteQ151cclxuICAgICAgICAgICAgICAgICAgYWRfdW5pdF9wYXRoID0gXCIvNjg3MC94bmV0L2lwaG9uZS9pbnRlcnN0aXRpYWxcIlxyXG4gICAgICAgICAgICAgICAgICByZXR1cm4gYWRfdW5pdF9wYXRoXHJcbiAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8v15DXpNec15nXp9em15nXldeqXHJcbiAgICAgICAgICAgICAgICAgIGFkX3VuaXRfcGF0aCA9IFwiLzY4NzAveG5ldC9pcGhvbmUvaW50ZXJzdGl0aWFsX2lubmVyXCJcclxuICAgICAgICAgICAgICAgICAgcmV0dXJuIGFkX3VuaXRfcGF0aFxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0gXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGFkX3VuaXRfcGF0aCA9IHBhdGguam9pbihhZF91bml0X3BhdGgsIHRoaXMuTmV0d29ya051bWJlciwgc2l0ZSArIHRoaXMucGxhdGZvcm1fcGF0aCArIGF1ICsgbWFpbl9jYXRlZ29yeSk7XHJcbiAgICAgICAgICByZXR1cm4gYWRfdW5pdF9wYXRoO1xyXG4gICAgICAgIH1cclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBhZF91bml0X3BhdGggPSBwYXRoLmpvaW4oYWRfdW5pdF9wYXRoLCB0aGlzLk5ldHdvcmtOdW1iZXIsIHNpdGUgKyB0aGlzLnBsYXRmb3JtX3BhdGggKyBhdSArIG1haW5fY2F0ZWdvcnkpO1xyXG4gICAgICAgIHJldHVybiBhZF91bml0X3BhdGg7XHJcbiAgICAgIH0gICAgICAgICAgICBcclxuICAgICAgcmV0dXJuIGFkX3VuaXRfcGF0aDtcclxuICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAvL2FkVW5pdENhbGxYbmV0X2Z1bmMgY2FsbCBmcm9tIGRlZmluZVNsb3RzX2Z1bmNcclxuICAgIC8vVGhlIGZ1bmN0aW9uIGNyZWF0ZSBhZFVuaXRQYXRoIGZvciBnb29nbGV0YWcuZGVmaW5lU2xvdFxyXG4gICAgY29uc3QgZGNQYXRjaEFycmF5ID0gd2luZG93LmRjUGF0aC5zcGxpdChcIi1cIik7XHJcbiAgICBjb25zdCBsZW4gPVxyXG4gICAgICBkY1BhdGNoQXJyYXkubGVuZ3RoIDwgdGhpcy5tYXhkY3BhdGhfbGV2ZWxcclxuICAgICAgICA/IGRjUGF0Y2hBcnJheS5sZW5ndGhcclxuICAgICAgICA6IHRoaXMubWF4ZGNwYXRoX2xldmVsO1xyXG4gICAgbGV0IHRlbXAgPSBkY1BhdGNoQXJyYXlbMF0uaW5kZXhPZihcIi5cIik7XHJcbiAgICB0aGlzLm5ld19kY1BhdGggPSBkY1BhdGNoQXJyYXlbMF0uc3Vic3RyaW5nKHRlbXApO1xyXG4gICAgY29uc3Qgc3ViX3hudCA9IGRjUGF0Y2hBcnJheVsxXSAhPSB1bmRlZmluZWQgPyAxIDogMDtcclxuICAgIGlmICh0aGlzLmlubmVyV2lkdGggPj0gXCI3NjdcIikge1xyXG4gICAgICBpZiAoXHJcbiAgICAgICAgdGhpcy5kY2NnID09IFwibWFpblwiIHx8XHJcbiAgICAgICAgdGhpcy5kY2NnID09IFwiYXJ0aWNsZVwiIHx8XHJcbiAgICAgICAgKHRoaXMuZGNjZyA9PSBcInN1YlwiICYmIHN1Yl94bnQgPT0gMSlcclxuICAgICAgKSB7XHJcbiAgICAgICAgYWRfdW5pdF9wYXRoID0gcGF0aC5qb2luKFxyXG4gICAgICAgICAgYWRfdW5pdF9wYXRoLFxyXG4gICAgICAgICAgdGhpcy5OZXR3b3JrTnVtYmVyLFxyXG4gICAgICAgICAgdGhpcy5kY1NpdGUgKyBcIi5cIiArIGF1XHJcbiAgICAgICAgKTtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XHJcbiAgICAgICAgICB0ZW1wID0gZGNQYXRjaEFycmF5W2ldLmluZGV4T2YoXCIuXCIpO1xyXG4gICAgICAgICAgYWRfdW5pdF9wYXRoID0gcGF0aC5qb2luKFxyXG4gICAgICAgICAgICBhZF91bml0X3BhdGgsXHJcbiAgICAgICAgICAgIHRoaXMuZGNTaXRlICsgXCIuXCIgKyBhdSArIGRjUGF0Y2hBcnJheVtpXS5zdWJzdHJpbmcodGVtcClcclxuICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBhZF91bml0X3BhdGg7XHJcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5kY2NnID09IFwic3ViXCIgJiYgc3ViX3hudCA9PSAwKSB7XHJcbiAgICAgICAgYWRfdW5pdF9wYXRoID0gcGF0aC5qb2luKFxyXG4gICAgICAgICAgYWRfdW5pdF9wYXRoLFxyXG4gICAgICAgICAgdGhpcy5OZXR3b3JrTnVtYmVyLFxyXG4gICAgICAgICAgdGhpcy5kY1NpdGUgKyBcIi5cIiArIGF1LFxyXG4gICAgICAgICAgdGhpcy5kY1NpdGUgKyBcIi5cIiArIGF1ICsgXCIuQ2VudHJhbFwiXHJcbiAgICAgICAgKTtcclxuICAgICAgICByZXR1cm4gYWRfdW5pdF9wYXRoO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGFkX3VuaXRfcGF0aCA9IHBhdGguam9pbihcclxuICAgICAgICAgIGFkX3VuaXRfcGF0aCxcclxuICAgICAgICAgIHRoaXMuTmV0d29ya051bWJlcixcclxuICAgICAgICAgIHRoaXMuZGNTaXRlICsgXCIuXCIgKyBhdSArIHRoaXMubmV3X2RjUGF0aFxyXG4gICAgICAgICk7XHJcbiAgICAgICAgcmV0dXJuIGFkX3VuaXRfcGF0aDtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgLy9hZF91bml0X3BhdGggPSBwYXRoLmpvaW4oYWRfdW5pdF9wYXRoLHRoaXMuTmV0d29ya051bWJlcilcclxuICAgICAgY29uc3QgbW9iaWxlX3BhdGggPSBcIi95bmV0X21vYmlsZVwiO1xyXG4gICAgICBpZiAodGhpcy5kY2NnID09IFwibWFpblwiIHx8IHRoaXMuZGNjZyA9PSBcImFydGljbGVcIiB8fCAodGhpcy5kY2NnID09IFwic3ViXCIgJiYgc3ViX3hudCA9PSAxKSkge1xyXG4gICAgICAgIGlmIChkY1BhdGNoQXJyYXlbMV0gIT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICBsZXQgc3ViX3BhdGggPSBkY1BhdGNoQXJyYXlbMV0uc3BsaXQoXCIuXCIpO1xyXG4gICAgICAgICAgYWRfdW5pdF9wYXRoID0gcGF0aC5qb2luKFxyXG4gICAgICAgICAgICBhZF91bml0X3BhdGgsXHJcbiAgICAgICAgICAgIHRoaXMuTmV0d29ya051bWJlciArIG1vYmlsZV9wYXRoLFxyXG4gICAgICAgICAgICB0aGlzLmRjU2l0ZSArIFwiLlwiICsgYXUsXHJcbiAgICAgICAgICAgIHRoaXMuZGNTaXRlICsgXCIuXCIgKyBhdSArIFwiLlwiICsgc3ViX3BhdGhbMV1cclxuICAgICAgICAgICk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChkY1BhdGNoQXJyYXlbMV0gPT0gdW5kZWZpbmVkICYmIHRoaXMuZGNQYXRoID09IFwiMTAuWG5ldFwiKSB7XHJcbiAgICAgICAgICBhZF91bml0X3BhdGggPSBwYXRoLmpvaW4oXHJcbiAgICAgICAgICAgIGFkX3VuaXRfcGF0aCxcclxuICAgICAgICAgICAgdGhpcy5OZXR3b3JrTnVtYmVyICsgbW9iaWxlX3BhdGgsXHJcbiAgICAgICAgICAgIHRoaXMuZGNTaXRlICsgXCIuXCIgKyBhdSxcclxuICAgICAgICAgICAgdGhpcy5kY1NpdGUgKyBcIi5cIiArIGF1ICsgXCIuQ2VudHJhbFwiXHJcbiAgICAgICAgICApO1xyXG4gICAgICAgICAgTG9nKFwiQUQgVU5JVCBCIDogXCIgKyBhZF91bml0X3BhdGgpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBhZF91bml0X3BhdGggPSBwYXRoLmpvaW4oXHJcbiAgICAgICAgICAgIGFkX3VuaXRfcGF0aCxcclxuICAgICAgICAgICAgdGhpcy5OZXR3b3JrTnVtYmVyICsgbW9iaWxlX3BhdGgsXHJcbiAgICAgICAgICAgIHRoaXMuZGNTaXRlICsgXCIuXCIgKyBhdSxcclxuICAgICAgICAgICAgdGhpcy5kY1NpdGUgKyBcIi5cIiArIGF1ICsgdGhpcy5uZXdfZGNQYXRoXHJcbiAgICAgICAgICApO1xyXG4gICAgICAgICAgTG9nKFwiQUQgVU5JVCBDIDogXCIgKyBhZF91bml0X3BhdGgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBMb2coXCJBRCBVTklUIDAgOiBcIiArIGFkX3VuaXRfcGF0aCk7XHJcbiAgICAgICAgcmV0dXJuIGFkX3VuaXRfcGF0aDtcclxuICAgICAgfSBlbHNlIGlmICh0aGlzLmRjY2cgPT0gXCJzdWJcIiAmJiBzdWJfeG50ID09IDApIHtcclxuICAgICAgICBpZiAocmVmLm1hdGNoKC9eaHR0cHM/OlxcL1xcLyhbXlxcL10rXFwuKT95bmV0XFwuY29cXC5pbChcXC98JCkvaSkgJiYgYXU9PVwidHJhbnNpdGlhbC4xXCIpIHtcclxuICAgICAgICAgIGxldCB0aGlzX2RldmljZSA9IHRoaXMuZ2V0RGV2aWNlX2Z1bmMoKTtcclxuICAgICAgICAgICAgaWYgKHRoaXNfZGV2aWNlID09IFwiaVBob25lXCIgfHwgdGhpc19kZXZpY2UgPT0gXCJpUGFkXCIgfHx0aGlzX2RldmljZSA9PSBcImlQb2RcIikge1xyXG4gICAgICAgICAgICAgICAgaWYocmVmLm1hdGNoKC9eaHR0cHM/OlxcL1xcLyhbXlxcL10rXFwuKT9tXFwueW5ldFxcLmNvXFwuaWwoXFwvfCQpL2kpIHx8IHJlZi5tYXRjaCgvXmh0dHBzPzpcXC9cXC8oW15cXC9dK1xcLik/Y2VsLXRlc3QyXFwueW5ldFxcLmNvXFwuaWwoXFwvfCQpL2kpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy/XkNeq16gg157Xldeq15DXnVxyXG4gICAgICAgICAgICAgICAgICAgIGFkX3VuaXRfcGF0aCA9IFwiLzY4NzAveW5ldF9tb2JpbGUveW5ldF9tb2JpbGV3ZWJfdHJhbnNpdGlvbnMveW5ldF9tb2JpbGV3ZWJfdHJhbnNpdGlvbnNfZ2VuZXJhbC95bmV0X21vYmlsZXdlYl90cmFuc2l0aW9uc19nZW5lcmFsX2lwaG9uZV9tYWluX2lwXCJcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYWRfdW5pdF9wYXRoXHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAvL9eQ16TXnNeZ16fXpteZ15XXqlxyXG4gICAgICAgICAgICAgICAgICAgIGFkX3VuaXRfcGF0aCA9IFwiLzY4NzAveW5ldF9tb2JpbGUveW5ldF9pcGhvbmVfdHJhbnNpdGlvbnMveW5ldF9pcGhvbmVfdHJhbnNpdGlvbnNfY2hhbm5lbHNcIlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBhZF91bml0X3BhdGhcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzX2RldmljZSA9PSBcIkFuZHJvaWRcIikge1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlZi5tYXRjaCgvXmh0dHBzPzpcXC9cXC8oW15cXC9dK1xcLik/bVxcLnluZXRcXC5jb1xcLmlsKFxcL3wkKS9pKSB8fCByZWYubWF0Y2goL15odHRwcz86XFwvXFwvKFteXFwvXStcXC4pP2NlbC10ZXN0MlxcLnluZXRcXC5jb1xcLmlsKFxcL3wkKS9pKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8v15DXqteoINee15XXqteQ151cclxuICAgICAgICAgICAgICAgICAgICBhZF91bml0X3BhdGggPSBcIi82ODcwL3luZXRfbW9iaWxlL3luZXRfbW9iaWxld2ViX3RyYW5zaXRpb25zL3luZXRfbW9iaWxld2ViX3RyYW5zaXRpb25zX2dlbmVyYWwveW5ldF9tb2JpbGV3ZWJfdHJhbnNpdGlvbnNfZ2VuZXJhbF9hbmRyb2lkX21haW5faXBcIlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBhZF91bml0X3BhdGhcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgIC8v15DXpNec15nXp9em15nXldeqXHJcbiAgICAgICAgICAgICAgICAgICAgYWRfdW5pdF9wYXRoID0gXCIvNjg3MC95bmV0X21vYmlsZS95bmV0X2FuZHJvaWRfdHJhbnNpdGlvbnMveW5ldF9hbmRyb2lkX3RyYW5zaXRpb25zX2NoYW5uZWxzXCJcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYWRfdW5pdF9wYXRoXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gXHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBhZF91bml0X3BhdGggPSBwYXRoLmpvaW4oYWRfdW5pdF9wYXRoLCB0aGlzLk5ldHdvcmtOdW1iZXIgKyBtb2JpbGVfcGF0aCwgdGhpcy5kY1NpdGUgKyBcIi5cIiArIGF1LCB0aGlzLmRjU2l0ZSArIFwiLlwiICsgYXUgKyBcIi5DZW50cmFsXCIpO1xyXG4gICAgICAgICAgICBMb2coXCJBRCBVTklUIDEgOiBcIiArIGFkX3VuaXRfcGF0aCk7XHJcbiAgICAgICAgICAgIHJldHVybiBhZF91bml0X3BhdGg7XHJcbiAgICAgICAgICB9ICAgICAgICBcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBhZF91bml0X3BhdGggPSBwYXRoLmpvaW4oXHJcbiAgICAgICAgICBhZF91bml0X3BhdGgsXHJcbiAgICAgICAgICB0aGlzLk5ldHdvcmtOdW1iZXIgKyBtb2JpbGVfcGF0aCxcclxuICAgICAgICAgIHRoaXMuZGNTaXRlICsgXCIuXCIgKyBhdSArIHRoaXMubmV3X2RjUGF0aFxyXG4gICAgICAgICk7XHJcbiAgICAgICAgTG9nKFwiQUQgVU5JVCAyIDogXCIgKyBhZF91bml0X3BhdGgpO1xyXG4gICAgICAgIHJldHVybiBhZF91bml0X3BhdGg7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIH1cclxuICAgIFxyXG4gIH0gLy9lbmQgYWRVbml0Q2FsbFhuZXRfZnVuY1xyXG4gIC8vZm9yIHhuZXRcclxuICBkZXN0cm95TWFhdmFyb25fZnVuYygpIHtcclxuICAgIExvZyhcImRlc3Ryb3lNYWF2YXJvbl9mdW5jXCIpO1xyXG4gICAgY29uc3QgTUFBVlJPTiA9ICh3aW5kb3cubmV3TWVkaWEgPT0gXCJUcnVlXCIpID8gXCJhZHMuaW50ZXJzdGl0aWFsXCIgOiBcImFkcy5tYWF2YXJvblwiO1xyXG4gICAgZ29vZ2xldGFnLmNtZC5wdXNoKGZ1bmN0aW9uKCkge1xyXG4gICAgICBnb29nbGV0YWcuZGVzdHJveVNsb3RzKFtBZFVuaXRQcm9wZXJ0aWVzQ2xhc3NPYmouRGVmaW5lX3Nsb3RzW01BQVZST05dXSk7XHJcbiAgICAgIGdvb2dsZXRhZy5lbmFibGVTZXJ2aWNlcygpO1xyXG4gICAgfSk7XHJcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm1hYXZhcm9uX292ZXJsYXlcIikuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG4gIH0gLy9lbmQgb2YgZGVzdHJveU1hYXZhcm9uX2Z1bmNcclxuICBzZXRUYXJnZXRpbmdfZnVuY3Rpb24oYSkge1xyXG4gICAgZm9yIChsZXQgaSBpbiBhKSB7XHJcbiAgICAgIGdvb2dsZXRhZy5wdWJhZHMoKS5zZXRUYXJnZXRpbmcoaSwgYVtpXSk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIGRlZmluZVVuaXRzWW5zWW52X2Z1bmMoKSB7XHJcbiAgICBMb2coXCJkZWZpbmVVbml0c1luc1ludl9mdW5jXCIpO1xyXG4gICAgbGV0IGpzb25PYmpfZGljdCA9IHRoaXMuanNvbk9iajtcclxuICAgIGxldCBzaG93TWFhYXZhcm9uID0gMDtcclxuICAgIGdvb2dsZXRhZy5jbWQucHVzaChmdW5jdGlvbigpIHtcclxuICAgICAgZm9yIChsZXQga2V5IG9mIE9iamVjdC5rZXlzKGpzb25PYmpfZGljdCkpIHtcclxuICAgICAgICBnb29nbGV0YWcucHViYWRzKCkuc2V0VGFyZ2V0aW5nKGtleSwganNvbk9ial9kaWN0W2tleV0pO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICAgIGlmICh0aGlzLmlubmVyV2lkdGggPD0gXCI3NjhcIikge1xyXG4gICAgICB0aGlzLmZpbmRBbGxEaXZfZnVuYygpO1xyXG4gICAgICBzaG93TWFhYXZhcm9uID0gMTtcclxuICAgICAgaWYgKFxyXG4gICAgICAgIHRoaXMuZ2V0VXJsVmFyc19mdW5jKFwiSXNBcHBcIikgPT0gXCIxXCIgfHxcclxuICAgICAgICB0aGlzLmdldFVybFZhcnNfZnVuYyhcIklzQXBwXCIpID09IDEgfHxcclxuICAgICAgICB0aGlzLmdldFVybFZhcnNfZnVuYyhcImlzYXBwXCIpID09IFwiMVwiIHx8XHJcbiAgICAgICAgdGhpcy5nZXRVcmxWYXJzX2Z1bmMoXCJpc2FwcFwiKSA9PSAxXHJcbiAgICAgICkge1xyXG4gICAgICAgIHNob3dNYWFhdmFyb24gPSAwO1xyXG4gICAgICB9XHJcbiAgICAgIGlmICgoc2hvd01hYWF2YXJvbiA9PSAxICYmIEFkVW5pdFByb3BlcnRpZXNDbGFzc09iai5TbG90c1t0aGlzLk1hYXZhcm9uX21vYmlsZV9WTl0gJiYgZG9jdW1lbnQucmVmZXJyZXIuaW5jbHVkZXMoJ3Zlc3R5LmNvLmlsL2FydGljbGUnKSkgfHwgXHJcbiAgICAgIChzaG93TWFhYXZhcm9uID09IDEgJiYgQWRVbml0UHJvcGVydGllc0NsYXNzT2JqLlNsb3RzW3RoaXMuTWFhdmFyb25fbW9iaWxlX1ZOXSAmJiBkb2N1bWVudC5yZWZlcnJlci5pbmNsdWRlcygndmVzdHkuY28uaWwvYXJ0aWNsZXMnKSkgfHxcclxuICAgICAgKHNob3dNYWFhdmFyb24gPT0gMSAmJiBBZFVuaXRQcm9wZXJ0aWVzQ2xhc3NPYmouU2xvdHNbdGhpcy5NYWF2YXJvbl9tb2JpbGVfVk5dICYmIHdpbmRvdy5kY0NHID09ICdhcnRpY2xlJyAmJiBkb2N1bWVudC5yZWZlcnJlci5pbmNsdWRlcygndmVzdHkuY28uaWwnKSkpIHtcclxuICAgICAgdGhpcy5UcmFucyA9IHRydWU7XHJcbiAgICAgIGlmIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm1hYXZhcm9uc3R5bGVcIikgIT0gbnVsbCkge1xyXG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibWFhdmFyb25zdHlsZVwiKS5pbm5lckhUTUwgPSBcIlwiO1xyXG4gICAgICB9XHJcbiAgICAgICAgdGhpcy5kZWZpbmVTbG90c19mdW5jKHRoaXMuTWFhdmFyb25fbW9iaWxlX1ZOLCBbMSwgMl0pO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMuZGVmaW5lU2xvdHNfZnVuYyhcImFkcy5iaWdsaXZlYm94XCIsIFtbMSwgMV0sIFsnZmx1aWQnXSwgWzMyMCwgMV0sIFszMjAsIDQ1MF0sIFszMjAsIDEyMF0sIFszNTAsIDE5N10sIFszMzYsIDI4MF0sIFszMDAsIDI1MF0sIFszMjAsIDEwMF1dKTsgIFxyXG4gICAgICAgIGFkVW5pdFN0eWxlc0NsYXNzT2JqW1wiYWRzLmJpZ2xpdmVib3hcIl0oXCJhZHMuYmlnbGl2ZWJveFwiKTtcclxuICAgICAgfSAgICAgXHJcblxyXG4gICAgICAvL2lmIChBZFVuaXRQcm9wZXJ0aWVzQ2xhc3NPYmouU2xvdHNbJ2Fkcy5tdy52aWRlb2lucGFnZSddKSB0aGlzLmRlZmluZVNsb3RzX2Z1bmMoJ2Fkcy5tdy52aWRlb2lucGFnZScsIFtbMSwgMV0sIFsxLCAyXSwgJ2ZsdWlkJ10pO1xyXG4gICAgICAgICAgICAgXHJcbiAgICAgIHRoaXMuZGVmaW5lU2xvdHNfZnVuYyh0aGlzLnN0aWNreSwgW1szMjAsIDUwXSwgWzM2MCwgNTBdXSk7XHJcbiAgICAgIGFkVW5pdFN0eWxlc0NsYXNzT2JqW1wiYWRzLnN0aWNreVwiXShcImFkcy5zdGlja3lcIik7XHJcblxyXG4gICAgICBpZiAod2luZG93LmRjQ0cgPT0gXCJhcnRpY2xlXCIpIHRoaXMuYWRkX0Jyb3dzaV9pbmhvdXNlKFwidmVzdHlcIik7XHJcblxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgbGV0IHZlc3R5X25ld2dyaWQgPSAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5oQ29udGFpbmVyLmdyaWQxMjgwXzJcIikpID8gdHJ1ZSA6IGZhbHNlO1xyXG4gICAgICBpZiAod2luZG93LmRjQ0cgIT0gXCJtYWluXCIgJiYgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhZHMuaW50ZXJzdGl0aWFsXCIpICE9IHVuZGVmaW5lZCkge1xyXG5cclxuICAgICAgICB0aGlzLkRvdWJsZV9KdW1ibyA9IHRydWU7XHJcbiAgICAgICAgaWYgKCF0aGlzLkRvdWJsZV9KdW1ibykge1xyXG4gICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhZHMuaW50ZXJzdGl0aWFsXCIpLmlubmVySFRNTCA9IFwiXCI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh2ZXN0eV9uZXdncmlkKSB7XHJcbiAgICAgICAgICB0aGlzLmRlZmluZVNsb3RzX2Z1bmMoXCJhZHMudG9wXCIsIFtbMSwgMV0sIFsxLCAyXSwgWzk3MCwgOTBdLCBbOTcwLCAyNTBdLCBbMTAwMCwgMjAwXSwgWzk3MCwgMTMwXSwgWzk3MCwgMzUwXSwgWzk3MCwgMTAwXSwgWzExOTIsIDI1MF0sIFsxMTkyLCAzNTBdLCBbMTE5MiwgOTBdLCBbMTE5MiwgMTAwXSwgWzExOTIsIDEzMF1dKTtcclxuICAgICAgICAgXHJcbiAgICAgICAgICBsZXQgVG9wTG9hZGVkID0gZmFsc2U7XHJcbiAgICAgICAgICBJbmZyYXNydWN0dXJlQ2xhc3NPYmouU2xvdFJlbmRlckVuZChmdW5jdGlvbihldmVudCkge1xyXG4gICAgICAgICAgaWYgKGV2ZW50LnNsb3QgPT0gQWRVbml0UHJvcGVydGllc0NsYXNzT2JqLkRlZmluZV9zbG90c1tcImFkcy50b3BcIl0pIHtcclxuICAgICAgICAgICAgaWYgKCFUb3BMb2FkZWQpIHtcclxuICAgICAgICAgICAgICBpZiAoIWV2ZW50LmlzRW1wdHkpIHtcclxuICAgICAgICAgICAgICAgIGxldCBldmVudF9zaXplID0gZXZlbnQuc2l6ZSArIFwiXCI7XHJcbiAgICAgICAgICAgICAgICBsZXQgZXZlbnRfdyA9IGV2ZW50X3NpemUuc3BsaXQoXCIsXCIpOyAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgaWYgKGV2ZW50X3dbMF0gPT0gXCIxMTkyXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFkcy50b3BcIikuc2V0QXR0cmlidXRlKFwic3R5bGVcIiwgXCJiYWNrZ3JvdW5kLWNvbG9yOiByZ2IoMjMzLCAyMzMsIDIzMyk7IGNsZWFyOiBib3RoOyBtaW4taGVpZ2h0OiBhdXRvICFpbXBvcnRhbnQ7IHRleHQtYWxpZ246Y2VudGVyOyBwYWRkaW5nOiAwOyB3aWR0aDogMTIwMnB4OyBtYXJnaW46IDBweCBhdXRvOyBib3JkZXI6IDVweCBzb2xpZCByZ2IoMjMzLCAyMzMsIDIzMyk7IGJveC1zaXppbmc6IGJvcmRlci1ib3g7XCIpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgbGV0IHdpZHRoX3RvcCA9IChldmVudF93WzBdID09IFwiMVwiIHx8IGV2ZW50X3NpemUgPT0gXCJmbHVpZFwiKSA/IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYWRzLnRvcFwiKS5vZmZzZXRXaWR0aCA6IHBhcnNlSW50KGV2ZW50X3dbMF0sIDEwKTsgXHJcbiAgICAgICAgICAgICAgICAgIGlmIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInlib3hpbWdcIikpIHtcclxuICAgICAgICAgICAgICAgICAgICB3aWR0aF90b3AgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInlib3hpbWdcIikub2Zmc2V0V2lkdGg7XHJcbiAgICAgICAgICAgICAgICAgIH0gICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFkcy50b3BcIikuc2V0QXR0cmlidXRlKFwic3R5bGVcIiwgXCJjbGVhcjogYm90aDsgbWluLWhlaWdodDogYXV0byAhaW1wb3J0YW50OyB0ZXh0LWFsaWduOmNlbnRlcjsgcGFkZGluZzogMCAhaW1wb3J0YW50OyB3aWR0aDogXCIgKyBwYXJzZUludCh3aWR0aF90b3ArMTApICsgXCJweCAhaW1wb3J0YW50O1wiICsgXCJtYXJnaW46IDBweCBhdXRvOyBib3JkZXI6IDVweCBzb2xpZCByZ2IoMjMzLCAyMzMsIDIzMyk7IGJveC1zaXppbmc6IGJvcmRlci1ib3g7XCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAgICAgICBldmVudC5zaXplID09IFwiOTcwLDEzMFwiIHx8XHJcbiAgICAgICAgICAgICAgICAgIGV2ZW50LnNpemUgPT0gXCI5NzAsOTBcIiB8fFxyXG4gICAgICAgICAgICAgICAgICBldmVudC5zaXplID09IFwiOTgwLDEwMFwiIHx8XHJcbiAgICAgICAgICAgICAgICAgIGV2ZW50LnNpemUgPT0gXCIxMTkyLDkwXCIgfHxcclxuICAgICAgICAgICAgICAgICAgZXZlbnQuc2l6ZSA9PSBcIjExOTIsMTMwXCIgfHxcclxuICAgICAgICAgICAgICAgICAgZXZlbnQuc2l6ZSA9PSBcIjEwMDUsMTI0XCJcclxuICAgICAgICAgICAgICAgICkge1xyXG4gICAgICAgICAgICAgICAgICBBZFVuaXRGdW5jdGlvbnNDbGFzc09iai5maW5kQWxsRGl2X2Z1bmMoKTtcclxuICAgICAgICAgICAgICAgICAgTWFpbkZ1bmN0aW9uQ2xhc3NPYmouZ2V0U3R5bGVUb3BfZnVuYyhldmVudCk7ICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgfSAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgVG9wTG9hZGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICB0aGlzLmRlZmluZVNsb3RzX2Z1bmMoXCJhZHMudG9wXCIsIFtbOTcwLCA5MF0sIFs5NzAsIDI1MF0sIFs3NzAsIDM1MF0sIFs5NzAsIDM1MF1dKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgYWRVbml0U3R5bGVzQ2xhc3NPYmpbXCJhZHMudG9wXCJdKFwiYWRzLnRvcFwiKTsgICAgICAgXHJcblxyXG4gICAgICAgIC8vIGRlZmluZSBNYWF2YXJvblxyXG4gICAgICAgIGlmICh3aW5kb3cuZnJlcXVlbmN5TG9naWMgJiYgbG9jYWxTdG9yYWdlLmZyZXF1ZW5jeUxvZ2ljICE9IHVuZGVmaW5lZCAmJiBmcmVxdWVuY3lMb2dpYy5kaXNwbGF5ZWRsYXN0LmluY2x1ZGVzKFwiYWR4XCIpICYmIGZyZXF1ZW5jeUxvZ2ljLmFkZCA9PSBcImxvYWRlZFwiKSB7XHJcbiAgICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgnZnJlcXVlbmN5TG9naWMnKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmRlZmluZVNsb3RzX2Z1bmMoXCJhZHMuaW50ZXJzdGl0aWFsXCIsIFtbMSwgMV0sIFsyLCAxXSwgWzk3MCwgMjUwXV0sIFwiXCIsIFwiZ3B0X21hYXZhcm9uXCIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IE1hYXZhcm9uTG9hZGVkID0gZmFsc2U7XHJcbiAgICAgICAgbGV0IHZpZGVvX29uID0gXCJcIjtcclxuICAgICAgICBsZXQgY29udF93aCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY29udGVudC13XCIpO1xyXG4gICAgICAgIGxldCBjb250ZW50X3doID0gY29udF93aCAhPT0gbnVsbDsgIFxyXG4gICAgICAgIEluZnJhc3J1Y3R1cmVDbGFzc09iai5TbG90UmVuZGVyRW5kKGZ1bmN0aW9uKGV2ZW50KSB7XHJcbiAgICAgICAgICBsZXQgdmlkZW9fZGF0YSA9IFwiXCI7XHJcbiAgICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgIGV2ZW50LnNsb3QgPT0gQWRVbml0UHJvcGVydGllc0NsYXNzT2JqLkRlZmluZV9zbG90c1tcImFkcy5pbnRlcnN0aXRpYWxcIl1cclxuICAgICAgICAgICkge1xyXG4gICAgICAgICAgICBpZiAoIU1hYXZhcm9uTG9hZGVkKSB7XHJcbiAgICAgICAgICAgICAgaWYgKCFldmVudC5pc0VtcHR5KSB7ICAgIFxyXG4gICAgICAgICAgICAgICAgaWYgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdibGFua2V0JykgIT0gdW5kZWZpbmVkIHx8IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdibGFua2V0JykgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYmxhbmtldCcpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbiAgICAgICAgICAgICAgICB9ICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnYm9keScpWzBdLnN0eWxlLnNldFByb3BlcnR5KCdvdmVyZmxvdycsICd2aXNpYmxlJywgJ2ltcG9ydGFudCcpOyAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAvL3RoYXQuaXNfbWFhdmFyb24gPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgaWYgKGNvbnRlbnRfd2gpIHtcclxuICAgICAgICAgICAgICAgICAgY29udF93aC5zdHlsZS5kaXNwbGF5PVwibm9uZVwiO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgdmlkZW9fb24gPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFxyXG4gICAgICAgICAgICAgICAgICAgIFwidmlkZW8tY29udGFpbmVyLWZscDZcIlxyXG4gICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHZpZGVvX29uLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGlmcmFtZV92aWRlbyA9IHZpZGVvX29uW2ldLmNoaWxkcmVuWzBdO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmcmFtZV92aWRlby5zcmMgPSBcIlwiO1xyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChleCkge1xyXG4gICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhleCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdib2R5JylbMF0uc3R5bGUuc2V0UHJvcGVydHkoJ292ZXJmbG93JywgJ3Zpc2libGUnLCAnaW1wb3J0YW50Jyk7XHJcbiAgICAgICAgICAgICAgICBpZiAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JsYW5rZXQnKSAhPSB1bmRlZmluZWQgfHwgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JsYW5rZXQnKSAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdibGFua2V0Jykuc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICAgICAgICAgICAgICAgIH0gICBcclxuICAgICAgICAgICAgICAgIHZpZGVvX2RhdGEgPSBNYWluRnVuY3Rpb25DbGFzc09iai52aWRlb09mZl9mdW5jKCk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIE1hYXZhcm9uTG9hZGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICBpZiAodmlkZW9fZGF0YSAhPSBcIlwiKSB7XHJcbiAgICAgICAgICAgICAgICB2aWRlb19vbi5zcmMgPSB2aWRlb19kYXRhO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGlmICh2ZXN0eV9uZXdncmlkKSB7XHJcbiAgICAgICAgICB0aGlzLmRlZmluZVNsb3RzX2Z1bmMoXCJhZHMudG9wXCIsIFtbMSwgMV0sIFsxLCAyXSwgWzk3MCwgOTBdLCBbOTcwLCAyNTBdLCBbMTAwMCwgMjAwXSwgWzk3MCwgMTMwXSwgWzk3MCwgMzUwXSwgWzk3MCwgMTAwXSwgWzExOTIsIDI1MF0sIFsxMTkyLCAzNTBdLCBbMTE5MiwgOTBdLCBbMTE5MiwgMTAwXSwgWzExOTIsIDEzMF1dKTtcclxuICAgICAgICAgXHJcbiAgICAgICAgICBsZXQgVG9wTG9hZGVkID0gZmFsc2U7XHJcbiAgICAgICAgICBJbmZyYXNydWN0dXJlQ2xhc3NPYmouU2xvdFJlbmRlckVuZChmdW5jdGlvbihldmVudCkge1xyXG4gICAgICAgICAgaWYgKGV2ZW50LnNsb3QgPT0gQWRVbml0UHJvcGVydGllc0NsYXNzT2JqLkRlZmluZV9zbG90c1tcImFkcy50b3BcIl0pIHtcclxuICAgICAgICAgICAgaWYgKCFUb3BMb2FkZWQpIHtcclxuICAgICAgICAgICAgICBpZiAoIWV2ZW50LmlzRW1wdHkpIHtcclxuICAgICAgICAgICAgICAgIGxldCBldmVudF9zaXplID0gZXZlbnQuc2l6ZSArIFwiXCI7XHJcbiAgICAgICAgICAgICAgICBsZXQgZXZlbnRfdyA9IGV2ZW50X3NpemUuc3BsaXQoXCIsXCIpOyAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgaWYgKGV2ZW50X3dbMF0gPT0gXCIxMTkyXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFkcy50b3BcIikuc2V0QXR0cmlidXRlKFwic3R5bGVcIiwgXCJiYWNrZ3JvdW5kLWNvbG9yOiByZ2IoMjMzLCAyMzMsIDIzMyk7IGNsZWFyOiBib3RoOyBtaW4taGVpZ2h0OiBhdXRvICFpbXBvcnRhbnQ7IHRleHQtYWxpZ246Y2VudGVyOyBwYWRkaW5nOiAwOyB3aWR0aDogMTIwMnB4OyBtYXJnaW46IDBweCBhdXRvOyBib3JkZXI6IDVweCBzb2xpZCByZ2IoMjMzLCAyMzMsIDIzMyk7IGJveC1zaXppbmc6IGJvcmRlci1ib3g7XCIpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgbGV0IHdpZHRoX3RvcCA9IChldmVudF93WzBdID09IFwiMVwiIHx8IGV2ZW50X3NpemUgPT0gXCJmbHVpZFwiKSA/IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYWRzLnRvcFwiKS5vZmZzZXRXaWR0aCA6IHBhcnNlSW50KGV2ZW50X3dbMF0sIDEwKTsgXHJcbiAgICAgICAgICAgICAgICAgIGlmIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInlib3hpbWdcIikpIHtcclxuICAgICAgICAgICAgICAgICAgICB3aWR0aF90b3AgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInlib3hpbWdcIikub2Zmc2V0V2lkdGg7XHJcbiAgICAgICAgICAgICAgICAgIH0gICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFkcy50b3BcIikuc2V0QXR0cmlidXRlKFwic3R5bGVcIiwgXCJjbGVhcjogYm90aDsgbWluLWhlaWdodDogYXV0byAhaW1wb3J0YW50OyB0ZXh0LWFsaWduOmNlbnRlcjsgcGFkZGluZzogMCAhaW1wb3J0YW50OyB3aWR0aDogXCIgKyBwYXJzZUludCh3aWR0aF90b3ArMTApICsgXCJweCAhaW1wb3J0YW50O1wiICsgXCJtYXJnaW46IDBweCBhdXRvOyBib3JkZXI6IDVweCBzb2xpZCByZ2IoMjMzLCAyMzMsIDIzMyk7IGJveC1zaXppbmc6IGJvcmRlci1ib3g7XCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAgICAgICBldmVudC5zaXplID09IFwiOTcwLDEzMFwiIHx8XHJcbiAgICAgICAgICAgICAgICAgIGV2ZW50LnNpemUgPT0gXCI5NzAsOTBcIiB8fFxyXG4gICAgICAgICAgICAgICAgICBldmVudC5zaXplID09IFwiOTgwLDEwMFwiIHx8XHJcbiAgICAgICAgICAgICAgICAgIGV2ZW50LnNpemUgPT0gXCIxMTkyLDkwXCIgfHxcclxuICAgICAgICAgICAgICAgICAgZXZlbnQuc2l6ZSA9PSBcIjExOTIsMTMwXCIgfHxcclxuICAgICAgICAgICAgICAgICAgZXZlbnQuc2l6ZSA9PSBcIjEwMDUsMTI0XCJcclxuICAgICAgICAgICAgICAgICkge1xyXG4gICAgICAgICAgICAgICAgICBBZFVuaXRGdW5jdGlvbnNDbGFzc09iai5maW5kQWxsRGl2X2Z1bmMoKTtcclxuICAgICAgICAgICAgICAgICAgTWFpbkZ1bmN0aW9uQ2xhc3NPYmouZ2V0U3R5bGVUb3BfZnVuYyhldmVudCk7ICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgfSAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgVG9wTG9hZGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICB0aGlzLmRlZmluZVNsb3RzX2Z1bmMoXCJhZHMudG9wXCIsIFtbOTcwLCA5MF0sIFs5NzAsIDI1MF0sIFs3NzAsIDM1MF0sIFs5NzAsIDM1MF1dKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgYWRVbml0U3R5bGVzQ2xhc3NPYmpbXCJhZHMudG9wXCJdKFwiYWRzLnRvcFwiKTtcclxuICAgICAgfVxyXG4gICAgIFxyXG4gICAgICB0aGlzLmZpbmRBbGxEaXZfZnVuYygpO1xyXG5cclxuICAgICAgaWYgKHdpbmRvdy5kY0NHID09IFwiYXJ0aWNsZVwiKSB0aGlzLmFkZF9Ccm93c2lfaW5ob3VzZShcInZlc3R5XCIpO1xyXG5cclxuICAgICAgbGV0IG9sZF9kaXZzID0gbmV3IEFycmF5KCk7XHJcbiAgICAgIGxldCBuZXdfZGl2cyA9IG5ldyBBcnJheSgpO1xyXG4gICAgICBsZXQgZ2VuZXJhbF9kaXZzID0gbmV3IEFycmF5KCk7XHJcbiAgICAgIGNvbnN0IGNsYXNzTmFtZSA9IGdlbmVyYWxfYmFubmVyc19kaXZzO1xyXG4gICAgICBjb25zdCBkaXZfc2l6ZXMgPSBnZW5lcmFsX2Jhbm5lcnNfZGl2c19zaXplcztcclxuICAgICAgY29uc3QgY2xhc3NuYW1lQ291bnQgPSBjbGFzc05hbWUubGVuZ3RoO1xyXG4gICAgICBpZiAoY2xhc3NOYW1lICE9IFwiXCIpIHtcclxuICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGNsYXNzbmFtZUNvdW50OyBqKyspIHtcclxuICAgICAgICAgIGNvbnN0IGRpdl9zaXplID0gZGl2X3NpemVzW2pdO1xyXG4gICAgICAgICAgY29uc3Qgd19kaXYgPSBkaXZfc2l6ZS5zdWJzdHIoMCwgZGl2X3NpemUuaW5kZXhPZihcInhcIikpO1xyXG4gICAgICAgICAgY29uc3QgaF9kaXYgPSBkaXZfc2l6ZS5zdWJzdHIoZGl2X3NpemUuaW5kZXhPZihcInhcIikgKyAxKTtcclxuICAgICAgICAgIGdlbmVyYWxfZGl2cy5wdXNoKFtcclxuICAgICAgICAgICAgY2xhc3NOYW1lW2pdLFxyXG4gICAgICAgICAgICBwYXJzZUludCh3X2RpdiwgMTApLFxyXG4gICAgICAgICAgICBwYXJzZUludChoX2RpdiwgMTApXHJcbiAgICAgICAgICBdKTtcclxuXHJcbiAgICAgICAgICBpZiAodGhpcy5uZXdNZWRpYSA9PSBcIlRydWVcIikge1xyXG4gICAgICAgICAgICBvbGRfZGl2cy5wdXNoKFwiYWRzLjMwMHgyNTAuMVwiLCBcImFkcy4zMDB4MjUwLjJcIiwgXCJhZHMuMzAweDI1MC4zXCIpO1xyXG4gICAgICAgICAgICBuZXdfZGl2cy5wdXNoKFwiYWRzLmJveC4xXCIsIFwiYWRzLmJveC4yXCIsIFwiYWRzLmJveC4zXCIpO1xyXG5cclxuICAgICAgICAgICAgZ2VuZXJhbF9kaXZzLm1hcChmdW5jdGlvbiAoZ2QpIHtcclxuICAgICAgICAgICAgICAgIHZhciBpbmRleCA9IG9sZF9kaXZzLmluZGV4T2YoZ2RbMF0pO1xyXG4gICAgICAgICAgICAgICAgaWYgKGluZGV4Pi0xKSB7ICAgIFxyXG4gICAgICAgICAgICAgICAgICBnZFswXSA9IG5ld19kaXZzW2luZGV4XTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIGxldCBzdHlsZV9kaXZzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInN0eWxlXCIpO1xyXG4gICAgICAgICAgICBzdHlsZV9kaXZzLmlubmVySFRNTCA9IGBkaXZbaWQ9JyR7Z2VuZXJhbF9kaXZzW2pdWzBdfSddIHtcclxuICAgICAgICAgICAgICBtYXJnaW46MCBhdXRvO1xyXG4gICAgICAgICAgICAgIHdpZHRoOiAke2dlbmVyYWxfZGl2c1tqXVsxXX1weDtcclxuICAgICAgICAgICAgICBoZWlnaHQ6ICR7Z2VuZXJhbF9kaXZzW2pdWzJdfXB4ICFpbXBvcnRhbnQ7XHJcbiAgICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xyXG4gICAgICAgICAgICAgIGRpc3BsYXk6IGZsZXggIWltcG9ydGFudDtcclxuICAgICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBkaXZbaWQ9JyR7Z2VuZXJhbF9kaXZzW2pdWzBdfSddIGlmcmFtZSB7XHJcbiAgICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xyXG4gICAgICAgICAgICAgIGRpc3BsYXk6IGZsZXggIWltcG9ydGFudDtcclxuICAgICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcclxuICAgICAgICAgIH1gO1xyXG5cclxuICAgICAgICAgIGlmIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZChnZW5lcmFsX2RpdnNbal1bMF0pKSB7XHJcbiAgICAgICAgICAgIGxldCBjdXJyZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZ2VuZXJhbF9kaXZzW2pdWzBdKTsgIFxyXG4gICAgICAgICAgICBjdXJyZW50LnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHN0eWxlX2RpdnMsIGN1cnJlbnQubmV4dFNpYmxpbmcpO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIGlmIChnZW5lcmFsX2RpdnNbal1bMF0gPT0gXCJhZHMuc2xpZGVyLjFcIikge1xyXG4gICAgICAgICAgICB0aGlzLmRlZmluZVNsb3RzX2Z1bmMoZ2VuZXJhbF9kaXZzW2pdWzBdLCBbMSwgMV0pO1xyXG4gICAgICAgICAgfSBlbHNlIGlmIChnZW5lcmFsX2RpdnNbal1bMF0gPT0gXCJhZHMuZGlzcGxheS52aWRlb2lucGFnZS4xXCIpIHtcclxuICAgICAgICAgICAgbGV0IHZpZGVvaW5wYWdlX3NpemVzID0gIHZlc3R5X25ld2dyaWQgPyBbWzEsIDFdLCBbMSwgMl0sIFs2MTAsIDMwMF0sIFsnZmx1aWQnXV0gOiBbWzEsIDFdLCBbJ2ZsdWlkJ11dO1xyXG4gICAgICAgICAgICB0aGlzLmRlZmluZVNsb3RzX2Z1bmMoZ2VuZXJhbF9kaXZzW2pdWzBdICwgdmlkZW9pbnBhZ2Vfc2l6ZXMpOyBcclxuICAgICAgICAgIH0gZWxzZSBpZiAodmVzdHlfbmV3Z3JpZCAmJiAoZ2VuZXJhbF9kaXZzW2pdWzBdID09IFwiYWRzLmJveC4yXCIgfHwgZ2VuZXJhbF9kaXZzW2pdWzBdID09IFwiYWRzLmJveC4zXCIgfHwgZ2VuZXJhbF9kaXZzW2pdWzBdID09IFwiYWRzLmJveC40XCIpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGVmaW5lU2xvdHNfZnVuYyhnZW5lcmFsX2RpdnNbal1bMF0gLCBbW2dlbmVyYWxfZGl2c1tqXVsxXSwgZ2VuZXJhbF9kaXZzW2pdWzJdXSwgWydmbHVpZCddXSk7IFxyXG4gICAgICAgICAgfSBlbHNlIGlmICh2ZXN0eV9uZXdncmlkICYmIHdpbmRvdy5kY1BhdGggPT0gXCI1MC5WZXN0aS0xLkhvbWVcIiAmJiBnZW5lcmFsX2RpdnNbal1bMF0uaW5jbHVkZXMoXCJhZHMuYmlnLnN0cmlwXCIpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGVmaW5lU2xvdHNfZnVuYyhnZW5lcmFsX2RpdnNbal1bMF0sIFtbZ2VuZXJhbF9kaXZzW2pdWzFdLCBnZW5lcmFsX2RpdnNbal1bMl1dLCBbOTcwLCA5MF1dKTtcclxuICAgICAgICAgICAgLy8gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZ2VuZXJhbF9kaXZzW2pdWzBdKS5zZXRBdHRyaWJ1dGUoXCJzdHlsZVwiLCBcIm1hcmdpbjowIGF1dG87IHRleHQtYWxpZ246Y2VudGVyOyBkaXNwbGF5OiBmbGV4OyBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcIik7ICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIGxldCBTdHJpcExvYWRlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAvLyBJbmZyYXNydWN0dXJlQ2xhc3NPYmouU2xvdFJlbmRlckVuZChmdW5jdGlvbihldmVudCkge1xyXG4gICAgICAgICAgICAvLyAgIGlmIChldmVudC5zbG90ID09IEFkVW5pdFByb3BlcnRpZXNDbGFzc09iai5EZWZpbmVfc2xvdHNbZ2VuZXJhbF9kaXZzW2pdWzBdXSkge1xyXG4gICAgICAgICAgICAvLyAgICAgaWYgKCFTdHJpcExvYWRlZCkge1xyXG4gICAgICAgICAgICAvLyAgICAgICBpZiAoIWV2ZW50LmlzRW1wdHkpIHtcclxuICAgICAgICAgICAgLy8gICAgICAgICBsZXQgd2lkdGhfc3RyaXAgPSBnZW5lcmFsX2RpdnNbal1bMV07XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgbGV0IHN0cmlwX3NpemUgPSBldmVudC5zaXplICsgXCJcIjtcclxuICAgICAgICAgICAgLy8gICAgICAgICBsZXQgc3RyaXBfdyA9IHN0cmlwX3NpemUuc3BsaXQoXCIsXCIpOyAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyAgICAgICAgIGlmIChzdHJpcF93WzBdID09IFwiOTcwXCIpIHtcclxuICAgICAgICAgICAgLy8gICAgICAgICAgIHdpZHRoX3N0cmlwID0gOTcwO1xyXG4gICAgICAgICAgICAvLyAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gICAgICAgICBsZXQgc3R5bGVfc3RyaXAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3R5bGVcIik7XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgc3R5bGVfc3RyaXAuaW5uZXJIVE1MID0gYGRpdltpZD0ke2dlbmVyYWxfZGl2c1tqXVswXX1dIHtcclxuICAgICAgICAgICAgLy8gICAgICAgICAgICB3aWR0aDoke3dpZHRoX3N0cmlwfXB4ICFpbXBvcnRhbnQ7XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgaGVpZ2h0OiAke2dlbmVyYWxfZGl2c1tqXVsyXX1weCAhaW1wb3J0YW50OyAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgZGl2W2lkPSR7Z2VuZXJhbF9kaXZzW2pdWzBdfV0gaWZyYW1lIHtcclxuICAgICAgICAgICAgLy8gICAgICAgICAgIHdpZHRoOiR7d2lkdGhfc3RyaXB9cHggIWltcG9ydGFudDtcclxuICAgICAgICAgICAgLy8gICAgICAgICAgIGhlaWdodDogJHtnZW5lcmFsX2RpdnNbal1bMl19cHggIWltcG9ydGFudDtcclxuICAgICAgICAgICAgLy8gICAgICAgICB9YDsgXHJcbiAgICAgICAgICAgIC8vICAgICAgICAgbGV0IHN0cmlwID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZ2VuZXJhbF9kaXZzW2pdWzBdKTsgICBcclxuICAgICAgICAgICAgLy8gICAgICAgICBzdHJpcC5wYXJlbnROb2RlLmluc2VydEJlZm9yZShzdHlsZV9zdHJpcCwgc3RyaXAubmV4dFNpYmxpbmcpO1xyXG4gICAgICAgICAgICAvLyAgICAgICB9XHJcbiAgICAgICAgICAgIC8vICAgICAgIFN0cmlwTG9hZGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgLy8gICAgIH1cclxuICAgICAgICAgICAgLy8gICB9XHJcbiAgICAgICAgICAgIC8vIH0pO1xyXG4gICAgICAgICAgfSBlbHNlIHsgICAgICAgICAgICBcclxuICAgICAgICAgICAgdGhpcy5kZWZpbmVTbG90c19mdW5jKGdlbmVyYWxfZGl2c1tqXVswXSwgW1xyXG4gICAgICAgICAgICAgIGdlbmVyYWxfZGl2c1tqXVsxXSxcclxuICAgICAgICAgICAgICBnZW5lcmFsX2RpdnNbal1bMl1cclxuICAgICAgICAgICAgXSk7XHJcbiAgICAgICAgICB9ICAgICAgICAgXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAodmVzdHlfbmV3Z3JpZCkge1xyXG4gICAgICBcclxuICAgICAgLy8gQmFubmVyIGluIGhvbWUgcGFnZSAtIG11bHRpIGltYWdlcyBjb21wXHJcbiAgICAgIGlmIChBZFVuaXRQcm9wZXJ0aWVzQ2xhc3NPYmouU2xvdHNbXCJhZHMuaG90Ym94XCJdKSB7XHJcbiAgICAgICAgdGhpcy5kZWZpbmVTbG90c19mdW5jKFwiYWRzLmhvdGJveFwiLCBbWydmbHVpZCddLCBbMTkwLCAyMDhdXSk7XHJcbiAgICAgICAgbGV0IEJhbm5lckxvYWRlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgSW5mcmFzcnVjdHVyZUNsYXNzT2JqLlNsb3RSZW5kZXJFbmQoZnVuY3Rpb24oZXZlbnQpIHtcclxuICAgICAgICAgICAgaWYgKGV2ZW50LnNsb3QgPT0gQWRVbml0UHJvcGVydGllc0NsYXNzT2JqLkRlZmluZV9zbG90c1tcImFkcy5ob3Rib3hcIl0pIHtcclxuICAgICAgICAgICAgICBpZiAoIUJhbm5lckxvYWRlZCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFldmVudC5pc0VtcHR5KSB7XHJcbiAgICAgICAgICAgICAgICAgIGxldCBzdHlsZV9iYW5uZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3R5bGVcIik7XHJcbiAgICAgICAgICAgICAgICAgIHN0eWxlX2Jhbm5lci5pbm5lckhUTUwgPSBgZGl2W2lkPSdhZHMuaG90Ym94J10ge1xyXG4gICAgICAgICAgICAgICAgICAgICB3aWR0aDoxOTBweCAhaW1wb3J0YW50O1xyXG4gICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IDIwOHB4ICFpbXBvcnRhbnQ7ICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgIGRpdltpZD0nYWRzLmhvdGJveCddIGlmcmFtZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg6MTkwcHggIWltcG9ydGFudDtcclxuICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IDIwOHB4ICFpbXBvcnRhbnQ7XHJcbiAgICAgICAgICAgICAgICAgIH1gO1xyXG4gICAgICAgICAgICAgICAgICBsZXQgaG90Ym94X2Jhbm5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYWRzLmhvdGJveFwiKTtcclxuICAgICAgICAgICAgICAgICAgaG90Ym94X2Jhbm5lci5wYXJlbnROb2RlLmluc2VydEJlZm9yZShzdHlsZV9iYW5uZXIsIGhvdGJveF9iYW5uZXIubmV4dFNpYmxpbmcpOyBcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIEJhbm5lckxvYWRlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgXHJcbiAgICAgICAgLy8gQmFubmVyIGluIGNhdGVnb3J5IHBhZ2UgLSBtdWx0aS1zdHJpcCBjb21wb25lbnRhXHJcbiAgICAgICAgaWYgKEFkVW5pdFByb3BlcnRpZXNDbGFzc09iai5TbG90c1tcImFkcy5zdHJpcC5jaGFubmVsLjFcIl0pIHtcclxuICAgICAgICAgIHRoaXMuZGVmaW5lU2xvdHNfZnVuYyhcImFkcy5zdHJpcC5jaGFubmVsLjFcIiwgW1snZmx1aWQnXSwgWzMwMCwgMjU2XV0pOyAgICBcclxuICAgICAgICAgIGxldCBTdHJpcEJhbm5lckxvYWRlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgSW5mcmFzcnVjdHVyZUNsYXNzT2JqLlNsb3RSZW5kZXJFbmQoZnVuY3Rpb24oZXZlbnQpIHtcclxuICAgICAgICAgICAgaWYgKGV2ZW50LnNsb3QgPT0gQWRVbml0UHJvcGVydGllc0NsYXNzT2JqLkRlZmluZV9zbG90c1tcImFkcy5zdHJpcC5jaGFubmVsLjFcIl0pIHtcclxuICAgICAgICAgICAgICBpZiAoIVN0cmlwQmFubmVyTG9hZGVkKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWV2ZW50LmlzRW1wdHkpIHtcclxuICAgICAgICAgICAgICAgICAgbGV0IFN0cmlwc3R5bGVfYmFubmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInN0eWxlXCIpO1xyXG4gICAgICAgICAgICAgICAgICBTdHJpcHN0eWxlX2Jhbm5lci5pbm5lckhUTUwgPSBgZGl2W2lkPSdhZHMuc3RyaXAuY2hhbm5lbC4xJ10ge1xyXG4gICAgICAgICAgICAgICAgICAgIHdpZHRoOjMwMHB4ICFpbXBvcnRhbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAyODBweCAhaW1wb3J0YW50OyBcclxuICAgICAgICAgICAgICAgICAgICBib3JkZXItYm90dG9tOiA1cHggc29saWQgIzE0MTdhYzsgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgIGRpdltpZD0nYWRzLnN0cmlwLmNoYW5uZWwuMSddIGlmcmFtZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgIHdpZHRoOjMwMHB4ICFpbXBvcnRhbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogMjgwcHggIWltcG9ydGFudDtcclxuICAgICAgICAgICAgICAgICAgIH1gO1xyXG4gICAgICAgICAgICAgICAgICBsZXQgc3RyaXBfYmFubmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhZHMuc3RyaXAuY2hhbm5lbC4xXCIpO1xyXG4gICAgICAgICAgICAgICAgICBzdHJpcF9iYW5uZXIucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoU3RyaXBzdHlsZV9iYW5uZXIsIHN0cmlwX2Jhbm5lci5uZXh0U2libGluZyk7IFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgU3RyaXBCYW5uZXJMb2FkZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKHRoaXMuZGNjZyA9PSBcImFydGljbGVcIiAmJiB0aGlzLnRydXZpZF9kZXNrdG9wID09IFwiVHJ1ZVwiKSB7XHJcbiAgICAgICAgQWRUcnV2aWRTY3JpcHRDbGFzc29iai5BZGRUcnVkaXZfZnVuYyhcImFkcy5kaXNwbGF5LnZpZGVvaW5wYWdlLjFcIiwgW1sxLCAxXSwgWzEsIDJdLCBbJ2ZsdWlkJ11dLCAwKTtcclxuICAgICAgfSAgICAgXHJcbiAgICAgIGlmIChBZFVuaXRQcm9wZXJ0aWVzQ2xhc3NPYmouU2xvdHNbdGhpcy5PemVuX2xlZnRfVk5dICYmIHdpbmRvdy5pbm5lcldpZHRoID4gMTUyMCkge1xyXG4gICAgICAgIHRoaXMuZGVmaW5lU2xvdHNfZnVuYyh0aGlzLk96ZW5fbGVmdF9WTiwgQWRVbml0QWRkaXRpb25hbFN0eWxlc0NsYXNzLnJlc2l6ZU96ZW5fZnVuYygpKTtcclxuICAgICAgICBhZFVuaXRTdHlsZXNDbGFzc09ialtcImFkcy5vemVuLmxlZnRcIl0oXCJhZHMub3plbi5sZWZ0XCIpO1xyXG4gICAgICB9XHJcbiAgICAgIGlmIChBZFVuaXRQcm9wZXJ0aWVzQ2xhc3NPYmouU2xvdHNbXCJhZHMuc2FyZ2VsXCJdKSB7XHJcbiAgICAgICAgc2V0VGltZW91dCh0aGlzLmRlZmluZVNhcmdlbF9mdW5jKFwiYWRzLnNhcmdlbFwiKSwgMjUwMCk7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKEFkVW5pdFByb3BlcnRpZXNDbGFzc09iai5TbG90c1t0aGlzLk96ZW5dICYmIHdpbmRvdy5pbm5lcldpZHRoID4gMTUyMCkge1xyXG4gICAgICAgIHRoaXMuZGVmaW5lU2xvdHNfZnVuYyh0aGlzLk96ZW4sIEFkVW5pdEFkZGl0aW9uYWxTdHlsZXNDbGFzcy5yZXNpemVPemVuX2Z1bmMoKSk7XHJcbiAgICAgICAgYWRVbml0U3R5bGVzQ2xhc3NPYmpbXCJhZHMub3plblwiXShcImFkcy5vemVuXCIpO1xyXG4gICAgICB9ICAgXHJcbiAgXHJcbiAgICB9IC8vZW5kIGVsc2VcclxuICB9IC8vZW5kIGRlZmluZVVuaXRzWW5zWW52X2Z1bmNcclxuICBkZWZpbmVVbml0c1luZXNfZnVuYygpIHtcclxuICAgIExvZyhcImRlZmluZVVuaXRzWW5lc19mdW5jXCIpO1xyXG4gICAgbGV0IGpzb25PYmpfZGljdCA9IHRoaXMuanNvbk9iajtcclxuICAgIGxldCBzaG93TWFhYXZhcm9uID0gMDtcclxuICAgIGdvb2dsZXRhZy5jbWQucHVzaChmdW5jdGlvbigpIHtcclxuICAgICAgZm9yIChsZXQga2V5IG9mIE9iamVjdC5rZXlzKGpzb25PYmpfZGljdCkpIHtcclxuICAgICAgICBnb29nbGV0YWcucHViYWRzKCkuc2V0VGFyZ2V0aW5nKGtleSwganNvbk9ial9kaWN0W2tleV0pO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICAgIGlmICh0aGlzLmlubmVyV2lkdGggPD0gXCI3NjhcIikge1xyXG4gICAgICB0aGlzLmZpbmRBbGxEaXZfZnVuYygpO1xyXG4gICAgICBzaG93TWFhYXZhcm9uID0gMTtcclxuICAgICAgaWYgKFxyXG4gICAgICAgIHRoaXMuZ2V0VXJsVmFyc19mdW5jKFwiSXNBcHBcIikgPT0gXCIxXCIgfHxcclxuICAgICAgICB0aGlzLmdldFVybFZhcnNfZnVuYyhcIklzQXBwXCIpID09IDEgfHxcclxuICAgICAgICB0aGlzLmdldFVybFZhcnNfZnVuYyhcImlzYXBwXCIpID09IFwiMVwiIHx8XHJcbiAgICAgICAgdGhpcy5nZXRVcmxWYXJzX2Z1bmMoXCJpc2FwcFwiKSA9PSAxXHJcbiAgICAgICkge1xyXG4gICAgICAgIHNob3dNYWFhdmFyb24gPSAwO1xyXG4gICAgICB9XHJcbiAgICAgIGlmIChzaG93TWFhYXZhcm9uID09IDEgJiYgQWRVbml0UHJvcGVydGllc0NsYXNzT2JqLlNsb3RzWydhZHMudHJhbnNpdGlvbiddKSB7XHJcbiAgICAgICAgQWRVbml0UHJvcGVydGllc0NsYXNzT2JqLlRyYW5zID0gdHJ1ZTtcclxuICAgICAgICBpZiAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJtYWF2YXJvbnN0eWxlXCIpICE9IG51bGwpIHtcclxuICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibWFhdmFyb25zdHlsZVwiKS5pbm5lckhUTUwgPSBcIlwiO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmRlZmluZVNsb3RzWW5lc19mdW5jKFwiYWRzLnRyYW5zaXRpb25cIiwgW1sxLCAyXSwgWzEsIDFdLCBbMzIwLCA0NTBdXSk7XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy5kZWZpbmVTbG90c1luZXNfZnVuYyhcImFkcy5pbmJvcmRcIiwgW1snZmx1aWQnXSwgWzMyMCwgNDUwXSwgWzMyMCwgMjAwXSwgWzMyMCwgMTgwXSwgWzM2MCwgMjAwXSwgWzM2MCwgMzYwXV0pOyAgXHJcbiAgICAgIGFkVW5pdFN0eWxlc0NsYXNzT2JqW1wiYWRzLmluYm9yZFwiXShcImFkcy5pbmJvcmRcIik7XHJcblxyXG4gICAgICBpZiAodGhpcy5kY2NnID09IFwiYXJ0aWNsZVwiKSB7XHJcbiAgICAgICAgaWYgKHRoaXMudHJ1dmlkX21vYmlsZSA9PSBcIlRydWVcIikge1xyXG4gICAgICAgIEFkVHJ1dmlkU2NyaXB0Q2xhc3NvYmouQWRkVHJ1ZGl2X2Z1bmMoXCJhZHMubXcudmlkZW9pbnBhZ2VcIiwgW1sxLCAxXSwgWzEsIDJdLCAnZmx1aWQnXSwgMSk7XHJcbiAgICAgICAgfSAgICAgICBcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBpZiAoQWRVbml0UHJvcGVydGllc0NsYXNzT2JqLlNsb3RzWydhZHMubXcudmlkZW9pbnBhZ2UnXSkge1xyXG4gICAgICAgICAgdGhpcy5kZWZpbmVTbG90c1luZXNfZnVuYygnYWRzLm13LnZpZGVvaW5wYWdlJywgW1sxLCAxXSwgWzEsIDJdLCAnZmx1aWQnXSk7XHJcbiAgICAgICAgfSAgICAgICBcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgLy8gdGhpcy5kZWZpbmVTbG90c1luZXNfZnVuYyhcImFkcy5zdGlja3lcIiwgW1szNjAsIDUwXSwgWzMyMCwgNTBdXSk7IFxyXG4gICAgICAvLyBhZFVuaXRTdHlsZXNDbGFzc09ialtcImFkcy5zdGlja3lcIl0oXCJhZHMuc3RpY2t5XCIpO1xyXG5cclxuICAgICAgaWYgKHdpbmRvdy5kY0NHID09IFwiYXJ0aWNsZVwiKSB0aGlzLmFkZF9Ccm93c2lfaW5ob3VzZShcImVzcGFub2xcIik7XHJcblxyXG4gICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuZGVmaW5lU2xvdHNZbmVzX2Z1bmMoXCJhZHMudG9wXCIsIFtbOTcwLCAzNTBdLCBbOTcwLCA5MF0sIFsnZmx1aWQnXSwgWzk3MCwgMTAwXSwgWzk3MCwgMjUwXV0pO1xyXG4gICAgICBhZFVuaXRTdHlsZXNDbGFzc09ialtcImFkcy50b3BcIl0oXCJhZHMudG9wXCIpO1xyXG4gICAgICB0aGlzLmZpbmRBbGxEaXZfZnVuYygpO1xyXG4gICAgICBpZiAoQWRVbml0UHJvcGVydGllc0NsYXNzT2JqLlNsb3RzW1wiYWRzLm96ZW5fbGVmdFwiXSkge1xyXG4gICAgICAgIHRoaXMuZGVmaW5lU2xvdHNZbmVzX2Z1bmMoXCJhZHMub3plbl9sZWZ0XCIsIEFkVW5pdEFkZGl0aW9uYWxTdHlsZXNDbGFzcy5yZXNpemVPemVuWW5zWW52X2Z1bmMoKSk7XHJcbiAgICAgICAgYWRVbml0U3R5bGVzQ2xhc3NPYmpbXCJhZHMub3plbl9sZWZ0XCJdKFwiYWRzLm96ZW5fbGVmdFwiKTtcclxuICAgICAgfVxyXG4gICAgICBpZiAoQWRVbml0UHJvcGVydGllc0NsYXNzT2JqLlNsb3RzW1wiYWRzLm96ZW5fcmlnaHRcIl0pIHtcclxuICAgICAgICB0aGlzLmRlZmluZVNsb3RzWW5lc19mdW5jKFwiYWRzLm96ZW5fcmlnaHRcIiwgQWRVbml0QWRkaXRpb25hbFN0eWxlc0NsYXNzLnJlc2l6ZU96ZW5ZbnNZbnZfZnVuYygpKTtcclxuICAgICAgICBhZFVuaXRTdHlsZXNDbGFzc09ialtcImFkcy5vemVuX3JpZ2h0XCJdKFwiYWRzLm96ZW5fcmlnaHRcIik7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmICh0aGlzLmRjY2cgPT0gXCJhcnRpY2xlXCIgJiYgdGhpcy50cnV2aWRfZGVza3RvcCA9PSBcIlRydWVcIikge1xyXG4gICAgICAgIEFkVHJ1dmlkU2NyaXB0Q2xhc3NvYmouQWRkVHJ1ZGl2X2Z1bmMoXCJhZHMuZGlzcGxheS52aWRlb2lucGFnZS4xXCIsIFtbMSwgMV0sIFsyLCAxXSwgWydmbHVpZCddXSwgMSk7XHJcbiAgICAgIH0gXHJcblxyXG4gICAgICB0aGlzLmZpbmRBbGxEaXZfZnVuYygpO1xyXG5cclxuICAgICAgaWYgKHdpbmRvdy5kY0NHID09IFwiYXJ0aWNsZVwiKSB0aGlzLmFkZF9Ccm93c2lfaW5ob3VzZShcImVzcGFub2xcIik7XHJcblxyXG4gICAgICBsZXQgZ2VuZXJhbF9kaXZzID0gbmV3IEFycmF5KCk7XHJcbiAgICAgIGNvbnN0IGNsYXNzTmFtZSA9IGdlbmVyYWxfYmFubmVyc19kaXZzO1xyXG4gICAgICBjb25zdCBkaXZfc2l6ZXMgPSBnZW5lcmFsX2Jhbm5lcnNfZGl2c19zaXplcztcclxuICAgICAgY29uc3QgY2xhc3NuYW1lQ291bnQgPSBjbGFzc05hbWUubGVuZ3RoO1xyXG5cclxuICAgICAgaWYgKGNsYXNzTmFtZSAhPSBcIlwiKSB7XHJcbiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBjbGFzc25hbWVDb3VudDsgaisrKSB7XHJcbiAgICAgICAgICBjb25zdCBkaXZfc2l6ZSA9IGRpdl9zaXplc1tqXTtcclxuICAgICAgICAgIGNvbnN0IHdfZGl2ID0gZGl2X3NpemUuc3Vic3RyKDAsIGRpdl9zaXplLmluZGV4T2YoXCJ4XCIpKTtcclxuICAgICAgICAgIGNvbnN0IGhfZGl2ID0gZGl2X3NpemUuc3Vic3RyKGRpdl9zaXplLmluZGV4T2YoXCJ4XCIpICsgMSk7XHJcbiAgICAgICAgICBnZW5lcmFsX2RpdnMucHVzaChbXHJcbiAgICAgICAgICAgIGNsYXNzTmFtZVtqXSxcclxuICAgICAgICAgICAgcGFyc2VJbnQod19kaXYsIDEwKSxcclxuICAgICAgICAgICAgcGFyc2VJbnQoaF9kaXYsIDEwKVxyXG4gICAgICAgICAgXSk7XHJcbiAgICAgICAgICBpZiAoZ2VuZXJhbF9kaXZzW2pdWzBdID09IFwiYWRzLjMwMHgyNTAuMVwiKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGVmaW5lU2xvdHNfZnVuYyhnZW5lcmFsX2RpdnNbal1bMF0sIFtcclxuICAgICAgICAgICAgIFtnZW5lcmFsX2RpdnNbal1bMV0sIGdlbmVyYWxfZGl2c1tqXVsyXV0sXHJcbiAgICAgICAgICAgICAgWydmbHVpZCddXHJcbiAgICAgICAgICAgIF0pO1xyXG4gICAgICAgICAgfSBlbHNlIGlmIChnZW5lcmFsX2RpdnNbal1bMF0gPT0gXCJhZHMuZGlzcGxheS52aWRlb2lucGFnZS4xXCIpIHtcclxuICAgICAgICAgICAgdGhpcy5kZWZpbmVTbG90c1luZXNfZnVuYyhnZW5lcmFsX2RpdnNbal1bMF0gLCBbWzEsIDFdLCBbJ2ZsdWlkJ11dKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGVmaW5lU2xvdHNZbmVzX2Z1bmMoZ2VuZXJhbF9kaXZzW2pdWzBdLCBbXHJcbiAgICAgICAgICAgICAgZ2VuZXJhbF9kaXZzW2pdWzFdLFxyXG4gICAgICAgICAgICAgIGdlbmVyYWxfZGl2c1tqXVsyXVxyXG4gICAgICAgICAgICBdKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0gLy9lbmQgZWxzZVxyXG4gIH0gLy9lbmQgZGVmaW5lVW5pdHNZbmVzX2Z1bmNcclxuICBkZWZpbmVVbml0c015bmV0X2Z1bmMoKSB7XHJcbiAgICBMb2coXCJkZWZpbmVVbml0c015bmV0X2Z1bmNcIik7XHJcbiAgICBsZXQganNvbk9ial9kaWN0ID0gdGhpcy5qc29uT2JqO1xyXG4gICAgbGV0IHNob3dNYWFhdmFyb24gPSAwO1xyXG4gICAgZ29vZ2xldGFnLmNtZC5wdXNoKGZ1bmN0aW9uKCkge1xyXG4gICAgICBmb3IgKGxldCBrZXkgb2YgT2JqZWN0LmtleXMoanNvbk9ial9kaWN0KSkge1xyXG4gICAgICAgIGdvb2dsZXRhZy5wdWJhZHMoKS5zZXRUYXJnZXRpbmcoa2V5LCBqc29uT2JqX2RpY3Rba2V5XSk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgaWYgKHRoaXMuaW5uZXJXaWR0aCA8PSBcIjc2OFwiKSB7XHJcbiAgICAgIHRoaXMuZmluZEFsbERpdl9mdW5jKCk7XHJcbiAgICAgIHNob3dNYWFhdmFyb24gPSAxO1xyXG4gICAgICBpZiAoXHJcbiAgICAgICAgdGhpcy5nZXRVcmxWYXJzX2Z1bmMoXCJJc0FwcFwiKSA9PSBcIjFcIiB8fFxyXG4gICAgICAgIHRoaXMuZ2V0VXJsVmFyc19mdW5jKFwiSXNBcHBcIikgPT0gMSB8fFxyXG4gICAgICAgIHRoaXMuZ2V0VXJsVmFyc19mdW5jKFwiaXNhcHBcIikgPT0gXCIxXCIgfHxcclxuICAgICAgICB0aGlzLmdldFVybFZhcnNfZnVuYyhcImlzYXBwXCIpID09IDFcclxuICAgICAgKSB7XHJcbiAgICAgICAgc2hvd01hYWF2YXJvbiA9IDA7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKChzaG93TWFhYXZhcm9uID09IDEgJiYgQWRVbml0UHJvcGVydGllc0NsYXNzT2JqLlNsb3RzWydhZHMudHJhbnNpdGlvbiddICYmIChkb2N1bWVudC5yZWZlcnJlci5pbmNsdWRlcygnbXluZXQuY28uaWwnKSAmJiBkb2N1bWVudC5yZWZlcnJlci5pbmNsdWRlcygnL2FydGljbGUnKSkpIHx8IFxyXG4gICAgICAoc2hvd01hYWF2YXJvbiA9PSAxICYmIEFkVW5pdFByb3BlcnRpZXNDbGFzc09iai5TbG90c1snYWRzLnRyYW5zaXRpb24nXSAmJiB3aW5kb3cuZGNDRyA9PSAnYXJ0aWNsZScgJiYgZG9jdW1lbnQucmVmZXJyZXIuaW5jbHVkZXMoJ215bmV0LmNvLmlsJykpKSB7XHJcbiAgICAgICAgQWRVbml0UHJvcGVydGllc0NsYXNzT2JqLlRyYW5zID0gdHJ1ZTtcclxuICAgICAgaWYgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibWFhdmFyb25zdHlsZVwiKSAhPSBudWxsKSB7XHJcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJtYWF2YXJvbnN0eWxlXCIpLmlubmVySFRNTCA9IFwiXCI7XHJcbiAgICAgIH1cclxuICAgICAgICB0aGlzLmRlZmluZVNsb3RzTXluZXRfZnVuYyhcImFkcy50cmFuc2l0aW9uXCIsIFtbMSwgMV0sIFszMjAsIDQ4MF1dKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLk15bmV0SGVhZGVyTW9iaWxlQ29tcG9uZW50YScpKSB7XHJcbiAgICAgICAgICBsZXQgaGVhZGVyX2NvbXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuTXluZXRIZWFkZXJNb2JpbGVDb21wb25lbnRhJyk7XHJcbiAgICAgICAgICBsZXQgaW5ib3JkX2JpZ19kaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgIGluYm9yZF9iaWdfZGl2LnNldEF0dHJpYnV0ZSgnaWQnLCAnYWRzLjMyMHg0NTAnKTsgICAgIFxyXG4gICAgICAgICAgaW5ib3JkX2JpZ19kaXYuc2V0QXR0cmlidXRlKCdjbGFzcycsICczMjB4NDUwJyk7ICAgICAgXHJcbiAgICAgICAgICBoZWFkZXJfY29tcC5wcmVwZW5kKGluYm9yZF9iaWdfZGl2KTsgICAgICAgIFxyXG4gICAgICAgICAgbGV0IGluYm9yZF9zbWFsbF9kaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgIGluYm9yZF9zbWFsbF9kaXYuc2V0QXR0cmlidXRlKCdpZCcsICdhZHMuMzAweDEwMC5pbmJvcmQnKTtcclxuICAgICAgICAgIGhlYWRlcl9jb21wLnByZXBlbmQoaW5ib3JkX3NtYWxsX2Rpdik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuZGVmaW5lU2xvdHNNeW5ldF9mdW5jKFwiYWRzLjMyMHg0NTBcIiwgWzMyMCwgNDUwXSk7ICBcclxuXHJcbiAgICAgICAgSW5mcmFzcnVjdHVyZUNsYXNzT2JqLlNsb3RSZW5kZXJFbmQoZnVuY3Rpb24oZXZlbnQpIHtcclxuICAgICAgICAgIGxldCBUb3BMb2FkZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgaWYgKGV2ZW50LnNsb3QgPT0gQWRVbml0UHJvcGVydGllc0NsYXNzT2JqLkRlZmluZV9zbG90c1tcImFkcy4zMjB4NDUwXCJdKSB7XHJcbiAgICAgICAgICAgICAgaWYgKCFUb3BMb2FkZWQpIHsgIFxyXG4gICAgICAgICAgICAgICAgaWYoIWV2ZW50LmlzRW1wdHkpIHsgICBcclxuICAgICAgICAgICAgICAgICAgICB3aW5kb3cuQ2xvc2VCb3ggPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFkcy4zMjB4NDUwXCIpLnN0eWxlID0gXCJkaXNwbGF5Om5vbmU7XCI7IFxyXG4gICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Fkcy4zMjB4NDUwJykuaW5uZXJIVE1MID0gXCJcIjtcclxuICAgICAgICAgICAgICAgICAgICAgQWRVbml0RnVuY3Rpb25zQ2xhc3NPYmouTXluZXRfcmVuZGVyU21hbGxJbmJvcmQoKTtcclxuICAgICAgICAgICAgICAgICAgICB9ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgeyBcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBidXR0b21fd2lkdGggPSAzMDtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBidXR0b21faGVpZ2h0ID0gMzA7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYnV0dG9tX1VSTCA9IFwiLy90b3RhbG1lZGlhMi55bmV0LmNvLmlsL3BpYy8zMC0zMC5naWZcIjtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBidXR0b25jbG9zZSA9IFxyXG4gICAgICAgICAgICAgICAgICAgICc8aW1nIHN0eWxlPVwiY3Vyc29yOiBwb2ludGVyXCIgb25jbGljaz1cImphdmFzY3JpcHQ6Q2xvc2VCb3goKTtcIiAgc3JjPVwiJyArXHJcbiAgICAgICAgICAgICAgICAgICAgIGJ1dHRvbV9VUkwgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgJ1wiIHdpZHRoPVwiJyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgYnV0dG9tX3dpZHRoICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJ3B4XCIgaGVpZ2h0PVwiJyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICBidXR0b21faGVpZ2h0ICsgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAncHhcIiAvPic7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYnV0b29uRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnV0b29uRGl2LmlkID0gJ0JpZ2xpdmVib3hfQ2xvc2VfYnV0dG9uJztcclxuICAgICAgICAgICAgICAgICAgICBidXRvb25EaXYuaW5uZXJIVE1MID0gYnV0dG9uY2xvc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYWRzZGl2MyA9IHBhcmVudC5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFkcy4zMjB4NDUwXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGFkc2RpdjMuYXBwZW5kQ2hpbGQoYnV0b29uRGl2KTtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgYnV0b29uaWQgPSBwYXJlbnQuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYnV0b29uRGl2LmlkKTtcclxuICAgICAgICAgICAgICAgICAgICBidXRvb25pZC5zdHlsZS5wb3NpdGlvbiA9IFwiYWJzb2x1dGVcIjtcclxuICAgICAgICAgICAgICAgICAgICBidXRvb25pZC5zdHlsZS50b3AgPSAwICsgXCJweFwiO1xyXG4gICAgICAgICAgICAgICAgICAgIGJ1dG9vbmlkLnN0eWxlLnJpZ2h0ID0gMCArIFwicHhcIjtcclxuICAgICAgICAgICAgICAgICAgICBidXRvb25pZC5zdHlsZS53aWR0aCA9IFwiMzBweFwiO1xyXG4gICAgICAgICAgICAgICAgICAgIGJ1dG9vbmlkLnN0eWxlLmhlaWdodCA9IFwiMzBweFwiO1xyXG4gICAgICAgICAgICAgICAgICAgIGJ1dG9vbmlkLnN0eWxlLnpJbmRleCA9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgfSwgMTAwMCk7IFxyXG4gICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIEFkVW5pdEZ1bmN0aW9uc0NsYXNzT2JqLk15bmV0X3JlbmRlclNtYWxsSW5ib3JkKCk7XHJcbiAgICAgICAgICAgICAgICAgIH0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIFRvcExvYWRlZD10cnVlO1xyXG4gICAgICAgICAgICAgIH0gICAgXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pOyBcclxuICAgIFxyXG4gICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgaWYgKGV2ZW50LmRhdGEuZXZlbnROYW1lID09PSAnaW5ib2FyZGNsc29lZCcpIHtcclxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiQmlnbGl2ZWJveF9DbG9zZV9idXR0b25cIikuc3R5bGUgPSBcImRpc3BsYXk6IG5vbmVcIjsgXHJcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFkcy4zMjB4NDUwXCIpLnN0eWxlID0gXCJkaXNwbGF5Om5vbmU7XCI7IFxyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Fkcy4zMjB4NDUwJykuaW5uZXJIVE1MID0gXCJcIjtcclxuICAgICAgICAgICAgICAgIEFkVW5pdEZ1bmN0aW9uc0NsYXNzT2JqLk15bmV0X3JlbmRlclNtYWxsSW5ib3JkKCk7ICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICB9LCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICBsZXQgYmlnbGl2ZWJveF9zbG90ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhZHMuMzIweDQ1MFwiKTtcclxuICAgICAgICBpZiAoYmlnbGl2ZWJveF9zbG90ICE9IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgYmlnbGl2ZWJveF9zbG90LnNldEF0dHJpYnV0ZShcInN0eWxlXCIsXCJtYXJnaW46NjVweCAwIC0ycHggMDsgcG9zaXRpb246IHJlbGF0aXZlO2Rpc3BsYXk6ZmxleDtqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyO2Rpc3BsYXk6LXdlYmtpdC1ib3g7LXdlYmtpdC1ib3gtcGFjazpjZW50ZXI7ZGlzcGxheTotbXMtZmxleGJveDstbXMtZmxleC1wYWNrOmNlbnRlcjt0ZXh0LWFsaWduOmNlbnRlcjt3aWR0aDoxMDAlO1wiKTsgXHJcbiAgICAgICAgIH0gXHJcbiAgICAgICAgXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmICh0aGlzLmRjY2cgPT0gXCJhcnRpY2xlXCIpIHtcclxuICAgICAgICBpZiAodGhpcy50cnV2aWRfbW9iaWxlID09IFwiVHJ1ZVwiKSB7XHJcbiAgICAgICAgQWRUcnV2aWRTY3JpcHRDbGFzc29iai5BZGRUcnVkaXZfZnVuYyhcImFkcy5kaXNwbGF5LnZpZGVvaW5wYWdlLjFcIiwgW1sxLCAxXSwgWzIsIDFdLCBbJ2ZsdWlkJ11dLCAxKTtcclxuICAgICAgICB9ICAgICAgIFxyXG4gICAgICB9IFxyXG4gICAgXHJcbiAgICAgIHRoaXMuZGVmaW5lU2xvdHNNeW5ldF9mdW5jKFwiYWRzLnN0aWNreVwiLCBbWzMyMCwgNTBdLCBbMzYwLCA1MF1dKTtcclxuICAgICAgYWRVbml0U3R5bGVzQ2xhc3NPYmpbXCJhZHMuc3RpY2t5XCJdKFwiYWRzLnN0aWNreVwiKTtcclxuXHJcbiAgICAgIHRoaXMuZmluZEFsbERpdl9mdW5jKCk7XHJcbiAgICAgIGZvciAobGV0IGsgPSAxOyBrIDwgMTA7IGsrKykge1xyXG4gICAgICAgIGxldCBhZHNfbmFtZSA9IFwiYWRzLjMwMHgyNTAuXCIgKyBrO1xyXG4gICAgICAgIGxldCBiYW5uZXJfYm94ID0gQWRVbml0UHJvcGVydGllc0NsYXNzT2JqLlNsb3RzW2Fkc19uYW1lXTtcclxuICAgICAgICBpZiAoYmFubmVyX2JveCkge1xyXG4gICAgICAgICAgdGhpcy5kZWZpbmVTbG90c015bmV0X2Z1bmMoYWRzX25hbWUsIFszMDAsIDI1MF0pO1xyXG4gICAgICAgICAgYmFubmVyX2JveC5zZXRBdHRyaWJ1dGUoXCJzdHlsZVwiLCBcImRpc3BsYXk6ZmxleDsganVzdGlmeS1jb250ZW50OmNlbnRlcjsgZGlzcGxheTotd2Via2l0LWJveDsgLXdlYmtpdC1ib3gtcGFjazpjZW50ZXI7IGRpc3BsYXk6LW1zLWZsZXhib3g7IC1tcy1mbGV4LXBhY2s6Y2VudGVyOyB0ZXh0LWFsaWduOmNlbnRlcjsgd2lkdGg6MTAwJTtcIik7IFxyXG4gICAgICAgIH0gICAgICAgXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmICh3aW5kb3cuZGNDRyA9PSBcImFydGljbGVcIikgdGhpcy5hZGRfQnJvd3NpX2luaG91c2UoXCJteW5ldFwiKTtcclxuXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLmRlZmluZVNsb3RzTXluZXRfZnVuYyhcImFkcy50b3BcIiwgW1s5NzAsIDI1MF0sIFs5NzAsIDkwXSwgWzk3MCwgMTAwXSwgWzEsIDFdLCBbOTcwLCAzNTBdXSk7XHJcbiAgICAgIGFkVW5pdFN0eWxlc0NsYXNzT2JqW1wiYWRzLnRvcFwiXShcImFkcy50b3BcIik7XHJcbiAgICAgIFxyXG4gICAgICB0aGlzLmZpbmRBbGxEaXZfZnVuYygpO1xyXG5cclxuICAgICAgaWYgKHRoaXMuZGNjZyA9PSBcImFydGljbGVcIiAmJiB0aGlzLnRydXZpZF9kZXNrdG9wID09IFwiVHJ1ZVwiKSB7XHJcbiAgICAgICAgQWRUcnV2aWRTY3JpcHRDbGFzc29iai5BZGRUcnVkaXZfZnVuYyhcImFkcy5kaXNwbGF5LnZpZGVvaW5wYWdlLjFcIiwgW1sxLCAxXSwgWzIsIDFdLCBbJ2ZsdWlkJ11dLCAxKTtcclxuICAgICAgfSAgXHJcbiAgICAgIGlmIChBZFVuaXRQcm9wZXJ0aWVzQ2xhc3NPYmouU2xvdHNbXCJhZHMub3plbl9yaWdodFwiXSkge1xyXG4gICAgICAgIGlmICh3aW5kb3cuaW5uZXJXaWR0aCA+IDEzNTApIHtcclxuICAgICAgICB0aGlzLmRlZmluZVNsb3RzTXluZXRfZnVuYyhcImFkcy5vemVuX3JpZ2h0XCIsIEFkVW5pdEFkZGl0aW9uYWxTdHlsZXNDbGFzcy5yZXNpemVPemVuWW5zWW52X2Z1bmMoKSk7XHJcbiAgICAgICAgYWRVbml0U3R5bGVzQ2xhc3NPYmpbXCJhZHMub3plbl9yaWdodFwiXShcImFkcy5vemVuX3JpZ2h0XCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBpZiAoQWRVbml0UHJvcGVydGllc0NsYXNzT2JqLlNsb3RzW1wiYWRzLm96ZW5fbGVmdFwiXSkge1xyXG4gICAgICAgIHRoaXMuZGVmaW5lU2xvdHNNeW5ldF9mdW5jKFwiYWRzLm96ZW5fbGVmdFwiLCBBZFVuaXRBZGRpdGlvbmFsU3R5bGVzQ2xhc3MucmVzaXplT3plblluc1ludl9mdW5jKCkpO1xyXG4gICAgICAgIGFkVW5pdFN0eWxlc0NsYXNzT2JqW1wiYWRzLm96ZW5fbGVmdFwiXShcImFkcy5vemVuX2xlZnRcIik7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHRoaXMuZmluZEFsbERpdl9mdW5jKCk7XHJcblxyXG4gICAgICBpZiAod2luZG93LmRjQ0cgPT0gXCJhcnRpY2xlXCIpIHRoaXMuYWRkX0Jyb3dzaV9pbmhvdXNlKFwibXluZXRcIik7XHJcblxyXG4gICAgICBsZXQgZ2VuZXJhbF9kaXZzID0gbmV3IEFycmF5KCk7XHJcbiAgICAgIGNvbnN0IGNsYXNzTmFtZSA9IGdlbmVyYWxfYmFubmVyc19kaXZzO1xyXG4gICAgICBjb25zdCBkaXZfc2l6ZXMgPSBnZW5lcmFsX2Jhbm5lcnNfZGl2c19zaXplcztcclxuICAgICAgY29uc3QgY2xhc3NuYW1lQ291bnQgPSBjbGFzc05hbWUubGVuZ3RoO1xyXG5cclxuICAgICAgaWYgKGNsYXNzTmFtZSAhPSBcIlwiKSB7XHJcbiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBjbGFzc25hbWVDb3VudDsgaisrKSB7XHJcbiAgICAgICAgICBjb25zdCBkaXZfc2l6ZSA9IGRpdl9zaXplc1tqXTtcclxuICAgICAgICAgIGNvbnN0IHdfZGl2ID0gZGl2X3NpemUuc3Vic3RyKDAsIGRpdl9zaXplLmluZGV4T2YoXCJ4XCIpKTtcclxuICAgICAgICAgIGNvbnN0IGhfZGl2ID0gZGl2X3NpemUuc3Vic3RyKGRpdl9zaXplLmluZGV4T2YoXCJ4XCIpICsgMSk7XHJcbiAgICAgICAgICBnZW5lcmFsX2RpdnMucHVzaChbXHJcbiAgICAgICAgICAgIGNsYXNzTmFtZVtqXSxcclxuICAgICAgICAgICAgcGFyc2VJbnQod19kaXYsIDEwKSxcclxuICAgICAgICAgICAgcGFyc2VJbnQoaF9kaXYsIDEwKVxyXG4gICAgICAgICAgXSk7XHJcbiAgICAgICAgICBpZiAoZ2VuZXJhbF9kaXZzW2pdWzBdID09IFwiYWRzLm1hcmtldGluZ19vcmRlcmluZ1wiKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGVmaW5lU2xvdHNNeW5ldF9mdW5jKGdlbmVyYWxfZGl2c1tqXVswXSAsIFtbMSwgMV0sIFsnZmx1aWQnXV0pO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5kZWZpbmVTbG90c015bmV0X2Z1bmMoZ2VuZXJhbF9kaXZzW2pdWzBdLCBbXHJcbiAgICAgICAgICAgICAgZ2VuZXJhbF9kaXZzW2pdWzFdLFxyXG4gICAgICAgICAgICAgIGdlbmVyYWxfZGl2c1tqXVsyXVxyXG4gICAgICAgICAgICBdKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgaWYgKEFkVW5pdFByb3BlcnRpZXNDbGFzc09iai5TbG90c1tcImFkcy5pbnJlYWRcIl0pIHtcclxuICAgICAgICB0aGlzLmRlZmluZVNsb3RzTXluZXRfZnVuYyhcImFkcy5pbnJlYWRcIiwgWydmbHVpZCddLCBcIlwiLCBcIlwiKTtcclxuICAgICAgfVxyXG4gICAgICBpZiAoQWRVbml0UHJvcGVydGllc0NsYXNzT2JqLlNsb3RzW1wiYWRzLmFib3ZlY29tbWVudHNcIl0pIHtcclxuICAgICAgICB0aGlzLmRlZmluZVNsb3RzTXluZXRfZnVuYyhcImFkcy5hYm92ZWNvbW1lbnRzXCIsIFsnZmx1aWQnXSwgXCJcIiwgXCJcIik7XHJcbiAgICAgIH1cclxuICAgIH0gLy9lbmQgZWxzZVxyXG4gIH0gLy9lbmQgZGVmaW5lVW5pdHNNeW5ldF9mdW5jXHJcbiAgZGVmaW5lVW5pdHNZbnNfZnVuYygpIHtcclxuICAgIExvZyhcImRlZmluZVVuaXRzWW5zX2Z1bmNcIik7XHJcbiAgICBsZXQganNvbk9ial9kaWN0ID0gdGhpcy5qc29uT2JqO1xyXG4gICAgbGV0IHNob3dNYWFhdmFyb24gPSAwO1xyXG4gICAgZ29vZ2xldGFnLmNtZC5wdXNoKGZ1bmN0aW9uKCkge1xyXG4gICAgICBmb3IgKGxldCBrZXkgb2YgT2JqZWN0LmtleXMoanNvbk9ial9kaWN0KSkge1xyXG4gICAgICAgIGdvb2dsZXRhZy5wdWJhZHMoKS5zZXRUYXJnZXRpbmcoa2V5LCBqc29uT2JqX2RpY3Rba2V5XSk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgaWYgKHRoaXMuaW5uZXJXaWR0aCA8PSBcIjc2OFwiKSB7XHJcbiAgICAgIHRoaXMuZmluZEFsbERpdl9mdW5jKCk7XHJcbiAgICAgIHNob3dNYWFhdmFyb24gPSAwOyAvLyBjbG9zZWQgZnJvbSAxOS4wNi4yMiAtIGluc3RlYWQgaXQgd2UgcHV0IGludGVyc3RpdGlhbC5hZHggZnJvbSBwaXhlbCBzY3JlZW5cclxuICAgICAgLy8gaWYgKFxyXG4gICAgICAvLyAgIHRoaXMuZ2V0VXJsVmFyc19mdW5jKFwiSXNBcHBcIikgPT0gXCIxXCIgfHxcclxuICAgICAgLy8gICB0aGlzLmdldFVybFZhcnNfZnVuYyhcIklzQXBwXCIpID09IDEgfHxcclxuICAgICAgLy8gICB0aGlzLmdldFVybFZhcnNfZnVuYyhcImlzYXBwXCIpID09IFwiMVwiIHx8XHJcbiAgICAgIC8vICAgdGhpcy5nZXRVcmxWYXJzX2Z1bmMoXCJpc2FwcFwiKSA9PSAxXHJcbiAgICAgIC8vICkge1xyXG4gICAgICAvLyAgIHNob3dNYWFhdmFyb24gPSAwO1xyXG4gICAgICAvLyB9XHJcbiAgICAgIC8vIGlmICgoc2hvd01hYWF2YXJvbiA9PSAxICYmIEFkVW5pdFByb3BlcnRpZXNDbGFzc09iai5TbG90c1t0aGlzLk1hYXZhcm9uX21vYmlsZV9WTl0gJiYgZG9jdW1lbnQucmVmZXJyZXIuaW5jbHVkZXMoJ3luZXRuZXdzLmNvbS9hcnRpY2xlJykpIHx8IFxyXG4gICAgICAvLyAoc2hvd01hYWF2YXJvbiA9PSAxICYmIEFkVW5pdFByb3BlcnRpZXNDbGFzc09iai5TbG90c1t0aGlzLk1hYXZhcm9uX21vYmlsZV9WTl0gJiYgZG9jdW1lbnQucmVmZXJyZXIuaW5jbHVkZXMoJ3luZXRuZXdzLmNvbS9hcnRpY2xlcycpKSB8fFxyXG4gICAgICAvLyAoc2hvd01hYWF2YXJvbiA9PSAxICYmIEFkVW5pdFByb3BlcnRpZXNDbGFzc09iai5TbG90c1t0aGlzLk1hYXZhcm9uX21vYmlsZV9WTl0gJiYgd2luZG93LmRjQ0cgPT0gJ2FydGljbGUnICYmIGRvY3VtZW50LnJlZmVycmVyLmluY2x1ZGVzKCd5bmV0bmV3cy5jb20nKSkpIHtcclxuICAgICAgLy8gICBBZFVuaXRQcm9wZXJ0aWVzQ2xhc3NPYmouVHJhbnMgPSB0cnVlO1xyXG4gICAgICAvLyAgIGlmIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm1hYXZhcm9uc3R5bGVcIikgIT0gbnVsbCkge1xyXG4gICAgICAvLyAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJtYWF2YXJvbnN0eWxlXCIpLmlubmVySFRNTCA9IFwiXCI7XHJcbiAgICAgIC8vICAgfVxyXG4gICAgICAvLyAgIHRoaXMuZGVmaW5lU2xvdHNZbnNfZnVuYyh0aGlzLk1hYXZhcm9uX21vYmlsZV9WTiwgW1sxLCAxXSwgWzMyMCwgNDgwXV0pO1xyXG4gICAgICAvLyB9IGVsc2Uge1xyXG4gICAgICB0aGlzLmRlZmluZVNsb3RzWW5zX2Z1bmModGhpcy5iaWdsaXZlYm94LCBbWzMyMCwgMTAwXSwgWzMzNiwgMjgwXSwgJ2ZsdWlkJywgWzMyMCwgMV0sIFszMDAsIDI1MF0sIFszMjAsIDEyMF0sIFszMjAsIDQ1MF0sIFsxLCAxXV0pO1xyXG4gICAgICBhZFVuaXRTdHlsZXNDbGFzc09ialtcImFkcy5tdy5iaWdsaXZlYm94XCJdKFwiYWRzLm13LmJpZ2xpdmVib3hcIik7ICAgICAgICAgICAgIFxyXG4gICAgIC8vIH1cclxuXHJcbiAgICAgIHRoaXMuZGVmaW5lU2xvdHNZbnNfZnVuYyh0aGlzLnN0aWNreSwgW1szMjAsIDUwXSwgWzMyMCwgMTAwXSwgWzM2MCwgNTBdXSk7XHJcbiAgICAgIGFkVW5pdFN0eWxlc0NsYXNzT2JqW1wiYWRzLnN0aWNreVwiXShcImFkcy5zdGlja3lcIik7XHJcblxyXG4gICAgICBpZiAod2luZG93LmRjQ0cgPT0gXCJhcnRpY2xlXCIpIHRoaXMuYWRkX0Jyb3dzaV9pbmhvdXNlKFwieW5ld3NcIik7XHJcblxyXG4gICAgICBpZiAodGhpcy5kY2NnID09IFwiYXJ0aWNsZVwiKSB7XHJcbiAgICAgICAgaWYgKHRoaXMudHJ1dmlkX21vYmlsZSA9PSBcIlRydWVcIikge1xyXG4gICAgICAgICAgQWRUcnV2aWRTY3JpcHRDbGFzc29iai5BZGRUcnVkaXZfZnVuYyhcImFkcy5tdy52aWRlb2lucGFnZVwiLCBbWzEsIDFdLCBbMSwgMl0sICdmbHVpZCddLCAxKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMubmV3TWVkaWEgPT0gXCJUcnVlXCIpIHtcclxuICAgICAgICAgIGlmIChBZFVuaXRQcm9wZXJ0aWVzQ2xhc3NPYmouU2xvdHNbXCJhZHMuYm94LjNcIl0gIT0gbnVsbCAmJiBBZFVuaXRQcm9wZXJ0aWVzQ2xhc3NPYmouU2xvdHNbXCJhZHMuYm94LjNcIl0gIT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIGlmIChBZFVuaXRQcm9wZXJ0aWVzQ2xhc3NPYmouU2xvdHNbXCJhZHMuMzAweDI1MC4zXCJdICE9IG51bGwgJiYgQWRVbml0UHJvcGVydGllc0NsYXNzT2JqLlNsb3RzW1wiYWRzLjMwMHgyNTAuM1wiXSAhPSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFkcy4zMDB4MjUwLjNcIikucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgIH0gICAgICAgICAgIFxyXG4gICAgICAgICAgICBsZXQgYm94XzMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFkcy5ib3guM1wiKTtcclxuICAgICAgICAgICAgYm94XzMuc2V0QXR0cmlidXRlKFwic3R5bGVcIiwgXCJkaXNwbGF5OmZsZXg7IGp1c3RpZnktY29udGVudDpjZW50ZXI7IGRpc3BsYXk6LXdlYmtpdC1ib3g7IC13ZWJraXQtYm94LXBhY2s6Y2VudGVyOyBkaXNwbGF5Oi1tcy1mbGV4Ym94OyAtbXMtZmxleC1wYWNrOmNlbnRlcjsgdGV4dC1hbGlnbjpjZW50ZXIgIWltcG9ydGFudDsgd2lkdGg6MzAwcHg7IGhlaWdodDogMjUwcHg7IG1hcmdpbjogMCBhdXRvO1wiKTsgXHJcbiAgICAgICAgICAgIHRoaXMuZGVmaW5lU2xvdHNZbnNfZnVuYyhcImFkcy5ib3guM1wiLCBbMzAwLCAyNTBdKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGlmICgoQWRVbml0UHJvcGVydGllc0NsYXNzT2JqLlNsb3RzW1wiYWRzLjMwMHgyNTAuM1wiXSAhPSBudWxsICYmIEFkVW5pdFByb3BlcnRpZXNDbGFzc09iai5TbG90c1tcImFkcy4zMDB4MjUwLjNcIl0gIT0gdW5kZWZpbmVkKSAmJlxyXG4gICAgICAgICAgICAgKEFkVW5pdFByb3BlcnRpZXNDbGFzc09iai5TbG90c1tcImFkcy5ib3guM1wiXSA9PSBudWxsICYmIEFkVW5pdFByb3BlcnRpZXNDbGFzc09iai5TbG90c1tcImFkcy5ib3guM1wiXSA9PSB1bmRlZmluZWQpKSB7XHJcbiAgICAgICAgICAgIGxldCBkaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFkcy4zMDB4MjUwLjNcIik7XHJcbiAgICAgICAgICAgIGxldCBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgICAgIGVsLmlkID0gXCJhZHMuYm94LjNcIjtcclxuICAgICAgICAgICAgZGl2LnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGVsLCBkaXYubmV4dFNpYmxpbmcpO1xyXG4gICAgICAgICAgICB0aGlzLmRlZmluZVNsb3RzWW5zX2Z1bmMoXCJhZHMuYm94LjNcIiwgWzMwMCwgMjUwXSk7XHJcbiAgICAgICAgICAgIGRpdi5yZW1vdmUoKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9ICBlbHNlIHtcclxuICAgICAgICAgICBpZiAoQWRVbml0UHJvcGVydGllc0NsYXNzT2JqLlNsb3RzW1wiYWRzLjMwMHgyNTAuM1wiXSkge1xyXG4gICAgICAgICAgIHRoaXMuZGVmaW5lU2xvdHNZbnNfZnVuYyhcImFkcy4zMDB4MjUwLjNcIiwgWzMwMCwgMjUwXSk7XHJcbiAgICAgICAgICB9ICBcclxuICAgICAgICB9ICAgIFxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGlmIChBZFVuaXRQcm9wZXJ0aWVzQ2xhc3NPYmouU2xvdHNbJ2Fkcy5tdy52aWRlb2lucGFnZSddKSB7XHJcbiAgICAgICAgICB0aGlzLmRlZmluZVNsb3RzWW5zX2Z1bmMoJ2Fkcy5tdy52aWRlb2lucGFnZScsIFtbMSwgMV0sIFsxLCAyXSwgJ2ZsdWlkJ10pO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgbGV0IHluZXRuZXdzX25ld2dyaWQgPSAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5oQ29udGFpbmVyLmdyaWQxMjgwXzIueW5ldG5ld3NcIikpID8gdHJ1ZSA6IGZhbHNlO1xyXG4gICAgICBpZiAoeW5ldG5ld3NfbmV3Z3JpZCkge1xyXG4gICAgICAgIHRoaXMuZGVmaW5lU2xvdHNZbnNfZnVuYyhcImFkcy50b3BcIiwgW1sxLCAxXSwgWzEsIDJdLCBbOTcwLCA5MF0sIFs5NzAsIDI1MF0sIFsxMDAwLCAyMDBdLCBbOTcwLCAxMzBdLCBbOTcwLCAzNTBdLCBbOTcwLCAxMDBdLCBbMTE5MiwgMjUwXSwgWzExOTIsIDM1MF0sIFsxMTkyLCA5MF0sIFsxMTkyLCAxMDBdLCBbMTE5MiwgMTMwXV0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGxldCBUb3BMb2FkZWQgPSBmYWxzZTtcclxuICAgICAgICBJbmZyYXNydWN0dXJlQ2xhc3NPYmouU2xvdFJlbmRlckVuZChmdW5jdGlvbihldmVudCkge1xyXG4gICAgICAgIGlmIChldmVudC5zbG90ID09IEFkVW5pdFByb3BlcnRpZXNDbGFzc09iai5EZWZpbmVfc2xvdHNbXCJhZHMudG9wXCJdKSB7XHJcbiAgICAgICAgICBpZiAoIVRvcExvYWRlZCkge1xyXG4gICAgICAgICAgICBpZiAoIWV2ZW50LmlzRW1wdHkpIHtcclxuICAgICAgICAgICAgICBsZXQgZXZlbnRfc2l6ZSA9IGV2ZW50LnNpemUgKyBcIlwiO1xyXG4gICAgICAgICAgICAgIGxldCBldmVudF93ID0gZXZlbnRfc2l6ZS5zcGxpdChcIixcIik7ICAgICAgICAgXHJcbiAgICAgICAgICAgICAgaWYgKGV2ZW50X3dbMF0gPT0gXCIxMTkyXCIpIHtcclxuICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhZHMudG9wXCIpLnNldEF0dHJpYnV0ZShcInN0eWxlXCIsIFwiYmFja2dyb3VuZC1jb2xvcjogcmdiKDIzMywgMjMzLCAyMzMpOyBjbGVhcjogYm90aDsgbWluLWhlaWdodDogYXV0byAhaW1wb3J0YW50OyB0ZXh0LWFsaWduOmNlbnRlcjsgcGFkZGluZzogMDsgd2lkdGg6IDEyMDJweDsgbWFyZ2luOiAwcHggYXV0bzsgYm9yZGVyOiA1cHggc29saWQgcmdiKDIzMywgMjMzLCAyMzMpOyBib3gtc2l6aW5nOiBib3JkZXItYm94O1wiKTtcclxuICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgbGV0IHdpZHRoX3RvcCA9IChldmVudF93WzBdID09IFwiMVwiIHx8IGV2ZW50X3NpemUgPT0gXCJmbHVpZFwiKSA/IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYWRzLnRvcFwiKS5vZmZzZXRXaWR0aCA6IHBhcnNlSW50KGV2ZW50X3dbMF0sIDEwKTsgXHJcbiAgICAgICAgICAgICAgICBpZiAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ5Ym94aW1nXCIpKSB7XHJcbiAgICAgICAgICAgICAgICAgIHdpZHRoX3RvcCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwieWJveGltZ1wiKS5vZmZzZXRXaWR0aDtcclxuICAgICAgICAgICAgICAgIH0gICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhZHMudG9wXCIpLnNldEF0dHJpYnV0ZShcInN0eWxlXCIsIFwiY2xlYXI6IGJvdGg7IG1pbi1oZWlnaHQ6IGF1dG8gIWltcG9ydGFudDsgdGV4dC1hbGlnbjpjZW50ZXI7IHBhZGRpbmc6IDAgIWltcG9ydGFudDsgd2lkdGg6IFwiICsgcGFyc2VJbnQod2lkdGhfdG9wKzEwKSArIFwicHggIWltcG9ydGFudDtcIiArIFwibWFyZ2luOiAwcHggYXV0bzsgYm9yZGVyOiA1cHggc29saWQgcmdiKDIzMywgMjMzLCAyMzMpOyBib3gtc2l6aW5nOiBib3JkZXItYm94O1wiKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAgICAgZXZlbnQuc2l6ZSA9PSBcIjk3MCwxMzBcIiB8fFxyXG4gICAgICAgICAgICAgICAgZXZlbnQuc2l6ZSA9PSBcIjk3MCw5MFwiIHx8XHJcbiAgICAgICAgICAgICAgICBldmVudC5zaXplID09IFwiOTgwLDEwMFwiIHx8XHJcbiAgICAgICAgICAgICAgICBldmVudC5zaXplID09IFwiMTE5Miw5MFwiIHx8XHJcbiAgICAgICAgICAgICAgICBldmVudC5zaXplID09IFwiMTE5MiwxMzBcIiB8fFxyXG4gICAgICAgICAgICAgICAgZXZlbnQuc2l6ZSA9PSBcIjEwMDUsMTI0XCJcclxuICAgICAgICAgICAgICApIHtcclxuICAgICAgICAgICAgICAgIEFkVW5pdEZ1bmN0aW9uc0NsYXNzT2JqLmZpbmRBbGxEaXZfZnVuYygpO1xyXG4gICAgICAgICAgICAgICAgTWFpbkZ1bmN0aW9uQ2xhc3NPYmouZ2V0U3R5bGVUb3BfZnVuYyhldmVudCk7ICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgIH0gXHJcbiAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgVG9wTG9hZGVkID0gdHJ1ZTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgICBcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLmRlZmluZVNsb3RzWW5zX2Z1bmMoXCJhZHMudG9wXCIsIFtbNzcwLCAzNTBdLCBbOTcwLCAzNTBdLCBbNzcwLCA2MV0sIFsnZmx1aWQnXSwgWzEsIDFdLCBbOTcwLCAyNTBdLCBbOTcwLCA5MF0sIFs3NTAsIDIwMF1dKTtcclxuICAgICAgfSAgICAgXHJcbiAgICAgIGFkVW5pdFN0eWxlc0NsYXNzT2JqW1wiYWRzLnRvcFwiXShcImFkcy50b3BcIik7XHJcblxyXG4gICAgICB0aGlzLmZpbmRBbGxEaXZfZnVuYygpO1xyXG5cclxuICAgICAgaWYgKHdpbmRvdy5kY0NHID09IFwiYXJ0aWNsZVwiKSB0aGlzLmFkZF9Ccm93c2lfaW5ob3VzZShcInluZXdzXCIpO1xyXG5cclxuICAgICAgbGV0IG9sZF9kaXZzID0gbmV3IEFycmF5KCk7XHJcbiAgICAgIGxldCBuZXdfZGl2cyA9IG5ldyBBcnJheSgpO1xyXG4gICAgICBsZXQgZ2VuZXJhbF9kaXZzID0gbmV3IEFycmF5KCk7XHJcbiAgICAgIGNvbnN0IGNsYXNzTmFtZSA9IGdlbmVyYWxfYmFubmVyc19kaXZzO1xyXG4gICAgICBjb25zdCBkaXZfc2l6ZXMgPSBnZW5lcmFsX2Jhbm5lcnNfZGl2c19zaXplcztcclxuICAgICAgY29uc3QgY2xhc3NuYW1lQ291bnQgPSBjbGFzc05hbWUubGVuZ3RoO1xyXG5cclxuICAgICAgaWYgKGNsYXNzTmFtZSAhPSBcIlwiKSB7XHJcbiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBjbGFzc25hbWVDb3VudDsgaisrKSB7XHJcbiAgICAgICAgICBjb25zdCBkaXZfc2l6ZSA9IGRpdl9zaXplc1tqXTtcclxuICAgICAgICAgIGNvbnN0IHdfZGl2ID0gZGl2X3NpemUuc3Vic3RyKDAsIGRpdl9zaXplLmluZGV4T2YoXCJ4XCIpKTtcclxuICAgICAgICAgIGNvbnN0IGhfZGl2ID0gZGl2X3NpemUuc3Vic3RyKGRpdl9zaXplLmluZGV4T2YoXCJ4XCIpICsgMSk7XHJcbiAgICAgICAgICBnZW5lcmFsX2RpdnMucHVzaChbXHJcbiAgICAgICAgICAgIGNsYXNzTmFtZVtqXSxcclxuICAgICAgICAgICAgcGFyc2VJbnQod19kaXYsIDEwKSxcclxuICAgICAgICAgICAgcGFyc2VJbnQoaF9kaXYsIDEwKVxyXG4gICAgICAgICAgXSk7XHJcblxyXG4gICAgICAgICAgaWYgKHRoaXMubmV3TWVkaWEgPT0gXCJUcnVlXCIpIHtcclxuICAgICAgICAgICAgb2xkX2RpdnMucHVzaChcImFkcy4zMDB4MjUwLjFcIiwgXCJhZHMuMzAweDI1MC4yXCIsIFwiYWRzLjMwMHgyNTAuM1wiKTtcclxuICAgICAgICAgICAgbmV3X2RpdnMucHVzaChcImFkcy5ib3guMVwiLCBcImFkcy5ib3guMlwiLCBcImFkcy5ib3guM1wiKTtcclxuXHJcbiAgICAgICAgICAgIGdlbmVyYWxfZGl2cy5tYXAoZnVuY3Rpb24gKGdkKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgaW5kZXggPSBvbGRfZGl2cy5pbmRleE9mKGdkWzBdKTtcclxuICAgICAgICAgICAgICAgIGlmIChpbmRleD4tMSkgeyAgICBcclxuICAgICAgICAgICAgICAgICAgZ2RbMF0gPSBuZXdfZGl2c1tpbmRleF07XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICBpZiAoZ2VuZXJhbF9kaXZzW2pdWzBdID09IFwiYWRzLnNsaWRlci4xXCIpIHtcclxuICAgICAgICAgICAgdGhpcy5kZWZpbmVTbG90c1luc19mdW5jKGdlbmVyYWxfZGl2c1tqXVswXSwgWzEsIDFdKTtcclxuICAgICAgICAgIH0gZWxzZSBpZiAoZ2VuZXJhbF9kaXZzW2pdWzBdID09IFwiYWRzLmRpc3BsYXkudmlkZW9pbnBhZ2UuMVwiKSB7XHJcbiAgICAgICAgICAgIGxldCB2aWRlb2lucGFnZV9zaXplcyA9ICB5bmV0bmV3c19uZXdncmlkID8gW1sxLCAxXSwgWzEsIDJdLCBbNjEwLCAzMDBdLCBbJ2ZsdWlkJ11dIDogW1sxLCAxXSwgWydmbHVpZCddXTtcclxuICAgICAgICAgICAgdGhpcy5kZWZpbmVTbG90c1luc19mdW5jKGdlbmVyYWxfZGl2c1tqXVswXSAsIHZpZGVvaW5wYWdlX3NpemVzKTsgXHJcbiAgICAgICAgICB9IGVsc2UgaWYgKGdlbmVyYWxfZGl2c1tqXVswXSA9PSBcImFkcy5ib3guMlwiICYmIHluZXRuZXdzX25ld2dyaWQpIHtcclxuICAgICAgICAgICAgdGhpcy5kZWZpbmVTbG90c1luc19mdW5jKGdlbmVyYWxfZGl2c1tqXVswXSAsIFtbZ2VuZXJhbF9kaXZzW2pdWzFdLCBnZW5lcmFsX2RpdnNbal1bMl1dLCBbJ2ZsdWlkJ11dKTsgXHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmRlZmluZVNsb3RzWW5zX2Z1bmMoZ2VuZXJhbF9kaXZzW2pdWzBdLCBbXHJcbiAgICAgICAgICAgICAgZ2VuZXJhbF9kaXZzW2pdWzFdLFxyXG4gICAgICAgICAgICAgIGdlbmVyYWxfZGl2c1tqXVsyXVxyXG4gICAgICAgICAgICBdKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmICh0aGlzLmRjY2cgPT0gXCJhcnRpY2xlXCIgJiYgdGhpcy50cnV2aWRfZGVza3RvcCA9PSBcIlRydWVcIikge1xyXG4gICAgICAgIEFkVHJ1dmlkU2NyaXB0Q2xhc3NvYmouQWRkVHJ1ZGl2X2Z1bmMoXCJhZHMuZGlzcGxheS52aWRlb2lucGFnZS4xXCIsIFtbMSwgMV0sIFsxLCAyXSwgWydmbHVpZCddXSwgMSk7XHJcbiAgICAgIH0gICAgICBcclxuICAgICAgaWYgKEFkVW5pdFByb3BlcnRpZXNDbGFzc09iai5TbG90c1t0aGlzLk96ZW5dKSB7XHJcbiAgICAgICAgdGhpcy5kZWZpbmVTbG90c1luc19mdW5jKHRoaXMuT3plbiwgQWRVbml0QWRkaXRpb25hbFN0eWxlc0NsYXNzLnJlc2l6ZU96ZW5fZnVuYygpKTtcclxuICAgICAgICAvL2dvb2dsZXRhZy5jbWQucHVzaChmdW5jdGlvbigpIHsgZ29vZ2xldGFnLmRpc3BsYXkoJ2Fkcy5vemVuJyk7IH0pO1xyXG4gICAgICAgIGFkVW5pdFN0eWxlc0NsYXNzT2JqW1wiYWRzLm96ZW5cIl0oXCJhZHMub3plblwiKTtcclxuICAgICAgfVxyXG4gICAgICBpZiAoQWRVbml0UHJvcGVydGllc0NsYXNzT2JqLlNsb3RzW3RoaXMuT3plbl9sZWZ0X1ZOXSkge1xyXG4gICAgICAgIHRoaXMuZGVmaW5lU2xvdHNZbnNfZnVuYyh0aGlzLk96ZW5fbGVmdF9WTiwgQWRVbml0QWRkaXRpb25hbFN0eWxlc0NsYXNzLnJlc2l6ZU96ZW5fZnVuYygpKTtcclxuICAgICAgICBhZFVuaXRTdHlsZXNDbGFzc09ialtcImFkcy5vemVuLmxlZnRcIl0oXCJhZHMub3plbi5sZWZ0XCIpO1xyXG4gICAgICB9XHJcbiAgICAgIGlmIChBZFVuaXRQcm9wZXJ0aWVzQ2xhc3NPYmouU2xvdHNbXCJhZHMuc3BvdC4xXCJdKSB7XHJcbiAgICAgICAgdGhpcy5kZWZpbmVTbG90c1luc19mdW5jKFwiYWRzLnNwb3QuMVwiLCBbMzAwLCAyNTBdKTtcclxuICAgICAgICAvL2dvb2dsZXRhZy5jbWQucHVzaChmdW5jdGlvbigpIHsgZ29vZ2xldGFnLmRpc3BsYXkoJ2Fkcy5zcG90LjEnKTsgfSk7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKEFkVW5pdFByb3BlcnRpZXNDbGFzc09iai5TbG90c1tcImFkcy5zcG90LjE3XCJdKSB7XHJcbiAgICAgICAgdGhpcy5kZWZpbmVTbG90c1luc19mdW5jKFwiYWRzLnNwb3QuMTdcIiwgWzMwMCwgMjUwXSk7XHJcbiAgICAgICAgLy9nb29nbGV0YWcuY21kLnB1c2goZnVuY3Rpb24oKSB7IGdvb2dsZXRhZy5kaXNwbGF5KCdhZHMuc3BvdC4xNycpOyB9KTtcclxuICAgICAgfVxyXG4gICAgICBsZXQgbWluaV9vcmdhbmljX2NvbnRlbnRfc2l6ZXMgPSAgeW5ldG5ld3NfbmV3Z3JpZCA/IFtbJ2ZsdWlkJ10sIFsxOTAsIDE4OF1dIDogWzIyMCwgMTEzXTtcclxuICAgICAgaWYgKEFkVW5pdFByb3BlcnRpZXNDbGFzc09iai5TbG90c1tcImFkcy5taW5pLm9yZ2FuaWMuY29udGVudC4xXCJdKSB7XHJcbiAgICAgICAgdGhpcy5kZWZpbmVTbG90c1luc19mdW5jKFwiYWRzLm1pbmkub3JnYW5pYy5jb250ZW50LjFcIiwgbWluaV9vcmdhbmljX2NvbnRlbnRfc2l6ZXMpO1xyXG4gICAgICB9XHJcbiAgICAgIGlmIChBZFVuaXRQcm9wZXJ0aWVzQ2xhc3NPYmouU2xvdHNbXCJhZHMubWluaS5vcmdhbmljLmNvbnRlbnQuMlwiXSkge1xyXG4gICAgICAgIHRoaXMuZGVmaW5lU2xvdHNZbnNfZnVuYyhcImFkcy5taW5pLm9yZ2FuaWMuY29udGVudC4yXCIsIG1pbmlfb3JnYW5pY19jb250ZW50X3NpemVzKTtcclxuICAgICAgfVxyXG4gICAgICBpZiAoQWRVbml0UHJvcGVydGllc0NsYXNzT2JqLlNsb3RzW1wiYWRzLm1pbmkub3JnYW5pYy5jb250ZW50LjNcIl0pIHtcclxuICAgICAgICB0aGlzLmRlZmluZVNsb3RzWW5zX2Z1bmMoXCJhZHMubWluaS5vcmdhbmljLmNvbnRlbnQuM1wiLCBtaW5pX29yZ2FuaWNfY29udGVudF9zaXplcyk7XHJcbiAgICAgIH1cclxuICAgIH0gLy9lbmQgZWxzZVxyXG4gIH0gLy9lbmQgZGVmaW5lVW5pdHNZbnNfZnVuY1xyXG4gIGRlZmluZVVuaXRzODAwX2Z1bmMoKSB7XHJcbiAgICBMb2coXCJkZWZpbmVVbml0czgwMF9mdW5jXCIpO1xyXG4gICAgbGV0IGpzb25PYmpfZGljdCA9IHRoaXMuanNvbk9iajtcclxuICAgIGdvb2dsZXRhZy5jbWQucHVzaChmdW5jdGlvbigpIHtcclxuICAgICAgZm9yIChsZXQga2V5IG9mIE9iamVjdC5rZXlzKGpzb25PYmpfZGljdCkpIHtcclxuICAgICAgICBnb29nbGV0YWcucHViYWRzKCkuc2V0VGFyZ2V0aW5nKGtleSwganNvbk9ial9kaWN0W2tleV0pO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICAgIGlmICh3aW5kb3cuZGNTaXRlID09IFwieW50aG9cIikge1xyXG4gICAgICB0aGlzLmRlZmluZVNsb3RzODAwX2Z1bmMoXCJhZHMudG9wcmlnaHRcIiwgW1xyXG4gICAgICAgIFs3MjgsIDkwXSxcclxuICAgICAgICBbNzIxLCAxODBdLFxyXG4gICAgICAgIFs3NDUsIDE2Ml1cclxuICAgICAgXSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLmRlZmluZVNsb3RzODAwX2Z1bmMoXCJhZHMudG9wXCIsIFs3MjgsIDkwXSk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5maW5kQWxsRGl2X2Z1bmMoKTtcclxuXHJcbiAgICBpZiAoQWRVbml0UHJvcGVydGllc0NsYXNzT2JqLlNsb3RzW3RoaXMuT3plbl84MDBdKSB7XHJcbiAgICAgIHRoaXMuZGVmaW5lU2xvdHM4MDBfZnVuYyh0aGlzLk96ZW5fODAwLCBBZFVuaXRBZGRpdGlvbmFsU3R5bGVzQ2xhc3MucmVzaXplT3plbjgwMF9mdW5jKCkpO1xyXG4gICAgICAvL2dvb2dsZXRhZy5jbWQucHVzaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgIC8vZ29vZ2xldGFnLmRpc3BsYXkoJ2Fkcy5vemVuJyk7XHJcbiAgICAgIC8vfSk7XHJcbiAgICAgIGFkVW5pdFN0eWxlc0NsYXNzT2JqW3RoaXMuT3plbl84MDBdKHRoaXMuT3plbl84MDApO1xyXG4gICAgfVxyXG4gICAgaWYgKHdpbmRvdy5kY1NpdGUgPT0gXCJ5bnRob1wiKSB7XHJcbiAgICAgIGlmIChBZFVuaXRQcm9wZXJ0aWVzQ2xhc3NPYmouU2xvdHNbXCJhZHMuMTIweDYwMC4xXCJdKSB7XHJcbiAgICAgICAgdGhpcy5kZWZpbmVTbG90czgwMF9mdW5jKFwiYWRzLjEyMHg2MDAuMVwiLCBbMTIwLCA2MDBdKTtcclxuICAgICAgICAvL2dvb2dsZXRhZy5jbWQucHVzaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgLy8gZ29vZ2xldGFnLmRpc3BsYXkoJ2Fkcy4xMjB4NjAwLjEnKTtcclxuICAgICAgICAvL30pO1xyXG4gICAgICB9XHJcbiAgICAgIGlmIChBZFVuaXRQcm9wZXJ0aWVzQ2xhc3NPYmouU2xvdHNbXCJhZHMuMTIweDYwMC4yXCJdKSB7XHJcbiAgICAgICAgdGhpcy5kZWZpbmVTbG90czgwMF9mdW5jKFwiYWRzLjEyMHg2MDAuMlwiLCBbMTIwLCA2MDBdKTtcclxuICAgICAgICAvL2dvb2dsZXRhZy5jbWQucHVzaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgLy9nb29nbGV0YWcuZGlzcGxheSgnYWRzLjEyMHg2MDAuMicpO1xyXG4gICAgICAgIC8vfSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcbiAgZGVmaW5lVW5pdHNfZnVuYygpIHtcclxuICAgIC8vZGVmaW5lVW5pdHNfZnVuYyBmdW5jdGlvbiBhbGwgZnJvbSBncHRfc2NyaXB0X3luZXQgYW5kIGNyZWF0ZSBhbGwgU2xvdHMgZm9yIHRoZSBHUFRcclxuICAgIGxldCB0aGF0ID0gdGhpcztcclxuICAgIGxldCBqc29uT2JqX2RpY3QgPSB0aGlzLmpzb25PYmo7XHJcbiAgICBnb29nbGV0YWcuY21kLnB1c2goZnVuY3Rpb24oKSB7XHJcbiAgICAgIGZvciAobGV0IGtleSBvZiBPYmplY3Qua2V5cyhqc29uT2JqX2RpY3QpKSB7XHJcbiAgICAgICAgbGV0IG15S2V5ID0ga2V5ICE9PSBcIlwiID8ga2V5IDogXCJub0tleVwiO1xyXG4gICAgICAgIGdvb2dsZXRhZy5wdWJhZHMoKS5zZXRUYXJnZXRpbmcobXlLZXksIGpzb25PYmpfZGljdFtrZXldKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgd2luZG93LnluZXRfcmVzcG9uc2l2ZV9zaXRlcyA9IGZhbHNlO1xyXG4gICAgd2luZG93LnluZXRfcmVzcG9uc2l2ZV9zcGVjaWFsID0gZmFsc2U7XHJcblxyXG4gICAgaWYgKHdpbmRvdy5kY1NpdGUgPT0gXCJ5bnRcIiAmJiB3aW5kb3cubWF0Y2hNZWRpYSAmJiB3aW5kb3cubWF0Y2hNZWRpYSgnb25seSBzY3JlZW4gYW5kIChtYXgtd2lkdGg6NzY4cHggKSBhbmQgKG9yaWVudGF0aW9uOiBwb3J0cmFpdCksIG9ubHkgc2NyZWVuIGFuZCAobWF4LXdpZHRoOiA5MDBweCkgYW5kIChvcmllbnRhdGlvbjogbGFuZHNjYXBlKScpLm1hdGNoZXMpIHtcclxuICAgICAgd2luZG93LnluZXRfcmVzcG9uc2l2ZV9zaXRlcyA9IHRydWU7XHJcbiAgICB9XHJcbiAgICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5ibG9ncy1hdXRvLWZlZWQtd2lkZ2V0XCIpIHx8IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYXJ0aWNsZS1ibG9nLWNvbXBvbmVudGEtd3JhcHBlclwiKSB8fFxyXG4gICAgd2luZG93LmRjU2l0ZSA9PSBcInludFwiICYmICh3aW5kb3cuZGNQYXRoLmluY2x1ZGVzKFwiMjAxLldlYXRoZXJcIikgfHwgXHJcbiAgICAod2luZG93LmRjUGF0aC5pbmNsdWRlcyhcIjc3NTVcIikgJiYgd2luZG93LmRjUGF0aC5pbmNsdWRlcyhcIlRvcGljc1wiKSkpKSB7XHJcbiAgICAgIHdpbmRvdy55bmV0X3Jlc3BvbnNpdmVfc3BlY2lhbCA9IHRydWU7XHJcbiAgICB9XHJcbiAgICBpZiAod2luZG93LmlubmVyV2lkdGggPD0gXCI3NjdcIikgeyAgIFxyXG4gICAgICB0aGlzLmZpbmRBbGxEaXZfZnVuYygpO1xyXG5cclxuICAgICAgICAgIC8vQnJvd3NpIGluIGhvdXNlXHJcblxyXG4gICAgICBpZiAod2luZG93LmRjQ0cgPT0gXCJhcnRpY2xlXCIpIHRoaXMuYWRkX0Jyb3dzaV9pbmhvdXNlKFwieW5ldF9yZXNwb25zaXZlXCIpO1xyXG5cclxuXHJcbiAgICAgIGlmICh3aW5kb3cueW5ldF9yZXNwb25zaXZlX3NwZWNpYWwpIHtcclxuXHJcbiAgICAgIGxldCBpc19hcHAgPSBBZFVuaXRGdW5jdGlvbnNDbGFzc09iai5nZXRVcmxWYXJzX2Z1bmMoXCJJc0FwcFwiKSA9PSBcInRydWVcIjtcclxuICAgICAgaWYgKCFpc19hcHApIHtcclxuICAgICAgICBpZiAodGhpcy5zaG93TWFhYXZhcm9uU3RpY2t5ID09IDApIHsgIFxyXG4gICAgICAgICAgaWYgKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd5bmV0X21vYmlsZXdlYl9pbnRlcnN0aXRpYWxfYWR4X2Rpc3BsYXllZCcpKSB7XHJcbiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdtYWF2YXJvbkFkeCcpOyAgIFxyXG4gICAgICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgneW5ldF9tb2JpbGV3ZWJfaW50ZXJzdGl0aWFsX2FkeF9kaXNwbGF5ZWQnKTsgIFxyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgbGV0IHRyYW5zaXRpb25fbW9iaWxlID0gXCJhZHMuaW50ZXJzdGl0aWFsLmlubmVyXCI7IFxyXG4gICAgICAgICAgaWYgKHRoaXMuZ2V0RGV2aWNlX2Z1bmMoKSA9PSBcIkFuZHJvaWRcIiAmJiB0aGlzLm5ld01lZGlhID09IFwiRmFsc2VcIikgeyBcclxuICAgICAgICAgICAgdHJhbnNpdGlvbl9tb2JpbGUgPSBcImFkcy55bmV0X21vYmlsZXdlYl90cmFuc2l0aW9uc19nZW5lcmFsX2FuZHJvaWRfbWFpbl9pcFwiO1x0ICAgICAgICAgIFx0XHRcdFx0XHRcclxuICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5nZXREZXZpY2VfZnVuYygpID09IFwiaVBob25lXCIgJiYgdGhpcy5uZXdNZWRpYSA9PSBcIkZhbHNlXCIpIHtcdFx0XHRcclxuICAgICAgICAgICAgdHJhbnNpdGlvbl9tb2JpbGUgPSBcImFkcy55bmV0X21vYmlsZXdlYl90cmFuc2l0aW9uc19nZW5lcmFsX2lwaG9uZV9tYWluX2lwXCI7XHQgICBcdFx0XHJcbiAgICAgICAgICB9ICAgIFxyXG4gICAgICAgICAgbGV0IG1hYXZhcm9uX3dlYXRoZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgIG1hYXZhcm9uX3dlYXRoZXIuc2V0QXR0cmlidXRlKCdpZCcsIHRyYW5zaXRpb25fbW9iaWxlKTsgXHJcbiAgICAgICAgICBkb2N1bWVudC5ib2R5Lmluc2VydEJlZm9yZShtYWF2YXJvbl93ZWF0aGVyLCBkb2N1bWVudC5ib2R5LmZpcnN0Q2hpbGQpOyAgXHJcbiAgICAgICAgICB0aGlzLmRlZmluZVNsb3RzX2Z1bmModHJhbnNpdGlvbl9tb2JpbGUsIFtbMSwgMV0sIFsxLCAyXV0pOyBcclxuICBcclxuICAgICAgICAgIGxldCBJbnRlcnN0aXRpYWxfbG9hZGVkID0gZmFsc2U7XHJcbiAgICAgICAgICBJbmZyYXNydWN0dXJlQ2xhc3NPYmouU2xvdFJlbmRlckVuZChmdW5jdGlvbihldmVudCkge1xyXG4gICAgICAgICAgICAgIGlmIChldmVudC5zbG90ID09IEFkVW5pdFByb3BlcnRpZXNDbGFzc09iai5EZWZpbmVfc2xvdHNbdHJhbnNpdGlvbl9tb2JpbGVdKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIUludGVyc3RpdGlhbF9sb2FkZWQpIHsgIFxyXG4gICAgICAgICAgICAgICAgICBpZighZXZlbnQuaXNFbXB0eSkgeyAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgaWYgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY2xvc2UtYnRuXCIpID09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LkNsb3NlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGdvb2dsZXRhZy5jbWQucHVzaChmdW5jdGlvbigpIHsgZ29vZ2xldGFnLmRlc3Ryb3lTbG90cyhbQWRVbml0UHJvcGVydGllc0NsYXNzT2JqLkRlZmluZV9zbG90c1t0cmFuc2l0aW9uX21vYmlsZV1dKTsgfSk7IFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7ZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2RjTWFhdmFyb25EaXYnKS5yZW1vdmUoKTt9IGNhdGNoIChlKSB7fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRyYW5zaXRpb25fbW9iaWxlKS5zdHlsZS5oZWlnaHQgPSAnMHB4JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICB0cnkge2RvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiQ2xvc2VfYnRuX2ludGVyc3RpdGlhbFwiKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO30gY2F0Y2ggKGUpIHt9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgeyBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjbG9zZUJ1dHRvblwiKSkgeyBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY2xvc2VCdXR0b25cIikuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJiMTE0MjUzMlwiKSkgeyBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYjExNDI1MzJcIikuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkaXZfaW50ZXJzdGl0aWFsID0gcGFyZW50LmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRyYW5zaXRpb25fbW9iaWxlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgaW1nX2ludGVyc3RpdGlhbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbWdcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaW1nX2ludGVyc3RpdGlhbC5pZCA9IFwiQ2xvc2VfYnRuX2ludGVyc3RpdGlhbFwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGltZ19pbnRlcnN0aXRpYWwuc3JjID0gXCJodHRwczovL2ltYWdlczEueW5ldC5jby5pbC9QaWNTZXJ2ZXIzLzIwMTMvMTIvMTcvNTA0NDEzNy8zMjB4LnBuZ1wiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGltZ19pbnRlcnN0aXRpYWwuc2V0QXR0cmlidXRlKFwib25DbGlja1wiLCBcIndpbmRvdy5DbG9zZSgpO1wiKTsgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaW1nX2ludGVyc3RpdGlhbC5zZXRBdHRyaWJ1dGUoXCJzdHlsZVwiLCBcImN1cnNvcjogcG9pbnRlcjsgcG9zaXRpb246IGZpeGVkOyB3aWR0aDogMTAlOyB0b3A6IDA7IHJpZ2h0OiAwOyB6LWluZGV4OiA5OTk5OTk5OTk5O1wiKTsgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZGl2X2ludGVyc3RpdGlhbC5hcHBlbmRDaGlsZChpbWdfaW50ZXJzdGl0aWFsKTsgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIDgwMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICB9ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB9ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgSW50ZXJzdGl0aWFsX2xvYWRlZD10cnVlO1xyXG4gICAgICAgICAgICAgICAgfSAgICBcclxuICAgICAgICAgICAgICB9IFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICB9ICAgICAgXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgXHJcbiAgICAgIC8vIHdhaXQgZm9yIGVsZW1lbnRzIC0gYXBwZWFycyBqdXN0IHdoZW4gc2Nyb2xsaW5nLCBjaGVja2luZyBmb3IgZWxlbWVudCBhbmQgaWYgYSBkaXYgd2FzIGNyZWF0ZWRcclxuICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsKGV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGNyZWF0ZV9hbmRfZGVmaW5lKG51bSwgYWZ0ZXJfZGl2KSB7XHJcbiAgICAgICAgICAgICAgICAgIGxldCBibG9nX2Jhbm5lcl9zaXplcyA9ICAgW1snZmx1aWQnXSwgWzMyMCwgMjAwXV07XHJcbiAgICAgICAgICAgICAgICAgIGxldCBibG9nX2Jhbm5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICAgICAgICBibG9nX2Jhbm5lci5zZXRBdHRyaWJ1dGUoJ2lkJywgJ2Fkcy5pbnJlYWQuJyArIG51bSk7ICAgICAgXHJcblxyXG4gICAgICAgICAgICAgICAgICBsZXQgYmxvZ19iYW5uZXJfc3R5bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3R5bGVcIik7XHJcbiAgICAgICAgICAgICAgICAgIGJsb2dfYmFubmVyX3N0eWxlLmlubmVySFRNTCA9IGBkaXZbaWQ9JyR7YmxvZ19iYW5uZXIuaWR9J10ge1xyXG4gICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IGZsZXggIWltcG9ydGFudDtcclxuICAgICAgICAgICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlciAhaW1wb3J0YW50O1xyXG4gICAgICAgICAgICAgICAgICAgIG1hcmdpbjogMHB4IDAgMTVweCAwO1xyXG4gICAgICAgICAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjsgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgfWA7IFxyXG4gICAgICAgICAgICAgICAgICBjb25zdCBibG9nc19lbGVtZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuYmxvZ3MtaXRlbS13cmFwcGVyXCIpO1xyXG4gICAgICAgICAgICAgICAgICBsZXQgYmxvZ3NfYXJyYXkgPSBBcnJheS5mcm9tKGJsb2dzX2VsZW1lbnRzKTtcclxuICAgICAgICAgICAgICAgICAgYmxvZ3NfYXJyYXlbYWZ0ZXJfZGl2XS5wYXJlbnROb2RlLmluc2VydEJlZm9yZShibG9nX2Jhbm5lciwgYmxvZ3NfYXJyYXlbYWZ0ZXJfZGl2XS5uZXh0U2libGluZyk7XHJcbiAgICAgICAgICAgICAgICAgIGJsb2dfYmFubmVyLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGJsb2dfYmFubmVyX3N0eWxlLCBibG9nX2Jhbm5lci5uZXh0U2libGluZyk7ICBcclxuICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgIEFkVW5pdEZ1bmN0aW9uc0NsYXNzT2JqLmRlZmluZVNsb3RzX2Z1bmMoYmxvZ19iYW5uZXIuaWQsIGJsb2dfYmFubmVyX3NpemVzKTtcclxuICAgICAgICAgICAgICAgICAgZ29vZ2xldGFnLmNtZC5wdXNoKGZ1bmN0aW9uKCkge2dvb2dsZXRhZy5kaXNwbGF5KFwiYWRzLmlucmVhZC5cIiArIG51bSk7fSk7IFxyXG4gICAgICAgICAgICAgICAgICAvL2Jsb2dfYmFubmVyLnNldEF0dHJpYnV0ZSgnc3R5bGUnLCdkaXNwbGF5OiBmbGV4ICFpbXBvcnRhbnQ7IGp1c3RpZnktY29udGVudDogY2VudGVyOyBtYXJnaW46IDBweCAwIDE1cHggMDsgdGV4dC1hbGlnbjogY2VudGVyOycpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuYmxvZ3MtaXRlbS13cmFwcGVyXCIpWzNdICYmICFkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFkcy5pbnJlYWQuMVwiKSkge1xyXG4gICAgICAgICAgICAgIGNyZWF0ZV9hbmRfZGVmaW5lKDEsIDMpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuYmxvZ3MtaXRlbS13cmFwcGVyXCIpWzddICYmICFkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFkcy5pbnJlYWQuMlwiKSkge1xyXG4gICAgICAgICAgICAgIGNyZWF0ZV9hbmRfZGVmaW5lKDIsIDcpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuYmxvZ3MtaXRlbS13cmFwcGVyXCIpWzExXSAmJiAhZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhZHMuaW5yZWFkLjNcIikpIHtcclxuICAgICAgICAgICAgICBjcmVhdGVfYW5kX2RlZmluZSgzLCAxMSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5ibG9ncy1pdGVtLXdyYXBwZXJcIilbMTVdICYmICFkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFkcy5pbnJlYWQuNFwiKSkge1xyXG4gICAgICAgICAgICAgIGNyZWF0ZV9hbmRfZGVmaW5lKDQsIDE1KTtcclxuICAgICAgICAgICAgfSAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgfSk7ICAgICAgIFxyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoKHdpbmRvdy5kY1BhdGguaW5jbHVkZXMoXCIzNDU2Lk1hZ2F6aW5lXCIpIHx8IHdpbmRvdy55bmV0X3Jlc3BvbnNpdmVfc2l0ZXMpICYmIHdpbmRvdy55bmV0X3Jlc3BvbnNpdmVfc3BlY2lhbCA9PSBmYWxzZSkgeyAgIFxyXG4gICAgICB0aGlzLmZpbmRBbGxEaXZfZnVuYygpO1xyXG4gICAgICAvL2xldCBzdGlja3lfc2xvdCA9ICh0aGlzLmdldERldmljZV9mdW5jKCkgPT0gXCJBbmRyb2lkXCIpID8gXCJhZHMueW5ldF9tb2JpbGV3ZWJfYmFubmVyc19hbmRyb2lkX2RlZmF1bHRfc3RpY2t5XCIgOiBcImFkcy55bmV0X21vYmlsZXdlYl9iYW5uZXJzX2lwaG9uZV9kZWZhdWx0X3N0aWNreVwiO1xyXG4gICAgICBsZXQgYmlnbGl2ZWJveF9zbG90ID0gXCJcIjtcclxuICAgICAgbGV0IGxpdmVib3hfc2xvdCA9IFwiXCI7XHJcbiAgICAgIGxldCBtYWF2YXJvbl9tb2JpbGUgPSBcIlwiO1xyXG4gICAgICBpZiAodGhpcy5uZXdNZWRpYSA9PSBcIlRydWVcIiB8fCB3aW5kb3cueW5ldF9yZXNwb25zaXZlX3NpdGVzKSB7XHJcbiAgICAgICAgYmlnbGl2ZWJveF9zbG90ID0gXCJhZHMuYmlnbGl2ZWJveFwiO1x0XHJcbiAgICAgICAgbGl2ZWJveF9zbG90ID0gXCJhZHMuaW5ib2FyZFwiO1x0XHJcbiAgICAgICAgbWFhdmFyb25fbW9iaWxlID0gXCJhZHMuaW50ZXJzdGl0aWFsLmlubmVyXCI7ICAgICAgXHRcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGlmICh0aGlzLmdldERldmljZV9mdW5jKCkgPT0gXCJBbmRyb2lkXCIpIHtcclxuICAgICAgICAgICAgYmlnbGl2ZWJveF9zbG90ID0gXCJhZHMueW5ldF9tb2JpbGV3ZWJfYW5kcm9pZF9wbmltaV9iaWdsaXZlQm94XCI7XHRcclxuICAgICAgICAgICAgbGl2ZWJveF9zbG90ID0gXCJhZHMueW5ldF9tb2JpbGV3ZWJfYW5kcm9pZF9saXZlYm94XCI7XHJcbiAgICAgICAgICAgIG1hYXZhcm9uX21vYmlsZSA9IFwiYWRzLnluZXRfbW9iaWxld2ViX3RyYW5zaXRpb25zX2dlbmVyYWxfYW5kcm9pZF9tYWluX2lwXCI7XHQgICAgICAgICAgXHRcdFx0XHRcdFxyXG4gICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmdldERldmljZV9mdW5jKCkgPT0gXCJpUGhvbmVcIikge1x0XHJcbiAgICAgICAgICAgIGJpZ2xpdmVib3hfc2xvdCA9IFwiYWRzLnluZXRfbW9iaWxld2ViX2lwaG9uZV9wbmltaV9iaWdsaXZlQm94XCI7XHRcclxuICAgICAgICAgICAgbGl2ZWJveF9zbG90ID0gXCJhZHMueW5ldF9tb2JpbGV3ZWJfaXBob25lX2xpdmVib3hcIjtcdFx0XHRcdFxyXG4gICAgICAgICAgICBtYWF2YXJvbl9tb2JpbGUgPSBcImFkcy55bmV0X21vYmlsZXdlYl90cmFuc2l0aW9uc19nZW5lcmFsX2lwaG9uZV9tYWluX2lwXCI7XHQgICBcdFx0XHJcbiAgICAgICAgICB9ICAgICAgICBcclxuICAgICAgfVxyXG4gICAgXHJcbiAgICAgIGlmICh0aGlzLnNob3dNYWFhdmFyb25TdGlja3kgPT0gMCkge1xyXG4gICAgICAgIGxldCBtYWF2YXJvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgIG1hYXZhcm9uLnNldEF0dHJpYnV0ZSgnaWQnLCBtYWF2YXJvbl9tb2JpbGUpOyBcclxuICAgICAgICBkb2N1bWVudC5ib2R5Lmluc2VydEJlZm9yZShtYWF2YXJvbiwgZG9jdW1lbnQuYm9keS5maXJzdENoaWxkKTsgIFxyXG4gICAgICB9XHJcbiAgICAgXHJcblxyXG4gICAgICBsZXQgaGVhZGVyID0gXCIuYXJ0aWNsZS1oZWFkZXItbWFnYXppbmVcIjtcclxuICAgICAgaWYgKHdpbmRvdy5kY1BhdGguaW5jbHVkZXMoXCIzNDU2Lk1hZ2F6aW5lXCIpKSB7XHJcbiAgICAgICAgaGVhZGVyID0gJy5ibGF6ZXItaGVhZGVyJztcclxuICAgICAgfSBcclxuICAgICAgaWYgKHdpbmRvdy55bmV0X3Jlc3BvbnNpdmVfc2l0ZXMpIHtcclxuICAgICAgICBoZWFkZXIgPSAnLmxhaXNoYS1oZWFkZXInO1xyXG4gICAgICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGhlYWRlcikgPT0gdW5kZWZpbmVkIHx8IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoaGVhZGVyKSA9PSBudWxsKSB7XHJcbiAgICAgICAgICBoZWFkZXIgPSBcIi5hcnRpY2xlLWhlYWRlci1tYWdhemluZVwiO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAod2luZG93LmRjUGF0aC5pbmNsdWRlcyhcIlBuYWlQbHVzXCIpKSB7XHJcbiAgICAgICAgICBoZWFkZXIgPSBcIi5wcGx1cy1oZWFkZXJcIjtcclxuICAgICAgICB9XHJcbiAgICAgIH0gXHJcblxyXG4gICAgICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihoZWFkZXIpKSB7XHJcbiAgICAgICAgbGV0IGhlYWRlcl9jb21wID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihoZWFkZXIpO1xyXG4gICAgICAgIGxldCBpbmJvcmRfYmlnX2RpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgIGluYm9yZF9iaWdfZGl2LnNldEF0dHJpYnV0ZSgnaWQnLCBiaWdsaXZlYm94X3Nsb3QpOyAgICAgXHJcbiAgICAgICAgaGVhZGVyX2NvbXAucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoaW5ib3JkX2JpZ19kaXYsIGhlYWRlcl9jb21wLm5leHRTaWJsaW5nKTsgIFxyXG5cclxuICAgICAgICBsZXQgaW5ib3JkX3NtYWxsX2RpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgIGluYm9yZF9zbWFsbF9kaXYuc2V0QXR0cmlidXRlKCdpZCcsIGxpdmVib3hfc2xvdCk7XHJcbiAgICAgICAgaGVhZGVyX2NvbXAucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoaW5ib3JkX3NtYWxsX2RpdiwgaGVhZGVyX2NvbXAubmV4dFNpYmxpbmcpOyAgICBcclxuICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgaGFzVmlzaXRlZCA9IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oJ1NpdGVfdmlzaXRlZCcpOyAgXHJcblxyXG4gICAgICAgIHdpbmRvdy5zaG93X2JpZ2xpdmVib3ggPSBmYWxzZTsgIFxyXG4gICAgICAgIGlmIChkb2N1bWVudC5yZWZlcnJlciA9PSBcIlwiICAmJiAhaGFzVmlzaXRlZCkgeyAgIFxyXG4gICAgICAgICAgICB3aW5kb3cuc2hvd19iaWdsaXZlYm94ID0gdHJ1ZTsgICBcclxuICAgICAgICAgICAgdGhpcy5SZW5kZXJCaWdsaXZlYm94KCk7ICAgICAgIFxyXG4gICAgICAgICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCdTaXRlX3Zpc2l0ZWQnLCB0cnVlKTtcclxuICAgICAgICB9IFxyXG5cclxuICAgICAgICBsZXQgaXNfYXBwID0gQWRVbml0RnVuY3Rpb25zQ2xhc3NPYmouZ2V0VXJsVmFyc19mdW5jKFwiSXNBcHBcIikgPT0gXCJ0cnVlXCI7XHJcbiAgICAgICAgaWYgKGlzX2FwcCkge1xyXG4gICAgICAgICAgdGhpcy5SZW5kZXJTbWFsbEluYm9yZCgpO1xyXG4gICAgICAgICAgY29uc29sZS5sb2coXCJJQXBwIG9uIC0gbm8gaW50ZXJzdGl0aWFsXCIpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAod2luZG93LnNob3dfYmlnbGl2ZWJveCA9PSBmYWxzZSAmJiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgneW5ldF9tb2JpbGV3ZWJfaW50ZXJzdGl0aWFsX2FkeF9kaXNwbGF5ZWQnKSkge1xyXG4gICAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ21hYXZhcm9uQWR4Jyk7ICAgXHJcbiAgICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgneW5ldF9tb2JpbGV3ZWJfaW50ZXJzdGl0aWFsX2FkeF9kaXNwbGF5ZWQnKTsgICBcclxuICAgICAgICAgIHRoaXMuUmVuZGVyU21hbGxJbmJvcmQoKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG5cclxuICAgICAgICBpZiAodGhpcy5zaG93TWFhYXZhcm9uU3RpY2t5ID09IDApIHtcclxuXHJcbiAgICAgICAgICBpZiAod2luZG93LnNob3dfYmlnbGl2ZWJveCA9PSBmYWxzZSB8fCAod2luZG93LnNob3dfYmlnbGl2ZWJveCA9PSBmYWxzZSAmJiB3aW5kb3cuZGNDRyA9PSAnYXJ0aWNsZScpIHx8ICh3aW5kb3cuZGNQYXRoLmluY2x1ZGVzKFwiLTEuSG9tZVwiKSAmJiBoYXNWaXNpdGVkICYmICh3aW5kb3cuc2hvd19iaWdsaXZlYm94ID09IGZhbHNlICYmICgod2luZG93LnBlcmZvcm1hbmNlICYmIHdpbmRvdy5wZXJmb3JtYW5jZS5uYXZpZ2F0aW9uLnR5cGUgPT0gd2luZG93LnBlcmZvcm1hbmNlLm5hdmlnYXRpb24uVFlQRV9CQUNLX0ZPUldBUkQpIHx8IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdCQUNLX0hPTUVfQ0xJQ0tFRCcpKSkpKSB7XHJcbiAgICAgICAgIFxyXG4gICAgICAgICAgdGhpcy5kZWZpbmVTbG90c19mdW5jKFwiYWRzLmludGVyc3RpdGlhbC5pbm5lclwiLCBbWzEsIDFdLCBbMSwgMl1dKTsgXHJcblxyXG4gICAgICAgICAgbGV0IEludGVyc3RpdGlhbF9ub3RfZW1wdHkgPSB0cnVlO1xyXG4gICAgICAgICAgbGV0IEludGVyc3RpdGlhbE1vYmlsZUxvYWRlZCA9IGZhbHNlO1x0XHJcbiAgICAgICAgICBJbmZyYXNydWN0dXJlQ2xhc3NPYmouU2xvdFJlbmRlckVuZChmdW5jdGlvbihldmVudCkge1x0ICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICBpZiAoZXZlbnQuc2xvdCA9PSBBZFVuaXRQcm9wZXJ0aWVzQ2xhc3NPYmouRGVmaW5lX3Nsb3RzW1wiYWRzLmludGVyc3RpdGlhbC5pbm5lclwiXSkge1x0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghSW50ZXJzdGl0aWFsTW9iaWxlTG9hZGVkKSB7ICBcdFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCFldmVudC5pc0VtcHR5KSB7ICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNsb3NlQnV0dG9uXCIpKSB7IFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNsb3NlQnV0dG9uXCIpLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYjExNDI1MzJcIikpIHsgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYjExNDI1MzJcIikucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cuQ2xvc2UgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vZ29vZ2xldGFnLmNtZC5wdXNoKGZ1bmN0aW9uKCkgeyBnb29nbGV0YWcuZGVzdHJveVNsb3RzKFtBZFVuaXRQcm9wZXJ0aWVzQ2xhc3NPYmouRGVmaW5lX3Nsb3RzW1wiYWRzLmludGVyc3RpdGlhbC5pbm5lclwiXV0pOyB9KTsgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7ZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2RjTWFhdmFyb25EaXYnKS5yZW1vdmUoKTt9IGNhdGNoIChlKSB7fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFkcy5pbnRlcnN0aXRpYWwuaW5uZXJcIikuc3R5bGUuaGVpZ2h0ID0gJzBweCc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYWRzLmludGVyc3RpdGlhbC5pbm5lclwiKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnkge2RvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiQ2xvc2VfYnRuX2ludGVyc3RpdGlhbFwiKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO30gY2F0Y2ggKGUpIHt9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHsgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRpdl9pbnRlcnN0aXRpYWwgPSBwYXJlbnQuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhZHMuaW50ZXJzdGl0aWFsLmlubmVyXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgaW1nX2ludGVyc3RpdGlhbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbWdcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGltZ19pbnRlcnN0aXRpYWwuaWQgPSBcIkNsb3NlX2J0bl9pbnRlcnN0aXRpYWxcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW1nX2ludGVyc3RpdGlhbC5zcmMgPSBcImh0dHBzOi8vdG90YWxtZWRpYTIueW5ldC5jby5pbC9uZXdfZ3B0L3luZXRfbXV0YW0vY2xvc2UucG5nXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGltZ19pbnRlcnN0aXRpYWwuc2V0QXR0cmlidXRlKFwib25DbGlja1wiLCBcIndpbmRvdy5DbG9zZSgpO1wiKTsgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGltZ19pbnRlcnN0aXRpYWwuc2V0QXR0cmlidXRlKFwic3R5bGVcIiwgXCJjdXJzb3I6IHBvaW50ZXI7IHBvc2l0aW9uOiBmaXhlZDsgdG9wOiAxNHB4OyBsZWZ0OiAxNHB4OyB6LWluZGV4OiA5OTk5OTk5OTk5O1wiKTsgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpdl9pbnRlcnN0aXRpYWwuYXBwZW5kQ2hpbGQoaW1nX2ludGVyc3RpdGlhbCk7IFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIDMwMCk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFkVW5pdEZ1bmN0aW9uc0NsYXNzT2JqLlJlbmRlclNtYWxsSW5ib3JkKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEludGVyc3RpdGlhbF9ub3RfZW1wdHk9ZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcdFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgSW50ZXJzdGl0aWFsTW9iaWxlTG9hZGVkPXRydWU7XHRcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSAgICBcdFxyXG4gICAgICAgICAgICAgICAgICAgICAgfVx0XHJcbiAgICAgICAgICB9KTtcclxuICAgIFxyXG4gICAgICAgICAgICBpZiAoSW50ZXJzdGl0aWFsX25vdF9lbXB0eSkge1xyXG4gICAgICAgICAgICAgIHRoaXMuUmVuZGVyU21hbGxJbmJvcmQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICB9ICBcclxuICAgICAgICB9IGVsc2UgaWYgKHdpbmRvdy5zaG93X2JpZ2xpdmVib3ggPT0gZmFsc2UpIHtcclxuICAgICAgICAgIHRoaXMuUmVuZGVyU21hbGxJbmJvcmQoKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHRcclxuICAgICAgfVx0XHJcbiAgICAgIFxyXG4gICAgICBpZiAod2luZG93LnluZXRfcmVzcG9uc2l2ZV9zaXRlcyAmJiB3aW5kb3cueW5ldF9yZXNwb25zaXZlX3NwZWNpYWwgPT0gZmFsc2UpIHsgIFxyXG4gICAgICAgIGlmICh0aGlzLnNob3dNYWFhdmFyb25TdGlja3kgPT0gMCkge1xyXG4gICAgICAgIHRoaXMuZGVmaW5lU2xvdHNfZnVuYyhcImFkcy5iYW5uZXJcIiwgW1szMjAsIDUwXSwgWzM2MCwgNTBdXSk7IFxyXG4gICAgICAgIGFkVW5pdFN0eWxlc0NsYXNzT2JqW1wiYWRzLnN0aWNreVwiXShcImFkcy5zdGlja3lcIik7ICBcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKEFkVW5pdFByb3BlcnRpZXNDbGFzc09iai5TbG90c1tcImFkcy5zdHJpcC5jb250ZW50LjFcIl0pIHtcclxuICAgICAgICAgIHRoaXMuZGVmaW5lU2xvdHNfZnVuYyhcImFkcy5zdHJpcC5jb250ZW50LjFcIiwgWydmbHVpZCddKTtcclxuICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYWRzLnN0cmlwLmNvbnRlbnQuMVwiKS5zZXRBdHRyaWJ1dGUoXCJzdHlsZVwiLCBcIndpZHRoOjEwMCU7IGhlaWdodDphdXRvO1wiKTsgICAgICAgICAgXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChBZFVuaXRQcm9wZXJ0aWVzQ2xhc3NPYmouU2xvdHNbXCJhZHMuc3RyaXAuY29udGVudC4yXCJdKSB7XHJcbiAgICAgICAgICB0aGlzLmRlZmluZVNsb3RzX2Z1bmMoXCJhZHMuc3RyaXAuY29udGVudC4yXCIsIFsnZmx1aWQnXSk7XHJcbiAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFkcy5zdHJpcC5jb250ZW50LjJcIikuc2V0QXR0cmlidXRlKFwic3R5bGVcIiwgXCJ3aWR0aDoxMDAlOyBoZWlnaHQ6YXV0bztcIik7ICAgICAgICAgXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChBZFVuaXRQcm9wZXJ0aWVzQ2xhc3NPYmouU2xvdHNbXCJhZHMuYm94LmNvbnRlbnQuMVwiXSkge1xyXG4gICAgICAgICAgdGhpcy5kZWZpbmVTbG90c19mdW5jKFwiYWRzLmJveC5jb250ZW50LjFcIiwgWydmbHVpZCddKTtcclxuICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYWRzLmJveC5jb250ZW50LjFcIikuc2V0QXR0cmlidXRlKFwic3R5bGVcIiwgXCJ3aWR0aDoxMDAlOyBoZWlnaHQ6YXV0bztcIik7ICAgICAgICAgXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAgIC8vMTQwMDRcclxuICAgICAgICAgIGlmICh3aW5kb3cuZGNDRyA9PSBcInN1YlwiICYmIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYXJ0aWNsZS1oZWFkbGluZXMtYXV0by1wcGx1c1wiKSkge1xyXG4gICAgICAgICAgICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5QcGx1c0FydGljbGVIZWFkbGluZXNBdXRvLnNob3ctYWQtdHJ1ZVwiKSkgeyAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgbGV0IGJhbm5lcl9zaXplcyA9ICAgW1snZmx1aWQnXV07XHJcbiAgICAgICAgICAgICAgICAgICAgICBjb25zdCBmbGFzaF9lbGVtZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuUHBsdXNBcnRpY2xlSGVhZGxpbmVzQXV0byAuc2xvdFZpZXdcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICBsZXQgZWxlbWVudF9hcnJheSA9IEFycmF5LmZyb20oZmxhc2hfZWxlbWVudHMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCAzOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGJhbm5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBiYW5uZXIuc2V0QXR0cmlidXRlKCdpZCcsICdhZHMuc3RyaXAub3JkZXJpbmcuJyArIGkpOyAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBiYW5uZXIuc2V0QXR0cmlidXRlKCdzdHlsZScsJ2Rpc3BsYXk6IGZsZXg7IGp1c3RpZnktY29udGVudDogY2VudGVyOycpOyAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZWxlbWVudF9hcnJheS5sZW5ndGggPj0gNCppICYmIGVsZW1lbnRfYXJyYXlbNCppXSAhPSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50X2FycmF5Wyg0KmkpLTFdLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGJhbm5lciwgZWxlbWVudF9hcnJheVsoNCppKS0xXS5uZXh0U2libGluZyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWZpbmVTbG90c19mdW5jKGJhbm5lci5pZCwgYmFubmVyX3NpemVzKTsgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgfSAgIFxyXG4gICAgICAgICAgICB9ICAgICAgICAgICBcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICBpZiAod2luZG93LmRjQ0cgPT0gXCJtYWluXCIgJiYgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcGx1cy1tdWx0aS1hcnRpY2xlXCIpKSB7XHJcbiAgICAgICAgICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLlBwbHVzTXVsdGlBcnRpY2xlQ29tcG9uZW50YS5zaG93LWFkLXRydWVcIikpIHsgICBcclxuICAgICAgICAgICAgICAgICAgICAgIGxldCBiYW5uZXJfc2l6ZXMgPSAgIFtbJ2ZsdWlkJ10sIFszNjAsIDIwMF0sIFszMjAsIDIwMF1dO1xyXG4gICAgICAgICAgICAgICAgICAgICAgY29uc3QgZmxhc2hfZWxlbWVudHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLlBwbHVzTXVsdGlBcnRpY2xlQ29tcG9uZW50YSAuc2xvdFZpZXdcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICBsZXQgZWxlbWVudF9hcnJheSA9IEFycmF5LmZyb20oZmxhc2hfZWxlbWVudHMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCAzOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGJhbm5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBiYW5uZXIuc2V0QXR0cmlidXRlKCdpZCcsICdhZHMuaW5ib3guJyArIGkpOyAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBiYW5uZXIuc2V0QXR0cmlidXRlKCdzdHlsZScsJ2Rpc3BsYXk6IGZsZXg7IGp1c3RpZnktY29udGVudDogY2VudGVyOycpOyAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZWxlbWVudF9hcnJheS5sZW5ndGggPj0gNCppICYmIGVsZW1lbnRfYXJyYXlbNCppXSAhPSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50X2FycmF5Wyg0KmkpLTFdLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGJhbm5lciwgZWxlbWVudF9hcnJheVsoNCppKS0xXS5uZXh0U2libGluZyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWZpbmVTbG90c19mdW5jKGJhbm5lci5pZCwgYmFubmVyX3NpemVzKTsgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgfSAgIFxyXG4gICAgICAgICAgICB9ICAgICAgICAgICBcclxuICAgICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAgIGlmICh3aW5kb3cueW5ldF9yZXNwb25zaXZlX3NpdGVzICYmIHdpbmRvdy5kY0NHID09IFwiYXJ0aWNsZVwiKSB7XHJcbiAgICAgICAgaWYgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYWRzLmJveFwiKSAmJiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFkcy5ib3hcIikuY2xhc3NMaXN0LmNvbnRhaW5zKFwiQ29tbWVudHNCb3hcIikpIHsgXHJcbiAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFkcy5ib3hcIikuc2V0QXR0cmlidXRlKFwic3R5bGVcIiwgXCJkaXNwbGF5OiBmbGV4ICFpbXBvcnRhbnQ7XCIpOyAgICAgICAgIFxyXG4gICAgICAgICAgdGhpcy5kZWZpbmVTbG90c19mdW5jKFwiYWRzLmJveFwiLCBbWzMwMCwgMjUwXSwgWydmbHVpZCddXSk7XHJcbiAgICAgICAgICBnb29nbGV0YWcuY21kLnB1c2goZnVuY3Rpb24oKSB7Z29vZ2xldGFnLmRpc3BsYXkoXCJhZHMuYm94XCIpO30pOyBcclxuICAgICAgICAvLyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFkcy5ib3hcIikuc2V0QXR0cmlidXRlKFwic3R5bGVcIiwgXCJkaXNwbGF5OiBmbGV4ICFpbXBvcnRhbnQ7IG1hcmdpbjogMTAuNjI1dncgYXV0bzsganVzdGlmeS1jb250ZW50OiBjZW50ZXI7IHRleHQtYWxpZ246Y2VudGVyO1wiKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgSW5mcmFzcnVjdHVyZUNsYXNzT2JqLlNsb3RSZW5kZXJFbmQoZnVuY3Rpb24oZXZlbnQpIHtcclxuICAgICAgICAgICAgbGV0IEJveExvYWRlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgIGlmIChldmVudC5zbG90ID09IEFkVW5pdFByb3BlcnRpZXNDbGFzc09iai5EZWZpbmVfc2xvdHNbXCJhZHMuYm94XCJdKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIUJveExvYWRlZCkgeyAgXHJcbiAgICAgICAgICAgICAgICAgIGlmKCFldmVudC5pc0VtcHR5KSB7ICAgICBcclxuICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFkcy5ib3hcIikuc2V0QXR0cmlidXRlKFwic3R5bGVcIiwgXCJkaXNwbGF5OiBmbGV4ICFpbXBvcnRhbnQ7IG1hcmdpbjogMTAuNjI1dncgYXV0bzsganVzdGlmeS1jb250ZW50OiBjZW50ZXI7IHRleHQtYWxpZ246Y2VudGVyO1wiKTtcclxuICAgICAgICAgICAgICAgICAgICB9ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgQm94TG9hZGVkPXRydWU7XHJcbiAgICAgICAgICAgICAgICB9ICAgIFxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHQgICAgICAgIFx0XHRcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcblxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgaWYgKHdpbmRvdy5kY1NpdGUgPT0gXCJ5bnRcIiB8fCB3aW5kb3cuZGNTaXRlID09IFwieW51c2FcIikge1xyXG4gICAgICAgaWYgKCh3aW5kb3cuZGNDRyA9PSBcIm1haW5cIiB8fCB3aW5kb3cuZGNDRyA9PSBcImFydGljbGVcIiB8fCB3aW5kb3cuZGNDRyA9PSBcInN1YlwiKSAmJiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLk1hYXZhcm9uX3Nsb3QpICE9IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIC8vICAgaWYgKHRydWUpIHtcclxuICAgICAgICAvLyBpZiBudW1iZXIgbGVzcyB0aGFuIDQsIGdldCBwYXJhbWV0ZXIgZGN1bmlncHQgPSB2aWV3KG51bWJlciksIGlmIG1vcmUgdGhhbiA0IHRoZW4gZG9uJ3QgZ2V0IHBhcmFtZXRlclxyXG4gICAgICAgIGlmIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm1hYXZhcm9uc3R5bGVcIikgIT0gbnVsbCkge1xyXG4gICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJtYWF2YXJvbnN0eWxlXCIpLmlubmVySFRNTCA9IFwiXCI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuRG91YmxlX0p1bWJvID0gdHJ1ZTtcclxuICAgICAgICBpZiAoIXRoaXMuRG91YmxlX0p1bWJvKSB7XHJcbiAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLk1hYXZhcm9uX3Nsb3QpLmlubmVySFRNTCA9IFwiXCI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICgoKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZ3JpZDEyODBcIikgIT0gbnVsbCB8fCBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmdyaWQxMjgwXCIpICE9IHVuZGVmaW5lZCkgfHwgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZ3JpZDEyODBfMlwiKSAhPSBudWxsIHx8IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZ3JpZDEyODBfMlwiKSAhPSB1bmRlZmluZWQpKVxyXG4gICAgICAgICAgICB8fCAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tYWdhemluZV9ncmlkMTI4MFwiKSAhPSBudWxsIHx8IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubWFnYXppbmVfZ3JpZDEyODBcIikgIT0gdW5kZWZpbmVkKSB8fCAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5oQ29udGFpbmVyLnBwbHVzXCIpKSB8fCAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tYWdhemluZTIwMjVcIikpKSB7XHJcbiAgICAgICAgICB0aGlzLmRlZmluZVNsb3RzX2Z1bmMoXCJhZHMudG9wXCIsXHJcbiAgICAgICAgICBbWzEsIDFdLCBbMSwgMl0sIFs3MjgsIDkwXSwgWzk3MCwgOTBdLCBbOTcwLCAyNTBdLCBbMTAwMCwgMjAwXSwgWzk3MCwgMTMwXSwgWzk3MCwgMzUwXSwgWzk3MCwgMTAwXSwgWzExOTIsIDI1MF0sIFsxMTkyLCAzNTBdLCBbMTE5MiwgOTBdLCBbMTE5MiwgMTAwXSwgWzExOTIsIDEzMF1dLFxyXG4gICAgICAgICAgXCJcIixcclxuICAgICAgICAgIFwiXCJcclxuICAgICAgICAgICApOyAgICAgICAgIFxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICB0aGlzLmRlZmluZVNsb3RzX2Z1bmMoXCJhZHMudG9wXCIsXHJcbiAgICAgICAgICBbWzEsIDFdLCBbMSwgMl0sIFs3MjgsIDkwXSwgWzk3MCwgOTBdLCBbOTcwLCAyNTBdLCBbMTAwMCwgMjAwXSwgWzk3MCwgMTMwXSwgWzk3MCwgMzUwXSwgWzk3MCwgMTAwXV0sXHJcbiAgICAgICAgICBcIlwiLFxyXG4gICAgICAgICAgXCJcIlxyXG4gICAgICAgICApO1xyXG4gICAgICAgIH0gICAgICAgIFxyXG5cclxuICAgICAgICAvLyBkZWZpbmUgTWFhdmFyb25cclxuICAgICAgICBpZiAod2luZG93LmZyZXF1ZW5jeUxvZ2ljICYmIGxvY2FsU3RvcmFnZS5mcmVxdWVuY3lMb2dpYyAhPSB1bmRlZmluZWQgJiYgZnJlcXVlbmN5TG9naWMuZGlzcGxheWVkbGFzdC5pbmNsdWRlcyhcImFkeFwiKSAmJiBmcmVxdWVuY3lMb2dpYy5hZGQgPT0gXCJsb2FkZWRcIikge1xyXG4gICAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ2ZyZXF1ZW5jeUxvZ2ljJyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgIGNvbnN0IGlzX2FkeCA9IHdpbmRvdy5pc19hZHggPT0gZmFsc2UgPyBmYWxzZSA6IHRydWU7XHJcbiAgICAgICAgICAgICBpZiAoaXNfYWR4KSB7XHJcbiAgICAgICAgICAgICAgICAvLyBEZWZpbmUgYSB3ZWIgaW50ZXJzdGl0aWFsIGFkIHNsb3QuXHJcbiAgICAgICAgICAgICAgICAvLyBodHRwczovL2RldmVsb3BlcnMuZ29vZ2xlLmNvbS9wdWJsaXNoZXItdGFnL3NhbXBsZXMvZGlzcGxheS13ZWItaW50ZXJzdGl0aWFsLWFkP2hsPWVuXHJcbiAgICAgICAgICAgICAgICBsZXQgaW50ZXJzdGl0aWFsU2xvdDtcclxuICAgICAgICAgICAgICAgIGdvb2dsZXRhZy5jbWQucHVzaCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpbnRlcnN0aXRpYWxTbG90ID0gZ29vZ2xldGFnLmRlZmluZU91dE9mUGFnZVNsb3QoXHJcbiAgICAgICAgICAgICAgICAgIFwiLzY4NzAveW5ldC9kZXNrdG9wL2ludGVyc3RpdGlhbC5hZHgveW5ldFwiLFxyXG4gICAgICAgICAgICAgICAgICBnb29nbGV0YWcuZW51bXMuT3V0T2ZQYWdlRm9ybWF0LklOVEVSU1RJVElBTCxcclxuICAgICAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgICAgIC8vIFNsb3QgcmV0dXJucyBudWxsIGlmIHRoZSBwYWdlIG9yIGRldmljZSBkb2VzIG5vdCBzdXBwb3J0IGludGVyc3RpdGlhbHMuXHJcbiAgICAgICAgICAgICAgICBpZiAoaW50ZXJzdGl0aWFsU2xvdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIEVuYWJsZSBvcHRpb25hbCBpbnRlcnN0aXRpYWwgdHJpZ2dlcnMgYW5kIHJlZ2lzdGVyIHRoZSBzbG90LlxyXG4gICAgICAgICAgICAgICAgICAgIGludGVyc3RpdGlhbFNsb3QuYWRkU2VydmljZShnb29nbGV0YWcucHViYWRzKCkpLnNldENvbmZpZyh7XHJcbiAgICAgICAgICAgICAgICAgICAgICBpbnRlcnN0aXRpYWw6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHJpZ2dlcnM6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBuYXZCYXI6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdW5oaWRlV2luZG93OiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiSW50ZXJzdGl0aWFsIGlzIGxvYWRpbmcuLi5cIik7XHJcblxyXG4gICAgICAgICAgICAgICAgICBnb29nbGV0YWcucHViYWRzKCkuYWRkRXZlbnRMaXN0ZW5lcihcInNsb3RPbmxvYWRcIiwgKGV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGludGVyc3RpdGlhbFNsb3QgPT09IGV2ZW50LnNsb3QpIHtcclxuICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiSW50ZXJzdGl0aWFsIGlzIGxvYWRlZC5cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgZ29vZ2xldGFnLmRpc3BsYXkoaW50ZXJzdGl0aWFsU2xvdCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgICB0aGlzLmRlZmluZVNsb3RzX2Z1bmModGhpcy5NYWF2YXJvbl9zbG90LCBbWzEsIDFdLCBbMiwgMV0sIFs5NzAsIDI1MF1dLCBcIlwiLCBcImdwdF9tYWF2YXJvblwiKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBNYWF2YXJvbkxvYWRlZCA9IGZhbHNlO1xyXG4gICAgICAgIGxldCB2aWRlb19vbiA9IFwiXCI7XHJcbiAgICAgICAgbGV0IGNvbnRfd2ggPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNvbnRlbnQtd1wiKTtcclxuICAgICAgICBsZXQgY29udGVudF93aCA9IGNvbnRfd2ggIT09IG51bGw7ICBcclxuICAgICAgICBJbmZyYXNydWN0dXJlQ2xhc3NPYmouU2xvdFJlbmRlckVuZChmdW5jdGlvbihldmVudCkge1xyXG4gICAgICAgICAgbGV0IHZpZGVvX2RhdGEgPSBcIlwiO1xyXG4gICAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICBldmVudC5zbG90ID09IEFkVW5pdFByb3BlcnRpZXNDbGFzc09iai5EZWZpbmVfc2xvdHNbXCJhZHMuaW50ZXJzdGl0aWFsXCJdXHJcbiAgICAgICAgICApIHtcclxuICAgICAgICAgICAgaWYgKCFNYWF2YXJvbkxvYWRlZCkge1xyXG4gICAgICAgICAgICAgIGlmICghZXZlbnQuaXNFbXB0eSkgeyAgICBcclxuICAgICAgICAgICAgICAgIGlmIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYmxhbmtldCcpICE9IHVuZGVmaW5lZCB8fCBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYmxhbmtldCcpICE9IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JsYW5rZXQnKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG4gICAgICAgICAgICAgICAgfSAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2JvZHknKVswXS5zdHlsZS5zZXRQcm9wZXJ0eSgnb3ZlcmZsb3cnLCAndmlzaWJsZScsICdpbXBvcnRhbnQnKTsgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgdGhhdC5pc19tYWF2YXJvbiA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBpZiAoY29udGVudF93aCkge1xyXG4gICAgICAgICAgICAgICAgICBjb250X3doLnN0eWxlLmRpc3BsYXk9XCJub25lXCI7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICB2aWRlb19vbiA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXHJcbiAgICAgICAgICAgICAgICAgICAgXCJ2aWRlby1jb250YWluZXItZmxwNlwiXHJcbiAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdmlkZW9fb24ubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgaWZyYW1lX3ZpZGVvID0gdmlkZW9fb25baV0uY2hpbGRyZW5bMF07XHJcbiAgICAgICAgICAgICAgICAgICAgaWZyYW1lX3ZpZGVvLnNyYyA9IFwiXCI7XHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGV4KSB7XHJcbiAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGV4KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2JvZHknKVswXS5zdHlsZS5zZXRQcm9wZXJ0eSgnb3ZlcmZsb3cnLCAndmlzaWJsZScsICdpbXBvcnRhbnQnKTtcclxuICAgICAgICAgICAgICAgIGlmIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYmxhbmtldCcpICE9IHVuZGVmaW5lZCB8fCBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYmxhbmtldCcpICE9IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JsYW5rZXQnKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG4gICAgICAgICAgICAgICAgfSAgIFxyXG4gICAgICAgICAgICAgICAgdmlkZW9fZGF0YSA9IE1haW5GdW5jdGlvbkNsYXNzT2JqLnZpZGVvT2ZmX2Z1bmMoKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgTWFhdmFyb25Mb2FkZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgIGlmICh2aWRlb19kYXRhICE9IFwiXCIpIHtcclxuICAgICAgICAgICAgICAgIHZpZGVvX29uLnNyYyA9IHZpZGVvX2RhdGE7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiBcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBpZiAgKCgoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5ncmlkMTI4MFwiKSAhPSBudWxsIHx8IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZ3JpZDEyODBcIikgIT0gdW5kZWZpbmVkKSB8fCAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5ncmlkMTI4MF8yXCIpICE9IG51bGwgfHwgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5ncmlkMTI4MF8yXCIpICE9IHVuZGVmaW5lZCkpXHJcbiAgICAgICAgICAgIHx8IChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1hZ2F6aW5lX2dyaWQxMjgwXCIpICE9IG51bGwgfHwgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tYWdhemluZV9ncmlkMTI4MFwiKSAhPSB1bmRlZmluZWQpIHx8IChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmhDb250YWluZXIucHBsdXNcIikpKSB7XHJcbiAgICAgICAgICB0aGlzLmRlZmluZVNsb3RzX2Z1bmMoXHJcbiAgICAgICAgICAgIFwiYWRzLnRvcFwiLFxyXG4gICAgICAgICAgICBbWzEsIDFdLCBbMSwgMl0sIFs3MjgsIDkwXSwgWzk3MCwgOTBdLCBbOTcwLCAyNTBdLCBbMTAwMCwgMjAwXSwgWzk3MCwgMTMwXSwgWzk3MCwgMzUwXSwgWzk3MCwgMTAwXSwgWzExOTIsIDI1MF0sIFsxMTkyLCAzNTBdLCBbMTE5MiwgOTBdLCBbMTE5MiwgMTAwXSwgWzExOTIsIDEzMF1dLFxyXG4gICAgICAgICAgICBcIlwiLFxyXG4gICAgICAgICAgICBcIlwiXHJcbiAgICAgICAgICApO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICB0aGlzLmRlZmluZVNsb3RzX2Z1bmMoXHJcbiAgICAgICAgICAgIFwiYWRzLnRvcFwiLFxyXG4gICAgICAgICAgICBbWzEsIDFdLCBbMSwgMl0sIFs3MjgsIDkwXSwgWzk3MCwgOTBdLCBbOTcwLCAyNTBdLCBbMTAwMCwgMjAwXSwgWzk3MCwgMTMwXSwgWzk3MCwgMzUwXSwgWzk3MCwgMTAwXV0sXHJcbiAgICAgICAgICAgIFwiXCIsXHJcbiAgICAgICAgICAgIFwiXCJcclxuICAgICAgICAgICk7XHJcbiAgICAgICAgfSAgICAgIFxyXG4gICAgICB9XHJcbiAgICB9ICBcclxuICAgIGxldCBUb3BMb2FkZWQgPSBmYWxzZTtcclxuICAgIEluZnJhc3J1Y3R1cmVDbGFzc09iai5TbG90UmVuZGVyRW5kKGZ1bmN0aW9uKGV2ZW50KSB7XHJcbiAgICAgIGlmIChldmVudC5zbG90ID09IEFkVW5pdFByb3BlcnRpZXNDbGFzc09iai5EZWZpbmVfc2xvdHNbXCJhZHMudG9wXCJdKSB7XHJcbiAgICAgICAgaWYgKCFUb3BMb2FkZWQpIHtcclxuICAgICAgICAgIGlmICghZXZlbnQuaXNFbXB0eSkge1xyXG4gICAgICAgICAgICBsZXQgZXZlbnRfc2l6ZSA9IGV2ZW50LnNpemUgKyBcIlwiO1xyXG4gICAgICAgICAgICBsZXQgZXZlbnRfdyA9IGV2ZW50X3NpemUuc3BsaXQoXCIsXCIpOyAgICAgICAgIFxyXG4gICAgICAgICAgICBpZiAoZXZlbnRfd1swXSA9PSBcIjExOTJcIikge1xyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhZHMudG9wXCIpLnNldEF0dHJpYnV0ZShcInN0eWxlXCIsIFwiYmFja2dyb3VuZC1jb2xvcjogcmdiKDIzMywgMjMzLCAyMzMpOyBjbGVhcjogYm90aDsgbWluLWhlaWdodDogYXV0byAhaW1wb3J0YW50OyB0ZXh0LWFsaWduOmNlbnRlcjsgcGFkZGluZzogMDsgd2lkdGg6IDEyMDJweDsgbWFyZ2luOiAwcHggYXV0bzsgYm9yZGVyOiA1cHggc29saWQgcmdiKDIzMywgMjMzLCAyMzMpOyBib3gtc2l6aW5nOiBib3JkZXItYm94O1wiKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICBsZXQgd2lkdGhfdG9wID0gKGV2ZW50X3dbMF0gPT0gXCIxXCIgfHwgZXZlbnRfc2l6ZSA9PSBcImZsdWlkXCIpID8gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhZHMudG9wXCIpLm9mZnNldFdpZHRoIDogcGFyc2VJbnQoZXZlbnRfd1swXSwgMTApOyBcclxuICAgICAgICAgICAgICBpZiAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ5Ym94aW1nXCIpKSB7XHJcbiAgICAgICAgICAgICAgICB3aWR0aF90b3AgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInlib3hpbWdcIikub2Zmc2V0V2lkdGg7XHJcbiAgICAgICAgICAgICAgfSAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhZHMudG9wXCIpLnNldEF0dHJpYnV0ZShcInN0eWxlXCIsIFwiY2xlYXI6IGJvdGg7IG1pbi1oZWlnaHQ6IGF1dG8gIWltcG9ydGFudDsgdGV4dC1hbGlnbjpjZW50ZXI7IHBhZGRpbmc6IDAgIWltcG9ydGFudDsgd2lkdGg6IFwiICsgcGFyc2VJbnQod2lkdGhfdG9wKzEwKSArIFwicHggIWltcG9ydGFudDtcIiArIFwibWFyZ2luOiAwcHggYXV0bzsgYm9yZGVyOiA1cHggc29saWQgcmdiKDIzMywgMjMzLCAyMzMpOyBib3gtc2l6aW5nOiBib3JkZXItYm94O1wiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgICAgZXZlbnQuc2l6ZSA9PSBcIjk3MCwxMzBcIiB8fFxyXG4gICAgICAgICAgICAgIGV2ZW50LnNpemUgPT0gXCI5NzAsOTBcIiB8fFxyXG4gICAgICAgICAgICAgIGV2ZW50LnNpemUgPT0gXCI5ODAsMTAwXCIgfHxcclxuICAgICAgICAgICAgICBldmVudC5zaXplID09IFwiMTE5Miw5MFwiIHx8XHJcbiAgICAgICAgICAgICAgZXZlbnQuc2l6ZSA9PSBcIjExOTIsMTMwXCIgfHxcclxuICAgICAgICAgICAgICBldmVudC5zaXplID09IFwiMTAwNSwxMjRcIlxyXG4gICAgICAgICAgICApIHtcclxuICAgICAgICAgICAgICBBZFVuaXRGdW5jdGlvbnNDbGFzc09iai5maW5kQWxsRGl2X2Z1bmMoKTtcclxuICAgICAgICAgICAgICBsZXQgZ3JpZGZpcm1hID0gKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZ3JpZDEyODBfMlwiKSAhPSBudWxsIHx8IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZ3JpZDEyODBfMlwiKSAhPSB1bmRlZmluZWQpID8gdHJ1ZTogZmFsc2U7XHJcbiAgICAgICAgICAgICAgbGV0IG5ld2dyaWQgPSAoKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZ3JpZDEyODBcIikgIT0gbnVsbCB8fCBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmdyaWQxMjgwXCIpICE9IHVuZGVmaW5lZCkgfHwgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZ3JpZDEyODBfMlwiKSAhPSBudWxsIHx8IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZ3JpZDEyODBfMlwiKSAhPSB1bmRlZmluZWQpKSA/IDE0NzA6IDEyMDA7ICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgIGlmIChncmlkZmlybWEgPT0gZmFsc2UgJiZcclxuICAgICAgICAgICAgICAgICgod2luZG93LmlubmVyV2lkdGggPiBuZXdncmlkICYmIHdpbmRvdy5kY1BhdGggPT0gXCI4LkNlbnRyYWwtMS5Ib21lXCIgJiYgQWRVbml0UHJvcGVydGllc0NsYXNzT2JqLlNsb3RzW1wiYWRzLm1pdnpha29uXCJdICYmXHJcbiAgICAgICAgICAgICAgICAgIEFkVW5pdFByb3BlcnRpZXNDbGFzc09iai5EZWZpbmVfbWl2emFrb25bXCJhZHMubWl2emFrb25cIl0gPT0gdW5kZWZpbmVkKSB8fCAoXHJcbiAgICAgICAgICAgICAgICAgIHdpbmRvdy5pbm5lcldpZHRoID4gbmV3Z3JpZCAmJiB3aW5kb3cuZGNQYXRoID09IFwiMjc3NS5LbmVzc2V0LTMyNDcyLnl1dmFsMTI4MFwiICYmIFxyXG4gICAgICAgICAgICAgICAgICBBZFVuaXRQcm9wZXJ0aWVzQ2xhc3NPYmouU2xvdHNbXCJhZHMubWl2emFrb25cIl0gJiYgQWRVbml0UHJvcGVydGllc0NsYXNzT2JqLkRlZmluZV9taXZ6YWtvbltcImFkcy5taXZ6YWtvblwiXSA9PSB1bmRlZmluZWQpXHJcbiAgICAgICAgICAgICAgICApKSB7XHJcbiAgICAgICAgICAgICAgICBBZFVuaXRUZW1wbGF0ZUZ1bmN0aW9uc0NsYXNzT2JqLmRlZmluZU1pdnpha29uX2Z1bmN0aW9uKFwiYWRzLm1pdnpha29uXCIpO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIE1haW5GdW5jdGlvbkNsYXNzT2JqLmdldFN0eWxlVG9wX2Z1bmMoZXZlbnQpOyAgICAgICAgICAgICBcclxuICAgICAgICAgICAgfSBcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBUb3BMb2FkZWQgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5maW5kQWxsRGl2X2Z1bmMoKTtcclxuXHJcbiAgLy9Ccm93c2kgaW4gaG91c2VcclxuICBpZiAod2luZG93LmRjQ0cgPT0gXCJhcnRpY2xlXCIpIHRoaXMuYWRkX0Jyb3dzaV9pbmhvdXNlKFwieW5ldFwiKTtcclxuXHJcblxyXG4gICAgLy9NaXZ6YWtpbSBmaXJtYSBiYW5uZXJzXHJcbiAgICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5mbGFzaC1hZC10cnVlXCIpKSB7IFxyXG4gICAgICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5BY2NvcmRpb25TZWN0aW9uXCIpKSB7ICAgICAgXHJcbiAgICAgICAgbGV0IGJhbm5lcl9zaXplcyA9ICAgW1snZmx1aWQnXSwgWzcyOCwgOTBdXTtcclxuICAgICAgICBjb25zdCBmbGFzaF9lbGVtZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuQWNjb3JkaW9uU2VjdGlvblwiKTtcclxuICAgICAgICBsZXQgZWxlbWVudF9hcnJheSA9IEFycmF5LmZyb20oZmxhc2hfZWxlbWVudHMpO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgNTsgaSsrKSB7XHJcbiAgICAgICAgICBsZXQgYmFubmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICBiYW5uZXIuc2V0QXR0cmlidXRlKCdpZCcsICdhZHMuZmxhc2guYmFubmVyLicgKyBpKTsgICAgICBcclxuICAgICAgICAgIGJhbm5lci5zZXRBdHRyaWJ1dGUoJ3N0eWxlJywnbWFyZ2luOjEwcHggMjlweCAyNXB4IDA7Jyk7ICAgICAgICAgICAgXHJcbiAgICAgICAgICBpZiAoZWxlbWVudF9hcnJheS5sZW5ndGggPj0gNSppICYmIGVsZW1lbnRfYXJyYXlbNippXSAhPSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgZWxlbWVudF9hcnJheVsoNippKS0xXS5wYXJlbnROb2RlLmluc2VydEJlZm9yZShiYW5uZXIsIGVsZW1lbnRfYXJyYXlbKDYqaSktMV0ubmV4dFNpYmxpbmcpO1xyXG4gICAgICAgICAgICB0aGlzLmRlZmluZVNsb3RzX2Z1bmMoYmFubmVyLmlkLCBiYW5uZXJfc2l6ZXMpOyAgIFxyXG4gICAgICAgICAgfSAgXHJcbiAgICAgICAgfVxyXG4gICAgICB9ICAgICAgXHJcbiAgICB9XHJcblxyXG4gICAgLy8gZGVmaW5lIHByb21vXHJcbiAgICBpZiAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhZHMucHJvbW8ubWFnYXppbmVzXCIpKSB7XHJcbiAgICAgIGxldCBwcm9tb19zbG90ID0gXCJhZHMucHJvbW8ubWFnYXppbmVzXCI7XHJcbiAgICAgIGxldCBwcm9tb19iYW5uZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChwcm9tb19zbG90KTtcclxuICAgICAgbGV0IHByb21vX3NpemUgPSBwcm9tb19iYW5uZXIuZ2V0QXR0cmlidXRlKFwiZGF0YS1hZC1zaXplc1wiKTtcclxuICAgICAgbGV0IHByb21vX3NpemVfb2JqO1xyXG4gICAgICBpZiAocHJvbW9fc2l6ZSA9PSB1bmRlZmluZWQgfHwgcHJvbW9fc2l6ZSA9PSBudWxsIHx8IHByb21vX3NpemUgPT0gW251bGwsbnVsbF0gfHwgcHJvbW9fc2l6ZS5pbmNsdWRlcyhudWxsKSkge1xyXG4gICAgICAgICBwcm9tb19zaXplX29iaiA9IFtbMTE5MiwgMTAwXSwgWzk3MCwgMTI1XV07XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcHJvbW9fc2l6ZV9vYmogPSBKU09OLnBhcnNlKHByb21vX3NpemUpO1xyXG4gICAgICB9XHJcbiAgICAgXHJcbiAgICAgIGxldCBwcm9tb19mbHVpZCA9IHByb21vX2Jhbm5lci5nZXRBdHRyaWJ1dGUoXCJkYXRhLWZsdWlkLWNoZWNrZWRcIik7XHJcbiAgICAgIGlmIChwcm9tb19mbHVpZCA9PSBcInRydWVcIiB8fCBwcm9tb19mbHVpZCA9PSB0cnVlKSB7XHJcbiAgICAgICAgICBsZXQgbmV3X3Byb21vX3NpemVzX29iajtcclxuICAgICAgICAgIGlmIChwcm9tb19zaXplX29ialsxXVswXSA9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgbmV3X3Byb21vX3NpemVzX29iaiA9IFtwcm9tb19zaXplX29iaiwgWydmbHVpZCddXTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIG5ld19wcm9tb19zaXplc19vYmogPSBbLi4ucHJvbW9fc2l6ZV9vYmosIFsnZmx1aWQnXV07XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICB0aGlzLmRlZmluZVNsb3RzX2Z1bmMocHJvbW9fc2xvdCwgbmV3X3Byb21vX3NpemVzX29iaik7ICAgICAgICAgICAgIFxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMuZGVmaW5lU2xvdHNfZnVuYyhwcm9tb19zbG90LCBwcm9tb19zaXplX29iaik7XHJcbiAgICAgIH1cclxuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQocHJvbW9fc2xvdCkuc2V0QXR0cmlidXRlKFwic3R5bGVcIiwgXCJiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmZmZmOyBtYXJnaW46MCBhdXRvIDE1cHggYXV0bzsgdGV4dC1hbGlnbjpjZW50ZXI7IGRpc3BsYXk6IGZsZXg7IGp1c3RpZnktY29udGVudDogY2VudGVyO1wiKTtcclxuICAgIH1cclxuICAgICBcclxuICAgIGlmIChBZFVuaXRQcm9wZXJ0aWVzQ2xhc3NPYmouU2xvdHNbdGhpcy5PemVuX3JpZ2h0XSkge1x0XHRcdFx0XHRcdFx0XHRcdFxyXG4gICAgICBpZiAod2luZG93LmlubmVyV2lkdGggPiAxNTIwKSB7XHJcbiAgICAgICAgdGhpcy5kZWZpbmVTbG90c19mdW5jKHRoaXMuT3plbl9yaWdodCwgQWRVbml0QWRkaXRpb25hbFN0eWxlc0NsYXNzLnJlc2l6ZU96ZW5fZnVuYygpKTtcclxuICAgICAgICBhZFVuaXRTdHlsZXNDbGFzc09ialt0aGlzLk96ZW5fcmlnaHRdKHRoaXMuT3plbl9yaWdodCk7XHJcbiAgICAgIH0gICAgICBcclxuICAgIH1cclxuICAgIGlmICh3aW5kb3cuaXNBYnJvYWQgPT0gdHJ1ZSAmJiBBZFVuaXRQcm9wZXJ0aWVzQ2xhc3NPYmouU2xvdHNbdGhpcy5PemVuX2xlZnRdKSB7XHJcbiAgICAgIHRoaXMuZGVmaW5lU2xvdHNfZnVuYyh0aGlzLk96ZW5fbGVmdCwgQWRVbml0QWRkaXRpb25hbFN0eWxlc0NsYXNzLnJlc2l6ZU96ZW5ZbnNZbnZfZnVuYygpKTtcclxuICAgICAgYWRVbml0U3R5bGVzQ2xhc3NPYmpbdGhpcy5PemVuX2xlZnRdKHRoaXMuT3plbl9sZWZ0KTtcclxuICAgIH1cclxuICAgIGlmICh3aW5kb3cuaXNBYnJvYWQgPT0gdHJ1ZSAmJiBBZFVuaXRQcm9wZXJ0aWVzQ2xhc3NPYmouU2xvdHNbXCJhZHMudmlkZW9feW5ldHR2XCJdKSB7XHJcbiAgICAgIHRoaXMuZGVmaW5lU2xvdHNfZnVuYyhcImFkcy52aWRlb195bmV0dHZcIiwgWzEsIDFdKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZ3JpZDEyODBfMlwiKSAhPSBudWxsIHx8IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZ3JpZDEyODBfMlwiKSAhPSB1bmRlZmluZWQpKSB7XHJcblxyXG4gICAgICBpZiAoQWRVbml0UHJvcGVydGllc0NsYXNzT2JqLlNsb3RzW1wiYWRzLmJveC5lbGVjdGlvbnNcIl0pIHtcclxuICAgICAgICB0aGlzLmRlZmluZVNsb3RzX2Z1bmMoXCJhZHMuYm94LmVsZWN0aW9uc1wiLCBbMTkwLCAyMThdKTtcclxuICAgICAgfVxyXG4gICAgICBpZiAoQWRVbml0UHJvcGVydGllc0NsYXNzT2JqLlNsb3RzW1wiYWRzLmJveC5uYWRsYW4uMVwiXSkge1xyXG4gICAgICAgIHRoaXMuZGVmaW5lU2xvdHNfZnVuYyhcImFkcy5ib3gubmFkbGFuLjFcIiwgW1snZmx1aWQnXSwgWzE5MCwgMTg4XV0pO1xyXG4gICAgICB9XHJcbiAgICAgIGlmIChBZFVuaXRQcm9wZXJ0aWVzQ2xhc3NPYmouU2xvdHNbXCJhZHMuYm94Lm5hZGxhbi4yXCJdKSB7XHJcbiAgICAgICAgdGhpcy5kZWZpbmVTbG90c19mdW5jKFwiYWRzLmJveC5uYWRsYW4uMlwiLCBbWydmbHVpZCddLCBbMTkwLCAxODhdXSk7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKEFkVW5pdFByb3BlcnRpZXNDbGFzc09iai5TbG90c1tcImFkcy5ib3gubmFkbGFuLjNcIl0pIHtcclxuICAgICAgICB0aGlzLmRlZmluZVNsb3RzX2Z1bmMoXCJhZHMuYm94Lm5hZGxhbi4zXCIsIFtbJ2ZsdWlkJ10sIFsxOTAsIDE4OF1dKTsgXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmIChBZFVuaXRQcm9wZXJ0aWVzQ2xhc3NPYmouU2xvdHNbXCJhZHMuYm94LmxhaXNoYS4xXCJdKSB7XHJcbiAgICAgICAgdGhpcy5kZWZpbmVTbG90c19mdW5jKFwiYWRzLmJveC5sYWlzaGEuMVwiLCBbWydmbHVpZCddLCBbMjY4LCAzMDVdXSk7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKEFkVW5pdFByb3BlcnRpZXNDbGFzc09iai5TbG90c1tcImFkcy5ib3gubGFpc2hhLjJcIl0pIHtcclxuICAgICAgICB0aGlzLmRlZmluZVNsb3RzX2Z1bmMoXCJhZHMuYm94LmxhaXNoYS4yXCIsIFtbJ2ZsdWlkJ10sIFsyNjgsIDMwNV1dKTtcclxuICAgICAgfVxyXG4gICAgICBpZiAoQWRVbml0UHJvcGVydGllc0NsYXNzT2JqLlNsb3RzW1wiYWRzLmJveC5tZW50YS4xXCJdKSB7XHJcbiAgICAgICAgdGhpcy5kZWZpbmVTbG90c19mdW5jKFwiYWRzLmJveC5tZW50YS4xXCIsIFtbJ2ZsdWlkJ10sIFsxOTAsIDIxOF1dKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgZm9yIChsZXQgYmNvbnRlbnRfaSA9IDE7IGJjb250ZW50X2kgPCAxMDsgYmNvbnRlbnRfaSsrKSB7XHJcbiAgICAgICAgaWYgKEFkVW5pdFByb3BlcnRpZXNDbGFzc09iai5TbG90c1tcImFkcy5ib3guY29udGVudC5cIiArIGJjb250ZW50X2ldKSB7XHJcbiAgICAgICAgICB0aGlzLmRlZmluZVNsb3RzX2Z1bmMoXCJhZHMuYm94LmNvbnRlbnQuXCIgKyBiY29udGVudF9pLCBbWydmbHVpZCddLCBbMTkwLCAyMTBdXSk7XHJcbiAgICAgICAgfSAgICAgICAgICAgICBcclxuICAgICAgfVxyXG5cclxuICAgICAgbGV0IG1lbnRhX2Jhbm5lcnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdkaXZbaWRePVwiYWRzLmJveC5tZW50YVwiXScpO1xyXG4gICAgICBtZW50YV9iYW5uZXJzLmZvckVhY2goZnVuY3Rpb24odXNlckl0ZW0pIHtcclxuICAgICAgICAgbGV0IHVuaXQgPSB1c2VySXRlbS5pZDtcclxuICAgICAgICAgaWYgKHVzZXJJdGVtICE9IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgbGV0IGN1cnJlbnQgPSB1c2VySXRlbTtcclxuICAgICAgICAgIGxldCBzdHlsZV9kaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3R5bGVcIik7XHJcbiAgICAgICAgICBzdHlsZV9kaXYuaW5uZXJIVE1MID0gYGRpdltpZD0nJHt1bml0fSddLCBkaXZbaWQ9JyR7dW5pdH0nXSBpZnJhbWUge1xyXG4gICAgICAgICAgIG1pbi1oZWlnaHQ6IDIxOHB4ICFpbXBvcnRhbnQ7ICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgIH1gO1xyXG4gICAgICAgICAgY3VycmVudC5wYXJlbnROb2RlLmluc2VydEJlZm9yZShzdHlsZV9kaXYsIGN1cnJlbnQubmV4dFNpYmxpbmcpOyBcclxuICAgICAgICAgfVxyXG4gICAgICAgICBsZXQgTWVudGFMb2FkZWQgPSBmYWxzZTtcclxuICAgICAgICAgIEluZnJhc3J1Y3R1cmVDbGFzc09iai5TbG90UmVuZGVyRW5kKGZ1bmN0aW9uKGV2ZW50KSB7IFxyXG4gICAgICAgICAgaWYgKGV2ZW50LnNsb3QgPT0gQWRVbml0UHJvcGVydGllc0NsYXNzT2JqLkRlZmluZV9zbG90c1t1bml0XSkge1xyXG4gICAgICAgICAgICBpZiAoIU1lbnRhTG9hZGVkKSB7XHJcbiAgICAgICAgICAgICAgaWYgKCFldmVudC5pc0VtcHR5KSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgc3BsaXRlZF9pZCA9IHVuaXQuc3BsaXQoXCJhZHMuXCIpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2lmcmFtZVtpZCo9JyArICdcIicrc3BsaXRlZF9pZFsxXSsnXCInICsnXScpICE9IG51bGwgfHwgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaWZyYW1lW2lkKj0nICsgJ1wiJytzcGxpdGVkX2lkWzFdKydcIicgKyddJykgIT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgIGxldCBiYW5uZXJfc3R5bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdpZnJhbWVbaWQqPScgKyAnXCInK3NwbGl0ZWRfaWRbMV0rJ1wiJyArJ10nKS5zdHlsZTtcclxuICAgICAgICAgICAgICAgICAgYmFubmVyX3N0eWxlLm1pbkhlaWdodCA9IFwiMjE4cHhcIjtcclxuICAgICAgICAgICAgICAgIH0gICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICBNZW50YUxvYWRlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICB9XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgICBcclxuICAgICAgICBsZXQgbmFkbGFuX2Jhbm5lcnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdkaXZbaWRePVwiYWRzLmJveC5uYWRsYW5cIl0nKTtcclxuICAgICAgICBuYWRsYW5fYmFubmVycy5mb3JFYWNoKGZ1bmN0aW9uKHVzZXJJdGVtKSB7XHJcbiAgICAgICAgIGxldCB1bml0ID0gdXNlckl0ZW0uaWQ7XHJcbiAgICAgICAgIGlmICh1c2VySXRlbSAhPSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgIGxldCBjdXJyZW50ID0gdXNlckl0ZW07XHJcbiAgICAgICAgICBsZXQgc3R5bGVfZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInN0eWxlXCIpO1xyXG4gICAgICAgICAgc3R5bGVfZGl2LmlubmVySFRNTCA9IGBkaXZbaWQ9JyR7dW5pdH0nXSwgZGl2W2lkPScke3VuaXR9J10gaWZyYW1lIHtcclxuICAgICAgICAgICBtaW4taGVpZ2h0OiAxNzhweCAhaW1wb3J0YW50OyAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICB9YDtcclxuICAgICAgICAgIGN1cnJlbnQucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoc3R5bGVfZGl2LCBjdXJyZW50Lm5leHRTaWJsaW5nKTsgXHJcbiAgICAgICAgIH1cclxuICAgICAgICAgXHJcbiAgICAgICAgIGxldCBOYWRsYW5Mb2FkZWQgPSBmYWxzZTtcclxuICAgICAgICAgSW5mcmFzcnVjdHVyZUNsYXNzT2JqLlNsb3RSZW5kZXJFbmQoZnVuY3Rpb24oZXZlbnQpIHsgXHJcbiAgICAgICAgIGlmIChldmVudC5zbG90ID09IEFkVW5pdFByb3BlcnRpZXNDbGFzc09iai5EZWZpbmVfc2xvdHNbdW5pdF0pIHtcclxuICAgICAgICAgIGlmICghTmFkbGFuTG9hZGVkKSB7XHJcbiAgICAgICAgICAgIGlmICghZXZlbnQuaXNFbXB0eSkge1xyXG4gICAgICAgICAgICAgIGxldCBzcGxpdGVkX2lkID0gdW5pdC5zcGxpdChcImFkcy5cIik7XHJcbiAgICAgICAgICAgICAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2lmcmFtZVtpZCo9JyArICdcIicrc3BsaXRlZF9pZFsxXSsnXCInICsnXScpICE9IG51bGwgfHwgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaWZyYW1lW2lkKj0nICsgJ1wiJytzcGxpdGVkX2lkWzFdKydcIicgKyddJykgIT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgYmFubmVyX3N0eWxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaWZyYW1lW2lkKj0nICsgJ1wiJytzcGxpdGVkX2lkWzFdKydcIicgKyddJykuc3R5bGU7XHJcbiAgICAgICAgICAgICAgICBiYW5uZXJfc3R5bGUubWluSGVpZ2h0ID0gXCIxNzhweFwiO1xyXG4gICAgICAgICAgICAgIH0gICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBOYWRsYW5Mb2FkZWQgPSB0cnVlO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBcclxuICAgICAgICBsZXQgbGFpc2hhX2Jhbm5lcnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdkaXZbaWRePVwiYWRzLmJveC5sYWlzaGFcIl0nKTtcclxuICAgICAgICBsYWlzaGFfYmFubmVycy5mb3JFYWNoKGZ1bmN0aW9uKHVzZXJJdGVtKSB7XHJcbiAgICAgICAgIGxldCB1bml0ID0gdXNlckl0ZW0uaWQ7XHJcbiAgICAgICAgIGlmICh1c2VySXRlbSAhPSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgIGxldCBjdXJyZW50ID0gdXNlckl0ZW07XHJcbiAgICAgICAgICBsZXQgc3R5bGVfZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInN0eWxlXCIpO1xyXG4gICAgICAgICAgc3R5bGVfZGl2LmlubmVySFRNTCA9IGBkaXZbaWQ9JyR7dW5pdH0nXSwgZGl2W2lkPScke3VuaXR9J10gaWZyYW1lIHtcclxuICAgICAgICAgICBtaW4taGVpZ2h0OiAyODdweCAhaW1wb3J0YW50OyAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICB9YDtcclxuICAgICAgICAgIGN1cnJlbnQucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoc3R5bGVfZGl2LCBjdXJyZW50Lm5leHRTaWJsaW5nKTsgXHJcbiAgICAgICAgIH1cclxuXHJcbiAgICAgICAgIGxldCBMYWlzaGFMb2FkZWQgPSBmYWxzZTtcclxuICAgICAgICAgIEluZnJhc3J1Y3R1cmVDbGFzc09iai5TbG90UmVuZGVyRW5kKGZ1bmN0aW9uKGV2ZW50KSB7IFxyXG4gICAgICAgICAgaWYgKGV2ZW50LnNsb3QgPT0gQWRVbml0UHJvcGVydGllc0NsYXNzT2JqLkRlZmluZV9zbG90c1t1bml0XSkge1xyXG4gICAgICAgICAgICBpZiAoIUxhaXNoYUxvYWRlZCkge1xyXG4gICAgICAgICAgICAgIGlmICghZXZlbnQuaXNFbXB0eSkge1xyXG4gICAgICAgICAgICAgICAgbGV0IHNwbGl0ZWRfaWQgPSB1bml0LnNwbGl0KFwiYWRzLlwiKTtcclxuICAgICAgICAgICAgICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdpZnJhbWVbaWQqPScgKyAnXCInK3NwbGl0ZWRfaWRbMV0rJ1wiJyArJ10nKSAhPSBudWxsIHx8IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2lmcmFtZVtpZCo9JyArICdcIicrc3BsaXRlZF9pZFsxXSsnXCInICsnXScpICE9IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgICBsZXQgYmFubmVyX3N0eWxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaWZyYW1lW2lkKj0nICsgJ1wiJytzcGxpdGVkX2lkWzFdKydcIicgKyddJykuc3R5bGU7XHJcbiAgICAgICAgICAgICAgICAgIGJhbm5lcl9zdHlsZS5taW5IZWlnaHQgPSBcIjI4N3B4XCI7XHJcbiAgICAgICAgICAgICAgICB9ICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgTGFpc2hhTG9hZGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgIC8vIGNvbXBvbmVudGEgc3RyaXAgbWFya2V0aW5nXHJcbiAgICAgIGxldCBzdHJpcF9tYXJrZXRpbmdfYmFubmVycyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2RpdltpZF49XCJhZHMuYm94LmNvbnRlbnRcIl0nKTtcclxuICAgICAgc3RyaXBfbWFya2V0aW5nX2Jhbm5lcnMuZm9yRWFjaChmdW5jdGlvbih1c2VySXRlbSkge1xyXG4gICAgICAgICBsZXQgdW5pdCA9IHVzZXJJdGVtLmlkO1xyXG4gICAgICAgICBpZiAodXNlckl0ZW0gIT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICBsZXQgY3VycmVudCA9IHVzZXJJdGVtO1xyXG4gICAgICAgICAgbGV0IHN0eWxlX2RpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzdHlsZVwiKTtcclxuICAgICAgICAgIHN0eWxlX2Rpdi5pbm5lckhUTUwgPSBgZGl2W2lkPScke3VuaXR9J10sIGRpdltpZD0nJHt1bml0fSddIGlmcmFtZSB7XHJcbiAgICAgICAgICAgbWluLWhlaWdodDogMjEwcHggIWltcG9ydGFudDsgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgfWA7XHJcbiAgICAgICAgICBjdXJyZW50LnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHN0eWxlX2RpdiwgY3VycmVudC5uZXh0U2libGluZyk7IFxyXG4gICAgICAgICB9XHJcbiAgICAgICAgIGxldCBTdHJpcE1hcmxldGluZ0xvYWRlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgSW5mcmFzcnVjdHVyZUNsYXNzT2JqLlNsb3RSZW5kZXJFbmQoZnVuY3Rpb24oZXZlbnQpIHsgXHJcbiAgICAgICAgICBpZiAoZXZlbnQuc2xvdCA9PSBBZFVuaXRQcm9wZXJ0aWVzQ2xhc3NPYmouRGVmaW5lX3Nsb3RzW3VuaXRdKSB7XHJcbiAgICAgICAgICAgIGlmICghU3RyaXBNYXJsZXRpbmdMb2FkZWQpIHtcclxuICAgICAgICAgICAgICBpZiAoIWV2ZW50LmlzRW1wdHkpIHtcclxuICAgICAgICAgICAgICAgIGxldCBzcGxpdGVkX2lkID0gdW5pdC5zcGxpdChcImFkcy5cIik7XHJcbiAgICAgICAgICAgICAgICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaWZyYW1lW2lkKj0nICsgJ1wiJytzcGxpdGVkX2lkWzFdKydcIicgKyddJykgIT0gbnVsbCB8fCBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdpZnJhbWVbaWQqPScgKyAnXCInK3NwbGl0ZWRfaWRbMV0rJ1wiJyArJ10nKSAhPSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgICAgbGV0IGJhbm5lcl9zdHlsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2lmcmFtZVtpZCo9JyArICdcIicrc3BsaXRlZF9pZFsxXSsnXCInICsnXScpLnN0eWxlO1xyXG4gICAgICAgICAgICAgICAgICBiYW5uZXJfc3R5bGUubWluSGVpZ2h0ID0gXCIyMTBweFwiO1xyXG4gICAgICAgICAgICAgICAgfSAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIFN0cmlwTWFybGV0aW5nTG9hZGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgIH1cclxuICAgICAgICAgIH0pO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGlmIChBZFVuaXRQcm9wZXJ0aWVzQ2xhc3NPYmouU2xvdHNbXCJhZHMuc3RyaXAuY2hhbm5lbC4xXCJdKSB7XHJcbiAgICAgIHRoaXMuZGVmaW5lU2xvdHNfZnVuYyhcImFkcy5zdHJpcC5jaGFubmVsLjFcIiwgW1snZmx1aWQnXSwgWzMwMCwgMjU2XV0pOyAgICBcclxuICAgICAgbGV0IFN0cmlwQmFubmVyTG9hZGVkID0gZmFsc2U7XHJcbiAgICAgIEluZnJhc3J1Y3R1cmVDbGFzc09iai5TbG90UmVuZGVyRW5kKGZ1bmN0aW9uKGV2ZW50KSB7XHJcbiAgICAgICAgaWYgKGV2ZW50LnNsb3QgPT0gQWRVbml0UHJvcGVydGllc0NsYXNzT2JqLkRlZmluZV9zbG90c1tcImFkcy5zdHJpcC5jaGFubmVsLjFcIl0pIHtcclxuICAgICAgICAgIGlmICghU3RyaXBCYW5uZXJMb2FkZWQpIHtcclxuICAgICAgICAgICAgaWYgKCFldmVudC5pc0VtcHR5KSB7XHJcbiAgICAgICAgICAgICAgbGV0IFN0cmlwc3R5bGVfYmFubmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInN0eWxlXCIpO1xyXG4gICAgICAgICAgICAgIFN0cmlwc3R5bGVfYmFubmVyLmlubmVySFRNTCA9IGBkaXZbaWQ9J2Fkcy5zdHJpcC5jaGFubmVsLjEnXSB7XHJcbiAgICAgICAgICAgICAgICB3aWR0aDozMDBweCAhaW1wb3J0YW50O1xyXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiAyODBweCAhaW1wb3J0YW50OyBcclxuICAgICAgICAgICAgICAgIGJvcmRlci1ib3R0b206IDVweCBzb2xpZCAjMTQxN2FjOyAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgIGRpdltpZD0nYWRzLnN0cmlwLmNoYW5uZWwuMSddIGlmcmFtZSB7XHJcbiAgICAgICAgICAgICAgICAgd2lkdGg6MzAwcHggIWltcG9ydGFudDtcclxuICAgICAgICAgICAgICAgICBoZWlnaHQ6IDI4MHB4ICFpbXBvcnRhbnQ7XHJcbiAgICAgICAgICAgICAgIH1gO1xyXG4gICAgICAgICAgICAgIGxldCBzdHJpcF9iYW5uZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFkcy5zdHJpcC5jaGFubmVsLjFcIik7XHJcbiAgICAgICAgICAgICAgLy9zdHJpcF9iYW5uZXIuYXBwZW5kQ2hpbGQoU3RyaXBzdHlsZV9iYW5uZXIpOyBcclxuICAgICAgICAgICAgICBzdHJpcF9iYW5uZXIucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoU3RyaXBzdHlsZV9iYW5uZXIsIHN0cmlwX2Jhbm5lci5uZXh0U2libGluZyk7IFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFN0cmlwQmFubmVyTG9hZGVkID0gdHJ1ZTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vQmFubmVycyBvbiB0aGUgcGFnZSwgd2hlcmUgYmxvZyB3aWRnZXQgaXMgZXhpc3RzXHJcbiAgICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5ibG9ncy1hdXRvLWZlZWQtd2lkZ2V0XCIpIHx8IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYXJ0aWNsZS1ibG9nLWNvbXBvbmVudGEtd3JhcHBlclwiKSkge1xyXG4gICAgICAgIC8vIHdhaXQgZm9yIGVsZW1lbnRzIC0gYXBwZWFycyBqdXN0IHdoZW4gc2Nyb2xsaW5nLCBjaGVja2luZyBmb3IgZWxlbWVudCBhbmQgaWYgYSBkaXYgd2FzIGNyZWF0ZWRcclxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywoZXZlbnQpID0+IHtcclxuICAgICAgICAgIGZ1bmN0aW9uIGNyZWF0ZV9hbmRfZGVmaW5lKG51bSwgYWZ0ZXJfZGl2KSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgYmxvZ19iYW5uZXJfc2l6ZXMgPSAgIFtbJ2ZsdWlkJ10sIFs3MjgsIDkwXV07XHJcbiAgICAgICAgICAgICAgICBsZXQgYmxvZ19iYW5uZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgICAgIGJsb2dfYmFubmVyLnNldEF0dHJpYnV0ZSgnaWQnLCAnYWRzLmlucmVhZC4nICsgbnVtKTsgICAgICBcclxuICAgICAgICAgICAgICAgIGxldCBibG9nX2Jhbm5lcl9zdHlsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzdHlsZVwiKTtcclxuICAgICAgICAgICAgICAgIGJsb2dfYmFubmVyX3N0eWxlLmlubmVySFRNTCA9IGBkaXZbaWQ9JyR7YmxvZ19iYW5uZXIuaWR9J10ge1xyXG4gICAgICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4ICFpbXBvcnRhbnQ7XHJcbiAgICAgICAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyICFpbXBvcnRhbnQ7XHJcbiAgICAgICAgICAgICAgICAgIG1hcmdpbjogMHB4IDAgMTVweCAwO1xyXG4gICAgICAgICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7ICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgfWA7IFxyXG4gICAgICAgICAgICAgICAgY29uc3QgYmxvZ3NfZWxlbWVudHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmJsb2dzLWl0ZW0td3JhcHBlclwiKTtcclxuICAgICAgICAgICAgICAgIGxldCBibG9nc19hcnJheSA9IEFycmF5LmZyb20oYmxvZ3NfZWxlbWVudHMpO1xyXG4gICAgICAgICAgICAgICAgYmxvZ3NfYXJyYXlbYWZ0ZXJfZGl2XS5wYXJlbnROb2RlLmluc2VydEJlZm9yZShibG9nX2Jhbm5lciwgYmxvZ3NfYXJyYXlbYWZ0ZXJfZGl2XS5uZXh0U2libGluZyk7XHJcbiAgICAgICAgICAgICAgICBibG9nX2Jhbm5lci5wYXJlbnROb2RlLmluc2VydEJlZm9yZShibG9nX2Jhbm5lcl9zdHlsZSwgYmxvZ19iYW5uZXIubmV4dFNpYmxpbmcpOyAgXHJcblxyXG4gICAgICAgICAgICAgICAgQWRVbml0RnVuY3Rpb25zQ2xhc3NPYmouZGVmaW5lU2xvdHNfZnVuYyhibG9nX2Jhbm5lci5pZCwgYmxvZ19iYW5uZXJfc2l6ZXMpO1xyXG4gICAgICAgICAgICAgICAgZ29vZ2xldGFnLmNtZC5wdXNoKGZ1bmN0aW9uKCkge2dvb2dsZXRhZy5kaXNwbGF5KFwiYWRzLmlucmVhZC5cIiArIG51bSk7fSk7IFxyXG4gICAgICAgICAgICAgICAgLy9ibG9nX2Jhbm5lci5zZXRBdHRyaWJ1dGUoJ3N0eWxlJywnZGlzcGxheTogZmxleCAhaW1wb3J0YW50OyBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsgbWFyZ2luOiAwcHggMCAxNXB4IDA7IHRleHQtYWxpZ246IGNlbnRlcjsnKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGlmKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuYmxvZ3MtaXRlbS13cmFwcGVyXCIpWzNdICYmICFkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFkcy5pbnJlYWQuMVwiKSkge1xyXG4gICAgICAgICAgICBjcmVhdGVfYW5kX2RlZmluZSgxLCAzKTtcclxuICAgICAgICAgIH0gZWxzZSBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5ibG9ncy1pdGVtLXdyYXBwZXJcIilbN10gJiYgIWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYWRzLmlucmVhZC4yXCIpKSB7XHJcbiAgICAgICAgICAgIGNyZWF0ZV9hbmRfZGVmaW5lKDIsIDcpO1xyXG4gICAgICAgICAgfSBlbHNlIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmJsb2dzLWl0ZW0td3JhcHBlclwiKVsxMV0gJiYgIWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYWRzLmlucmVhZC4zXCIpKSB7XHJcbiAgICAgICAgICAgIGNyZWF0ZV9hbmRfZGVmaW5lKDMsIDExKTtcclxuICAgICAgICAgIH0gZWxzZSBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5ibG9ncy1pdGVtLXdyYXBwZXJcIilbMTVdICYmICFkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFkcy5pbnJlYWQuNFwiKSkge1xyXG4gICAgICAgICAgICBjcmVhdGVfYW5kX2RlZmluZSg0LCAxNSk7XHJcbiAgICAgICAgICB9ICAgICAgICAgICAgICAgICBcclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgbWFnYXppbmVzMjAyNSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubWFnYXppbmUyMDI1XCIpO1xyXG5cclxuICAgIGlmICh3aW5kb3cueW5ldF9zaXRlcyAmJiAhbWFnYXppbmVzMjAyNSkge1xyXG4gICAgICBpZiAoQWRVbml0UHJvcGVydGllc0NsYXNzT2JqLlNsb3RzW1wiYWRzLnN0cmlwLmNvbnRlbnQuMVwiXSkge1xyXG4gICAgICAgIHRoaXMuZGVmaW5lU2xvdHNfZnVuYyhcImFkcy5zdHJpcC5jb250ZW50LjFcIiwgW1snZmx1aWQnXSwgWzM0NCwgMTAwXV0pO1xyXG4gICAgICAgIGxldCBzdHJpcGNvbnRlbnRfYmFubmVyXzEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3R5bGVcIik7XHJcbiAgICAgICAgc3RyaXBjb250ZW50X2Jhbm5lcl8xLmlubmVySFRNTCA9IGBkaXZbaWQ9J2Fkcy5zdHJpcC5jb250ZW50LjEnXXttaW4taGVpZ2h0OiAxMDBweCAhaW1wb3J0YW50O31cclxuICAgICAgICBkaXZbaWQ9J2Fkcy5zdHJpcC5jb250ZW50LjEnXSBpZnJhbWUge21pbi1oZWlnaHQ6IDEwMHB4ICFpbXBvcnRhbnQ7fWA7XHJcbiAgICAgICAgbGV0IHN0cmlwX2Jhbm5lcl8xID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhZHMuc3RyaXAuY29udGVudC4xXCIpO1xyXG4gICAgICAgIHN0cmlwX2Jhbm5lcl8xLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHN0cmlwY29udGVudF9iYW5uZXJfMSwgc3RyaXBfYmFubmVyXzEubmV4dFNpYmxpbmcpOyBcclxuICAgICAgfVxyXG4gICAgICBpZiAoQWRVbml0UHJvcGVydGllc0NsYXNzT2JqLlNsb3RzW1wiYWRzLnN0cmlwLmNvbnRlbnQuMlwiXSkge1xyXG4gICAgICAgIHRoaXMuZGVmaW5lU2xvdHNfZnVuYyhcImFkcy5zdHJpcC5jb250ZW50LjJcIiwgW1snZmx1aWQnXSwgWzM0NCwgMTAwXV0pO1xyXG4gICAgICAgIGxldCBzdHJpcGNvbnRlbnRfYmFubmVyXzIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3R5bGVcIik7XHJcbiAgICAgICAgc3RyaXBjb250ZW50X2Jhbm5lcl8yLmlubmVySFRNTCA9IGBkaXZbaWQ9J2Fkcy5zdHJpcC5jb250ZW50LjInXXttaW4taGVpZ2h0OiAxMDBweCAhaW1wb3J0YW50O31cclxuICAgICAgICBkaXZbaWQ9J2Fkcy5zdHJpcC5jb250ZW50LjInXSBpZnJhbWUge21pbi1oZWlnaHQ6IDEwMHB4ICFpbXBvcnRhbnQ7fWA7XHJcbiAgICAgICAgbGV0IHN0cmlwX2Jhbm5lcl8yID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhZHMuc3RyaXAuY29udGVudC4yXCIpO1xyXG4gICAgICAgIHN0cmlwX2Jhbm5lcl8yLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHN0cmlwY29udGVudF9iYW5uZXJfMiwgc3RyaXBfYmFubmVyXzIubmV4dFNpYmxpbmcpOyBcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgaWYgKEFkVW5pdFByb3BlcnRpZXNDbGFzc09iai5TbG90c1tcImFkcy5ib3guY29udGVudC4xXCJdKSB7XHJcbiAgICAgICAgdGhpcy5kZWZpbmVTbG90c19mdW5jKFwiYWRzLmJveC5jb250ZW50LjFcIiwgWydmbHVpZCddKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIGxhaXNoYSBuZXcgZGVzaWduXHJcbiAgICBpZiAobWFnYXppbmVzMjAyNSkge1xyXG4gICAgICBjb25zdCBkZWZpbmVfbmF0aXZlc19tYWdhemluZXMgPSAoaWQsIHNpemVzLCBtaW5fc2l6ZSkgPT4ge1xyXG4gICAgICAgIGlmIChBZFVuaXRQcm9wZXJ0aWVzQ2xhc3NPYmouU2xvdHNbaWRdKSB7XHJcbiAgICAgICAgICB3aW5kb3cuQWRVbml0RnVuY3Rpb25zQ2xhc3NPYmouZGVmaW5lU2xvdHNfZnVuYyhpZCwgc2l6ZXMpO1xyXG4gICAgICAgICAgbGV0IGFkZF9zdHlsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzdHlsZVwiKTtcclxuICAgICAgICAgIGFkZF9zdHlsZS5pbm5lckhUTUwgPSBgZGl2W2lkPScke2lkfSdde21pbi1oZWlnaHQ6ICR7bWluX3NpemV9cHggIWltcG9ydGFudDt9XHJcbiAgICAgICAgICBkaXZbaWQ9JyR7aWR9J10gaWZyYW1lIHttaW4taGVpZ2h0OiAgJHttaW5fc2l6ZX1weCAhaW1wb3J0YW50O31gO1xyXG4gICAgICAgICAgbGV0IGFkZF9iYW5uZXJfMSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKTtcclxuICAgICAgICAgIGFkZF9iYW5uZXJfMS5wYXJlbnROb2RlLmluc2VydEJlZm9yZSggYWRkX3N0eWxlLCAgYWRkX2Jhbm5lcl8xLm5leHRTaWJsaW5nKTsgXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIGRlZmluZV9uYXRpdmVzX21hZ2F6aW5lcyhcImFkcy5kb250bWlzcy4xXCIsIFtbJ2ZsdWlkJ10sIFsyOTUsIDQxMF1dLCA0MTApO1xyXG4gICAgICBkZWZpbmVfbmF0aXZlc19tYWdhemluZXMoXCJhZHMuc3RyaXAuY29udGVudC4xXCIsIFtbJ2ZsdWlkJ10sIFsyOTksIDcwXV0sIDcwKTtcclxuICAgICAgZGVmaW5lX25hdGl2ZXNfbWFnYXppbmVzKFwiYWRzLmhvdGJveC4xXCIsIFtbJ2ZsdWlkJ10sIFs1OTUsIDU0OV1dLCA1NDkpO1xyXG4gICAgICBkZWZpbmVfbmF0aXZlc19tYWdhemluZXMoXCJhZHMuYm94Lm1hcmtldGluZy4xXCIsIFtbJ2ZsdWlkJ10sIFszODAsIDM4NF1dLCAzODQpO1xyXG4gICAgICBkZWZpbmVfbmF0aXZlc19tYWdhemluZXMoXCJhZHMuYm94Lm1hcmtldGluZy4yXCIsIFtbJ2ZsdWlkJ10sIFszODAsIDM4NF1dLCAzODQpOyAgXHJcbiAgICB9XHJcbiAgICBcclxuICAgIGZvciAobGV0IGhvdGJveF9pID0gMTsgaG90Ym94X2kgPCAzOyBob3Rib3hfaSsrKSB7XHJcbiAgICAgIGlmIChBZFVuaXRQcm9wZXJ0aWVzQ2xhc3NPYmouU2xvdHNbXCJhZHMuaG90Ym94Lm5hdGl2ZS5cIiArIGhvdGJveF9pXSkge1xyXG4gICAgICAgIHRoaXMuZGVmaW5lU2xvdHNfZnVuYyhcImFkcy5ob3Rib3gubmF0aXZlLlwiICsgaG90Ym94X2ksIFtbJ2ZsdWlkJ10sIFsxOTAsIDIwOF1dKTtcclxuICAgICAgICB9ICAgICAgICAgICAgIFxyXG4gICAgfVxyXG5cclxuICAgIGxldCBob3Rib3hfYmFubmVycyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2RpdltpZF49XCJhZHMuaG90Ym94Lm5hdGl2ZVwiXScpO1xyXG4gICAgaG90Ym94X2Jhbm5lcnMuZm9yRWFjaChmdW5jdGlvbihJdGVtKSB7XHJcbiAgICAgICBsZXQgdW5pdF9ob3Rib3ggPSBJdGVtLmlkO1xyXG4gICAgICAgbGV0IGhvdGJveExvYWRlZCA9IGZhbHNlO1xyXG4gICAgICAgIEluZnJhc3J1Y3R1cmVDbGFzc09iai5TbG90UmVuZGVyRW5kKGZ1bmN0aW9uKGV2ZW50KSB7IFxyXG4gICAgICAgIGlmIChldmVudC5zbG90ID09IEFkVW5pdFByb3BlcnRpZXNDbGFzc09iai5EZWZpbmVfc2xvdHNbdW5pdF9ob3Rib3hdKSB7XHJcbiAgICAgICAgICBpZiAoIWhvdGJveExvYWRlZCkge1xyXG4gICAgICAgICAgICBpZiAoIWV2ZW50LmlzRW1wdHkpIHtcclxuICAgICAgICAgICAgICBsZXQgc3R5bGVfaG90Ym94ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInN0eWxlXCIpO1xyXG4gICAgICAgICAgICAgIHN0eWxlX2hvdGJveC5pbm5lckhUTUwgPSBgZGl2W2lkPScke3VuaXRfaG90Ym94fSddIHtcclxuICAgICAgICAgICAgICAgICB3aWR0aDoxOTBweCAhaW1wb3J0YW50O1xyXG4gICAgICAgICAgICAgICAgIGhlaWdodDogMjA4cHggIWltcG9ydGFudDsgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIGRpdltpZD0nJHt1bml0X2hvdGJveH0nXSBpZnJhbWUge1xyXG4gICAgICAgICAgICAgICAgd2lkdGg6MTkwcHggIWltcG9ydGFudDtcclxuICAgICAgICAgICAgICAgIGhlaWdodDogMjA4cHggIWltcG9ydGFudDtcclxuICAgICAgICAgICAgICB9YDtcclxuICAgICAgICAgICAgICBJdGVtLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHN0eWxlX2hvdGJveCwgSXRlbS5uZXh0U2libGluZyk7ICBcclxuICAgICAgICAgICAgICBsZXQgc3BsaXRlZF9pZCA9IHVuaXRfaG90Ym94LnNwbGl0KFwiYWRzLlwiKTtcclxuICAgICAgICAgICAgICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaWZyYW1lW2lkKj0nICsgJ1wiJytzcGxpdGVkX2lkWzFdKydcIicgKyddJykgIT0gbnVsbCB8fCBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdpZnJhbWVbaWQqPScgKyAnXCInK3NwbGl0ZWRfaWRbMV0rJ1wiJyArJ10nKSAhPSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIGxldCBob3Rib3hfc3R5bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdpZnJhbWVbaWQqPScgKyAnXCInK3NwbGl0ZWRfaWRbMV0rJ1wiJyArJ10nKS5zdHlsZTtcclxuICAgICAgICAgICAgICAgIGhvdGJveF9zdHlsZS5tYXhIZWlnaHQgPSBcIjIxOHB4XCI7XHJcbiAgICAgICAgICAgICAgfSAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaG90Ym94TG9hZGVkID0gdHJ1ZTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgLy9HZXQgYWxsIGdlbmVyYWwgYmFubmVycyBvbiB0aGUgcGFnZSAod2l0aCBjbGFzcyBnZW5lcmFsX2Jhbm5lcl9hZCkgYW5kIGRlZmluZSB0aGVtLlxyXG4gICAgbGV0IGdlbmVyYWxfZGl2cyA9IG5ldyBBcnJheSgpO1xyXG4gICAgbGV0IG9sZF9kaXZzID1uZXcgQXJyYXkoKTtcclxuICAgIGxldCBuZXdfZGl2cyA9bmV3IEFycmF5KCk7XHJcbiAgICBsZXQgY2xhc3NOYW1lID0gd2luZG93LmdlbmVyYWxfYmFubmVyc19kaXZzO1xyXG4gICAgbGV0IGRpdl9zaXplcyA9IHdpbmRvdy5nZW5lcmFsX2Jhbm5lcnNfZGl2c19zaXplcztcclxuICAgIGxldCBjbGFzc25hbWVDb3VudCA9IGNsYXNzTmFtZS5sZW5ndGg7XHJcbiAgICBsZXQgdG9wc3RyaXBvbiA9IFwiYWRzLnRvcHN0cmlwb25fZGVza3RvcC4xXCI7XHJcbiAgICBsZXQgYm90dG9tc3RyaXBvbiA9IFwiYWRzLmJvdHRvbXN0cmlwb25fZGVza3RvcC4xXCI7XHJcbiAgICBsZXQgYm94XzEgPSBcImFkcy4zMDB4MjUwLjFcIjtcclxuICAgIGxldCBib3hfMiA9IFwiYWRzLjMwMHgyNTAuMlwiO1xyXG4gICAgbGV0IGJveF8zID0gXCJhZHMuMzAweDI1MC4zXCI7XHJcbiAgICBsZXQgYm94XzQgPSBcImFkcy4zMDB4MjUwLjRcIjtcclxuXHJcbiAgICBpZiAoY2xhc3NOYW1lICE9IFwiXCIpIHtcclxuICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBjbGFzc25hbWVDb3VudDsgaisrKSB7XHJcbiAgICAgICAgbGV0IGRpdl9zaXplID0gZGl2X3NpemVzW2pdO1xyXG4gICAgICAgIGxldCB3X2RpdiA9IGRpdl9zaXplLnN1YnN0cigwLCBkaXZfc2l6ZS5pbmRleE9mKFwieFwiKSk7XHJcbiAgICAgICAgbGV0IGhfZGl2ID0gZGl2X3NpemUuc3Vic3RyKGRpdl9zaXplLmluZGV4T2YoXCJ4XCIpICsgMSk7XHJcbiAgICAgICAgZ2VuZXJhbF9kaXZzLnB1c2goW2NsYXNzTmFtZVtqXSwgcGFyc2VJbnQod19kaXYsIDEwKSwgcGFyc2VJbnQoaF9kaXYsIDEwKV0pO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5uZXdNZWRpYSA9PSAnVHJ1ZScpIHtcclxuICAgICAgICAgIHRvcHN0cmlwb24gPSBcImFkcy50b3BzdHJpcG9uLjFcIjtcclxuICAgICAgICAgIGJvdHRvbXN0cmlwb24gPSBcImFkcy5ib3R0b21zdHJpcG9uLjFcIjtcclxuICAgICAgICAgIGJveF8xID0gXCJhZHMuYm94LjFcIjtcclxuICAgICAgICAgIGJveF8yID0gXCJhZHMuYm94LjJcIjtcclxuICAgICAgICAgIGJveF8zID0gXCJhZHMuYm94LjNcIjtcclxuICAgICAgICAgIGJveF80ID0gXCJhZHMuYm94LjRcIjtcclxuICAgICAgICAgIG9sZF9kaXZzLnB1c2goXCJhZHMuZG91Ymxlc3RyaXBvbl9kZXNrdG9wLjFcIiwgXCJhZHMuaXZvcnlfZGVza3RvcC4xXCIsIFwiYWRzLjU4Nng4OC4xXCIsIFwiYWRzLjQ5MHg4OC4xXCIsIFwiYWRzLjMwMHg2MDAuMVwiLCBcImFkcy4zMDB4MjUwLjFcIiwgXCJhZHMuMzAweDI1MC4yXCIsIFwiYWRzLjMwMHgyNTAuM1wiLCBcImFkcy4zMDB4MjUwLjRcIiwgXCJhZHMuOTgweDkwLjFcIiwgXCJhZHMudG9wc3RyaXBvbl9kZXNrdG9wLjFcIiwgXCJhZHMuYm90dG9tc3RyaXBvbl9kZXNrdG9wLjFcIiwgXCJhZHMucmlnaHRzdHJpcG9uX2Rlc2t0b3AuMVwiKTtcclxuICAgICAgICAgIG5ld19kaXZzLnB1c2goXCJhZHMuZG91Ymxlc3RyaXBvbi4xXCIsIFwiYWRzLml2b3J5LjFcIiwgXCJhZHMuc3RyaXAuY2hhbm5lbC4xXCIsIFwiYWRzLnN0cmlwLjFcIiwgXCJhZHMuYmlnYm94LjFcIiwgXCJhZHMuYm94LjFcIiwgXCJhZHMuYm94LjJcIiwgXCJhZHMuYm94LjNcIiwgXCJhZHMuYm94LjRcIiwgXCJhZHMuYm90dG9tYmFubmVyLjFcIiwgXCJhZHMudG9wc3RyaXBvbi4xXCIsIFwiYWRzLmJvdHRvbXN0cmlwb24uMVwiLCBcImFkcy5yaWdodHN0cmlwb24uMVwiKTtcclxuXHJcbiAgICAgICAgICBnZW5lcmFsX2RpdnMubWFwKGZ1bmN0aW9uIChnZCkge1xyXG4gICAgICAgICAgICBsZXQgaW5kZXggPSBvbGRfZGl2cy5pbmRleE9mKGdkWzBdKTtcclxuICAgICAgICAgICAgaWYgKGluZGV4Pi0xKSB7Z2RbMF0gPSBuZXdfZGl2c1tpbmRleF07fVxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICgoZ2VuZXJhbF9kaXZzW2pdWzBdICE9IGJveF8xICYmIHRoaXMuYnJvd3NpX29uX2dwdCA9PSBcIlRydWVcIikgfHwgKHRoaXMuYnJvd3NpX29uX2dwdCA9PSBcIkZhbHNlXCIgfHwgd2luZG93LmJyb3dzaV9vbl9ncHQgPT0gdW5kZWZpbmVkKSkge1xyXG4gICAgICAgICAgICAgIGlmICgoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5ncmlkMTI4MFwiKSAhPSBudWxsIHx8IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZ3JpZDEyODBcIikgIT0gdW5kZWZpbmVkICkgXHJcbiAgICAgICAgICAgICAgICB8fCAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5ncmlkMTI4MF8yXCIpICE9IG51bGwgfHwgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5ncmlkMTI4MF8yXCIpICE9IHVuZGVmaW5lZCkpIHtcclxuICAgICAgICAgICAgICAgIGlmIChnZW5lcmFsX2RpdnNbal1bMF0gPT0gXCJhZHMub3V0b2ZwYWdlLjFcIikge1xyXG4gICAgICAgICAgICAgICAgICB0aGlzLmRlZmluZVNsb3RzX2Z1bmMoZ2VuZXJhbF9kaXZzW2pdWzBdLCBbMSwgMV0pOyAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGdlbmVyYWxfZGl2c1tqXVswXSA9PSBib3hfMSB8fCBnZW5lcmFsX2RpdnNbal1bMF0gPT0gYm94XzIgfHwgZ2VuZXJhbF9kaXZzW2pdWzBdID09IGJveF8zIHx8IGdlbmVyYWxfZGl2c1tqXVswXSA9PSBib3hfNCAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHx8IGdlbmVyYWxfZGl2c1tqXVswXSA9PSBcImFkcy5pdm9yeS4xXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHx8IGdlbmVyYWxfZGl2c1tqXVswXSA9PSBcImFkcy50b3BzdHJpcG9uLjFcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfHwgZ2VuZXJhbF9kaXZzW2pdWzBdID09IFwiYWRzLnJpZ2h0c3RyaXBvbi4xXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHx8IGdlbmVyYWxfZGl2c1tqXVswXSA9PSBcImFkcy5kb3VibGVzdHJpcG9uLjFcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfHwgZ2VuZXJhbF9kaXZzW2pdWzBdID09IFwiYWRzLnJpZ2h0Ym94X25hdGl2ZS4xXCIgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB8fCBnZW5lcmFsX2RpdnNbal1bMF0gPT0gXCJhZHMuYm90dG9tYm94X25hdGl2ZS4xXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHx8IGdlbmVyYWxfZGl2c1tqXVswXSA9PSBcImFkcy5ib3R0b21ib3hfbmF0aXZlLjJcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfHwgZ2VuZXJhbF9kaXZzW2pdWzBdID09IFwiYWRzLnJpZ2h0Ym94X25hdGl2ZS4yXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHx8IGdlbmVyYWxfZGl2c1tqXVswXSA9PSBcImFkcy4xNTB4MjAwLjFcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfHwgZ2VuZXJhbF9kaXZzW2pdWzBdID09IFwiYWRzLnNreXNjcmFwZXIuaW5uZXIuMVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB8fCBnZW5lcmFsX2RpdnNbal1bMF0gPT0gXCJhZHMuZ3JheS5iaWcuc3RyaXAuMVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB8fCBnZW5lcmFsX2RpdnNbal1bMF0gPT0gXCJhZHMuZ3JheS5ib3guMVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB8fCBnZW5lcmFsX2RpdnNbal1bMF0gPT0gXCJhZHMuZ3JheS5ib3guMlwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB8fCAoKGdlbmVyYWxfZGl2c1tqXVswXSA9PSBcImFkcy5ib3R0b21ib3hfbmF0aXZlLjRcIiB8fCBnZW5lcmFsX2RpdnNbal1bMF0gPT0gXCJhZHMuYm90dG9tYm94X25hdGl2ZS4zXCIpICYmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmdyaWQxMjgwXzJcIikgIT0gbnVsbCB8fCBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmdyaWQxMjgwXzJcIikgIT0gdW5kZWZpbmVkKSkpIHtcclxuXHJcbiBcclxuICAgICAgICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLkV4dGVuZGVkX2Jhbm5lclwiKSkge1xyXG4gICAgICAgICAgICBsZXQgRXh0ZW5kZWRfYmFubmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5FeHRlbmRlZF9iYW5uZXJcIik7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgRXh0ZW5kZWRfYmFubmVyLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgZm9yICh2YXIgaWkgPSAwOyBpaSA8IEV4dGVuZGVkX2Jhbm5lcltpXS5jaGlsZE5vZGVzLmxlbmd0aDsgaWkrKykgeyAgXHJcbiAgICAgICAgICAgICAgICAgIGlmIChFeHRlbmRlZF9iYW5uZXJbaV0uY2hpbGROb2Rlc1tpaV0gIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChFeHRlbmRlZF9iYW5uZXJbaV0uY2hpbGROb2Rlc1tpaV0uaWQgPT0gXCJhZHMuZ3JheS5ib3guMVwiIHx8IEV4dGVuZGVkX2Jhbm5lcltpXS5jaGlsZE5vZGVzW2lpXS5pZCA9PSBcImFkcy5ncmF5LmJveC4yXCIpIHsgICBcclxuICAgICAgICAgICAgICAgICAgICAgIGxldCBjb250YWluZXJfZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lcl9kaXYuc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgXCJncmF5X2JveFwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgIEV4dGVuZGVkX2Jhbm5lcltpXS5hcHBlbmRDaGlsZChjb250YWluZXJfZGl2KTsgXHJcbiAgICAgICAgICAgICAgICAgICAgICBjb250YWluZXJfZGl2LmFwcGVuZENoaWxkKEV4dGVuZGVkX2Jhbm5lcltpXS5jaGlsZE5vZGVzW2lpXSk7IFxyXG4gICAgICAgICAgICAgICAgICAgIH0gIFxyXG4gICAgICAgICAgICAgICAgICB9IFxyXG4gICAgICAgICAgICAgIH0gICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB9ICBcclxuICAgICAgICAgIH0gXHJcbiAgICAgICAgICAgXHJcbiAgICAgICAgICAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuVGl0bGVUYWJcIikpIHtcclxuICAgICAgICAgICAgICBsZXQgY29udGFpbmVyX2Jhbm5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuVGl0bGVUYWJcIik7XHJcbiAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb250YWluZXJfYmFubmVyLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoKGNvbnRhaW5lcl9iYW5uZXJbaV0uaW5uZXJIVE1MKS5pbmRleE9mKFwi16TXqNeh15XXnteqXCIpICE9PSAtMSkge1xyXG4gICAgICAgICAgICAgICAgICBjb250YWluZXJfYmFubmVyW2ldLnNldEF0dHJpYnV0ZShcInN0eWxlXCIsIFwidmlzaWJpbGl0eTpoaWRkZW47XCIpO1xyXG4gICAgICAgICAgICAgICAgfSAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgIH0gIFxyXG4gICAgICAgICAgICB9ICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGxldCBzdHlsZV9kaXZzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInN0eWxlXCIpO1xyXG4gICAgICAgICAgICAgIGlmIChnZW5lcmFsX2RpdnNbal1bMF0gPT0gXCJhZHMuZ3JheS5ib3guMVwiIHx8IGdlbmVyYWxfZGl2c1tqXVswXSA9PSBcImFkcy5ncmF5LmJveC4yXCIpIHtcclxuICAgICAgICAgICAgICAgIHN0eWxlX2RpdnMuaW5uZXJIVE1MID0gYGRpdltpZD0nJHtnZW5lcmFsX2RpdnNbal1bMF19J10ge1xyXG4gICAgICAgICAgICAgICAgICB3aWR0aDogMzAwcHg7XHJcbiAgICAgICAgICAgICAgICAgIGhlaWdodDogMjUwcHggIWltcG9ydGFudDtcclxuICAgICAgICAgICAgICAgICAgZGlzcGxheTpmbGV4O1xyXG4gICAgICAgICAgICAgICAgICBtYXJnaW46IDAgYXV0bztcclxuICAgICAgICAgICAgICAgICAgYWxpZ24taXRlbXM6Y2VudGVyOyAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZGl2IC5ncmF5X2JveCB7XHJcbiAgICAgICAgICAgICAgICAgIHBhZGRpbmc6IDQ1cHggMzdweCA0NXB4IDM3cHg7XHJcbiAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNlZWVlZWY7IFxyXG4gICAgICAgICAgICAgICAgICBoZWlnaHQ6IDI1MHB4OyAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBkaXZbaWQ9JyR7Z2VuZXJhbF9kaXZzW2pdWzBdfSddIGlmcmFtZSB7XHJcbiAgICAgICAgICAgICAgICAgIHdpZHRoOiAzMDBweDtcclxuICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAyNTBweCAhaW1wb3J0YW50O1xyXG4gICAgICAgICAgICAgICAgfWA7XHJcbiAgICAgICAgICAgICAgfSBlbHNlIGlmIChnZW5lcmFsX2RpdnNbal1bMF0gPT0gXCJhZHMucmlnaHRib3hfbmF0aXZlLjFcIiB8fCBnZW5lcmFsX2RpdnNbal1bMF0gPT0gXCJhZHMucmlnaHRib3hfbmF0aXZlLjJcIikgeyBcclxuICAgICAgICAgICAgICAgICAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2lmcmFtZVtpZCo9XCJyaWdodGJveF9uYXRpdmUuMVwiXScpICE9IG51bGwgfHwgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaWZyYW1lW2lkKj1cInJpZ2h0Ym94X25hdGl2ZS4xXCJdJykgIT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGJfc3R5bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdpZnJhbWVbaWQqPVwicmlnaHRib3hfbmF0aXZlLjFcIl0nKS5zdHlsZTtcclxuICAgICAgICAgICAgICAgICAgICBiX3N0eWxlLm1pbkhlaWdodCA9IFwiMjMycHhcIjtcclxuICAgICAgICAgICAgICAgICAgfSBcclxuICAgICAgICAgICAgICAgICAgc3R5bGVfZGl2cy5pbm5lckhUTUwgPSBgZGl2W2lkPScke2dlbmVyYWxfZGl2c1tqXVswXX0nXSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogJHtnZW5lcmFsX2RpdnNbal1bMV19cHg7XHJcbiAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6ICR7Z2VuZXJhbF9kaXZzW2pdWzJdfXB4ICFpbXBvcnRhbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICBvYmplY3QtZml0OiBjb250YWluO1xyXG4gICAgICAgICAgICAgICAgICAgICAgYm94LXNoYWRvdzogMCAxcHggM3B4IDAgcmdiYSgyMTgsIDIxOCwgMjIxLCAwLjgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZGl2W2lkPScke2dlbmVyYWxfZGl2c1tqXVswXX0nXSBpZnJhbWUge1xyXG4gICAgICAgICAgICAgICAgICAgICAgd2lkdGg6ICR7Z2VuZXJhbF9kaXZzW2pdWzFdfXB4O1xyXG4gICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAke2dlbmVyYWxfZGl2c1tqXVsyXX1weCAhaW1wb3J0YW50O1xyXG4gICAgICAgICAgICAgICAgICAgICAgbWluLWhlaWdodDogMjMycHggIWltcG9ydGFudDsgICBcclxuICAgICAgICAgICAgICAgICAgICB9YDtcclxuICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIHN0eWxlX2RpdnMuaW5uZXJIVE1MID0gYGRpdltpZD0nJHtnZW5lcmFsX2RpdnNbal1bMF19J10ge1xyXG4gICAgICAgICAgICAgICAgICB3aWR0aDogJHtnZW5lcmFsX2RpdnNbal1bMV19cHg7XHJcbiAgICAgICAgICAgICAgICAgIGhlaWdodDogJHtnZW5lcmFsX2RpdnNbal1bMl19cHggIWltcG9ydGFudDtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICBkaXZbaWQ9JyR7Z2VuZXJhbF9kaXZzW2pdWzBdfSddIGlmcmFtZSB7XHJcbiAgICAgICAgICAgICAgICAgIHdpZHRoOiAke2dlbmVyYWxfZGl2c1tqXVsxXX1weDtcclxuICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAke2dlbmVyYWxfZGl2c1tqXVsyXX1weCAhaW1wb3J0YW50O1xyXG4gICAgICAgICAgICAgIH1gO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICBpZiAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZ2VuZXJhbF9kaXZzW2pdWzBdKSkge1xyXG4gICAgICAgICAgICAgICAgbGV0IGN1cnJlbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChnZW5lcmFsX2RpdnNbal1bMF0pO1xyXG4gICAgICAgICAgICAgICAgLy9jdXJyZW50LmFwcGVuZENoaWxkKHN0eWxlX2Rpdik7ICAgIFxyXG4gICAgICAgICAgICAgICAgY3VycmVudC5wYXJlbnROb2RlLmluc2VydEJlZm9yZShzdHlsZV9kaXZzLCBjdXJyZW50Lm5leHRTaWJsaW5nKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICBcclxuXHJcbiAgICAgICAgICAgICAgaWYgKCgoZ2VuZXJhbF9kaXZzW2pdWzBdID09IGJveF8xIHx8IGdlbmVyYWxfZGl2c1tqXVswXSA9PSBib3hfMiB8fCBnZW5lcmFsX2RpdnNbal1bMF0gPT0gYm94XzMgfHwgZ2VuZXJhbF9kaXZzW2pdWzBdID09IGJveF80KSAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZ3JpZDEyODBfMlwiKSAhPSBudWxsIHx8IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZ3JpZDEyODBfMlwiKSAhPSB1bmRlZmluZWQpICYmIHdpbmRvdy5kY0NHID09IFwiaG9tZVwiKSBcclxuICAgICAgICAgICAgICAgICAgICAgIHx8Z2VuZXJhbF9kaXZzW2pdWzBdID09IFwiYWRzLml2b3J5LjFcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgfHwgZ2VuZXJhbF9kaXZzW2pdWzBdID09IFwiYWRzLnRvcHN0cmlwb24uMVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICB8fCBnZW5lcmFsX2RpdnNbal1bMF0gPT0gXCJhZHMucmlnaHRzdHJpcG9uLjFcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgfHwgZ2VuZXJhbF9kaXZzW2pdWzBdID09IFwiYWRzLmdyYXkuYmlnLnN0cmlwLjFcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgfHwgZ2VuZXJhbF9kaXZzW2pdWzBdID09IFwiYWRzLnNreXNjcmFwZXIuaW5uZXIuMVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICB8fCAoZ2VuZXJhbF9kaXZzW2pdWzBdID09IFwiYWRzLmRvdWJsZXN0cmlwb24uMVwiICYmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmdyaWQxMjgwXCIpICE9IG51bGwgfHwgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5ncmlkMTI4MFwiKSAhPSB1bmRlZmluZWQgKSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgIGlmIChnZW5lcmFsX2RpdnNbal1bMF0gPT0gXCJhZHMuZ3JheS5iaWcuc3RyaXAuMVwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGVmaW5lU2xvdHNfZnVuYyhnZW5lcmFsX2RpdnNbal1bMF0sIFtbZ2VuZXJhbF9kaXZzW2pdWzFdLCBnZW5lcmFsX2RpdnNbal1bMl1dLCBbOTcwLCA5MF1dKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhZHMuZ3JheS5iaWcuc3RyaXAuMVwiKS5zZXRBdHRyaWJ1dGUoXCJzdHlsZVwiLCBcImJhY2tncm91bmQtY29sb3I6I2VlZWVlZjsgcGFkZGluZzozNXB4IDI0cHg7IG1hcmdpbjowIGF1dG87IHRleHQtYWxpZ246Y2VudGVyOyBkaXNwbGF5OiBmbGV4OyBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcIik7ICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBTdHJpcExvYWRlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBJbmZyYXNydWN0dXJlQ2xhc3NPYmouU2xvdFJlbmRlckVuZChmdW5jdGlvbihldmVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChldmVudC5zbG90ID09IEFkVW5pdFByb3BlcnRpZXNDbGFzc09iai5EZWZpbmVfc2xvdHNbXCJhZHMuZ3JheS5iaWcuc3RyaXAuMVwiXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFTdHJpcExvYWRlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWV2ZW50LmlzRW1wdHkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgd2lkdGhfc3RyaXAgPSBnZW5lcmFsX2RpdnNbal1bMV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHN0cmlwX3NpemUgPSBldmVudC5zaXplICsgXCJcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgc3RyaXBfdyA9IHN0cmlwX3NpemUuc3BsaXQoXCIsXCIpOyAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdHJpcF93WzBdID09IFwiOTcwXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoX3N0cmlwID0gOTcwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgc3R5bGVfc3RyaXAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3R5bGVcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGVfc3RyaXAuaW5uZXJIVE1MID0gYGRpdltpZD0nYWRzLmdyYXkuYmlnLnN0cmlwLjEnXSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6JHt3aWR0aF9zdHJpcH1weCAhaW1wb3J0YW50O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogJHtnZW5lcmFsX2RpdnNbal1bMl19cHggIWltcG9ydGFudDsgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpdltpZD0nYWRzLmdyYXkuYmlnLnN0cmlwLjEnXSBpZnJhbWUge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6JHt3aWR0aF9zdHJpcH1weCAhaW1wb3J0YW50O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAke2dlbmVyYWxfZGl2c1tqXVsyXX1weCAhaW1wb3J0YW50O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1gOyBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgc3RyaXAgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChnZW5lcmFsX2RpdnNbal1bMF0pOyAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cmlwLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHN0eWxlX3N0cmlwLCBzdHJpcC5uZXh0U2libGluZyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU3RyaXBMb2FkZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRlZmluZVNsb3RzX2Z1bmMoZ2VuZXJhbF9kaXZzW2pdWzBdLCBbZ2VuZXJhbF9kaXZzW2pdWzFdLCBnZW5lcmFsX2RpdnNbal1bMl1dKTtcclxuICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChnZW5lcmFsX2RpdnNbal1bMF0gPT0gXCJhZHMuZ3JheS5ib3guMVwiIHx8IGdlbmVyYWxfZGl2c1tqXVswXSA9PSBcImFkcy5ncmF5LmJveC4yXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRlZmluZVNsb3RzX2Z1bmMoZ2VuZXJhbF9kaXZzW2pdWzBdLCBbMzAwLCAyNTBdKTsgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWZpbmVTbG90c19mdW5jKGdlbmVyYWxfZGl2c1tqXVswXSwgW1tnZW5lcmFsX2RpdnNbal1bMV0sIGdlbmVyYWxfZGl2c1tqXVsyXV0sIFsnZmx1aWQnXV0pOyAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICgod2luZG93LmRjUGF0aCA9PSBcIjguQ2VudHJhbC0xLkhvbWVcIiAmJiBnZW5lcmFsX2RpdnNbal1bMF0gPT0gdG9wc3RyaXBvbikgXHJcbiAgICAgICAgICAgICAgICAgIHx8ICh3aW5kb3cuZGNQYXRoID09IFwiMjc3NS5LbmVzc2V0LTMyNDcyLnl1dmFsMTI4MFwiICYmIGdlbmVyYWxfZGl2c1tqXVswXSA9PSB0b3BzdHJpcG9uKSkge1xyXG4gICAgICAgICAgICAgICAgICB0aGlzLmRlZmluZVNsb3RzX2Z1bmMoZ2VuZXJhbF9kaXZzW2pdWzBdLCBbW2dlbmVyYWxfZGl2c1tqXVsxXSwgZ2VuZXJhbF9kaXZzW2pdWzJdXSwgW1szMDAsIDEwMl0sIFszMDAsIDEwMF1dXSk7XHJcbiAgICAgICAgICAgICAgICB9ICBlbHNlIGlmICgod2luZG93LmRjUGF0aCA9PSBcIjguQ2VudHJhbC0xLkhvbWVcIiAmJiBnZW5lcmFsX2RpdnNbal1bMF0gPT0gXCJhZHMucmlnaHRzdHJpcG9uX2Rlc2t0b3AuMVwiKVxyXG4gICAgICAgICAgICAgICAgICB8fCAod2luZG93LmRjUGF0aCA9PSBcIjI3NzUuS25lc3NldC0zMjQ3Mi55dXZhbDEyODBcIiAmJiBnZW5lcmFsX2RpdnNbal1bMF0gPT0gXCJhZHMucmlnaHRzdHJpcG9uX2Rlc2t0b3AuMVwiKSkge1xyXG4gICAgICAgICAgICAgICAgICB0aGlzLmRlZmluZVNsb3RzX2Z1bmMoZ2VuZXJhbF9kaXZzW2pdWzBdLCBbW2dlbmVyYWxfZGl2c1tqXVsxXSwgZ2VuZXJhbF9kaXZzW2pdWzJdXSwgW1sxNTAsIDIxOF1dXSk7XHJcbiAgICAgICAgICAgICAgICB9ICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgdGhpcy5kZWZpbmVTbG90c19mdW5jKGdlbmVyYWxfZGl2c1tqXVswXSwgW1xyXG4gICAgICAgICAgICAgICAgICAgIGdlbmVyYWxfZGl2c1tqXVsxXSxcclxuICAgICAgICAgICAgICAgICAgICBnZW5lcmFsX2RpdnNbal1bMl1cclxuICAgICAgICAgICAgICAgICAgXSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmIChnZW5lcmFsX2RpdnNbal1bMF0gPT0gXCJhZHMub3V0b2ZwYWdlLjFcIikge1xyXG4gICAgICAgICAgICAgICAgICB0aGlzLmRlZmluZVNsb3RzX2Z1bmMoZ2VuZXJhbF9kaXZzW2pdWzBdLCBbMSwgMV0pO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICgod2luZG93LmRjUGF0aCA9PSBcIjguQ2VudHJhbC0xLkhvbWVcIiAmJiBnZW5lcmFsX2RpdnNbal1bMF0gIT0gdG9wc3RyaXBvbiAmJiBnZW5lcmFsX2RpdnNbal1bMF0gIT0gYm90dG9tc3RyaXBvbilcclxuICAgICAgICAgICAgICAgICAgfHwgKHdpbmRvdy5kY1BhdGggPT0gXCIyNzc1LktuZXNzZXQtMzI0NzIueXV2YWwxMjgwXCIgJiYgZ2VuZXJhbF9kaXZzW2pdWzBdICE9IHRvcHN0cmlwb24gJiYgZ2VuZXJhbF9kaXZzW2pdWzBdICE9IGJvdHRvbXN0cmlwb24pXHJcbiAgICAgICAgICAgICAgICAgIHx8IGdlbmVyYWxfZGl2c1tqXVswXSA9PSBcImFkcy4xNTB4MjAwLjFcIiBcclxuICAgICAgICAgICAgICAgICAgfHwgZ2VuZXJhbF9kaXZzW2pdWzBdID09IGJveF8xIHx8IGdlbmVyYWxfZGl2c1tqXVswXSA9PSBib3hfMiB8fCBnZW5lcmFsX2RpdnNbal1bMF0gPT0gYm94XzMgfHwgZ2VuZXJhbF9kaXZzW2pdWzBdID09IGJveF80KSB7XHJcbiAgICAgICAgICAgICAgICAgIHRoaXMuZGVmaW5lU2xvdHNfZnVuYyhnZW5lcmFsX2RpdnNbal1bMF0sIFtbZ2VuZXJhbF9kaXZzW2pdWzFdLCBnZW5lcmFsX2RpdnNbal1bMl1dLCBbJ2ZsdWlkJ11dKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tYWdhemluZV9ncmlkMTI4MFwiKSAmJiAoZ2VuZXJhbF9kaXZzW2pdWzBdLmluY2x1ZGVzKFwic3RyaXAubWFya2V0aW5nXCIpIHx8IGdlbmVyYWxfZGl2c1tqXVswXS5pbmNsdWRlcyhcInN0cmlwLm9yZGVyaW5nXCIpKSkge1xyXG4gICAgICAgICAgICAgICAgICB0aGlzLmRlZmluZVNsb3RzX2Z1bmMoZ2VuZXJhbF9kaXZzW2pdWzBdLCBbW2dlbmVyYWxfZGl2c1tqXVsxXSwgZ2VuZXJhbF9kaXZzW2pdWzJdXSwgWydmbHVpZCddXSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICB0aGlzLmRlZmluZVNsb3RzX2Z1bmMoZ2VuZXJhbF9kaXZzW2pdWzBdLCBbZ2VuZXJhbF9kaXZzW2pdWzFdLCBnZW5lcmFsX2RpdnNbal1bMl1dKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICB9IFxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5hcnRpY2xlLWhlYWRsaW5lcy1hdXRvLXBwbHVzXCIpKSB7XHJcbiAgICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLlBwbHVzQXJ0aWNsZUhlYWRsaW5lc0F1dG8uc2hvdy1hZC10cnVlXCIpKSB7ICAgXHJcbiAgICAgICAgICAgICAgICBsZXQgYmFubmVyX3NpemVzID0gICBbWydmbHVpZCddLCBbOTAwLCAyMDBdXTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGZsYXNoX2VsZW1lbnRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5QcGx1c0FydGljbGVIZWFkbGluZXNBdXRvIC5zbG90Vmlld1wiKTtcclxuICAgICAgICAgICAgICAgIGxldCBlbGVtZW50X2FycmF5ID0gQXJyYXkuZnJvbShmbGFzaF9lbGVtZW50cyk7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8IDU7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICBsZXQgYmFubmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICAgICAgICAgIGJhbm5lci5zZXRBdHRyaWJ1dGUoJ2lkJywgJ2Fkcy5zdHJpcC5tYXJrZXRpbmcuJyArIGkpOyAgICAgIFxyXG4gICAgICAgICAgICAgICAgICBiYW5uZXIuc2V0QXR0cmlidXRlKCdzdHlsZScsJ2Rpc3BsYXk6IGZsZXg7IGp1c3RpZnktY29udGVudDogY2VudGVyOycpOyAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICBpZiAoZWxlbWVudF9hcnJheS5sZW5ndGggPj0gNCppICYmIGVsZW1lbnRfYXJyYXlbNCppXSAhPSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBlbGVtZW50X2FycmF5Wyg0KmkpLTFdLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGJhbm5lciwgZWxlbWVudF9hcnJheVsoNCppKS0xXS5uZXh0U2libGluZyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWZpbmVTbG90c19mdW5jKGJhbm5lci5pZCwgYmFubmVyX3NpemVzKTsgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgIH0gICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIH0gIFxyXG5cclxuICAgICAgICAgICAgICAgIGFkVW5pdFN0eWxlc0NsYXNzT2JqW1wicHBsdXNfc3RyaXBzXCJdKFwicHBsdXNfc3RyaXBzXCIpOyAgXHJcbiAgICAgIH0gICAgICAgICAgIFxyXG4gIH1cclxuXHJcbiAgICAvLyBGdW5jdGlvbiBmb3IgYWRkaW5nIGFkcyBpbnRvIGF1dG8gY29tcG9uZW50c1xyXG4gICAgY29uc3QgYmFubmVyQXRBdXRvQ09tcG9uZW50cyA9IChzZWxlY3RvciwgaWQsIHNpemVzLCBpdGVtLCBjb21wX3ZlcnNpb24gPSBcIm5ld1wiKSA9PiB7XHJcbiAgICAgICAgbGV0IGl0ZW1fYWQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICBpdGVtX2FkLnNldEF0dHJpYnV0ZSgnaWQnLCBpZCk7XHJcblxyXG4gICAgICAgIGNvbnN0IGl0ZW1fYWRfZWxlbWVudCA9IHNlbGVjdG9yLnF1ZXJ5U2VsZWN0b3JBbGwoXCIuc2xvdFZpZXdcIilbaXRlbV07XHJcbiAgICAgICAgaXRlbV9hZF9lbGVtZW50LnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGl0ZW1fYWQsIGl0ZW1fYWRfZWxlbWVudC5uZXh0U2libGluZyk7IFxyXG4gICAgICAgIHdpbmRvdy5BZFVuaXRGdW5jdGlvbnNDbGFzc09iai5kZWZpbmVTbG90c19mdW5jKGlkLCBzaXplcyk7XHJcbiAgICAgICBcclxuICAgICAgICBpZiAoaWQuaW5jbHVkZXMoXCJhZHMuc3RyaXAubWFya2V0aW5nXCIpKSB7XHJcbiAgICAgICAgICBjb25zdCBhZGRfc3R5bGUgPSBjb21wX3ZlcnNpb24gPT0gXCJvbGRcIiA/IFwiIG1hcmdpbi1ib3R0b206MzBweDsgXCIgOiBcInBhZGRpbmc6IDIwcHggMDtib3JkZXItYm90dG9tOiAxcHggc29saWQgI0Q3RDVENTtcIjtcclxuICAgICAgICAgIGl0ZW1fYWQuc2V0QXR0cmlidXRlKCdzdHlsZScsIGB0ZXh0LWFsaWduOmNlbnRlcjske2FkZF9zdHlsZX1kaXNwbGF5OiBmbGV4OyBqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyO2ApOyAgICAgICAgIFxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoaWQuaW5jbHVkZXMoXCJhZHMuYm94Lm1hcmtldGluZ1wiKSkgaXRlbV9hZC5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgJ3Nsb3RWaWV3Jyk7ICAgICAgICBcclxuICAgIH1cclxuXHJcbiAgICAvLyBhZGRpbmcgYWRzIGludG8gYXV0byBjb21wb25lbnRzXHJcbiAgICBsZXQgbWFtdWx0aUFydGljbGVNYWdhemluZUF1dG9Db21wb25lbnRhID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tdWx0aUFydGljbGVNYWdhemluZUF1dG9Db21wb25lbnRhLnNob3ctYWQtdHJ1ZVwiKTtcclxuICAgIGxldCBtYWdhemluZV9oZWFkbGluZXNfb2xkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5MYWlzaGFBcnRpY2xlSGVhZGxpbmVzLnNob3ctYWQtdHJ1ZVwiKTtcclxuICAgIGxldCBtYWdhemluZV9oZWFkbGluZXNfbmV3ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tYWdhemluZUFydGljbGVIZWFkbGluZXNBdXRvLnNob3ctYWQtdHJ1ZVwiKTtcclxuICAgIGlmIChtYW11bHRpQXJ0aWNsZU1hZ2F6aW5lQXV0b0NvbXBvbmVudGEpIHtcclxuICAgICAgbGV0IGFkX3VuaXRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5tdWx0aUFydGljbGVNYWdhemluZUF1dG9Db21wb25lbnRhLnNob3ctYWQtdHJ1ZVwiKTtcclxuICAgICAgYWRfdW5pdHMuZm9yRWFjaCgoeSwgaW5kZXgpPT4ge1xyXG4gICAgICAgIGJhbm5lckF0QXV0b0NPbXBvbmVudHMoeSwgXCJhZHMuYm94Lm1hcmtldGluZy5cIiArIHBhcnNlSW50KGluZGV4KzEpLCBbWydmbHVpZCddLCBbMzgwLCAzODRdXSwgMSk7ICAgICAgXHJcbiAgICAgIH0pOyAgXHJcbiAgICB9XHJcbiAgICBpZiAod2luZG93LnluZXRfc2l0ZXMgJiYgbWFnYXppbmVfaGVhZGxpbmVzX29sZCAmJiBtYWdhemluZV9oZWFkbGluZXNfb2xkLnF1ZXJ5U2VsZWN0b3JBbGwoXCIuc2xvdFZpZXdcIilbM10gIT0gdW5kZWZpbmVkKSB7IFxyXG4gICAgICBiYW5uZXJBdEF1dG9DT21wb25lbnRzKG1hZ2F6aW5lX2hlYWRsaW5lc19vbGQsIFwiYWRzLnN0cmlwLm1hcmtldGluZy4xXCIsIFtbJ2ZsdWlkJ10sIFs4NTAsIDE4MF1dLCAzLCBcIm9sZFwiKTsgXHJcbiAgICB9XHJcbiAgICBpZiAod2luZG93LnluZXRfc2l0ZXMgJiYgbWFnYXppbmVfaGVhZGxpbmVzX25ldyAmJiBtYWdhemluZV9oZWFkbGluZXNfbmV3LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuc2xvdFZpZXdcIilbM10gIT0gdW5kZWZpbmVkKSB7IFxyXG4gICAgICBbMiwgNSwgOF0uZm9yRWFjaCgoaW5kZXgsIGkpID0+IHtcclxuICAgICAgICBiYW5uZXJBdEF1dG9DT21wb25lbnRzKG1hZ2F6aW5lX2hlYWRsaW5lc19uZXcsIGBhZHMuc3RyaXAubWFya2V0aW5nLiR7aSArIDF9YCwgW1snZmx1aWQnXSwgWzgyMCwgMTg0XV0sIGluZGV4KTsgXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgXHJcblxyXG4gICAgaWYgKHRoaXMuZGNQYXRoLmluY2x1ZGVzKFwiMzQ1Ni5NYWdhemluZVwiKSAmJiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNob3ctYWQtdHJ1ZVwiKSkgeyBcclxuICAgICAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuQmxhemVyQXJ0aWNsZUhlYWRsaW5lc1wiKSkgeyAgICAgIFxyXG4gICAgICAgIGxldCBiYW5uZXJfc2l6ZXMgPSAgIFtbJ2ZsdWlkJ10sIFs4NTAsIDE4N11dO1xyXG4gICAgICAgIGNvbnN0IGVsZW1lbnRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5CbGF6ZXJBcnRpY2xlSGVhZGxpbmVzIC5zbG90Vmlld1wiKTtcclxuICAgICAgICBsZXQgZWxlbWVudF9hcnJheSA9IEFycmF5LmZyb20oZWxlbWVudHMpO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgNDsgaSsrKSB7XHJcbiAgICAgICAgICBsZXQgYmFubmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICBiYW5uZXIuc2V0QXR0cmlidXRlKCdpZCcsICdhZHMuc3RyaXAubWFya2V0aW5nLicgKyBpKTsgICAgICBcclxuICAgICAgICAgIGJhbm5lci5zdHlsZS50ZXh0QWxpZ24gPSBcImNlbnRlclwiOyAgICBcclxuICAgICAgICAgIGJhbm5lci5zdHlsZS5tYXJnaW5Cb3R0b20gPSBcIjEwcHhcIjtcclxuICAgICAgICAgICAgIFxyXG4gICAgICAgICAgaWYgKGVsZW1lbnRfYXJyYXkubGVuZ3RoID49IDMgJiYgaSA9PSAxKSB7XHJcbiAgICAgICAgICAgIGVsZW1lbnRfYXJyYXlbM10ucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoYmFubmVyLCBlbGVtZW50X2FycmF5WzNdLm5leHRTaWJsaW5nKTtcclxuICAgICAgICAgICAgdGhpcy5kZWZpbmVTbG90c19mdW5jKGJhbm5lci5pZCwgYmFubmVyX3NpemVzKTsgICBcclxuICAgICAgICAgIH0gIFxyXG4gICAgICAgICAgaWYgKGVsZW1lbnRfYXJyYXkubGVuZ3RoID49IDggJiYgaSA9PSAyKSB7XHJcbiAgICAgICAgICAgICAgZWxlbWVudF9hcnJheVs3XS5wYXJlbnROb2RlLmluc2VydEJlZm9yZShiYW5uZXIsIGVsZW1lbnRfYXJyYXlbN10ubmV4dFNpYmxpbmcpO1xyXG4gICAgICAgICAgICAgIHRoaXMuZGVmaW5lU2xvdHNfZnVuYyhiYW5uZXIuaWQsIGJhbm5lcl9zaXplcyk7ICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgfSBcclxuICAgICAgICAgIGlmIChlbGVtZW50X2FycmF5Lmxlbmd0aCA+PSAxMiAmJiBpID09IDMpIHtcclxuICAgICAgICAgICAgICBlbGVtZW50X2FycmF5WzExXS5wYXJlbnROb2RlLmluc2VydEJlZm9yZShiYW5uZXIsIGVsZW1lbnRfYXJyYXlbMTFdLm5leHRTaWJsaW5nKTtcclxuICAgICAgICAgICAgICB0aGlzLmRlZmluZVNsb3RzX2Z1bmMoYmFubmVyLmlkLCBiYW5uZXJfc2l6ZXMpOyAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9ICAgICAgXHJcbiAgIH1cclxuXHJcbiAgICBpZiAoQWRVbml0UHJvcGVydGllc0NsYXNzT2JqLlNsb3RzW1wiYWRzLnNhcmdlbFwiXSkge1xyXG4gICAgICBzZXRUaW1lb3V0KHRoYXQuZGVmaW5lU2FyZ2VsX2Z1bmMoXCJhZHMuc2FyZ2VsXCIpLCAyNTAwKTtcclxuICAgIH1cclxuICAgIGlmIChBZFVuaXRQcm9wZXJ0aWVzQ2xhc3NPYmouU2xvdHNbJ2Fkcy5wbHVzLjEnXSkge1xyXG4gICAgICAgIHRoYXQuZGVmaW5lU2xvdHNfZnVuYygnYWRzLnBsdXMuMScsIFtbNDkwLCA4OF0sWydmbHVpZCddXSk7XHJcbiAgICAgICAgZ29vZ2xldGFnLmNtZC5wdXNoKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgZ29vZ2xldGFnLmRpc3BsYXkoJ2Fkcy5wbHVzLjEnKTtcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG5cclxuICAgIGlmIChBZFVuaXRQcm9wZXJ0aWVzQ2xhc3NPYmouU2xvdHNbdGhpcy5uZXdzcGFwZXJdKSB7XHJcbiAgICAgIGlmICgoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5ncmlkMTI4MFwiKSAhPSBudWxsIHx8IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZ3JpZDEyODBcIikgIT0gdW5kZWZpbmVkKSB8fCAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5ncmlkMTI4MF8yXCIpICE9IG51bGwgfHwgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5ncmlkMTI4MF8yXCIpICE9IHVuZGVmaW5lZCkpIHtcclxuICAgICAgICB0aGF0LmRlZmluZVNsb3RzX2Z1bmModGhpcy5uZXdzcGFwZXIsIFtbOTcwLCA5MF0sIFs5NzAsIDEyNV0sIFsxMTkyLCA5MF0sIFsxMTkyLCAxMDBdXSwgXCJcIiwgXCJcIik7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhhdC5kZWZpbmVTbG90c19mdW5jKHRoaXMubmV3c3BhcGVyLCBbWzk3MCwgOTBdLCBbOTcwLCAxMjVdXSwgXCJcIiwgXCJcIik7XHJcbiAgICAgIH1cclxuICAgICAgLy8gZ29vZ2xldGFnLmNtZC5wdXNoKGZ1bmN0aW9uKCkge1xyXG4gICAgICAvLyAgIGdvb2dsZXRhZy5kaXNwbGF5KHRoaXMubmV3c3BhcGVyKTtcclxuICAgICAgLy8gfSk7XHJcbiAgICAgIGFkVW5pdFN0eWxlc0NsYXNzT2JqW1wiYWRzLm5ld3NwYXBlclwiXShcImFkcy5uZXdzcGFwZXJcIik7XHJcbiAgICB9XHJcbiAgICBsZXQgc2hvd19zcG90XzEgPSAxO1xyXG4gICAgaWYgKHRoaXMuZGNjZyA9PSBcImFydGljbGVcIikge1xyXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuZGNUYWdzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuZGNUYWdzW2ldID09IFwi16rXldeb158g16nXmdeV15XXp9eZXCIgfHwgdGhpcy5kY1RhZ3NbaV0gPT0gXCLXqteV15vXnyDXpNeo16HXldee15lcIikge1xyXG4gICAgICAgICAgICAgIGlmIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFkcy5zcG90LjFcIikgIT0gbnVsbCB8fCBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFkcy5zcG90LjFcIikgIT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFkcy5zcG90LjFcIikuc3R5bGUuZGlzcGxheT0nbm9uZSc7XHJcbiAgICAgICAgICAgICAgfSBcclxuICAgICAgICAgICAgICBzaG93X3Nwb3RfMSA9IDA7XHJcbiAgICAgICAgIH0gXHJcbiAgICAgIH1cclxuICAgICAgaWYgKHNob3dfc3BvdF8xID09IDEgJiYgQWRVbml0UHJvcGVydGllc0NsYXNzT2JqLlNsb3RzW1wiYWRzLnNwb3QuMVwiXSkge1xyXG4gICAgICAgIHRoYXQuZGVmaW5lU2xvdHNfZnVuYyhcImFkcy5zcG90LjFcIiwgWzMwMCwgMjUwXSwgXCJcIiwgXCJcIik7XHJcbiAgICAgICAgLy9nb29nbGV0YWcuY21kLnB1c2goZnVuY3Rpb24gKCkgeyBnb29nbGV0YWcuZGlzcGxheSgnYWRzLnNwb3QuMScpOyB9KTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgICAgXHJcbiAgICAvL2lmIChBZFVuaXRQcm9wZXJ0aWVzQ2xhc3NPYmouU2xvdHNbXCJhZHMuc3BvdC4xN1wiXSkge1xyXG4gICAgICAvL3RoYXQuZGVmaW5lU2xvdHNfZnVuYyhcImFkcy5zcG90LjE3XCIsIFszMDAsIDI1MF0sIFwiXCIsIFwiXCIpO1xyXG4gICAgICAvL2dvb2dsZXRhZy5jbWQucHVzaChmdW5jdGlvbiAoKSB7IGdvb2dsZXRha2cuZGlzcGxheSgnYWRzLnNwb3QuMTcnKTsgfSk7XHJcbiAgICAvL31cclxuXHJcbiAgICAvLyBmdW5jdGlvbiB3YWl0Rm9yQ29tUHBsdXMoY2FsbGJhY2spIHtcclxuICAgIC8vICAgICAgICAgdmFyIHBvb3BzID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKXtcclxuICAgIC8vICAgICAgICAgICAgIGlmKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocHBsdXNfaGVhZGxpbmVzKSkge1xyXG4gICAgLy8gICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwocG9vcHMpOyAgICAgICAgICAgIFxyXG4gICAgLy8gICAgICAgICAgICAgICAgIGNhbGxiYWNrKCk7XHJcbiAgICAvLyAgICAgICAgICAgICB9XHJcbiAgICAvLyAgICAgICAgIH0sIDEwMCk7XHJcbiAgICAvLyB9XHJcbiAgXHJcbiAgLy8gIHdhaXRGb3JDb21QcGx1cyhmdW5jdGlvbigpIHtcclxuXHJcbiBcclxuICAgICAgICAgXHJcbiAgIC8vICAgfSk7XHJcblxyXG4gICAgaWYgKEFkVW5pdFByb3BlcnRpZXNDbGFzc09iai5TbG90c1tcImFkcy5ib3guc2hvcHBpbmcuemlyYS4xXCJdIHx8IEFkVW5pdFByb3BlcnRpZXNDbGFzc09iai5TbG90c1tcImFkcy5ib3guc2hvcHBpbmcuemlyYS4yXCJdKSB7XHJcbiAgICAgIHRoYXQuZGVmaW5lU2xvdHNfZnVuYyhcImFkcy5ib3guc2hvcHBpbmcuemlyYS4xXCIsIFtbMzAwLCA2MF0sIFsnZmx1aWQnXV0pO1xyXG4gICAgICB0aGF0LmRlZmluZVNsb3RzX2Z1bmMoXCJhZHMuYm94LnNob3BwaW5nLnppcmEuMlwiLCBbWzMwMCwgNjBdLCBbJ2ZsdWlkJ11dKTtcclxuICAgIH1cclxuXHJcbiAgICBcclxuICAgIGlmIChBZFVuaXRQcm9wZXJ0aWVzQ2xhc3NPYmouU2xvdHNbXCJhZHMuNjUweDExNS4xXCJdKSB7XHJcbiAgICAgIHRoYXQuZGVmaW5lU2xvdHNfZnVuYyhcImFkcy42NTB4MTE1LjFcIiwgWzY1MCwgMTE1XSwgXCJcIiwgXCJcIik7XHJcbiAgICAgIC8vZ29vZ2xldGFnLmNtZC5wdXNoKGZ1bmN0aW9uICgpIHsgZ29vZ2xldGFnLmRpc3BsYXkoJ2Fkcy42NTB4MTE1LjEnKTsgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAod2luZG93LnluZXRfc2l0ZXMgPT0gZmFsc2UgJiYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZ3JpZDEyODBfMlwiKSA9PSBudWxsIHx8IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZ3JpZDEyODBfMlwiKSA9PSB1bmRlZmluZWQpKSB7XHJcbiAgICAgIGlmIChBZFVuaXRQcm9wZXJ0aWVzQ2xhc3NPYmouU2xvdHNbXCJhZHMuaW5yZWFkXCJdKSB7XHJcbiAgICAgICAgdGhhdC5kZWZpbmVTbG90c19mdW5jKFwiYWRzLmlucmVhZFwiLCBbJ2ZsdWlkJ10sIFwiXCIsIFwiXCIpO1xyXG4gICAgICB9XHJcbiAgICAgIGlmIChBZFVuaXRQcm9wZXJ0aWVzQ2xhc3NPYmouU2xvdHNbXCJhZHMuYWJvdmVjb21tZW50c1wiXSkge1xyXG4gICAgICAgIHRoYXQuZGVmaW5lU2xvdHNfZnVuYyhcImFkcy5hYm92ZWNvbW1lbnRzXCIsIFsnZmx1aWQnXSwgXCJcIiwgXCJcIik7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcblxyXG4gIC8vIFZlcnRpY2FsIHZpZGVvIGFkc1xyXG4gIGxldCB2ZXJ0aWNhbF92aWRlbyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIueW5ldC12aWRlby12ZXJ0aWNhbC0xMjgwXCIpO1xyXG4gIGlmICh2ZXJ0aWNhbF92aWRlbykge1xyXG4gIGxldCBhZHNfaWRzID0gW107XHJcbiAgbGV0IGRlZmluZWRfYWRzID0gW107XHJcbiAgd2luZG93LmFkc19hcnJheSA9IFtdO1xyXG4gIHZlcnRpY2FsX3ZpZGVvLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpPT4geyBcclxuICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFkc192ZXJ0aWNhbF92aWRlbycpKSB7XHJcbiAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5hZHNfdmVydGljYWxfdmlkZW8nKS5mb3JFYWNoKCh5LGluZGV4KT0+IHtcclxuICAgICAgICBsZXQgYWRfaWQgPSB5LmlkO1xyXG4gICAgICAgIGxldCBudW1fYWQgPSBhZF9pZC5zdWJzdHIoYWRfaWQubGVuZ3RoIC0gMSk7IFxyXG4gICAgICAgIGlmIChkZWZpbmVkX2Fkcy5pbmRleE9mKGFkX2lkKSA8IDApIHtcclxuICAgICAgICAgIGdvb2dsZXRhZy5jbWQucHVzaCgoKSA9PiB7XHJcbiAgICAgICAgICB3aW5kb3cuYWRzX2FycmF5W251bV9hZF0gPSBnb29nbGV0YWcuZGVmaW5lU2xvdChBZFVuaXRGdW5jdGlvbnNDbGFzc09iai5hZFVuaXRDYWxsX2Z1bmMoYWRfaWQpLCBbWzM2MCwgNjY2XSwgW1wiZmx1aWRcIl1dLCBhZF9pZCkuYWRkU2VydmljZShnb29nbGV0YWcucHViYWRzKCkpOyAgICAgICBcclxuICAgICAgICAgIGdvb2dsZXRhZy5lbmFibGVTZXJ2aWNlcygpO1xyXG4gICAgICAgICAgZGVmaW5lZF9hZHMucHVzaChhZF9pZCk7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9IFxyXG4gICAgICB9KTtcclxuICB9XHJcbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnluZXQtdmlkZW8tdmVydGljYWwtMTI4MCAuc2xpY2stc2xpZGUnKS5mb3JFYWNoKChpLGluZGV4KT0+IHtcclxuICAgIHZhciBvYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBpZiAoaS5jbGFzc0xpc3QuY29udGFpbnMoXCJzbGljay1hY3RpdmVcIikpIHtcclxuICAgICAgICAgICAgICAgIGlmIChpLnF1ZXJ5U2VsZWN0b3IoJy5hZHNfdmVydGljYWxfdmlkZW8nKSAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICBsZXQgdmlkZW9fYmFubmVyID0gaS5xdWVyeVNlbGVjdG9yKCcuYWRzX3ZlcnRpY2FsX3ZpZGVvJyk7XHJcbiAgICAgICAgICAgICAgICAgIGxldCBiYW5uZXJfaWQgPSB2aWRlb19iYW5uZXIuaWQ7XHJcbiAgICAgICAgICAgICAgICAgIGlmIChhZHNfaWRzLmluZGV4T2YoYmFubmVyX2lkKSA8IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBnb29nbGV0YWcuY21kLnB1c2goKCkgPT4geyAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgZ29vZ2xldGFnLmRpc3BsYXkoYmFubmVyX2lkKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmlkZW9fYmFubmVyLnN0eWxlLndpZHRoID0gXCI2NDBweFwiOyAgICBcclxuICAgICAgICAgICAgICAgICAgICB2aWRlb19iYW5uZXIuc3R5bGUudGV4dEFsaWduID0gXCJjZW50ZXJcIjsgIFxyXG4gICAgICAgICAgICAgICAgICBhZHNfaWRzLnB1c2goYmFubmVyX2lkKTsgIFxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgaWYgKGkucXVlcnlTZWxlY3RvcignLmFkc192ZXJ0aWNhbF92aWRlbycpLmlubmVySFRNTCA9PSBcIlwiKSB7IFxyXG4gICAgICAgICAgICAgICAgICAgIGxldCBubV9hZCA9IGJhbm5lcl9pZC5zdWJzdHIoYmFubmVyX2lkLmxlbmd0aCAtIDEpOyBcclxuICAgICAgICAgICAgICAgICAgICBnb29nbGV0YWcucHViYWRzKCkucmVmcmVzaChbd2luZG93LmFkc19hcnJheVtubV9hZF1dKTtcclxuICAgICAgICAgICAgICAgICAgICB2aWRlb19iYW5uZXIuc3R5bGUud2lkdGggPSBcIjY0MHB4XCI7ICAgXHJcbiAgICAgICAgICAgICAgICAgICAgdmlkZW9fYmFubmVyLnN0eWxlLnRleHRBbGlnbiA9IFwiY2VudGVyXCI7ICBcclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9ICAgICAgICAgXHJcbiAgICB9KTsgICAgICAgIFxyXG4gICAgb2JzZXJ2ZXIub2JzZXJ2ZShpLCB7IGF0dHJpYnV0ZXM6IHRydWUsIGNoaWxkTGlzdDogdHJ1ZSB9KTsgICAgIFxyXG4gIH0pO1xyXG4gICB9KTtcclxuICB9XHJcblxyXG4gICB9XHJcbiAgfVxyXG4gIE15bmV0X3JlbmRlclNtYWxsSW5ib3JkKCkge1xyXG4gICAgTG9nKCdSRU5ERVJFRCBTTUFMTCBJTkJPUkQnKTtcclxuICAgIEFkVW5pdEZ1bmN0aW9uc0NsYXNzT2JqLmRlZmluZVNsb3RzTXluZXRfZnVuYyhcImFkcy4zMDB4MTAwLmluYm9yZFwiLCBbMzAwLCAxMDBdKTtcclxuICAgIGdvb2dsZXRhZy5jbWQucHVzaChmdW5jdGlvbigpIHtnb29nbGV0YWcuZGlzcGxheShcImFkcy4zMDB4MTAwLmluYm9yZFwiKTt9KTtcclxuICAgIGFkVW5pdFN0eWxlc0NsYXNzT2JqW1wiYWRzLjMwMHgxMDAuaW5ib3JkXCJdKFwiYWRzLjMwMHgxMDAuaW5ib3JkXCIpOyAgICBcclxuIH0gXHJcbiBSZW5kZXJTbWFsbEluYm9yZCgpIHtcclxuICAgIHRoaXMuY291bnRlcl9saXZlYm94Kys7XHJcbiAgICBMb2coJ1JFTkRFUkVEIFNNQUxMIElOQk9BUkQgJyArIHRoaXMuY291bnRlcl9saXZlYm94KTtcclxuICAgIGlmICh0aGlzLmNvdW50ZXJfbGl2ZWJveCA+IDIpIHtcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgbGV0IGxpdmVib3hfc2l6ZXMgPSAodGhpcy5nZXREZXZpY2VfZnVuYygpID09IFwiQW5kcm9pZFwiKSA/IFtbMzUwLCAxOTddLCBbMzIwLCA0NTBdLCAnZmx1aWQnLCBbMzEwLCAxNzVdXSA6IFtbMzYwLCAxODBdLCAnZmx1aWQnLCBbMzIwLCAxODBdLCBbMzUwLCAxOTddLCBbMzIwLCA0NTBdXTsgICAgICBcclxuICAgIGlmICh3aW5kb3cuZGNQYXRoLmluY2x1ZGVzKFwiUG5haVBsdXNcIikpIHtcclxuICAgICAgbGl2ZWJveF9zaXplcyA9IFsnZmx1aWQnLCBbMzIwLCAxODBdLCBbMzUwLCAxOTddLCBbMzIwLCA0NTBdXTtcclxuICAgICAgaWYgKHRoaXMuZ2V0RGV2aWNlX2Z1bmMoKSA9PSBcIkFuZHJvaWRcIikge1x0XHJcbiAgICAgICAgICBsaXZlYm94X3NpemVzID0gW1szNTAsIDE5N10sIFszMjAsIDQ1MF0sIFszMjAsMTgwXSwgJ2ZsdWlkJ107XHRcdFx0XHRcdFx0XHRcdFxyXG4gICAgICB9IFxyXG4gICAgfVxyXG4gICAgXHJcbiAgICB0aGlzLmRlZmluZVNsb3RzX2Z1bmMoXCJhZHMuaW5ib2FyZFwiLCBsaXZlYm94X3NpemVzKTtcclxuICAgIGlmICh0aGlzLnNob3dNYWFhdmFyb25TdGlja3kgPT0gMCB8fCB0aGlzLnNob3dNYWFhdmFyb25TdGlja3kgPT0gMSAmJiB3aW5kb3cuc2hvd19iaWdsaXZlYm94ID09IHRydWUpIHsgZ29vZ2xldGFnLmNtZC5wdXNoKGZ1bmN0aW9uKCkge2dvb2dsZXRhZy5kaXNwbGF5KFwiYWRzLmluYm9hcmRcIik7fSk7IH1cclxuXHJcbiAgICBJbmZyYXNydWN0dXJlQ2xhc3NPYmouU2xvdFJlbmRlckVuZChmdW5jdGlvbihldmVudCkge1xyXG4gICAgICAgIGlmIChldmVudC5zbG90ID09IEFkVW5pdFByb3BlcnRpZXNDbGFzc09iai5EZWZpbmVfc2xvdHNbXCJhZHMuaW5ib2FyZFwiXSkge1xyXG4gICAgICAgICAgbGV0IGxpdmVib3hMb2FkZWQgPSBmYWxzZTtcclxuICAgICAgICAgIGlmICghbGl2ZWJveExvYWRlZCkgeyAgXHJcbiAgICAgICAgICAgIGlmKCFldmVudC5pc0VtcHR5KSB7ICAgICBcclxuICAgICAgICAgICAgICBsZXQgbGl2ZWJveF9zbG90ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhZHMuaW5ib2FyZFwiKTsgXHJcbiAgICAgICAgICAgICAgaWYgKHdpbmRvdy5kY0NHID09IFwiYXJ0aWNsZVwiICYmIHdpbmRvdy5kY1BhdGguaW5jbHVkZXMoXCJQbmFpUGx1c1wiKSkge1xyXG4gICAgICAgICAgICAgICAgbGl2ZWJveF9zbG90LnNldEF0dHJpYnV0ZShcInN0eWxlXCIsIFwicG9zaXRpb246IHJlbGF0aXZlOyBkaXNwbGF5OmZsZXg7IGp1c3RpZnktY29udGVudDpjZW50ZXI7IC13ZWJraXQtYm94LXBhY2s6Y2VudGVyOyBkaXNwbGF5Oi1tcy1mbGV4Ym94OyAtbXMtZmxleC1wYWNrOmNlbnRlcjsgdGV4dC1hbGlnbjpjZW50ZXI7IG1hcmdpbjowIC0zLjkwNjI1dnc7IHdpZHRoOiBjYWxjKDEwMCUgKyA3LjgxMjV2dykgIWltcG9ydGFudDtcIik7IFxyXG4gICAgICAgICAgICAgIH0gIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgbGl2ZWJveF9zbG90LnNldEF0dHJpYnV0ZShcInN0eWxlXCIsIFwicG9zaXRpb246IHJlbGF0aXZlOyBkaXNwbGF5OmZsZXg7IGp1c3RpZnktY29udGVudDpjZW50ZXI7IC13ZWJraXQtYm94LXBhY2s6Y2VudGVyOyBkaXNwbGF5Oi1tcy1mbGV4Ym94OyAtbXMtZmxleC1wYWNrOmNlbnRlcjsgdGV4dC1hbGlnbjpjZW50ZXI7IG1hcmdpbjowIGF1dG87IHdpZHRoOiAxMDAlO1wiKTsgXHJcbiAgICAgICAgICAgICAgfSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICBpZiAobGl2ZWJveF9zbG90LmNoaWxkcmVuWzBdKSB7IGxpdmVib3hfc2xvdC5jaGlsZHJlblswXS5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnO31cclxuXHJcbiAgICAgICAgICAgICAgaWYgKGV2ZW50LmxpbmVJdGVtSWQgIT0gbnVsbCkgeyBcclxuICAgICAgICAgICAgICAgIHdpbmRvdy5DbG9zZUxpdmVib3ggPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYWRzLmluYm9hcmRcIikuaW5uZXJIVE1MID0gXCJcIjtcclxuICAgICAgICAgICAgICAgICAgdHJ5IHtkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIkxpdmVCb3hfQ2xvc2VfYnV0dG9uXCIpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7fSBjYXRjaCAoZSkge31cclxuICAgICAgICAgICAgICAgIH0gICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgeyBcclxuICAgICAgICAgICAgICAgIGxldCBpbWdfbGl2ZWJveCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbWdcIik7XHJcbiAgICAgICAgICAgICAgICBpbWdfbGl2ZWJveC5pZCA9IFwiTGl2ZUJveF9DbG9zZV9idXR0b25cIjtcclxuICAgICAgICAgICAgICAgIGltZ19saXZlYm94LnNyYyA9IFwiaHR0cHM6Ly90b3RhbG1lZGlhMi55bmV0LmNvLmlsL25ld19ncHQveW5ldF9tdXRhbS9jbG9zZS5wbmdcIjtcclxuICAgICAgICAgICAgICAgIGltZ19saXZlYm94LnNldEF0dHJpYnV0ZShcIm9uQ2xpY2tcIiwgXCJ3aW5kb3cuQ2xvc2VMaXZlYm94KCk7XCIpOyBcclxuICAgICAgICAgICAgICAgIGltZ19saXZlYm94LnNldEF0dHJpYnV0ZShcInN0eWxlXCIsIFwiY3Vyc29yOiBwb2ludGVyOyBwb3NpdGlvbjogYWJzb2x1dGU7IHRvcDogMTRweDsgbGVmdDogMTRweDsgei1pbmRleDogOTk5O1wiKTsgXHJcbiAgICAgICAgICAgICAgICBsaXZlYm94X3Nsb3QuYXBwZW5kQ2hpbGQoaW1nX2xpdmVib3gpOyAgICAgIFxyXG4gICAgICAgICAgICAgICAgfSwgMTAwMCk7XHJcbiAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgICAgICAgaWYgKGV2ZW50LmRhdGEuZXZlbnROYW1lID09PSAnaW5ib2FyZGNsc29lZCcpIHtcclxuICAgICAgICAgICAgICAgICAgICB0cnkge2RvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiTGl2ZUJveF9DbG9zZV9idXR0b25cIikuc3R5bGUuZGlzcGxheSA9ICdub25lJzt9IGNhdGNoIChlKSB7fVxyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgfSwgZmFsc2UpOyAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICB9ICAgICAgICAgIFxyXG4gICAgICAgICAgICB9ICBcclxuICAgICAgICAgICAgICBsaXZlYm94TG9hZGVkPXRydWU7XHJcbiAgICAgICAgICB9ICAgIFxyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0IFx0XHRcdFx0XHRcdFx0XHRcdFx0XHJcbiAgfVxyXG4gIFJlbmRlckJpZ2xpdmVib3goKSB7XHJcbiAgICB0aGlzLmNvdW50ZXJfYmlnbGl2ZWJveCsrO1xyXG4gICAgTG9nKCdSRU5ERVJFRCBCSUdMSVZFQk9YJysgdGhpcy5jb3VudGVyX2JpZ2xpdmVib3gpO1xyXG4gICAgaWYgKHRoaXMuY291bnRlcl9iaWdsaXZlYm94ID4gMikge1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICB0aGlzLmRlZmluZVNsb3RzX2Z1bmMoXCJhZHMuYmlnbGl2ZWJveFwiLCBbWzMyMCwgNDUwXSwgWzM2MCwgMzYwXSwgJ2ZsdWlkJ10pOyBcclxuICAgIGlmICh0aGlzLnNob3dNYWFhdmFyb25TdGlja3kgPT0gMCkgeyBnb29nbGV0YWcuY21kLnB1c2goZnVuY3Rpb24oKSB7IGdvb2dsZXRhZy5kaXNwbGF5KFwiYWRzLmJpZ2xpdmVib3hcIik7IH0pO31cclxuXHJcbiAgICBJbmZyYXNydWN0dXJlQ2xhc3NPYmouU2xvdFJlbmRlckVuZChmdW5jdGlvbihldmVudCkge1xyXG4gICAgICBsZXQgQmlnbGl2ZWJveExvYWRlZCA9IGZhbHNlO1xyXG4gICAgICAgIGlmIChldmVudC5zbG90ID09IEFkVW5pdFByb3BlcnRpZXNDbGFzc09iai5EZWZpbmVfc2xvdHNbXCJhZHMuYmlnbGl2ZWJveFwiXSkge1xyXG4gICAgICAgICAgaWYgKCFCaWdsaXZlYm94TG9hZGVkKSB7ICBcclxuICAgICAgICAgICAgaWYoIWV2ZW50LmlzRW1wdHkpIHsgICAgIFxyXG4gICAgICAgICAgICAgIGxldCBkaXZfYmlnbGl2ZWJveCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYWRzLmJpZ2xpdmVib3hcIik7XHJcbiAgICAgICAgICAgICAgZGl2X2JpZ2xpdmVib3guc2V0QXR0cmlidXRlKFwic3R5bGVcIiwgXCJtYXJnaW46MCBhdXRvOyBwb3NpdGlvbjogcmVsYXRpdmU7ZGlzcGxheTpmbGV4O2p1c3RpZnktY29udGVudDpjZW50ZXI7IC13ZWJraXQtYm94LXBhY2s6Y2VudGVyO2Rpc3BsYXk6LW1zLWZsZXhib3g7LW1zLWZsZXgtcGFjazpjZW50ZXI7dGV4dC1hbGlnbjpjZW50ZXI7d2lkdGg6MTAwJTtcIik7IFxyXG5cclxuICAgICAgICAgICAgICBpZiAoZXZlbnQubGluZUl0ZW1JZCAhPSBudWxsKSB7IFxyXG4gICAgICAgICAgICAgICAgd2luZG93LkNsb3NlQm94ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgdHJ5IHtkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFkcy5iaWdsaXZlYm94XCIpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7fSBjYXRjaCAoZSkge31cclxuICAgICAgICAgICAgICAgIHRyeSB7ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJDbG9zZV9idG5fYmlnbGl2ZWJveFwiKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO30gY2F0Y2ggKGUpIHt9XHJcbiAgICAgICAgICAgICAgICBBZFVuaXRGdW5jdGlvbnNDbGFzc09iai5SZW5kZXJTbWFsbEluYm9yZCgpO1xyXG4gICAgICAgICAgICAgICAgfSAgICBcclxuICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHsgXHJcbiAgICAgICAgICAgICAgICBsZXQgaW1nX2JpZ2xpdmVib3ggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW1nXCIpO1xyXG4gICAgICAgICAgICAgICAgaW1nX2JpZ2xpdmVib3guaWQgPSBcIkNsb3NlX2J0bl9iaWdsaXZlYm94XCI7XHJcbiAgICAgICAgICAgICAgICBpbWdfYmlnbGl2ZWJveC5zcmMgPSBcImh0dHBzOi8vdG90YWxtZWRpYTIueW5ldC5jby5pbC9uZXdfZ3B0L3luZXRfbXV0YW0vY2xvc2UucG5nXCI7XHJcbiAgICAgICAgICAgICAgICBpbWdfYmlnbGl2ZWJveC5zZXRBdHRyaWJ1dGUoXCJvbkNsaWNrXCIsIFwid2luZG93LkNsb3NlQm94KCk7XCIpOyBcclxuICAgICAgICAgICAgICAgIGltZ19iaWdsaXZlYm94LnNldEF0dHJpYnV0ZShcInN0eWxlXCIsIFwiY3Vyc29yOiBwb2ludGVyOyBwb3NpdGlvbjogYWJzb2x1dGU7IHRvcDogMTRweDsgbGVmdDogMTRweDsgei1pbmRleDogOTk5O1wiKTsgXHJcbiAgICAgICAgICAgICAgICBkaXZfYmlnbGl2ZWJveC5hcHBlbmRDaGlsZChpbWdfYmlnbGl2ZWJveCk7XHJcbiAgICAgICAgICAgICAgICB9LCAxMDAwKTtcclxuICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICAgICAgICBpZiAoZXZlbnQuZGF0YS5ldmVudE5hbWUgPT09ICdpbmJvYXJkY2xzb2VkJykgeyAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgdHJ5IHtkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIkNsb3NlX2J0bl9iaWdsaXZlYm94XCIpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7fSBjYXRjaCAoZSkge31cclxuICAgICAgICAgICAgICAgICAgICAgIEFkVW5pdEZ1bmN0aW9uc0NsYXNzT2JqLlJlbmRlclNtYWxsSW5ib3JkKCk7ICBcclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICB9LCBmYWxzZSk7ICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgICAgIGlmIChldmVudC5kYXRhLmV2ZW50TmFtZSA9PT0gJ2luYm9hcmRjbHNvZWQnKSB7ICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgQWRVbml0RnVuY3Rpb25zQ2xhc3NPYmouUmVuZGVyU21hbGxJbmJvcmQoKTsgIFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgfSwgZmFsc2UpOyAgICAgICAgICAgXHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBBZFVuaXRGdW5jdGlvbnNDbGFzc09iai5SZW5kZXJTbWFsbEluYm9yZCgpO1xyXG4gICAgICAgICAgICB9ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgIEJpZ2xpdmVib3hMb2FkZWQ9dHJ1ZTtcclxuICAgICAgICAgIH0gICAgXHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcdFx0XHRcdFx0XHRcdFx0XHRcdCBcdFx0XHRcdFx0XHRcdFx0XHRcdFxyXG4gIH1cclxuICBcclxuICBZbmV0X3JlbmRlclNtYWxsSW5ib3JkKCkge1xyXG4gICAgTG9nKCdCbGF6ZXIgUkVOREVSRUQgU01BTEwgSU5CT1JEJyk7XHJcbiAgICBsZXQgbGl2ZWJveF9zbG90ID0gXCJcIjtcclxuICAgIGxldCBsaXZlYm94X3NpemVzO1xyXG4gICAgICBpZiAodGhpcy5nZXREZXZpY2VfZnVuYygpID09IFwiQW5kcm9pZFwiKSB7XHRcclxuICAgICAgICBsaXZlYm94X3Nsb3QgPSAod2luZG93Lm5ld01lZGlhID09ICdUcnVlJyB8fCB3aW5kb3cueW5ldF9yZXNwb25zaXZlX3NpdGVzKSA/IFwiYWRzLmluYm9hcmRcIiA6IFwiYWRzLnluZXRfbW9iaWxld2ViX2FuZHJvaWRfbGl2ZWJveFwiO1xyXG4gICAgICAgIGxpdmVib3hfc2l6ZXMgPSBbWzM1MCwgMTk3XSwgWzMyMCwgNDUwXSwgJ2ZsdWlkJywgWzMxMCwgMTc1XV07XHRcdFx0XHRcdFx0XHRcdFxyXG4gICAgICB9IGVsc2UgaWYgKHRoaXMuZ2V0RGV2aWNlX2Z1bmMoKSA9PSBcImlQaG9uZVwiKSB7XHRcclxuICAgICAgICBsaXZlYm94X3Nsb3QgPSAod2luZG93Lm5ld01lZGlhID09ICdUcnVlJyB8fCB3aW5kb3cueW5ldF9yZXNwb25zaXZlX3NpdGVzKSA/IFwiYWRzLmluYm9hcmRcIiA6IFwiYWRzLnluZXRfbW9iaWxld2ViX2lwaG9uZV9saXZlYm94XCI7XHJcbiAgICAgICAgbGl2ZWJveF9zaXplcyA9IFtbMzYwLCAxODBdLCAnZmx1aWQnLCBbMzIwLCAxODBdLCBbMzUwLCAxOTddLCBbMzIwLCA0NTBdXTtcdFx0XHRcclxuICAgICB9ICAgIFxyXG4gICAgQWRVbml0RnVuY3Rpb25zQ2xhc3NPYmouZGVmaW5lU2xvdHNfZnVuYyhsaXZlYm94X3Nsb3QsIGxpdmVib3hfc2l6ZXMpO1xyXG4gICAgZ29vZ2xldGFnLmNtZC5wdXNoKGZ1bmN0aW9uKCkge2dvb2dsZXRhZy5kaXNwbGF5KGxpdmVib3hfc2xvdCk7fSk7XHJcbiAgICBhZFVuaXRTdHlsZXNDbGFzc09ialtcIlluZXRfbGl2ZWJveFwiXShcIlluZXRfbGl2ZWJveFwiKTsgICBcdFx0XHRcdFx0XHRcdFx0XHRcdCBcdFx0XHRcdFx0XHRcdFx0XHRcdFxyXG4gIH1cclxuICByZW5kZXJBZChpZCwgc2l6ZXMpIHsgLy8gRm9yIGR5bmFtaWMgYmFubmVyc1xyXG4gICAgbGV0IGpzb25PYmpfZGljdCA9IHRoaXMuanNvbk9iajtcclxuICAgIGdvb2dsZXRhZy5jbWQucHVzaChmdW5jdGlvbigpIHtcclxuICAgICAgZm9yIChsZXQga2V5IG9mIE9iamVjdC5rZXlzKGpzb25PYmpfZGljdCkpIHtcclxuICAgICAgICBnb29nbGV0YWcucHViYWRzKCkuc2V0VGFyZ2V0aW5nKGtleSwganNvbk9ial9kaWN0W2tleV0pO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICAgIGNvbnN0IGVsZW1lbnRfaWQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCk7XHJcbiAgICBpZiAoZWxlbWVudF9pZCAhPSB1bmRlZmluZWQgfHwgZWxlbWVudF9pZCAhPSBudWxsIHx8IGVsZW1lbnRfaWQgIT0gXCJ1bmRlZmluZWRcIikge1xyXG4gICAgICBpZiAod2luZG93LmRjU2l0ZSA9PSBcInludlwiKSB7XHJcbiAgICAgICAgdGhpcy5kZWZpbmVTbG90c19mdW5jKGlkLCBzaXplcyk7XHJcbiAgICAgIH0gZWxzZSBpZiAod2luZG93LmRjU2l0ZSA9PSBcInluc1wiKSB7XHJcbiAgICAgICAgdGhpcy5kZWZpbmVTbG90c1luc19mdW5jKGlkLCBzaXplcyk7XHJcbiAgICAgIH0gZWxzZSBpZiAod2luZG93LmRjU2l0ZSA9PSBcInluZXNcIikge1xyXG4gICAgICAgIHRoaXMuZGVmaW5lU2xvdHNZbmVzX2Z1bmMoaWQsIHNpemVzKTtcclxuICAgICAgfSBlbHNlIGlmICh3aW5kb3cuZGNTaXRlLmluY2x1ZGVzKFwibXluZXRcIikpIHtcclxuICAgICAgICB0aGlzLmRlZmluZVNsb3RzTXluZXRfZnVuYyhpZCwgc2l6ZXMpO1xyXG4gICAgICB9IGVsc2UgaWYgKHdpbmRvdy5kY1NpdGUuaW5jbHVkZXMoXCJ5bnRcIikgJiYgdGhpcy5pbm5lcldpZHRoIDw9IFwiNzY3XCIpIHtcclxuICAgICAgICB0aGlzLmRlZmluZVNsb3RzX2Z1bmMoaWQsIHNpemVzKTtcclxuICAgICAgfSBcclxuICAgIH1cclxuICB9XHJcbiAgZGVmaW5lVW5pdHNYbmV0X2Z1bmMoKSB7XHJcbiAgICBMb2coXCJkZWZpbmVVbml0c1huZXRfZnVuY1wiKTtcclxuICAgIGxldCB0aGF0ID0gdGhpcztcclxuICAgIGxldCBqc29uT2JqX2RpY3QgPSB0aGlzLmpzb25PYmo7XHJcbiAgICBnb29nbGV0YWcuY21kLnB1c2goZnVuY3Rpb24oKSB7XHJcbiAgICAgIGZvciAobGV0IGtleSBvZiBPYmplY3Qua2V5cyhqc29uT2JqX2RpY3QpKSB7XHJcbiAgICAgICAgZ29vZ2xldGFnLnB1YmFkcygpLnNldFRhcmdldGluZyhrZXksIGpzb25PYmpfZGljdFtrZXldKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICBpZiAodGhpcy5pbm5lcldpZHRoIDw9IFwiNzY3XCIpIHtcclxuICAgICAgdGhpcy5maW5kQWxsRGl2X2Z1bmMoKTtcclxuICAgICAgY29uc3QgY2hhbm5lbF9wYXRoX3hudCA9IHRoaXMuZGNQYXRoO1xyXG5cclxuICAgICAgbGV0IHNob3dNYWFhdmFyb24gPSAwO1xyXG4gICAgICAvL2NvbnN0IHBhdGhfYXJyYXlfeG50ID0gY2hhbm5lbF9wYXRoX3hudC5zcGxpdCgnLScpO1xyXG4gICAgICAvLyBsZXQgbnVtX2NoYW5uZWxfeG50O1xyXG4gICAgICAvLyBpZiAocGF0aF9hcnJheV94bnRbMV0gIT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgIC8vICAgICBudW1fY2hhbm5lbF94bnQgPSBwYXRoX2FycmF5X3hudFsxXS5zdWJzdHIoMCwgcGF0aF9hcnJheV94bnRbMV0uaW5kZXhPZignLicpKTtcclxuICAgICAgLy8gfVxyXG4gICAgICAvLy8gSUYgQ2hhbm5lbCBub3QgTEFJU0hBLCB0aGVuIGRvbid0IGFwcGVhciBmcm9tIHRoZSBpZnJhbWUsIGFwcGVhciBmcm9tIGRlZmluZVxyXG4gICAgICBpZiAoY2hhbm5lbF9wYXRoX3hudC5pbmNsdWRlcyhcImxhaXNoYVwiKSkge1xyXG4gICAgICAgIHNob3dNYWFhdmFyb24gPSAwO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHNob3dNYWFhdmFyb24gPSAxO1xyXG4gICAgICAgIExvZyhcIlRSQU5TSVRJQUwgTE9EQURFRDogXCIgKyBzaG93TWFhYXZhcm9uKTtcclxuICAgICAgfVxyXG4gICAgICBpZiAoXHJcbiAgICAgICAgdGhpcy5nZXRVcmxWYXJzX2Z1bmMoXCJJc0FwcFwiKSA9PSBcIjFcIiB8fFxyXG4gICAgICAgIHRoaXMuZ2V0VXJsVmFyc19mdW5jKFwiSXNBcHBcIikgPT0gMSB8fFxyXG4gICAgICAgIHRoaXMuZ2V0VXJsVmFyc19mdW5jKFwiaXNhcHBcIikgPT0gXCIxXCIgfHxcclxuICAgICAgICB0aGlzLmdldFVybFZhcnNfZnVuYyhcImlzYXBwXCIpID09IDFcclxuICAgICAgKSB7XHJcbiAgICAgICAgc2hvd01hYWF2YXJvbiA9IDA7XHJcbiAgICAgICAgTG9nKFwiVFJBTlNJVElBTCBMT0RBREVEIDE6IFwiICsgc2hvd01hYWF2YXJvbik7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKHNob3dNYWFhdmFyb24gPT0gMSAgJiYgQWRVbml0UHJvcGVydGllc0NsYXNzT2JqLlNsb3RzW3RoaXMuTWFhdmFyb25fbW9iaWxlX3hudF0pIHtcclxuICAgICAgICB0aGlzLlRyYW5zID0gdHJ1ZTtcclxuICAgICAgICBpZiAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJtYWF2YXJvbnN0eWxlXCIpICE9IG51bGwpIHtcclxuICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibWFhdmFyb25zdHlsZVwiKS5pbm5lckhUTUwgPSBcIlwiO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBtYWF2YXJvbl9zaXplID1cclxuICAgICAgICAgIHRoaXMuZ2V0RGV2aWNlX2Z1bmMoKSA9PSBcImlQaG9uZVwiIHx8XHJcbiAgICAgICAgICB0aGlzLmdldERldmljZV9mdW5jKCkgPT0gXCJpUGFkXCIgfHxcclxuICAgICAgICAgIHRoaXMuZ2V0RGV2aWNlX2Z1bmMoKSA9PSBcImlQb2RcIlxyXG4gICAgICAgICAgICA/IFsxLCAxXVxyXG4gICAgICAgICAgICA6IFsxLCAyXTtcclxuICAgICAgICBMb2coXCJUUkFOU0lUSUFMIExPREFERUQgMjogXCIgKyBzaG93TWFhYXZhcm9uKTtcclxuICAgICAgICB0aGlzLmRlZmluZVNsb3RzX2Z1bmModGhpcy5NYWF2YXJvbl9tb2JpbGVfeG50LCBtYWF2YXJvbl9zaXplKTtcclxuICAgICAgICAvL2dvb2dsZXRhZy5jbWQucHVzaChmdW5jdGlvbiAoKSB7IGdvb2dsZXRhZy5kaXNwbGF5KCdhZHMudHJhbnNpdGlhbC4xJyk7IH0pO1xyXG4gICAgICB9XHJcblxyXG4gICAgICB0aGlzLmZpbmRBbGxEaXZfZnVuYygpO1xyXG5cclxuICAgICAgaWYgKEFkVW5pdFByb3BlcnRpZXNDbGFzc09iai5TbG90c1t0aGlzLmJveF0pIHtcclxuICAgICAgICB0aGlzLmRlZmluZVNsb3RzX2Z1bmModGhpcy5ib3gsIFszMDAsIDI1MF0pO1xyXG4gICAgICB9XHJcbiAgICAgIGlmICh0aGlzLmRjY2cgPT0gXCJzdWJcIiB8fCB0aGlzLmRjY2cgPT0gXCJhcnRpY2xlXCIpIHtcclxuICAgICAgICBpZiAoQWRVbml0UHJvcGVydGllc0NsYXNzT2JqLlNsb3RzW1wiYWRzLmxpdmVib3hcIl0pIHtcclxuICAgICAgICAgIHRoaXMuZGVmaW5lU2xvdHNfZnVuYyhcImFkcy5saXZlYm94XCIsIFtcclxuICAgICAgICAgICAgWydmbHVpZCddLFxyXG4gICAgICAgICAgICBbMzIwLCA0NTBdLFxyXG4gICAgICAgICAgICBbMzEwLCAxNzVdLFxyXG4gICAgICAgICAgICBbMzIwLCAxODBdLFxyXG4gICAgICAgICAgICBbMzUwLCAxOTddXHJcbiAgICAgICAgICBdKTtcclxuICAgICAgICAgIGFkVW5pdFN0eWxlc0NsYXNzT2JqWydhZHMubGl2ZWJveCddKCdhZHMubGl2ZWJveCcpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBpZiAodGhpcy5kY2NnID09IFwiYXJ0aWNsZVwiKSB7XHJcbiAgICAgICAgaWYgKEFkVW5pdFByb3BlcnRpZXNDbGFzc09iai5TbG90c1tcImFkcy51bnJlYWRcIl0pIHtcclxuICAgICAgICAgIHRoaXMuZGVmaW5lU2xvdHNfZnVuYyhcImFkcy51bnJlYWRcIiwgW1xyXG4gICAgICAgICAgICBbMzEwLCAxNzVdLFxyXG4gICAgICAgICAgICBbMzIwLCAxODBdLFxyXG4gICAgICAgICAgICBbMzUwLCAxOTddXHJcbiAgICAgICAgICBdKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGlmIChcclxuICAgICAgICB0aGlzLmdldFVybFZhcnNfZnVuYyhcInNuYXBcIikgPT0gdW5kZWZpbmVkIHx8XHJcbiAgICAgICAgdGhpcy5nZXRVcmxWYXJzX2Z1bmMoXCJzbmFwXCIpICE9IFwic2hvdFwiXHJcbiAgICAgICkge1xyXG4gICAgICAgIGlmICh0aGlzLmRjU2l0ZSA9PSBcInhudFwiKSB7XHJcbiAgICAgICAgICBMb2coXCJkZWZpbmVVbml0c1huZXRfZnVuYyAyMjJcIiArIHRoaXMuZGNjZyk7XHJcblxyXG4gICAgICAgICAgaWYgKCh3aW5kb3cuZGNDRyA9PSBcIm1haW5cIiB8fCB3aW5kb3cuZGNDRyA9PSBcImFydGljbGVcIiB8fCB3aW5kb3cuZGNDRyA9PSBcInN1YlwiKSAmJiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLk1hYXZhcm9uX3Nsb3QpICE9IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAvL2lmICh0cnVlKSB7XHJcbiAgICAgICAgICAgIC8vIGlmIG51bWJlciBsZXNzIHRoYW4gNCwgZ2V0IHBhcmFtZXRlciBkY3VuaWdwdCA9IHZpZXcobnVtYmVyKSwgaWYgbW9yZSB0aGFuIDQgdGhlbiBkb24ndCBnZXQgcGFyYW1ldGVyXHJcbiAgICAgICAgICAgIGlmIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm1hYXZhcm9uc3R5bGVcIikgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibWFhdmFyb25zdHlsZVwiKS5pbm5lckhUTUwgPSBcIlwiO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuRG91YmxlX0p1bWJvID0gdHJ1ZTtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLkRvdWJsZV9KdW1ibykge1xyXG4gICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMuTWFhdmFyb25fc2xvdCkuaW5uZXJIVE1MID0gXCJcIjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLmRlZmluZVNsb3RzX2Z1bmMoXCJhZHMudG9wXCIsIFtcclxuICAgICAgICAgICAgICBbMSwgMV0sXHJcbiAgICAgICAgICAgICAgWzEsIDJdLFxyXG4gICAgICAgICAgICAgIFs5NzAsIDkwXSxcclxuICAgICAgICAgICAgICBbOTcwLCAyNTBdLFxyXG4gICAgICAgICAgICAgIFsxMDAwLCAyMDBdLFxyXG4gICAgICAgICAgICAgIFs5NzAsIDEzMF0sXHJcbiAgICAgICAgICAgICAgWzk3MCwgMzUwXSxcclxuICAgICAgICAgICAgICBbOTcwLCAxMDBdXHJcbiAgICAgICAgICAgIF0pO1xyXG4gICAgICAgICAgICB0aGlzLmRlZmluZVNsb3RzX2Z1bmMoXHJcbiAgICAgICAgICAgICAgdGhpcy5NYWF2YXJvbl9zbG90LFxyXG4gICAgICAgICAgICAgIFtbMSwgMV0sIFsyLCAxXV0sXHJcbiAgICAgICAgICAgICAgXCJcIixcclxuICAgICAgICAgICAgICBcImdwdF9tYWF2YXJvblwiXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIGxldCBjb250X3cgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNvbnRlbnQtd1wiKTtcclxuICAgICAgICAgICAgbGV0IGNvbnRlbnRfdyA9IGNvbnRfdyAhPT0gbnVsbDtcclxuICAgICAgICAgICAgbGV0IFhudF9NYWF2YXJvbkxvYWRlZCA9IGZhbHNlOyAgICBcclxuICAgICAgICAgICAgSW5mcmFzcnVjdHVyZUNsYXNzT2JqLlNsb3RSZW5kZXJFbmQoZnVuY3Rpb24oZXZlbnQpIHtcclxuICAgICAgICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgICAgICBldmVudC5zbG90ID09IEFkVW5pdFByb3BlcnRpZXNDbGFzc09iai5EZWZpbmVfc2xvdHNbXCJhZHMuaW50ZXJzdGl0aWFsXCJdXHJcbiAgICAgICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIVhudF9NYWF2YXJvbkxvYWRlZCkge1xyXG4gICAgICAgICAgICAgICAgICBpZiAoIWV2ZW50LmlzRW1wdHkpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGF0LmlzX21hYXZhcm9uID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY29udGVudF93KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICBjb250X3cuc3R5bGUuZGlzcGxheT1cIm5vbmVcIjtcclxuICAgICAgICAgICAgICAgICAgICB9ICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgWG50X01hYXZhcm9uTG9hZGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAvLyB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyAgICAgLy9kb2N1bWVudC5oZWFkLnJlbW92ZUNoaWxkKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtYWF2YXJvbnN0eWxlJykpO1xyXG4gICAgICAgICAgICAvLyAgICAgaWYgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtYWF2YXJvbnN0eWxlJykgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAvLyAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtYWF2YXJvbnN0eWxlJykuaW5uZXJIVE1MID0gJyc7XHJcbiAgICAgICAgICAgIC8vICAgICB9XHJcbiAgICAgICAgICAgIC8vIH1cclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGVmaW5lU2xvdHNfZnVuYyhcImFkcy50b3BcIiwgW1xyXG4gICAgICAgICAgICAgIFsxLCAxXSxcclxuICAgICAgICAgICAgICBbOTcwLCA5MF0sXHJcbiAgICAgICAgICAgICAgWzk3MCwgMjUwXSxcclxuICAgICAgICAgICAgICBbMTAwMCwgMjAwXSxcclxuICAgICAgICAgICAgICBbOTcwLCAxMzBdLFxyXG4gICAgICAgICAgICAgIFs5NzAsIDM1MF0sXHJcbiAgICAgICAgICAgICAgWzk3MCwgMTAwXVxyXG4gICAgICAgICAgICBdKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIGZ1bmN0aW9uIFJldHVybl9ET3VibGVfSnVtYm8oKSB7XHJcbiAgICAgIC8vICAgICBpZiAoQWRVbml0UHJvcGVydGllc0NsYXNzT2JqLkRvdWJsZV9KdW1ibyA9PSB0cnVlKSB7XHJcbiAgICAgIC8vICAgICAgIHJldHVybiBbMSwgMV0sIFsxLCAyXTtcclxuICAgICAgLy8gICAgIH0gZWxzZSB7XHJcbiAgICAgIC8vICAgICAgIHJldHVybiBbMSwgMV07XHJcbiAgICAgIC8vICAgICB9XHJcbiAgICAgIC8vIH1cclxuICAgICAgdGhpcy5maW5kQWxsRGl2X2Z1bmMoKTtcclxuICAgICAgLy90aGlzLmRlZmluZVNsb3RzX2Z1bmMoJ2Fkcy50b3AnLCBbUmV0dXJuX0RPdWJsZV9KdW1ibygpLCBbOTcwLCA5MF0sIFs5NzAsIDI1MF0sIFsxMDAwLCAyMDBdLCBbOTcwLCAxMzBdLCBbOTcwLCAzNTBdLCBbOTcwLCAxMDBdXSk7XHJcbiAgICAgIGlmIChBZFVuaXRQcm9wZXJ0aWVzQ2xhc3NPYmouU2xvdHNbdGhpcy5PemVuX3JpZ2h0XSkge1xyXG4gICAgICAgIHRoaXMuZGVmaW5lU2xvdHNfZnVuYyh0aGlzLk96ZW5fcmlnaHQsIEFkVW5pdEFkZGl0aW9uYWxTdHlsZXNDbGFzcy5yZXNpemVPemVuX2Z1bmMoKSk7XHJcbiAgICAgICAgYWRVbml0U3R5bGVzQ2xhc3NPYmpbdGhpcy5PemVuX3JpZ2h0XSh0aGlzLk96ZW5fcmlnaHQpO1xyXG4gICAgICB9XHJcbiAgICAgIC8vR2V0IGFsbCBnZW5lcmFsIGJhbm5lcnMgb24gdGhlIHBhZ2UgKHdpdGggY2xhc3MgZ2VuZXJhbF9iYW5uZXJfYWQpIGFuZCBkZWZpbmUgdGhlbS5cclxuICAgICAgY29uc3Qgb2xkX2RpdnMgPSBuZXcgQXJyYXkoKTtcclxuICAgICAgY29uc3QgbmV3X2RpdnMgPSBuZXcgQXJyYXkoKTtcclxuICAgICAgY29uc3QgZ2VuZXJhbF9kaXZzID0gbmV3IEFycmF5KCk7XHJcbiAgICAgIGNvbnN0IGNsYXNzTmFtZSA9IGdlbmVyYWxfYmFubmVyc19kaXZzO1xyXG4gICAgICBjb25zdCBkaXZfc2l6ZXMgPSBnZW5lcmFsX2Jhbm5lcnNfZGl2c19zaXplcztcclxuICAgICAgY29uc3QgY2xhc3NuYW1lQ291bnQgPSBjbGFzc05hbWUubGVuZ3RoO1xyXG5cclxuICAgICAgaWYgKGNsYXNzTmFtZSAhPSBcIlwiKSB7XHJcbiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBjbGFzc25hbWVDb3VudDsgaisrKSB7XHJcbiAgICAgICAgICBjb25zdCBkaXZfc2l6ZSA9IGRpdl9zaXplc1tqXTtcclxuICAgICAgICAgIGNvbnN0IHdfZGl2ID0gZGl2X3NpemUuc3Vic3RyKDAsIGRpdl9zaXplLmluZGV4T2YoXCJ4XCIpKTtcclxuICAgICAgICAgIGNvbnN0IGhfZGl2ID0gZGl2X3NpemUuc3Vic3RyKGRpdl9zaXplLmluZGV4T2YoXCJ4XCIpICsgMSk7XHJcbiAgICAgICAgICBnZW5lcmFsX2RpdnMucHVzaChbXHJcbiAgICAgICAgICAgIGNsYXNzTmFtZVtqXSxcclxuICAgICAgICAgICAgcGFyc2VJbnQod19kaXYsIDEwKSxcclxuICAgICAgICAgICAgcGFyc2VJbnQoaF9kaXYsIDEwKVxyXG4gICAgICAgICAgXSk7XHJcbiAgICAgICAgICBpZiAod2luZG93Lm5ld01lZGlhID09IFwiVHJ1ZVwiKSB7XHJcbiAgICAgICAgICAgIG9sZF9kaXZzLnB1c2goXCJhZHMuMzAweDI1MC4xXCIsIFwiYWRzLjMwMHgyNTAuMlwiLCBcImFkcy4zMDB4MjUwLjNcIik7XHJcbiAgICAgICAgICAgIG5ld19kaXZzLnB1c2goXCJhZHMuYm94LjFcIiwgXCJhZHMuYm94LjJcIiwgXCJhZHMuYm94LjNcIik7XHJcbiAgICAgICAgICAgIGdlbmVyYWxfZGl2cy5tYXAoZnVuY3Rpb24gKGdkKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgaW5kZXggPSBvbGRfZGl2cy5pbmRleE9mKGdkWzBdKTtcclxuICAgICAgICAgICAgICAgIGlmIChpbmRleD4tMSkgeyAgICBcclxuICAgICAgICAgICAgICAgICAgZ2RbMF0gPSBuZXdfZGl2c1tpbmRleF07XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHRoaXMuZGVmaW5lU2xvdHNfZnVuYyhnZW5lcmFsX2RpdnNbal1bMF0sIFtcclxuICAgICAgICAgICAgZ2VuZXJhbF9kaXZzW2pdWzFdLFxyXG4gICAgICAgICAgICBnZW5lcmFsX2RpdnNbal1bMl1cclxuICAgICAgICAgIF0pO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgIFxyXG4gICAgICBpZiAoQWRVbml0UHJvcGVydGllc0NsYXNzT2JqLlNsb3RzW1wiYWRzLnNhcmdlbFwiXSkge1xyXG4gICAgICAgIHNldFRpbWVvdXQodGhpcy5kZWZpbmVTYXJnZWxfZnVuYyhcImFkcy5zYXJnZWxcIiksIDI1MDApO1xyXG4gICAgICB9XHJcbiAgICAgIGlmIChBZFVuaXRQcm9wZXJ0aWVzQ2xhc3NPYmouU2xvdHNbdGhpcy5uZXdzcGFwZXJfeG50XSkge1xyXG4gICAgICAgIGNvbnN0IG53c3BfZGF5ID0gQWRVbml0UHJvcGVydGllc0NsYXNzT2JqLkdldF9kYXkuZ2V0RGF5KCk7XHJcbiAgICAgICAgY29uc3QgbndzcF9ob3VyID0gQWRVbml0UHJvcGVydGllc0NsYXNzT2JqLkdldF9kYXkuZ2V0SG91cnMoKTtcclxuICAgICAgICAvL2NvbnN0IG53c3BfbWludXRlcyA9ICgnMCcgKyBBZFVuaXRQcm9wZXJ0aWVzQ2xhc3NPYmouR2V0X2RheS5nZXRNaW51dGVzKCkpLnNsaWNlKC0yKTtcclxuXHJcbiAgICAgICAgaWYgKFxyXG4gICAgICAgICAgKG53c3BfZGF5ID09IDQgJiYgbndzcF9ob3VyID49IDEzKSB8fFxyXG4gICAgICAgICAgKG53c3BfZGF5ID09IDUgJiYgbndzcF9ob3VyIDwgMTQpXHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICB0aGlzLmRlZmluZVNsb3RzX2Z1bmModGhpcy5uZXdzcGFwZXJfeG50LCBbWzk3MCwgOTBdLCBbOTcwLCAxMjVdXSk7XHJcbiAgICAgICAgICAvL2dvb2dsZXRhZy5jbWQucHVzaChmdW5jdGlvbiAoKSB7IGdvb2dsZXRhZy5kaXNwbGF5KCdhZHMudG9wLjInKTsgfSk7XHJcbiAgICAgICAgICBhZFVuaXRTdHlsZXNDbGFzc09ialtcImFkcy50b3AuMlwiXShcImFkcy50b3AuMlwiKTtcclxuICAgICAgICB9IGVsc2UgaWYgKFxyXG4gICAgICAgICAgKG53c3BfZGF5ID09IDAgJiYgbndzcF9ob3VyID49IDEzKSB8fFxyXG4gICAgICAgICAgKG53c3BfZGF5ID09IDEgJiYgbndzcF9ob3VyIDwgMTMpXHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICB0aGlzLmRlZmluZVNsb3RzX2Z1bmModGhpcy5uZXdzcGFwZXJfeG50LCBbWzk3MCwgOTBdLCBbOTcwLCAxMjVdXSk7XHJcbiAgICAgICAgICAvL2dvb2dsZXRhZy5jbWQucHVzaChmdW5jdGlvbiAoKSB7IGdvb2dsZXRhZy5kaXNwbGF5KCdhZHMudG9wLjInKTsgfSk7XHJcbiAgICAgICAgICBhZFVuaXRTdHlsZXNDbGFzc09ialtcImFkcy50b3AuMlwiXShcImFkcy50b3AuMlwiKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgaWYgKHRoaXMuZGNjZyA9PSBcImFydGljbGVcIikge1xyXG4gICAgICAgIHRoaXMuZGVmaW5lU2xvdHNfZnVuYyh0aGlzLnRvcF9taWRkbGVfeG50LCBbOTcwLCA5MF0pO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoQWRVbml0UHJvcGVydGllc0NsYXNzT2JqLlNsb3RzW1wiYWRzLnNwb3QuMVwiXSkge1xyXG4gICAgICAgIHRoaXMuZGVmaW5lU2xvdHNfZnVuYyhcImFkcy5zcG90LjFcIiwgWzMwMCwgMjUwXSk7XHJcbiAgICAgICAgLy9nb29nbGV0YWcuY21kLnB1c2goZnVuY3Rpb24gKCkgeyBnb29nbGV0YWcuZGlzcGxheSgnYWRzLnNwb3QuMScpOyB9KTtcclxuICAgICAgfVxyXG4gICAgICBpZiAoQWRVbml0UHJvcGVydGllc0NsYXNzT2JqLlNsb3RzW1wiYWRzLnNwb3QuMTdcIl0pIHtcclxuICAgICAgICB0aGlzLmRlZmluZVNsb3RzX2Z1bmMoXCJhZHMuc3BvdC4xN1wiLCBbMzAwLCAyNTBdKTtcclxuICAgICAgICAvL2dvb2dsZXRhZy5jbWQucHVzaChmdW5jdGlvbiAoKSB7IGdvb2dsZXRhZy5kaXNwbGF5KCdhZHMuc3BvdC4xNycpOyB9KTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH0gLy9lbmQgb2YgZGVmaW5lVW5pdHNYbmV0X2Z1bmNcclxuICBkZWZpbmVTYXJnZWxfZnVuYyhpZCkge1xyXG4gICAgTG9nKFwiZGVmaW5lU2FyZ2VsX2Z1bmNcIik7XHJcbiAgICBBZFVuaXRQcm9wZXJ0aWVzQ2xhc3NPYmouRGVmaW5lX3Nsb3RzW2lkXSA9IHRoaXMuZGVmaW5lU2xvdHNfZnVuYyhpZCwgW1xyXG4gICAgICBbOTgwLCA1MF0sXHJcbiAgICAgIFsxOTIwLCA1MF1cclxuICAgIF0pO1xyXG4gICAgLy9nb29nbGV0YWcuY21kLnB1c2goZnVuY3Rpb24gKCkgeyBnb29nbGV0YWcuZGlzcGxheShpZCk7IH0pO1xyXG4gICAgLy9hZFVuaXRTdHlsZXNDbGFzc09ialtpZF0oaWQpO1xyXG4gIH1cclxuICBkZWZpbmVTbG90czgwMF9mdW5jKGlkLCBzaXplKSB7XHJcbiAgICBMb2coXCJkZWZpbmVTbG90czgwMF9mdW5jXCIpO1xyXG4gICAgbGV0IHRoYXQgPSB0aGlzO1xyXG4gICAgZ29vZ2xldGFnLmNtZC5wdXNoKGZ1bmN0aW9uKCkge1xyXG4gICAgICBpZiAoaWQgPT0gXCJhZHMudG9wcmlnaHRcIikge1xyXG4gICAgICAgIEFkVW5pdFByb3BlcnRpZXNDbGFzc09iai5EZWZpbmVfc2xvdHNbaWRdID0gZ29vZ2xldGFnXHJcbiAgICAgICAgICAuZGVmaW5lU2xvdCh0aGF0LmFkVW5pdENhbGxfZnVuYyhpZCksIHNpemUsIGlkKVxyXG4gICAgICAgICAgLmFkZFNlcnZpY2UoZ29vZ2xldGFnLnB1YmFkcygpLnNldFRhcmdldGluZyhcImRjZm1cIiwgXCJiYXNlXCIpKVxyXG4gICAgICAgICAgLnNldENvbGxhcHNlRW1wdHlEaXYodHJ1ZSk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgQWRVbml0UHJvcGVydGllc0NsYXNzT2JqLkRlZmluZV9zbG90c1tpZF0gPSBnb29nbGV0YWdcclxuICAgICAgICAgIC5kZWZpbmVTbG90KHRoYXQuYWRVbml0Q2FsbF9mdW5jKGlkKSwgc2l6ZSwgaWQpXHJcbiAgICAgICAgICAuYWRkU2VydmljZShnb29nbGV0YWcucHViYWRzKCkpXHJcbiAgICAgICAgICAuc2V0Q29sbGFwc2VFbXB0eURpdih0cnVlKTtcclxuICAgICAgfVxyXG4gICAgICAvL2dvb2dsZXRhZy5wdWJhZHMoKS5lbmFibGVTaW5nbGVSZXF1ZXN0KCk7XHJcbiAgICAgIGdvb2dsZXRhZy5wdWJhZHMoKS5hZGRFdmVudExpc3RlbmVyKFwic2xvdFJlbmRlckVuZGVkXCIsIGV2ZW50ID0+IHtcclxuICAgICAgICBJbmZyYXNydWN0dXJlQ2xhc3NPYmoub25SZW5kZXIoZXZlbnQsIGlkKTtcclxuICAgICAgfSk7XHJcbiAgICAgIC8vZ29vZ2xldGFnLmVuYWJsZVNlcnZpY2VzKCk7XHJcbiAgICB9KTtcclxuICB9XHJcbiAgZGVmaW5lU2xvdHNZbnNfZnVuYyhpZCwgc2l6ZSwgYXRycikge1xyXG4gICAgTG9nKFwiZGVmaW5lU2xvdHNZbnNfZnVuY1wiKTtcclxuICAgIGxldCB0aGF0ID0gdGhpcztcclxuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMikge1xyXG4gICAgICBjb25zdCB0YXJnZXRfYXR0ciA9IGF0cnI7XHJcbiAgICAgIGdvb2dsZXRhZy5jbWQucHVzaChmdW5jdGlvbigpIHtcclxuICAgICAgICBBZFVuaXRQcm9wZXJ0aWVzQ2xhc3NPYmouRGVmaW5lX3Nsb3RzW2lkXSA9IGdvb2dsZXRhZ1xyXG4gICAgICAgICAgLmRlZmluZVNsb3QodGhhdC5hZFVuaXRDYWxsWW5zX2Z1bmMoaWQpLCBzaXplLCBpZClcclxuICAgICAgICAgIC5hZGRTZXJ2aWNlKFxyXG4gICAgICAgICAgICBnb29nbGV0YWcucHViYWRzKCkuc2V0VGFyZ2V0aW5nKHRhcmdldF9hdHRyWzBdLCB0YXJnZXRfYXR0clsxXSlcclxuICAgICAgICAgIClcclxuICAgICAgICAgIC5zZXRDb2xsYXBzZUVtcHR5RGl2KHRydWUsIHRydWUpO1xyXG4gICAgICAgIC8vZ29vZ2xldGFnLnB1YmFkcygpLmVuYWJsZVNpbmdsZVJlcXVlc3QoKTtcclxuICAgICAgICBnb29nbGV0YWcucHViYWRzKCkuYWRkRXZlbnRMaXN0ZW5lcihcInNsb3RSZW5kZXJFbmRlZFwiLCBldmVudCA9PiB7XHJcbiAgICAgICAgICBJbmZyYXNydWN0dXJlQ2xhc3NPYmoub25SZW5kZXIoZXZlbnQsIGlkKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAvL2dvb2dsZXRhZy5lbmFibGVTZXJ2aWNlcygpO1xyXG4gICAgICB9KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGdvb2dsZXRhZy5jbWQucHVzaChmdW5jdGlvbigpIHtcclxuICAgICAgICBBZFVuaXRQcm9wZXJ0aWVzQ2xhc3NPYmouRGVmaW5lX3Nsb3RzW2lkXSA9IGdvb2dsZXRhZ1xyXG4gICAgICAgICAgLmRlZmluZVNsb3QodGhhdC5hZFVuaXRDYWxsWW5zX2Z1bmMoaWQpLCBzaXplLCBpZClcclxuICAgICAgICAgIC5hZGRTZXJ2aWNlKGdvb2dsZXRhZy5wdWJhZHMoKSlcclxuICAgICAgICAgIC5zZXRDb2xsYXBzZUVtcHR5RGl2KHRydWUsIHRydWUpO1xyXG4gICAgICAgIC8vZ29vZ2xldGFnLnB1YmFkcygpLmVuYWJsZVNpbmdsZVJlcXVlc3QoKTtcclxuICAgICAgICBnb29nbGV0YWcucHViYWRzKCkuYWRkRXZlbnRMaXN0ZW5lcihcInNsb3RSZW5kZXJFbmRlZFwiLCBldmVudCA9PiB7XHJcbiAgICAgICAgICBJbmZyYXNydWN0dXJlQ2xhc3NPYmoub25SZW5kZXIoZXZlbnQsIGlkKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAvL2dvb2dsZXRhZy5lbmFibGVTZXJ2aWNlcygpO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9IC8vZW5kIGRlZmluZVNsb3RzWW5zX2Z1bmNcclxuICBkZWZpbmVTbG90c1luZXNfZnVuYyhpZCwgc2l6ZSwgYXRycikge1xyXG4gICAgTG9nKFwiZGVmaW5lU2xvdHNZbmVzX2Z1bmNcIik7XHJcbiAgICBsZXQgdGhhdCA9IHRoaXM7XHJcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDIpIHtcclxuICAgICAgY29uc3QgdGFyZ2V0X2F0dHIgPSBhdHJyO1xyXG4gICAgICBnb29nbGV0YWcuY21kLnB1c2goZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgQWRVbml0UHJvcGVydGllc0NsYXNzT2JqLkRlZmluZV9zbG90c1tpZF0gPSBnb29nbGV0YWdcclxuICAgICAgICAgIC5kZWZpbmVTbG90KHRoYXQuYWRVbml0Q2FsbFluZXNfZnVuYyhpZCksIHNpemUsIGlkKVxyXG4gICAgICAgICAgLmFkZFNlcnZpY2UoXHJcbiAgICAgICAgICAgIGdvb2dsZXRhZy5wdWJhZHMoKS5zZXRUYXJnZXRpbmcodGFyZ2V0X2F0dHJbMF0sIHRhcmdldF9hdHRyWzFdKVxyXG4gICAgICAgICAgKVxyXG4gICAgICAgICAgLnNldENvbGxhcHNlRW1wdHlEaXYodHJ1ZSwgdHJ1ZSk7XHJcbiAgICAgICAgLy9nb29nbGV0YWcucHViYWRzKCkuZW5hYmxlU2luZ2xlUmVxdWVzdCgpO1xyXG4gICAgICAgIGdvb2dsZXRhZy5wdWJhZHMoKS5hZGRFdmVudExpc3RlbmVyKFwic2xvdFJlbmRlckVuZGVkXCIsIGV2ZW50ID0+IHtcclxuICAgICAgICAgIEluZnJhc3J1Y3R1cmVDbGFzc09iai5vblJlbmRlcihldmVudCwgaWQpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vZ29vZ2xldGFnLmVuYWJsZVNlcnZpY2VzKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgZ29vZ2xldGFnLmNtZC5wdXNoKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIEFkVW5pdFByb3BlcnRpZXNDbGFzc09iai5EZWZpbmVfc2xvdHNbaWRdID0gZ29vZ2xldGFnXHJcbiAgICAgICAgICAuZGVmaW5lU2xvdCh0aGF0LmFkVW5pdENhbGxZbmVzX2Z1bmMoaWQpLCBzaXplLCBpZClcclxuICAgICAgICAgIC5hZGRTZXJ2aWNlKGdvb2dsZXRhZy5wdWJhZHMoKSlcclxuICAgICAgICAgIC5zZXRDb2xsYXBzZUVtcHR5RGl2KHRydWUsIHRydWUpO1xyXG4gICAgICAgIC8vZ29vZ2xldGFnLnB1YmFkcygpLmVuYWJsZVNpbmdsZVJlcXVlc3QoKTtcclxuICAgICAgICBnb29nbGV0YWcucHViYWRzKCkuYWRkRXZlbnRMaXN0ZW5lcihcInNsb3RSZW5kZXJFbmRlZFwiLCBldmVudCA9PiB7XHJcbiAgICAgICAgICBJbmZyYXNydWN0dXJlQ2xhc3NPYmoub25SZW5kZXIoZXZlbnQsIGlkKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAvL2dvb2dsZXRhZy5lbmFibGVTZXJ2aWNlcygpO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9IC8vZW5kIGRlZmluZVNsb3RzWW5lc19mdW5jXHJcbiAgZGVmaW5lU2xvdHNNeW5ldF9mdW5jKGlkLCBzaXplLCBhdHJyKSB7XHJcbiAgICBMb2coXCJkZWZpbmVTbG90c015bmV0X2Z1bmNcIik7XHJcbiAgICBsZXQgdGhhdCA9IHRoaXM7XHJcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDIpIHtcclxuICAgICAgY29uc3QgdGFyZ2V0X2F0dHIgPSBhdHJyO1xyXG4gICAgICBnb29nbGV0YWcuY21kLnB1c2goZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgQWRVbml0UHJvcGVydGllc0NsYXNzT2JqLkRlZmluZV9zbG90c1tpZF0gPSBnb29nbGV0YWdcclxuICAgICAgICAgIC5kZWZpbmVTbG90KHRoYXQuYWRVbml0Q2FsbE15bmV0X2Z1bmMoaWQpLCBzaXplLCBpZClcclxuICAgICAgICAgIC5hZGRTZXJ2aWNlKFxyXG4gICAgICAgICAgICBnb29nbGV0YWcucHViYWRzKCkuc2V0VGFyZ2V0aW5nKHRhcmdldF9hdHRyWzBdLCB0YXJnZXRfYXR0clsxXSlcclxuICAgICAgICAgIClcclxuICAgICAgICAgIC5zZXRDb2xsYXBzZUVtcHR5RGl2KHRydWUsIHRydWUpO1xyXG4gICAgICAgIC8vZ29vZ2xldGFnLnB1YmFkcygpLmVuYWJsZVNpbmdsZVJlcXVlc3QoKTtcclxuICAgICAgICBnb29nbGV0YWcucHViYWRzKCkuYWRkRXZlbnRMaXN0ZW5lcihcInNsb3RSZW5kZXJFbmRlZFwiLCBldmVudCA9PiB7XHJcbiAgICAgICAgICBJbmZyYXNydWN0dXJlQ2xhc3NPYmoub25SZW5kZXIoZXZlbnQsIGlkKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAvL2dvb2dsZXRhZy5lbmFibGVTZXJ2aWNlcygpO1xyXG4gICAgICB9KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGdvb2dsZXRhZy5jbWQucHVzaChmdW5jdGlvbigpIHtcclxuICAgICAgICBBZFVuaXRQcm9wZXJ0aWVzQ2xhc3NPYmouRGVmaW5lX3Nsb3RzW2lkXSA9IGdvb2dsZXRhZ1xyXG4gICAgICAgICAgLmRlZmluZVNsb3QodGhhdC5hZFVuaXRDYWxsTXluZXRfZnVuYyhpZCksIHNpemUsIGlkKVxyXG4gICAgICAgICAgLmFkZFNlcnZpY2UoZ29vZ2xldGFnLnB1YmFkcygpKVxyXG4gICAgICAgICAgLnNldENvbGxhcHNlRW1wdHlEaXYodHJ1ZSwgdHJ1ZSk7XHJcbiAgICAgICAgLy9nb29nbGV0YWcucHViYWRzKCkuZW5hYmxlU2luZ2xlUmVxdWVzdCgpO1xyXG4gICAgICAgIGdvb2dsZXRhZy5wdWJhZHMoKS5hZGRFdmVudExpc3RlbmVyKFwic2xvdFJlbmRlckVuZGVkXCIsIGV2ZW50ID0+IHtcclxuICAgICAgICAgIEluZnJhc3J1Y3R1cmVDbGFzc09iai5vblJlbmRlcihldmVudCwgaWQpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vZ29vZ2xldGFnLmVuYWJsZVNlcnZpY2VzKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH0gLy9lbmQgZGVmaW5lU2xvdHNNeW5ldF9mdW5jXHJcbiAgZGVmaW5lU2xvdHNfZnVuYyhpZCwgc2l6ZV9hcnJ5LCBhdHJyID0gXCJcIiwgYXR0cl8yID0gXCJcIikge1xyXG4gICAgLy9kZWZpbmVTbG90c19mdW5jIGZ1bmN0b24gY2FsbCBmcm9tIGRlZmluZVVuaXRzX2Z1bmMgYW5kIGNyZWF0ZSBzbG90cyBhbGwgZGF0YSBmb3IgZWFjaCBzbG90IHNhdmUgYXQgRGVmaW5lX3Nsb3RzIE9iamVjdFxyXG4gICAgbGV0IGFkX3VuaXRfcGF0aCA9IFwiXCI7XHJcbiAgICBpZiAoSW5mcmFzcnVjdHVyZUNsYXNzT2JqLlNpdGUgPT0gXCJpc194bmV0XCIpIHtcclxuICAgICAgYWRfdW5pdF9wYXRoID0gdGhpcy5hZFVuaXRDYWxsWG5ldF9mdW5jKGlkKTtcclxuICAgIH0gZWxzZSBpZiAoSW5mcmFzcnVjdHVyZUNsYXNzT2JqLlNpdGUgPT0gXCJpc195bnNfeW52XCIpIHtcclxuICAgICAgYWRfdW5pdF9wYXRoID0gdGhpcy5hZFVuaXRDYWxsWW5zWW52X2Z1bmMoaWQpO1xyXG4gICAgfSBlbHNlIGlmIChJbmZyYXNydWN0dXJlQ2xhc3NPYmouU2l0ZSA9PSBcImlzX3luZXNcIikge1xyXG4gICAgICBhZF91bml0X3BhdGggPSB0aGlzLmFkVW5pdENhbGxZbmVzX2Z1bmMoaWQpO1xyXG4gICAgfSBlbHNlIGlmIChJbmZyYXNydWN0dXJlQ2xhc3NPYmouU2l0ZSA9PSBcImlzX215bmV0XCIpIHtcclxuICAgICAgYWRfdW5pdF9wYXRoID0gdGhpcy5hZFVuaXRDYWxsTXluZXRfZnVuYyhpZCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBhZF91bml0X3BhdGggPSB0aGlzLmFkVW5pdENhbGxfZnVuYyhpZCk7XHJcbiAgICB9XHJcbiAgICBMb2coXCJBRCBVTklUIFBBVEg6XCIgKyBhZF91bml0X3BhdGggKyBcIiBcIiArIGlkICsgXCIgXCIgKyBhdHRyXzIpO1xyXG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAyKSB7XHJcbiAgICAgIGxldCB0YXJnZXRfYXR0ciA9IGF0cnI7XHJcbiAgICAgIGxldCB0YXJnZXRfMSA9IHRhcmdldF9hdHRyWzBdIHx8IFwiXCI7XHJcbiAgICAgIGxldCB0YXJnZXRfMiA9IHRhcmdldF9hdHRyWzFdIHx8IFwiXCI7XHJcbiAgICAgIGdvb2dsZXRhZy5jbWQucHVzaChmdW5jdGlvbigpIHtcclxuICAgICAgICBpZiAoaWQgPT0gXCJhZHMubWFhdmFyb25cIiAmJiBhdHRyXzIgPT0gXCJncHRfbWFhdmFyb25cIikge1xyXG4gICAgICAgICAgaWYgKEluZnJhc3J1Y3R1cmVDbGFzc09iai5TaXRlID09IFwiaXNfeG5ldFwiKSB7XHJcbiAgICAgICAgICAgIEFkVW5pdFByb3BlcnRpZXNDbGFzc09iai5EZWZpbmVfc2xvdHNbaWRdID0gZ29vZ2xldGFnXHJcbiAgICAgICAgICAgICAgLmRlZmluZVNsb3QoXCIvNjg3MC94bnQub3V0b2ZmcmFtZVwiLCBzaXplX2FycnksIGlkKVxyXG4gICAgICAgICAgICAgIC5hZGRTZXJ2aWNlKGdvb2dsZXRhZy5wdWJhZHMoKSlcclxuICAgICAgICAgICAgICAuc2V0Q29sbGFwc2VFbXB0eURpdih0cnVlKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIEFkVW5pdFByb3BlcnRpZXNDbGFzc09iai5EZWZpbmVfc2xvdHNbaWRdID0gZ29vZ2xldGFnXHJcbiAgICAgICAgICAgICAgLmRlZmluZVNsb3QoXCIvNjg3MC9vdXRvZmZyYW1lXCIsIHNpemVfYXJyeSwgaWQpXHJcbiAgICAgICAgICAgICAgLmFkZFNlcnZpY2UoZ29vZ2xldGFnLnB1YmFkcygpKVxyXG4gICAgICAgICAgICAgIC5zZXRDb2xsYXBzZUVtcHR5RGl2KHRydWUpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSBpZiAodGFyZ2V0XzEgIT0gXCJcIiAmJiB0YXJnZXRfMiAhPSBcIlwiKSB7XHJcbiAgICAgICAgICBBZFVuaXRQcm9wZXJ0aWVzQ2xhc3NPYmouRGVmaW5lX3Nsb3RzW2lkXSA9IGdvb2dsZXRhZ1xyXG4gICAgICAgICAgICAuZGVmaW5lU2xvdChhZF91bml0X3BhdGgsIHNpemVfYXJyeSwgaWQpXHJcbiAgICAgICAgICAgIC5hZGRTZXJ2aWNlKGdvb2dsZXRhZy5wdWJhZHMoKS5zZXRUYXJnZXRpbmcodGFyZ2V0XzEsIHRhcmdldF8yKSlcclxuICAgICAgICAgICAgLnNldENvbGxhcHNlRW1wdHlEaXYodHJ1ZSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIEFkVW5pdFByb3BlcnRpZXNDbGFzc09iai5EZWZpbmVfc2xvdHNbaWRdID0gZ29vZ2xldGFnXHJcbiAgICAgICAgICAgIC5kZWZpbmVTbG90KGFkX3VuaXRfcGF0aCwgc2l6ZV9hcnJ5LCBpZClcclxuICAgICAgICAgICAgLmFkZFNlcnZpY2UoZ29vZ2xldGFnLnB1YmFkcygpKVxyXG4gICAgICAgICAgICAuc2V0Q29sbGFwc2VFbXB0eURpdih0cnVlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy9nb29nbGV0YWcucHViYWRzKCkuZW5hYmxlU2luZ2xlUmVxdWVzdCgpO1xyXG4gICAgICAgIGdvb2dsZXRhZy5wdWJhZHMoKS5hZGRFdmVudExpc3RlbmVyKFwic2xvdFJlbmRlckVuZGVkXCIsIGV2ZW50ID0+IHtcclxuICAgICAgICAgIEluZnJhc3J1Y3R1cmVDbGFzc09iai5vblJlbmRlcihldmVudCwgaWQpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vZ29vZ2xldGFnLmVuYWJsZVNlcnZpY2VzKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgZ29vZ2xldGFnLmNtZC5wdXNoKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGlmICgod2luZG93LmRjUGF0aC5pbmNsdWRlcyhcIjM0NTYuTWFnYXppbmVcIikgfHwgd2luZG93LnluZXRfcmVzcG9uc2l2ZV9zcGVjaWFsKSAmJiB3aW5kb3cubmV3TWVkaWEgPT0gXCJGYWxzZVwiICYmIHdpbmRvdy5pbm5lcldpZHRoIDw9IFwiNzY3XCIpIHtcclxuICAgICAgICAgIGxldCBuZXdfaWQgPSBpZC5zdWJzdHJpbmcoNCk7XHJcbiAgICAgICAgICBpZiAoaWQuaW5jbHVkZXMoXCJ0cmFuc2l0aW9uc1wiKSkgeyAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgQWRVbml0UHJvcGVydGllc0NsYXNzT2JqLkRlZmluZV9zbG90c1tpZF0gPSBnb29nbGV0YWcuZGVmaW5lU2xvdChcIi82ODcwL3luZXRfbW9iaWxlL3luZXRfbW9iaWxld2ViX3RyYW5zaXRpb25zL3luZXRfbW9iaWxld2ViX3RyYW5zaXRpb25zX2dlbmVyYWwvXCIgKyBuZXdfaWQsIHNpemVfYXJyeSwgaWQpLmFkZFNlcnZpY2UoZ29vZ2xldGFnLnB1YmFkcygpKS5zZXRDb2xsYXBzZUVtcHR5RGl2KHRydWUpO1xyXG4gICAgICAgICAgfSBlbHNlIGlmIChpZC5pbmNsdWRlcyhcInN0aWNreVwiKSkge1xyXG4gICAgICAgICAgICBBZFVuaXRQcm9wZXJ0aWVzQ2xhc3NPYmouRGVmaW5lX3Nsb3RzW2lkXSA9IGdvb2dsZXRhZy5kZWZpbmVTbG90KFwiLzY4NzAveW5ldF9tb2JpbGUvWW5ldF9Nb2JpbGVXZWJfQmFubmVycy9cIiArIG5ld19pZCwgc2l6ZV9hcnJ5LCBpZCkuYWRkU2VydmljZShnb29nbGV0YWcucHViYWRzKCkpLnNldENvbGxhcHNlRW1wdHlEaXYodHJ1ZSk7XHJcbiAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBBZFVuaXRQcm9wZXJ0aWVzQ2xhc3NPYmouRGVmaW5lX3Nsb3RzW2lkXSA9IGdvb2dsZXRhZy5kZWZpbmVTbG90KGFkX3VuaXRfcGF0aCwgc2l6ZV9hcnJ5LCBpZCkuYWRkU2VydmljZShnb29nbGV0YWcucHViYWRzKCkpLnNldENvbGxhcHNlRW1wdHlEaXYodHJ1ZSk7XHJcbiAgICAgICAgIH0gICAgICAgIFxyXG4gICAgICAgfSBlbHNlIHtcclxuICAgICAgICBsZXQgdW5pdF9pZCA9IGlkLnN1YnN0cmluZyg0KTtcclxuICAgICAgICBpZiAoaWQgPT0gXCJhZHMudmlkZW9feW5ldHR2XCIpIHtcclxuICAgICAgICAgIEFkVW5pdFByb3BlcnRpZXNDbGFzc09iai5EZWZpbmVfc2xvdHNbaWRdID0gZ29vZ2xldGFnLmRlZmluZVNsb3QoXCIvNjg3MC95bmV0L3ZpZGVvX2Rlc2t0b3AvdmlkZW9feW5ldHR2XCIsIHNpemVfYXJyeSwgaWQpLmFkZFNlcnZpY2UoZ29vZ2xldGFnLnB1YmFkcygpKS5zZXRDb2xsYXBzZUVtcHR5RGl2KHRydWUpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAod2luZG93LmRjU2l0ZSA9PSBcInludlwiICYmIChpZCA9PSBcImFkcy5vcmRlcmluZ190b3VyaXNtXCIgfHwgaWQgPT0gXCJhZHMub3JkZXJpbmdfaGVhbHRoXCIgfHwgaWQgPT0gXCJhZHMub3JkZXJpbmdfc3BvcnRcIikpIHtcclxuICAgICAgICAgIEFkVW5pdFByb3BlcnRpZXNDbGFzc09iai5EZWZpbmVfc2xvdHNbaWRdID0gZ29vZ2xldGFnLmRlZmluZVNsb3QoXCIvNjg3MC95bmV0X21vYmlsZS92ZXN0aV9tb2JpbGV3ZWJfb3JkZXJpbmcvdmVzdGlfbW9iaWxld2ViX1wiICsgaWQuc3Vic3RyaW5nKDQpLCBzaXplX2FycnksIGlkKS5hZGRTZXJ2aWNlKGdvb2dsZXRhZy5wdWJhZHMoKSkuc2V0Q29sbGFwc2VFbXB0eURpdih0cnVlLCB0cnVlKTsgXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIEFkVW5pdFByb3BlcnRpZXNDbGFzc09iai5EZWZpbmVfc2xvdHNbaWRdID0gZ29vZ2xldGFnLmRlZmluZVNsb3QoYWRfdW5pdF9wYXRoLCBzaXplX2FycnksIGlkKS5hZGRTZXJ2aWNlKGdvb2dsZXRhZy5wdWJhZHMoKSkuc2V0Q29sbGFwc2VFbXB0eURpdih0cnVlKTtcclxuICAgICAgICB9ICBcclxuICAgICAgfVxyXG4gICAgICAgIC8vZ29vZ2xldGFnLnB1YmFkcygpLmVuYWJsZVNpbmdsZVJlcXVlc3QoKTtcclxuICAgICAgICBnb29nbGV0YWcucHViYWRzKCkuYWRkRXZlbnRMaXN0ZW5lcihcInNsb3RSZW5kZXJFbmRlZFwiLCBldmVudCA9PiB7XHJcbiAgICAgICAgICBJbmZyYXNydWN0dXJlQ2xhc3NPYmoub25SZW5kZXIoZXZlbnQsIGlkKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAvL2dvb2dsZXRhZy5lbmFibGVTZXJ2aWNlcygpO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9IC8vZW5kIGRlZmluZVNsb3RzX2Z1bmNcclxuICBnZXREZXZpY2VfZnVuYygpIHtcclxuICAgIGxldCB7IG5hdmlnYXRvciB9ID0gd2luZG93O1xyXG4gICAgaWYgKG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL0FuZHJvaWQvaSkpIHtcclxuICAgICAgcmV0dXJuIFwiQW5kcm9pZFwiO1xyXG4gICAgfSBlbHNlIGlmIChuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9BbmRyb2lkL2kpKSB7XHJcbiAgICAgIHJldHVybiBcIkFuZHJvaWRcIjtcclxuICAgIH0gZWxzZSBpZiAobmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvQmxhY2tCZXJyeS9pKSkge1xyXG4gICAgICByZXR1cm4gXCJCbGFja0JlcnJ5XCI7XHJcbiAgICB9IGVsc2UgaWYgKG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL2lQaG9uZS9pKSkge1xyXG4gICAgICByZXR1cm4gXCJpUGhvbmVcIjtcclxuICAgIH0gZWxzZSBpZiAobmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvaVBhZC9pKSkge1xyXG4gICAgICByZXR1cm4gXCJpUGFkXCI7XHJcbiAgICB9IGVsc2UgaWYgKG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL2lQb2QvaSkpIHtcclxuICAgICAgcmV0dXJuIFwiaVBvZFwiO1xyXG4gICAgfSBlbHNlIGlmIChuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9JRU1vYmlsZS9pKSkge1xyXG4gICAgICByZXR1cm4gXCJJRU1vYmlsZVwiO1xyXG4gICAgfSBlbHNlIGlmIChuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9NYWNpbnRvc2gvaSkpIHtcclxuICAgICAgcmV0dXJuIFwiTWFjaW50b3NoXCI7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gXCJQQ1wiO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxuY29uc3QgX0FkVW5pdEZ1bmN0aW9uc0NsYXNzID0gbmV3IEFkVW5pdEZ1bmN0aW9uc0NsYXNzKCk7XHJcbmV4cG9ydCBkZWZhdWx0IF9BZFVuaXRGdW5jdGlvbnNDbGFzcztcclxud2luZG93LkFkVW5pdEZ1bmN0aW9uc0NsYXNzT2JqID0gX0FkVW5pdEZ1bmN0aW9uc0NsYXNzO1xyXG53aW5kb3cuQWRVbml0X3Byb3BlcnRpZXMgPSBfQWRVbml0RnVuY3Rpb25zQ2xhc3M7XHJcbndpbmRvdy5yZW5kZXJBZCA9ICBfQWRVbml0RnVuY3Rpb25zQ2xhc3MucmVuZGVyQWQuYmluZChfQWRVbml0RnVuY3Rpb25zQ2xhc3MpO1xyXG53aW5kb3cuY2xvc2VUcmFuc2l0aW9ucyA9IF9BZFVuaXRGdW5jdGlvbnNDbGFzcy5kZWZpbmVVbml0c19mdW5jLmJpbmQoX0FkVW5pdEZ1bmN0aW9uc0NsYXNzKTsiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQU1BO0FBSkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOzs7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQURBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBYkE7QUFDQTtBQWVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUVBOzs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFLQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFLQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFJQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFHQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBS0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQU1BO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFTQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBOzs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBR0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUtBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFNQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBU0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFHQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBS0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBTUE7QUFDQTtBQU1BO0FBQ0E7QUFDQTtBQU1BO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQU1BO0FBQ0E7QUFDQTtBQUFBO0FBR0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFFQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBUUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFRQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFjQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQXZUQTtBQXlUQTtBQUNBO0FBQUE7QUFDQTs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFNQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBTUE7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTs7O0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFRQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBM0hBO0FBNEhBO0FBQ0E7QUFBQTtBQUNBOzs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBR0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFBQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBS0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFEQTtBQURBO0FBU0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFNQTtBQUNBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFRQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBTUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFBQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBaUJBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQWdCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQVlBO0FBQ0E7QUFTQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFRQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFwTUE7QUFDQTtBQUFBO0FBQUE7QUFvTUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFJQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBMTdCQTtBQTQ3QkE7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBOzs7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFNQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQVNBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUlBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBM0pBO0FBNEpBO0FBQ0E7QUFDQTs7O0FBQUE7QUFDQTtBQUNBO0FBS0E7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU1BO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBOzs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7OztBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7OztBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7O0FBR0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./modules/AdUnitFunctionsClass.js\n");

/***/ }),

/***/ "./modules/AdUnitPropertiesClass.js":
/*!******************************************!*\
  !*** ./modules/AdUnitPropertiesClass.js ***!
  \******************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/classCallCheck */ \"./node_modules/@babel/runtime/helpers/classCallCheck.js\");\n/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/createClass */ \"./node_modules/@babel/runtime/helpers/createClass.js\");\n/* harmony import */ var _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1__);\n\n\n\nvar AdUnitPropertiesClass =\n/*#__PURE__*/\nfunction () {\n  function AdUnitPropertiesClass() {\n    _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default()(this, AdUnitPropertiesClass);\n\n    this.Ver = '12-08-25';\n    this.Define_slots = [];\n    this.Define_ozen_mivzakon = [];\n    this.Define_mivzakon = [];\n    this.Define_ozen = [];\n    this.Slots = [];\n    this.Trans = false;\n    this.Double_Jumbo = false;\n    this.refreshAdOzen = 7 * 60 * 1000;\n    this.set_Targets = [];\n    this.Get_day = new Date();\n    this.refreshAdTime_func();\n  }\n\n  _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1___default()(AdUnitPropertiesClass, [{\n    key: \"refreshAdTime_func\",\n    value: function refreshAdTime_func() {\n      if (window.dcCG) {\n        if (window.dcCG == \"home\" || window.dcPath == \"2775.Knesset-32472.yuval1280\") {\n          return 7 * 60 * 1000;\n        } else if (window.dcCG == \"main\") {\n          return 7 * 60 * 1000;\n        } else if (window.dcCG == \"article\") {\n          return 14 * 60 * 1000;\n        } else {\n          return 7 * 60 * 1000;\n        }\n      } else {\n        return 7 * 60 * 1000;\n      }\n    }\n  }, {\n    key: \"DCview\",\n    set: function set(newDCview) {\n      if (newDCview) {\n        this._DCview = newDCview;\n      }\n    },\n    get: function get() {\n      return this._DCview;\n    }\n  }, {\n    key: \"Expo\",\n    set: function set(newExpo) {\n      if (newExpo) {\n        this._Expo = newExpo;\n      }\n    },\n    get: function get() {\n      return this._Expo;\n    }\n  }]);\n\n  return AdUnitPropertiesClass;\n}();\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (new AdUnitPropertiesClass());//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9tb2R1bGVzL0FkVW5pdFByb3BlcnRpZXNDbGFzcy5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL21vZHVsZXMvQWRVbml0UHJvcGVydGllc0NsYXNzLmpzPzAwYzUiXSwic291cmNlc0NvbnRlbnQiOlsiY2xhc3MgQWRVbml0UHJvcGVydGllc0NsYXNzIHtcclxuICBjb25zdHJ1Y3RvcigpIHtcclxuICAgIHRoaXMuVmVyID0gJzEyLTA4LTI1JztcclxuICAgIHRoaXMuRGVmaW5lX3Nsb3RzID0gW107XHJcbiAgICB0aGlzLkRlZmluZV9vemVuX21pdnpha29uID0gW107XHJcbiAgICB0aGlzLkRlZmluZV9taXZ6YWtvbiA9IFtdO1xyXG4gICAgdGhpcy5EZWZpbmVfb3plbiA9IFtdO1xyXG4gICAgdGhpcy5TbG90cyA9IFtdO1xyXG4gICAgdGhpcy5UcmFucyA9IGZhbHNlO1xyXG4gICAgdGhpcy5Eb3VibGVfSnVtYm8gPSBmYWxzZTtcclxuICAgIHRoaXMucmVmcmVzaEFkT3plbiA9IDcgKiA2MCAqIDEwMDA7XHJcbiAgICB0aGlzLnNldF9UYXJnZXRzID0gW107XHJcbiAgICB0aGlzLkdldF9kYXkgPSBuZXcgRGF0ZSgpO1xyXG4gICAgdGhpcy5yZWZyZXNoQWRUaW1lX2Z1bmMoKTsgXHJcbiAgfVxyXG5cclxuICBzZXQgREN2aWV3KG5ld0RDdmlldykge1xyXG4gICAgaWYgKG5ld0RDdmlldykge1xyXG4gICAgICB0aGlzLl9EQ3ZpZXcgPSBuZXdEQ3ZpZXc7XHJcbiAgICB9IFxyXG4gIH1cclxuICBnZXQgREN2aWV3KCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX0RDdmlldztcclxuICB9XHJcbiAgc2V0IEV4cG8obmV3RXhwbykge1xyXG4gICAgaWYgKG5ld0V4cG8pIHtcclxuICAgICAgdGhpcy5fRXhwbyA9IG5ld0V4cG87XHJcbiAgICB9XHJcbiAgfVxyXG4gIGdldCBFeHBvKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX0V4cG87XHJcbiAgfVxyXG4gIHJlZnJlc2hBZFRpbWVfZnVuYygpIHtcclxuICAgIGlmICh3aW5kb3cuZGNDRykge1xyXG4gICAgICBpZiAod2luZG93LmRjQ0cgPT0gXCJob21lXCIgfHwgd2luZG93LmRjUGF0aCA9PSBcIjI3NzUuS25lc3NldC0zMjQ3Mi55dXZhbDEyODBcIikge1xyXG4gICAgICAgIHJldHVybiA3ICogNjAgKiAxMDAwO1xyXG4gICAgICB9IGVsc2UgaWYgKHdpbmRvdy5kY0NHID09IFwibWFpblwiKSB7XHJcbiAgICAgICAgcmV0dXJuIDcgKiA2MCAqIDEwMDA7XHJcbiAgICAgIH0gZWxzZSBpZiAod2luZG93LmRjQ0cgPT0gXCJhcnRpY2xlXCIpIHtcclxuICAgICAgICByZXR1cm4gMTQgKiA2MCAqIDEwMDA7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIDcgKiA2MCAqIDEwMDA7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiA3ICogNjAgKiAxMDAwO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG5leHBvcnQgZGVmYXVsdCBuZXcgQWRVbml0UHJvcGVydGllc0NsYXNzKCk7XHJcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQTs7O0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBaUJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBOUJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7OztBQWlCQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./modules/AdUnitPropertiesClass.js\n");

/***/ }),

/***/ "./modules/AdUnitStylesClass.js":
/*!**************************************!*\
  !*** ./modules/AdUnitStylesClass.js ***!
  \**************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/classCallCheck */ \"./node_modules/@babel/runtime/helpers/classCallCheck.js\");\n/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/createClass */ \"./node_modules/@babel/runtime/helpers/createClass.js\");\n/* harmony import */ var _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _AdUnitAdditionalStylesClass__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./AdUnitAdditionalStylesClass */ \"./modules/AdUnitAdditionalStylesClass.js\");\n\n\n //  STYLES PER UNIT\n\nvar AdUnitStylesClass =\n/*#__PURE__*/\nfunction () {\n  function AdUnitStylesClass() {\n    _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default()(this, AdUnitStylesClass);\n  }\n\n  _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1___default()(AdUnitStylesClass, [{\n    key: \"ads.mivzakon\",\n    value: function adsMivzakon() {\n      _AdUnitAdditionalStylesClass__WEBPACK_IMPORTED_MODULE_2__[\"default\"].styleMivzakon_func();\n    }\n  }, {\n    key: \"ads.sargel\",\n    value: function adsSargel() {\n      _AdUnitAdditionalStylesClass__WEBPACK_IMPORTED_MODULE_2__[\"default\"].styleSargel_func();\n    }\n  }, {\n    key: \"ads.skyscraper\",\n    value: function adsSkyscraper() {\n      _AdUnitAdditionalStylesClass__WEBPACK_IMPORTED_MODULE_2__[\"default\"].ozen_func();\n    }\n  }, {\n    key: \"ads.skyscraper.left\",\n    value: function adsSkyscraperLeft() {\n      _AdUnitAdditionalStylesClass__WEBPACK_IMPORTED_MODULE_2__[\"default\"].ozen_func();\n    }\n  }, {\n    key: \"ads.ozen.right\",\n    value: function adsOzenRight() {\n      _AdUnitAdditionalStylesClass__WEBPACK_IMPORTED_MODULE_2__[\"default\"].ozen_func();\n    }\n  }, {\n    key: \"ads.ozen_right\",\n    value: function adsOzen_right() {\n      _AdUnitAdditionalStylesClass__WEBPACK_IMPORTED_MODULE_2__[\"default\"].ozen_func();\n    }\n  }, {\n    key: \"ads.ozen.left\",\n    value: function adsOzenLeft() {\n      _AdUnitAdditionalStylesClass__WEBPACK_IMPORTED_MODULE_2__[\"default\"].ozen_func();\n    }\n  }, {\n    key: \"ads.ozen_left\",\n    value: function adsOzen_left() {\n      _AdUnitAdditionalStylesClass__WEBPACK_IMPORTED_MODULE_2__[\"default\"].ozen_func();\n    }\n  }, {\n    key: \"ads.newspaper\",\n    value: function adsNewspaper() {\n      _AdUnitAdditionalStylesClass__WEBPACK_IMPORTED_MODULE_2__[\"default\"].styleNewspaper_func();\n    }\n  }, {\n    key: \"ads.ozen\",\n    value: function adsOzen() {\n      _AdUnitAdditionalStylesClass__WEBPACK_IMPORTED_MODULE_2__[\"default\"].ozen_func();\n    }\n  }, {\n    key: \"ads.top\",\n    value: function adsTop() {\n      _AdUnitAdditionalStylesClass__WEBPACK_IMPORTED_MODULE_2__[\"default\"].top_func();\n    }\n  }, {\n    key: \"ads.sticky\",\n    value: function adsSticky() {\n      _AdUnitAdditionalStylesClass__WEBPACK_IMPORTED_MODULE_2__[\"default\"].styleSticky_func();\n    }\n  }, {\n    key: \"ads.top.2\",\n    value: function adsTop2() {\n      _AdUnitAdditionalStylesClass__WEBPACK_IMPORTED_MODULE_2__[\"default\"].styleNewspaper_func();\n    }\n  }, {\n    key: \"ads.mw.videoinpage\",\n    value: function adsMwVideoinpage() {\n      _AdUnitAdditionalStylesClass__WEBPACK_IMPORTED_MODULE_2__[\"default\"].mw_videoinpage_func();\n    }\n  }, {\n    key: \"ads.biglivebox\",\n    value: function adsBiglivebox() {\n      _AdUnitAdditionalStylesClass__WEBPACK_IMPORTED_MODULE_2__[\"default\"].biglivebox_func();\n    }\n  }, {\n    key: \"ads.mw.biglivebox\",\n    value: function adsMwBiglivebox() {\n      _AdUnitAdditionalStylesClass__WEBPACK_IMPORTED_MODULE_2__[\"default\"].mw_biglivebox_func();\n    }\n  }, {\n    key: \"ads.livebox\",\n    value: function adsLivebox() {\n      _AdUnitAdditionalStylesClass__WEBPACK_IMPORTED_MODULE_2__[\"default\"].livebox_func();\n    }\n  }, {\n    key: \"ads.inbord\",\n    value: function adsInbord() {\n      _AdUnitAdditionalStylesClass__WEBPACK_IMPORTED_MODULE_2__[\"default\"].inbord_func();\n    }\n  }, {\n    key: \"ads.300x100.inbord\",\n    value: function ads300x100Inbord() {\n      _AdUnitAdditionalStylesClass__WEBPACK_IMPORTED_MODULE_2__[\"default\"].inbordMynet_func();\n    } // \"ads.320x450\"() {\n    //   AdUnitAdditionalStylesClassObj.inbordMynetBig_func();\n    // }\n\n  }, {\n    key: \"Ynet_livebox\",\n    value: function Ynet_livebox() {\n      _AdUnitAdditionalStylesClass__WEBPACK_IMPORTED_MODULE_2__[\"default\"].Ynet_livebox_func();\n    }\n  }, {\n    key: \"Ynet_biglivebox\",\n    value: function Ynet_biglivebox() {\n      _AdUnitAdditionalStylesClass__WEBPACK_IMPORTED_MODULE_2__[\"default\"].Ynet_biglivebox_func();\n    }\n  }, {\n    key: \"Interstitial_responsive\",\n    value: function Interstitial_responsive() {\n      _AdUnitAdditionalStylesClass__WEBPACK_IMPORTED_MODULE_2__[\"default\"].Interstitial_responsive_func();\n    }\n  }, {\n    key: \"pplus_strips\",\n    value: function pplus_strips() {\n      _AdUnitAdditionalStylesClass__WEBPACK_IMPORTED_MODULE_2__[\"default\"].pplus_strips();\n    }\n  }, {\n    key: \"browsi_in_house\",\n    value: function browsi_in_house() {\n      _AdUnitAdditionalStylesClass__WEBPACK_IMPORTED_MODULE_2__[\"default\"].browsi_in_house();\n    }\n  }]);\n\n  return AdUnitStylesClass;\n}();\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (new AdUnitStylesClass());//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9tb2R1bGVzL0FkVW5pdFN0eWxlc0NsYXNzLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbW9kdWxlcy9BZFVuaXRTdHlsZXNDbGFzcy5qcz82YzE0Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBBZFVuaXRBZGRpdGlvbmFsU3R5bGVzQ2xhc3NPYmogZnJvbSBcIi4vQWRVbml0QWRkaXRpb25hbFN0eWxlc0NsYXNzXCI7XHJcblxyXG4vLyAgU1RZTEVTIFBFUiBVTklUXHJcbmNsYXNzIEFkVW5pdFN0eWxlc0NsYXNzIHtcclxuICBjb25zdHJ1Y3RvcigpIHt9XHJcbiAgXCJhZHMubWl2emFrb25cIigpIHtcclxuICAgIEFkVW5pdEFkZGl0aW9uYWxTdHlsZXNDbGFzc09iai5zdHlsZU1pdnpha29uX2Z1bmMoKTtcclxuICB9XHJcbiAgXCJhZHMuc2FyZ2VsXCIoKSB7XHJcbiAgICBBZFVuaXRBZGRpdGlvbmFsU3R5bGVzQ2xhc3NPYmouc3R5bGVTYXJnZWxfZnVuYygpO1xyXG4gIH1cclxuICBcImFkcy5za3lzY3JhcGVyXCIoKSB7XHJcbiAgICBBZFVuaXRBZGRpdGlvbmFsU3R5bGVzQ2xhc3NPYmoub3plbl9mdW5jKCk7XHJcbiAgfVxyXG4gIFwiYWRzLnNreXNjcmFwZXIubGVmdFwiKCkge1xyXG4gICAgQWRVbml0QWRkaXRpb25hbFN0eWxlc0NsYXNzT2JqLm96ZW5fZnVuYygpO1xyXG4gIH1cclxuICBcImFkcy5vemVuLnJpZ2h0XCIoKSB7XHJcbiAgICBBZFVuaXRBZGRpdGlvbmFsU3R5bGVzQ2xhc3NPYmoub3plbl9mdW5jKCk7XHJcbiAgfVxyXG4gIFwiYWRzLm96ZW5fcmlnaHRcIigpIHtcclxuICAgIEFkVW5pdEFkZGl0aW9uYWxTdHlsZXNDbGFzc09iai5vemVuX2Z1bmMoKTtcclxuICB9XHJcbiAgXCJhZHMub3plbi5sZWZ0XCIoKSB7XHJcbiAgICBBZFVuaXRBZGRpdGlvbmFsU3R5bGVzQ2xhc3NPYmoub3plbl9mdW5jKCk7XHJcbiAgfVxyXG4gIFwiYWRzLm96ZW5fbGVmdFwiKCkge1xyXG4gICAgQWRVbml0QWRkaXRpb25hbFN0eWxlc0NsYXNzT2JqLm96ZW5fZnVuYygpO1xyXG4gIH1cclxuICBcImFkcy5uZXdzcGFwZXJcIigpIHtcclxuICAgIEFkVW5pdEFkZGl0aW9uYWxTdHlsZXNDbGFzc09iai5zdHlsZU5ld3NwYXBlcl9mdW5jKCk7XHJcbiAgfVxyXG4gIFwiYWRzLm96ZW5cIigpIHtcclxuICAgIEFkVW5pdEFkZGl0aW9uYWxTdHlsZXNDbGFzc09iai5vemVuX2Z1bmMoKTtcclxuICB9XHJcbiAgXCJhZHMudG9wXCIoKSB7XHJcbiAgICBBZFVuaXRBZGRpdGlvbmFsU3R5bGVzQ2xhc3NPYmoudG9wX2Z1bmMoKTtcclxuICB9XHJcbiAgXCJhZHMuc3RpY2t5XCIoKSB7XHJcbiAgICBBZFVuaXRBZGRpdGlvbmFsU3R5bGVzQ2xhc3NPYmouc3R5bGVTdGlja3lfZnVuYygpO1xyXG4gIH1cclxuICBcImFkcy50b3AuMlwiKCkge1xyXG4gICAgQWRVbml0QWRkaXRpb25hbFN0eWxlc0NsYXNzT2JqLnN0eWxlTmV3c3BhcGVyX2Z1bmMoKTtcclxuICB9XHJcbiAgXCJhZHMubXcudmlkZW9pbnBhZ2VcIigpIHtcclxuICAgIEFkVW5pdEFkZGl0aW9uYWxTdHlsZXNDbGFzc09iai5td192aWRlb2lucGFnZV9mdW5jKCk7XHJcbiAgfVxyXG4gIFwiYWRzLmJpZ2xpdmVib3hcIigpIHtcclxuICAgIEFkVW5pdEFkZGl0aW9uYWxTdHlsZXNDbGFzc09iai5iaWdsaXZlYm94X2Z1bmMoKTtcclxuICB9XHJcbiAgXCJhZHMubXcuYmlnbGl2ZWJveFwiKCkge1xyXG4gICAgQWRVbml0QWRkaXRpb25hbFN0eWxlc0NsYXNzT2JqLm13X2JpZ2xpdmVib3hfZnVuYygpO1xyXG4gIH1cclxuICBcImFkcy5saXZlYm94XCIoKSB7XHJcbiAgICBBZFVuaXRBZGRpdGlvbmFsU3R5bGVzQ2xhc3NPYmoubGl2ZWJveF9mdW5jKCk7XHJcbiAgfVxyXG4gIFwiYWRzLmluYm9yZFwiKCkge1xyXG4gICAgQWRVbml0QWRkaXRpb25hbFN0eWxlc0NsYXNzT2JqLmluYm9yZF9mdW5jKCk7XHJcbiAgfVxyXG4gIFwiYWRzLjMwMHgxMDAuaW5ib3JkXCIoKSB7XHJcbiAgICBBZFVuaXRBZGRpdGlvbmFsU3R5bGVzQ2xhc3NPYmouaW5ib3JkTXluZXRfZnVuYygpO1xyXG4gIH1cclxuICAvLyBcImFkcy4zMjB4NDUwXCIoKSB7XHJcbiAgLy8gICBBZFVuaXRBZGRpdGlvbmFsU3R5bGVzQ2xhc3NPYmouaW5ib3JkTXluZXRCaWdfZnVuYygpO1xyXG4gIC8vIH1cclxuICBcIlluZXRfbGl2ZWJveFwiKCkge1xyXG4gICAgQWRVbml0QWRkaXRpb25hbFN0eWxlc0NsYXNzT2JqLlluZXRfbGl2ZWJveF9mdW5jKCk7XHJcbiAgfVxyXG4gIFwiWW5ldF9iaWdsaXZlYm94XCIoKSB7XHJcbiAgICBBZFVuaXRBZGRpdGlvbmFsU3R5bGVzQ2xhc3NPYmouWW5ldF9iaWdsaXZlYm94X2Z1bmMoKTtcclxuICB9XHJcbiAgXCJJbnRlcnN0aXRpYWxfcmVzcG9uc2l2ZVwiKCkge1xyXG4gICAgQWRVbml0QWRkaXRpb25hbFN0eWxlc0NsYXNzT2JqLkludGVyc3RpdGlhbF9yZXNwb25zaXZlX2Z1bmMoKTtcclxuICB9XHJcbiAgXCJwcGx1c19zdHJpcHNcIigpIHtcclxuICAgIEFkVW5pdEFkZGl0aW9uYWxTdHlsZXNDbGFzc09iai5wcGx1c19zdHJpcHMoKTtcclxuICB9XHJcbiAgXCJicm93c2lfaW5faG91c2VcIigpIHtcclxuICAgIEFkVW5pdEFkZGl0aW9uYWxTdHlsZXNDbGFzc09iai5icm93c2lfaW5faG91c2UoKTtcclxuICB9XHJcbn1cclxuZXhwb3J0IGRlZmF1bHQgbmV3IEFkVW5pdFN0eWxlc0NsYXNzKCk7XHJcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQTtBQUNBO0FBRUE7OztBQUNBO0FBQUE7QUFBQTtBQUNBOztBQUFBO0FBQUE7QUFDQTtBQUNBOztBQUNBO0FBQUE7QUFDQTtBQUNBOztBQUNBO0FBQUE7QUFDQTtBQUNBOztBQUNBO0FBQUE7QUFDQTtBQUNBOztBQUNBO0FBQUE7QUFDQTtBQUNBOztBQUNBO0FBQUE7QUFDQTtBQUNBOztBQUNBO0FBQUE7QUFDQTtBQUNBOztBQUNBO0FBQUE7QUFDQTtBQUNBOztBQUNBO0FBQUE7QUFDQTtBQUNBOztBQUNBO0FBQUE7QUFDQTtBQUNBOztBQUNBO0FBQUE7QUFDQTtBQUNBOztBQUNBO0FBQUE7QUFDQTtBQUNBOztBQUNBO0FBQUE7QUFDQTtBQUNBOztBQUNBO0FBQUE7QUFDQTtBQUNBOztBQUNBO0FBQUE7QUFDQTtBQUNBOztBQUNBO0FBQUE7QUFDQTtBQUNBOztBQUNBO0FBQUE7QUFDQTtBQUNBOztBQUNBO0FBQUE7QUFDQTtBQUNBOztBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBOztBQUFBO0FBQUE7QUFDQTtBQUNBOztBQUNBO0FBQUE7QUFDQTtBQUNBOztBQUNBO0FBQUE7QUFDQTtBQUNBOztBQUNBO0FBQUE7QUFDQTtBQUNBOztBQUNBO0FBQUE7QUFDQTtBQUNBOzs7Ozs7QUFFQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./modules/AdUnitStylesClass.js\n");

/***/ }),

/***/ "./modules/AdUnitTemplateFunctionsClass.js":
/*!*************************************************!*\
  !*** ./modules/AdUnitTemplateFunctionsClass.js ***!
  \*************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/classCallCheck */ \"./node_modules/@babel/runtime/helpers/classCallCheck.js\");\n/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/createClass */ \"./node_modules/@babel/runtime/helpers/createClass.js\");\n/* harmony import */ var _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _AdUnitFunctionsClass__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./AdUnitFunctionsClass */ \"./modules/AdUnitFunctionsClass.js\");\n/* harmony import */ var _AdUnitStylesClass__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./AdUnitStylesClass */ \"./modules/AdUnitStylesClass.js\");\n/* harmony import */ var _AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./AdUnitPropertiesClass */ \"./modules/AdUnitPropertiesClass.js\");\n/* harmony import */ var _InfrastructureClass__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./InfrastructureClass */ \"./modules/InfrastructureClass.js\");\n\n\n\n\n\n\nvar Log = _InfrastructureClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].Log;\nvar _window = window,\n    googletag = _window.googletag;\n\nvar AdUnitTemplateFunctionsClass =\n/*#__PURE__*/\nfunction () {\n  function AdUnitTemplateFunctionsClass() {\n    _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default()(this, AdUnitTemplateFunctionsClass);\n\n    this.innerWidth = window.innerWidth;\n  }\n\n  _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1___default()(AdUnitTemplateFunctionsClass, [{\n    key: \"CallAdsTop\",\n    value: function CallAdsTop(template_name) {\n      var global_this = this;\n      Log(\"CallAdsTop\");\n\n      if (template_name == \"Premium\") {\n        if (parent.document.getElementById(\"ads.premium\") != null) {\n          Log(\"premium defined\");\n          parent.document.getElementById(\"ads.premium\").innerHTML = \" \";\n        }\n      }\n\n      var ozenRight = _AdUnitFunctionsClass__WEBPACK_IMPORTED_MODULE_2__[\"default\"].Ozen_right;\n      var ozenLeft = _AdUnitFunctionsClass__WEBPACK_IMPORTED_MODULE_2__[\"default\"].Ozen_left;\n\n      if (window.dcSite == \"yns\" || window.dcSite == \"ynv\") {\n        ozenRight = _AdUnitFunctionsClass__WEBPACK_IMPORTED_MODULE_2__[\"default\"].Ozen;\n        ozenLeft = _AdUnitFunctionsClass__WEBPACK_IMPORTED_MODULE_2__[\"default\"].Ozen_left_VN;\n      }\n\n      var top_slot = _AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_4__[\"default\"].Define_slots[\"ads.top\"];\n      var ozen_slot = _AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_4__[\"default\"].Define_slots[ozenRight];\n      var ozen_left_slot = _AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_4__[\"default\"].Define_slots[ozenLeft];\n      googletag.cmd.push(function () {\n        //top_slot.clearTargeting('dcunigpt');\n        top_slot.setTargeting(\"dcunigpt\", \"view\");\n\n        if (_InfrastructureClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].Site && _InfrastructureClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].Site == \"is_xnet\") {\n          googletag.pubads().refresh([top_slot]);\n\n          if (ozen_slot != undefined) {\n            googletag.pubads().refresh([ozen_slot]);\n          }\n\n          if (ozen_left_slot != undefined) {\n            googletag.pubads().refresh([ozen_left_slot]);\n          }\n\n          googletag.enableServices();\n        } else {\n          googletag.pubads().refresh([top_slot], {\n            changeCorrelator: false\n          }); // refresh this slot ads.top\n\n          if (ozen_slot != undefined) {\n            googletag.pubads().refresh([ozen_slot]);\n          }\n\n          if (ozen_left_slot != undefined) {\n            googletag.pubads().refresh([ozen_left_slot]);\n          }\n\n          if (window.dcCG == \"home\" || window.dcPath == \"2775.Knesset-32472.yuval1280\") {\n            var new_grid = document.querySelector(\".grid1280\") != null || document.querySelector(\".grid1280\") != undefined || document.querySelector(\".grid1280_2\") != null || document.querySelector(\".grid1280_2\") != undefined ? 1470 : 1200;\n\n            if (window.innerWidth > new_grid) {\n              _InfrastructureClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"].SlotRenderEnd(function (event) {\n                var TopLoaded = false;\n\n                if (event.slot == _AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_4__[\"default\"].Define_slots[\"ads.top\"]) {\n                  if (!TopLoaded) {\n                    if (!event.isEmpty) {\n                      _AdUnitFunctionsClass__WEBPACK_IMPORTED_MODULE_2__[\"default\"].findAllDiv_func();\n                      var gridfirma = document.querySelector(\".grid1280_2\") != null || document.querySelector(\".grid1280_2\") != undefined ? true : false;\n                      var e_size = event.size + \"\";\n                      var e_w = e_size.split(\",\");\n\n                      if (event.size == \"970,130\" || event.size == \"970,90\" || event.size == \"1192,90\" || event.size == \"1192,130\") {\n                        if (e_w[0] == \"1192\") {\n                          document.getElementById(\"ads.top\").style.width = \"1202px\";\n                          document.getElementById(\"ads.top\").setAttribute(\"style\", \"border: 5px solid rgb(233, 233, 233); clear: both; min-height: auto !important; text-align:center; padding: 0 !important; width: 1202px; margin: 0px auto; box-sizing: border-box;\");\n                        }\n\n                        document.getElementById(\"ads.top\").style.textAlign = \"center\";\n\n                        if (gridfirma == false && _AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_4__[\"default\"].Define_mivzakon[\"ads.mivzakon\"] == undefined) {\n                          global_this.defineMivzakon_function(\"ads.mivzakon\");\n                        } else {\n                          if (gridfirma == false) {\n                            googletag.pubads().refresh([_AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_4__[\"default\"].Define_mivzakon[\"ads.mivzakon\"]]);\n                          }\n                        }\n                      } else {\n                        var width_top = e_w[0] == \"1\" || e_size == \"fluid\" ? document.getElementById(\"ads.top\").offsetWidth : parseInt(e_w[0], 10);\n\n                        if (document.getElementById(\"yboximg\")) {\n                          width_top = document.getElementById(\"yboximg\").offsetWidth;\n                        }\n\n                        document.getElementById(\"ads.top\").setAttribute(\"style\", \"clear: both; min-height: auto !important; text-align:center; padding: 0 !important; width: \" + parseInt(width_top + 10) + \"px !important;\" + \"margin: 0px auto; border: 5px solid rgb(233, 233, 233); box-sizing: border-box;\");\n                      }\n                    }\n\n                    TopLoaded = true;\n                  }\n                }\n              });\n            }\n          }\n\n          googletag.enableServices();\n        } //end else\n\n      });\n    } // end callAdsTop_func\n\n  }, {\n    key: \"defineMivzakon_function\",\n    value: function defineMivzakon_function(id) {\n      Log(\"defineMivzakon_function\");\n      googletag.cmd.push(function () {\n        _AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_4__[\"default\"].Define_mivzakon[id] = googletag.defineSlot(_AdUnitFunctionsClass__WEBPACK_IMPORTED_MODULE_2__[\"default\"].adUnitCall_func(id), [80, 244], id).addService(googletag.pubads());\n        googletag.enableServices();\n      });\n      googletag.cmd.push(function () {\n        googletag.display(id);\n      });\n      _AdUnitStylesClass__WEBPACK_IMPORTED_MODULE_3__[\"default\"][id](id);\n    }\n  }, {\n    key: \"Call_After_Jumbo_Okev\",\n    value: function Call_After_Jumbo_Okev() {\n      Log(\"Call_After_Jumbo_Okev\");\n      var that = this;\n      var ozen_right = _AdUnitFunctionsClass__WEBPACK_IMPORTED_MODULE_2__[\"default\"].Ozen_right;\n      var ozen_left = _AdUnitFunctionsClass__WEBPACK_IMPORTED_MODULE_2__[\"default\"].Ozen_left;\n      var width_top = document.getElementById(\"jumbocont\") ? document.getElementById(\"jumbocont\").offsetWidth : 0;\n      document.getElementById(\"ads.top\").setAttribute(\"style\", \"clear: both; min-height: auto !important; text-align:center; padding: 0 !important; width: \" + parseInt(width_top + 10) + \"px !important;\" + \"margin: 0px auto; border: 5px solid rgb(233, 233, 233); box-sizing: border-box;\");\n\n      if (window.dcSite == \"yns\" || window.dcSite == \"ynv\") {\n        ozen_right = _AdUnitFunctionsClass__WEBPACK_IMPORTED_MODULE_2__[\"default\"].Ozen;\n        ozen_left = _AdUnitFunctionsClass__WEBPACK_IMPORTED_MODULE_2__[\"default\"].Ozen_left_VN;\n      }\n\n      var ozen_slot = _AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_4__[\"default\"].Define_slots[ozen_right];\n      var ozen_left_slot = _AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_4__[\"default\"].Define_slots[ozen_left];\n      googletag.cmd.push(function () {\n        if (window.dcCG == \"home\" || window.dcPath == \"2775.Knesset-32472.yuval1280\") {\n          var gridfirma = document.querySelector(\".grid1280_2\") != null || document.querySelector(\".grid1280_2\") != undefined ? true : false;\n          var new_grid = document.querySelector(\".grid1280\") != null || document.querySelector(\".grid1280\") != undefined || document.querySelector(\".grid1280_2\") != null || document.querySelector(\".grid1280_2\") != undefined ? 1470 : 1200;\n\n          if (that.innerWidth > new_grid) {\n            if (gridfirma == false && _AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_4__[\"default\"].Define_mivzakon[\"ads.mivzakon\"] == undefined) {\n              that.defineMivzakon_function(\"ads.mivzakon\");\n            } else {\n              if (gridfirma == false) {\n                googletag.pubads().refresh([_AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_4__[\"default\"].Define_mivzakon[\"ads.mivzakon\"]]);\n              }\n            }\n          }\n        }\n\n        if (ozen_slot != undefined) {\n          googletag.pubads().refresh([ozen_slot]);\n        }\n\n        if (ozen_left_slot != undefined) {\n          googletag.pubads().refresh([ozen_left_slot]);\n        }\n\n        googletag.enableServices();\n      });\n    } // end Call_After_Jumbo_Okev\n\n  }]);\n\n  return AdUnitTemplateFunctionsClass;\n}(); //end AdUnitTemplateFunctionsClass\n\n\nvar _AdUnitTemplateFunctionsClass = new AdUnitTemplateFunctionsClass();\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (_AdUnitTemplateFunctionsClass);\nwindow.AdUnit_template_functions = _AdUnitTemplateFunctionsClass;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9tb2R1bGVzL0FkVW5pdFRlbXBsYXRlRnVuY3Rpb25zQ2xhc3MuanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9tb2R1bGVzL0FkVW5pdFRlbXBsYXRlRnVuY3Rpb25zQ2xhc3MuanM/YTI3ZCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgQWRVbml0RnVuY3Rpb25zQ2xhc3NPYmogZnJvbSBcIi4vQWRVbml0RnVuY3Rpb25zQ2xhc3NcIjtcclxuaW1wb3J0IGFkVW5pdFN0eWxlc0NsYXNzT2JqIGZyb20gXCIuL0FkVW5pdFN0eWxlc0NsYXNzXCI7XHJcbmltcG9ydCBBZFVuaXRQcm9wZXJ0aWVzQ2xhc3NPYmogZnJvbSBcIi4vQWRVbml0UHJvcGVydGllc0NsYXNzXCI7XHJcbmltcG9ydCBJbmZyYXNydWN0dXJlQ2xhc3NPYmogZnJvbSBcIi4vSW5mcmFzdHJ1Y3R1cmVDbGFzc1wiO1xyXG5jb25zdCB7IExvZyB9ID0gSW5mcmFzcnVjdHVyZUNsYXNzT2JqO1xyXG5sZXQgeyBnb29nbGV0YWcgfSA9IHdpbmRvdztcclxuY2xhc3MgQWRVbml0VGVtcGxhdGVGdW5jdGlvbnNDbGFzcyB7XHJcbiAgY29uc3RydWN0b3IoKSB7XHJcbiAgICB0aGlzLmlubmVyV2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aDtcclxuICB9XHJcbiAgQ2FsbEFkc1RvcCh0ZW1wbGF0ZV9uYW1lKSB7XHJcbiAgICBsZXQgZ2xvYmFsX3RoaXMgPSB0aGlzO1xyXG4gICAgTG9nKFwiQ2FsbEFkc1RvcFwiKTtcclxuICAgIGlmICh0ZW1wbGF0ZV9uYW1lID09IFwiUHJlbWl1bVwiKSB7XHJcbiAgICAgIGlmIChwYXJlbnQuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhZHMucHJlbWl1bVwiKSAhPSBudWxsKSB7XHJcbiAgICAgICAgTG9nKFwicHJlbWl1bSBkZWZpbmVkXCIpO1xyXG4gICAgICAgIHBhcmVudC5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFkcy5wcmVtaXVtXCIpLmlubmVySFRNTCA9IFwiIFwiO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBsZXQgb3plblJpZ2h0ID0gQWRVbml0RnVuY3Rpb25zQ2xhc3NPYmouT3plbl9yaWdodDtcclxuICAgIGxldCBvemVuTGVmdCAgPSBBZFVuaXRGdW5jdGlvbnNDbGFzc09iai5PemVuX2xlZnQ7XHJcbiAgICBpZiAod2luZG93LmRjU2l0ZSA9PSBcInluc1wiIHx8IHdpbmRvdy5kY1NpdGUgPT0gXCJ5bnZcIikge1xyXG4gICAgICBvemVuUmlnaHQgPSBBZFVuaXRGdW5jdGlvbnNDbGFzc09iai5PemVuO1xyXG4gICAgICBvemVuTGVmdCA9IEFkVW5pdEZ1bmN0aW9uc0NsYXNzT2JqLk96ZW5fbGVmdF9WTjtcclxuICAgIH0gXHJcbiAgICBsZXQgdG9wX3Nsb3QgPSBBZFVuaXRQcm9wZXJ0aWVzQ2xhc3NPYmouRGVmaW5lX3Nsb3RzW1wiYWRzLnRvcFwiXTtcclxuICAgIGxldCBvemVuX3Nsb3QgPSBBZFVuaXRQcm9wZXJ0aWVzQ2xhc3NPYmouRGVmaW5lX3Nsb3RzW296ZW5SaWdodF07XHJcbiAgICBsZXQgb3plbl9sZWZ0X3Nsb3QgPSBBZFVuaXRQcm9wZXJ0aWVzQ2xhc3NPYmouRGVmaW5lX3Nsb3RzW296ZW5MZWZ0XTtcclxuICAgIGdvb2dsZXRhZy5jbWQucHVzaChmdW5jdGlvbigpIHtcclxuICAgICAgLy90b3Bfc2xvdC5jbGVhclRhcmdldGluZygnZGN1bmlncHQnKTtcclxuICAgICAgdG9wX3Nsb3Quc2V0VGFyZ2V0aW5nKFwiZGN1bmlncHRcIiwgXCJ2aWV3XCIpO1xyXG4gICAgICBpZiAoSW5mcmFzcnVjdHVyZUNsYXNzT2JqLlNpdGUgJiYgSW5mcmFzcnVjdHVyZUNsYXNzT2JqLlNpdGUgPT0gXCJpc194bmV0XCIpIHtcclxuICAgICAgICBnb29nbGV0YWcucHViYWRzKCkucmVmcmVzaChbdG9wX3Nsb3RdKTtcclxuICAgICAgICBpZiAob3plbl9zbG90ICE9IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgZ29vZ2xldGFnLnB1YmFkcygpLnJlZnJlc2goW296ZW5fc2xvdF0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAob3plbl9sZWZ0X3Nsb3QgIT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICBnb29nbGV0YWcucHViYWRzKCkucmVmcmVzaChbb3plbl9sZWZ0X3Nsb3RdKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZ29vZ2xldGFnLmVuYWJsZVNlcnZpY2VzKCk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgZ29vZ2xldGFnLnB1YmFkcygpLnJlZnJlc2goW3RvcF9zbG90XSwge1xyXG4gICAgICAgICAgY2hhbmdlQ29ycmVsYXRvcjogZmFsc2VcclxuICAgICAgICB9KTsgLy8gcmVmcmVzaCB0aGlzIHNsb3QgYWRzLnRvcFxyXG4gICAgICAgIGlmIChvemVuX3Nsb3QgIT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICBnb29nbGV0YWcucHViYWRzKCkucmVmcmVzaChbb3plbl9zbG90XSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChvemVuX2xlZnRfc2xvdCAhPSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgIGdvb2dsZXRhZy5wdWJhZHMoKS5yZWZyZXNoKFtvemVuX2xlZnRfc2xvdF0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAod2luZG93LmRjQ0cgPT0gXCJob21lXCIgfHwgd2luZG93LmRjUGF0aCA9PSBcIjI3NzUuS25lc3NldC0zMjQ3Mi55dXZhbDEyODBcIikge1xyXG4gICAgICAgICAgbGV0IG5ld19ncmlkID0gKChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmdyaWQxMjgwXCIpICE9IG51bGwgfHwgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5ncmlkMTI4MFwiKSAhPSB1bmRlZmluZWQpIHx8IChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmdyaWQxMjgwXzJcIikgIT0gbnVsbCB8fCBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmdyaWQxMjgwXzJcIikgIT0gdW5kZWZpbmVkKSkgPyAxNDcwIDogMTIwMDtcclxuICAgICAgICAgIGlmICh3aW5kb3cuaW5uZXJXaWR0aCA+IG5ld19ncmlkKSB7XHJcbiAgICAgICAgICAgIEluZnJhc3J1Y3R1cmVDbGFzc09iai5TbG90UmVuZGVyRW5kKGZ1bmN0aW9uKGV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgbGV0IFRvcExvYWRlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgIGlmIChcclxuICAgICAgICAgICAgICAgIGV2ZW50LnNsb3QgPT0gQWRVbml0UHJvcGVydGllc0NsYXNzT2JqLkRlZmluZV9zbG90c1tcImFkcy50b3BcIl1cclxuICAgICAgICAgICAgICApIHtcclxuICAgICAgICAgICAgICAgIGlmICghVG9wTG9hZGVkKSB7XHJcbiAgICAgICAgICAgICAgICAgIGlmICghZXZlbnQuaXNFbXB0eSkgeyAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICBBZFVuaXRGdW5jdGlvbnNDbGFzc09iai5maW5kQWxsRGl2X2Z1bmMoKTtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgZ3JpZGZpcm1hID0gKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZ3JpZDEyODBfMlwiKSAhPSBudWxsIHx8IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZ3JpZDEyODBfMlwiKSAhPSB1bmRlZmluZWQpID8gdHJ1ZTogZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGVfc2l6ZSA9IGV2ZW50LnNpemUgKyBcIlwiO1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBlX3cgPSBlX3NpemUuc3BsaXQoXCIsXCIpOyAgICBcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZXZlbnQuc2l6ZSA9PSBcIjk3MCwxMzBcIiB8fCBldmVudC5zaXplID09IFwiOTcwLDkwXCIgfHwgZXZlbnQuc2l6ZSA9PSBcIjExOTIsOTBcIiB8fCBldmVudC5zaXplID09IFwiMTE5MiwxMzBcIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgaWYgKGVfd1swXSA9PSBcIjExOTJcIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFkcy50b3BcIikuc3R5bGUud2lkdGggPSBcIjEyMDJweFwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFkcy50b3BcIikuc2V0QXR0cmlidXRlKFwic3R5bGVcIiwgXCJib3JkZXI6IDVweCBzb2xpZCByZ2IoMjMzLCAyMzMsIDIzMyk7IGNsZWFyOiBib3RoOyBtaW4taGVpZ2h0OiBhdXRvICFpbXBvcnRhbnQ7IHRleHQtYWxpZ246Y2VudGVyOyBwYWRkaW5nOiAwICFpbXBvcnRhbnQ7IHdpZHRoOiAxMjAycHg7IG1hcmdpbjogMHB4IGF1dG87IGJveC1zaXppbmc6IGJvcmRlci1ib3g7XCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgfSAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhZHMudG9wXCIpLnN0eWxlLnRleHRBbGlnbiA9IFwiY2VudGVyXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICBpZiAoZ3JpZGZpcm1hID09IGZhbHNlICYmIEFkVW5pdFByb3BlcnRpZXNDbGFzc09iai5EZWZpbmVfbWl2emFrb25bXCJhZHMubWl2emFrb25cIl0gPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGdsb2JhbF90aGlzLmRlZmluZU1pdnpha29uX2Z1bmN0aW9uKFwiYWRzLm1pdnpha29uXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGdyaWRmaXJtYSA9PSBmYWxzZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGdvb2dsZXRhZy5wdWJhZHMoKS5yZWZyZXNoKFtBZFVuaXRQcm9wZXJ0aWVzQ2xhc3NPYmouRGVmaW5lX21pdnpha29uW1wiYWRzLm1pdnpha29uXCJdXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgIGxldCB3aWR0aF90b3AgPSAoZV93WzBdID09IFwiMVwiIHx8IGVfc2l6ZSA9PSBcImZsdWlkXCIpID8gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhZHMudG9wXCIpLm9mZnNldFdpZHRoIDogcGFyc2VJbnQoZV93WzBdLCAxMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICBpZiAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ5Ym94aW1nXCIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoX3RvcCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwieWJveGltZ1wiKS5vZmZzZXRXaWR0aDtcclxuICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYWRzLnRvcFwiKS5zZXRBdHRyaWJ1dGUoXCJzdHlsZVwiLCBcImNsZWFyOiBib3RoOyBtaW4taGVpZ2h0OiBhdXRvICFpbXBvcnRhbnQ7IHRleHQtYWxpZ246Y2VudGVyOyBwYWRkaW5nOiAwICFpbXBvcnRhbnQ7IHdpZHRoOiBcIiArIHBhcnNlSW50KHdpZHRoX3RvcCsxMCkgKyBcInB4ICFpbXBvcnRhbnQ7XCIgKyBcIm1hcmdpbjogMHB4IGF1dG87IGJvcmRlcjogNXB4IHNvbGlkIHJnYigyMzMsIDIzMywgMjMzKTsgYm94LXNpemluZzogYm9yZGVyLWJveDtcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgIFRvcExvYWRlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZ29vZ2xldGFnLmVuYWJsZVNlcnZpY2VzKCk7XHJcbiAgICAgIH0gLy9lbmQgZWxzZVxyXG4gICAgfSk7XHJcbiAgfSAvLyBlbmQgY2FsbEFkc1RvcF9mdW5jXHJcbiAgZGVmaW5lTWl2emFrb25fZnVuY3Rpb24oaWQpIHtcclxuICAgIExvZyhcImRlZmluZU1pdnpha29uX2Z1bmN0aW9uXCIpO1xyXG4gICAgZ29vZ2xldGFnLmNtZC5wdXNoKGZ1bmN0aW9uKCkge1xyXG4gICAgICBBZFVuaXRQcm9wZXJ0aWVzQ2xhc3NPYmouRGVmaW5lX21pdnpha29uW2lkXSA9IGdvb2dsZXRhZ1xyXG4gICAgICAgIC5kZWZpbmVTbG90KEFkVW5pdEZ1bmN0aW9uc0NsYXNzT2JqLmFkVW5pdENhbGxfZnVuYyhpZCksIFs4MCwgMjQ0XSwgaWQpXHJcbiAgICAgICAgLmFkZFNlcnZpY2UoZ29vZ2xldGFnLnB1YmFkcygpKTtcclxuICAgICAgZ29vZ2xldGFnLmVuYWJsZVNlcnZpY2VzKCk7XHJcbiAgICB9KTtcclxuICAgIGdvb2dsZXRhZy5jbWQucHVzaChmdW5jdGlvbigpIHtcclxuICAgICAgZ29vZ2xldGFnLmRpc3BsYXkoaWQpO1xyXG4gICAgfSk7XHJcbiAgICBhZFVuaXRTdHlsZXNDbGFzc09ialtpZF0oaWQpO1xyXG4gIH1cclxuICBDYWxsX0FmdGVyX0p1bWJvX09rZXYoKSB7XHJcbiAgICBMb2coXCJDYWxsX0FmdGVyX0p1bWJvX09rZXZcIik7XHJcbiAgICBsZXQgdGhhdCA9IHRoaXM7XHJcbiAgICBsZXQgb3plbl9yaWdodCA9IEFkVW5pdEZ1bmN0aW9uc0NsYXNzT2JqLk96ZW5fcmlnaHQ7XHJcbiAgICBsZXQgb3plbl9sZWZ0ICA9IEFkVW5pdEZ1bmN0aW9uc0NsYXNzT2JqLk96ZW5fbGVmdDtcclxuICAgIGxldCB3aWR0aF90b3AgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImp1bWJvY29udFwiKSA/IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwianVtYm9jb250XCIpLm9mZnNldFdpZHRoIDogMDtcclxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYWRzLnRvcFwiKS5zZXRBdHRyaWJ1dGUoXCJzdHlsZVwiLCBcImNsZWFyOiBib3RoOyBtaW4taGVpZ2h0OiBhdXRvICFpbXBvcnRhbnQ7IHRleHQtYWxpZ246Y2VudGVyOyBwYWRkaW5nOiAwICFpbXBvcnRhbnQ7IHdpZHRoOiBcIiArIHBhcnNlSW50KHdpZHRoX3RvcCsxMCkgKyBcInB4ICFpbXBvcnRhbnQ7XCIgKyBcIm1hcmdpbjogMHB4IGF1dG87IGJvcmRlcjogNXB4IHNvbGlkIHJnYigyMzMsIDIzMywgMjMzKTsgYm94LXNpemluZzogYm9yZGVyLWJveDtcIik7XHJcbiAgICBcclxuICAgIGlmICh3aW5kb3cuZGNTaXRlID09IFwieW5zXCIgfHwgd2luZG93LmRjU2l0ZSA9PSBcInludlwiKSB7XHJcbiAgICAgIG96ZW5fcmlnaHQgPSBBZFVuaXRGdW5jdGlvbnNDbGFzc09iai5PemVuO1xyXG4gICAgICBvemVuX2xlZnQgID0gQWRVbml0RnVuY3Rpb25zQ2xhc3NPYmouT3plbl9sZWZ0X1ZOO1xyXG4gICAgfSBcclxuICAgIGNvbnN0IG96ZW5fc2xvdCA9IEFkVW5pdFByb3BlcnRpZXNDbGFzc09iai5EZWZpbmVfc2xvdHNbb3plbl9yaWdodF07XHJcbiAgICBjb25zdCBvemVuX2xlZnRfc2xvdCA9IEFkVW5pdFByb3BlcnRpZXNDbGFzc09iai5EZWZpbmVfc2xvdHNbb3plbl9sZWZ0XTtcclxuICAgIGdvb2dsZXRhZy5jbWQucHVzaChmdW5jdGlvbigpIHtcclxuICAgICAgaWYgKHdpbmRvdy5kY0NHID09IFwiaG9tZVwiIHx8IHdpbmRvdy5kY1BhdGggPT0gXCIyNzc1LktuZXNzZXQtMzI0NzIueXV2YWwxMjgwXCIpIHtcclxuICAgICAgICBsZXQgZ3JpZGZpcm1hID0gKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZ3JpZDEyODBfMlwiKSAhPSBudWxsIHx8IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZ3JpZDEyODBfMlwiKSAhPSB1bmRlZmluZWQpID8gdHJ1ZTogZmFsc2U7XHJcbiAgICAgICAgbGV0IG5ld19ncmlkID0gKChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmdyaWQxMjgwXCIpICE9IG51bGwgfHwgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5ncmlkMTI4MFwiKSAhPSB1bmRlZmluZWQpIHx8IChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmdyaWQxMjgwXzJcIikgIT0gbnVsbCB8fCBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmdyaWQxMjgwXzJcIikgIT0gdW5kZWZpbmVkKSkgPyAxNDcwIDogMTIwMDtcclxuICAgICAgICBpZiAodGhhdC5pbm5lcldpZHRoID4gbmV3X2dyaWQpIHtcclxuICAgICAgICAgIGlmIChncmlkZmlybWEgPT0gZmFsc2UgJiYgQWRVbml0UHJvcGVydGllc0NsYXNzT2JqLkRlZmluZV9taXZ6YWtvbltcImFkcy5taXZ6YWtvblwiXSA9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgdGhhdC5kZWZpbmVNaXZ6YWtvbl9mdW5jdGlvbihcImFkcy5taXZ6YWtvblwiKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmIChncmlkZmlybWEgPT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgICBnb29nbGV0YWcucHViYWRzKCkucmVmcmVzaChbQWRVbml0UHJvcGVydGllc0NsYXNzT2JqLkRlZmluZV9taXZ6YWtvbltcImFkcy5taXZ6YWtvblwiXV0pO1xyXG4gICAgICAgICAgICB9ICAgICAgICAgICAgXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIGlmIChvemVuX3Nsb3QgIT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgZ29vZ2xldGFnLnB1YmFkcygpLnJlZnJlc2goW296ZW5fc2xvdF0pO1xyXG4gICAgICB9XHJcbiAgICAgIGlmIChvemVuX2xlZnRfc2xvdCAhPSB1bmRlZmluZWQpIHtcclxuICAgICAgICBnb29nbGV0YWcucHViYWRzKCkucmVmcmVzaChbb3plbl9sZWZ0X3Nsb3RdKTtcclxuICAgICAgfVxyXG4gICAgICBnb29nbGV0YWcuZW5hYmxlU2VydmljZXMoKTtcclxuICAgIH0pO1xyXG4gIH0gLy8gZW5kIENhbGxfQWZ0ZXJfSnVtYm9fT2tldlxyXG59IC8vZW5kIEFkVW5pdFRlbXBsYXRlRnVuY3Rpb25zQ2xhc3NcclxuY29uc3QgX0FkVW5pdFRlbXBsYXRlRnVuY3Rpb25zQ2xhc3MgPSBuZXcgQWRVbml0VGVtcGxhdGVGdW5jdGlvbnNDbGFzcygpO1xyXG5leHBvcnQgZGVmYXVsdCBfQWRVbml0VGVtcGxhdGVGdW5jdGlvbnNDbGFzcztcclxud2luZG93LkFkVW5pdF90ZW1wbGF0ZV9mdW5jdGlvbnMgPSBfQWRVbml0VGVtcGxhdGVGdW5jdGlvbnNDbGFzcztcclxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTs7O0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBOzs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBOzs7O0FBQUE7QUFDQTtBQUNBO0FBREE7QUFDQTtBQUFBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./modules/AdUnitTemplateFunctionsClass.js\n");

/***/ }),

/***/ "./modules/AdunitDcPathClass.js":
/*!**************************************!*\
  !*** ./modules/AdunitDcPathClass.js ***!
  \**************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/classCallCheck */ \"./node_modules/@babel/runtime/helpers/classCallCheck.js\");\n/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/createClass */ \"./node_modules/@babel/runtime/helpers/createClass.js\");\n/* harmony import */ var _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1__);\n\n\n\nvar AdunitDcPathClass =\n/*#__PURE__*/\nfunction () {\n  function AdunitDcPathClass() {//nothing here to init Class just ones per Page.\n\n    _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default()(this, AdunitDcPathClass);\n  }\n\n  _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1___default()(AdunitDcPathClass, [{\n    key: \"get\",\n    value: function get(dcPath) {\n      this.dcPath = dcPath;\n      this.dcPath;\n\n      if (((dcPath || '').match(/-[\\d]+/g) || []).length >= 1) {\n        var test = dcPath.split('-');\n\n        if ((window.dcSite == \"ynet\" || window.dcSite == \"ynt\") && ((dcPath || '').match(/-[\\d]+/g) || []).length == 2) {\n          this.dcPath = this.dcPath.replace(test[1].replace(/[\\d]+/g, '').substring(1), test[1].replace(/[\\d]+/g, '').substring(1).replace(/\\./g, '#dot#'));\n          this.dcPath = this.dcPath.replace(test[2].replace(/[\\d]+/g, '').substring(1), test[2].replace(/[\\d]+/g, '').substring(1).replace(/\\./g, '#dot#'));\n        } else {\n          this.dcPath = this.dcPath.replace(this.dcPath.split('-').pop().replace(/[\\d]+/g, '').substring(1), test.pop().replace(/[\\d]+/g, '').substring(1).replace(/\\./g, '#dot#'));\n        }\n      }\n\n      this.splitted = this.dcPath.toLowerCase().replace(/[\\d]+/, '').replace(/-[\\d]+/g, '').split(\".\");\n      this.splitted = this.splitted.filter(Boolean);\n      this.levels = this.splitted.length;\n      this.buildHierarchy();\n      this.englishHierarchy();\n      this.vestyHierarchy();\n      this.combineLevels();\n      this.hotFixes();\n      return this.adunit;\n    }\n  }, {\n    key: \"hotFixes\",\n    value: function hotFixes() {\n      this.adunit = this.adunit.replace(/#dot#/g, '.');\n      this.adunit = this.adunit.replace('..', '.');\n\n      if (this.adunit.endsWith('.')) {\n        this.adunit = this.adunit.slice(0, -1);\n      }\n\n      if (this.adunit.startsWith('/')) {\n        this.adunit = this.adunit.substring(1);\n      }\n    }\n  }, {\n    key: \"combineLevels\",\n    value: function combineLevels() {\n      var adunit = this.adunit.split('/');\n\n      if (adunit.length > 3) {\n        var lastLevel = adunit.pop();\n        adunit = adunit.join('/');\n        this.adunit = \"\".concat(adunit, \"-\").concat(lastLevel);\n      }\n    }\n  }, {\n    key: \"vestyHierarchy\",\n    value: function vestyHierarchy() {\n      if (this.adunit.startsWith('/vesti')) {\n        this.adunit = this.adunit.substring(1);\n        var adunit = this.adunit.split('/');\n        adunit.shift();\n        adunit.forEach(function (level, depth) {\n          level.startsWith('v') ? adunit[depth] = level.substring(1) : adunit[depth] = level;\n        }, this);\n\n        if (adunit[adunit.length - 1] == 'home') {\n          adunit[adunit.length - 1] = 'central';\n        }\n\n        this.adunit = adunit.join('/');\n\n        if (this.adunit.endsWith('/')) {\n          this.adunit = this.adunit.slice(0, -1);\n        }\n      }\n\n      return this;\n    }\n  }, {\n    key: \"englishHierarchy\",\n    value: function englishHierarchy() {\n      if (window.location.origin.includes('ynetglobal.com') || window.location.origin.includes('ynetnews.com')) {\n        var adunit = this.adunit.split('/');\n        adunit.forEach(function (level, depth) {\n          level.startsWith('e') && depth == 1 ? adunit[depth] = level.substring(1) : adunit[depth] = level;\n        }, this);\n        this.adunit = adunit.join('/');\n\n        if (this.adunit.endsWith('/')) {\n          this.adunit = this.adunit.slice(0, -1);\n        }\n      }\n\n      return this;\n    }\n  }, {\n    key: \"shiftLevel\",\n    value: function shiftLevel(innerLevel, substring) {\n      var level = innerLevel.split('-');\n      level.forEach(function (l, i) {\n        l.startsWith(substring) ? level[i] = l.substring(1) : level[i] = l;\n      });\n      return level.join('-');\n    }\n  }, {\n    key: \"buildHierarchy\",\n    value: function buildHierarchy() {\n      var _this = this;\n\n      this.adunit = '';\n      this.splitted.forEach(function (level, depth) {\n        if (/\\-$/.test(level)) {\n          _this.adunit += level.replace(/-/g, '/');\n        } else {\n          if (_this.adunit.endsWith(\"/\")) {\n            _this.adunit = _this.adunit;\n          } else {\n            _this.adunit += \"/\".concat(level);\n          }\n        }\n      }, this);\n    }\n  }]);\n\n  return AdunitDcPathClass;\n}();\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (new AdunitDcPathClass());//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9tb2R1bGVzL0FkdW5pdERjUGF0aENsYXNzLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbW9kdWxlcy9BZHVuaXREY1BhdGhDbGFzcy5qcz9kYjgzIl0sInNvdXJjZXNDb250ZW50IjpbImNsYXNzIEFkdW5pdERjUGF0aENsYXNzIHtcclxuICBjb25zdHJ1Y3RvcigpIHtcclxuICAgIC8vbm90aGluZyBoZXJlIHRvIGluaXQgQ2xhc3MganVzdCBvbmVzIHBlciBQYWdlLlxyXG59XHJcblxyXG5nZXQoZGNQYXRoKSB7XHJcbiAgICB0aGlzLmRjUGF0aCA9IGRjUGF0aDtcclxuICAgIHRoaXMuZGNQYXRoICAgIFxyXG4gICAgaWYoICgoZGNQYXRoIHx8ICcnKS5tYXRjaCgvLVtcXGRdKy9nKSB8fCBbXSkubGVuZ3RoID49IDEpIHtcclxuICAgICAgdmFyIHRlc3QgPSBkY1BhdGguc3BsaXQoJy0nKTtcclxuICAgICAgaWYgKCh3aW5kb3cuZGNTaXRlID09IFwieW5ldFwiIHx8IHdpbmRvdy5kY1NpdGUgPT0gXCJ5bnRcIikgJiYgKChkY1BhdGggfHwgJycpLm1hdGNoKC8tW1xcZF0rL2cpIHx8IFtdKS5sZW5ndGggPT0gMikge1xyXG4gICAgICAgIHRoaXMuZGNQYXRoID0gdGhpcy5kY1BhdGgucmVwbGFjZShcclxuICAgICAgICAgIHRlc3RbMV0ucmVwbGFjZSgvW1xcZF0rL2csICcnKS5zdWJzdHJpbmcoMSksXHJcbiAgICAgICAgICB0ZXN0WzFdLnJlcGxhY2UoL1tcXGRdKy9nLCAnJykuc3Vic3RyaW5nKDEpLnJlcGxhY2UoL1xcLi9nLCcjZG90IycpXHJcbiAgICAgICAgKVxyXG4gICAgICAgIHRoaXMuZGNQYXRoID0gdGhpcy5kY1BhdGgucmVwbGFjZShcclxuICAgICAgICAgIHRlc3RbMl0ucmVwbGFjZSgvW1xcZF0rL2csICcnKS5zdWJzdHJpbmcoMSksXHJcbiAgICAgICAgICB0ZXN0WzJdLnJlcGxhY2UoL1tcXGRdKy9nLCAnJykuc3Vic3RyaW5nKDEpLnJlcGxhY2UoL1xcLi9nLCcjZG90IycpXHJcbiAgICAgICAgKSAgICAgICAgXHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhpcy5kY1BhdGggPSB0aGlzLmRjUGF0aC5yZXBsYWNlKFxyXG4gICAgICAgICAgdGhpcy5kY1BhdGguc3BsaXQoJy0nKS5wb3AoKS5yZXBsYWNlKC9bXFxkXSsvZywgJycpLnN1YnN0cmluZygxKSxcclxuICAgICAgICAgIHRlc3QucG9wKCkucmVwbGFjZSgvW1xcZF0rL2csICcnKS5zdWJzdHJpbmcoMSkucmVwbGFjZSgvXFwuL2csJyNkb3QjJylcclxuICAgICAgICApXHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHRoaXMuc3BsaXR0ZWQgPSB0aGlzLmRjUGF0aC50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoL1tcXGRdKy8sICcnKS5yZXBsYWNlKC8tW1xcZF0rL2csICcnKS5zcGxpdChcIi5cIik7XHJcbiAgICB0aGlzLnNwbGl0dGVkID0gdGhpcy5zcGxpdHRlZC5maWx0ZXIoQm9vbGVhbik7IFxyXG4gICAgdGhpcy5sZXZlbHMgPSB0aGlzLnNwbGl0dGVkLmxlbmd0aDsgXHJcbiAgICB0aGlzLmJ1aWxkSGllcmFyY2h5KCk7XHJcbiAgICB0aGlzLmVuZ2xpc2hIaWVyYXJjaHkoKTtcclxuICAgIHRoaXMudmVzdHlIaWVyYXJjaHkoKTtcclxuICAgIHRoaXMuY29tYmluZUxldmVscygpO1xyXG4gICAgdGhpcy5ob3RGaXhlcygpO1xyXG4gICAgcmV0dXJuIHRoaXMuYWR1bml0O1xyXG59XHJcblxyXG5ob3RGaXhlcygpIHtcclxuICB0aGlzLmFkdW5pdCA9IHRoaXMuYWR1bml0LnJlcGxhY2UoLyNkb3QjL2csICcuJyk7XHJcbiAgdGhpcy5hZHVuaXQgPSB0aGlzLmFkdW5pdC5yZXBsYWNlKCcuLicsICcuJyk7XHJcbiAgaWYodGhpcy5hZHVuaXQuZW5kc1dpdGgoJy4nKSkge1xyXG4gICAgdGhpcy5hZHVuaXQgPSB0aGlzLmFkdW5pdC5zbGljZSgwLCAtMSk7XHJcbiAgfVxyXG4gIGlmKHRoaXMuYWR1bml0LnN0YXJ0c1dpdGgoJy8nKSkge1xyXG4gICAgdGhpcy5hZHVuaXQgPSB0aGlzLmFkdW5pdC5zdWJzdHJpbmcoMSk7XHJcbiAgfSAgXHJcbn1cclxuXHJcbmNvbWJpbmVMZXZlbHMoKSB7XHJcbiAgICBsZXQgYWR1bml0ID0gdGhpcy5hZHVuaXQuc3BsaXQoJy8nKTtcclxuICAgIGlmIChhZHVuaXQubGVuZ3RoID4gMykge1xyXG4gICAgICAgIGxldCBsYXN0TGV2ZWwgPSBhZHVuaXQucG9wKCk7XHJcbiAgICAgICAgYWR1bml0ID0gYWR1bml0LmpvaW4oJy8nKTtcclxuICAgICAgICB0aGlzLmFkdW5pdCA9IGAke2FkdW5pdH0tJHtsYXN0TGV2ZWx9YDtcclxuICAgIH1cclxufVxyXG5cclxudmVzdHlIaWVyYXJjaHkoKSB7XHJcbiAgICBpZiAodGhpcy5hZHVuaXQuc3RhcnRzV2l0aCgnL3Zlc3RpJykpIHtcclxuICAgICAgICB0aGlzLmFkdW5pdCA9IHRoaXMuYWR1bml0LnN1YnN0cmluZygxKTtcclxuICAgICAgICBsZXQgYWR1bml0ID0gdGhpcy5hZHVuaXQuc3BsaXQoJy8nKTtcclxuICAgICAgICBhZHVuaXQuc2hpZnQoKTtcclxuICAgICAgICBhZHVuaXQuZm9yRWFjaCgobGV2ZWwsIGRlcHRoKSA9PiB7XHJcbiAgICAgICAgICAgIGxldmVsLnN0YXJ0c1dpdGgoJ3YnKSA/IGFkdW5pdFtkZXB0aF0gPSBsZXZlbC5zdWJzdHJpbmcoMSkgOiBhZHVuaXRbZGVwdGhdID0gbGV2ZWw7XHJcbiAgICAgICAgfSwgdGhpcyk7XHJcbiAgICAgICAgaWYgKGFkdW5pdFthZHVuaXQubGVuZ3RoIC0gMV0gPT0gJ2hvbWUnKSB7YWR1bml0W2FkdW5pdC5sZW5ndGggLSAxXSA9ICdjZW50cmFsJzt9XHJcblxyXG4gICAgICAgIHRoaXMuYWR1bml0ID0gYWR1bml0LmpvaW4oJy8nKTtcclxuICAgICAgICBpZih0aGlzLmFkdW5pdC5lbmRzV2l0aCgnLycpKSB7XHJcbiAgICAgICAgICB0aGlzLmFkdW5pdCA9IHRoaXMuYWR1bml0LnNsaWNlKDAsIC0xKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdGhpcztcclxufVxyXG5cclxuZW5nbGlzaEhpZXJhcmNoeSgpIHtcclxuICAgIGlmICh3aW5kb3cubG9jYXRpb24ub3JpZ2luLmluY2x1ZGVzKCd5bmV0Z2xvYmFsLmNvbScpIHx8IHdpbmRvdy5sb2NhdGlvbi5vcmlnaW4uaW5jbHVkZXMoJ3luZXRuZXdzLmNvbScpICkge1xyXG4gICAgICAgIGxldCBhZHVuaXQgPSB0aGlzLmFkdW5pdC5zcGxpdCgnLycpO1xyXG4gICAgICAgIGFkdW5pdC5mb3JFYWNoKChsZXZlbCwgZGVwdGgpID0+IHtcclxuICAgICAgICAgICAgbGV2ZWwuc3RhcnRzV2l0aCgnZScpICYmIGRlcHRoID09IDEgPyBhZHVuaXRbZGVwdGhdID0gbGV2ZWwuc3Vic3RyaW5nKDEpIDogYWR1bml0W2RlcHRoXSA9IGxldmVsO1xyXG4gICAgICAgIH0sIHRoaXMpO1xyXG4gICAgICAgIHRoaXMuYWR1bml0ID0gYWR1bml0LmpvaW4oJy8nKTtcclxuICAgICAgICBpZih0aGlzLmFkdW5pdC5lbmRzV2l0aCgnLycpKSB7XHJcbiAgICAgICAgICB0aGlzLmFkdW5pdCA9IHRoaXMuYWR1bml0LnNsaWNlKDAsIC0xKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdGhpcztcclxufVxyXG5cclxuc2hpZnRMZXZlbChpbm5lckxldmVsLCBzdWJzdHJpbmcpIHtcclxuICAgIGxldCBsZXZlbCA9IGlubmVyTGV2ZWwuc3BsaXQoJy0nKTtcclxuICAgIGxldmVsLmZvckVhY2goKGwsIGkpID0+IHtcclxuICAgICAgICBsLnN0YXJ0c1dpdGgoc3Vic3RyaW5nKSA/IGxldmVsW2ldID0gbC5zdWJzdHJpbmcoMSkgOiBsZXZlbFtpXSA9IGw7XHJcbiAgICB9KVxyXG4gICAgcmV0dXJuIGxldmVsLmpvaW4oJy0nKTtcclxufVxyXG5cclxuYnVpbGRIaWVyYXJjaHkoKSB7XHJcbiAgICB0aGlzLmFkdW5pdCA9ICcnO1xyXG4gICAgdGhpcy5zcGxpdHRlZC5mb3JFYWNoKChsZXZlbCwgZGVwdGgpID0+IHtcclxuICAgICAgaWYoL1xcLSQvLnRlc3QobGV2ZWwpKXtcclxuICAgICAgICB0aGlzLmFkdW5pdCArPSBsZXZlbC5yZXBsYWNlKC8tL2csICcvJylcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBpZih0aGlzLmFkdW5pdC5lbmRzV2l0aChcIi9cIikpe1xyXG4gICAgICAgICAgIHRoaXMuYWR1bml0ID0gdGhpcy5hZHVuaXQ7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5hZHVuaXQgKz0gYC8ke2xldmVsfWA7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9LCB0aGlzKVxyXG59XHJcbn1cclxuZXhwb3J0IGRlZmF1bHQgbmV3IEFkdW5pdERjUGF0aENsYXNzKCk7XHJcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQTs7O0FBQ0E7QUFDQTtBQURBO0FBRUE7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBSUE7QUFJQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7OztBQUVBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./modules/AdunitDcPathClass.js\n");

/***/ }),

/***/ "./modules/CoockiesFunctionClass.js":
/*!******************************************!*\
  !*** ./modules/CoockiesFunctionClass.js ***!
  \******************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/classCallCheck */ \"./node_modules/@babel/runtime/helpers/classCallCheck.js\");\n/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/createClass */ \"./node_modules/@babel/runtime/helpers/createClass.js\");\n/* harmony import */ var _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _InfrastructureClass__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./InfrastructureClass */ \"./modules/InfrastructureClass.js\");\n\n\n\nvar Log = _InfrastructureClass__WEBPACK_IMPORTED_MODULE_2__[\"default\"].Log;\n\nvar CoockiesFunctionClass =\n/*#__PURE__*/\nfunction () {\n  function CoockiesFunctionClass() {\n    _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default()(this, CoockiesFunctionClass);\n\n    this.dcPath = window.dcPath;\n    this.dccg = window.dcCG;\n    this.AdUnit_data = this.ResolveAdUnitData_func(_InfrastructureClass__WEBPACK_IMPORTED_MODULE_2__[\"default\"].Site);\n  }\n\n  _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1___default()(CoockiesFunctionClass, [{\n    key: \"ResolveAdUnitData_func\",\n    value: function ResolveAdUnitData_func(site) {\n      //ResolveAdUnitData_func create AdUnit_data object\n      switch (site) {\n        case \"is_ynes\":\n          return {\n            views: {\n              ynes: {\n                standard: 5\n              },\n              standard: {\n                standard: 5\n              }\n            }\n          };\n\n        case \"is_xnet\":\n          return {\n            views: {\n              xnt: {\n                \".main\": 5,\n                standard: 5\n              },\n              standard: {\n                standard: 5\n              }\n            }\n          };\n\n        case \"is_yns\":\n          return {\n            views: {\n              ynv: {\n                \".vesti\": 5,\n                standard: \"5\"\n              },\n              yns: {\n                \".enews\": 5,\n                \".eopinion\": 5,\n                \".emoney\": 5,\n                \".eculture\": 5,\n                \".ejewish\": 5,\n                \".magazine\": 5,\n                \".etravel\": 5,\n                \".eactive\": 5,\n                \".ecentral\": 5,\n                standard: \"5\"\n              },\n              standard: {\n                standard: 5\n              }\n            }\n          };\n\n        case \"is_yns_ynv\":\n          return {\n            views: {\n              ynv: {\n                \".vesti\": 5,\n                standard: \"5\"\n              },\n              yns: {\n                \".enews\": 5,\n                \".eopinion\": 5,\n                \".emoney\": 5,\n                \".eculture\": 5,\n                \".ejewish\": 5,\n                \".magazine\": 5,\n                \".etravel\": 5,\n                \".eactive\": 5,\n                \".ecentral\": 5,\n                standard: \"5\"\n              },\n              standard: {\n                standard: 5\n              }\n            }\n          };\n\n        case \"is_800\":\n          return {\n            views: {\n              ynt: {\n                \".good\": 5,\n                \".food\": 5,\n                \".go\": 5,\n                \".menta\": 5,\n                \".vacation\": 5,\n                \".entertaiment\": 5,\n                \".magazine\": 5,\n                \".index\": 5,\n                \".encl\": 5,\n                \".astrology\": 5,\n                \".health\": 5,\n                \".opinion\": 5,\n                \".parents\": 5,\n                \".ecology\": 5,\n                \".news\": 5,\n                \".judais\": 5,\n                \".dating\": 5,\n                \".economy\": 5,\n                \".comput\": 5,\n                \".activisim\": 5,\n                \".sport\": 5,\n                \".movies\": 5,\n                \".consumer\": 5,\n                \".forums\": 5,\n                \".auto\": 5,\n                \".gossip\": 5,\n                \".travel\": 5,\n                \".enter\": 5,\n                \".Central\": 6,\n                standard: \"5\"\n              },\n              yntho: {\n                \".hot\": 5,\n                \".HOT\": 5\n              },\n              standard: {\n                standard: 5\n              }\n            }\n          };\n\n        default:\n          return {\n            views: {\n              ynt: {\n                \".good\": 5,\n                \".food\": 5,\n                \".go\": 5,\n                \".menta\": 5,\n                \".vacation\": 5,\n                \".entertaiment\": 5,\n                \".magazine\": 5,\n                \".index\": 5,\n                \".encl\": 5,\n                \".astrology\": 5,\n                \".health\": 5,\n                \".opinion\": 5,\n                \".parents\": 5,\n                \".ecology\": 5,\n                \".news\": 5,\n                \".judais\": 5,\n                \".dating\": 5,\n                \".economy\": 5,\n                \".comput\": 5,\n                \".activisim\": 5,\n                \".sport\": 5,\n                \".movies\": 5,\n                \".consumer\": 5,\n                \".forums\": 5,\n                \".auto\": 5,\n                \".gossip\": 5,\n                \".travel\": 5,\n                \".enter\": 5,\n                \".Central\": 6,\n                standard: \"5\"\n              },\n              yns: {\n                \".enews\": 5,\n                \".eopinion\": 5,\n                \".emoney\": 5,\n                \".eculture\": 5,\n                \".ejewish\": 5,\n                \".magazine\": 5,\n                \".etravel\": 5,\n                \".eactive\": 5,\n                \".ecentral\": 5,\n                standard: \"5\"\n              },\n              standard: {\n                standard: 5\n              }\n            }\n          };\n      }\n    }\n  }, {\n    key: \"createCookie_func\",\n    value: function createCookie_func(name, value, days) {\n      Log(\"createCookie_func\");\n      var expires = \"\";\n\n      if (days) {\n        var date = new Date();\n        date.setTime(date.getTime() + days * 24 * 60 * 60 * 1000);\n        expires = \"; expires=\" + date.toGMTString();\n      } else expires = \"\";\n\n      document.cookie = name + \"=\" + value + expires + \"; path=/\";\n    }\n  }, {\n    key: \"readCookie_func\",\n    value: function readCookie_func(name) {\n      Log(\"readCookie_func\");\n      var nameEQ = name + \"=\";\n      var ca = document.cookie.split(\";\");\n\n      for (var i = 0; i < ca.length; i++) {\n        var c = ca[i];\n\n        while (c.charAt(0) == \" \") {\n          c = c.substring(1, c.length);\n        }\n\n        if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length, c.length);\n      }\n\n      return null;\n    }\n  }, {\n    key: \"getCookie1_func\",\n    value: function getCookie1_func(name, index_x) {\n      Log(\"getCookie1_func\");\n      var s = window.dcSite;\n      var vd = this.AdUnit_data.views;\n      var index_y = \"\";\n      var cunt_i = 0;\n\n      for (var i in vd[s]) {\n        index_y = index_y + i + \";\";\n      }\n\n      var ca = index_y.split(\";\");\n\n      for (var _i = 0; _i < ca.length; _i++) {\n        if (ca[_i] == name) break;\n        cunt_i = cunt_i + 1;\n      }\n\n      var mcookie = this.readCookie_func(index_x);\n      return mcookie.substring(cunt_i, cunt_i + 1);\n    }\n  }, {\n    key: \"writeCookie1_func\",\n    value: function writeCookie1_func(name, value, days, index_x) {\n      Log(\"writeCookie1_func\");\n      var expires = \"\";\n\n      if (days) {\n        var date = new Date();\n        date.setTime(date.getTime() + days * 24 * 60 * 60 * 1000);\n        expires = \"; expires=\" + date.toGMTString();\n      } else expires = \"\";\n\n      var s = window.dcSite;\n      var vd = this.AdUnit_data.views;\n      var index_y = \"\";\n\n      for (var i in vd[s]) {\n        index_y = index_y + i + \";\";\n      }\n\n      var ca = index_y.split(\";\");\n      var cunt_i = 0;\n\n      for (var _i2 = 0; _i2 < ca.length; _i2++) {\n        if (ca[_i2] == name) break;\n        cunt_i = cunt_i + 1;\n      }\n\n      var mcookie = this.readCookie_func(index_x);\n      var B4 = mcookie.substring(-1, cunt_i);\n      var R2 = mcookie.substring(cunt_i + 1, mcookie.length);\n      var ncookie = index_x + \"=\" + B4 + value + R2 + expires + \"; path=/\";\n      document.cookie = ncookie;\n    }\n  }, {\n    key: \"setViewCookies_func\",\n    value: function setViewCookies_func() {\n      Log(\"setViewCookies_func\");\n      var dcPath1 = this.dcPath;\n      this._dcPath = dcPath1.split(\"-\");\n\n      var c = this._dcPath[0].toLowerCase();\n\n      var s = this.dcSite;\n      var vd_list = this.AdUnit_data.views;\n      var index_x = \"tmc\" + s;\n      var sync = this.readCookie_func(\"dcsync\" + s);\n      var Lcoockie = this.readCookie_func(index_x);\n      var view; // OLD VERSION OF VIEW\n\n      var cunt_i = \"\";\n\n      if (!sync || Lcoockie == null) {\n        this.createCookie_func(\"dcsync\" + s, \"true\", 360);\n        cunt_i = \"\";\n\n        if (!vd_list[s]) {\n          s = \"standard\";\n        }\n\n        for (var i in vd_list[s]) {\n          i + \"\";\n        }\n\n        cunt_i = cunt_i + \"1\";\n        this.createCookie_func(index_x, cunt_i, 360);\n      } else {\n        if (!vd_list[s]) {\n          s = \"standard\";\n        }\n\n        if (!vd_list[s][c]) {\n          c = \"standard\";\n        }\n\n        view = this.getCookie1_func(c, index_x);\n        var t = vd_list[s][c];\n\n        if (t) {\n          view = view % t + 1;\n          var str = \"view1\";\n\n          for (var _i3 = 2; _i3 <= view; _i3++) {\n            str = str + \",view\" + _i3;\n          }\n        }\n\n        this.writeCookie1_func(c, view, 360, index_x);\n      }\n    }\n  }, {\n    key: \"viewCoockies_func\",\n    value: function viewCoockies_func() {\n      //viewCoockies_func function get the page dcPath and return key for the dcview (from localstorage the value of view)\n      //The dcPath have 5 values: home_channel, news_channel, woman_channel, man_channel, other_channel\n      // if (InfrasructureClassObj.Site == 'is_xnet') {\n      // \tif (this.dccg == 'home') {\n      // \t\tvar channel = 'home_channel';\n      // \t} else {\n      // \t\tvar channel = 'main_channel';\n      // \t}\n      // }\n      if (_InfrastructureClass__WEBPACK_IMPORTED_MODULE_2__[\"default\"].Site == \"is_800\" || _InfrastructureClass__WEBPACK_IMPORTED_MODULE_2__[\"default\"].Site == \"is_yns_ynv\" || _InfrastructureClass__WEBPACK_IMPORTED_MODULE_2__[\"default\"].Site == \"is_yns\" || _InfrastructureClass__WEBPACK_IMPORTED_MODULE_2__[\"default\"].Site == \"is_ynes\") {\n        return this.dcPath;\n      } else {\n        var channel_path = this.dcPath;\n        var path_array = channel_path.split(\"-\");\n        var num_channel = path_array[0].substr(0, path_array[0].indexOf(\".\"));\n\n        if (this.dccg == \"home\" || window.dcPath == \"2775.Knesset-32472.yuval1280\") {\n          return \"home_channel\";\n        } else if (num_channel == \"2\") {\n          return \"news_channel\";\n        } else if (num_channel == \"975\" || num_channel == \"1209\" || num_channel == \"1208\" || num_channel == \"1069\" || num_channel == \"3925\" || num_channel == \"538\" || num_channel == \"5363\" || num_channel == \"11211\" || num_channel == \"3052\") {\n          return \"woman_channel\";\n        } else if (num_channel == \"550\" || num_channel == \"3\" || num_channel == \"544\" || num_channel == \"598\" || num_channel == \"6\" || num_channel == \"4880\") {\n          return \"man_channel\";\n        } else {\n          return \"other_channel\";\n        }\n      }\n    }\n  }]);\n\n  return CoockiesFunctionClass;\n}(); //end class CoockiesFunctionClass\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (new CoockiesFunctionClass());//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9tb2R1bGVzL0Nvb2NraWVzRnVuY3Rpb25DbGFzcy5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL21vZHVsZXMvQ29vY2tpZXNGdW5jdGlvbkNsYXNzLmpzP2IwZTMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEluZnJhc3J1Y3R1cmVDbGFzc09iaiBmcm9tIFwiLi9JbmZyYXN0cnVjdHVyZUNsYXNzXCI7XHJcbmNvbnN0IHsgTG9nIH0gPSBJbmZyYXNydWN0dXJlQ2xhc3NPYmo7XHJcblxyXG5jbGFzcyBDb29ja2llc0Z1bmN0aW9uQ2xhc3Mge1xyXG4gIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgdGhpcy5kY1BhdGggPSB3aW5kb3cuZGNQYXRoO1xyXG4gICAgdGhpcy5kY2NnID0gd2luZG93LmRjQ0c7XHJcbiAgICB0aGlzLkFkVW5pdF9kYXRhID0gdGhpcy5SZXNvbHZlQWRVbml0RGF0YV9mdW5jKEluZnJhc3J1Y3R1cmVDbGFzc09iai5TaXRlKTtcclxuICB9XHJcbiAgUmVzb2x2ZUFkVW5pdERhdGFfZnVuYyhzaXRlKSB7XHJcbiAgICAvL1Jlc29sdmVBZFVuaXREYXRhX2Z1bmMgY3JlYXRlIEFkVW5pdF9kYXRhIG9iamVjdFxyXG4gICAgc3dpdGNoIChzaXRlKSB7XHJcbiAgICAgIGNhc2UgXCJpc195bmVzXCI6XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgIHZpZXdzOiB7XHJcbiAgICAgICAgICAgIHluZXM6IHtcclxuICAgICAgICAgICAgICBzdGFuZGFyZDogNVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBzdGFuZGFyZDoge1xyXG4gICAgICAgICAgICAgIHN0YW5kYXJkOiA1XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgY2FzZSBcImlzX3huZXRcIjpcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgdmlld3M6IHtcclxuICAgICAgICAgICAgeG50OiB7XHJcbiAgICAgICAgICAgICAgXCIubWFpblwiOiA1LFxyXG4gICAgICAgICAgICAgIHN0YW5kYXJkOiA1XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHN0YW5kYXJkOiB7XHJcbiAgICAgICAgICAgICAgc3RhbmRhcmQ6IDVcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICBjYXNlIFwiaXNfeW5zXCI6XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgIHZpZXdzOiB7XHJcbiAgICAgICAgICAgIHludjoge1xyXG4gICAgICAgICAgICAgIFwiLnZlc3RpXCI6IDUsXHJcbiAgICAgICAgICAgICAgc3RhbmRhcmQ6IFwiNVwiXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHluczoge1xyXG4gICAgICAgICAgICAgIFwiLmVuZXdzXCI6IDUsXHJcbiAgICAgICAgICAgICAgXCIuZW9waW5pb25cIjogNSxcclxuICAgICAgICAgICAgICBcIi5lbW9uZXlcIjogNSxcclxuICAgICAgICAgICAgICBcIi5lY3VsdHVyZVwiOiA1LFxyXG4gICAgICAgICAgICAgIFwiLmVqZXdpc2hcIjogNSxcclxuICAgICAgICAgICAgICBcIi5tYWdhemluZVwiOiA1LFxyXG4gICAgICAgICAgICAgIFwiLmV0cmF2ZWxcIjogNSxcclxuICAgICAgICAgICAgICBcIi5lYWN0aXZlXCI6IDUsXHJcbiAgICAgICAgICAgICAgXCIuZWNlbnRyYWxcIjogNSxcclxuICAgICAgICAgICAgICBzdGFuZGFyZDogXCI1XCJcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgc3RhbmRhcmQ6IHtcclxuICAgICAgICAgICAgICBzdGFuZGFyZDogNVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgY2FzZSBcImlzX3luc195bnZcIjpcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgdmlld3M6IHtcclxuICAgICAgICAgICAgeW52OiB7XHJcbiAgICAgICAgICAgICAgXCIudmVzdGlcIjogNSxcclxuICAgICAgICAgICAgICBzdGFuZGFyZDogXCI1XCJcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgeW5zOiB7XHJcbiAgICAgICAgICAgICAgXCIuZW5ld3NcIjogNSxcclxuICAgICAgICAgICAgICBcIi5lb3BpbmlvblwiOiA1LFxyXG4gICAgICAgICAgICAgIFwiLmVtb25leVwiOiA1LFxyXG4gICAgICAgICAgICAgIFwiLmVjdWx0dXJlXCI6IDUsXHJcbiAgICAgICAgICAgICAgXCIuZWpld2lzaFwiOiA1LFxyXG4gICAgICAgICAgICAgIFwiLm1hZ2F6aW5lXCI6IDUsXHJcbiAgICAgICAgICAgICAgXCIuZXRyYXZlbFwiOiA1LFxyXG4gICAgICAgICAgICAgIFwiLmVhY3RpdmVcIjogNSxcclxuICAgICAgICAgICAgICBcIi5lY2VudHJhbFwiOiA1LFxyXG4gICAgICAgICAgICAgIHN0YW5kYXJkOiBcIjVcIlxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBzdGFuZGFyZDoge1xyXG4gICAgICAgICAgICAgIHN0YW5kYXJkOiA1XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgY2FzZSBcImlzXzgwMFwiOlxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICB2aWV3czoge1xyXG4gICAgICAgICAgICB5bnQ6IHtcclxuICAgICAgICAgICAgICBcIi5nb29kXCI6IDUsXHJcbiAgICAgICAgICAgICAgXCIuZm9vZFwiOiA1LFxyXG4gICAgICAgICAgICAgIFwiLmdvXCI6IDUsXHJcbiAgICAgICAgICAgICAgXCIubWVudGFcIjogNSxcclxuICAgICAgICAgICAgICBcIi52YWNhdGlvblwiOiA1LFxyXG4gICAgICAgICAgICAgIFwiLmVudGVydGFpbWVudFwiOiA1LFxyXG4gICAgICAgICAgICAgIFwiLm1hZ2F6aW5lXCI6IDUsXHJcbiAgICAgICAgICAgICAgXCIuaW5kZXhcIjogNSxcclxuICAgICAgICAgICAgICBcIi5lbmNsXCI6IDUsXHJcbiAgICAgICAgICAgICAgXCIuYXN0cm9sb2d5XCI6IDUsXHJcbiAgICAgICAgICAgICAgXCIuaGVhbHRoXCI6IDUsXHJcbiAgICAgICAgICAgICAgXCIub3BpbmlvblwiOiA1LFxyXG4gICAgICAgICAgICAgIFwiLnBhcmVudHNcIjogNSxcclxuICAgICAgICAgICAgICBcIi5lY29sb2d5XCI6IDUsXHJcbiAgICAgICAgICAgICAgXCIubmV3c1wiOiA1LFxyXG4gICAgICAgICAgICAgIFwiLmp1ZGFpc1wiOiA1LFxyXG4gICAgICAgICAgICAgIFwiLmRhdGluZ1wiOiA1LFxyXG4gICAgICAgICAgICAgIFwiLmVjb25vbXlcIjogNSxcclxuICAgICAgICAgICAgICBcIi5jb21wdXRcIjogNSxcclxuICAgICAgICAgICAgICBcIi5hY3RpdmlzaW1cIjogNSxcclxuICAgICAgICAgICAgICBcIi5zcG9ydFwiOiA1LFxyXG4gICAgICAgICAgICAgIFwiLm1vdmllc1wiOiA1LFxyXG4gICAgICAgICAgICAgIFwiLmNvbnN1bWVyXCI6IDUsXHJcbiAgICAgICAgICAgICAgXCIuZm9ydW1zXCI6IDUsXHJcbiAgICAgICAgICAgICAgXCIuYXV0b1wiOiA1LFxyXG4gICAgICAgICAgICAgIFwiLmdvc3NpcFwiOiA1LFxyXG4gICAgICAgICAgICAgIFwiLnRyYXZlbFwiOiA1LFxyXG4gICAgICAgICAgICAgIFwiLmVudGVyXCI6IDUsXHJcbiAgICAgICAgICAgICAgXCIuQ2VudHJhbFwiOiA2LFxyXG4gICAgICAgICAgICAgIHN0YW5kYXJkOiBcIjVcIlxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB5bnRobzoge1xyXG4gICAgICAgICAgICAgIFwiLmhvdFwiOiA1LFxyXG4gICAgICAgICAgICAgIFwiLkhPVFwiOiA1XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHN0YW5kYXJkOiB7XHJcbiAgICAgICAgICAgICAgc3RhbmRhcmQ6IDVcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgIHZpZXdzOiB7XHJcbiAgICAgICAgICAgIHludDoge1xyXG4gICAgICAgICAgICAgIFwiLmdvb2RcIjogNSxcclxuICAgICAgICAgICAgICBcIi5mb29kXCI6IDUsXHJcbiAgICAgICAgICAgICAgXCIuZ29cIjogNSxcclxuICAgICAgICAgICAgICBcIi5tZW50YVwiOiA1LFxyXG4gICAgICAgICAgICAgIFwiLnZhY2F0aW9uXCI6IDUsXHJcbiAgICAgICAgICAgICAgXCIuZW50ZXJ0YWltZW50XCI6IDUsXHJcbiAgICAgICAgICAgICAgXCIubWFnYXppbmVcIjogNSxcclxuICAgICAgICAgICAgICBcIi5pbmRleFwiOiA1LFxyXG4gICAgICAgICAgICAgIFwiLmVuY2xcIjogNSxcclxuICAgICAgICAgICAgICBcIi5hc3Ryb2xvZ3lcIjogNSxcclxuICAgICAgICAgICAgICBcIi5oZWFsdGhcIjogNSxcclxuICAgICAgICAgICAgICBcIi5vcGluaW9uXCI6IDUsXHJcbiAgICAgICAgICAgICAgXCIucGFyZW50c1wiOiA1LFxyXG4gICAgICAgICAgICAgIFwiLmVjb2xvZ3lcIjogNSxcclxuICAgICAgICAgICAgICBcIi5uZXdzXCI6IDUsXHJcbiAgICAgICAgICAgICAgXCIuanVkYWlzXCI6IDUsXHJcbiAgICAgICAgICAgICAgXCIuZGF0aW5nXCI6IDUsXHJcbiAgICAgICAgICAgICAgXCIuZWNvbm9teVwiOiA1LFxyXG4gICAgICAgICAgICAgIFwiLmNvbXB1dFwiOiA1LFxyXG4gICAgICAgICAgICAgIFwiLmFjdGl2aXNpbVwiOiA1LFxyXG4gICAgICAgICAgICAgIFwiLnNwb3J0XCI6IDUsXHJcbiAgICAgICAgICAgICAgXCIubW92aWVzXCI6IDUsXHJcbiAgICAgICAgICAgICAgXCIuY29uc3VtZXJcIjogNSxcclxuICAgICAgICAgICAgICBcIi5mb3J1bXNcIjogNSxcclxuICAgICAgICAgICAgICBcIi5hdXRvXCI6IDUsXHJcbiAgICAgICAgICAgICAgXCIuZ29zc2lwXCI6IDUsXHJcbiAgICAgICAgICAgICAgXCIudHJhdmVsXCI6IDUsXHJcbiAgICAgICAgICAgICAgXCIuZW50ZXJcIjogNSxcclxuICAgICAgICAgICAgICBcIi5DZW50cmFsXCI6IDYsXHJcbiAgICAgICAgICAgICAgc3RhbmRhcmQ6IFwiNVwiXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHluczoge1xyXG4gICAgICAgICAgICAgIFwiLmVuZXdzXCI6IDUsXHJcbiAgICAgICAgICAgICAgXCIuZW9waW5pb25cIjogNSxcclxuICAgICAgICAgICAgICBcIi5lbW9uZXlcIjogNSxcclxuICAgICAgICAgICAgICBcIi5lY3VsdHVyZVwiOiA1LFxyXG4gICAgICAgICAgICAgIFwiLmVqZXdpc2hcIjogNSxcclxuICAgICAgICAgICAgICBcIi5tYWdhemluZVwiOiA1LFxyXG4gICAgICAgICAgICAgIFwiLmV0cmF2ZWxcIjogNSxcclxuICAgICAgICAgICAgICBcIi5lYWN0aXZlXCI6IDUsXHJcbiAgICAgICAgICAgICAgXCIuZWNlbnRyYWxcIjogNSxcclxuICAgICAgICAgICAgICBzdGFuZGFyZDogXCI1XCJcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgc3RhbmRhcmQ6IHtcclxuICAgICAgICAgICAgICBzdGFuZGFyZDogNVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuICB9XHJcbiAgY3JlYXRlQ29va2llX2Z1bmMobmFtZSwgdmFsdWUsIGRheXMpIHtcclxuICAgIExvZyhcImNyZWF0ZUNvb2tpZV9mdW5jXCIpO1xyXG4gICAgbGV0IGV4cGlyZXMgPSBcIlwiO1xyXG4gICAgaWYgKGRheXMpIHtcclxuICAgICAgbGV0IGRhdGUgPSBuZXcgRGF0ZSgpO1xyXG4gICAgICBkYXRlLnNldFRpbWUoZGF0ZS5nZXRUaW1lKCkgKyBkYXlzICogMjQgKiA2MCAqIDYwICogMTAwMCk7XHJcbiAgICAgIGV4cGlyZXMgPSBcIjsgZXhwaXJlcz1cIiArIGRhdGUudG9HTVRTdHJpbmcoKTtcclxuICAgIH0gZWxzZSBleHBpcmVzID0gXCJcIjtcclxuICAgIGRvY3VtZW50LmNvb2tpZSA9IG5hbWUgKyBcIj1cIiArIHZhbHVlICsgZXhwaXJlcyArIFwiOyBwYXRoPS9cIjtcclxuICB9XHJcbiAgcmVhZENvb2tpZV9mdW5jKG5hbWUpIHtcclxuICAgIExvZyhcInJlYWRDb29raWVfZnVuY1wiKTtcclxuICAgIGNvbnN0IG5hbWVFUSA9IG5hbWUgKyBcIj1cIjtcclxuICAgIGNvbnN0IGNhID0gZG9jdW1lbnQuY29va2llLnNwbGl0KFwiO1wiKTtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2EubGVuZ3RoOyBpKyspIHtcclxuICAgICAgbGV0IGMgPSBjYVtpXTtcclxuICAgICAgd2hpbGUgKGMuY2hhckF0KDApID09IFwiIFwiKSBjID0gYy5zdWJzdHJpbmcoMSwgYy5sZW5ndGgpO1xyXG4gICAgICBpZiAoYy5pbmRleE9mKG5hbWVFUSkgPT0gMCkgcmV0dXJuIGMuc3Vic3RyaW5nKG5hbWVFUS5sZW5ndGgsIGMubGVuZ3RoKTtcclxuICAgIH1cclxuICAgIHJldHVybiBudWxsO1xyXG4gIH1cclxuICBnZXRDb29raWUxX2Z1bmMobmFtZSwgaW5kZXhfeCkge1xyXG4gICAgTG9nKFwiZ2V0Q29va2llMV9mdW5jXCIpO1xyXG4gICAgY29uc3QgcyA9IHdpbmRvdy5kY1NpdGU7XHJcbiAgICBjb25zdCB2ZCA9IHRoaXMuQWRVbml0X2RhdGEudmlld3M7XHJcbiAgICBsZXQgaW5kZXhfeSA9IFwiXCI7XHJcbiAgICBsZXQgY3VudF9pID0gMDtcclxuICAgIGZvciAobGV0IGkgaW4gdmRbc10pIGluZGV4X3kgPSBpbmRleF95ICsgaSArIFwiO1wiO1xyXG4gICAgY29uc3QgY2EgPSBpbmRleF95LnNwbGl0KFwiO1wiKTtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2EubGVuZ3RoOyBpKyspIHtcclxuICAgICAgaWYgKGNhW2ldID09IG5hbWUpIGJyZWFrO1xyXG4gICAgICBjdW50X2kgPSBjdW50X2kgKyAxO1xyXG4gICAgfVxyXG4gICAgbGV0IG1jb29raWUgPSB0aGlzLnJlYWRDb29raWVfZnVuYyhpbmRleF94KTtcclxuICAgIHJldHVybiBtY29va2llLnN1YnN0cmluZyhjdW50X2ksIGN1bnRfaSArIDEpO1xyXG4gIH1cclxuICB3cml0ZUNvb2tpZTFfZnVuYyhuYW1lLCB2YWx1ZSwgZGF5cywgaW5kZXhfeCkge1xyXG4gICAgTG9nKFwid3JpdGVDb29raWUxX2Z1bmNcIik7XHJcbiAgICBsZXQgZXhwaXJlcyA9IFwiXCI7XHJcbiAgICBpZiAoZGF5cykge1xyXG4gICAgICBsZXQgZGF0ZSA9IG5ldyBEYXRlKCk7XHJcbiAgICAgIGRhdGUuc2V0VGltZShkYXRlLmdldFRpbWUoKSArIGRheXMgKiAyNCAqIDYwICogNjAgKiAxMDAwKTtcclxuICAgICAgZXhwaXJlcyA9IFwiOyBleHBpcmVzPVwiICsgZGF0ZS50b0dNVFN0cmluZygpO1xyXG4gICAgfSBlbHNlIGV4cGlyZXMgPSBcIlwiO1xyXG4gICAgY29uc3QgcyA9IHdpbmRvdy5kY1NpdGU7XHJcbiAgICBsZXQgdmQgPSB0aGlzLkFkVW5pdF9kYXRhLnZpZXdzO1xyXG4gICAgbGV0IGluZGV4X3kgPSBcIlwiO1xyXG4gICAgZm9yIChsZXQgaSBpbiB2ZFtzXSkgaW5kZXhfeSA9IGluZGV4X3kgKyBpICsgXCI7XCI7XHJcbiAgICBsZXQgY2EgPSBpbmRleF95LnNwbGl0KFwiO1wiKTtcclxuICAgIGxldCBjdW50X2kgPSAwO1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjYS5sZW5ndGg7IGkrKykge1xyXG4gICAgICBpZiAoY2FbaV0gPT0gbmFtZSkgYnJlYWs7XHJcbiAgICAgIGN1bnRfaSA9IGN1bnRfaSArIDE7XHJcbiAgICB9XHJcbiAgICBsZXQgbWNvb2tpZSA9IHRoaXMucmVhZENvb2tpZV9mdW5jKGluZGV4X3gpO1xyXG4gICAgbGV0IEI0ID0gbWNvb2tpZS5zdWJzdHJpbmcoLTEsIGN1bnRfaSk7XHJcbiAgICBsZXQgUjIgPSBtY29va2llLnN1YnN0cmluZyhjdW50X2kgKyAxLCBtY29va2llLmxlbmd0aCk7XHJcbiAgICBsZXQgbmNvb2tpZSA9IGluZGV4X3ggKyBcIj1cIiArIEI0ICsgdmFsdWUgKyBSMiArIGV4cGlyZXMgKyBcIjsgcGF0aD0vXCI7XHJcbiAgICBkb2N1bWVudC5jb29raWUgPSBuY29va2llO1xyXG4gIH1cclxuICBzZXRWaWV3Q29va2llc19mdW5jKCkge1xyXG4gICAgTG9nKFwic2V0Vmlld0Nvb2tpZXNfZnVuY1wiKTtcclxuICAgIGNvbnN0IGRjUGF0aDEgPSB0aGlzLmRjUGF0aDtcclxuICAgIHRoaXMuX2RjUGF0aCA9IGRjUGF0aDEuc3BsaXQoXCItXCIpO1xyXG4gICAgbGV0IGMgPSB0aGlzLl9kY1BhdGhbMF0udG9Mb3dlckNhc2UoKTtcclxuICAgIGxldCBzID0gdGhpcy5kY1NpdGU7XHJcbiAgICBsZXQgdmRfbGlzdCA9IHRoaXMuQWRVbml0X2RhdGEudmlld3M7XHJcbiAgICBjb25zdCBpbmRleF94ID0gXCJ0bWNcIiArIHM7XHJcbiAgICBjb25zdCBzeW5jID0gdGhpcy5yZWFkQ29va2llX2Z1bmMoXCJkY3N5bmNcIiArIHMpO1xyXG4gICAgY29uc3QgTGNvb2NraWUgPSB0aGlzLnJlYWRDb29raWVfZnVuYyhpbmRleF94KTtcclxuICAgIGxldCB2aWV3OyAvLyBPTEQgVkVSU0lPTiBPRiBWSUVXXHJcbiAgICB2YXIgY3VudF9pID0gXCJcIjtcclxuICAgIGlmICghc3luYyB8fCBMY29vY2tpZSA9PSBudWxsKSB7XHJcbiAgICAgIHRoaXMuY3JlYXRlQ29va2llX2Z1bmMoXCJkY3N5bmNcIiArIHMsIFwidHJ1ZVwiLCAzNjApO1xyXG4gICAgICBjdW50X2kgPSBcIlwiO1xyXG4gICAgICBpZiAoIXZkX2xpc3Rbc10pIHtcclxuICAgICAgICBzID0gXCJzdGFuZGFyZFwiO1xyXG4gICAgICB9XHJcbiAgICAgIGZvciAobGV0IGkgaW4gdmRfbGlzdFtzXSkgaSArIFwiXCI7XHJcbiAgICAgIGN1bnRfaSA9IGN1bnRfaSArIFwiMVwiO1xyXG4gICAgICB0aGlzLmNyZWF0ZUNvb2tpZV9mdW5jKGluZGV4X3gsIGN1bnRfaSwgMzYwKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGlmICghdmRfbGlzdFtzXSkge1xyXG4gICAgICAgIHMgPSBcInN0YW5kYXJkXCI7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKCF2ZF9saXN0W3NdW2NdKSB7XHJcbiAgICAgICAgYyA9IFwic3RhbmRhcmRcIjtcclxuICAgICAgfVxyXG4gICAgICB2aWV3ID0gdGhpcy5nZXRDb29raWUxX2Z1bmMoYywgaW5kZXhfeCk7XHJcbiAgICAgIGNvbnN0IHQgPSB2ZF9saXN0W3NdW2NdO1xyXG4gICAgICBpZiAodCkge1xyXG4gICAgICAgIHZpZXcgPSAodmlldyAlIHQpICsgMTtcclxuICAgICAgICBsZXQgc3RyID0gXCJ2aWV3MVwiO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAyOyBpIDw9IHZpZXc7IGkrKykge1xyXG4gICAgICAgICAgc3RyID0gc3RyICsgXCIsdmlld1wiICsgaTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHRoaXMud3JpdGVDb29raWUxX2Z1bmMoYywgdmlldywgMzYwLCBpbmRleF94KTtcclxuICAgIH1cclxuICB9XHJcbiAgdmlld0Nvb2NraWVzX2Z1bmMoKSB7XHJcbiAgICAvL3ZpZXdDb29ja2llc19mdW5jIGZ1bmN0aW9uIGdldCB0aGUgcGFnZSBkY1BhdGggYW5kIHJldHVybiBrZXkgZm9yIHRoZSBkY3ZpZXcgKGZyb20gbG9jYWxzdG9yYWdlIHRoZSB2YWx1ZSBvZiB2aWV3KVxyXG4gICAgLy9UaGUgZGNQYXRoIGhhdmUgNSB2YWx1ZXM6IGhvbWVfY2hhbm5lbCwgbmV3c19jaGFubmVsLCB3b21hbl9jaGFubmVsLCBtYW5fY2hhbm5lbCwgb3RoZXJfY2hhbm5lbFxyXG4gICAgLy8gaWYgKEluZnJhc3J1Y3R1cmVDbGFzc09iai5TaXRlID09ICdpc194bmV0Jykge1xyXG4gICAgLy8gXHRpZiAodGhpcy5kY2NnID09ICdob21lJykge1xyXG4gICAgLy8gXHRcdHZhciBjaGFubmVsID0gJ2hvbWVfY2hhbm5lbCc7XHJcbiAgICAvLyBcdH0gZWxzZSB7XHJcbiAgICAvLyBcdFx0dmFyIGNoYW5uZWwgPSAnbWFpbl9jaGFubmVsJztcclxuICAgIC8vIFx0fVxyXG4gICAgLy8gfVxyXG4gICAgaWYgKFxyXG4gICAgICBJbmZyYXNydWN0dXJlQ2xhc3NPYmouU2l0ZSA9PSBcImlzXzgwMFwiIHx8XHJcbiAgICAgIEluZnJhc3J1Y3R1cmVDbGFzc09iai5TaXRlID09IFwiaXNfeW5zX3ludlwiIHx8XHJcbiAgICAgIEluZnJhc3J1Y3R1cmVDbGFzc09iai5TaXRlID09IFwiaXNfeW5zXCIgfHxcclxuICAgICAgSW5mcmFzcnVjdHVyZUNsYXNzT2JqLlNpdGUgPT0gXCJpc195bmVzXCJcclxuICAgICkge1xyXG4gICAgICByZXR1cm4gdGhpcy5kY1BhdGg7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjb25zdCBjaGFubmVsX3BhdGggPSB0aGlzLmRjUGF0aDtcclxuICAgICAgY29uc3QgcGF0aF9hcnJheSA9IGNoYW5uZWxfcGF0aC5zcGxpdChcIi1cIik7XHJcbiAgICAgIGNvbnN0IG51bV9jaGFubmVsID0gcGF0aF9hcnJheVswXS5zdWJzdHIoMCwgcGF0aF9hcnJheVswXS5pbmRleE9mKFwiLlwiKSk7XHJcbiAgICAgIGlmICh0aGlzLmRjY2cgPT0gXCJob21lXCIgfHwgd2luZG93LmRjUGF0aCA9PSBcIjI3NzUuS25lc3NldC0zMjQ3Mi55dXZhbDEyODBcIikge1xyXG4gICAgICAgIHJldHVybiBcImhvbWVfY2hhbm5lbFwiO1xyXG4gICAgICB9IGVsc2UgaWYgKG51bV9jaGFubmVsID09IFwiMlwiKSB7XHJcbiAgICAgICAgcmV0dXJuIFwibmV3c19jaGFubmVsXCI7XHJcbiAgICAgIH0gZWxzZSBpZiAoXHJcbiAgICAgICAgbnVtX2NoYW5uZWwgPT0gXCI5NzVcIiB8fFxyXG4gICAgICAgIG51bV9jaGFubmVsID09IFwiMTIwOVwiIHx8XHJcbiAgICAgICAgbnVtX2NoYW5uZWwgPT0gXCIxMjA4XCIgfHxcclxuICAgICAgICBudW1fY2hhbm5lbCA9PSBcIjEwNjlcIiB8fFxyXG4gICAgICAgIG51bV9jaGFubmVsID09IFwiMzkyNVwiIHx8XHJcbiAgICAgICAgbnVtX2NoYW5uZWwgPT0gXCI1MzhcIiB8fFxyXG4gICAgICAgIG51bV9jaGFubmVsID09IFwiNTM2M1wiIHx8XHJcbiAgICAgICAgbnVtX2NoYW5uZWwgPT0gXCIxMTIxMVwiIHx8XHJcbiAgICAgICAgbnVtX2NoYW5uZWwgPT0gXCIzMDUyXCJcclxuICAgICAgKSB7XHJcbiAgICAgICAgcmV0dXJuIFwid29tYW5fY2hhbm5lbFwiO1xyXG4gICAgICB9IGVsc2UgaWYgKFxyXG4gICAgICAgIG51bV9jaGFubmVsID09IFwiNTUwXCIgfHxcclxuICAgICAgICBudW1fY2hhbm5lbCA9PSBcIjNcIiB8fFxyXG4gICAgICAgIG51bV9jaGFubmVsID09IFwiNTQ0XCIgfHxcclxuICAgICAgICBudW1fY2hhbm5lbCA9PSBcIjU5OFwiIHx8XHJcbiAgICAgICAgbnVtX2NoYW5uZWwgPT0gXCI2XCIgfHxcclxuICAgICAgICBudW1fY2hhbm5lbCA9PSBcIjQ4ODBcIlxyXG4gICAgICApIHtcclxuICAgICAgICByZXR1cm4gXCJtYW5fY2hhbm5lbFwiO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJldHVybiBcIm90aGVyX2NoYW5uZWxcIjtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxufSAvL2VuZCBjbGFzcyBDb29ja2llc0Z1bmN0aW9uQ2xhc3NcclxuZXhwb3J0IGRlZmF1bHQgbmV3IENvb2NraWVzRnVuY3Rpb25DbGFzcygpO1xyXG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7OztBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFEQTtBQUpBO0FBREE7QUFDQTtBQVVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQURBO0FBTEE7QUFEQTtBQUNBO0FBV0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBVkE7QUFZQTtBQUNBO0FBREE7QUFqQkE7QUFEQTtBQUNBO0FBc0JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVZBO0FBWUE7QUFDQTtBQURBO0FBakJBO0FBREE7QUFDQTtBQXVCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQTlCQTtBQWdDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFEQTtBQXJDQTtBQURBO0FBQ0E7QUEwQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUE5QkE7QUFnQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVZBO0FBWUE7QUFDQTtBQURBO0FBN0NBO0FBREE7QUF4SEE7QUE0S0E7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBV0E7QUFDQTtBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQUNBO0FBQ0E7QUFDQTtBQURBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./modules/CoockiesFunctionClass.js\n");

/***/ }),

/***/ "./modules/DfpParamClass.js":
/*!**********************************!*\
  !*** ./modules/DfpParamClass.js ***!
  \**********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/classCallCheck */ \"./node_modules/@babel/runtime/helpers/classCallCheck.js\");\n/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/createClass */ \"./node_modules/@babel/runtime/helpers/createClass.js\");\n/* harmony import */ var _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1__);\n\n\n\nvar DfpParamClass =\n/*#__PURE__*/\nfunction () {\n  function DfpParamClass() {\n    _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default()(this, DfpParamClass);\n\n    this.dcsch = \"null\";\n    this.dccg = this.dccg_func();\n  }\n\n  _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1___default()(DfpParamClass, [{\n    key: \"dccg_func\",\n    value: function dccg_func() {\n      return window.dcCG ? window.dcCG : \"standard\";\n    }\n  }]);\n\n  return DfpParamClass;\n}();\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (new DfpParamClass());//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9tb2R1bGVzL0RmcFBhcmFtQ2xhc3MuanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9tb2R1bGVzL0RmcFBhcmFtQ2xhc3MuanM/NDJjYiJdLCJzb3VyY2VzQ29udGVudCI6WyJjbGFzcyBEZnBQYXJhbUNsYXNzIHtcclxuICBjb25zdHJ1Y3RvcigpIHtcclxuICAgIHRoaXMuZGNzY2ggPSBcIm51bGxcIjtcclxuICAgIHRoaXMuZGNjZyA9IHRoaXMuZGNjZ19mdW5jKCk7XHJcbiAgfVxyXG5cclxuICBkY2NnX2Z1bmMoKSB7XHJcbiAgICByZXR1cm4gd2luZG93LmRjQ0cgPyB3aW5kb3cuZGNDRyA6IFwic3RhbmRhcmRcIjtcclxuICB9XHJcbn1cclxuZXhwb3J0IGRlZmF1bHQgbmV3IERmcFBhcmFtQ2xhc3MoKTtcclxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFBOzs7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBOzs7Ozs7QUFFQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./modules/DfpParamClass.js\n");

/***/ }),

/***/ "./modules/InfrastructureClass.js":
/*!****************************************!*\
  !*** ./modules/InfrastructureClass.js ***!
  \****************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/regenerator */ \"./node_modules/@babel/runtime/regenerator/index.js\");\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ \"./node_modules/@babel/runtime/helpers/asyncToGenerator.js\");\n/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/classCallCheck */ \"./node_modules/@babel/runtime/helpers/classCallCheck.js\");\n/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/createClass */ \"./node_modules/@babel/runtime/helpers/createClass.js\");\n/* harmony import */ var _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_3__);\n\n\n\n\nvar _window = window,\n    googletag = _window.googletag,\n    console = _window.console;\n\nvar InfrastructureClass =\n/*#__PURE__*/\nfunction () {\n  //InfrastructureClass contain global function , this.Site - create key to each page\n  function InfrastructureClass() {\n    _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_2___default()(this, InfrastructureClass);\n\n    this.Site;\n    this.adsElements = [];\n  }\n\n  _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_3___default()(InfrastructureClass, [{\n    key: \"Log\",\n    value: function Log(str) {\n      if (location.host.includes(\"local\") || location.host.includes(\"qa\")) {\n        console.log(str);\n      }\n    }\n  }, {\n    key: \"init\",\n    value: function () {\n      var _init = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()(\n      /*#__PURE__*/\n      _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee(callback) {\n        return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return this.findDivAds_func();\n\n              case 2:\n                if (callback != null && callback != undefined) {\n                  if (location.host != \"localhost:1234\") {\n                    try {\n                      callback();\n                    } catch (error) {\n                      console.warn(\"init infrastructur :\" + error);\n                    }\n                  } else {\n                    callback();\n                  }\n                }\n\n                console.log(\"after findDivAds_func\");\n\n              case 4:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function init(_x) {\n        return _init.apply(this, arguments);\n      }\n\n      return init;\n    }()\n  }, {\n    key: \"SlotRenderEnd\",\n    value: function SlotRenderEnd(callback) {\n      //handle all events after slot rendered\n      googletag.cmd.push(function () {\n        googletag.pubads().addEventListener(\"slotRenderEnded\", function (event) {\n          if (callback != null && callback != undefined) {\n            callback(event);\n          }\n        });\n      });\n    }\n  }, {\n    key: \"findDivAds_func\",\n    value: function findDivAds_func() {\n      var divResult = new Promise(function (resolove, reject) {\n        document.addEventListener(\"DOMContentLoaded\", function () {\n          var elems = document.querySelectorAll(\"div[id^=ads]\");\n\n          if (elems) {\n            resolove(elems);\n          } else {\n            reject(\"element not found\");\n          }\n        }, false);\n      });\n      return divResult.then(function (elems) {\n        console.log(\"findDivAds_func\");\n        this.adsElements = elems;\n      }.bind(this)).catch(function (err) {\n        console.log(err);\n      });\n    }\n  }, {\n    key: \"displayAds_func\",\n    value: function displayAds_func(callback) {\n      //callback = > set targeting .etc\n      window.googletag.pubads().enableSingleRequest();\n      window.googletag.enableServices();\n\n      if (callback != null && callback != undefined) {\n        try {\n          callback();\n        } catch (error) {\n          console.warn(\"DisplayAds : \".concat(error));\n        }\n      }\n    }\n  }, {\n    key: \"displayAdsRecursive_func\",\n    value: function displayAdsRecursive_func(callback) {\n      //callback = > set targeting .etc\n      if (googletag.pubads != undefined) {\n        window.googletag.pubads().enableSingleRequest();\n        window.googletag.enableServices();\n\n        if (callback != null && callback != undefined) {\n          try {\n            callback();\n          } catch (error) {\n            console.warn(\"DisplayAds : \".concat(error));\n          }\n        }\n      } else {\n        setTimeout(function () {\n          this.displayAdsRecursive_func(callback);\n        }.bind(this), 100);\n      }\n    }\n  }, {\n    key: \"onRender\",\n    value: function onRender(event, id) {\n      //onRender function remove the hight of the slot, it call a few times from all function of defineSlots it's get the event slotRenderEnded\n      if (document.getElementById(id) != undefined && document.getElementById(id) != null && document.getElementById(id) != \"null\") {\n        document.getElementById(id).style.height = \"\";\n      }\n    }\n  }]);\n\n  return InfrastructureClass;\n}(); //end class InfrastructureClass\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (new InfrastructureClass());//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9tb2R1bGVzL0luZnJhc3RydWN0dXJlQ2xhc3MuanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9tb2R1bGVzL0luZnJhc3RydWN0dXJlQ2xhc3MuanM/NmIzZCJdLCJzb3VyY2VzQ29udGVudCI6WyJsZXQgeyBnb29nbGV0YWcsIGNvbnNvbGUgfSA9IHdpbmRvdztcclxuY2xhc3MgSW5mcmFzdHJ1Y3R1cmVDbGFzcyB7XHJcbiAgLy9JbmZyYXN0cnVjdHVyZUNsYXNzIGNvbnRhaW4gZ2xvYmFsIGZ1bmN0aW9uICwgdGhpcy5TaXRlIC0gY3JlYXRlIGtleSB0byBlYWNoIHBhZ2VcclxuICBjb25zdHJ1Y3RvcigpIHtcclxuICAgIHRoaXMuU2l0ZTtcclxuICAgIHRoaXMuYWRzRWxlbWVudHMgPSBbXTtcclxuICB9XHJcbiAgTG9nKHN0cikge1xyXG4gICAgaWYgKGxvY2F0aW9uLmhvc3QuaW5jbHVkZXMoXCJsb2NhbFwiKSB8fCBsb2NhdGlvbi5ob3N0LmluY2x1ZGVzKFwicWFcIikpIHtcclxuICAgICAgY29uc29sZS5sb2coc3RyKTtcclxuICAgIH1cclxuICB9XHJcbiAgYXN5bmMgaW5pdChjYWxsYmFjaykge1xyXG4gICAgYXdhaXQgdGhpcy5maW5kRGl2QWRzX2Z1bmMoKTtcclxuICAgIGlmIChjYWxsYmFjayAhPSBudWxsICYmIGNhbGxiYWNrICE9IHVuZGVmaW5lZCkge1xyXG4gICAgICBpZiAobG9jYXRpb24uaG9zdCAhPSBcImxvY2FsaG9zdDoxMjM0XCIpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgY2FsbGJhY2soKTtcclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgY29uc29sZS53YXJuKFwiaW5pdCBpbmZyYXN0cnVjdHVyIDpcIiArIGVycm9yKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgY2FsbGJhY2soKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgY29uc29sZS5sb2coXCJhZnRlciBmaW5kRGl2QWRzX2Z1bmNcIik7XHJcbiAgfVxyXG4gIFNsb3RSZW5kZXJFbmQoY2FsbGJhY2spIHtcclxuICAgIC8vaGFuZGxlIGFsbCBldmVudHMgYWZ0ZXIgc2xvdCByZW5kZXJlZFxyXG4gICAgZ29vZ2xldGFnLmNtZC5wdXNoKGZ1bmN0aW9uKCkge1xyXG4gICAgICBnb29nbGV0YWcucHViYWRzKCkuYWRkRXZlbnRMaXN0ZW5lcihcInNsb3RSZW5kZXJFbmRlZFwiLCBmdW5jdGlvbihldmVudCkge1xyXG4gICAgICAgIGlmIChjYWxsYmFjayAhPSBudWxsICYmIGNhbGxiYWNrICE9IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgY2FsbGJhY2soZXZlbnQpO1xyXG4gICAgICAgIH0gXHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG4gIGZpbmREaXZBZHNfZnVuYygpIHtcclxuICAgIGxldCBkaXZSZXN1bHQgPSBuZXcgUHJvbWlzZSgocmVzb2xvdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFxyXG4gICAgICAgIFwiRE9NQ29udGVudExvYWRlZFwiLFxyXG4gICAgICAgIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgY29uc3QgZWxlbXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiZGl2W2lkXj1hZHNdXCIpO1xyXG4gICAgICAgICAgaWYgKGVsZW1zKSB7XHJcbiAgICAgICAgICAgIHJlc29sb3ZlKGVsZW1zKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJlamVjdChcImVsZW1lbnQgbm90IGZvdW5kXCIpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZmFsc2VcclxuICAgICAgKTtcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIGRpdlJlc3VsdFxyXG4gICAgICAudGhlbihcclxuICAgICAgICBmdW5jdGlvbihlbGVtcykge1xyXG4gICAgICAgICAgY29uc29sZS5sb2coXCJmaW5kRGl2QWRzX2Z1bmNcIik7XHJcbiAgICAgICAgICB0aGlzLmFkc0VsZW1lbnRzID0gZWxlbXM7XHJcbiAgICAgICAgfS5iaW5kKHRoaXMpXHJcbiAgICAgIClcclxuICAgICAgLmNhdGNoKGVyciA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coZXJyKTtcclxuICAgICAgfSk7XHJcbiAgfVxyXG5cclxuICBkaXNwbGF5QWRzX2Z1bmMoY2FsbGJhY2spIHtcclxuICAgIC8vY2FsbGJhY2sgPSA+IHNldCB0YXJnZXRpbmcgLmV0Y1xyXG4gICAgd2luZG93Lmdvb2dsZXRhZy5wdWJhZHMoKS5lbmFibGVTaW5nbGVSZXF1ZXN0KCk7XHJcbiAgICB3aW5kb3cuZ29vZ2xldGFnLmVuYWJsZVNlcnZpY2VzKCk7XHJcbiAgICBpZiAoY2FsbGJhY2sgIT0gbnVsbCAmJiBjYWxsYmFjayAhPSB1bmRlZmluZWQpIHtcclxuICAgICAgdHJ5IHtcclxuICAgICAgICBjYWxsYmFjaygpO1xyXG4gICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUud2FybihgRGlzcGxheUFkcyA6ICR7ZXJyb3J9YCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIGRpc3BsYXlBZHNSZWN1cnNpdmVfZnVuYyhjYWxsYmFjaykge1xyXG4gICAgLy9jYWxsYmFjayA9ID4gc2V0IHRhcmdldGluZyAuZXRjXHJcbiAgICBpZiAoZ29vZ2xldGFnLnB1YmFkcyAhPSB1bmRlZmluZWQpIHtcclxuICAgICAgd2luZG93Lmdvb2dsZXRhZy5wdWJhZHMoKS5lbmFibGVTaW5nbGVSZXF1ZXN0KCk7XHJcbiAgICAgIHdpbmRvdy5nb29nbGV0YWcuZW5hYmxlU2VydmljZXMoKTtcclxuICAgICAgaWYgKGNhbGxiYWNrICE9IG51bGwgJiYgY2FsbGJhY2sgIT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgIGNhbGxiYWNrKCk7XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgIGNvbnNvbGUud2FybihgRGlzcGxheUFkcyA6ICR7ZXJyb3J9YCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBzZXRUaW1lb3V0KFxyXG4gICAgICAgIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgdGhpcy5kaXNwbGF5QWRzUmVjdXJzaXZlX2Z1bmMoY2FsbGJhY2spO1xyXG4gICAgICAgIH0uYmluZCh0aGlzKSxcclxuICAgICAgICAxMDBcclxuICAgICAgKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIG9uUmVuZGVyKGV2ZW50LCBpZCkge1xyXG4gICAgLy9vblJlbmRlciBmdW5jdGlvbiByZW1vdmUgdGhlIGhpZ2h0IG9mIHRoZSBzbG90LCBpdCBjYWxsIGEgZmV3IHRpbWVzIGZyb20gYWxsIGZ1bmN0aW9uIG9mIGRlZmluZVNsb3RzIGl0J3MgZ2V0IHRoZSBldmVudCBzbG90UmVuZGVyRW5kZWRcclxuICAgIGlmIChcclxuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpICE9IHVuZGVmaW5lZCAmJlxyXG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCkgIT0gbnVsbCAmJlxyXG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCkgIT0gXCJudWxsXCJcclxuICAgICkge1xyXG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCkuc3R5bGUuaGVpZ2h0ID0gXCJcIjtcclxuICAgIH1cclxuICB9XHJcbn0gLy9lbmQgY2xhc3MgSW5mcmFzdHJ1Y3R1cmVDbGFzc1xyXG5leHBvcnQgZGVmYXVsdCBuZXcgSW5mcmFzdHJ1Y3R1cmVDbGFzcygpO1xyXG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBOzs7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBOzs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7QUFDQTs7Ozs7O0FBQ0E7QUFDQTs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFHQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7Ozs7QUFDQTtBQUNBO0FBQ0E7QUFEQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./modules/InfrastructureClass.js\n");

/***/ }),

/***/ "./modules/MainFanctionClass.js":
/*!**************************************!*\
  !*** ./modules/MainFanctionClass.js ***!
  \**************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/classCallCheck */ \"./node_modules/@babel/runtime/helpers/classCallCheck.js\");\n/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/createClass */ \"./node_modules/@babel/runtime/helpers/createClass.js\");\n/* harmony import */ var _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _AdUnitFunctionsClass__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./AdUnitFunctionsClass */ \"./modules/AdUnitFunctionsClass.js\");\n/* harmony import */ var _AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./AdUnitPropertiesClass */ \"./modules/AdUnitPropertiesClass.js\");\n/* harmony import */ var _AdUnitStylesClass__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./AdUnitStylesClass */ \"./modules/AdUnitStylesClass.js\");\n/* harmony import */ var _DfpParamClass__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./DfpParamClass */ \"./modules/DfpParamClass.js\");\n/* harmony import */ var _InfrastructureClass__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./InfrastructureClass */ \"./modules/InfrastructureClass.js\");\n\n\n\n\n\n\n\nvar Log = _InfrastructureClass__WEBPACK_IMPORTED_MODULE_6__[\"default\"].Log;\nvar _window = window,\n    googletag = _window.googletag,\n    Templates = _window.Templates;\n\nvar MainFanctionClass =\n/*#__PURE__*/\nfunction () {\n  function MainFanctionClass() {\n    _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default()(this, MainFanctionClass);\n\n    this.innerWidth = window.innerWidth;\n    this.Dfp_refresh_adTimeXnet = 7 * 60 * 1000;\n  }\n\n  _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1___default()(MainFanctionClass, [{\n    key: \"makePbjsQue_func\",\n    value: function makePbjsQue_func() {\n      var a = document.createElement(\"script\");\n      a.type = \"text/javascript\";\n      a.async = !0;\n      a.src = \"//live.sekindo.com/content/prebid/prebid.0.19.js\";\n      var b = document.getElementsByTagName(\"head\")[0];\n      b.insertBefore(a, b.firstChild);\n    }\n  }, {\n    key: \"getStyleTop_func\",\n    value: function getStyleTop_func(event) {\n      Log(\"getStyleTop_func\");\n      var event_size = event.size + \"\";\n      var event_w = event_size.split(\",\");\n\n      if (event.size == \"970,90\") {\n        var top_temp = document.getElementById(\"ads.top\");\n        top_temp.style.cssText = \"height: 90px;padding: 5px; background-color: rgb(233, 233, 233); box-sizing: border-box; margin: 0 auto; width: 980px;min-height: auto !important;clear:both;height: 90px !important;\";\n      } else {\n        var width_top = event_w[0] == \"1\" || event_size == \"fluid\" ? document.getElementById(\"ads.top\").offsetWidth : parseInt(event_w[0], 10);\n        document.getElementById(\"ads.top\").setAttribute(\"style\", \"clear: both; min-height: auto !important; text-align:center; padding: 0 !important; width: \" + parseInt(width_top + 10) + \"px !important;\" + \"margin: 0px auto; border: 5px solid rgb(233, 233, 233); box-sizing: border-box;\");\n      }\n    }\n  }, {\n    key: \"videoOff_func\",\n    value: function videoOff_func() {\n      Log(\"videoOff_func\");\n      var video_data = \"\";\n      var video_on = document.getElementsByClassName(\"video-container-flp6\");\n\n      for (var i = 0; i < video_on.length; i++) {\n        var iframe_video = video_on[i].children[0];\n\n        var _video_data = iframe_video.getAttribute(\"data-myurl\");\n\n        iframe_video.src = _video_data;\n      }\n\n      return video_data;\n    } // end of videoOff_func\n\n  }, {\n    key: \"refreshAllXnet_func\",\n    value: function refreshAllXnet_func() {\n      Log(\"refreshAllXnet_func\");\n\n      try {\n        Templates.CloseCreatives();\n      } catch (ex) {\n        Log(\"Templates.CloseCreatives:\" + ex);\n      }\n\n      googletag.cmd.push(function () {\n        googletag.destroySlots();\n        googletag.enableServices();\n      });\n      _AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_3__[\"default\"].Define_slots = [];\n      _AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_3__[\"default\"].Define_ozen = [];\n      _AdUnitFunctionsClass__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getKeyValues_func();\n      _AdUnitFunctionsClass__WEBPACK_IMPORTED_MODULE_2__[\"default\"].defineUnitsXnet_func(); //in this script the display happen only one time for all gpt in ynet\n\n      _InfrastructureClass__WEBPACK_IMPORTED_MODULE_6__[\"default\"].displayAdsRecursive_func(function () {\n        googletag.cmd.push(function () {\n          googletag.display(\"ads.top\");\n        });\n      });\n      setTimeout(this.refreshAllXnet_func, this.Dfp_refresh_adTimeXnet);\n    } //end refreshAllXnet_func\n\n  }, {\n    key: \"refreshAll800_func\",\n    value: function refreshAll800_func() {\n      Log(\"refreshAll800_func\");\n      var that = this;\n      var jsonObj_dict = _AdUnitFunctionsClass__WEBPACK_IMPORTED_MODULE_2__[\"default\"].jsonObj;\n      _AdUnitFunctionsClass__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getKeyValues_func();\n      googletag.cmd.push(function () {\n        for (var _i = 0, _Object$keys = Object.keys(jsonObj_dict); _i < _Object$keys.length; _i++) {\n          var key = _Object$keys[_i];\n          googletag.pubads().setTargeting(key, jsonObj_dict[key]);\n        }\n\n        _AdUnitFunctionsClass__WEBPACK_IMPORTED_MODULE_2__[\"default\"].setTargeting_function(_DfpParamClass__WEBPACK_IMPORTED_MODULE_5__[\"default\"]);\n        googletag.pubads().refresh(); //googletag.pubads().enableSingleRequest();\n\n        googletag.enableServices();\n      });\n      setTimeout(that.refreshAll800_func, _AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_3__[\"default\"].refreshAdTime_func());\n    }\n  }, {\n    key: \"refreshInreads_func\",\n    value: function refreshInreads_func() {\n      googletag.cmd.push(function () {\n        for (var i = 1; i <= window.inreads; i++) {\n          googletag.pubads().refresh([window.AdUnitPropertiesClassobj.Define_slots[\"ads.inread.\" + i]]);\n          googletag.enableServices();\n          var get_banner = document.getElementById(\"ads.inread.\" + i).children[0].children[0];\n          var get_height = get_banner ? get_banner.clientHeight : 0;\n          var before_div = get_banner.closest(\".articleBodyInreadWrapper\");\n\n          if (get_height > 0) {\n            before_div.setAttribute(\"style\", \"min-height: \" + get_height + \"px; height:  \" + get_height + \"px; transition: min-height 0.1s\");\n          } else {\n            before_div.setAttribute(\"style\", \"min-height: 0; height: 0; transition: min-height 0.5s\");\n          } // InfrasructureClassObj.SlotRenderEnd(function(event) {\n          //   let BoxLoaded = false;\n          //     if (event.slot == AdUnitPropertiesClassObj.Define_slots[\"ads.inread.\" + i]) {\n          //       if (!BoxLoaded) { \n          //         let banner_ = document.getElementById(\"ads.inread.\" + i);      \n          //         let closest_div = banner_.closest(\".articleBodyInreadWrapper\");     \n          //         if(!event.isEmpty) {     \n          //             let event_size = event.size + \"\";\n          //             let event_h = event_size.split(\",\");            \n          //             closest_div.setAttribute(\"style\", \"min-height: \" + event_h[1] + \"px ; transition: min-height 0.5s;\"); \n          //             console.log(\"min height \", event_h[1]);\n          //           } else {\n          //             closest_div.setAttribute(\"style\", \"min-height: 0; height: 0; transition: min-height 0.5s\");    \n          //           }                                           \n          //           BoxLoaded=true;\n          //       }    \n          //     }\n          //   });        \n\n        }\n      }); //console.log(\"before check !!!!!\");\n      // setTimeout(function() { \n      // let all_banners = document.querySelectorAll(\"[id^='ads.inread']\");\n      // if (all_banners.length >= 1) {\n      //   for (let i = 1; i <= all_banners.length; i++) {\n      //     let get_banner = document.getElementById(\"ads.inread.\" + i).children[0].children[0];\n      //     let get_height = (get_banner) ?  get_banner.clientHeight : 0;\n      //     if (get_height > 0) {\n      //       console.log(\"height \", get_height);\n      //       let before_div = get_banner.closest(\".articleBodyInreadWrapper\");   \n      //       before_div.setAttribute(\"style\", \"min-height: \" + get_height + \"px; height:  \" + get_height + \"px; transition: min-height 0.1s\"); \n      //       console.log(\"new height \", get_height);    \n      //     }\n      //   }\n      // }\n      // }, 100);\n\n      setTimeout(window.refresh_inreads, window.articleBodyAdsRefreshRate * 1000);\n    }\n  }, {\n    key: \"refreshAll_func\",\n    value: function refreshAll_func() {\n      Log(\"refreshAll_func\");\n\n      if (_AdUnitFunctionsClass__WEBPACK_IMPORTED_MODULE_2__[\"default\"].browsi_on_gpt == \"True\" && _AdUnitFunctionsClass__WEBPACK_IMPORTED_MODULE_2__[\"default\"].browsi_on_gpt != undefined) {\n        var new_view = \"view\";\n\n        try {\n          window.Templates.CloseCreatives();\n          window.Templates.InboaredVideo.close();\n        } catch (ex) {\n          Log(\"Templates.CloseCreatives:\" + ex);\n        } //let refresh_all = AdUnitPropertiesClassObj.Define_slots;\n\n\n        if (_AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_3__[\"default\"].DCview != undefined) {\n          if (_AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_3__[\"default\"].DCview <= 5) {\n            _AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_3__[\"default\"].DCview = _AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_3__[\"default\"].DCview + 1;\n          } else {\n            _AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_3__[\"default\"].DCview = \"\";\n          }\n        }\n\n        new_view = new_view + _AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_3__[\"default\"].DCview;\n        localStorage._view = _AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_3__[\"default\"].DCview;\n        googletag.cmd.push(function () {\n          googletag.pubads().setTargeting(\"dcunigpt\", new_view);\n          googletag.pubads().updateCorrelator();\n          googletag.pubads().refresh();\n          googletag.pubads().enableSingleRequest();\n          googletag.enableServices();\n        });\n        var TopLoaded = false;\n        _InfrastructureClass__WEBPACK_IMPORTED_MODULE_6__[\"default\"].SlotRenderEnd(function (event) {\n          if (event.slot == _AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_3__[\"default\"].Define_slots[\"ads.top\"]) {\n            if (!TopLoaded) {\n              if (!event.isEmpty) {\n                var event_size = event.size + \"\";\n                var event_w = event_size.split(\",\");\n\n                if (event_w[0] == \"1192\") {\n                  document.getElementById(\"ads.top\").setAttribute(\"style\", \"background-color: rgb(233, 233, 233); clear: both; min-height: auto !important; text-align:center; padding: 0; width: 1202px; margin: 0px auto; border: 5px solid rgb(233, 233, 233); box-sizing: border-box;\");\n                } else {\n                  var width_top = event_w[0] == \"1\" || event_size == \"fluid\" ? document.getElementById(\"ads.top\").offsetWidth : parseInt(event_w[0], 10);\n\n                  if (document.getElementById(\"yboximg\")) {\n                    width_top = document.getElementById(\"yboximg\").offsetWidth;\n                  }\n\n                  document.getElementById(\"ads.top\").setAttribute(\"style\", \"clear: both; min-height: auto !important; text-align:center; padding: 0 !important; width: \" + parseInt(width_top + 10) + \"px !important;\" + \"margin: 0px auto; border: 5px solid rgb(233, 233, 233); box-sizing: border-box;\");\n                }\n              }\n\n              TopLoaded = true;\n            }\n          }\n        });\n      } else {\n        try {\n          window.Templates.CloseCreatives();\n        } catch (ex) {\n          Log(\"Templates.CloseCreatives:\" + ex);\n        }\n\n        if (window.dcPath.includes(\"3456.Magazine\")) {\n          if (document.getElementById(\"ads.strip.marketing.1\") != undefined) {\n            document.getElementById(\"ads.strip.marketing.1\").remove();\n          }\n\n          if (document.getElementById(\"ads.strip.marketing.2\") != undefined) {\n            document.getElementById(\"ads.strip.marketing.2\").remove();\n          }\n\n          if (document.getElementById(\"ads.strip.marketing.3\") != undefined) {\n            document.getElementById(\"ads.strip.marketing.3\").remove();\n          }\n        }\n\n        googletag.cmd.push(function () {\n          googletag.destroySlots();\n          googletag.enableServices();\n        });\n        _AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_3__[\"default\"].Define_slots = [];\n        _AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_3__[\"default\"].Define_mivzakon = [];\n        _AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_3__[\"default\"].Define_ozen = [];\n        _AdUnitFunctionsClass__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getKeyValues_func();\n        _AdUnitFunctionsClass__WEBPACK_IMPORTED_MODULE_2__[\"default\"].defineUnits_func(); //in this script the display happen only one time for all gpt in ynet\n\n        _InfrastructureClass__WEBPACK_IMPORTED_MODULE_6__[\"default\"].displayAdsRecursive_func(function () {\n          googletag.cmd.push(function () {\n            googletag.display(\"ads.top\");\n          });\n        });\n      }\n\n      setTimeout(this.refreshAll_func, _AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_3__[\"default\"].refreshAdTime_func());\n    }\n  }, {\n    key: \"refreshOzen_func\",\n    value: function refreshOzen_func() {\n      var that = this;\n      Log(\"refreshOzen_func\");\n      var ozen = window.dcSite == \"ynt\" ? _AdUnitFunctionsClass__WEBPACK_IMPORTED_MODULE_2__[\"default\"].Ozen_right : \"ads.ozen.right\";\n      googletag.cmd.push(function () {\n        googletag.pubads().refresh([_AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_3__[\"default\"].Define_slots[ozen]]); //googletag.pubads().enableSingleRequest();\n\n        googletag.enableServices();\n      });\n      setTimeout(that.refreshOzen_func, _AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_3__[\"default\"].refreshAdOzen);\n    }\n  }, {\n    key: \"refreshSticky_func\",\n    value: function refreshSticky_func() {\n      var that = this;\n      Log(\"refreshSticky_func\");\n      googletag.cmd.push(function () {\n        googletag.pubads().refresh([_AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_3__[\"default\"].Define_slots[_AdUnitFunctionsClass__WEBPACK_IMPORTED_MODULE_2__[\"default\"].sticky]]); //googletag.pubads().enableSingleRequest();\n\n        googletag.enableServices();\n      });\n      setTimeout(that.refreshSticky_func, _AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_3__[\"default\"].refreshSticky);\n    }\n  }, {\n    key: \"talkHaedPassBack_func\",\n    value: function talkHaedPassBack_func() {\n      Log(\"talkHaedPassBack_func\");\n      var element = document.getElementById(\"ads.spot.17\");\n      var ca = element.children;\n\n      for (var i = 0; i < ca.length; i++) {\n        ca[i].parentNode.removeChild(ca[i]);\n      }\n\n      element.id = \"ads.spot.1\";\n      _AdUnitFunctionsClass__WEBPACK_IMPORTED_MODULE_2__[\"default\"].findAllDiv_func();\n      setTimeout(this.talkHaedPassBackgo_func(), 2500);\n    }\n  }, {\n    key: \"talkHaedPassBackgo_func\",\n    value: function talkHaedPassBackgo_func() {\n      Log(\"talkHaedPassBackgo_func\");\n      _AdUnitFunctionsClass__WEBPACK_IMPORTED_MODULE_2__[\"default\"].DefineSlots(\"ads.spot.1\", [300, 250], [\"ynta\", \"1\"]);\n      googletag.cmd.push(function () {\n        googletag.display(\"ads.spot.1\");\n      });\n    }\n  }, {\n    key: \"RenameStickyBlazer\",\n    value: function RenameStickyBlazer() {\n      var sticky_slot = \"ads.banner\";\n\n      if (window.newMedia == \"False\") {\n        if (window.dcPath.includes(\"Weather\") || window.dcPath.includes(\"weather\")) {\n          sticky_slot = _AdUnitFunctionsClass__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getDevice_func() == \"Android\" ? \"ads.ynet_mobileweb_banners_android_weather_sticky\" : \"ads.ynet_mobileweb_banners_iphone_weather_sticky\";\n        } else {\n          sticky_slot = _AdUnitFunctionsClass__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getDevice_func() == \"Android\" ? \"ads.ynet_mobileweb_banners_android_magazine_sticky\" : \"ads.ynet_mobileweb_banners_iphone_magazine_sticky\";\n        }\n      }\n\n      var element = document.getElementById(\"ads.sticky\");\n      var ca = element.children;\n\n      for (var i = 0; i < ca.length; i++) {\n        ca[i].parentNode.removeChild(ca[i]);\n      }\n\n      element.id = sticky_slot;\n      element.setAttribute(\"style\", \"position:fixed;bottom:0px;left:0px;display:flex;justify-content:center;display:-webkit-box;-webkit-box-pack:center;display:-ms-flexbox;-ms-flex-pack:center;text-align:center;width:100%;z-index:9999;margin:0 auto;background-color:#fff\");\n\n      if (element.classList.contains(\"remove_sticky\")) {\n        element.classList.remove('remove_sticky');\n      }\n\n      _AdUnitFunctionsClass__WEBPACK_IMPORTED_MODULE_2__[\"default\"].findAllDiv_func();\n      var MaaavaronSticky = _AdUnitFunctionsClass__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getUrlVars_func(\"IsApp\") == \"true\" && !window.dcPath.includes(\"PnaiPlus\") ? 1 : 0;\n      if (MaaavaronSticky == 0) setTimeout(this.DefineStickyBlazer_func(sticky_slot), 1500);\n    }\n  }, {\n    key: \"DefineStickyBlazer_func\",\n    value: function DefineStickyBlazer_func(id) {\n      Log(\"DefineStickyBlazer_func\");\n      _AdUnitFunctionsClass__WEBPACK_IMPORTED_MODULE_2__[\"default\"].defineSlots_func(id, [[320, 50], [360, 50]]);\n      googletag.cmd.push(function () {\n        googletag.display(id);\n      });\n      _AdUnitStylesClass__WEBPACK_IMPORTED_MODULE_4__[\"default\"][\"ads.sticky\"](\"ads.sticky\");\n    }\n  }]);\n\n  return MainFanctionClass;\n}(); // end class MainFanctionClass\n\n\nvar _MainFanctionClass = new MainFanctionClass();\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (_MainFanctionClass);\nwindow.video_off = _MainFanctionClass.videoOff_func.bind(_MainFanctionClass);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9tb2R1bGVzL01haW5GYW5jdGlvbkNsYXNzLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbW9kdWxlcy9NYWluRmFuY3Rpb25DbGFzcy5qcz9mMzU2Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBBZFVuaXRGdW5jdGlvbnNDbGFzc09iaiBmcm9tIFwiLi9BZFVuaXRGdW5jdGlvbnNDbGFzc1wiO1xyXG5pbXBvcnQgQWRVbml0UHJvcGVydGllc0NsYXNzT2JqIGZyb20gXCIuL0FkVW5pdFByb3BlcnRpZXNDbGFzc1wiO1xyXG5pbXBvcnQgYWRVbml0U3R5bGVzQ2xhc3NPYmogZnJvbSBcIi4vQWRVbml0U3R5bGVzQ2xhc3NcIjtcclxuaW1wb3J0IERmcFBhcmFtQ2xhc3NPYmogZnJvbSBcIi4vRGZwUGFyYW1DbGFzc1wiO1xyXG5pbXBvcnQgSW5mcmFzcnVjdHVyZUNsYXNzT2JqIGZyb20gXCIuL0luZnJhc3RydWN0dXJlQ2xhc3NcIjtcclxuY29uc3QgeyBMb2cgfSA9IEluZnJhc3J1Y3R1cmVDbGFzc09iajtcclxuXHJcbmxldCB7IGdvb2dsZXRhZywgVGVtcGxhdGVzIH0gPSB3aW5kb3c7XHJcblxyXG5jbGFzcyBNYWluRmFuY3Rpb25DbGFzcyB7XHJcbiAgY29uc3RydWN0b3IoKSB7XHJcbiAgICB0aGlzLmlubmVyV2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aDtcclxuICAgIHRoaXMuRGZwX3JlZnJlc2hfYWRUaW1lWG5ldCA9IDcgKiA2MCAqIDEwMDA7XHJcbiAgfVxyXG4gIG1ha2VQYmpzUXVlX2Z1bmMoKSB7XHJcbiAgICBsZXQgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzY3JpcHRcIik7XHJcbiAgICBhLnR5cGUgPSBcInRleHQvamF2YXNjcmlwdFwiO1xyXG4gICAgYS5hc3luYyA9ICEwO1xyXG4gICAgYS5zcmMgPSBcIi8vbGl2ZS5zZWtpbmRvLmNvbS9jb250ZW50L3ByZWJpZC9wcmViaWQuMC4xOS5qc1wiO1xyXG4gICAgbGV0IGIgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImhlYWRcIilbMF07XHJcbiAgICBiLmluc2VydEJlZm9yZShhLCBiLmZpcnN0Q2hpbGQpO1xyXG4gIH1cclxuICBnZXRTdHlsZVRvcF9mdW5jKGV2ZW50KSB7XHJcbiAgICBMb2coXCJnZXRTdHlsZVRvcF9mdW5jXCIpO1xyXG4gICAgbGV0IGV2ZW50X3NpemUgPSBldmVudC5zaXplICsgXCJcIjtcclxuICAgIGxldCBldmVudF93ID0gZXZlbnRfc2l6ZS5zcGxpdChcIixcIik7ICAgICAgIFxyXG4gICAgaWYgKGV2ZW50LnNpemUgPT0gXCI5NzAsOTBcIikge1xyXG4gICAgICBjb25zdCB0b3BfdGVtcCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYWRzLnRvcFwiKTtcclxuICAgICAgdG9wX3RlbXAuc3R5bGUuY3NzVGV4dCA9XHJcbiAgICAgICAgXCJoZWlnaHQ6IDkwcHg7cGFkZGluZzogNXB4OyBiYWNrZ3JvdW5kLWNvbG9yOiByZ2IoMjMzLCAyMzMsIDIzMyk7IGJveC1zaXppbmc6IGJvcmRlci1ib3g7IG1hcmdpbjogMCBhdXRvOyB3aWR0aDogOTgwcHg7bWluLWhlaWdodDogYXV0byAhaW1wb3J0YW50O2NsZWFyOmJvdGg7aGVpZ2h0OiA5MHB4ICFpbXBvcnRhbnQ7XCI7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBsZXQgd2lkdGhfdG9wID0gKGV2ZW50X3dbMF0gPT0gXCIxXCIgfHwgZXZlbnRfc2l6ZSA9PSBcImZsdWlkXCIpID8gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhZHMudG9wXCIpLm9mZnNldFdpZHRoIDogcGFyc2VJbnQoZXZlbnRfd1swXSwgMTApOyBcclxuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhZHMudG9wXCIpLnNldEF0dHJpYnV0ZShcInN0eWxlXCIsIFwiY2xlYXI6IGJvdGg7IG1pbi1oZWlnaHQ6IGF1dG8gIWltcG9ydGFudDsgdGV4dC1hbGlnbjpjZW50ZXI7IHBhZGRpbmc6IDAgIWltcG9ydGFudDsgd2lkdGg6IFwiICsgcGFyc2VJbnQod2lkdGhfdG9wKzEwKSArIFwicHggIWltcG9ydGFudDtcIiArIFwibWFyZ2luOiAwcHggYXV0bzsgYm9yZGVyOiA1cHggc29saWQgcmdiKDIzMywgMjMzLCAyMzMpOyBib3gtc2l6aW5nOiBib3JkZXItYm94O1wiKTtcclxuICAgIH1cclxuICB9XHJcbiAgdmlkZW9PZmZfZnVuYygpIHtcclxuICAgIExvZyhcInZpZGVvT2ZmX2Z1bmNcIik7XHJcbiAgICBjb25zdCB2aWRlb19kYXRhID0gXCJcIjtcclxuICAgIGxldCB2aWRlb19vbiA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJ2aWRlby1jb250YWluZXItZmxwNlwiKTtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdmlkZW9fb24ubGVuZ3RoOyBpKyspIHtcclxuICAgICAgbGV0IGlmcmFtZV92aWRlbyA9IHZpZGVvX29uW2ldLmNoaWxkcmVuWzBdO1xyXG4gICAgICBjb25zdCB2aWRlb19kYXRhID0gaWZyYW1lX3ZpZGVvLmdldEF0dHJpYnV0ZShcImRhdGEtbXl1cmxcIik7XHJcbiAgICAgIGlmcmFtZV92aWRlby5zcmMgPSB2aWRlb19kYXRhO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHZpZGVvX2RhdGE7XHJcbiAgfSAvLyBlbmQgb2YgdmlkZW9PZmZfZnVuY1xyXG4gIHJlZnJlc2hBbGxYbmV0X2Z1bmMoKSB7XHJcbiAgICBMb2coXCJyZWZyZXNoQWxsWG5ldF9mdW5jXCIpO1xyXG4gICAgdHJ5IHtcclxuICAgICAgVGVtcGxhdGVzLkNsb3NlQ3JlYXRpdmVzKCk7XHJcbiAgICB9IGNhdGNoIChleCkge1xyXG4gICAgICBMb2coXCJUZW1wbGF0ZXMuQ2xvc2VDcmVhdGl2ZXM6XCIgKyBleCk7XHJcbiAgICB9XHJcbiAgICBnb29nbGV0YWcuY21kLnB1c2goZnVuY3Rpb24oKSB7XHJcbiAgICAgIGdvb2dsZXRhZy5kZXN0cm95U2xvdHMoKTtcclxuICAgICAgZ29vZ2xldGFnLmVuYWJsZVNlcnZpY2VzKCk7XHJcbiAgICB9KTtcclxuICAgIEFkVW5pdFByb3BlcnRpZXNDbGFzc09iai5EZWZpbmVfc2xvdHMgPSBbXTtcclxuICAgIEFkVW5pdFByb3BlcnRpZXNDbGFzc09iai5EZWZpbmVfb3plbiA9IFtdO1xyXG5cclxuICAgIEFkVW5pdEZ1bmN0aW9uc0NsYXNzT2JqLmdldEtleVZhbHVlc19mdW5jKCk7XHJcbiAgICBBZFVuaXRGdW5jdGlvbnNDbGFzc09iai5kZWZpbmVVbml0c1huZXRfZnVuYygpO1xyXG4gICAgLy9pbiB0aGlzIHNjcmlwdCB0aGUgZGlzcGxheSBoYXBwZW4gb25seSBvbmUgdGltZSBmb3IgYWxsIGdwdCBpbiB5bmV0XHJcbiAgICBJbmZyYXNydWN0dXJlQ2xhc3NPYmouZGlzcGxheUFkc1JlY3Vyc2l2ZV9mdW5jKGZ1bmN0aW9uKCkge1xyXG4gICAgICBnb29nbGV0YWcuY21kLnB1c2goZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgZ29vZ2xldGFnLmRpc3BsYXkoXCJhZHMudG9wXCIpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIHNldFRpbWVvdXQodGhpcy5yZWZyZXNoQWxsWG5ldF9mdW5jLCB0aGlzLkRmcF9yZWZyZXNoX2FkVGltZVhuZXQpO1xyXG4gIH0gLy9lbmQgcmVmcmVzaEFsbFhuZXRfZnVuY1xyXG4gIHJlZnJlc2hBbGw4MDBfZnVuYygpIHtcclxuICAgIExvZyhcInJlZnJlc2hBbGw4MDBfZnVuY1wiKTtcclxuICAgIGxldCB0aGF0ID0gdGhpcztcclxuICAgIGxldCBqc29uT2JqX2RpY3QgPSBBZFVuaXRGdW5jdGlvbnNDbGFzc09iai5qc29uT2JqO1xyXG4gICAgQWRVbml0RnVuY3Rpb25zQ2xhc3NPYmouZ2V0S2V5VmFsdWVzX2Z1bmMoKTtcclxuICAgIGdvb2dsZXRhZy5jbWQucHVzaChmdW5jdGlvbigpIHtcclxuICAgICAgZm9yIChsZXQga2V5IG9mIE9iamVjdC5rZXlzKGpzb25PYmpfZGljdCkpIHtcclxuICAgICAgICBnb29nbGV0YWcucHViYWRzKCkuc2V0VGFyZ2V0aW5nKGtleSwganNvbk9ial9kaWN0W2tleV0pO1xyXG4gICAgICB9XHJcbiAgICAgIEFkVW5pdEZ1bmN0aW9uc0NsYXNzT2JqLnNldFRhcmdldGluZ19mdW5jdGlvbihEZnBQYXJhbUNsYXNzT2JqKTtcclxuICAgICAgZ29vZ2xldGFnLnB1YmFkcygpLnJlZnJlc2goKTtcclxuICAgICAgLy9nb29nbGV0YWcucHViYWRzKCkuZW5hYmxlU2luZ2xlUmVxdWVzdCgpO1xyXG4gICAgICBnb29nbGV0YWcuZW5hYmxlU2VydmljZXMoKTtcclxuICAgIH0pO1xyXG4gICAgc2V0VGltZW91dChcclxuICAgICAgdGhhdC5yZWZyZXNoQWxsODAwX2Z1bmMsXHJcbiAgICAgIEFkVW5pdFByb3BlcnRpZXNDbGFzc09iai5yZWZyZXNoQWRUaW1lX2Z1bmMoKVxyXG4gICAgKTtcclxuICB9XHJcbiAgcmVmcmVzaElucmVhZHNfZnVuYygpIHtcclxuICAgICBnb29nbGV0YWcuY21kLnB1c2goZnVuY3Rpb24oKSB7XHJcbiAgICAgZm9yIChsZXQgaSA9IDE7IGkgPD0gd2luZG93LmlucmVhZHM7IGkrKykgeyBcclxuICAgICAgICAgIGdvb2dsZXRhZy5wdWJhZHMoKS5yZWZyZXNoKFt3aW5kb3cuQWRVbml0UHJvcGVydGllc0NsYXNzb2JqLkRlZmluZV9zbG90c1tcImFkcy5pbnJlYWQuXCIgKyBpXV0pO1xyXG4gICAgICAgICAgZ29vZ2xldGFnLmVuYWJsZVNlcnZpY2VzKCk7XHJcbiAgICAgICAgICBsZXQgZ2V0X2Jhbm5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYWRzLmlucmVhZC5cIiArIGkpLmNoaWxkcmVuWzBdLmNoaWxkcmVuWzBdO1xyXG4gICAgICAgICAgbGV0IGdldF9oZWlnaHQgPSAoZ2V0X2Jhbm5lcikgPyAgZ2V0X2Jhbm5lci5jbGllbnRIZWlnaHQgOiAwO1xyXG4gICAgICAgICAgbGV0IGJlZm9yZV9kaXYgPSBnZXRfYmFubmVyLmNsb3Nlc3QoXCIuYXJ0aWNsZUJvZHlJbnJlYWRXcmFwcGVyXCIpOyAgIFxyXG4gICAgICAgICAgaWYgKGdldF9oZWlnaHQgPiAwKSB7ICAgICAgICAgXHJcbiAgICAgICAgICAgIGJlZm9yZV9kaXYuc2V0QXR0cmlidXRlKFwic3R5bGVcIiwgXCJtaW4taGVpZ2h0OiBcIiArIGdldF9oZWlnaHQgKyBcInB4OyBoZWlnaHQ6ICBcIiArIGdldF9oZWlnaHQgKyBcInB4OyB0cmFuc2l0aW9uOiBtaW4taGVpZ2h0IDAuMXNcIik7ICAgXHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBiZWZvcmVfZGl2LnNldEF0dHJpYnV0ZShcInN0eWxlXCIsIFwibWluLWhlaWdodDogMDsgaGVpZ2h0OiAwOyB0cmFuc2l0aW9uOiBtaW4taGVpZ2h0IDAuNXNcIik7ICAgIFxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgLy8gSW5mcmFzcnVjdHVyZUNsYXNzT2JqLlNsb3RSZW5kZXJFbmQoZnVuY3Rpb24oZXZlbnQpIHtcclxuICAgICAgICAgIC8vICAgbGV0IEJveExvYWRlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgLy8gICAgIGlmIChldmVudC5zbG90ID09IEFkVW5pdFByb3BlcnRpZXNDbGFzc09iai5EZWZpbmVfc2xvdHNbXCJhZHMuaW5yZWFkLlwiICsgaV0pIHtcclxuICAgICAgICAgIC8vICAgICAgIGlmICghQm94TG9hZGVkKSB7IFxyXG4gICAgICAgICAgLy8gICAgICAgICBsZXQgYmFubmVyXyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYWRzLmlucmVhZC5cIiArIGkpOyAgICAgIFxyXG4gICAgICAgICAgLy8gICAgICAgICBsZXQgY2xvc2VzdF9kaXYgPSBiYW5uZXJfLmNsb3Nlc3QoXCIuYXJ0aWNsZUJvZHlJbnJlYWRXcmFwcGVyXCIpOyAgICAgXHJcbiAgICAgICAgICAvLyAgICAgICAgIGlmKCFldmVudC5pc0VtcHR5KSB7ICAgICBcclxuICAgICAgICAgIC8vICAgICAgICAgICAgIGxldCBldmVudF9zaXplID0gZXZlbnQuc2l6ZSArIFwiXCI7XHJcbiAgICAgICAgICAvLyAgICAgICAgICAgICBsZXQgZXZlbnRfaCA9IGV2ZW50X3NpemUuc3BsaXQoXCIsXCIpOyAgICAgICAgICAgIFxyXG4gICAgICAgICAgLy8gICAgICAgICAgICAgY2xvc2VzdF9kaXYuc2V0QXR0cmlidXRlKFwic3R5bGVcIiwgXCJtaW4taGVpZ2h0OiBcIiArIGV2ZW50X2hbMV0gKyBcInB4IDsgdHJhbnNpdGlvbjogbWluLWhlaWdodCAwLjVzO1wiKTsgXHJcbiAgICAgICAgICAvLyAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIm1pbiBoZWlnaHQgXCIsIGV2ZW50X2hbMV0pO1xyXG4gICAgICAgICAgLy8gICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAvLyAgICAgICAgICAgICBjbG9zZXN0X2Rpdi5zZXRBdHRyaWJ1dGUoXCJzdHlsZVwiLCBcIm1pbi1oZWlnaHQ6IDA7IGhlaWdodDogMDsgdHJhbnNpdGlvbjogbWluLWhlaWdodCAwLjVzXCIpOyAgICBcclxuICAgICAgICAgIC8vICAgICAgICAgICB9ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgLy8gICAgICAgICAgIEJveExvYWRlZD10cnVlO1xyXG4gICAgICAgICAgLy8gICAgICAgfSAgICBcclxuICAgICAgICAgIC8vICAgICB9XHJcbiAgICAgICAgICAvLyAgIH0pOyAgICAgICAgXHJcbiAgICAgIH0gXHJcbiAgICAgIFxyXG4gICAgfSk7XHJcblxyXG4gICAgLy9jb25zb2xlLmxvZyhcImJlZm9yZSBjaGVjayAhISEhIVwiKTtcclxuXHJcbiAgIC8vIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7IFxyXG4gICAgICAvLyBsZXQgYWxsX2Jhbm5lcnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiW2lkXj0nYWRzLmlucmVhZCddXCIpO1xyXG4gICAgICAvLyBpZiAoYWxsX2Jhbm5lcnMubGVuZ3RoID49IDEpIHtcclxuICAgICAgLy8gICBmb3IgKGxldCBpID0gMTsgaSA8PSBhbGxfYmFubmVycy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAvLyAgICAgbGV0IGdldF9iYW5uZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFkcy5pbnJlYWQuXCIgKyBpKS5jaGlsZHJlblswXS5jaGlsZHJlblswXTtcclxuICAgICAgLy8gICAgIGxldCBnZXRfaGVpZ2h0ID0gKGdldF9iYW5uZXIpID8gIGdldF9iYW5uZXIuY2xpZW50SGVpZ2h0IDogMDtcclxuICAgICAgLy8gICAgIGlmIChnZXRfaGVpZ2h0ID4gMCkge1xyXG4gICAgICAvLyAgICAgICBjb25zb2xlLmxvZyhcImhlaWdodCBcIiwgZ2V0X2hlaWdodCk7XHJcbiAgICAgIC8vICAgICAgIGxldCBiZWZvcmVfZGl2ID0gZ2V0X2Jhbm5lci5jbG9zZXN0KFwiLmFydGljbGVCb2R5SW5yZWFkV3JhcHBlclwiKTsgICBcclxuICAgICAgLy8gICAgICAgYmVmb3JlX2Rpdi5zZXRBdHRyaWJ1dGUoXCJzdHlsZVwiLCBcIm1pbi1oZWlnaHQ6IFwiICsgZ2V0X2hlaWdodCArIFwicHg7IGhlaWdodDogIFwiICsgZ2V0X2hlaWdodCArIFwicHg7IHRyYW5zaXRpb246IG1pbi1oZWlnaHQgMC4xc1wiKTsgXHJcbiAgICAgIC8vICAgICAgIGNvbnNvbGUubG9nKFwibmV3IGhlaWdodCBcIiwgZ2V0X2hlaWdodCk7ICAgIFxyXG4gICAgICAvLyAgICAgfVxyXG4gICAgICAvLyAgIH1cclxuICAgICAgLy8gfVxyXG4gICAvLyB9LCAxMDApO1xyXG5cclxuICAgIHNldFRpbWVvdXQod2luZG93LnJlZnJlc2hfaW5yZWFkcywgd2luZG93LmFydGljbGVCb2R5QWRzUmVmcmVzaFJhdGUgKiAxMDAwKTtcclxuICB9XHJcbiAgcmVmcmVzaEFsbF9mdW5jKCkge1xyXG4gICAgTG9nKFwicmVmcmVzaEFsbF9mdW5jXCIpO1xyXG5cclxuICAgIGlmIChBZFVuaXRGdW5jdGlvbnNDbGFzc09iai5icm93c2lfb25fZ3B0ID09IFwiVHJ1ZVwiICYmIEFkVW5pdEZ1bmN0aW9uc0NsYXNzT2JqLmJyb3dzaV9vbl9ncHQgIT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgIGxldCBuZXdfdmlldyA9IFwidmlld1wiO1xyXG4gICAgICB0cnkge1xyXG4gICAgICAgIHdpbmRvdy5UZW1wbGF0ZXMuQ2xvc2VDcmVhdGl2ZXMoKTtcclxuICAgICAgICB3aW5kb3cuVGVtcGxhdGVzLkluYm9hcmVkVmlkZW8uY2xvc2UoKTtcclxuICAgICAgfSBjYXRjaCAoZXgpIHtcclxuICAgICAgICBMb2coXCJUZW1wbGF0ZXMuQ2xvc2VDcmVhdGl2ZXM6XCIgKyBleCk7XHJcbiAgICAgIH1cclxuICAgICAgLy9sZXQgcmVmcmVzaF9hbGwgPSBBZFVuaXRQcm9wZXJ0aWVzQ2xhc3NPYmouRGVmaW5lX3Nsb3RzO1xyXG4gICAgICBpZiAoQWRVbml0UHJvcGVydGllc0NsYXNzT2JqLkRDdmlldyAhPSB1bmRlZmluZWQpIHtcclxuICAgICAgICBpZiAoQWRVbml0UHJvcGVydGllc0NsYXNzT2JqLkRDdmlldyA8PSA1KSB7XHJcbiAgICAgICAgICBBZFVuaXRQcm9wZXJ0aWVzQ2xhc3NPYmouREN2aWV3ID0gQWRVbml0UHJvcGVydGllc0NsYXNzT2JqLkRDdmlldyArIDFcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgQWRVbml0UHJvcGVydGllc0NsYXNzT2JqLkRDdmlldyA9IFwiXCI7XHJcbiAgICAgICAgfVxyXG4gICAgICB9IFxyXG4gICAgICBuZXdfdmlldyA9IG5ld192aWV3ICsgQWRVbml0UHJvcGVydGllc0NsYXNzT2JqLkRDdmlldztcclxuICAgICAgbG9jYWxTdG9yYWdlLl92aWV3ID0gQWRVbml0UHJvcGVydGllc0NsYXNzT2JqLkRDdmlldztcclxuICAgICAgXHJcbiAgICAgIGdvb2dsZXRhZy5jbWQucHVzaChmdW5jdGlvbigpIHtcclxuICAgICAgICBnb29nbGV0YWcucHViYWRzKCkuc2V0VGFyZ2V0aW5nKFwiZGN1bmlncHRcIiwgbmV3X3ZpZXcpO1xyXG4gICAgICAgIGdvb2dsZXRhZy5wdWJhZHMoKS51cGRhdGVDb3JyZWxhdG9yKCk7XHJcbiAgICAgICAgZ29vZ2xldGFnLnB1YmFkcygpLnJlZnJlc2goKTtcclxuICAgICAgICBnb29nbGV0YWcucHViYWRzKCkuZW5hYmxlU2luZ2xlUmVxdWVzdCgpO1xyXG4gICAgICAgIGdvb2dsZXRhZy5lbmFibGVTZXJ2aWNlcygpOyAgICAgICBcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBsZXQgVG9wTG9hZGVkID0gZmFsc2U7XHJcbiAgICAgIEluZnJhc3J1Y3R1cmVDbGFzc09iai5TbG90UmVuZGVyRW5kKGZ1bmN0aW9uKGV2ZW50KSB7XHJcbiAgICAgICAgaWYgKGV2ZW50LnNsb3QgPT0gQWRVbml0UHJvcGVydGllc0NsYXNzT2JqLkRlZmluZV9zbG90c1tcImFkcy50b3BcIl0pIHtcclxuICAgICAgICAgIGlmICghVG9wTG9hZGVkKSB7XHJcbiAgICAgICAgICAgIGlmICghZXZlbnQuaXNFbXB0eSkge1xyXG4gICAgICAgICAgICAgIGxldCBldmVudF9zaXplID0gZXZlbnQuc2l6ZSArIFwiXCI7XHJcbiAgICAgICAgICAgICAgbGV0IGV2ZW50X3cgPSBldmVudF9zaXplLnNwbGl0KFwiLFwiKTsgICAgICAgICBcclxuICAgICAgICAgICAgICBpZiAoZXZlbnRfd1swXSA9PSBcIjExOTJcIikge1xyXG4gICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFkcy50b3BcIikuc2V0QXR0cmlidXRlKFwic3R5bGVcIiwgXCJiYWNrZ3JvdW5kLWNvbG9yOiByZ2IoMjMzLCAyMzMsIDIzMyk7IGNsZWFyOiBib3RoOyBtaW4taGVpZ2h0OiBhdXRvICFpbXBvcnRhbnQ7IHRleHQtYWxpZ246Y2VudGVyOyBwYWRkaW5nOiAwOyB3aWR0aDogMTIwMnB4OyBtYXJnaW46IDBweCBhdXRvOyBib3JkZXI6IDVweCBzb2xpZCByZ2IoMjMzLCAyMzMsIDIzMyk7IGJveC1zaXppbmc6IGJvcmRlci1ib3g7XCIpO1xyXG4gICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgd2lkdGhfdG9wID0gKGV2ZW50X3dbMF0gPT0gXCIxXCIgfHwgZXZlbnRfc2l6ZSA9PSBcImZsdWlkXCIpID8gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhZHMudG9wXCIpLm9mZnNldFdpZHRoIDogcGFyc2VJbnQoZXZlbnRfd1swXSwgMTApOyBcclxuICAgICAgICAgICAgICAgIGlmIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInlib3hpbWdcIikpIHtcclxuICAgICAgICAgICAgICAgICAgd2lkdGhfdG9wID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ5Ym94aW1nXCIpLm9mZnNldFdpZHRoO1xyXG4gICAgICAgICAgICAgICAgfSAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFkcy50b3BcIikuc2V0QXR0cmlidXRlKFwic3R5bGVcIiwgXCJjbGVhcjogYm90aDsgbWluLWhlaWdodDogYXV0byAhaW1wb3J0YW50OyB0ZXh0LWFsaWduOmNlbnRlcjsgcGFkZGluZzogMCAhaW1wb3J0YW50OyB3aWR0aDogXCIgKyBwYXJzZUludCh3aWR0aF90b3ArMTApICsgXCJweCAhaW1wb3J0YW50O1wiICsgXCJtYXJnaW46IDBweCBhdXRvOyBib3JkZXI6IDVweCBzb2xpZCByZ2IoMjMzLCAyMzMsIDIzMyk7IGJveC1zaXppbmc6IGJvcmRlci1ib3g7XCIpO1xyXG4gICAgICAgICAgICAgIH0gICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgVG9wTG9hZGVkID0gdHJ1ZTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgICBcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgIHdpbmRvdy5UZW1wbGF0ZXMuQ2xvc2VDcmVhdGl2ZXMoKTtcclxuICAgICAgICB9IGNhdGNoIChleCkge1xyXG4gICAgICAgICAgTG9nKFwiVGVtcGxhdGVzLkNsb3NlQ3JlYXRpdmVzOlwiICsgZXgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAod2luZG93LmRjUGF0aC5pbmNsdWRlcyhcIjM0NTYuTWFnYXppbmVcIikpIHtcclxuICAgICAgICAgIGlmIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFkcy5zdHJpcC5tYXJrZXRpbmcuMVwiKSAhPSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhZHMuc3RyaXAubWFya2V0aW5nLjFcIikucmVtb3ZlKCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBpZiAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhZHMuc3RyaXAubWFya2V0aW5nLjJcIikgIT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYWRzLnN0cmlwLm1hcmtldGluZy4yXCIpLnJlbW92ZSgpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgaWYgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYWRzLnN0cmlwLm1hcmtldGluZy4zXCIpICE9IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFkcy5zdHJpcC5tYXJrZXRpbmcuM1wiKS5yZW1vdmUoKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICBnb29nbGV0YWcuY21kLnB1c2goZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICBnb29nbGV0YWcuZGVzdHJveVNsb3RzKCk7XHJcbiAgICAgICAgICBnb29nbGV0YWcuZW5hYmxlU2VydmljZXMoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBcclxuICAgICAgICBBZFVuaXRQcm9wZXJ0aWVzQ2xhc3NPYmouRGVmaW5lX3Nsb3RzID0gW107XHJcbiAgICAgICAgQWRVbml0UHJvcGVydGllc0NsYXNzT2JqLkRlZmluZV9taXZ6YWtvbiA9IFtdO1xyXG4gICAgICAgIEFkVW5pdFByb3BlcnRpZXNDbGFzc09iai5EZWZpbmVfb3plbiA9IFtdO1xyXG5cclxuICAgICAgICBBZFVuaXRGdW5jdGlvbnNDbGFzc09iai5nZXRLZXlWYWx1ZXNfZnVuYygpO1xyXG4gICAgICAgIEFkVW5pdEZ1bmN0aW9uc0NsYXNzT2JqLmRlZmluZVVuaXRzX2Z1bmMoKTtcclxuICAgICAgICAvL2luIHRoaXMgc2NyaXB0IHRoZSBkaXNwbGF5IGhhcHBlbiBvbmx5IG9uZSB0aW1lIGZvciBhbGwgZ3B0IGluIHluZXRcclxuICAgICAgICBJbmZyYXNydWN0dXJlQ2xhc3NPYmouZGlzcGxheUFkc1JlY3Vyc2l2ZV9mdW5jKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgZ29vZ2xldGFnLmNtZC5wdXNoKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBnb29nbGV0YWcuZGlzcGxheShcImFkcy50b3BcIik7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBzZXRUaW1lb3V0KFxyXG4gICAgICB0aGlzLnJlZnJlc2hBbGxfZnVuYyxcclxuICAgICAgQWRVbml0UHJvcGVydGllc0NsYXNzT2JqLnJlZnJlc2hBZFRpbWVfZnVuYygpXHJcbiAgICApO1xyXG4gIH1cclxuICByZWZyZXNoT3plbl9mdW5jKCkge1xyXG4gICAgbGV0IHRoYXQgPSB0aGlzO1xyXG4gICAgTG9nKFwicmVmcmVzaE96ZW5fZnVuY1wiKTtcclxuICAgIGxldCBvemVuID0gKHdpbmRvdy5kY1NpdGUgPT0gXCJ5bnRcIikgPyBBZFVuaXRGdW5jdGlvbnNDbGFzc09iai5PemVuX3JpZ2h0IDogXCJhZHMub3plbi5yaWdodFwiO1xyXG4gICAgZ29vZ2xldGFnLmNtZC5wdXNoKGZ1bmN0aW9uKCkge1xyXG4gICAgICBnb29nbGV0YWcucHViYWRzKCkucmVmcmVzaChbQWRVbml0UHJvcGVydGllc0NsYXNzT2JqLkRlZmluZV9zbG90c1tvemVuXV0pO1xyXG4gICAgICAvL2dvb2dsZXRhZy5wdWJhZHMoKS5lbmFibGVTaW5nbGVSZXF1ZXN0KCk7XHJcbiAgICAgIGdvb2dsZXRhZy5lbmFibGVTZXJ2aWNlcygpO1xyXG4gICAgfSk7XHJcbiAgICBzZXRUaW1lb3V0KHRoYXQucmVmcmVzaE96ZW5fZnVuYywgQWRVbml0UHJvcGVydGllc0NsYXNzT2JqLnJlZnJlc2hBZE96ZW4pO1xyXG4gIH1cclxuICByZWZyZXNoU3RpY2t5X2Z1bmMoKSB7XHJcbiAgICBsZXQgdGhhdCA9IHRoaXM7XHJcbiAgICBMb2coXCJyZWZyZXNoU3RpY2t5X2Z1bmNcIik7XHJcbiAgICBnb29nbGV0YWcuY21kLnB1c2goZnVuY3Rpb24oKSB7XHJcbiAgICAgIGdvb2dsZXRhZy5wdWJhZHMoKS5yZWZyZXNoKFtBZFVuaXRQcm9wZXJ0aWVzQ2xhc3NPYmouRGVmaW5lX3Nsb3RzW0FkVW5pdEZ1bmN0aW9uc0NsYXNzT2JqLnN0aWNreV1dKTtcclxuICAgICAgLy9nb29nbGV0YWcucHViYWRzKCkuZW5hYmxlU2luZ2xlUmVxdWVzdCgpO1xyXG4gICAgICBnb29nbGV0YWcuZW5hYmxlU2VydmljZXMoKTtcclxuICAgIH0pO1xyXG4gICAgc2V0VGltZW91dCh0aGF0LnJlZnJlc2hTdGlja3lfZnVuYywgQWRVbml0UHJvcGVydGllc0NsYXNzT2JqLnJlZnJlc2hTdGlja3kpO1xyXG4gIH1cclxuICB0YWxrSGFlZFBhc3NCYWNrX2Z1bmMoKSB7XHJcbiAgICBMb2coXCJ0YWxrSGFlZFBhc3NCYWNrX2Z1bmNcIik7XHJcbiAgICBjb25zdCBlbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhZHMuc3BvdC4xN1wiKTtcclxuICAgIGNvbnN0IGNhID0gZWxlbWVudC5jaGlsZHJlbjtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2EubGVuZ3RoOyBpKyspIHtcclxuICAgICAgY2FbaV0ucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChjYVtpXSk7XHJcbiAgICB9XHJcbiAgICBlbGVtZW50LmlkID0gXCJhZHMuc3BvdC4xXCI7XHJcbiAgICBBZFVuaXRGdW5jdGlvbnNDbGFzc09iai5maW5kQWxsRGl2X2Z1bmMoKTtcclxuXHJcbiAgICBzZXRUaW1lb3V0KHRoaXMudGFsa0hhZWRQYXNzQmFja2dvX2Z1bmMoKSwgMjUwMCk7XHJcbiAgfVxyXG4gIHRhbGtIYWVkUGFzc0JhY2tnb19mdW5jKCkge1xyXG4gICAgTG9nKFwidGFsa0hhZWRQYXNzQmFja2dvX2Z1bmNcIik7XHJcbiAgICBBZFVuaXRGdW5jdGlvbnNDbGFzc09iai5EZWZpbmVTbG90cyhcclxuICAgICAgXCJhZHMuc3BvdC4xXCIsXHJcbiAgICAgIFszMDAsIDI1MF0sXHJcbiAgICAgIFtcInludGFcIiwgXCIxXCJdXHJcbiAgICApO1xyXG4gICAgZ29vZ2xldGFnLmNtZC5wdXNoKGZ1bmN0aW9uKCkge1xyXG4gICAgICBnb29nbGV0YWcuZGlzcGxheShcImFkcy5zcG90LjFcIik7XHJcbiAgICB9KTtcclxuICB9XHJcbiAgUmVuYW1lU3RpY2t5QmxhemVyKCkge1xyXG4gICAgbGV0IHN0aWNreV9zbG90ID0gXCJhZHMuYmFubmVyXCI7XHJcbiAgICBpZiAod2luZG93Lm5ld01lZGlhID09IFwiRmFsc2VcIikge1xyXG4gICAgICBpZiAod2luZG93LmRjUGF0aC5pbmNsdWRlcyhcIldlYXRoZXJcIikgfHwgd2luZG93LmRjUGF0aC5pbmNsdWRlcyhcIndlYXRoZXJcIikpIHtcclxuICAgICAgICBzdGlja3lfc2xvdCA9IChBZFVuaXRGdW5jdGlvbnNDbGFzc09iai5nZXREZXZpY2VfZnVuYygpID09IFwiQW5kcm9pZFwiKSA/IFwiYWRzLnluZXRfbW9iaWxld2ViX2Jhbm5lcnNfYW5kcm9pZF93ZWF0aGVyX3N0aWNreVwiIDogXCJhZHMueW5ldF9tb2JpbGV3ZWJfYmFubmVyc19pcGhvbmVfd2VhdGhlcl9zdGlja3lcIjtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBzdGlja3lfc2xvdCA9IChBZFVuaXRGdW5jdGlvbnNDbGFzc09iai5nZXREZXZpY2VfZnVuYygpID09IFwiQW5kcm9pZFwiKSA/IFwiYWRzLnluZXRfbW9iaWxld2ViX2Jhbm5lcnNfYW5kcm9pZF9tYWdhemluZV9zdGlja3lcIiA6IFwiYWRzLnluZXRfbW9iaWxld2ViX2Jhbm5lcnNfaXBob25lX21hZ2F6aW5lX3N0aWNreVwiO1xyXG4gICAgICB9ICAgICBcclxuICAgIH1cclxuICAgIGNvbnN0IGVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFkcy5zdGlja3lcIik7XHJcbiAgICBjb25zdCBjYSA9IGVsZW1lbnQuY2hpbGRyZW47XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNhLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIGNhW2ldLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoY2FbaV0pO1xyXG4gICAgfVxyXG4gICAgZWxlbWVudC5pZCA9IHN0aWNreV9zbG90O1xyXG4gICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoXHJcbiAgICAgIFwic3R5bGVcIixcclxuICAgICAgXCJwb3NpdGlvbjpmaXhlZDtib3R0b206MHB4O2xlZnQ6MHB4O2Rpc3BsYXk6ZmxleDtqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyO2Rpc3BsYXk6LXdlYmtpdC1ib3g7LXdlYmtpdC1ib3gtcGFjazpjZW50ZXI7ZGlzcGxheTotbXMtZmxleGJveDstbXMtZmxleC1wYWNrOmNlbnRlcjt0ZXh0LWFsaWduOmNlbnRlcjt3aWR0aDoxMDAlO3otaW5kZXg6OTk5OTttYXJnaW46MCBhdXRvO2JhY2tncm91bmQtY29sb3I6I2ZmZlwiXHJcbiAgICApO1xyXG4gICAgaWYgKGVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKFwicmVtb3ZlX3N0aWNreVwiKSkge1xyXG4gICAgICBlbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ3JlbW92ZV9zdGlja3knKTsgXHJcbiAgICB9XHJcbiAgICBBZFVuaXRGdW5jdGlvbnNDbGFzc09iai5maW5kQWxsRGl2X2Z1bmMoKTtcclxuICAgIFxyXG4gIGxldCBNYWFhdmFyb25TdGlja3kgPSAoQWRVbml0RnVuY3Rpb25zQ2xhc3NPYmouZ2V0VXJsVmFyc19mdW5jKFwiSXNBcHBcIikgPT0gXCJ0cnVlXCIgJiYgIXdpbmRvdy5kY1BhdGguaW5jbHVkZXMoXCJQbmFpUGx1c1wiKSkgPyAxIDogMDsgXHJcbiAgaWYgKE1hYWF2YXJvblN0aWNreSA9PSAwKSBzZXRUaW1lb3V0KHRoaXMuRGVmaW5lU3RpY2t5QmxhemVyX2Z1bmMoc3RpY2t5X3Nsb3QpLCAxNTAwKTsgIFxyXG4gIH1cclxuICBEZWZpbmVTdGlja3lCbGF6ZXJfZnVuYyhpZCkge1xyXG4gICAgTG9nKFwiRGVmaW5lU3RpY2t5QmxhemVyX2Z1bmNcIik7ICAgXHJcbiAgICBBZFVuaXRGdW5jdGlvbnNDbGFzc09iai5kZWZpbmVTbG90c19mdW5jKGlkLCBbWzMyMCwgNTBdLCBbMzYwLCA1MF1dKTtcclxuICAgIGdvb2dsZXRhZy5jbWQucHVzaChmdW5jdGlvbigpIHtnb29nbGV0YWcuZGlzcGxheShpZCk7fSk7IFxyXG4gICAgYWRVbml0U3R5bGVzQ2xhc3NPYmpbXCJhZHMuc3RpY2t5XCJdKFwiYWRzLnN0aWNreVwiKTtcclxuICB9XHJcbn0gLy8gZW5kIGNsYXNzIE1haW5GYW5jdGlvbkNsYXNzXHJcbmNvbnN0IF9NYWluRmFuY3Rpb25DbGFzcyA9IG5ldyBNYWluRmFuY3Rpb25DbGFzcygpO1xyXG5leHBvcnQgZGVmYXVsdCBfTWFpbkZhbmN0aW9uQ2xhc3M7XHJcbndpbmRvdy52aWRlb19vZmYgPSBfTWFpbkZhbmN0aW9uQ2xhc3MudmlkZW9PZmZfZnVuYy5iaW5kKF9NYWluRmFuY3Rpb25DbGFzcyk7Il0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUFBO0FBQUE7QUFDQTtBQUNBOzs7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBOzs7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBOzs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7Ozs7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUNBO0FBQUE7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./modules/MainFanctionClass.js\n");

/***/ }),

/***/ "./node_modules/@babel/runtime/helpers/arrayWithoutHoles.js":
/*!******************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/arrayWithoutHoles.js ***!
  \******************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  }\n}\n\nmodule.exports = _arrayWithoutHoles;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9hcnJheVdpdGhvdXRIb2xlcy5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2FycmF5V2l0aG91dEhvbGVzLmpzPzIyMzYiXSwic291cmNlc0NvbnRlbnQiOlsiZnVuY3Rpb24gX2FycmF5V2l0aG91dEhvbGVzKGFycikge1xuICBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSB7XG4gICAgZm9yICh2YXIgaSA9IDAsIGFycjIgPSBuZXcgQXJyYXkoYXJyLmxlbmd0aCk7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHtcbiAgICAgIGFycjJbaV0gPSBhcnJbaV07XG4gICAgfVxuXG4gICAgcmV0dXJuIGFycjI7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBfYXJyYXlXaXRob3V0SG9sZXM7Il0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/@babel/runtime/helpers/arrayWithoutHoles.js\n");

/***/ }),

/***/ "./node_modules/@babel/runtime/helpers/asyncToGenerator.js":
/*!*****************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/asyncToGenerator.js ***!
  \*****************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nfunction _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}\n\nmodule.exports = _asyncToGenerator;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9hc3luY1RvR2VuZXJhdG9yLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvYXN5bmNUb0dlbmVyYXRvci5qcz9jOTczIl0sInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIGFzeW5jR2VuZXJhdG9yU3RlcChnZW4sIHJlc29sdmUsIHJlamVjdCwgX25leHQsIF90aHJvdywga2V5LCBhcmcpIHtcbiAgdHJ5IHtcbiAgICB2YXIgaW5mbyA9IGdlbltrZXldKGFyZyk7XG4gICAgdmFyIHZhbHVlID0gaW5mby52YWx1ZTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICByZWplY3QoZXJyb3IpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGlmIChpbmZvLmRvbmUpIHtcbiAgICByZXNvbHZlKHZhbHVlKTtcbiAgfSBlbHNlIHtcbiAgICBQcm9taXNlLnJlc29sdmUodmFsdWUpLnRoZW4oX25leHQsIF90aHJvdyk7XG4gIH1cbn1cblxuZnVuY3Rpb24gX2FzeW5jVG9HZW5lcmF0b3IoZm4pIHtcbiAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXMsXG4gICAgICAgIGFyZ3MgPSBhcmd1bWVudHM7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgIHZhciBnZW4gPSBmbi5hcHBseShzZWxmLCBhcmdzKTtcblxuICAgICAgZnVuY3Rpb24gX25leHQodmFsdWUpIHtcbiAgICAgICAgYXN5bmNHZW5lcmF0b3JTdGVwKGdlbiwgcmVzb2x2ZSwgcmVqZWN0LCBfbmV4dCwgX3Rocm93LCBcIm5leHRcIiwgdmFsdWUpO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBfdGhyb3coZXJyKSB7XG4gICAgICAgIGFzeW5jR2VuZXJhdG9yU3RlcChnZW4sIHJlc29sdmUsIHJlamVjdCwgX25leHQsIF90aHJvdywgXCJ0aHJvd1wiLCBlcnIpO1xuICAgICAgfVxuXG4gICAgICBfbmV4dCh1bmRlZmluZWQpO1xuICAgIH0pO1xuICB9O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IF9hc3luY1RvR2VuZXJhdG9yOyJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/@babel/runtime/helpers/asyncToGenerator.js\n");

/***/ }),

/***/ "./node_modules/@babel/runtime/helpers/classCallCheck.js":
/*!***************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/classCallCheck.js ***!
  \***************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nmodule.exports = _classCallCheck;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9jbGFzc0NhbGxDaGVjay5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2NsYXNzQ2FsbENoZWNrLmpzPzk3MGIiXSwic291cmNlc0NvbnRlbnQiOlsiZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3Rvcikge1xuICBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBfY2xhc3NDYWxsQ2hlY2s7Il0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/@babel/runtime/helpers/classCallCheck.js\n");

/***/ }),

/***/ "./node_modules/@babel/runtime/helpers/createClass.js":
/*!************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/createClass.js ***!
  \************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nmodule.exports = _createClass;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9jcmVhdGVDbGFzcy5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2NyZWF0ZUNsYXNzLmpzPzViYzMiXSwic291cmNlc0NvbnRlbnQiOlsiZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykge1xuICBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTtcbiAgICBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7XG4gICAgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlO1xuICAgIGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpO1xuICB9XG59XG5cbmZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHtcbiAgaWYgKHByb3RvUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7XG4gIGlmIChzdGF0aWNQcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTtcbiAgcmV0dXJuIENvbnN0cnVjdG9yO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IF9jcmVhdGVDbGFzczsiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/@babel/runtime/helpers/createClass.js\n");

/***/ }),

/***/ "./node_modules/@babel/runtime/helpers/iterableToArray.js":
/*!****************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/iterableToArray.js ***!
  \****************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("function _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}\n\nmodule.exports = _iterableToArray;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9pdGVyYWJsZVRvQXJyYXkuanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9pdGVyYWJsZVRvQXJyYXkuanM/MTFiMCJdLCJzb3VyY2VzQ29udGVudCI6WyJmdW5jdGlvbiBfaXRlcmFibGVUb0FycmF5KGl0ZXIpIHtcbiAgaWYgKFN5bWJvbC5pdGVyYXRvciBpbiBPYmplY3QoaXRlcikgfHwgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGl0ZXIpID09PSBcIltvYmplY3QgQXJndW1lbnRzXVwiKSByZXR1cm4gQXJyYXkuZnJvbShpdGVyKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBfaXRlcmFibGVUb0FycmF5OyJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/@babel/runtime/helpers/iterableToArray.js\n");

/***/ }),

/***/ "./node_modules/@babel/runtime/helpers/nonIterableSpread.js":
/*!******************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/nonIterableSpread.js ***!
  \******************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}\n\nmodule.exports = _nonIterableSpread;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9ub25JdGVyYWJsZVNwcmVhZC5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL25vbkl0ZXJhYmxlU3ByZWFkLmpzPzA2NzYiXSwic291cmNlc0NvbnRlbnQiOlsiZnVuY3Rpb24gX25vbkl0ZXJhYmxlU3ByZWFkKCkge1xuICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCBhdHRlbXB0IHRvIHNwcmVhZCBub24taXRlcmFibGUgaW5zdGFuY2VcIik7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gX25vbkl0ZXJhYmxlU3ByZWFkOyJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/@babel/runtime/helpers/nonIterableSpread.js\n");

/***/ }),

/***/ "./node_modules/@babel/runtime/helpers/toConsumableArray.js":
/*!******************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/toConsumableArray.js ***!
  \******************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("var arrayWithoutHoles = __webpack_require__(/*! ./arrayWithoutHoles */ \"./node_modules/@babel/runtime/helpers/arrayWithoutHoles.js\");\n\nvar iterableToArray = __webpack_require__(/*! ./iterableToArray */ \"./node_modules/@babel/runtime/helpers/iterableToArray.js\");\n\nvar nonIterableSpread = __webpack_require__(/*! ./nonIterableSpread */ \"./node_modules/@babel/runtime/helpers/nonIterableSpread.js\");\n\nfunction _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || nonIterableSpread();\n}\n\nmodule.exports = _toConsumableArray;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy90b0NvbnN1bWFibGVBcnJheS5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL3RvQ29uc3VtYWJsZUFycmF5LmpzPzQ0OGEiXSwic291cmNlc0NvbnRlbnQiOlsidmFyIGFycmF5V2l0aG91dEhvbGVzID0gcmVxdWlyZShcIi4vYXJyYXlXaXRob3V0SG9sZXNcIik7XG5cbnZhciBpdGVyYWJsZVRvQXJyYXkgPSByZXF1aXJlKFwiLi9pdGVyYWJsZVRvQXJyYXlcIik7XG5cbnZhciBub25JdGVyYWJsZVNwcmVhZCA9IHJlcXVpcmUoXCIuL25vbkl0ZXJhYmxlU3ByZWFkXCIpO1xuXG5mdW5jdGlvbiBfdG9Db25zdW1hYmxlQXJyYXkoYXJyKSB7XG4gIHJldHVybiBhcnJheVdpdGhvdXRIb2xlcyhhcnIpIHx8IGl0ZXJhYmxlVG9BcnJheShhcnIpIHx8IG5vbkl0ZXJhYmxlU3ByZWFkKCk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gX3RvQ29uc3VtYWJsZUFycmF5OyJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/@babel/runtime/helpers/toConsumableArray.js\n");

/***/ }),

/***/ "./node_modules/@babel/runtime/regenerator/index.js":
/*!**********************************************************!*\
  !*** ./node_modules/@babel/runtime/regenerator/index.js ***!
  \**********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("module.exports = __webpack_require__(/*! regenerator-runtime */ \"./node_modules/regenerator-runtime/runtime.js\");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvcmVnZW5lcmF0b3IvaW5kZXguanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvcmVnZW5lcmF0b3IvaW5kZXguanM/YTM0YSJdLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJyZWdlbmVyYXRvci1ydW50aW1lXCIpO1xuIl0sIm1hcHBpbmdzIjoiQUFBQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/@babel/runtime/regenerator/index.js\n");

/***/ }),

/***/ "./node_modules/path-browserify/index.js":
/*!***********************************************!*\
  !*** ./node_modules/path-browserify/index.js ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("/* WEBPACK VAR INJECTION */(function(process) {// .dirname, .basename, and .extname methods are extracted from Node.js v8.11.1,\n// backported and transplited with Babel, with backwards-compat fixes\n// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n// resolves . and .. elements in a path array with directory names there\n// must be no slashes, empty elements, or device names (c:\\) in the array\n// (so also no leading and trailing slashes - it does not distinguish\n// relative and absolute paths)\nfunction normalizeArray(parts, allowAboveRoot) {\n  // if the path tries to go above the root, `up` ends up > 0\n  var up = 0;\n\n  for (var i = parts.length - 1; i >= 0; i--) {\n    var last = parts[i];\n\n    if (last === '.') {\n      parts.splice(i, 1);\n    } else if (last === '..') {\n      parts.splice(i, 1);\n      up++;\n    } else if (up) {\n      parts.splice(i, 1);\n      up--;\n    }\n  } // if the path is allowed to go above the root, restore leading ..s\n\n\n  if (allowAboveRoot) {\n    for (; up--; up) {\n      parts.unshift('..');\n    }\n  }\n\n  return parts;\n} // path.resolve([from ...], to)\n// posix version\n\n\nexports.resolve = function () {\n  var resolvedPath = '',\n      resolvedAbsolute = false;\n\n  for (var i = arguments.length - 1; i >= -1 && !resolvedAbsolute; i--) {\n    var path = i >= 0 ? arguments[i] : process.cwd(); // Skip empty and invalid entries\n\n    if (typeof path !== 'string') {\n      throw new TypeError('Arguments to path.resolve must be strings');\n    } else if (!path) {\n      continue;\n    }\n\n    resolvedPath = path + '/' + resolvedPath;\n    resolvedAbsolute = path.charAt(0) === '/';\n  } // At this point the path should be resolved to a full absolute path, but\n  // handle relative paths to be safe (might happen when process.cwd() fails)\n  // Normalize the path\n\n\n  resolvedPath = normalizeArray(filter(resolvedPath.split('/'), function (p) {\n    return !!p;\n  }), !resolvedAbsolute).join('/');\n  return (resolvedAbsolute ? '/' : '') + resolvedPath || '.';\n}; // path.normalize(path)\n// posix version\n\n\nexports.normalize = function (path) {\n  var isAbsolute = exports.isAbsolute(path),\n      trailingSlash = substr(path, -1) === '/'; // Normalize the path\n\n  path = normalizeArray(filter(path.split('/'), function (p) {\n    return !!p;\n  }), !isAbsolute).join('/');\n\n  if (!path && !isAbsolute) {\n    path = '.';\n  }\n\n  if (path && trailingSlash) {\n    path += '/';\n  }\n\n  return (isAbsolute ? '/' : '') + path;\n}; // posix version\n\n\nexports.isAbsolute = function (path) {\n  return path.charAt(0) === '/';\n}; // posix version\n\n\nexports.join = function () {\n  var paths = Array.prototype.slice.call(arguments, 0);\n  return exports.normalize(filter(paths, function (p, index) {\n    if (typeof p !== 'string') {\n      throw new TypeError('Arguments to path.join must be strings');\n    }\n\n    return p;\n  }).join('/'));\n}; // path.relative(from, to)\n// posix version\n\n\nexports.relative = function (from, to) {\n  from = exports.resolve(from).substr(1);\n  to = exports.resolve(to).substr(1);\n\n  function trim(arr) {\n    var start = 0;\n\n    for (; start < arr.length; start++) {\n      if (arr[start] !== '') break;\n    }\n\n    var end = arr.length - 1;\n\n    for (; end >= 0; end--) {\n      if (arr[end] !== '') break;\n    }\n\n    if (start > end) return [];\n    return arr.slice(start, end - start + 1);\n  }\n\n  var fromParts = trim(from.split('/'));\n  var toParts = trim(to.split('/'));\n  var length = Math.min(fromParts.length, toParts.length);\n  var samePartsLength = length;\n\n  for (var i = 0; i < length; i++) {\n    if (fromParts[i] !== toParts[i]) {\n      samePartsLength = i;\n      break;\n    }\n  }\n\n  var outputParts = [];\n\n  for (var i = samePartsLength; i < fromParts.length; i++) {\n    outputParts.push('..');\n  }\n\n  outputParts = outputParts.concat(toParts.slice(samePartsLength));\n  return outputParts.join('/');\n};\n\nexports.sep = '/';\nexports.delimiter = ':';\n\nexports.dirname = function (path) {\n  if (typeof path !== 'string') path = path + '';\n  if (path.length === 0) return '.';\n  var code = path.charCodeAt(0);\n  var hasRoot = code === 47\n  /*/*/\n  ;\n  var end = -1;\n  var matchedSlash = true;\n\n  for (var i = path.length - 1; i >= 1; --i) {\n    code = path.charCodeAt(i);\n\n    if (code === 47\n    /*/*/\n    ) {\n        if (!matchedSlash) {\n          end = i;\n          break;\n        }\n      } else {\n      // We saw the first non-path separator\n      matchedSlash = false;\n    }\n  }\n\n  if (end === -1) return hasRoot ? '/' : '.';\n\n  if (hasRoot && end === 1) {\n    // return '//';\n    // Backwards-compat fix:\n    return '/';\n  }\n\n  return path.slice(0, end);\n};\n\nfunction basename(path) {\n  if (typeof path !== 'string') path = path + '';\n  var start = 0;\n  var end = -1;\n  var matchedSlash = true;\n  var i;\n\n  for (i = path.length - 1; i >= 0; --i) {\n    if (path.charCodeAt(i) === 47\n    /*/*/\n    ) {\n        // If we reached a path separator that was not part of a set of path\n        // separators at the end of the string, stop now\n        if (!matchedSlash) {\n          start = i + 1;\n          break;\n        }\n      } else if (end === -1) {\n      // We saw the first non-path separator, mark this as the end of our\n      // path component\n      matchedSlash = false;\n      end = i + 1;\n    }\n  }\n\n  if (end === -1) return '';\n  return path.slice(start, end);\n} // Uses a mixed approach for backwards-compatibility, as ext behavior changed\n// in new Node.js versions, so only basename() above is backported here\n\n\nexports.basename = function (path, ext) {\n  var f = basename(path);\n\n  if (ext && f.substr(-1 * ext.length) === ext) {\n    f = f.substr(0, f.length - ext.length);\n  }\n\n  return f;\n};\n\nexports.extname = function (path) {\n  if (typeof path !== 'string') path = path + '';\n  var startDot = -1;\n  var startPart = 0;\n  var end = -1;\n  var matchedSlash = true; // Track the state of characters (if any) we see before our first dot and\n  // after any path separator we find\n\n  var preDotState = 0;\n\n  for (var i = path.length - 1; i >= 0; --i) {\n    var code = path.charCodeAt(i);\n\n    if (code === 47\n    /*/*/\n    ) {\n        // If we reached a path separator that was not part of a set of path\n        // separators at the end of the string, stop now\n        if (!matchedSlash) {\n          startPart = i + 1;\n          break;\n        }\n\n        continue;\n      }\n\n    if (end === -1) {\n      // We saw the first non-path separator, mark this as the end of our\n      // extension\n      matchedSlash = false;\n      end = i + 1;\n    }\n\n    if (code === 46\n    /*.*/\n    ) {\n        // If this is our first dot, mark it as the start of our extension\n        if (startDot === -1) startDot = i;else if (preDotState !== 1) preDotState = 1;\n      } else if (startDot !== -1) {\n      // We saw a non-dot and non-path separator before our dot, so we should\n      // have a good chance at having a non-empty extension\n      preDotState = -1;\n    }\n  }\n\n  if (startDot === -1 || end === -1 || // We saw a non-dot character immediately before the dot\n  preDotState === 0 || // The (right-most) trimmed path component is exactly '..'\n  preDotState === 1 && startDot === end - 1 && startDot === startPart + 1) {\n    return '';\n  }\n\n  return path.slice(startDot, end);\n};\n\nfunction filter(xs, f) {\n  if (xs.filter) return xs.filter(f);\n  var res = [];\n\n  for (var i = 0; i < xs.length; i++) {\n    if (f(xs[i], i, xs)) res.push(xs[i]);\n  }\n\n  return res;\n} // String.prototype.substr - negative index don't work in IE8\n\n\nvar substr = 'ab'.substr(-1) === 'b' ? function (str, start, len) {\n  return str.substr(start, len);\n} : function (str, start, len) {\n  if (start < 0) start = str.length + start;\n  return str.substr(start, len);\n};\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../process/browser.js */ \"./node_modules/process/browser.js\")))//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvcGF0aC1icm93c2VyaWZ5L2luZGV4LmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3BhdGgtYnJvd3NlcmlmeS9pbmRleC5qcz9kZjdjIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIC5kaXJuYW1lLCAuYmFzZW5hbWUsIGFuZCAuZXh0bmFtZSBtZXRob2RzIGFyZSBleHRyYWN0ZWQgZnJvbSBOb2RlLmpzIHY4LjExLjEsXG4vLyBiYWNrcG9ydGVkIGFuZCB0cmFuc3BsaXRlZCB3aXRoIEJhYmVsLCB3aXRoIGJhY2t3YXJkcy1jb21wYXQgZml4ZXNcblxuLy8gQ29weXJpZ2h0IEpveWVudCwgSW5jLiBhbmQgb3RoZXIgTm9kZSBjb250cmlidXRvcnMuXG4vL1xuLy8gUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGFcbi8vIGNvcHkgb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGVcbi8vIFwiU29mdHdhcmVcIiksIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZ1xuLy8gd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLFxuLy8gZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdFxuLy8gcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlXG4vLyBmb2xsb3dpbmcgY29uZGl0aW9uczpcbi8vXG4vLyBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZFxuLy8gaW4gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG4vL1xuLy8gVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTU1xuLy8gT1IgSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRlxuLy8gTUVSQ0hBTlRBQklMSVRZLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTlxuLy8gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sXG4vLyBEQU1BR0VTIE9SIE9USEVSIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1Jcbi8vIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEVcbi8vIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuXG5cbi8vIHJlc29sdmVzIC4gYW5kIC4uIGVsZW1lbnRzIGluIGEgcGF0aCBhcnJheSB3aXRoIGRpcmVjdG9yeSBuYW1lcyB0aGVyZVxuLy8gbXVzdCBiZSBubyBzbGFzaGVzLCBlbXB0eSBlbGVtZW50cywgb3IgZGV2aWNlIG5hbWVzIChjOlxcKSBpbiB0aGUgYXJyYXlcbi8vIChzbyBhbHNvIG5vIGxlYWRpbmcgYW5kIHRyYWlsaW5nIHNsYXNoZXMgLSBpdCBkb2VzIG5vdCBkaXN0aW5ndWlzaFxuLy8gcmVsYXRpdmUgYW5kIGFic29sdXRlIHBhdGhzKVxuZnVuY3Rpb24gbm9ybWFsaXplQXJyYXkocGFydHMsIGFsbG93QWJvdmVSb290KSB7XG4gIC8vIGlmIHRoZSBwYXRoIHRyaWVzIHRvIGdvIGFib3ZlIHRoZSByb290LCBgdXBgIGVuZHMgdXAgPiAwXG4gIHZhciB1cCA9IDA7XG4gIGZvciAodmFyIGkgPSBwYXJ0cy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgIHZhciBsYXN0ID0gcGFydHNbaV07XG4gICAgaWYgKGxhc3QgPT09ICcuJykge1xuICAgICAgcGFydHMuc3BsaWNlKGksIDEpO1xuICAgIH0gZWxzZSBpZiAobGFzdCA9PT0gJy4uJykge1xuICAgICAgcGFydHMuc3BsaWNlKGksIDEpO1xuICAgICAgdXArKztcbiAgICB9IGVsc2UgaWYgKHVwKSB7XG4gICAgICBwYXJ0cy5zcGxpY2UoaSwgMSk7XG4gICAgICB1cC0tO1xuICAgIH1cbiAgfVxuXG4gIC8vIGlmIHRoZSBwYXRoIGlzIGFsbG93ZWQgdG8gZ28gYWJvdmUgdGhlIHJvb3QsIHJlc3RvcmUgbGVhZGluZyAuLnNcbiAgaWYgKGFsbG93QWJvdmVSb290KSB7XG4gICAgZm9yICg7IHVwLS07IHVwKSB7XG4gICAgICBwYXJ0cy51bnNoaWZ0KCcuLicpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBwYXJ0cztcbn1cblxuLy8gcGF0aC5yZXNvbHZlKFtmcm9tIC4uLl0sIHRvKVxuLy8gcG9zaXggdmVyc2lvblxuZXhwb3J0cy5yZXNvbHZlID0gZnVuY3Rpb24oKSB7XG4gIHZhciByZXNvbHZlZFBhdGggPSAnJyxcbiAgICAgIHJlc29sdmVkQWJzb2x1dGUgPSBmYWxzZTtcblxuICBmb3IgKHZhciBpID0gYXJndW1lbnRzLmxlbmd0aCAtIDE7IGkgPj0gLTEgJiYgIXJlc29sdmVkQWJzb2x1dGU7IGktLSkge1xuICAgIHZhciBwYXRoID0gKGkgPj0gMCkgPyBhcmd1bWVudHNbaV0gOiBwcm9jZXNzLmN3ZCgpO1xuXG4gICAgLy8gU2tpcCBlbXB0eSBhbmQgaW52YWxpZCBlbnRyaWVzXG4gICAgaWYgKHR5cGVvZiBwYXRoICE9PSAnc3RyaW5nJykge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQXJndW1lbnRzIHRvIHBhdGgucmVzb2x2ZSBtdXN0IGJlIHN0cmluZ3MnKTtcbiAgICB9IGVsc2UgaWYgKCFwYXRoKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG5cbiAgICByZXNvbHZlZFBhdGggPSBwYXRoICsgJy8nICsgcmVzb2x2ZWRQYXRoO1xuICAgIHJlc29sdmVkQWJzb2x1dGUgPSBwYXRoLmNoYXJBdCgwKSA9PT0gJy8nO1xuICB9XG5cbiAgLy8gQXQgdGhpcyBwb2ludCB0aGUgcGF0aCBzaG91bGQgYmUgcmVzb2x2ZWQgdG8gYSBmdWxsIGFic29sdXRlIHBhdGgsIGJ1dFxuICAvLyBoYW5kbGUgcmVsYXRpdmUgcGF0aHMgdG8gYmUgc2FmZSAobWlnaHQgaGFwcGVuIHdoZW4gcHJvY2Vzcy5jd2QoKSBmYWlscylcblxuICAvLyBOb3JtYWxpemUgdGhlIHBhdGhcbiAgcmVzb2x2ZWRQYXRoID0gbm9ybWFsaXplQXJyYXkoZmlsdGVyKHJlc29sdmVkUGF0aC5zcGxpdCgnLycpLCBmdW5jdGlvbihwKSB7XG4gICAgcmV0dXJuICEhcDtcbiAgfSksICFyZXNvbHZlZEFic29sdXRlKS5qb2luKCcvJyk7XG5cbiAgcmV0dXJuICgocmVzb2x2ZWRBYnNvbHV0ZSA/ICcvJyA6ICcnKSArIHJlc29sdmVkUGF0aCkgfHwgJy4nO1xufTtcblxuLy8gcGF0aC5ub3JtYWxpemUocGF0aClcbi8vIHBvc2l4IHZlcnNpb25cbmV4cG9ydHMubm9ybWFsaXplID0gZnVuY3Rpb24ocGF0aCkge1xuICB2YXIgaXNBYnNvbHV0ZSA9IGV4cG9ydHMuaXNBYnNvbHV0ZShwYXRoKSxcbiAgICAgIHRyYWlsaW5nU2xhc2ggPSBzdWJzdHIocGF0aCwgLTEpID09PSAnLyc7XG5cbiAgLy8gTm9ybWFsaXplIHRoZSBwYXRoXG4gIHBhdGggPSBub3JtYWxpemVBcnJheShmaWx0ZXIocGF0aC5zcGxpdCgnLycpLCBmdW5jdGlvbihwKSB7XG4gICAgcmV0dXJuICEhcDtcbiAgfSksICFpc0Fic29sdXRlKS5qb2luKCcvJyk7XG5cbiAgaWYgKCFwYXRoICYmICFpc0Fic29sdXRlKSB7XG4gICAgcGF0aCA9ICcuJztcbiAgfVxuICBpZiAocGF0aCAmJiB0cmFpbGluZ1NsYXNoKSB7XG4gICAgcGF0aCArPSAnLyc7XG4gIH1cblxuICByZXR1cm4gKGlzQWJzb2x1dGUgPyAnLycgOiAnJykgKyBwYXRoO1xufTtcblxuLy8gcG9zaXggdmVyc2lvblxuZXhwb3J0cy5pc0Fic29sdXRlID0gZnVuY3Rpb24ocGF0aCkge1xuICByZXR1cm4gcGF0aC5jaGFyQXQoMCkgPT09ICcvJztcbn07XG5cbi8vIHBvc2l4IHZlcnNpb25cbmV4cG9ydHMuam9pbiA9IGZ1bmN0aW9uKCkge1xuICB2YXIgcGF0aHMgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDApO1xuICByZXR1cm4gZXhwb3J0cy5ub3JtYWxpemUoZmlsdGVyKHBhdGhzLCBmdW5jdGlvbihwLCBpbmRleCkge1xuICAgIGlmICh0eXBlb2YgcCAhPT0gJ3N0cmluZycpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0FyZ3VtZW50cyB0byBwYXRoLmpvaW4gbXVzdCBiZSBzdHJpbmdzJyk7XG4gICAgfVxuICAgIHJldHVybiBwO1xuICB9KS5qb2luKCcvJykpO1xufTtcblxuXG4vLyBwYXRoLnJlbGF0aXZlKGZyb20sIHRvKVxuLy8gcG9zaXggdmVyc2lvblxuZXhwb3J0cy5yZWxhdGl2ZSA9IGZ1bmN0aW9uKGZyb20sIHRvKSB7XG4gIGZyb20gPSBleHBvcnRzLnJlc29sdmUoZnJvbSkuc3Vic3RyKDEpO1xuICB0byA9IGV4cG9ydHMucmVzb2x2ZSh0bykuc3Vic3RyKDEpO1xuXG4gIGZ1bmN0aW9uIHRyaW0oYXJyKSB7XG4gICAgdmFyIHN0YXJ0ID0gMDtcbiAgICBmb3IgKDsgc3RhcnQgPCBhcnIubGVuZ3RoOyBzdGFydCsrKSB7XG4gICAgICBpZiAoYXJyW3N0YXJ0XSAhPT0gJycpIGJyZWFrO1xuICAgIH1cblxuICAgIHZhciBlbmQgPSBhcnIubGVuZ3RoIC0gMTtcbiAgICBmb3IgKDsgZW5kID49IDA7IGVuZC0tKSB7XG4gICAgICBpZiAoYXJyW2VuZF0gIT09ICcnKSBicmVhaztcbiAgICB9XG5cbiAgICBpZiAoc3RhcnQgPiBlbmQpIHJldHVybiBbXTtcbiAgICByZXR1cm4gYXJyLnNsaWNlKHN0YXJ0LCBlbmQgLSBzdGFydCArIDEpO1xuICB9XG5cbiAgdmFyIGZyb21QYXJ0cyA9IHRyaW0oZnJvbS5zcGxpdCgnLycpKTtcbiAgdmFyIHRvUGFydHMgPSB0cmltKHRvLnNwbGl0KCcvJykpO1xuXG4gIHZhciBsZW5ndGggPSBNYXRoLm1pbihmcm9tUGFydHMubGVuZ3RoLCB0b1BhcnRzLmxlbmd0aCk7XG4gIHZhciBzYW1lUGFydHNMZW5ndGggPSBsZW5ndGg7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICBpZiAoZnJvbVBhcnRzW2ldICE9PSB0b1BhcnRzW2ldKSB7XG4gICAgICBzYW1lUGFydHNMZW5ndGggPSBpO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgdmFyIG91dHB1dFBhcnRzID0gW107XG4gIGZvciAodmFyIGkgPSBzYW1lUGFydHNMZW5ndGg7IGkgPCBmcm9tUGFydHMubGVuZ3RoOyBpKyspIHtcbiAgICBvdXRwdXRQYXJ0cy5wdXNoKCcuLicpO1xuICB9XG5cbiAgb3V0cHV0UGFydHMgPSBvdXRwdXRQYXJ0cy5jb25jYXQodG9QYXJ0cy5zbGljZShzYW1lUGFydHNMZW5ndGgpKTtcblxuICByZXR1cm4gb3V0cHV0UGFydHMuam9pbignLycpO1xufTtcblxuZXhwb3J0cy5zZXAgPSAnLyc7XG5leHBvcnRzLmRlbGltaXRlciA9ICc6JztcblxuZXhwb3J0cy5kaXJuYW1lID0gZnVuY3Rpb24gKHBhdGgpIHtcbiAgaWYgKHR5cGVvZiBwYXRoICE9PSAnc3RyaW5nJykgcGF0aCA9IHBhdGggKyAnJztcbiAgaWYgKHBhdGgubGVuZ3RoID09PSAwKSByZXR1cm4gJy4nO1xuICB2YXIgY29kZSA9IHBhdGguY2hhckNvZGVBdCgwKTtcbiAgdmFyIGhhc1Jvb3QgPSBjb2RlID09PSA0NyAvKi8qLztcbiAgdmFyIGVuZCA9IC0xO1xuICB2YXIgbWF0Y2hlZFNsYXNoID0gdHJ1ZTtcbiAgZm9yICh2YXIgaSA9IHBhdGgubGVuZ3RoIC0gMTsgaSA+PSAxOyAtLWkpIHtcbiAgICBjb2RlID0gcGF0aC5jaGFyQ29kZUF0KGkpO1xuICAgIGlmIChjb2RlID09PSA0NyAvKi8qLykge1xuICAgICAgICBpZiAoIW1hdGNoZWRTbGFzaCkge1xuICAgICAgICAgIGVuZCA9IGk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAvLyBXZSBzYXcgdGhlIGZpcnN0IG5vbi1wYXRoIHNlcGFyYXRvclxuICAgICAgbWF0Y2hlZFNsYXNoID0gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgaWYgKGVuZCA9PT0gLTEpIHJldHVybiBoYXNSb290ID8gJy8nIDogJy4nO1xuICBpZiAoaGFzUm9vdCAmJiBlbmQgPT09IDEpIHtcbiAgICAvLyByZXR1cm4gJy8vJztcbiAgICAvLyBCYWNrd2FyZHMtY29tcGF0IGZpeDpcbiAgICByZXR1cm4gJy8nO1xuICB9XG4gIHJldHVybiBwYXRoLnNsaWNlKDAsIGVuZCk7XG59O1xuXG5mdW5jdGlvbiBiYXNlbmFtZShwYXRoKSB7XG4gIGlmICh0eXBlb2YgcGF0aCAhPT0gJ3N0cmluZycpIHBhdGggPSBwYXRoICsgJyc7XG5cbiAgdmFyIHN0YXJ0ID0gMDtcbiAgdmFyIGVuZCA9IC0xO1xuICB2YXIgbWF0Y2hlZFNsYXNoID0gdHJ1ZTtcbiAgdmFyIGk7XG5cbiAgZm9yIChpID0gcGF0aC5sZW5ndGggLSAxOyBpID49IDA7IC0taSkge1xuICAgIGlmIChwYXRoLmNoYXJDb2RlQXQoaSkgPT09IDQ3IC8qLyovKSB7XG4gICAgICAgIC8vIElmIHdlIHJlYWNoZWQgYSBwYXRoIHNlcGFyYXRvciB0aGF0IHdhcyBub3QgcGFydCBvZiBhIHNldCBvZiBwYXRoXG4gICAgICAgIC8vIHNlcGFyYXRvcnMgYXQgdGhlIGVuZCBvZiB0aGUgc3RyaW5nLCBzdG9wIG5vd1xuICAgICAgICBpZiAoIW1hdGNoZWRTbGFzaCkge1xuICAgICAgICAgIHN0YXJ0ID0gaSArIDE7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoZW5kID09PSAtMSkge1xuICAgICAgLy8gV2Ugc2F3IHRoZSBmaXJzdCBub24tcGF0aCBzZXBhcmF0b3IsIG1hcmsgdGhpcyBhcyB0aGUgZW5kIG9mIG91clxuICAgICAgLy8gcGF0aCBjb21wb25lbnRcbiAgICAgIG1hdGNoZWRTbGFzaCA9IGZhbHNlO1xuICAgICAgZW5kID0gaSArIDE7XG4gICAgfVxuICB9XG5cbiAgaWYgKGVuZCA9PT0gLTEpIHJldHVybiAnJztcbiAgcmV0dXJuIHBhdGguc2xpY2Uoc3RhcnQsIGVuZCk7XG59XG5cbi8vIFVzZXMgYSBtaXhlZCBhcHByb2FjaCBmb3IgYmFja3dhcmRzLWNvbXBhdGliaWxpdHksIGFzIGV4dCBiZWhhdmlvciBjaGFuZ2VkXG4vLyBpbiBuZXcgTm9kZS5qcyB2ZXJzaW9ucywgc28gb25seSBiYXNlbmFtZSgpIGFib3ZlIGlzIGJhY2twb3J0ZWQgaGVyZVxuZXhwb3J0cy5iYXNlbmFtZSA9IGZ1bmN0aW9uIChwYXRoLCBleHQpIHtcbiAgdmFyIGYgPSBiYXNlbmFtZShwYXRoKTtcbiAgaWYgKGV4dCAmJiBmLnN1YnN0cigtMSAqIGV4dC5sZW5ndGgpID09PSBleHQpIHtcbiAgICBmID0gZi5zdWJzdHIoMCwgZi5sZW5ndGggLSBleHQubGVuZ3RoKTtcbiAgfVxuICByZXR1cm4gZjtcbn07XG5cbmV4cG9ydHMuZXh0bmFtZSA9IGZ1bmN0aW9uIChwYXRoKSB7XG4gIGlmICh0eXBlb2YgcGF0aCAhPT0gJ3N0cmluZycpIHBhdGggPSBwYXRoICsgJyc7XG4gIHZhciBzdGFydERvdCA9IC0xO1xuICB2YXIgc3RhcnRQYXJ0ID0gMDtcbiAgdmFyIGVuZCA9IC0xO1xuICB2YXIgbWF0Y2hlZFNsYXNoID0gdHJ1ZTtcbiAgLy8gVHJhY2sgdGhlIHN0YXRlIG9mIGNoYXJhY3RlcnMgKGlmIGFueSkgd2Ugc2VlIGJlZm9yZSBvdXIgZmlyc3QgZG90IGFuZFxuICAvLyBhZnRlciBhbnkgcGF0aCBzZXBhcmF0b3Igd2UgZmluZFxuICB2YXIgcHJlRG90U3RhdGUgPSAwO1xuICBmb3IgKHZhciBpID0gcGF0aC5sZW5ndGggLSAxOyBpID49IDA7IC0taSkge1xuICAgIHZhciBjb2RlID0gcGF0aC5jaGFyQ29kZUF0KGkpO1xuICAgIGlmIChjb2RlID09PSA0NyAvKi8qLykge1xuICAgICAgICAvLyBJZiB3ZSByZWFjaGVkIGEgcGF0aCBzZXBhcmF0b3IgdGhhdCB3YXMgbm90IHBhcnQgb2YgYSBzZXQgb2YgcGF0aFxuICAgICAgICAvLyBzZXBhcmF0b3JzIGF0IHRoZSBlbmQgb2YgdGhlIHN0cmluZywgc3RvcCBub3dcbiAgICAgICAgaWYgKCFtYXRjaGVkU2xhc2gpIHtcbiAgICAgICAgICBzdGFydFBhcnQgPSBpICsgMTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICBpZiAoZW5kID09PSAtMSkge1xuICAgICAgLy8gV2Ugc2F3IHRoZSBmaXJzdCBub24tcGF0aCBzZXBhcmF0b3IsIG1hcmsgdGhpcyBhcyB0aGUgZW5kIG9mIG91clxuICAgICAgLy8gZXh0ZW5zaW9uXG4gICAgICBtYXRjaGVkU2xhc2ggPSBmYWxzZTtcbiAgICAgIGVuZCA9IGkgKyAxO1xuICAgIH1cbiAgICBpZiAoY29kZSA9PT0gNDYgLyouKi8pIHtcbiAgICAgICAgLy8gSWYgdGhpcyBpcyBvdXIgZmlyc3QgZG90LCBtYXJrIGl0IGFzIHRoZSBzdGFydCBvZiBvdXIgZXh0ZW5zaW9uXG4gICAgICAgIGlmIChzdGFydERvdCA9PT0gLTEpXG4gICAgICAgICAgc3RhcnREb3QgPSBpO1xuICAgICAgICBlbHNlIGlmIChwcmVEb3RTdGF0ZSAhPT0gMSlcbiAgICAgICAgICBwcmVEb3RTdGF0ZSA9IDE7XG4gICAgfSBlbHNlIGlmIChzdGFydERvdCAhPT0gLTEpIHtcbiAgICAgIC8vIFdlIHNhdyBhIG5vbi1kb3QgYW5kIG5vbi1wYXRoIHNlcGFyYXRvciBiZWZvcmUgb3VyIGRvdCwgc28gd2Ugc2hvdWxkXG4gICAgICAvLyBoYXZlIGEgZ29vZCBjaGFuY2UgYXQgaGF2aW5nIGEgbm9uLWVtcHR5IGV4dGVuc2lvblxuICAgICAgcHJlRG90U3RhdGUgPSAtMTtcbiAgICB9XG4gIH1cblxuICBpZiAoc3RhcnREb3QgPT09IC0xIHx8IGVuZCA9PT0gLTEgfHxcbiAgICAgIC8vIFdlIHNhdyBhIG5vbi1kb3QgY2hhcmFjdGVyIGltbWVkaWF0ZWx5IGJlZm9yZSB0aGUgZG90XG4gICAgICBwcmVEb3RTdGF0ZSA9PT0gMCB8fFxuICAgICAgLy8gVGhlIChyaWdodC1tb3N0KSB0cmltbWVkIHBhdGggY29tcG9uZW50IGlzIGV4YWN0bHkgJy4uJ1xuICAgICAgcHJlRG90U3RhdGUgPT09IDEgJiYgc3RhcnREb3QgPT09IGVuZCAtIDEgJiYgc3RhcnREb3QgPT09IHN0YXJ0UGFydCArIDEpIHtcbiAgICByZXR1cm4gJyc7XG4gIH1cbiAgcmV0dXJuIHBhdGguc2xpY2Uoc3RhcnREb3QsIGVuZCk7XG59O1xuXG5mdW5jdGlvbiBmaWx0ZXIgKHhzLCBmKSB7XG4gICAgaWYgKHhzLmZpbHRlcikgcmV0dXJuIHhzLmZpbHRlcihmKTtcbiAgICB2YXIgcmVzID0gW107XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB4cy5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAoZih4c1tpXSwgaSwgeHMpKSByZXMucHVzaCh4c1tpXSk7XG4gICAgfVxuICAgIHJldHVybiByZXM7XG59XG5cbi8vIFN0cmluZy5wcm90b3R5cGUuc3Vic3RyIC0gbmVnYXRpdmUgaW5kZXggZG9uJ3Qgd29yayBpbiBJRThcbnZhciBzdWJzdHIgPSAnYWInLnN1YnN0cigtMSkgPT09ICdiJ1xuICAgID8gZnVuY3Rpb24gKHN0ciwgc3RhcnQsIGxlbikgeyByZXR1cm4gc3RyLnN1YnN0cihzdGFydCwgbGVuKSB9XG4gICAgOiBmdW5jdGlvbiAoc3RyLCBzdGFydCwgbGVuKSB7XG4gICAgICAgIGlmIChzdGFydCA8IDApIHN0YXJ0ID0gc3RyLmxlbmd0aCArIHN0YXJ0O1xuICAgICAgICByZXR1cm4gc3RyLnN1YnN0cihzdGFydCwgbGVuKTtcbiAgICB9XG47XG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFEQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBRUE7QUFDQTtBQUNBO0FBREE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUFBQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/path-browserify/index.js\n");

/***/ }),

/***/ "./node_modules/process/browser.js":
/*!*****************************************!*\
  !*** ./node_modules/process/browser.js ***!
  \*****************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("// shim for using process in browser\nvar process = module.exports = {}; // cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n  throw new Error('setTimeout has not been defined');\n}\n\nfunction defaultClearTimeout() {\n  throw new Error('clearTimeout has not been defined');\n}\n\n(function () {\n  try {\n    if (typeof setTimeout === 'function') {\n      cachedSetTimeout = setTimeout;\n    } else {\n      cachedSetTimeout = defaultSetTimout;\n    }\n  } catch (e) {\n    cachedSetTimeout = defaultSetTimout;\n  }\n\n  try {\n    if (typeof clearTimeout === 'function') {\n      cachedClearTimeout = clearTimeout;\n    } else {\n      cachedClearTimeout = defaultClearTimeout;\n    }\n  } catch (e) {\n    cachedClearTimeout = defaultClearTimeout;\n  }\n})();\n\nfunction runTimeout(fun) {\n  if (cachedSetTimeout === setTimeout) {\n    //normal enviroments in sane situations\n    return setTimeout(fun, 0);\n  } // if setTimeout wasn't available but was latter defined\n\n\n  if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n    cachedSetTimeout = setTimeout;\n    return setTimeout(fun, 0);\n  }\n\n  try {\n    // when when somebody has screwed with setTimeout but no I.E. maddness\n    return cachedSetTimeout(fun, 0);\n  } catch (e) {\n    try {\n      // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n      return cachedSetTimeout.call(null, fun, 0);\n    } catch (e) {\n      // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n      return cachedSetTimeout.call(this, fun, 0);\n    }\n  }\n}\n\nfunction runClearTimeout(marker) {\n  if (cachedClearTimeout === clearTimeout) {\n    //normal enviroments in sane situations\n    return clearTimeout(marker);\n  } // if clearTimeout wasn't available but was latter defined\n\n\n  if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n    cachedClearTimeout = clearTimeout;\n    return clearTimeout(marker);\n  }\n\n  try {\n    // when when somebody has screwed with setTimeout but no I.E. maddness\n    return cachedClearTimeout(marker);\n  } catch (e) {\n    try {\n      // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n      return cachedClearTimeout.call(null, marker);\n    } catch (e) {\n      // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n      // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n      return cachedClearTimeout.call(this, marker);\n    }\n  }\n}\n\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n  if (!draining || !currentQueue) {\n    return;\n  }\n\n  draining = false;\n\n  if (currentQueue.length) {\n    queue = currentQueue.concat(queue);\n  } else {\n    queueIndex = -1;\n  }\n\n  if (queue.length) {\n    drainQueue();\n  }\n}\n\nfunction drainQueue() {\n  if (draining) {\n    return;\n  }\n\n  var timeout = runTimeout(cleanUpNextTick);\n  draining = true;\n  var len = queue.length;\n\n  while (len) {\n    currentQueue = queue;\n    queue = [];\n\n    while (++queueIndex < len) {\n      if (currentQueue) {\n        currentQueue[queueIndex].run();\n      }\n    }\n\n    queueIndex = -1;\n    len = queue.length;\n  }\n\n  currentQueue = null;\n  draining = false;\n  runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n  var args = new Array(arguments.length - 1);\n\n  if (arguments.length > 1) {\n    for (var i = 1; i < arguments.length; i++) {\n      args[i - 1] = arguments[i];\n    }\n  }\n\n  queue.push(new Item(fun, args));\n\n  if (queue.length === 1 && !draining) {\n    runTimeout(drainQueue);\n  }\n}; // v8 likes predictible objects\n\n\nfunction Item(fun, array) {\n  this.fun = fun;\n  this.array = array;\n}\n\nItem.prototype.run = function () {\n  this.fun.apply(null, this.array);\n};\n\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\n\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) {\n  return [];\n};\n\nprocess.binding = function (name) {\n  throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () {\n  return '/';\n};\n\nprocess.chdir = function (dir) {\n  throw new Error('process.chdir is not supported');\n};\n\nprocess.umask = function () {\n  return 0;\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvcHJvY2Vzcy9icm93c2VyLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3Byb2Nlc3MvYnJvd3Nlci5qcz9mMjhjIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIHNoaW0gZm9yIHVzaW5nIHByb2Nlc3MgaW4gYnJvd3NlclxudmFyIHByb2Nlc3MgPSBtb2R1bGUuZXhwb3J0cyA9IHt9O1xuXG4vLyBjYWNoZWQgZnJvbSB3aGF0ZXZlciBnbG9iYWwgaXMgcHJlc2VudCBzbyB0aGF0IHRlc3QgcnVubmVycyB0aGF0IHN0dWIgaXRcbi8vIGRvbid0IGJyZWFrIHRoaW5ncy4gIEJ1dCB3ZSBuZWVkIHRvIHdyYXAgaXQgaW4gYSB0cnkgY2F0Y2ggaW4gY2FzZSBpdCBpc1xuLy8gd3JhcHBlZCBpbiBzdHJpY3QgbW9kZSBjb2RlIHdoaWNoIGRvZXNuJ3QgZGVmaW5lIGFueSBnbG9iYWxzLiAgSXQncyBpbnNpZGUgYVxuLy8gZnVuY3Rpb24gYmVjYXVzZSB0cnkvY2F0Y2hlcyBkZW9wdGltaXplIGluIGNlcnRhaW4gZW5naW5lcy5cblxudmFyIGNhY2hlZFNldFRpbWVvdXQ7XG52YXIgY2FjaGVkQ2xlYXJUaW1lb3V0O1xuXG5mdW5jdGlvbiBkZWZhdWx0U2V0VGltb3V0KCkge1xuICAgIHRocm93IG5ldyBFcnJvcignc2V0VGltZW91dCBoYXMgbm90IGJlZW4gZGVmaW5lZCcpO1xufVxuZnVuY3Rpb24gZGVmYXVsdENsZWFyVGltZW91dCAoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdjbGVhclRpbWVvdXQgaGFzIG5vdCBiZWVuIGRlZmluZWQnKTtcbn1cbihmdW5jdGlvbiAoKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKHR5cGVvZiBzZXRUaW1lb3V0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gc2V0VGltZW91dDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBkZWZhdWx0U2V0VGltb3V0O1xuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gZGVmYXVsdFNldFRpbW91dDtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKHR5cGVvZiBjbGVhclRpbWVvdXQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGNsZWFyVGltZW91dDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGRlZmF1bHRDbGVhclRpbWVvdXQ7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGRlZmF1bHRDbGVhclRpbWVvdXQ7XG4gICAgfVxufSAoKSlcbmZ1bmN0aW9uIHJ1blRpbWVvdXQoZnVuKSB7XG4gICAgaWYgKGNhY2hlZFNldFRpbWVvdXQgPT09IHNldFRpbWVvdXQpIHtcbiAgICAgICAgLy9ub3JtYWwgZW52aXJvbWVudHMgaW4gc2FuZSBzaXR1YXRpb25zXG4gICAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfVxuICAgIC8vIGlmIHNldFRpbWVvdXQgd2Fzbid0IGF2YWlsYWJsZSBidXQgd2FzIGxhdHRlciBkZWZpbmVkXG4gICAgaWYgKChjYWNoZWRTZXRUaW1lb3V0ID09PSBkZWZhdWx0U2V0VGltb3V0IHx8ICFjYWNoZWRTZXRUaW1lb3V0KSAmJiBzZXRUaW1lb3V0KSB7XG4gICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBzZXRUaW1lb3V0O1xuICAgICAgICByZXR1cm4gc2V0VGltZW91dChmdW4sIDApO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICAvLyB3aGVuIHdoZW4gc29tZWJvZHkgaGFzIHNjcmV3ZWQgd2l0aCBzZXRUaW1lb3V0IGJ1dCBubyBJLkUuIG1hZGRuZXNzXG4gICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfSBjYXRjaChlKXtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFdoZW4gd2UgYXJlIGluIEkuRS4gYnV0IHRoZSBzY3JpcHQgaGFzIGJlZW4gZXZhbGVkIHNvIEkuRS4gZG9lc24ndCB0cnVzdCB0aGUgZ2xvYmFsIG9iamVjdCB3aGVuIGNhbGxlZCBub3JtYWxseVxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQuY2FsbChudWxsLCBmdW4sIDApO1xuICAgICAgICB9IGNhdGNoKGUpe1xuICAgICAgICAgICAgLy8gc2FtZSBhcyBhYm92ZSBidXQgd2hlbiBpdCdzIGEgdmVyc2lvbiBvZiBJLkUuIHRoYXQgbXVzdCBoYXZlIHRoZSBnbG9iYWwgb2JqZWN0IGZvciAndGhpcycsIGhvcGZ1bGx5IG91ciBjb250ZXh0IGNvcnJlY3Qgb3RoZXJ3aXNlIGl0IHdpbGwgdGhyb3cgYSBnbG9iYWwgZXJyb3JcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0LmNhbGwodGhpcywgZnVuLCAwKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG59XG5mdW5jdGlvbiBydW5DbGVhclRpbWVvdXQobWFya2VyKSB7XG4gICAgaWYgKGNhY2hlZENsZWFyVGltZW91dCA9PT0gY2xlYXJUaW1lb3V0KSB7XG4gICAgICAgIC8vbm9ybWFsIGVudmlyb21lbnRzIGluIHNhbmUgc2l0dWF0aW9uc1xuICAgICAgICByZXR1cm4gY2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfVxuICAgIC8vIGlmIGNsZWFyVGltZW91dCB3YXNuJ3QgYXZhaWxhYmxlIGJ1dCB3YXMgbGF0dGVyIGRlZmluZWRcbiAgICBpZiAoKGNhY2hlZENsZWFyVGltZW91dCA9PT0gZGVmYXVsdENsZWFyVGltZW91dCB8fCAhY2FjaGVkQ2xlYXJUaW1lb3V0KSAmJiBjbGVhclRpbWVvdXQpIHtcbiAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gY2xlYXJUaW1lb3V0O1xuICAgICAgICByZXR1cm4gY2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIC8vIHdoZW4gd2hlbiBzb21lYm9keSBoYXMgc2NyZXdlZCB3aXRoIHNldFRpbWVvdXQgYnV0IG5vIEkuRS4gbWFkZG5lc3NcbiAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dChtYXJrZXIpO1xuICAgIH0gY2F0Y2ggKGUpe1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gV2hlbiB3ZSBhcmUgaW4gSS5FLiBidXQgdGhlIHNjcmlwdCBoYXMgYmVlbiBldmFsZWQgc28gSS5FLiBkb2Vzbid0ICB0cnVzdCB0aGUgZ2xvYmFsIG9iamVjdCB3aGVuIGNhbGxlZCBub3JtYWxseVxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dC5jYWxsKG51bGwsIG1hcmtlcik7XG4gICAgICAgIH0gY2F0Y2ggKGUpe1xuICAgICAgICAgICAgLy8gc2FtZSBhcyBhYm92ZSBidXQgd2hlbiBpdCdzIGEgdmVyc2lvbiBvZiBJLkUuIHRoYXQgbXVzdCBoYXZlIHRoZSBnbG9iYWwgb2JqZWN0IGZvciAndGhpcycsIGhvcGZ1bGx5IG91ciBjb250ZXh0IGNvcnJlY3Qgb3RoZXJ3aXNlIGl0IHdpbGwgdGhyb3cgYSBnbG9iYWwgZXJyb3IuXG4gICAgICAgICAgICAvLyBTb21lIHZlcnNpb25zIG9mIEkuRS4gaGF2ZSBkaWZmZXJlbnQgcnVsZXMgZm9yIGNsZWFyVGltZW91dCB2cyBzZXRUaW1lb3V0XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0LmNhbGwodGhpcywgbWFya2VyKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG5cbn1cbnZhciBxdWV1ZSA9IFtdO1xudmFyIGRyYWluaW5nID0gZmFsc2U7XG52YXIgY3VycmVudFF1ZXVlO1xudmFyIHF1ZXVlSW5kZXggPSAtMTtcblxuZnVuY3Rpb24gY2xlYW5VcE5leHRUaWNrKCkge1xuICAgIGlmICghZHJhaW5pbmcgfHwgIWN1cnJlbnRRdWV1ZSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGRyYWluaW5nID0gZmFsc2U7XG4gICAgaWYgKGN1cnJlbnRRdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgcXVldWUgPSBjdXJyZW50UXVldWUuY29uY2F0KHF1ZXVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XG4gICAgfVxuICAgIGlmIChxdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgZHJhaW5RdWV1ZSgpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZHJhaW5RdWV1ZSgpIHtcbiAgICBpZiAoZHJhaW5pbmcpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgdGltZW91dCA9IHJ1blRpbWVvdXQoY2xlYW5VcE5leHRUaWNrKTtcbiAgICBkcmFpbmluZyA9IHRydWU7XG5cbiAgICB2YXIgbGVuID0gcXVldWUubGVuZ3RoO1xuICAgIHdoaWxlKGxlbikge1xuICAgICAgICBjdXJyZW50UXVldWUgPSBxdWV1ZTtcbiAgICAgICAgcXVldWUgPSBbXTtcbiAgICAgICAgd2hpbGUgKCsrcXVldWVJbmRleCA8IGxlbikge1xuICAgICAgICAgICAgaWYgKGN1cnJlbnRRdWV1ZSkge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRRdWV1ZVtxdWV1ZUluZGV4XS5ydW4oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XG4gICAgICAgIGxlbiA9IHF1ZXVlLmxlbmd0aDtcbiAgICB9XG4gICAgY3VycmVudFF1ZXVlID0gbnVsbDtcbiAgICBkcmFpbmluZyA9IGZhbHNlO1xuICAgIHJ1bkNsZWFyVGltZW91dCh0aW1lb3V0KTtcbn1cblxucHJvY2Vzcy5uZXh0VGljayA9IGZ1bmN0aW9uIChmdW4pIHtcbiAgICB2YXIgYXJncyA9IG5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoIC0gMSk7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBhcmdzW2kgLSAxXSA9IGFyZ3VtZW50c1tpXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBxdWV1ZS5wdXNoKG5ldyBJdGVtKGZ1biwgYXJncykpO1xuICAgIGlmIChxdWV1ZS5sZW5ndGggPT09IDEgJiYgIWRyYWluaW5nKSB7XG4gICAgICAgIHJ1blRpbWVvdXQoZHJhaW5RdWV1ZSk7XG4gICAgfVxufTtcblxuLy8gdjggbGlrZXMgcHJlZGljdGlibGUgb2JqZWN0c1xuZnVuY3Rpb24gSXRlbShmdW4sIGFycmF5KSB7XG4gICAgdGhpcy5mdW4gPSBmdW47XG4gICAgdGhpcy5hcnJheSA9IGFycmF5O1xufVxuSXRlbS5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuZnVuLmFwcGx5KG51bGwsIHRoaXMuYXJyYXkpO1xufTtcbnByb2Nlc3MudGl0bGUgPSAnYnJvd3Nlcic7XG5wcm9jZXNzLmJyb3dzZXIgPSB0cnVlO1xucHJvY2Vzcy5lbnYgPSB7fTtcbnByb2Nlc3MuYXJndiA9IFtdO1xucHJvY2Vzcy52ZXJzaW9uID0gJyc7IC8vIGVtcHR5IHN0cmluZyB0byBhdm9pZCByZWdleHAgaXNzdWVzXG5wcm9jZXNzLnZlcnNpb25zID0ge307XG5cbmZ1bmN0aW9uIG5vb3AoKSB7fVxuXG5wcm9jZXNzLm9uID0gbm9vcDtcbnByb2Nlc3MuYWRkTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5vbmNlID0gbm9vcDtcbnByb2Nlc3Mub2ZmID0gbm9vcDtcbnByb2Nlc3MucmVtb3ZlTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5yZW1vdmVBbGxMaXN0ZW5lcnMgPSBub29wO1xucHJvY2Vzcy5lbWl0ID0gbm9vcDtcbnByb2Nlc3MucHJlcGVuZExpc3RlbmVyID0gbm9vcDtcbnByb2Nlc3MucHJlcGVuZE9uY2VMaXN0ZW5lciA9IG5vb3A7XG5cbnByb2Nlc3MubGlzdGVuZXJzID0gZnVuY3Rpb24gKG5hbWUpIHsgcmV0dXJuIFtdIH1cblxucHJvY2Vzcy5iaW5kaW5nID0gZnVuY3Rpb24gKG5hbWUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuYmluZGluZyBpcyBub3Qgc3VwcG9ydGVkJyk7XG59O1xuXG5wcm9jZXNzLmN3ZCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuICcvJyB9O1xucHJvY2Vzcy5jaGRpciA9IGZ1bmN0aW9uIChkaXIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuY2hkaXIgaXMgbm90IHN1cHBvcnRlZCcpO1xufTtcbnByb2Nlc3MudW1hc2sgPSBmdW5jdGlvbigpIHsgcmV0dXJuIDA7IH07XG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/process/browser.js\n");

/***/ }),

/***/ "./node_modules/regenerator-runtime/runtime.js":
/*!*****************************************************!*\
  !*** ./node_modules/regenerator-runtime/runtime.js ***!
  \*****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\nvar runtime = function (exports) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []); // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n    return generator;\n  }\n\n  exports.wrap = wrap; // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n\n  function tryCatch(fn, obj, arg) {\n    try {\n      return {\n        type: \"normal\",\n        arg: fn.call(obj, arg)\n      };\n    } catch (err) {\n      return {\n        type: \"throw\",\n        arg: err\n      };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\"; // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n\n  var ContinueSentinel = {}; // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n\n  function Generator() {}\n\n  function GeneratorFunction() {}\n\n  function GeneratorFunctionPrototype() {} // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n\n\n  var IteratorPrototype = {};\n\n  IteratorPrototype[iteratorSymbol] = function () {\n    return this;\n  };\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n\n  if (NativeIteratorPrototype && NativeIteratorPrototype !== Op && hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n  GeneratorFunctionPrototype.constructor = GeneratorFunction;\n  GeneratorFunctionPrototype[toStringTagSymbol] = GeneratorFunction.displayName = \"GeneratorFunction\"; // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function (method) {\n      prototype[method] = function (arg) {\n        return this._invoke(method, arg);\n      };\n    });\n  }\n\n  exports.isGeneratorFunction = function (genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor ? ctor === GeneratorFunction || // For the native GeneratorFunction constructor, the best we can\n    // do is to check its .name property.\n    (ctor.displayName || ctor.name) === \"GeneratorFunction\" : false;\n  };\n\n  exports.mark = function (genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n\n      if (!(toStringTagSymbol in genFun)) {\n        genFun[toStringTagSymbol] = \"GeneratorFunction\";\n      }\n    }\n\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  }; // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n\n\n  exports.awrap = function (arg) {\n    return {\n      __await: arg\n    };\n  };\n\n  function AsyncIterator(generator) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n\n        if (value && typeof value === \"object\" && hasOwn.call(value, \"__await\")) {\n          return Promise.resolve(value.__await).then(function (value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function (err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return Promise.resolve(value).then(function (unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function (error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new Promise(function (resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise = // If enqueue has been called before, then we want to wait until\n      // all previous Promises have been resolved before calling invoke,\n      // so that results are always delivered in the correct order. If\n      // enqueue has not been called before, then it is important to\n      // call invoke immediately, without waiting on a callback to fire,\n      // so that the async generator function has the opportunity to do\n      // any necessary setup in a predictable way. This predictability\n      // is why the Promise constructor synchronously invokes its\n      // executor callback, and why async functions synchronously\n      // execute code before the first await. Since we implement simple\n      // async functions in terms of async generators, it is especially\n      // important to get this right, even though it requires care.\n      previousPromise ? previousPromise.then(callInvokeWithMethodAndArg, // Avoid propagating failures to Promises returned by later\n      // invocations of the iterator.\n      callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg();\n    } // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n\n\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n\n  AsyncIterator.prototype[asyncIteratorSymbol] = function () {\n    return this;\n  };\n\n  exports.AsyncIterator = AsyncIterator; // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n\n  exports.async = function (innerFn, outerFn, self, tryLocsList) {\n    var iter = new AsyncIterator(wrap(innerFn, outerFn, self, tryLocsList));\n    return exports.isGeneratorFunction(outerFn) ? iter // If outerFn is a generator, return the full iterator.\n    : iter.next().then(function (result) {\n      return result.done ? result.value : iter.next();\n    });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        } // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n\n\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n        var record = tryCatch(innerFn, self, context);\n\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done ? GenStateCompleted : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted; // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  } // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n\n\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        // Note: [\"return\"] must be used for ES3 parsing compatibility.\n        if (delegate.iterator[\"return\"]) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (!info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value; // Resume execution at the desired location (see delegateYield).\n\n      context.next = delegate.nextLoc; // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    } // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n\n\n    context.delegate = null;\n    return ContinueSentinel;\n  } // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n\n\n  defineIteratorMethods(Gp);\n  Gp[toStringTagSymbol] = \"Generator\"; // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n\n  Gp[iteratorSymbol] = function () {\n    return this;\n  };\n\n  Gp.toString = function () {\n    return \"[object Generator]\";\n  };\n\n  function pushTryEntry(locs) {\n    var entry = {\n      tryLoc: locs[0]\n    };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{\n      tryLoc: \"root\"\n    }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  exports.keys = function (object) {\n    var keys = [];\n\n    for (var key in object) {\n      keys.push(key);\n    }\n\n    keys.reverse(); // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      } // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n\n\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1,\n            next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n          return next;\n        };\n\n        return next.next = next;\n      }\n    } // Return an iterator with no values.\n\n\n    return {\n      next: doneResult\n    };\n  }\n\n  exports.values = values;\n\n  function doneResult() {\n    return {\n      value: undefined,\n      done: true\n    };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n    reset: function (skipTempReset) {\n      this.prev = 0;\n      this.next = 0; // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n      this.method = \"next\";\n      this.arg = undefined;\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" && hasOwn.call(this, name) && !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n    stop: function () {\n      this.done = true;\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n    dispatchException: function (exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !!caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n    abrupt: function (type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n\n        if (entry.tryLoc <= this.prev && hasOwn.call(entry, \"finallyLoc\") && this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry && (type === \"break\" || type === \"continue\") && finallyEntry.tryLoc <= arg && arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n    complete: function (record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" || record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n    finish: function (finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n    \"catch\": function (tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n\n          return thrown;\n        }\n      } // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n\n\n      throw new Error(\"illegal catch attempt\");\n    },\n    delegateYield: function (iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  }; // Regardless of whether this script is executing as a CommonJS module\n  // or not, return the runtime object so that we can declare the variable\n  // regeneratorRuntime in the outer scope, which allows this module to be\n  // injected easily by `bin/regenerator --include-runtime script.js`.\n\n  return exports;\n}( // If this script is executing as a CommonJS module, use module.exports\n// as the regeneratorRuntime namespace. Otherwise create a new empty\n// object. Either way, the resulting object will be used to initialize\n// the regeneratorRuntime variable at the top of this file.\n true ? module.exports : undefined);\n\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  // This module should not be running in strict mode, so the above\n  // assignment should always work unless something is misconfigured. Just\n  // in case runtime.js accidentally runs in strict mode, we can escape\n  // strict mode using a global Function call. This could conceivably fail\n  // if a Content Security Policy forbids using Function, but in that case\n  // the proper solution is to fix the accidental strict mode problem. If\n  // you've misconfigured your bundler to force strict mode and applied a\n  // CSP to forbid Function, and you're not willing to fix either of those\n  // problems, please detail your unique predicament in a GitHub issue.\n  Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvcmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3JlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcz85NmNmIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE0LXByZXNlbnQsIEZhY2Vib29rLCBJbmMuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4gKi9cblxudmFyIHJ1bnRpbWUgPSAoZnVuY3Rpb24gKGV4cG9ydHMpIHtcbiAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgdmFyIE9wID0gT2JqZWN0LnByb3RvdHlwZTtcbiAgdmFyIGhhc093biA9IE9wLmhhc093blByb3BlcnR5O1xuICB2YXIgdW5kZWZpbmVkOyAvLyBNb3JlIGNvbXByZXNzaWJsZSB0aGFuIHZvaWQgMC5cbiAgdmFyICRTeW1ib2wgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgPyBTeW1ib2wgOiB7fTtcbiAgdmFyIGl0ZXJhdG9yU3ltYm9sID0gJFN5bWJvbC5pdGVyYXRvciB8fCBcIkBAaXRlcmF0b3JcIjtcbiAgdmFyIGFzeW5jSXRlcmF0b3JTeW1ib2wgPSAkU3ltYm9sLmFzeW5jSXRlcmF0b3IgfHwgXCJAQGFzeW5jSXRlcmF0b3JcIjtcbiAgdmFyIHRvU3RyaW5nVGFnU3ltYm9sID0gJFN5bWJvbC50b1N0cmluZ1RhZyB8fCBcIkBAdG9TdHJpbmdUYWdcIjtcblxuICBmdW5jdGlvbiB3cmFwKGlubmVyRm4sIG91dGVyRm4sIHNlbGYsIHRyeUxvY3NMaXN0KSB7XG4gICAgLy8gSWYgb3V0ZXJGbiBwcm92aWRlZCBhbmQgb3V0ZXJGbi5wcm90b3R5cGUgaXMgYSBHZW5lcmF0b3IsIHRoZW4gb3V0ZXJGbi5wcm90b3R5cGUgaW5zdGFuY2VvZiBHZW5lcmF0b3IuXG4gICAgdmFyIHByb3RvR2VuZXJhdG9yID0gb3V0ZXJGbiAmJiBvdXRlckZuLnByb3RvdHlwZSBpbnN0YW5jZW9mIEdlbmVyYXRvciA/IG91dGVyRm4gOiBHZW5lcmF0b3I7XG4gICAgdmFyIGdlbmVyYXRvciA9IE9iamVjdC5jcmVhdGUocHJvdG9HZW5lcmF0b3IucHJvdG90eXBlKTtcbiAgICB2YXIgY29udGV4dCA9IG5ldyBDb250ZXh0KHRyeUxvY3NMaXN0IHx8IFtdKTtcblxuICAgIC8vIFRoZSAuX2ludm9rZSBtZXRob2QgdW5pZmllcyB0aGUgaW1wbGVtZW50YXRpb25zIG9mIHRoZSAubmV4dCxcbiAgICAvLyAudGhyb3csIGFuZCAucmV0dXJuIG1ldGhvZHMuXG4gICAgZ2VuZXJhdG9yLl9pbnZva2UgPSBtYWtlSW52b2tlTWV0aG9kKGlubmVyRm4sIHNlbGYsIGNvbnRleHQpO1xuXG4gICAgcmV0dXJuIGdlbmVyYXRvcjtcbiAgfVxuICBleHBvcnRzLndyYXAgPSB3cmFwO1xuXG4gIC8vIFRyeS9jYXRjaCBoZWxwZXIgdG8gbWluaW1pemUgZGVvcHRpbWl6YXRpb25zLiBSZXR1cm5zIGEgY29tcGxldGlvblxuICAvLyByZWNvcmQgbGlrZSBjb250ZXh0LnRyeUVudHJpZXNbaV0uY29tcGxldGlvbi4gVGhpcyBpbnRlcmZhY2UgY291bGRcbiAgLy8gaGF2ZSBiZWVuIChhbmQgd2FzIHByZXZpb3VzbHkpIGRlc2lnbmVkIHRvIHRha2UgYSBjbG9zdXJlIHRvIGJlXG4gIC8vIGludm9rZWQgd2l0aG91dCBhcmd1bWVudHMsIGJ1dCBpbiBhbGwgdGhlIGNhc2VzIHdlIGNhcmUgYWJvdXQgd2VcbiAgLy8gYWxyZWFkeSBoYXZlIGFuIGV4aXN0aW5nIG1ldGhvZCB3ZSB3YW50IHRvIGNhbGwsIHNvIHRoZXJlJ3Mgbm8gbmVlZFxuICAvLyB0byBjcmVhdGUgYSBuZXcgZnVuY3Rpb24gb2JqZWN0LiBXZSBjYW4gZXZlbiBnZXQgYXdheSB3aXRoIGFzc3VtaW5nXG4gIC8vIHRoZSBtZXRob2QgdGFrZXMgZXhhY3RseSBvbmUgYXJndW1lbnQsIHNpbmNlIHRoYXQgaGFwcGVucyB0byBiZSB0cnVlXG4gIC8vIGluIGV2ZXJ5IGNhc2UsIHNvIHdlIGRvbid0IGhhdmUgdG8gdG91Y2ggdGhlIGFyZ3VtZW50cyBvYmplY3QuIFRoZVxuICAvLyBvbmx5IGFkZGl0aW9uYWwgYWxsb2NhdGlvbiByZXF1aXJlZCBpcyB0aGUgY29tcGxldGlvbiByZWNvcmQsIHdoaWNoXG4gIC8vIGhhcyBhIHN0YWJsZSBzaGFwZSBhbmQgc28gaG9wZWZ1bGx5IHNob3VsZCBiZSBjaGVhcCB0byBhbGxvY2F0ZS5cbiAgZnVuY3Rpb24gdHJ5Q2F0Y2goZm4sIG9iaiwgYXJnKSB7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiB7IHR5cGU6IFwibm9ybWFsXCIsIGFyZzogZm4uY2FsbChvYmosIGFyZykgfTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIHJldHVybiB7IHR5cGU6IFwidGhyb3dcIiwgYXJnOiBlcnIgfTtcbiAgICB9XG4gIH1cblxuICB2YXIgR2VuU3RhdGVTdXNwZW5kZWRTdGFydCA9IFwic3VzcGVuZGVkU3RhcnRcIjtcbiAgdmFyIEdlblN0YXRlU3VzcGVuZGVkWWllbGQgPSBcInN1c3BlbmRlZFlpZWxkXCI7XG4gIHZhciBHZW5TdGF0ZUV4ZWN1dGluZyA9IFwiZXhlY3V0aW5nXCI7XG4gIHZhciBHZW5TdGF0ZUNvbXBsZXRlZCA9IFwiY29tcGxldGVkXCI7XG5cbiAgLy8gUmV0dXJuaW5nIHRoaXMgb2JqZWN0IGZyb20gdGhlIGlubmVyRm4gaGFzIHRoZSBzYW1lIGVmZmVjdCBhc1xuICAvLyBicmVha2luZyBvdXQgb2YgdGhlIGRpc3BhdGNoIHN3aXRjaCBzdGF0ZW1lbnQuXG4gIHZhciBDb250aW51ZVNlbnRpbmVsID0ge307XG5cbiAgLy8gRHVtbXkgY29uc3RydWN0b3IgZnVuY3Rpb25zIHRoYXQgd2UgdXNlIGFzIHRoZSAuY29uc3RydWN0b3IgYW5kXG4gIC8vIC5jb25zdHJ1Y3Rvci5wcm90b3R5cGUgcHJvcGVydGllcyBmb3IgZnVuY3Rpb25zIHRoYXQgcmV0dXJuIEdlbmVyYXRvclxuICAvLyBvYmplY3RzLiBGb3IgZnVsbCBzcGVjIGNvbXBsaWFuY2UsIHlvdSBtYXkgd2lzaCB0byBjb25maWd1cmUgeW91clxuICAvLyBtaW5pZmllciBub3QgdG8gbWFuZ2xlIHRoZSBuYW1lcyBvZiB0aGVzZSB0d28gZnVuY3Rpb25zLlxuICBmdW5jdGlvbiBHZW5lcmF0b3IoKSB7fVxuICBmdW5jdGlvbiBHZW5lcmF0b3JGdW5jdGlvbigpIHt9XG4gIGZ1bmN0aW9uIEdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlKCkge31cblxuICAvLyBUaGlzIGlzIGEgcG9seWZpbGwgZm9yICVJdGVyYXRvclByb3RvdHlwZSUgZm9yIGVudmlyb25tZW50cyB0aGF0XG4gIC8vIGRvbid0IG5hdGl2ZWx5IHN1cHBvcnQgaXQuXG4gIHZhciBJdGVyYXRvclByb3RvdHlwZSA9IHt9O1xuICBJdGVyYXRvclByb3RvdHlwZVtpdGVyYXRvclN5bWJvbF0gPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgdmFyIGdldFByb3RvID0gT2JqZWN0LmdldFByb3RvdHlwZU9mO1xuICB2YXIgTmF0aXZlSXRlcmF0b3JQcm90b3R5cGUgPSBnZXRQcm90byAmJiBnZXRQcm90byhnZXRQcm90byh2YWx1ZXMoW10pKSk7XG4gIGlmIChOYXRpdmVJdGVyYXRvclByb3RvdHlwZSAmJlxuICAgICAgTmF0aXZlSXRlcmF0b3JQcm90b3R5cGUgIT09IE9wICYmXG4gICAgICBoYXNPd24uY2FsbChOYXRpdmVJdGVyYXRvclByb3RvdHlwZSwgaXRlcmF0b3JTeW1ib2wpKSB7XG4gICAgLy8gVGhpcyBlbnZpcm9ubWVudCBoYXMgYSBuYXRpdmUgJUl0ZXJhdG9yUHJvdG90eXBlJTsgdXNlIGl0IGluc3RlYWRcbiAgICAvLyBvZiB0aGUgcG9seWZpbGwuXG4gICAgSXRlcmF0b3JQcm90b3R5cGUgPSBOYXRpdmVJdGVyYXRvclByb3RvdHlwZTtcbiAgfVxuXG4gIHZhciBHcCA9IEdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlLnByb3RvdHlwZSA9XG4gICAgR2VuZXJhdG9yLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoSXRlcmF0b3JQcm90b3R5cGUpO1xuICBHZW5lcmF0b3JGdW5jdGlvbi5wcm90b3R5cGUgPSBHcC5jb25zdHJ1Y3RvciA9IEdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlO1xuICBHZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IEdlbmVyYXRvckZ1bmN0aW9uO1xuICBHZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZVt0b1N0cmluZ1RhZ1N5bWJvbF0gPVxuICAgIEdlbmVyYXRvckZ1bmN0aW9uLmRpc3BsYXlOYW1lID0gXCJHZW5lcmF0b3JGdW5jdGlvblwiO1xuXG4gIC8vIEhlbHBlciBmb3IgZGVmaW5pbmcgdGhlIC5uZXh0LCAudGhyb3csIGFuZCAucmV0dXJuIG1ldGhvZHMgb2YgdGhlXG4gIC8vIEl0ZXJhdG9yIGludGVyZmFjZSBpbiB0ZXJtcyBvZiBhIHNpbmdsZSAuX2ludm9rZSBtZXRob2QuXG4gIGZ1bmN0aW9uIGRlZmluZUl0ZXJhdG9yTWV0aG9kcyhwcm90b3R5cGUpIHtcbiAgICBbXCJuZXh0XCIsIFwidGhyb3dcIiwgXCJyZXR1cm5cIl0uZm9yRWFjaChmdW5jdGlvbihtZXRob2QpIHtcbiAgICAgIHByb3RvdHlwZVttZXRob2RdID0gZnVuY3Rpb24oYXJnKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9pbnZva2UobWV0aG9kLCBhcmcpO1xuICAgICAgfTtcbiAgICB9KTtcbiAgfVxuXG4gIGV4cG9ydHMuaXNHZW5lcmF0b3JGdW5jdGlvbiA9IGZ1bmN0aW9uKGdlbkZ1bikge1xuICAgIHZhciBjdG9yID0gdHlwZW9mIGdlbkZ1biA9PT0gXCJmdW5jdGlvblwiICYmIGdlbkZ1bi5jb25zdHJ1Y3RvcjtcbiAgICByZXR1cm4gY3RvclxuICAgICAgPyBjdG9yID09PSBHZW5lcmF0b3JGdW5jdGlvbiB8fFxuICAgICAgICAvLyBGb3IgdGhlIG5hdGl2ZSBHZW5lcmF0b3JGdW5jdGlvbiBjb25zdHJ1Y3RvciwgdGhlIGJlc3Qgd2UgY2FuXG4gICAgICAgIC8vIGRvIGlzIHRvIGNoZWNrIGl0cyAubmFtZSBwcm9wZXJ0eS5cbiAgICAgICAgKGN0b3IuZGlzcGxheU5hbWUgfHwgY3Rvci5uYW1lKSA9PT0gXCJHZW5lcmF0b3JGdW5jdGlvblwiXG4gICAgICA6IGZhbHNlO1xuICB9O1xuXG4gIGV4cG9ydHMubWFyayA9IGZ1bmN0aW9uKGdlbkZ1bikge1xuICAgIGlmIChPYmplY3Quc2V0UHJvdG90eXBlT2YpIHtcbiAgICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZihnZW5GdW4sIEdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZ2VuRnVuLl9fcHJvdG9fXyA9IEdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlO1xuICAgICAgaWYgKCEodG9TdHJpbmdUYWdTeW1ib2wgaW4gZ2VuRnVuKSkge1xuICAgICAgICBnZW5GdW5bdG9TdHJpbmdUYWdTeW1ib2xdID0gXCJHZW5lcmF0b3JGdW5jdGlvblwiO1xuICAgICAgfVxuICAgIH1cbiAgICBnZW5GdW4ucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShHcCk7XG4gICAgcmV0dXJuIGdlbkZ1bjtcbiAgfTtcblxuICAvLyBXaXRoaW4gdGhlIGJvZHkgb2YgYW55IGFzeW5jIGZ1bmN0aW9uLCBgYXdhaXQgeGAgaXMgdHJhbnNmb3JtZWQgdG9cbiAgLy8gYHlpZWxkIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcCh4KWAsIHNvIHRoYXQgdGhlIHJ1bnRpbWUgY2FuIHRlc3RcbiAgLy8gYGhhc093bi5jYWxsKHZhbHVlLCBcIl9fYXdhaXRcIilgIHRvIGRldGVybWluZSBpZiB0aGUgeWllbGRlZCB2YWx1ZSBpc1xuICAvLyBtZWFudCB0byBiZSBhd2FpdGVkLlxuICBleHBvcnRzLmF3cmFwID0gZnVuY3Rpb24oYXJnKSB7XG4gICAgcmV0dXJuIHsgX19hd2FpdDogYXJnIH07XG4gIH07XG5cbiAgZnVuY3Rpb24gQXN5bmNJdGVyYXRvcihnZW5lcmF0b3IpIHtcbiAgICBmdW5jdGlvbiBpbnZva2UobWV0aG9kLCBhcmcsIHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgdmFyIHJlY29yZCA9IHRyeUNhdGNoKGdlbmVyYXRvclttZXRob2RdLCBnZW5lcmF0b3IsIGFyZyk7XG4gICAgICBpZiAocmVjb3JkLnR5cGUgPT09IFwidGhyb3dcIikge1xuICAgICAgICByZWplY3QocmVjb3JkLmFyZyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgcmVzdWx0ID0gcmVjb3JkLmFyZztcbiAgICAgICAgdmFyIHZhbHVlID0gcmVzdWx0LnZhbHVlO1xuICAgICAgICBpZiAodmFsdWUgJiZcbiAgICAgICAgICAgIHR5cGVvZiB2YWx1ZSA9PT0gXCJvYmplY3RcIiAmJlxuICAgICAgICAgICAgaGFzT3duLmNhbGwodmFsdWUsIFwiX19hd2FpdFwiKSkge1xuICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodmFsdWUuX19hd2FpdCkudGhlbihmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICAgICAgaW52b2tlKFwibmV4dFwiLCB2YWx1ZSwgcmVzb2x2ZSwgcmVqZWN0KTtcbiAgICAgICAgICB9LCBmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgICAgIGludm9rZShcInRocm93XCIsIGVyciwgcmVzb2x2ZSwgcmVqZWN0KTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodmFsdWUpLnRoZW4oZnVuY3Rpb24odW53cmFwcGVkKSB7XG4gICAgICAgICAgLy8gV2hlbiBhIHlpZWxkZWQgUHJvbWlzZSBpcyByZXNvbHZlZCwgaXRzIGZpbmFsIHZhbHVlIGJlY29tZXNcbiAgICAgICAgICAvLyB0aGUgLnZhbHVlIG9mIHRoZSBQcm9taXNlPHt2YWx1ZSxkb25lfT4gcmVzdWx0IGZvciB0aGVcbiAgICAgICAgICAvLyBjdXJyZW50IGl0ZXJhdGlvbi5cbiAgICAgICAgICByZXN1bHQudmFsdWUgPSB1bndyYXBwZWQ7XG4gICAgICAgICAgcmVzb2x2ZShyZXN1bHQpO1xuICAgICAgICB9LCBmdW5jdGlvbihlcnJvcikge1xuICAgICAgICAgIC8vIElmIGEgcmVqZWN0ZWQgUHJvbWlzZSB3YXMgeWllbGRlZCwgdGhyb3cgdGhlIHJlamVjdGlvbiBiYWNrXG4gICAgICAgICAgLy8gaW50byB0aGUgYXN5bmMgZ2VuZXJhdG9yIGZ1bmN0aW9uIHNvIGl0IGNhbiBiZSBoYW5kbGVkIHRoZXJlLlxuICAgICAgICAgIHJldHVybiBpbnZva2UoXCJ0aHJvd1wiLCBlcnJvciwgcmVzb2x2ZSwgcmVqZWN0KTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdmFyIHByZXZpb3VzUHJvbWlzZTtcblxuICAgIGZ1bmN0aW9uIGVucXVldWUobWV0aG9kLCBhcmcpIHtcbiAgICAgIGZ1bmN0aW9uIGNhbGxJbnZva2VXaXRoTWV0aG9kQW5kQXJnKCkge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgaW52b2tlKG1ldGhvZCwgYXJnLCByZXNvbHZlLCByZWplY3QpO1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHByZXZpb3VzUHJvbWlzZSA9XG4gICAgICAgIC8vIElmIGVucXVldWUgaGFzIGJlZW4gY2FsbGVkIGJlZm9yZSwgdGhlbiB3ZSB3YW50IHRvIHdhaXQgdW50aWxcbiAgICAgICAgLy8gYWxsIHByZXZpb3VzIFByb21pc2VzIGhhdmUgYmVlbiByZXNvbHZlZCBiZWZvcmUgY2FsbGluZyBpbnZva2UsXG4gICAgICAgIC8vIHNvIHRoYXQgcmVzdWx0cyBhcmUgYWx3YXlzIGRlbGl2ZXJlZCBpbiB0aGUgY29ycmVjdCBvcmRlci4gSWZcbiAgICAgICAgLy8gZW5xdWV1ZSBoYXMgbm90IGJlZW4gY2FsbGVkIGJlZm9yZSwgdGhlbiBpdCBpcyBpbXBvcnRhbnQgdG9cbiAgICAgICAgLy8gY2FsbCBpbnZva2UgaW1tZWRpYXRlbHksIHdpdGhvdXQgd2FpdGluZyBvbiBhIGNhbGxiYWNrIHRvIGZpcmUsXG4gICAgICAgIC8vIHNvIHRoYXQgdGhlIGFzeW5jIGdlbmVyYXRvciBmdW5jdGlvbiBoYXMgdGhlIG9wcG9ydHVuaXR5IHRvIGRvXG4gICAgICAgIC8vIGFueSBuZWNlc3Nhcnkgc2V0dXAgaW4gYSBwcmVkaWN0YWJsZSB3YXkuIFRoaXMgcHJlZGljdGFiaWxpdHlcbiAgICAgICAgLy8gaXMgd2h5IHRoZSBQcm9taXNlIGNvbnN0cnVjdG9yIHN5bmNocm9ub3VzbHkgaW52b2tlcyBpdHNcbiAgICAgICAgLy8gZXhlY3V0b3IgY2FsbGJhY2ssIGFuZCB3aHkgYXN5bmMgZnVuY3Rpb25zIHN5bmNocm9ub3VzbHlcbiAgICAgICAgLy8gZXhlY3V0ZSBjb2RlIGJlZm9yZSB0aGUgZmlyc3QgYXdhaXQuIFNpbmNlIHdlIGltcGxlbWVudCBzaW1wbGVcbiAgICAgICAgLy8gYXN5bmMgZnVuY3Rpb25zIGluIHRlcm1zIG9mIGFzeW5jIGdlbmVyYXRvcnMsIGl0IGlzIGVzcGVjaWFsbHlcbiAgICAgICAgLy8gaW1wb3J0YW50IHRvIGdldCB0aGlzIHJpZ2h0LCBldmVuIHRob3VnaCBpdCByZXF1aXJlcyBjYXJlLlxuICAgICAgICBwcmV2aW91c1Byb21pc2UgPyBwcmV2aW91c1Byb21pc2UudGhlbihcbiAgICAgICAgICBjYWxsSW52b2tlV2l0aE1ldGhvZEFuZEFyZyxcbiAgICAgICAgICAvLyBBdm9pZCBwcm9wYWdhdGluZyBmYWlsdXJlcyB0byBQcm9taXNlcyByZXR1cm5lZCBieSBsYXRlclxuICAgICAgICAgIC8vIGludm9jYXRpb25zIG9mIHRoZSBpdGVyYXRvci5cbiAgICAgICAgICBjYWxsSW52b2tlV2l0aE1ldGhvZEFuZEFyZ1xuICAgICAgICApIDogY2FsbEludm9rZVdpdGhNZXRob2RBbmRBcmcoKTtcbiAgICB9XG5cbiAgICAvLyBEZWZpbmUgdGhlIHVuaWZpZWQgaGVscGVyIG1ldGhvZCB0aGF0IGlzIHVzZWQgdG8gaW1wbGVtZW50IC5uZXh0LFxuICAgIC8vIC50aHJvdywgYW5kIC5yZXR1cm4gKHNlZSBkZWZpbmVJdGVyYXRvck1ldGhvZHMpLlxuICAgIHRoaXMuX2ludm9rZSA9IGVucXVldWU7XG4gIH1cblxuICBkZWZpbmVJdGVyYXRvck1ldGhvZHMoQXN5bmNJdGVyYXRvci5wcm90b3R5cGUpO1xuICBBc3luY0l0ZXJhdG9yLnByb3RvdHlwZVthc3luY0l0ZXJhdG9yU3ltYm9sXSA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcztcbiAgfTtcbiAgZXhwb3J0cy5Bc3luY0l0ZXJhdG9yID0gQXN5bmNJdGVyYXRvcjtcblxuICAvLyBOb3RlIHRoYXQgc2ltcGxlIGFzeW5jIGZ1bmN0aW9ucyBhcmUgaW1wbGVtZW50ZWQgb24gdG9wIG9mXG4gIC8vIEFzeW5jSXRlcmF0b3Igb2JqZWN0czsgdGhleSBqdXN0IHJldHVybiBhIFByb21pc2UgZm9yIHRoZSB2YWx1ZSBvZlxuICAvLyB0aGUgZmluYWwgcmVzdWx0IHByb2R1Y2VkIGJ5IHRoZSBpdGVyYXRvci5cbiAgZXhwb3J0cy5hc3luYyA9IGZ1bmN0aW9uKGlubmVyRm4sIG91dGVyRm4sIHNlbGYsIHRyeUxvY3NMaXN0KSB7XG4gICAgdmFyIGl0ZXIgPSBuZXcgQXN5bmNJdGVyYXRvcihcbiAgICAgIHdyYXAoaW5uZXJGbiwgb3V0ZXJGbiwgc2VsZiwgdHJ5TG9jc0xpc3QpXG4gICAgKTtcblxuICAgIHJldHVybiBleHBvcnRzLmlzR2VuZXJhdG9yRnVuY3Rpb24ob3V0ZXJGbilcbiAgICAgID8gaXRlciAvLyBJZiBvdXRlckZuIGlzIGEgZ2VuZXJhdG9yLCByZXR1cm4gdGhlIGZ1bGwgaXRlcmF0b3IuXG4gICAgICA6IGl0ZXIubmV4dCgpLnRoZW4oZnVuY3Rpb24ocmVzdWx0KSB7XG4gICAgICAgICAgcmV0dXJuIHJlc3VsdC5kb25lID8gcmVzdWx0LnZhbHVlIDogaXRlci5uZXh0KCk7XG4gICAgICAgIH0pO1xuICB9O1xuXG4gIGZ1bmN0aW9uIG1ha2VJbnZva2VNZXRob2QoaW5uZXJGbiwgc2VsZiwgY29udGV4dCkge1xuICAgIHZhciBzdGF0ZSA9IEdlblN0YXRlU3VzcGVuZGVkU3RhcnQ7XG5cbiAgICByZXR1cm4gZnVuY3Rpb24gaW52b2tlKG1ldGhvZCwgYXJnKSB7XG4gICAgICBpZiAoc3RhdGUgPT09IEdlblN0YXRlRXhlY3V0aW5nKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIkdlbmVyYXRvciBpcyBhbHJlYWR5IHJ1bm5pbmdcIik7XG4gICAgICB9XG5cbiAgICAgIGlmIChzdGF0ZSA9PT0gR2VuU3RhdGVDb21wbGV0ZWQpIHtcbiAgICAgICAgaWYgKG1ldGhvZCA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgICAgdGhyb3cgYXJnO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQmUgZm9yZ2l2aW5nLCBwZXIgMjUuMy4zLjMuMyBvZiB0aGUgc3BlYzpcbiAgICAgICAgLy8gaHR0cHM6Ly9wZW9wbGUubW96aWxsYS5vcmcvfmpvcmVuZG9yZmYvZXM2LWRyYWZ0Lmh0bWwjc2VjLWdlbmVyYXRvcnJlc3VtZVxuICAgICAgICByZXR1cm4gZG9uZVJlc3VsdCgpO1xuICAgICAgfVxuXG4gICAgICBjb250ZXh0Lm1ldGhvZCA9IG1ldGhvZDtcbiAgICAgIGNvbnRleHQuYXJnID0gYXJnO1xuXG4gICAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgICB2YXIgZGVsZWdhdGUgPSBjb250ZXh0LmRlbGVnYXRlO1xuICAgICAgICBpZiAoZGVsZWdhdGUpIHtcbiAgICAgICAgICB2YXIgZGVsZWdhdGVSZXN1bHQgPSBtYXliZUludm9rZURlbGVnYXRlKGRlbGVnYXRlLCBjb250ZXh0KTtcbiAgICAgICAgICBpZiAoZGVsZWdhdGVSZXN1bHQpIHtcbiAgICAgICAgICAgIGlmIChkZWxlZ2F0ZVJlc3VsdCA9PT0gQ29udGludWVTZW50aW5lbCkgY29udGludWU7XG4gICAgICAgICAgICByZXR1cm4gZGVsZWdhdGVSZXN1bHQ7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGNvbnRleHQubWV0aG9kID09PSBcIm5leHRcIikge1xuICAgICAgICAgIC8vIFNldHRpbmcgY29udGV4dC5fc2VudCBmb3IgbGVnYWN5IHN1cHBvcnQgb2YgQmFiZWwnc1xuICAgICAgICAgIC8vIGZ1bmN0aW9uLnNlbnQgaW1wbGVtZW50YXRpb24uXG4gICAgICAgICAgY29udGV4dC5zZW50ID0gY29udGV4dC5fc2VudCA9IGNvbnRleHQuYXJnO1xuXG4gICAgICAgIH0gZWxzZSBpZiAoY29udGV4dC5tZXRob2QgPT09IFwidGhyb3dcIikge1xuICAgICAgICAgIGlmIChzdGF0ZSA9PT0gR2VuU3RhdGVTdXNwZW5kZWRTdGFydCkge1xuICAgICAgICAgICAgc3RhdGUgPSBHZW5TdGF0ZUNvbXBsZXRlZDtcbiAgICAgICAgICAgIHRocm93IGNvbnRleHQuYXJnO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGNvbnRleHQuZGlzcGF0Y2hFeGNlcHRpb24oY29udGV4dC5hcmcpO1xuXG4gICAgICAgIH0gZWxzZSBpZiAoY29udGV4dC5tZXRob2QgPT09IFwicmV0dXJuXCIpIHtcbiAgICAgICAgICBjb250ZXh0LmFicnVwdChcInJldHVyblwiLCBjb250ZXh0LmFyZyk7XG4gICAgICAgIH1cblxuICAgICAgICBzdGF0ZSA9IEdlblN0YXRlRXhlY3V0aW5nO1xuXG4gICAgICAgIHZhciByZWNvcmQgPSB0cnlDYXRjaChpbm5lckZuLCBzZWxmLCBjb250ZXh0KTtcbiAgICAgICAgaWYgKHJlY29yZC50eXBlID09PSBcIm5vcm1hbFwiKSB7XG4gICAgICAgICAgLy8gSWYgYW4gZXhjZXB0aW9uIGlzIHRocm93biBmcm9tIGlubmVyRm4sIHdlIGxlYXZlIHN0YXRlID09PVxuICAgICAgICAgIC8vIEdlblN0YXRlRXhlY3V0aW5nIGFuZCBsb29wIGJhY2sgZm9yIGFub3RoZXIgaW52b2NhdGlvbi5cbiAgICAgICAgICBzdGF0ZSA9IGNvbnRleHQuZG9uZVxuICAgICAgICAgICAgPyBHZW5TdGF0ZUNvbXBsZXRlZFxuICAgICAgICAgICAgOiBHZW5TdGF0ZVN1c3BlbmRlZFlpZWxkO1xuXG4gICAgICAgICAgaWYgKHJlY29yZC5hcmcgPT09IENvbnRpbnVlU2VudGluZWwpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB2YWx1ZTogcmVjb3JkLmFyZyxcbiAgICAgICAgICAgIGRvbmU6IGNvbnRleHQuZG9uZVxuICAgICAgICAgIH07XG5cbiAgICAgICAgfSBlbHNlIGlmIChyZWNvcmQudHlwZSA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgICAgc3RhdGUgPSBHZW5TdGF0ZUNvbXBsZXRlZDtcbiAgICAgICAgICAvLyBEaXNwYXRjaCB0aGUgZXhjZXB0aW9uIGJ5IGxvb3BpbmcgYmFjayBhcm91bmQgdG8gdGhlXG4gICAgICAgICAgLy8gY29udGV4dC5kaXNwYXRjaEV4Y2VwdGlvbihjb250ZXh0LmFyZykgY2FsbCBhYm92ZS5cbiAgICAgICAgICBjb250ZXh0Lm1ldGhvZCA9IFwidGhyb3dcIjtcbiAgICAgICAgICBjb250ZXh0LmFyZyA9IHJlY29yZC5hcmc7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuICB9XG5cbiAgLy8gQ2FsbCBkZWxlZ2F0ZS5pdGVyYXRvcltjb250ZXh0Lm1ldGhvZF0oY29udGV4dC5hcmcpIGFuZCBoYW5kbGUgdGhlXG4gIC8vIHJlc3VsdCwgZWl0aGVyIGJ5IHJldHVybmluZyBhIHsgdmFsdWUsIGRvbmUgfSByZXN1bHQgZnJvbSB0aGVcbiAgLy8gZGVsZWdhdGUgaXRlcmF0b3IsIG9yIGJ5IG1vZGlmeWluZyBjb250ZXh0Lm1ldGhvZCBhbmQgY29udGV4dC5hcmcsXG4gIC8vIHNldHRpbmcgY29udGV4dC5kZWxlZ2F0ZSB0byBudWxsLCBhbmQgcmV0dXJuaW5nIHRoZSBDb250aW51ZVNlbnRpbmVsLlxuICBmdW5jdGlvbiBtYXliZUludm9rZURlbGVnYXRlKGRlbGVnYXRlLCBjb250ZXh0KSB7XG4gICAgdmFyIG1ldGhvZCA9IGRlbGVnYXRlLml0ZXJhdG9yW2NvbnRleHQubWV0aG9kXTtcbiAgICBpZiAobWV0aG9kID09PSB1bmRlZmluZWQpIHtcbiAgICAgIC8vIEEgLnRocm93IG9yIC5yZXR1cm4gd2hlbiB0aGUgZGVsZWdhdGUgaXRlcmF0b3IgaGFzIG5vIC50aHJvd1xuICAgICAgLy8gbWV0aG9kIGFsd2F5cyB0ZXJtaW5hdGVzIHRoZSB5aWVsZCogbG9vcC5cbiAgICAgIGNvbnRleHQuZGVsZWdhdGUgPSBudWxsO1xuXG4gICAgICBpZiAoY29udGV4dC5tZXRob2QgPT09IFwidGhyb3dcIikge1xuICAgICAgICAvLyBOb3RlOiBbXCJyZXR1cm5cIl0gbXVzdCBiZSB1c2VkIGZvciBFUzMgcGFyc2luZyBjb21wYXRpYmlsaXR5LlxuICAgICAgICBpZiAoZGVsZWdhdGUuaXRlcmF0b3JbXCJyZXR1cm5cIl0pIHtcbiAgICAgICAgICAvLyBJZiB0aGUgZGVsZWdhdGUgaXRlcmF0b3IgaGFzIGEgcmV0dXJuIG1ldGhvZCwgZ2l2ZSBpdCBhXG4gICAgICAgICAgLy8gY2hhbmNlIHRvIGNsZWFuIHVwLlxuICAgICAgICAgIGNvbnRleHQubWV0aG9kID0gXCJyZXR1cm5cIjtcbiAgICAgICAgICBjb250ZXh0LmFyZyA9IHVuZGVmaW5lZDtcbiAgICAgICAgICBtYXliZUludm9rZURlbGVnYXRlKGRlbGVnYXRlLCBjb250ZXh0KTtcblxuICAgICAgICAgIGlmIChjb250ZXh0Lm1ldGhvZCA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgICAgICAvLyBJZiBtYXliZUludm9rZURlbGVnYXRlKGNvbnRleHQpIGNoYW5nZWQgY29udGV4dC5tZXRob2QgZnJvbVxuICAgICAgICAgICAgLy8gXCJyZXR1cm5cIiB0byBcInRocm93XCIsIGxldCB0aGF0IG92ZXJyaWRlIHRoZSBUeXBlRXJyb3IgYmVsb3cuXG4gICAgICAgICAgICByZXR1cm4gQ29udGludWVTZW50aW5lbDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBjb250ZXh0Lm1ldGhvZCA9IFwidGhyb3dcIjtcbiAgICAgICAgY29udGV4dC5hcmcgPSBuZXcgVHlwZUVycm9yKFxuICAgICAgICAgIFwiVGhlIGl0ZXJhdG9yIGRvZXMgbm90IHByb3ZpZGUgYSAndGhyb3cnIG1ldGhvZFwiKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIENvbnRpbnVlU2VudGluZWw7XG4gICAgfVxuXG4gICAgdmFyIHJlY29yZCA9IHRyeUNhdGNoKG1ldGhvZCwgZGVsZWdhdGUuaXRlcmF0b3IsIGNvbnRleHQuYXJnKTtcblxuICAgIGlmIChyZWNvcmQudHlwZSA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICBjb250ZXh0Lm1ldGhvZCA9IFwidGhyb3dcIjtcbiAgICAgIGNvbnRleHQuYXJnID0gcmVjb3JkLmFyZztcbiAgICAgIGNvbnRleHQuZGVsZWdhdGUgPSBudWxsO1xuICAgICAgcmV0dXJuIENvbnRpbnVlU2VudGluZWw7XG4gICAgfVxuXG4gICAgdmFyIGluZm8gPSByZWNvcmQuYXJnO1xuXG4gICAgaWYgKCEgaW5mbykge1xuICAgICAgY29udGV4dC5tZXRob2QgPSBcInRocm93XCI7XG4gICAgICBjb250ZXh0LmFyZyA9IG5ldyBUeXBlRXJyb3IoXCJpdGVyYXRvciByZXN1bHQgaXMgbm90IGFuIG9iamVjdFwiKTtcbiAgICAgIGNvbnRleHQuZGVsZWdhdGUgPSBudWxsO1xuICAgICAgcmV0dXJuIENvbnRpbnVlU2VudGluZWw7XG4gICAgfVxuXG4gICAgaWYgKGluZm8uZG9uZSkge1xuICAgICAgLy8gQXNzaWduIHRoZSByZXN1bHQgb2YgdGhlIGZpbmlzaGVkIGRlbGVnYXRlIHRvIHRoZSB0ZW1wb3JhcnlcbiAgICAgIC8vIHZhcmlhYmxlIHNwZWNpZmllZCBieSBkZWxlZ2F0ZS5yZXN1bHROYW1lIChzZWUgZGVsZWdhdGVZaWVsZCkuXG4gICAgICBjb250ZXh0W2RlbGVnYXRlLnJlc3VsdE5hbWVdID0gaW5mby52YWx1ZTtcblxuICAgICAgLy8gUmVzdW1lIGV4ZWN1dGlvbiBhdCB0aGUgZGVzaXJlZCBsb2NhdGlvbiAoc2VlIGRlbGVnYXRlWWllbGQpLlxuICAgICAgY29udGV4dC5uZXh0ID0gZGVsZWdhdGUubmV4dExvYztcblxuICAgICAgLy8gSWYgY29udGV4dC5tZXRob2Qgd2FzIFwidGhyb3dcIiBidXQgdGhlIGRlbGVnYXRlIGhhbmRsZWQgdGhlXG4gICAgICAvLyBleGNlcHRpb24sIGxldCB0aGUgb3V0ZXIgZ2VuZXJhdG9yIHByb2NlZWQgbm9ybWFsbHkuIElmXG4gICAgICAvLyBjb250ZXh0Lm1ldGhvZCB3YXMgXCJuZXh0XCIsIGZvcmdldCBjb250ZXh0LmFyZyBzaW5jZSBpdCBoYXMgYmVlblxuICAgICAgLy8gXCJjb25zdW1lZFwiIGJ5IHRoZSBkZWxlZ2F0ZSBpdGVyYXRvci4gSWYgY29udGV4dC5tZXRob2Qgd2FzXG4gICAgICAvLyBcInJldHVyblwiLCBhbGxvdyB0aGUgb3JpZ2luYWwgLnJldHVybiBjYWxsIHRvIGNvbnRpbnVlIGluIHRoZVxuICAgICAgLy8gb3V0ZXIgZ2VuZXJhdG9yLlxuICAgICAgaWYgKGNvbnRleHQubWV0aG9kICE9PSBcInJldHVyblwiKSB7XG4gICAgICAgIGNvbnRleHQubWV0aG9kID0gXCJuZXh0XCI7XG4gICAgICAgIGNvbnRleHQuYXJnID0gdW5kZWZpbmVkO1xuICAgICAgfVxuXG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFJlLXlpZWxkIHRoZSByZXN1bHQgcmV0dXJuZWQgYnkgdGhlIGRlbGVnYXRlIG1ldGhvZC5cbiAgICAgIHJldHVybiBpbmZvO1xuICAgIH1cblxuICAgIC8vIFRoZSBkZWxlZ2F0ZSBpdGVyYXRvciBpcyBmaW5pc2hlZCwgc28gZm9yZ2V0IGl0IGFuZCBjb250aW51ZSB3aXRoXG4gICAgLy8gdGhlIG91dGVyIGdlbmVyYXRvci5cbiAgICBjb250ZXh0LmRlbGVnYXRlID0gbnVsbDtcbiAgICByZXR1cm4gQ29udGludWVTZW50aW5lbDtcbiAgfVxuXG4gIC8vIERlZmluZSBHZW5lcmF0b3IucHJvdG90eXBlLntuZXh0LHRocm93LHJldHVybn0gaW4gdGVybXMgb2YgdGhlXG4gIC8vIHVuaWZpZWQgLl9pbnZva2UgaGVscGVyIG1ldGhvZC5cbiAgZGVmaW5lSXRlcmF0b3JNZXRob2RzKEdwKTtcblxuICBHcFt0b1N0cmluZ1RhZ1N5bWJvbF0gPSBcIkdlbmVyYXRvclwiO1xuXG4gIC8vIEEgR2VuZXJhdG9yIHNob3VsZCBhbHdheXMgcmV0dXJuIGl0c2VsZiBhcyB0aGUgaXRlcmF0b3Igb2JqZWN0IHdoZW4gdGhlXG4gIC8vIEBAaXRlcmF0b3IgZnVuY3Rpb24gaXMgY2FsbGVkIG9uIGl0LiBTb21lIGJyb3dzZXJzJyBpbXBsZW1lbnRhdGlvbnMgb2YgdGhlXG4gIC8vIGl0ZXJhdG9yIHByb3RvdHlwZSBjaGFpbiBpbmNvcnJlY3RseSBpbXBsZW1lbnQgdGhpcywgY2F1c2luZyB0aGUgR2VuZXJhdG9yXG4gIC8vIG9iamVjdCB0byBub3QgYmUgcmV0dXJuZWQgZnJvbSB0aGlzIGNhbGwuIFRoaXMgZW5zdXJlcyB0aGF0IGRvZXNuJ3QgaGFwcGVuLlxuICAvLyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL2ZhY2Vib29rL3JlZ2VuZXJhdG9yL2lzc3Vlcy8yNzQgZm9yIG1vcmUgZGV0YWlscy5cbiAgR3BbaXRlcmF0b3JTeW1ib2xdID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgR3AudG9TdHJpbmcgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gXCJbb2JqZWN0IEdlbmVyYXRvcl1cIjtcbiAgfTtcblxuICBmdW5jdGlvbiBwdXNoVHJ5RW50cnkobG9jcykge1xuICAgIHZhciBlbnRyeSA9IHsgdHJ5TG9jOiBsb2NzWzBdIH07XG5cbiAgICBpZiAoMSBpbiBsb2NzKSB7XG4gICAgICBlbnRyeS5jYXRjaExvYyA9IGxvY3NbMV07XG4gICAgfVxuXG4gICAgaWYgKDIgaW4gbG9jcykge1xuICAgICAgZW50cnkuZmluYWxseUxvYyA9IGxvY3NbMl07XG4gICAgICBlbnRyeS5hZnRlckxvYyA9IGxvY3NbM107XG4gICAgfVxuXG4gICAgdGhpcy50cnlFbnRyaWVzLnB1c2goZW50cnkpO1xuICB9XG5cbiAgZnVuY3Rpb24gcmVzZXRUcnlFbnRyeShlbnRyeSkge1xuICAgIHZhciByZWNvcmQgPSBlbnRyeS5jb21wbGV0aW9uIHx8IHt9O1xuICAgIHJlY29yZC50eXBlID0gXCJub3JtYWxcIjtcbiAgICBkZWxldGUgcmVjb3JkLmFyZztcbiAgICBlbnRyeS5jb21wbGV0aW9uID0gcmVjb3JkO1xuICB9XG5cbiAgZnVuY3Rpb24gQ29udGV4dCh0cnlMb2NzTGlzdCkge1xuICAgIC8vIFRoZSByb290IGVudHJ5IG9iamVjdCAoZWZmZWN0aXZlbHkgYSB0cnkgc3RhdGVtZW50IHdpdGhvdXQgYSBjYXRjaFxuICAgIC8vIG9yIGEgZmluYWxseSBibG9jaykgZ2l2ZXMgdXMgYSBwbGFjZSB0byBzdG9yZSB2YWx1ZXMgdGhyb3duIGZyb21cbiAgICAvLyBsb2NhdGlvbnMgd2hlcmUgdGhlcmUgaXMgbm8gZW5jbG9zaW5nIHRyeSBzdGF0ZW1lbnQuXG4gICAgdGhpcy50cnlFbnRyaWVzID0gW3sgdHJ5TG9jOiBcInJvb3RcIiB9XTtcbiAgICB0cnlMb2NzTGlzdC5mb3JFYWNoKHB1c2hUcnlFbnRyeSwgdGhpcyk7XG4gICAgdGhpcy5yZXNldCh0cnVlKTtcbiAgfVxuXG4gIGV4cG9ydHMua2V5cyA9IGZ1bmN0aW9uKG9iamVjdCkge1xuICAgIHZhciBrZXlzID0gW107XG4gICAgZm9yICh2YXIga2V5IGluIG9iamVjdCkge1xuICAgICAga2V5cy5wdXNoKGtleSk7XG4gICAgfVxuICAgIGtleXMucmV2ZXJzZSgpO1xuXG4gICAgLy8gUmF0aGVyIHRoYW4gcmV0dXJuaW5nIGFuIG9iamVjdCB3aXRoIGEgbmV4dCBtZXRob2QsIHdlIGtlZXBcbiAgICAvLyB0aGluZ3Mgc2ltcGxlIGFuZCByZXR1cm4gdGhlIG5leHQgZnVuY3Rpb24gaXRzZWxmLlxuICAgIHJldHVybiBmdW5jdGlvbiBuZXh0KCkge1xuICAgICAgd2hpbGUgKGtleXMubGVuZ3RoKSB7XG4gICAgICAgIHZhciBrZXkgPSBrZXlzLnBvcCgpO1xuICAgICAgICBpZiAoa2V5IGluIG9iamVjdCkge1xuICAgICAgICAgIG5leHQudmFsdWUgPSBrZXk7XG4gICAgICAgICAgbmV4dC5kb25lID0gZmFsc2U7XG4gICAgICAgICAgcmV0dXJuIG5leHQ7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gVG8gYXZvaWQgY3JlYXRpbmcgYW4gYWRkaXRpb25hbCBvYmplY3QsIHdlIGp1c3QgaGFuZyB0aGUgLnZhbHVlXG4gICAgICAvLyBhbmQgLmRvbmUgcHJvcGVydGllcyBvZmYgdGhlIG5leHQgZnVuY3Rpb24gb2JqZWN0IGl0c2VsZi4gVGhpc1xuICAgICAgLy8gYWxzbyBlbnN1cmVzIHRoYXQgdGhlIG1pbmlmaWVyIHdpbGwgbm90IGFub255bWl6ZSB0aGUgZnVuY3Rpb24uXG4gICAgICBuZXh0LmRvbmUgPSB0cnVlO1xuICAgICAgcmV0dXJuIG5leHQ7XG4gICAgfTtcbiAgfTtcblxuICBmdW5jdGlvbiB2YWx1ZXMoaXRlcmFibGUpIHtcbiAgICBpZiAoaXRlcmFibGUpIHtcbiAgICAgIHZhciBpdGVyYXRvck1ldGhvZCA9IGl0ZXJhYmxlW2l0ZXJhdG9yU3ltYm9sXTtcbiAgICAgIGlmIChpdGVyYXRvck1ldGhvZCkge1xuICAgICAgICByZXR1cm4gaXRlcmF0b3JNZXRob2QuY2FsbChpdGVyYWJsZSk7XG4gICAgICB9XG5cbiAgICAgIGlmICh0eXBlb2YgaXRlcmFibGUubmV4dCA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIHJldHVybiBpdGVyYWJsZTtcbiAgICAgIH1cblxuICAgICAgaWYgKCFpc05hTihpdGVyYWJsZS5sZW5ndGgpKSB7XG4gICAgICAgIHZhciBpID0gLTEsIG5leHQgPSBmdW5jdGlvbiBuZXh0KCkge1xuICAgICAgICAgIHdoaWxlICgrK2kgPCBpdGVyYWJsZS5sZW5ndGgpIHtcbiAgICAgICAgICAgIGlmIChoYXNPd24uY2FsbChpdGVyYWJsZSwgaSkpIHtcbiAgICAgICAgICAgICAgbmV4dC52YWx1ZSA9IGl0ZXJhYmxlW2ldO1xuICAgICAgICAgICAgICBuZXh0LmRvbmUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgcmV0dXJuIG5leHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgbmV4dC52YWx1ZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICBuZXh0LmRvbmUgPSB0cnVlO1xuXG4gICAgICAgICAgcmV0dXJuIG5leHQ7XG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIG5leHQubmV4dCA9IG5leHQ7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gUmV0dXJuIGFuIGl0ZXJhdG9yIHdpdGggbm8gdmFsdWVzLlxuICAgIHJldHVybiB7IG5leHQ6IGRvbmVSZXN1bHQgfTtcbiAgfVxuICBleHBvcnRzLnZhbHVlcyA9IHZhbHVlcztcblxuICBmdW5jdGlvbiBkb25lUmVzdWx0KCkge1xuICAgIHJldHVybiB7IHZhbHVlOiB1bmRlZmluZWQsIGRvbmU6IHRydWUgfTtcbiAgfVxuXG4gIENvbnRleHQucHJvdG90eXBlID0ge1xuICAgIGNvbnN0cnVjdG9yOiBDb250ZXh0LFxuXG4gICAgcmVzZXQ6IGZ1bmN0aW9uKHNraXBUZW1wUmVzZXQpIHtcbiAgICAgIHRoaXMucHJldiA9IDA7XG4gICAgICB0aGlzLm5leHQgPSAwO1xuICAgICAgLy8gUmVzZXR0aW5nIGNvbnRleHQuX3NlbnQgZm9yIGxlZ2FjeSBzdXBwb3J0IG9mIEJhYmVsJ3NcbiAgICAgIC8vIGZ1bmN0aW9uLnNlbnQgaW1wbGVtZW50YXRpb24uXG4gICAgICB0aGlzLnNlbnQgPSB0aGlzLl9zZW50ID0gdW5kZWZpbmVkO1xuICAgICAgdGhpcy5kb25lID0gZmFsc2U7XG4gICAgICB0aGlzLmRlbGVnYXRlID0gbnVsbDtcblxuICAgICAgdGhpcy5tZXRob2QgPSBcIm5leHRcIjtcbiAgICAgIHRoaXMuYXJnID0gdW5kZWZpbmVkO1xuXG4gICAgICB0aGlzLnRyeUVudHJpZXMuZm9yRWFjaChyZXNldFRyeUVudHJ5KTtcblxuICAgICAgaWYgKCFza2lwVGVtcFJlc2V0KSB7XG4gICAgICAgIGZvciAodmFyIG5hbWUgaW4gdGhpcykge1xuICAgICAgICAgIC8vIE5vdCBzdXJlIGFib3V0IHRoZSBvcHRpbWFsIG9yZGVyIG9mIHRoZXNlIGNvbmRpdGlvbnM6XG4gICAgICAgICAgaWYgKG5hbWUuY2hhckF0KDApID09PSBcInRcIiAmJlxuICAgICAgICAgICAgICBoYXNPd24uY2FsbCh0aGlzLCBuYW1lKSAmJlxuICAgICAgICAgICAgICAhaXNOYU4oK25hbWUuc2xpY2UoMSkpKSB7XG4gICAgICAgICAgICB0aGlzW25hbWVdID0gdW5kZWZpbmVkO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG5cbiAgICBzdG9wOiBmdW5jdGlvbigpIHtcbiAgICAgIHRoaXMuZG9uZSA9IHRydWU7XG5cbiAgICAgIHZhciByb290RW50cnkgPSB0aGlzLnRyeUVudHJpZXNbMF07XG4gICAgICB2YXIgcm9vdFJlY29yZCA9IHJvb3RFbnRyeS5jb21wbGV0aW9uO1xuICAgICAgaWYgKHJvb3RSZWNvcmQudHlwZSA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgIHRocm93IHJvb3RSZWNvcmQuYXJnO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcy5ydmFsO1xuICAgIH0sXG5cbiAgICBkaXNwYXRjaEV4Y2VwdGlvbjogZnVuY3Rpb24oZXhjZXB0aW9uKSB7XG4gICAgICBpZiAodGhpcy5kb25lKSB7XG4gICAgICAgIHRocm93IGV4Y2VwdGlvbjtcbiAgICAgIH1cblxuICAgICAgdmFyIGNvbnRleHQgPSB0aGlzO1xuICAgICAgZnVuY3Rpb24gaGFuZGxlKGxvYywgY2F1Z2h0KSB7XG4gICAgICAgIHJlY29yZC50eXBlID0gXCJ0aHJvd1wiO1xuICAgICAgICByZWNvcmQuYXJnID0gZXhjZXB0aW9uO1xuICAgICAgICBjb250ZXh0Lm5leHQgPSBsb2M7XG5cbiAgICAgICAgaWYgKGNhdWdodCkge1xuICAgICAgICAgIC8vIElmIHRoZSBkaXNwYXRjaGVkIGV4Y2VwdGlvbiB3YXMgY2F1Z2h0IGJ5IGEgY2F0Y2ggYmxvY2ssXG4gICAgICAgICAgLy8gdGhlbiBsZXQgdGhhdCBjYXRjaCBibG9jayBoYW5kbGUgdGhlIGV4Y2VwdGlvbiBub3JtYWxseS5cbiAgICAgICAgICBjb250ZXh0Lm1ldGhvZCA9IFwibmV4dFwiO1xuICAgICAgICAgIGNvbnRleHQuYXJnID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuICEhIGNhdWdodDtcbiAgICAgIH1cblxuICAgICAgZm9yICh2YXIgaSA9IHRoaXMudHJ5RW50cmllcy5sZW5ndGggLSAxOyBpID49IDA7IC0taSkge1xuICAgICAgICB2YXIgZW50cnkgPSB0aGlzLnRyeUVudHJpZXNbaV07XG4gICAgICAgIHZhciByZWNvcmQgPSBlbnRyeS5jb21wbGV0aW9uO1xuXG4gICAgICAgIGlmIChlbnRyeS50cnlMb2MgPT09IFwicm9vdFwiKSB7XG4gICAgICAgICAgLy8gRXhjZXB0aW9uIHRocm93biBvdXRzaWRlIG9mIGFueSB0cnkgYmxvY2sgdGhhdCBjb3VsZCBoYW5kbGVcbiAgICAgICAgICAvLyBpdCwgc28gc2V0IHRoZSBjb21wbGV0aW9uIHZhbHVlIG9mIHRoZSBlbnRpcmUgZnVuY3Rpb24gdG9cbiAgICAgICAgICAvLyB0aHJvdyB0aGUgZXhjZXB0aW9uLlxuICAgICAgICAgIHJldHVybiBoYW5kbGUoXCJlbmRcIik7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZW50cnkudHJ5TG9jIDw9IHRoaXMucHJldikge1xuICAgICAgICAgIHZhciBoYXNDYXRjaCA9IGhhc093bi5jYWxsKGVudHJ5LCBcImNhdGNoTG9jXCIpO1xuICAgICAgICAgIHZhciBoYXNGaW5hbGx5ID0gaGFzT3duLmNhbGwoZW50cnksIFwiZmluYWxseUxvY1wiKTtcblxuICAgICAgICAgIGlmIChoYXNDYXRjaCAmJiBoYXNGaW5hbGx5KSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wcmV2IDwgZW50cnkuY2F0Y2hMb2MpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIGhhbmRsZShlbnRyeS5jYXRjaExvYywgdHJ1ZSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMucHJldiA8IGVudHJ5LmZpbmFsbHlMb2MpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIGhhbmRsZShlbnRyeS5maW5hbGx5TG9jKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgIH0gZWxzZSBpZiAoaGFzQ2F0Y2gpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnByZXYgPCBlbnRyeS5jYXRjaExvYykge1xuICAgICAgICAgICAgICByZXR1cm4gaGFuZGxlKGVudHJ5LmNhdGNoTG9jLCB0cnVlKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgIH0gZWxzZSBpZiAoaGFzRmluYWxseSkge1xuICAgICAgICAgICAgaWYgKHRoaXMucHJldiA8IGVudHJ5LmZpbmFsbHlMb2MpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIGhhbmRsZShlbnRyeS5maW5hbGx5TG9jKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJ0cnkgc3RhdGVtZW50IHdpdGhvdXQgY2F0Y2ggb3IgZmluYWxseVwiKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuXG4gICAgYWJydXB0OiBmdW5jdGlvbih0eXBlLCBhcmcpIHtcbiAgICAgIGZvciAodmFyIGkgPSB0aGlzLnRyeUVudHJpZXMubGVuZ3RoIC0gMTsgaSA+PSAwOyAtLWkpIHtcbiAgICAgICAgdmFyIGVudHJ5ID0gdGhpcy50cnlFbnRyaWVzW2ldO1xuICAgICAgICBpZiAoZW50cnkudHJ5TG9jIDw9IHRoaXMucHJldiAmJlxuICAgICAgICAgICAgaGFzT3duLmNhbGwoZW50cnksIFwiZmluYWxseUxvY1wiKSAmJlxuICAgICAgICAgICAgdGhpcy5wcmV2IDwgZW50cnkuZmluYWxseUxvYykge1xuICAgICAgICAgIHZhciBmaW5hbGx5RW50cnkgPSBlbnRyeTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoZmluYWxseUVudHJ5ICYmXG4gICAgICAgICAgKHR5cGUgPT09IFwiYnJlYWtcIiB8fFxuICAgICAgICAgICB0eXBlID09PSBcImNvbnRpbnVlXCIpICYmXG4gICAgICAgICAgZmluYWxseUVudHJ5LnRyeUxvYyA8PSBhcmcgJiZcbiAgICAgICAgICBhcmcgPD0gZmluYWxseUVudHJ5LmZpbmFsbHlMb2MpIHtcbiAgICAgICAgLy8gSWdub3JlIHRoZSBmaW5hbGx5IGVudHJ5IGlmIGNvbnRyb2wgaXMgbm90IGp1bXBpbmcgdG8gYVxuICAgICAgICAvLyBsb2NhdGlvbiBvdXRzaWRlIHRoZSB0cnkvY2F0Y2ggYmxvY2suXG4gICAgICAgIGZpbmFsbHlFbnRyeSA9IG51bGw7XG4gICAgICB9XG5cbiAgICAgIHZhciByZWNvcmQgPSBmaW5hbGx5RW50cnkgPyBmaW5hbGx5RW50cnkuY29tcGxldGlvbiA6IHt9O1xuICAgICAgcmVjb3JkLnR5cGUgPSB0eXBlO1xuICAgICAgcmVjb3JkLmFyZyA9IGFyZztcblxuICAgICAgaWYgKGZpbmFsbHlFbnRyeSkge1xuICAgICAgICB0aGlzLm1ldGhvZCA9IFwibmV4dFwiO1xuICAgICAgICB0aGlzLm5leHQgPSBmaW5hbGx5RW50cnkuZmluYWxseUxvYztcbiAgICAgICAgcmV0dXJuIENvbnRpbnVlU2VudGluZWw7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzLmNvbXBsZXRlKHJlY29yZCk7XG4gICAgfSxcblxuICAgIGNvbXBsZXRlOiBmdW5jdGlvbihyZWNvcmQsIGFmdGVyTG9jKSB7XG4gICAgICBpZiAocmVjb3JkLnR5cGUgPT09IFwidGhyb3dcIikge1xuICAgICAgICB0aHJvdyByZWNvcmQuYXJnO1xuICAgICAgfVxuXG4gICAgICBpZiAocmVjb3JkLnR5cGUgPT09IFwiYnJlYWtcIiB8fFxuICAgICAgICAgIHJlY29yZC50eXBlID09PSBcImNvbnRpbnVlXCIpIHtcbiAgICAgICAgdGhpcy5uZXh0ID0gcmVjb3JkLmFyZztcbiAgICAgIH0gZWxzZSBpZiAocmVjb3JkLnR5cGUgPT09IFwicmV0dXJuXCIpIHtcbiAgICAgICAgdGhpcy5ydmFsID0gdGhpcy5hcmcgPSByZWNvcmQuYXJnO1xuICAgICAgICB0aGlzLm1ldGhvZCA9IFwicmV0dXJuXCI7XG4gICAgICAgIHRoaXMubmV4dCA9IFwiZW5kXCI7XG4gICAgICB9IGVsc2UgaWYgKHJlY29yZC50eXBlID09PSBcIm5vcm1hbFwiICYmIGFmdGVyTG9jKSB7XG4gICAgICAgIHRoaXMubmV4dCA9IGFmdGVyTG9jO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gQ29udGludWVTZW50aW5lbDtcbiAgICB9LFxuXG4gICAgZmluaXNoOiBmdW5jdGlvbihmaW5hbGx5TG9jKSB7XG4gICAgICBmb3IgKHZhciBpID0gdGhpcy50cnlFbnRyaWVzLmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKSB7XG4gICAgICAgIHZhciBlbnRyeSA9IHRoaXMudHJ5RW50cmllc1tpXTtcbiAgICAgICAgaWYgKGVudHJ5LmZpbmFsbHlMb2MgPT09IGZpbmFsbHlMb2MpIHtcbiAgICAgICAgICB0aGlzLmNvbXBsZXRlKGVudHJ5LmNvbXBsZXRpb24sIGVudHJ5LmFmdGVyTG9jKTtcbiAgICAgICAgICByZXNldFRyeUVudHJ5KGVudHJ5KTtcbiAgICAgICAgICByZXR1cm4gQ29udGludWVTZW50aW5lbDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG5cbiAgICBcImNhdGNoXCI6IGZ1bmN0aW9uKHRyeUxvYykge1xuICAgICAgZm9yICh2YXIgaSA9IHRoaXMudHJ5RW50cmllcy5sZW5ndGggLSAxOyBpID49IDA7IC0taSkge1xuICAgICAgICB2YXIgZW50cnkgPSB0aGlzLnRyeUVudHJpZXNbaV07XG4gICAgICAgIGlmIChlbnRyeS50cnlMb2MgPT09IHRyeUxvYykge1xuICAgICAgICAgIHZhciByZWNvcmQgPSBlbnRyeS5jb21wbGV0aW9uO1xuICAgICAgICAgIGlmIChyZWNvcmQudHlwZSA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgICAgICB2YXIgdGhyb3duID0gcmVjb3JkLmFyZztcbiAgICAgICAgICAgIHJlc2V0VHJ5RW50cnkoZW50cnkpO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gdGhyb3duO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIFRoZSBjb250ZXh0LmNhdGNoIG1ldGhvZCBtdXN0IG9ubHkgYmUgY2FsbGVkIHdpdGggYSBsb2NhdGlvblxuICAgICAgLy8gYXJndW1lbnQgdGhhdCBjb3JyZXNwb25kcyB0byBhIGtub3duIGNhdGNoIGJsb2NrLlxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiaWxsZWdhbCBjYXRjaCBhdHRlbXB0XCIpO1xuICAgIH0sXG5cbiAgICBkZWxlZ2F0ZVlpZWxkOiBmdW5jdGlvbihpdGVyYWJsZSwgcmVzdWx0TmFtZSwgbmV4dExvYykge1xuICAgICAgdGhpcy5kZWxlZ2F0ZSA9IHtcbiAgICAgICAgaXRlcmF0b3I6IHZhbHVlcyhpdGVyYWJsZSksXG4gICAgICAgIHJlc3VsdE5hbWU6IHJlc3VsdE5hbWUsXG4gICAgICAgIG5leHRMb2M6IG5leHRMb2NcbiAgICAgIH07XG5cbiAgICAgIGlmICh0aGlzLm1ldGhvZCA9PT0gXCJuZXh0XCIpIHtcbiAgICAgICAgLy8gRGVsaWJlcmF0ZWx5IGZvcmdldCB0aGUgbGFzdCBzZW50IHZhbHVlIHNvIHRoYXQgd2UgZG9uJ3RcbiAgICAgICAgLy8gYWNjaWRlbnRhbGx5IHBhc3MgaXQgb24gdG8gdGhlIGRlbGVnYXRlLlxuICAgICAgICB0aGlzLmFyZyA9IHVuZGVmaW5lZDtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIENvbnRpbnVlU2VudGluZWw7XG4gICAgfVxuICB9O1xuXG4gIC8vIFJlZ2FyZGxlc3Mgb2Ygd2hldGhlciB0aGlzIHNjcmlwdCBpcyBleGVjdXRpbmcgYXMgYSBDb21tb25KUyBtb2R1bGVcbiAgLy8gb3Igbm90LCByZXR1cm4gdGhlIHJ1bnRpbWUgb2JqZWN0IHNvIHRoYXQgd2UgY2FuIGRlY2xhcmUgdGhlIHZhcmlhYmxlXG4gIC8vIHJlZ2VuZXJhdG9yUnVudGltZSBpbiB0aGUgb3V0ZXIgc2NvcGUsIHdoaWNoIGFsbG93cyB0aGlzIG1vZHVsZSB0byBiZVxuICAvLyBpbmplY3RlZCBlYXNpbHkgYnkgYGJpbi9yZWdlbmVyYXRvciAtLWluY2x1ZGUtcnVudGltZSBzY3JpcHQuanNgLlxuICByZXR1cm4gZXhwb3J0cztcblxufShcbiAgLy8gSWYgdGhpcyBzY3JpcHQgaXMgZXhlY3V0aW5nIGFzIGEgQ29tbW9uSlMgbW9kdWxlLCB1c2UgbW9kdWxlLmV4cG9ydHNcbiAgLy8gYXMgdGhlIHJlZ2VuZXJhdG9yUnVudGltZSBuYW1lc3BhY2UuIE90aGVyd2lzZSBjcmVhdGUgYSBuZXcgZW1wdHlcbiAgLy8gb2JqZWN0LiBFaXRoZXIgd2F5LCB0aGUgcmVzdWx0aW5nIG9iamVjdCB3aWxsIGJlIHVzZWQgdG8gaW5pdGlhbGl6ZVxuICAvLyB0aGUgcmVnZW5lcmF0b3JSdW50aW1lIHZhcmlhYmxlIGF0IHRoZSB0b3Agb2YgdGhpcyBmaWxlLlxuICB0eXBlb2YgbW9kdWxlID09PSBcIm9iamVjdFwiID8gbW9kdWxlLmV4cG9ydHMgOiB7fVxuKSk7XG5cbnRyeSB7XG4gIHJlZ2VuZXJhdG9yUnVudGltZSA9IHJ1bnRpbWU7XG59IGNhdGNoIChhY2NpZGVudGFsU3RyaWN0TW9kZSkge1xuICAvLyBUaGlzIG1vZHVsZSBzaG91bGQgbm90IGJlIHJ1bm5pbmcgaW4gc3RyaWN0IG1vZGUsIHNvIHRoZSBhYm92ZVxuICAvLyBhc3NpZ25tZW50IHNob3VsZCBhbHdheXMgd29yayB1bmxlc3Mgc29tZXRoaW5nIGlzIG1pc2NvbmZpZ3VyZWQuIEp1c3RcbiAgLy8gaW4gY2FzZSBydW50aW1lLmpzIGFjY2lkZW50YWxseSBydW5zIGluIHN0cmljdCBtb2RlLCB3ZSBjYW4gZXNjYXBlXG4gIC8vIHN0cmljdCBtb2RlIHVzaW5nIGEgZ2xvYmFsIEZ1bmN0aW9uIGNhbGwuIFRoaXMgY291bGQgY29uY2VpdmFibHkgZmFpbFxuICAvLyBpZiBhIENvbnRlbnQgU2VjdXJpdHkgUG9saWN5IGZvcmJpZHMgdXNpbmcgRnVuY3Rpb24sIGJ1dCBpbiB0aGF0IGNhc2VcbiAgLy8gdGhlIHByb3BlciBzb2x1dGlvbiBpcyB0byBmaXggdGhlIGFjY2lkZW50YWwgc3RyaWN0IG1vZGUgcHJvYmxlbS4gSWZcbiAgLy8geW91J3ZlIG1pc2NvbmZpZ3VyZWQgeW91ciBidW5kbGVyIHRvIGZvcmNlIHN0cmljdCBtb2RlIGFuZCBhcHBsaWVkIGFcbiAgLy8gQ1NQIHRvIGZvcmJpZCBGdW5jdGlvbiwgYW5kIHlvdSdyZSBub3Qgd2lsbGluZyB0byBmaXggZWl0aGVyIG9mIHRob3NlXG4gIC8vIHByb2JsZW1zLCBwbGVhc2UgZGV0YWlsIHlvdXIgdW5pcXVlIHByZWRpY2FtZW50IGluIGEgR2l0SHViIGlzc3VlLlxuICBGdW5jdGlvbihcInJcIiwgXCJyZWdlbmVyYXRvclJ1bnRpbWUgPSByXCIpKHJ1bnRpbWUpO1xufVxuIl0sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7O0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFHQTtBQUNBO0FBQ0E7QUFEQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFFQTtBQUdBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBR0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUlBO0FBQUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUtBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQURBO0FBRUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBR0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFyTUE7QUF5TUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/regenerator-runtime/runtime.js\n");

/***/ }),

/***/ "./src/gpt_script_ynet.js":
/*!********************************!*\
  !*** ./src/gpt_script_ynet.js ***!
  \********************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _modules_InfrastructureClass__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../modules/InfrastructureClass */ \"./modules/InfrastructureClass.js\");\n/* harmony import */ var _modules_AdUnitFunctionsClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../modules/AdUnitFunctionsClass */ \"./modules/AdUnitFunctionsClass.js\");\n/* harmony import */ var _modules_AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../modules/AdUnitPropertiesClass */ \"./modules/AdUnitPropertiesClass.js\");\n/* harmony import */ var _modules_MainFanctionClass__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../modules/MainFanctionClass */ \"./modules/MainFanctionClass.js\");\n// This script run gpt on ynet pages\n// https://www.ynet.co.il/home/0,7340,L-8,00.html\n// To activated the new system use sql:\n// UPDATE General_Param_Values\n// SET Param_Value = 1,\n// WHERE Param_Name = 'is_new_gpt' AND Content_Id = 'Ynet' ;\n// The key in the code for only ynet is 'is_ynet'\n// the use is if (InfrasructureClassObj.Site == 'is_ynet' )\n// import 'babel-polyfill';\n// import \"@babel/polyfill\";\nvar _window = window,\n    dcLoadAds = _window.dcLoadAds,\n    googletag = _window.googletag,\n    console = _window.console;\n\n_modules_InfrastructureClass__WEBPACK_IMPORTED_MODULE_0__[\"default\"].Site = \"is_ynet\";\n\n\n\nwindow.RefreshAll = _modules_MainFanctionClass__WEBPACK_IMPORTED_MODULE_3__[\"default\"].refreshAll_func.bind(_modules_MainFanctionClass__WEBPACK_IMPORTED_MODULE_3__[\"default\"]);\nwindow.RefreshAll = _modules_MainFanctionClass__WEBPACK_IMPORTED_MODULE_3__[\"default\"].refreshAll_func;\nwindow.refresh_inreads = _modules_MainFanctionClass__WEBPACK_IMPORTED_MODULE_3__[\"default\"].refreshInreads_func.bind(_modules_MainFanctionClass__WEBPACK_IMPORTED_MODULE_3__[\"default\"]);\nwindow.refresh_inreads = _modules_MainFanctionClass__WEBPACK_IMPORTED_MODULE_3__[\"default\"].refreshInreads_func;\nwindow.no_ads = false;\ndocument.addEventListener(\"DOMContentLoaded\", function () {\n  if (document.querySelector(\".hContainer.magazine_template\")) window.no_ads = true;\n});\n\nwindow.closeTransitions = function () {\n  googletag.cmd.push(function () {\n    googletag.destroySlots([AdUnitPropertiesClassObj.Define_slots[\"ads.interstitial.inner\"]]);\n  });\n  var transition = document.getElementById(\"ads.interstitial.inner\");\n\n  if (transition) {\n    transition.style.height = '0px';\n  }\n\n  try {\n    document.getElementById(\"Close_btn_interstitial\").style.display = 'none';\n  } catch (e) {}\n};\n\nwindow.is_IOS = function () {\n  return ['iPad Simulator', 'iPhone Simulator', 'iPod Simulator', 'iPad', 'iPhone', 'iPod'].includes(navigator.platform) // iPad on iOS 13 detection\n  || navigator.userAgent.includes(\"Mac\") && \"ontouchend\" in document;\n}; // When chanching mode - change KV Dark_Mode and refresh specific ads\n\n\nif (window.matchMedia && window.matchMedia('only screen and (max-width:768px ) and (orientation: portrait), only screen and (max-width: 900px) and (orientation: landscape)').matches) {\n  window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', function (e) {\n    var newColorScheme = e.matches ? \"on\" : \"off\";\n    googletag.cmd.push(function () {\n      googletag.pubads().setTargeting(\"Dark_Mode\", newColorScheme);\n      var slots = [window.AdUnitPropertiesClassobj.Define_slots[\"ads.strip.content.1\"], window.AdUnitPropertiesClassobj.Define_slots[\"ads.strip.content.2\"], window.AdUnitPropertiesClassobj.Define_slots[\"ads.strip.ordering.1\"], window.AdUnitPropertiesClassobj.Define_slots[\"ads.strip.ordering.2\"], window.AdUnitPropertiesClassobj.Define_slots[\"ads.strip.ordering.3\"], window.AdUnitPropertiesClassobj.Define_slots[\"ads.inbox.1\"], window.AdUnitPropertiesClassobj.Define_slots[\"ads.inbox.2\"]];\n      googletag.pubads().refresh(slots);\n      googletag.enableServices();\n    });\n  });\n}\n\n_modules_InfrastructureClass__WEBPACK_IMPORTED_MODULE_0__[\"default\"].init(function () {\n  //if dcLoadAds = 0 than the gpt is off\n  if (window.no_ads) return;\n\n  if (dcLoadAds != 0 || window.no_ads == false) {\n    window.ynet_sites = false;\n\n    if (window.dcPath.includes(\"PnaiPlus\") || window.dcPath.includes(\"laisha\") || window.dcPath.includes(\"architecture\") || window.dcPath.includes(\"menta\") || window.dcPath.includes(\"fashion\")) {\n      window.ynet_sites = true;\n    }\n\n    if (window.innerWidth <= 767) {\n      if (window.dcCG != 'article' && window.dcPath.includes(\"-1.Home\") && window.performance.navigation.type == window.performance.navigation.TYPE_BACK_FORWARD) {\n        localStorage.setItem('BACK_HOME_CLICKED', 1);\n      } else {\n        if (!window.dcPath.includes(\"-1.Home\")) {\n          localStorage.removeItem('BACK_HOME_CLICKED');\n        }\n      } // adx interstitial \n\n\n      var is_app = _modules_AdUnitFunctionsClass__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getUrlVars_func(\"IsApp\") == \"true\";\n\n      if (window.adx_interstitial_mobile == 'True' && !is_app) {\n        var getDevice = function getDevice() {\n          var _window2 = window,\n              navigator = _window2.navigator;\n\n          if (navigator.userAgent.match(/Android/i)) {\n            return \"Android\";\n          } else if (navigator.userAgent.match(/Android/i)) {\n            return \"Android\";\n          } else if (navigator.userAgent.match(/iPhone/i)) {\n            return \"iPhone\";\n          } else if (navigator.userAgent.match(/iPad/i)) {\n            return \"iPad\";\n          } else {\n            return \"PC\";\n          }\n        };\n\n        var adx_site = \"ynet\";\n\n        if (window.dcPath.includes(\"laisha\")) {\n          adx_site = \"laisha\";\n        } else if (window.dcPath.includes(\"architecture\")) {\n          adx_site = \"architecture\";\n        } else if (window.dcPath.includes(\"menta\")) {\n          adx_site = \"menta\";\n        } else if (window.dcPath.includes(\"fashion\")) {\n          adx_site = \"fashion\";\n        }\n\n        var device = getDevice() == \"Android\" ? \"mobileweb_android\" : \"mobileweb_iphone\";\n        var adx_path = window.dcPath.includes(\"PnaiPlus\") ? \"/6870/pplus/\".concat(device, \"/interstitial.adx\") : \"/6870/ynet/\".concat(device, \"/interstitial.adx/\").concat(adx_site);\n\n        try {\n          window.googletag = window.googletag || {\n            cmd: []\n          };\n          window.maavaronAdx = JSON.parse(localStorage.getItem(\"maavaronAdx\")) !== null ? JSON.parse(localStorage.getItem(\"maavaronAdx\")) : {\n            datetime: Date.now(),\n            displayedlast: ''\n          };\n          googletag.cmd.push(function () {\n            var interstitialSlot = googletag.defineOutOfPageSlot(adx_path, googletag.enums.OutOfPageFormat.INTERSTITIAL);\n\n            if (interstitialSlot) {\n              interstitialSlot.addService(googletag.pubads());\n              googletag.pubads().addEventListener('slotOnload', function (event) {\n                if (interstitialSlot === event.slot) {\n                  //console.log('Interstitial is loaded.');\n                  maavaronAdx.add = \"loaded\";\n                  maavaronAdx.datetime = Date.now();\n                  maavaronAdx.displayedlast = adx_path;\n                  localStorage.setItem('maavaronAdx', JSON.stringify(maavaronAdx));\n                }\n              });\n              googletag.pubads().addEventListener('slotVisibilityChanged', function (event) {\n                var slot = event.slot; //console.log('Visibility of slot', slot.getSlotElementId(), 'changed.');\n\n                if (slot === interstitialSlot) {\n                  if (event.inViewPercentage == 100) {\n                    localStorage.setItem('ynet_mobileweb_interstitial_adx_displayed', 1);\n                    window.adx_displayed = true; //console.log('Visible area:', event.inViewPercentage + '%');      \n                  } //document.getElementsByTagName(\"body\")[0].style.overflow = \"hidden\";\n\n                }\n              });\n            } //googletag.enableServices();\n\n\n            googletag.display(interstitialSlot);\n          });\n        } catch (e) {\n          console.log(e);\n        } finally {}\n      }\n\n      var maavaronMobile = \"ads.interstitial.inner\";\n\n      if ((window.dcPath.includes(\"3456.Magazine\") || window.dcPath.includes(\"Weather\") || window.dcPath.includes(\"weather\")) && window.newMedia == 'False') {\n        maavaronMobile = _modules_AdUnitFunctionsClass__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getDevice_func() == \"Android\" ? \"ads.ynet_mobileweb_transitions_general_android_main_ip\" : \"ads.ynet_mobileweb_transitions_general_iphone_main_ip\";\n      }\n\n      window.closeTransitions = function () {\n        document.getElementById(maavaronMobile).style.display = \"none\";\n      };\n    }\n\n    if (document.querySelector(\".grid1280_2\") != null || document.querySelector(\".grid1280_2\") != undefined) {\n      if (document.getElementById(\"ads.mivzakon\")) {\n        document.getElementById(\"ads.mivzakon\").remove();\n      }\n    }\n\n    _modules_AdUnitFunctionsClass__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getKeyValues_func();\n    _modules_AdUnitFunctionsClass__WEBPACK_IMPORTED_MODULE_1__[\"default\"].defineUnits_func();\n\n    if (window.innerWidth <= 767) {\n      if (window.ynet_responsive_sites) {\n        if (window.ynet_responsive_special || window.dcPath.includes(\"3456.Magazine\")) {\n          _modules_MainFanctionClass__WEBPACK_IMPORTED_MODULE_3__[\"default\"].RenameStickyBlazer();\n        } else {\n          var banner_h = window.is_IOS() == true && /CriOS/i.test(navigator.userAgent) ? \"height: 85px !important;\" : \"\";\n\n          if (document.getElementById(\"ads.sticky\")) {\n            var element = document.getElementById(\"ads.sticky\");\n            var ca = element.children;\n\n            for (var i = 0; i < ca.length; i++) {\n              ca[i].parentNode.removeChild(ca[i]);\n            }\n\n            element.id = \"ads.banner\";\n\n            if (window.dcPath.includes(\"PnaiPlus\")) {\n              element.setAttribute(\"style\", \"position:fixed;\" + banner_h + \"bottom:0px;left:0px;display:flex;justify-content:center;display:-webkit-box;-webkit-box-pack:center;display:-ms-flexbox;-ms-flex-pack:center;text-align:center;width:100%;z-index:9998;margin:0 auto;background-color:#fff\");\n            } else {\n              element.setAttribute(\"style\", \"position:fixed;bottom:0px;left:0px;display:flex;justify-content:center;display:-webkit-box;-webkit-box-pack:center;display:-ms-flexbox;-ms-flex-pack:center;text-align:center;width:100%;z-index:9999;margin:0 auto;background-color:#fff\");\n            } //element.getElementsByTagName(\"div\")[0].setAttribute(\"style\", \"height:85px; width:\" + banner_width + \"px;margin: 0 auto;\");\n\n\n            if (element.classList.contains(\"remove_sticky\")) {\n              element.classList.remove('remove_sticky');\n            }\n          }\n\n          if (document.getElementById(\"ads.banner\")) {\n            var banner_sticky = document.getElementById(\"ads.banner\");\n\n            if (window.dcPath.includes(\"PnaiPlus\")) {\n              banner_sticky.setAttribute(\"style\", \"position:fixed;\" + banner_h + \"bottom:0px;left:0px;display:flex;justify-content:center;display:-webkit-box;-webkit-box-pack:center;display:-ms-flexbox;-ms-flex-pack:center;text-align:center;width:100%;z-index:9998;margin:0 auto;background-color:#fff\");\n            } else {\n              banner_sticky.setAttribute(\"style\", \"position:fixed;bottom:0px;left:0px;display:flex;justify-content:center;display:-webkit-box;-webkit-box-pack:center;display:-ms-flexbox;-ms-flex-pack:center;text-align:center;width:100%;z-index:9999;margin:0 auto;background-color:#fff\");\n            } //banner_sticky.getElementsByTagName(\"div\")[0].setAttribute(\"style\", \"height:85px; width:\" + banner_width + \"px;margin: 0 auto;\");\n\n\n            if (banner_sticky.classList.contains(\"remove_sticky\")) {\n              banner_sticky.classList.remove('remove_sticky');\n            }\n          }\n        }\n      }\n    }\n\n    if (window.dcCG == 'home' || window.dcPath == \"2775.Knesset-32472.yuval1280\") {\n      _modules_AdUnitFunctionsClass__WEBPACK_IMPORTED_MODULE_1__[\"default\"].Change_promo_and_mivzakon_place();\n    }\n\n    ;\n\n    if (window.newMedia == 'True' && window.innerWidth > 767) {\n      _modules_AdUnitFunctionsClass__WEBPACK_IMPORTED_MODULE_1__[\"default\"].AddDivs();\n    }\n\n    ;\n\n    if (window.dcSite == \"ynt\" && window.innerWidth >= 767) {\n      var creating_new_banner = function creating_new_banner(banner_id) {\n        var banner_gallery = document.createElement('div');\n        banner_gallery.setAttribute('id', banner_id);\n        document.body.insertBefore(banner_gallery, document.body.firstChild);\n      };\n\n      var Bgallery_func = function Bgallery_func(banner) {\n        var galleryOpener = document.querySelectorAll('.gelleryOpener');\n        galleryOpener.forEach(function (gallery) {\n          gallery.addEventListener('click', function (e) {\n            window.setTimeout(function () {\n              if (document.querySelector(\".SiteArticleImagesGallery\")) {\n                if (!document.getElementById(banner)) creating_new_banner(banner);\n                var banner_gallery_sticky_div = document.getElementById(banner);\n                var galleryWrapper = document.querySelector(\".GalleryWrapper\");\n                galleryWrapper.parentNode.insertBefore(banner_gallery_sticky_div, galleryWrapper.nextSibling);\n                googletag.cmd.push(function () {\n                  var defined_gallery_banner = googletag.defineSlot(_modules_AdUnitFunctionsClass__WEBPACK_IMPORTED_MODULE_1__[\"default\"].adUnitCall_func(banner), [468, 60], banner).addService(googletag.pubads());\n                  googletag.enableServices();\n                  googletag.display(banner);\n                  banner_gallery_sticky_div.setAttribute(\"style\", \"position: absolute; bottom: 0; right: 0; left: 0; display: flex !important; margin:0 auto; justify-content: center; text-align:center;\"); //const header_gallery = document.querySelector(\".SiteArticleImagesGallery .GalleryWrapper .galleryHeaderWrapper\");\n                  // header_gallery.style.cssText += 'padding-top:15.25vw;';\n\n                  var galleryclose = document.querySelector('.closeBtn.yicon-x');\n                  galleryclose.addEventListener('click', function () {\n                    googletag.destroySlots([defined_gallery_banner]);\n                    creating_new_banner(banner);\n                  });\n                });\n              }\n            }, 1000);\n          });\n        });\n      }; // Run function of defining gallery banner\n\n\n      if (window.dcCG == \"article\") Bgallery_func(\"ads.banner.gallery.sticky\");\n      setTimeout(_modules_MainFanctionClass__WEBPACK_IMPORTED_MODULE_3__[\"default\"].refreshAll_func, _modules_AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_2__[\"default\"].refreshAdTime_func());\n\n      if (_modules_AdUnitFunctionsClass__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getDcPath_func(window.dcPath) == \".News\" && window.dcCG == \"article\") {\n        setTimeout(_modules_MainFanctionClass__WEBPACK_IMPORTED_MODULE_3__[\"default\"].refreshOzen_func, _modules_AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_2__[\"default\"].refreshAdOzen);\n      }\n    }\n\n    if (window.dcCG == \"article\" && window.inreads && window.inreads > 0 && window.articleBodyAdsRefreshRate > 0) {\n      setTimeout(_modules_MainFanctionClass__WEBPACK_IMPORTED_MODULE_3__[\"default\"].refreshInreads_func, window.articleBodyAdsRefreshRate * 1000);\n    } //in this script the display happen only one time for all gpt in ynet\n\n\n    _modules_InfrastructureClass__WEBPACK_IMPORTED_MODULE_0__[\"default\"].displayAdsRecursive_func(function () {\n      var MaaavaronSticky = _modules_AdUnitFunctionsClass__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getUrlVars_func(\"IsApp\") == \"true\" && !window.dcPath.includes(\"PnaiPlus\") ? 1 : 0;\n      var AdDisplay = \"ads.top\";\n\n      if (window.innerWidth <= 767) {\n        if (window.ynet_responsive_special == false && (window.ynet_responsive_sites || window.newMedia == 'True' && window.dcPath.includes(\"3456.Magazine\"))) {\n          AdDisplay = \"ads.banner\";\n        } else {\n          if (window.ynet_responsive_special) {\n            if (window.newMedia == 'True') {\n              AdDisplay = \"ads.interstitial.inner\";\n            } else {\n              if (_modules_AdUnitFunctionsClass__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getDevice_func() == \"Android\") {\n                AdDisplay = \"ads.ynet_mobileweb_transitions_general_android_main_ip\";\n              } else {\n                AdDisplay = \"ads.ynet_mobileweb_transitions_general_iphone_main_ip\";\n              }\n            }\n          } else {\n            AdDisplay = \"ads.sticky\";\n          }\n        }\n\n        if (MaaavaronSticky == 1) {\n          if (window.show_biglivebox == true) {\n            AdDisplay = \"ads.biglivebox\";\n          } else if (window.show_biglivebox == false) {\n            AdDisplay = \"ads.inboard\";\n          }\n        }\n      }\n\n      googletag.cmd.push(function () {\n        googletag.display(AdDisplay);\n      });\n    });\n  } else {\n    return console.log(\"GPT is off for ynet\");\n  }\n\n  window.AdUnitFunctionsClassObj = _modules_AdUnitFunctionsClass__WEBPACK_IMPORTED_MODULE_1__[\"default\"];\n  window.AdUnitPropertiesClassobj = _modules_AdUnitPropertiesClass__WEBPACK_IMPORTED_MODULE_2__[\"default\"];\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZ3B0X3NjcmlwdF95bmV0LmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL2dwdF9zY3JpcHRfeW5ldC5qcz9hNDdkIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFRoaXMgc2NyaXB0IHJ1biBncHQgb24geW5ldCBwYWdlc1xyXG4vLyBodHRwczovL3d3dy55bmV0LmNvLmlsL2hvbWUvMCw3MzQwLEwtOCwwMC5odG1sXHJcbi8vIFRvIGFjdGl2YXRlZCB0aGUgbmV3IHN5c3RlbSB1c2Ugc3FsOlxyXG4vLyBVUERBVEUgR2VuZXJhbF9QYXJhbV9WYWx1ZXNcclxuLy8gU0VUIFBhcmFtX1ZhbHVlID0gMSxcclxuLy8gV0hFUkUgUGFyYW1fTmFtZSA9ICdpc19uZXdfZ3B0JyBBTkQgQ29udGVudF9JZCA9ICdZbmV0JyA7XHJcbi8vIFRoZSBrZXkgaW4gdGhlIGNvZGUgZm9yIG9ubHkgeW5ldCBpcyAnaXNfeW5ldCdcclxuLy8gdGhlIHVzZSBpcyBpZiAoSW5mcmFzcnVjdHVyZUNsYXNzT2JqLlNpdGUgPT0gJ2lzX3luZXQnIClcclxuLy8gaW1wb3J0ICdiYWJlbC1wb2x5ZmlsbCc7XHJcbi8vIGltcG9ydCBcIkBiYWJlbC9wb2x5ZmlsbFwiO1xyXG5sZXQgeyBkY0xvYWRBZHMsIGdvb2dsZXRhZywgY29uc29sZSB9ID0gd2luZG93O1xyXG5pbXBvcnQgSW5mcmFzcnVjdHVyZUNsYXNzT2JqIGZyb20gXCIuLi9tb2R1bGVzL0luZnJhc3RydWN0dXJlQ2xhc3NcIjtcclxuSW5mcmFzcnVjdHVyZUNsYXNzT2JqLlNpdGUgPSBcImlzX3luZXRcIjtcclxuaW1wb3J0IEFkVW5pdEZ1bmN0aW9uc0NsYXNzT2JqIGZyb20gXCIuLi9tb2R1bGVzL0FkVW5pdEZ1bmN0aW9uc0NsYXNzXCI7XHJcbmltcG9ydCBBZFVuaXRQcm9wZXJ0aWVzQ2xhc3NvYmogZnJvbSBcIi4uL21vZHVsZXMvQWRVbml0UHJvcGVydGllc0NsYXNzXCI7XHJcbmltcG9ydCBNYWluRnVuY3Rpb25DbGFzc09iaiBmcm9tIFwiLi4vbW9kdWxlcy9NYWluRmFuY3Rpb25DbGFzc1wiO1xyXG53aW5kb3cuUmVmcmVzaEFsbCA9IE1haW5GdW5jdGlvbkNsYXNzT2JqLnJlZnJlc2hBbGxfZnVuYy5iaW5kKE1haW5GdW5jdGlvbkNsYXNzT2JqKTtcclxud2luZG93LlJlZnJlc2hBbGwgPSBNYWluRnVuY3Rpb25DbGFzc09iai5yZWZyZXNoQWxsX2Z1bmM7XHJcbndpbmRvdy5yZWZyZXNoX2lucmVhZHMgPSBNYWluRnVuY3Rpb25DbGFzc09iai5yZWZyZXNoSW5yZWFkc19mdW5jLmJpbmQoTWFpbkZ1bmN0aW9uQ2xhc3NPYmopO1xyXG53aW5kb3cucmVmcmVzaF9pbnJlYWRzID0gTWFpbkZ1bmN0aW9uQ2xhc3NPYmoucmVmcmVzaElucmVhZHNfZnVuYztcclxud2luZG93Lm5vX2FkcyA9IGZhbHNlO1xyXG5cclxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIiwgZnVuY3Rpb24gKCkge1xyXG4gIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmhDb250YWluZXIubWFnYXppbmVfdGVtcGxhdGVcIikpIHdpbmRvdy5ub19hZHMgPSB0cnVlO1xyXG59KTtcclxuXHJcbndpbmRvdy5jbG9zZVRyYW5zaXRpb25zID0gZnVuY3Rpb24oKSB7XHJcbiAgZ29vZ2xldGFnLmNtZC5wdXNoKGZ1bmN0aW9uKCkgeyBnb29nbGV0YWcuZGVzdHJveVNsb3RzKFtBZFVuaXRQcm9wZXJ0aWVzQ2xhc3NPYmouRGVmaW5lX3Nsb3RzW1wiYWRzLmludGVyc3RpdGlhbC5pbm5lclwiXV0pOyB9KTsgXHJcbiAgbGV0IHRyYW5zaXRpb24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFkcy5pbnRlcnN0aXRpYWwuaW5uZXJcIik7XHJcbiAgaWYgKHRyYW5zaXRpb24pIHtcclxuICAgIHRyYW5zaXRpb24uc3R5bGUuaGVpZ2h0ID0gJzBweCc7XHJcbiAgfVxyXG4gIHRyeSB7ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJDbG9zZV9idG5faW50ZXJzdGl0aWFsXCIpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7fSBjYXRjaCAoZSkge31cclxufVxyXG5cclxud2luZG93LmlzX0lPUyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgcmV0dXJuIFtcclxuICAgICAgJ2lQYWQgU2ltdWxhdG9yJyxcclxuICAgICAgJ2lQaG9uZSBTaW11bGF0b3InLFxyXG4gICAgICAnaVBvZCBTaW11bGF0b3InLFxyXG4gICAgICAnaVBhZCcsXHJcbiAgICAgICdpUGhvbmUnLFxyXG4gICAgICAnaVBvZCdcclxuICAgIF0uaW5jbHVkZXMobmF2aWdhdG9yLnBsYXRmb3JtKVxyXG4gICAgLy8gaVBhZCBvbiBpT1MgMTMgZGV0ZWN0aW9uXHJcbiAgICB8fCAobmF2aWdhdG9yLnVzZXJBZ2VudC5pbmNsdWRlcyhcIk1hY1wiKSAmJiBcIm9udG91Y2hlbmRcIiBpbiBkb2N1bWVudClcclxufVxyXG5cclxuLy8gV2hlbiBjaGFuY2hpbmcgbW9kZSAtIGNoYW5nZSBLViBEYXJrX01vZGUgYW5kIHJlZnJlc2ggc3BlY2lmaWMgYWRzXHJcbmlmICh3aW5kb3cubWF0Y2hNZWRpYSAmJiB3aW5kb3cubWF0Y2hNZWRpYSgnb25seSBzY3JlZW4gYW5kIChtYXgtd2lkdGg6NzY4cHggKSBhbmQgKG9yaWVudGF0aW9uOiBwb3J0cmFpdCksIG9ubHkgc2NyZWVuIGFuZCAobWF4LXdpZHRoOiA5MDBweCkgYW5kIChvcmllbnRhdGlvbjogbGFuZHNjYXBlKScpLm1hdGNoZXMpIHtcclxuICAgIHdpbmRvdy5tYXRjaE1lZGlhKCcocHJlZmVycy1jb2xvci1zY2hlbWU6IGRhcmspJykuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgZSA9PiB7XHJcbiAgICAgIGNvbnN0IG5ld0NvbG9yU2NoZW1lID0gZS5tYXRjaGVzID8gXCJvblwiIDogXCJvZmZcIjtcclxuICAgICAgZ29vZ2xldGFnLmNtZC5wdXNoKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGdvb2dsZXRhZy5wdWJhZHMoKS5zZXRUYXJnZXRpbmcoXCJEYXJrX01vZGVcIiwgbmV3Q29sb3JTY2hlbWUpO1xyXG4gICAgICAgIGxldCBzbG90cyA9IFt3aW5kb3cuQWRVbml0UHJvcGVydGllc0NsYXNzb2JqLkRlZmluZV9zbG90c1tcImFkcy5zdHJpcC5jb250ZW50LjFcIl0sIHdpbmRvdy5BZFVuaXRQcm9wZXJ0aWVzQ2xhc3NvYmouRGVmaW5lX3Nsb3RzW1wiYWRzLnN0cmlwLmNvbnRlbnQuMlwiXSwgd2luZG93LkFkVW5pdFByb3BlcnRpZXNDbGFzc29iai5EZWZpbmVfc2xvdHNbXCJhZHMuc3RyaXAub3JkZXJpbmcuMVwiXSwgd2luZG93LkFkVW5pdFByb3BlcnRpZXNDbGFzc29iai5EZWZpbmVfc2xvdHNbXCJhZHMuc3RyaXAub3JkZXJpbmcuMlwiXSwgXHJcbiAgICAgICAgd2luZG93LkFkVW5pdFByb3BlcnRpZXNDbGFzc29iai5EZWZpbmVfc2xvdHNbXCJhZHMuc3RyaXAub3JkZXJpbmcuM1wiXSwgd2luZG93LkFkVW5pdFByb3BlcnRpZXNDbGFzc29iai5EZWZpbmVfc2xvdHNbXCJhZHMuaW5ib3guMVwiXSwgd2luZG93LkFkVW5pdFByb3BlcnRpZXNDbGFzc29iai5EZWZpbmVfc2xvdHNbXCJhZHMuaW5ib3guMlwiXV07XHJcbiAgICAgICAgZ29vZ2xldGFnLnB1YmFkcygpLnJlZnJlc2goc2xvdHMpO1xyXG4gICAgICAgZ29vZ2xldGFnLmVuYWJsZVNlcnZpY2VzKCk7ICAgICAgXHJcbiAgICAgfSk7XHJcbiAgfSk7XHJcbn1cclxuXHJcblxyXG4gICAgXHJcblxyXG5JbmZyYXNydWN0dXJlQ2xhc3NPYmouaW5pdChmdW5jdGlvbigpIHtcclxuICAvL2lmIGRjTG9hZEFkcyA9IDAgdGhhbiB0aGUgZ3B0IGlzIG9mZlxyXG4gIGlmICh3aW5kb3cubm9fYWRzKSByZXR1cm47XHJcblxyXG4gIGlmIChkY0xvYWRBZHMgIT0gMCB8fCB3aW5kb3cubm9fYWRzID09IGZhbHNlKSB7XHJcblxyXG4gICAgd2luZG93LnluZXRfc2l0ZXMgPSBmYWxzZTtcclxuXHJcbiAgICBpZiAod2luZG93LmRjUGF0aC5pbmNsdWRlcyhcIlBuYWlQbHVzXCIpIFxyXG4gICAgICB8fCAod2luZG93LmRjUGF0aC5pbmNsdWRlcyhcImxhaXNoYVwiKSBcclxuICAgICAgfHwgd2luZG93LmRjUGF0aC5pbmNsdWRlcyhcImFyY2hpdGVjdHVyZVwiKSBcclxuICAgICAgfHwgd2luZG93LmRjUGF0aC5pbmNsdWRlcyhcIm1lbnRhXCIpIHx8IHdpbmRvdy5kY1BhdGguaW5jbHVkZXMoXCJmYXNoaW9uXCIpKSkge1xyXG4gICAgICAgIHdpbmRvdy55bmV0X3NpdGVzID0gdHJ1ZTtcclxuICAgIH0gXHJcblxyXG4gICAgaWYgKHdpbmRvdy5pbm5lcldpZHRoIDw9IDc2NykgeyAgIFxyXG5cclxuICAgICAgICBpZiAod2luZG93LmRjQ0cgIT0gJ2FydGljbGUnICYmIHdpbmRvdy5kY1BhdGguaW5jbHVkZXMoXCItMS5Ib21lXCIpICYmIHdpbmRvdy5wZXJmb3JtYW5jZS5uYXZpZ2F0aW9uLnR5cGUgPT0gd2luZG93LnBlcmZvcm1hbmNlLm5hdmlnYXRpb24uVFlQRV9CQUNLX0ZPUldBUkQpIHtcclxuICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdCQUNLX0hPTUVfQ0xJQ0tFRCcsIDEpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBpZiAoIXdpbmRvdy5kY1BhdGguaW5jbHVkZXMoXCItMS5Ib21lXCIpKSB7XHJcbiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdCQUNLX0hPTUVfQ0xJQ0tFRCcpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgIC8vIGFkeCBpbnRlcnN0aXRpYWwgXHJcbiAgICAgbGV0IGlzX2FwcCA9IEFkVW5pdEZ1bmN0aW9uc0NsYXNzT2JqLmdldFVybFZhcnNfZnVuYyhcIklzQXBwXCIpID09IFwidHJ1ZVwiO1xyXG5cclxuICAgICAgaWYgKHdpbmRvdy5hZHhfaW50ZXJzdGl0aWFsX21vYmlsZSA9PSAnVHJ1ZScgJiYgIWlzX2FwcCkge1xyXG4gIFxyXG4gICAgICAgIGZ1bmN0aW9uIGdldERldmljZSgpIHtcclxuICAgICAgICAgIGxldCB7IG5hdmlnYXRvciB9ID0gd2luZG93O1xyXG4gICAgICAgICAgaWYgKG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL0FuZHJvaWQvaSkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFwiQW5kcm9pZFwiO1xyXG4gICAgICAgICAgfSBlbHNlIGlmIChuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9BbmRyb2lkL2kpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBcIkFuZHJvaWRcIjtcclxuICAgICAgICAgIH0gZWxzZSBpZiAobmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvaVBob25lL2kpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBcImlQaG9uZVwiO1xyXG4gICAgICAgICAgfSBlbHNlIGlmIChuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9pUGFkL2kpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBcImlQYWRcIjtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBcIlBDXCI7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgYWR4X3NpdGUgPSBcInluZXRcIjtcclxuICAgICAgICBpZiAod2luZG93LmRjUGF0aC5pbmNsdWRlcyhcImxhaXNoYVwiKSkge1xyXG4gICAgICAgIGFkeF9zaXRlID0gXCJsYWlzaGFcIjtcclxuICAgICAgICB9IGVsc2UgaWYgKHdpbmRvdy5kY1BhdGguaW5jbHVkZXMoXCJhcmNoaXRlY3R1cmVcIikpIHtcclxuICAgICAgICBhZHhfc2l0ZSA9IFwiYXJjaGl0ZWN0dXJlXCI7IFxyXG4gICAgICAgIH0gZWxzZSBpZiAod2luZG93LmRjUGF0aC5pbmNsdWRlcyhcIm1lbnRhXCIpKSB7XHJcbiAgICAgICAgYWR4X3NpdGUgPSBcIm1lbnRhXCI7IFxyXG4gICAgICAgIH0gZWxzZSBpZiAod2luZG93LmRjUGF0aC5pbmNsdWRlcyhcImZhc2hpb25cIikpIHtcclxuICAgICAgICBhZHhfc2l0ZSA9IFwiZmFzaGlvblwiOyBcclxuICAgICAgICB9IFxyXG5cclxuICAgIFxyXG4gICAgICAgIGxldCBkZXZpY2UgPSAoZ2V0RGV2aWNlKCkgPT0gXCJBbmRyb2lkXCIpID8gXCJtb2JpbGV3ZWJfYW5kcm9pZFwiIDogXCJtb2JpbGV3ZWJfaXBob25lXCI7XHJcbiAgICAgICAgbGV0IGFkeF9wYXRoID0od2luZG93LmRjUGF0aC5pbmNsdWRlcyhcIlBuYWlQbHVzXCIpKSA/IGAvNjg3MC9wcGx1cy8ke2RldmljZX0vaW50ZXJzdGl0aWFsLmFkeGAgOiBgLzY4NzAveW5ldC8ke2RldmljZX0vaW50ZXJzdGl0aWFsLmFkeC8ke2FkeF9zaXRlfWA7XHJcblxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICB3aW5kb3cuZ29vZ2xldGFnID0gd2luZG93Lmdvb2dsZXRhZyB8fCB7Y21kOiBbXX07XHJcbiAgICBcclxuICAgICAgICAgIHdpbmRvdy5tYWF2YXJvbkFkeCA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJtYWF2YXJvbkFkeFwiKSkgIT09IG51bGwgPyBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwibWFhdmFyb25BZHhcIikpIDogeyBkYXRldGltZTogRGF0ZS5ub3coKSwgZGlzcGxheWVkbGFzdDogJycsIH07XHJcbiAgICBcclxuICAgICAgICAgICAgZ29vZ2xldGFnLmNtZC5wdXNoKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICB2YXIgaW50ZXJzdGl0aWFsU2xvdCA9IGdvb2dsZXRhZy5kZWZpbmVPdXRPZlBhZ2VTbG90KFxyXG4gICAgICAgICAgICBhZHhfcGF0aCxcclxuICAgICAgICAgICAgZ29vZ2xldGFnLmVudW1zLk91dE9mUGFnZUZvcm1hdC5JTlRFUlNUSVRJQUwpO1xyXG4gICAgICAgICAgICBpZiAoaW50ZXJzdGl0aWFsU2xvdCkge1xyXG4gICAgICAgICAgICAgIGludGVyc3RpdGlhbFNsb3QuYWRkU2VydmljZShnb29nbGV0YWcucHViYWRzKCkpOyAgICBcclxuICAgICAgICAgICAgICBnb29nbGV0YWcucHViYWRzKCkuYWRkRXZlbnRMaXN0ZW5lcignc2xvdE9ubG9hZCcsIGZ1bmN0aW9uKGV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoaW50ZXJzdGl0aWFsU2xvdCA9PT0gZXZlbnQuc2xvdCkgeyAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdJbnRlcnN0aXRpYWwgaXMgbG9hZGVkLicpO1xyXG4gICAgICAgICAgICAgICAgICBtYWF2YXJvbkFkeC5hZGQgPSBgbG9hZGVkYDsgXHJcbiAgICAgICAgICAgICAgICAgIG1hYXZhcm9uQWR4LmRhdGV0aW1lID0gRGF0ZS5ub3coKTtcclxuICAgICAgICAgICAgICAgICAgbWFhdmFyb25BZHguZGlzcGxheWVkbGFzdCA9IGFkeF9wYXRoO1xyXG4gICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnbWFhdmFyb25BZHgnLCBKU09OLnN0cmluZ2lmeShtYWF2YXJvbkFkeCkpO1xyXG4gICAgICAgICAgICAgICAgfSBcclxuICAgICAgICAgICAgICB9KTtcclxuICAgIFxyXG4gICAgICAgICAgICAgIGdvb2dsZXRhZy5wdWJhZHMoKS5hZGRFdmVudExpc3RlbmVyKCdzbG90VmlzaWJpbGl0eUNoYW5nZWQnLFxyXG4gICAgICAgICAgICAgIGZ1bmN0aW9uKGV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgc2xvdCA9IGV2ZW50LnNsb3Q7ICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ1Zpc2liaWxpdHkgb2Ygc2xvdCcsIHNsb3QuZ2V0U2xvdEVsZW1lbnRJZCgpLCAnY2hhbmdlZC4nKTtcclxuICAgICAgICAgICAgICAgIGlmIChzbG90ID09PSBpbnRlcnN0aXRpYWxTbG90KSB7ICBcclxuICAgICAgICAgICAgICAgICAgaWYoZXZlbnQuaW5WaWV3UGVyY2VudGFnZSA9PSAxMDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd5bmV0X21vYmlsZXdlYl9pbnRlcnN0aXRpYWxfYWR4X2Rpc3BsYXllZCcsMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cuYWR4X2Rpc3BsYXllZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdWaXNpYmxlIGFyZWE6JywgZXZlbnQuaW5WaWV3UGVyY2VudGFnZSArICclJyk7ICAgICAgXHJcbiAgICAgICAgICAgICAgICAgIH0gICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgLy9kb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImJvZHlcIilbMF0uc3R5bGUub3ZlcmZsb3cgPSBcImhpZGRlblwiO1xyXG4gICAgICAgICAgICAgICAgfSBcclxuICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgKTsgICBcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvL2dvb2dsZXRhZy5lbmFibGVTZXJ2aWNlcygpO1xyXG4gICAgICAgICAgICBnb29nbGV0YWcuZGlzcGxheShpbnRlcnN0aXRpYWxTbG90KTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKGUpO1xyXG4gICAgICAgIH0gZmluYWxseSB7XHJcbiAgICAgICAgfSAgXHJcbiAgICAgIH1cclxuXHJcblxyXG4gICAgICBsZXQgbWFhdmFyb25Nb2JpbGUgPSBcImFkcy5pbnRlcnN0aXRpYWwuaW5uZXJcIjtcclxuICAgICAgaWYgKCh3aW5kb3cuZGNQYXRoLmluY2x1ZGVzKFwiMzQ1Ni5NYWdhemluZVwiKSB8fCAod2luZG93LmRjUGF0aC5pbmNsdWRlcyhcIldlYXRoZXJcIikgfHwgd2luZG93LmRjUGF0aC5pbmNsdWRlcyhcIndlYXRoZXJcIikpKSAmJiB3aW5kb3cubmV3TWVkaWEgPT0gJ0ZhbHNlJykge1xyXG4gICAgICAgIG1hYXZhcm9uTW9iaWxlID0gKEFkVW5pdEZ1bmN0aW9uc0NsYXNzT2JqLmdldERldmljZV9mdW5jKCkgPT0gXCJBbmRyb2lkXCIpID8gXCJhZHMueW5ldF9tb2JpbGV3ZWJfdHJhbnNpdGlvbnNfZ2VuZXJhbF9hbmRyb2lkX21haW5faXBcIiA6IFwiYWRzLnluZXRfbW9iaWxld2ViX3RyYW5zaXRpb25zX2dlbmVyYWxfaXBob25lX21haW5faXBcIjtcclxuICAgICAgfSAgICAgXHJcbiAgICAgIHdpbmRvdy5jbG9zZVRyYW5zaXRpb25zID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQobWFhdmFyb25Nb2JpbGUpLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGlmICgoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5ncmlkMTI4MF8yXCIpICE9IG51bGwgfHwgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5ncmlkMTI4MF8yXCIpICE9IHVuZGVmaW5lZCkpIHtcclxuICAgICAgaWYoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhZHMubWl2emFrb25cIikpIHtcclxuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFkcy5taXZ6YWtvblwiKS5yZW1vdmUoKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIEFkVW5pdEZ1bmN0aW9uc0NsYXNzT2JqLmdldEtleVZhbHVlc19mdW5jKCk7XHJcbiAgICBBZFVuaXRGdW5jdGlvbnNDbGFzc09iai5kZWZpbmVVbml0c19mdW5jKCk7XHJcbiAgICBcclxuIFxyXG4gICAgaWYgKHdpbmRvdy5pbm5lcldpZHRoIDw9IDc2Nykge1xyXG5cclxuICAgICBpZiAod2luZG93LnluZXRfcmVzcG9uc2l2ZV9zaXRlcykge1xyXG4gICAgICBpZiAod2luZG93LnluZXRfcmVzcG9uc2l2ZV9zcGVjaWFsIHx8ICh3aW5kb3cuZGNQYXRoLmluY2x1ZGVzKFwiMzQ1Ni5NYWdhemluZVwiKSkpIHtcclxuICAgICAgICBNYWluRnVuY3Rpb25DbGFzc09iai5SZW5hbWVTdGlja3lCbGF6ZXIoKTtcclxuICAgICAgfSBlbHNlIHtcclxuXHJcbiAgICAgICAgbGV0IGJhbm5lcl9oID0gKHdpbmRvdy5pc19JT1MoKSA9PSB0cnVlICYmIC9DcmlPUy9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkpID8gXCJoZWlnaHQ6IDg1cHggIWltcG9ydGFudDtcIiA6IFwiXCI7XHJcbiAgICBcclxuICAgICAgICBpZiAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhZHMuc3RpY2t5XCIpKSB7XHJcbiAgICAgICAgICBjb25zdCBlbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhZHMuc3RpY2t5XCIpO1xyXG4gICAgICAgICAgY29uc3QgY2EgPSBlbGVtZW50LmNoaWxkcmVuO1xyXG4gICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjYS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBjYVtpXS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGNhW2ldKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGVsZW1lbnQuaWQgPSBcImFkcy5iYW5uZXJcIjtcclxuICAgICAgICAgIGlmICh3aW5kb3cuZGNQYXRoLmluY2x1ZGVzKFwiUG5haVBsdXNcIikpIHtcclxuICAgICAgICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJzdHlsZVwiLCBcInBvc2l0aW9uOmZpeGVkO1wiICsgYmFubmVyX2ggKyBcImJvdHRvbTowcHg7bGVmdDowcHg7ZGlzcGxheTpmbGV4O2p1c3RpZnktY29udGVudDpjZW50ZXI7ZGlzcGxheTotd2Via2l0LWJveDstd2Via2l0LWJveC1wYWNrOmNlbnRlcjtkaXNwbGF5Oi1tcy1mbGV4Ym94Oy1tcy1mbGV4LXBhY2s6Y2VudGVyO3RleHQtYWxpZ246Y2VudGVyO3dpZHRoOjEwMCU7ei1pbmRleDo5OTk4O21hcmdpbjowIGF1dG87YmFja2dyb3VuZC1jb2xvcjojZmZmXCIpO1xyXG4gIFxyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJzdHlsZVwiLCBcInBvc2l0aW9uOmZpeGVkO2JvdHRvbTowcHg7bGVmdDowcHg7ZGlzcGxheTpmbGV4O2p1c3RpZnktY29udGVudDpjZW50ZXI7ZGlzcGxheTotd2Via2l0LWJveDstd2Via2l0LWJveC1wYWNrOmNlbnRlcjtkaXNwbGF5Oi1tcy1mbGV4Ym94Oy1tcy1mbGV4LXBhY2s6Y2VudGVyO3RleHQtYWxpZ246Y2VudGVyO3dpZHRoOjEwMCU7ei1pbmRleDo5OTk5O21hcmdpbjowIGF1dG87YmFja2dyb3VuZC1jb2xvcjojZmZmXCIpO1xyXG4gIFxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgLy9lbGVtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiZGl2XCIpWzBdLnNldEF0dHJpYnV0ZShcInN0eWxlXCIsIFwiaGVpZ2h0Ojg1cHg7IHdpZHRoOlwiICsgYmFubmVyX3dpZHRoICsgXCJweDttYXJnaW46IDAgYXV0bztcIik7XHJcblxyXG4gICAgICAgICAgaWYgKGVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKFwicmVtb3ZlX3N0aWNreVwiKSkge1xyXG4gICAgICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ3JlbW92ZV9zdGlja3knKTsgXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGlmIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFkcy5iYW5uZXJcIikpIHtcclxuICAgICAgICAgICAgbGV0IGJhbm5lcl9zdGlja3kgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFkcy5iYW5uZXJcIik7XHJcbiAgICAgICAgICAgIGlmICh3aW5kb3cuZGNQYXRoLmluY2x1ZGVzKFwiUG5haVBsdXNcIikpIHtcclxuICAgICAgICAgICAgICBiYW5uZXJfc3RpY2t5LnNldEF0dHJpYnV0ZShcInN0eWxlXCIsIFwicG9zaXRpb246Zml4ZWQ7XCIgKyBiYW5uZXJfaCArIFwiYm90dG9tOjBweDtsZWZ0OjBweDtkaXNwbGF5OmZsZXg7anVzdGlmeS1jb250ZW50OmNlbnRlcjtkaXNwbGF5Oi13ZWJraXQtYm94Oy13ZWJraXQtYm94LXBhY2s6Y2VudGVyO2Rpc3BsYXk6LW1zLWZsZXhib3g7LW1zLWZsZXgtcGFjazpjZW50ZXI7dGV4dC1hbGlnbjpjZW50ZXI7d2lkdGg6MTAwJTt6LWluZGV4Ojk5OTg7bWFyZ2luOjAgYXV0bztiYWNrZ3JvdW5kLWNvbG9yOiNmZmZcIik7IFxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIGJhbm5lcl9zdGlja3kuc2V0QXR0cmlidXRlKFwic3R5bGVcIiwgXCJwb3NpdGlvbjpmaXhlZDtib3R0b206MHB4O2xlZnQ6MHB4O2Rpc3BsYXk6ZmxleDtqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyO2Rpc3BsYXk6LXdlYmtpdC1ib3g7LXdlYmtpdC1ib3gtcGFjazpjZW50ZXI7ZGlzcGxheTotbXMtZmxleGJveDstbXMtZmxleC1wYWNrOmNlbnRlcjt0ZXh0LWFsaWduOmNlbnRlcjt3aWR0aDoxMDAlO3otaW5kZXg6OTk5OTttYXJnaW46MCBhdXRvO2JhY2tncm91bmQtY29sb3I6I2ZmZlwiKTsgXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy9iYW5uZXJfc3RpY2t5LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiZGl2XCIpWzBdLnNldEF0dHJpYnV0ZShcInN0eWxlXCIsIFwiaGVpZ2h0Ojg1cHg7IHdpZHRoOlwiICsgYmFubmVyX3dpZHRoICsgXCJweDttYXJnaW46IDAgYXV0bztcIik7XHJcbiAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKGJhbm5lcl9zdGlja3kuY2xhc3NMaXN0LmNvbnRhaW5zKFwicmVtb3ZlX3N0aWNreVwiKSkge1xyXG4gICAgICAgICAgICAgIGJhbm5lcl9zdGlja3kuY2xhc3NMaXN0LnJlbW92ZSgncmVtb3ZlX3N0aWNreScpOyBcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgfVxyXG4gICBcclxuICAgIGlmICh3aW5kb3cuZGNDRyA9PSAnaG9tZScgfHwgd2luZG93LmRjUGF0aCA9PSBcIjI3NzUuS25lc3NldC0zMjQ3Mi55dXZhbDEyODBcIikge0FkVW5pdEZ1bmN0aW9uc0NsYXNzT2JqLkNoYW5nZV9wcm9tb19hbmRfbWl2emFrb25fcGxhY2UoKTt9O1xyXG4gICAgXHJcbiAgICBpZiAod2luZG93Lm5ld01lZGlhID09ICdUcnVlJyAmJiB3aW5kb3cuaW5uZXJXaWR0aCA+IDc2Nykge0FkVW5pdEZ1bmN0aW9uc0NsYXNzT2JqLkFkZERpdnMoKTt9O1xyXG4gICAgXHJcbiAgICBpZiAod2luZG93LmRjU2l0ZSA9PSBcInludFwiICYmIHdpbmRvdy5pbm5lcldpZHRoID49IDc2Nykge1xyXG4gICAgICBjb25zdCBjcmVhdGluZ19uZXdfYmFubmVyID0gKGJhbm5lcl9pZCkgPT4ge1xyXG4gICAgICAgIGxldCBiYW5uZXJfZ2FsbGVyeSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgIGJhbm5lcl9nYWxsZXJ5LnNldEF0dHJpYnV0ZSgnaWQnLCBiYW5uZXJfaWQpOyAgXHJcbiAgICAgICAgZG9jdW1lbnQuYm9keS5pbnNlcnRCZWZvcmUoYmFubmVyX2dhbGxlcnksIGRvY3VtZW50LmJvZHkuZmlyc3RDaGlsZCk7ICAgICAgICAgICAgIFxyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zdCBCZ2FsbGVyeV9mdW5jID0gKGJhbm5lcikgPT4ge1xyXG4gICAgICAgIGNvbnN0IGdhbGxlcnlPcGVuZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZ2VsbGVyeU9wZW5lcicpO1xyXG4gICAgICAgIGdhbGxlcnlPcGVuZXIuZm9yRWFjaChnYWxsZXJ5ID0+IHtcclxuICAgICAgICAgIGdhbGxlcnkuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSk9PiB7ICAgICAgICAgXHJcbiAgICAgICAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5TaXRlQXJ0aWNsZUltYWdlc0dhbGxlcnlcIikpIHtcclxuICAgICAgICAgICAgICAgIGlmICghZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYmFubmVyKSkgY3JlYXRpbmdfbmV3X2Jhbm5lcihiYW5uZXIpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgYmFubmVyX2dhbGxlcnlfc3RpY2t5X2RpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGJhbm5lcik7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBnYWxsZXJ5V3JhcHBlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuR2FsbGVyeVdyYXBwZXJcIik7XHJcbiAgICAgICAgICAgICAgICBnYWxsZXJ5V3JhcHBlci5wYXJlbnROb2RlLmluc2VydEJlZm9yZShiYW5uZXJfZ2FsbGVyeV9zdGlja3lfZGl2LCBnYWxsZXJ5V3JhcHBlci5uZXh0U2libGluZyk7XHJcblxyXG4gICAgICAgICAgICAgICAgZ29vZ2xldGFnLmNtZC5wdXNoKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgbGV0IGRlZmluZWRfZ2FsbGVyeV9iYW5uZXIgPSBnb29nbGV0YWcuZGVmaW5lU2xvdChBZFVuaXRGdW5jdGlvbnNDbGFzc09iai5hZFVuaXRDYWxsX2Z1bmMoYmFubmVyKSwgWzQ2OCwgNjBdLCBiYW5uZXIpLmFkZFNlcnZpY2UoZ29vZ2xldGFnLnB1YmFkcygpKTtcclxuICAgICAgICAgICAgICAgICAgZ29vZ2xldGFnLmVuYWJsZVNlcnZpY2VzKCk7XHJcbiAgICAgICAgICAgICAgICAgIGdvb2dsZXRhZy5kaXNwbGF5KGJhbm5lcik7XHJcblxyXG4gICAgICAgICAgICAgICAgICBiYW5uZXJfZ2FsbGVyeV9zdGlja3lfZGl2LnNldEF0dHJpYnV0ZShcInN0eWxlXCIsIFwicG9zaXRpb246IGFic29sdXRlOyBib3R0b206IDA7IHJpZ2h0OiAwOyBsZWZ0OiAwOyBkaXNwbGF5OiBmbGV4ICFpbXBvcnRhbnQ7IG1hcmdpbjowIGF1dG87IGp1c3RpZnktY29udGVudDogY2VudGVyOyB0ZXh0LWFsaWduOmNlbnRlcjtcIik7XHJcbiAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAvL2NvbnN0IGhlYWRlcl9nYWxsZXJ5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5TaXRlQXJ0aWNsZUltYWdlc0dhbGxlcnkgLkdhbGxlcnlXcmFwcGVyIC5nYWxsZXJ5SGVhZGVyV3JhcHBlclwiKTtcclxuICAgICAgICAgICAgICAgICAvLyBoZWFkZXJfZ2FsbGVyeS5zdHlsZS5jc3NUZXh0ICs9ICdwYWRkaW5nLXRvcDoxNS4yNXZ3Oyc7XHJcblxyXG4gICAgICAgICAgICAgICAgICBjb25zdCBnYWxsZXJ5Y2xvc2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2xvc2VCdG4ueWljb24teCcpO1xyXG4gICAgICAgICAgICAgICAgICBnYWxsZXJ5Y2xvc2UuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKT0+IHtcclxuICAgICAgICAgICAgICAgICAgICBnb29nbGV0YWcuZGVzdHJveVNsb3RzKFtkZWZpbmVkX2dhbGxlcnlfYmFubmVyXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgY3JlYXRpbmdfbmV3X2Jhbm5lcihiYW5uZXIpO1xyXG4gICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgXHJcblxyXG4gICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9LCAxMDAwKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgIFxyXG4gICAgICAvLyBSdW4gZnVuY3Rpb24gb2YgZGVmaW5pbmcgZ2FsbGVyeSBiYW5uZXJcclxuICAgICAgaWYgKHdpbmRvdy5kY0NHID09IFwiYXJ0aWNsZVwiKSBCZ2FsbGVyeV9mdW5jKFwiYWRzLmJhbm5lci5nYWxsZXJ5LnN0aWNreVwiKTtcclxuICAgICAgXHJcbiAgXHJcbiAgICAgIHNldFRpbWVvdXQoTWFpbkZ1bmN0aW9uQ2xhc3NPYmoucmVmcmVzaEFsbF9mdW5jLCBBZFVuaXRQcm9wZXJ0aWVzQ2xhc3NvYmoucmVmcmVzaEFkVGltZV9mdW5jKCkpO1xyXG4gICAgICBpZiAoQWRVbml0RnVuY3Rpb25zQ2xhc3NPYmouZ2V0RGNQYXRoX2Z1bmMod2luZG93LmRjUGF0aCkgPT0gXCIuTmV3c1wiICYmIHdpbmRvdy5kY0NHID09IFwiYXJ0aWNsZVwiKSB7XHJcbiAgICAgICAgc2V0VGltZW91dChNYWluRnVuY3Rpb25DbGFzc09iai5yZWZyZXNoT3plbl9mdW5jLCBBZFVuaXRQcm9wZXJ0aWVzQ2xhc3NvYmoucmVmcmVzaEFkT3plbik7fVxyXG4gICAgICAgIFxyXG4gICAgfVxyXG5cclxuICAgIGlmICh3aW5kb3cuZGNDRyA9PSBcImFydGljbGVcIiAmJiB3aW5kb3cuaW5yZWFkcyAmJiB3aW5kb3cuaW5yZWFkcyA+IDAgJiYgd2luZG93LmFydGljbGVCb2R5QWRzUmVmcmVzaFJhdGUgPiAwKSB7XHJcbiAgICAgIHNldFRpbWVvdXQoTWFpbkZ1bmN0aW9uQ2xhc3NPYmoucmVmcmVzaElucmVhZHNfZnVuYywgd2luZG93LmFydGljbGVCb2R5QWRzUmVmcmVzaFJhdGUgKiAxMDAwKTtcclxuICAgIH1cclxuXHJcbiAgICAvL2luIHRoaXMgc2NyaXB0IHRoZSBkaXNwbGF5IGhhcHBlbiBvbmx5IG9uZSB0aW1lIGZvciBhbGwgZ3B0IGluIHluZXRcclxuICAgIEluZnJhc3J1Y3R1cmVDbGFzc09iai5kaXNwbGF5QWRzUmVjdXJzaXZlX2Z1bmMoZnVuY3Rpb24oKSB7XHJcbiAgICAgIGxldCBNYWFhdmFyb25TdGlja3kgPSAoQWRVbml0RnVuY3Rpb25zQ2xhc3NPYmouZ2V0VXJsVmFyc19mdW5jKFwiSXNBcHBcIikgPT0gXCJ0cnVlXCIgJiYgIXdpbmRvdy5kY1BhdGguaW5jbHVkZXMoXCJQbmFpUGx1c1wiKSkgPyAxIDogMDtcclxuICAgICAgbGV0IEFkRGlzcGxheSA9IFwiYWRzLnRvcFwiO1xyXG4gICAgICBpZiAod2luZG93LmlubmVyV2lkdGggPD0gNzY3KSB7XHJcbiAgICAgICAgaWYgKHdpbmRvdy55bmV0X3Jlc3BvbnNpdmVfc3BlY2lhbCA9PSBmYWxzZSAmJiAod2luZG93LnluZXRfcmVzcG9uc2l2ZV9zaXRlcyB8fCAod2luZG93Lm5ld01lZGlhID09ICdUcnVlJyAmJiB3aW5kb3cuZGNQYXRoLmluY2x1ZGVzKFwiMzQ1Ni5NYWdhemluZVwiKSkpKSB7XHJcbiAgICAgICAgICAgIEFkRGlzcGxheSA9IFwiYWRzLmJhbm5lclwiOyAgICAgIFxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBpZiAod2luZG93LnluZXRfcmVzcG9uc2l2ZV9zcGVjaWFsKSB7XHJcbiAgICAgICAgICAgIGlmICh3aW5kb3cubmV3TWVkaWEgPT0gJ1RydWUnKSB7IFxyXG4gICAgICAgICAgICAgIEFkRGlzcGxheSA9IFwiYWRzLmludGVyc3RpdGlhbC5pbm5lclwiOyBcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICBpZiAoQWRVbml0RnVuY3Rpb25zQ2xhc3NPYmouZ2V0RGV2aWNlX2Z1bmMoKSA9PSBcIkFuZHJvaWRcIikge1xyXG4gICAgICAgICAgICAgICAgQWREaXNwbGF5ID0gXCJhZHMueW5ldF9tb2JpbGV3ZWJfdHJhbnNpdGlvbnNfZ2VuZXJhbF9hbmRyb2lkX21haW5faXBcIjtcclxuICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgQWREaXNwbGF5ID0gXCJhZHMueW5ldF9tb2JpbGV3ZWJfdHJhbnNpdGlvbnNfZ2VuZXJhbF9pcGhvbmVfbWFpbl9pcFwiO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgQWREaXNwbGF5ID0gXCJhZHMuc3RpY2t5XCI7XHJcbiAgICAgICAgICB9ICAgICAgXHJcbiAgICAgIH1cclxuICAgICAgaWYgKE1hYWF2YXJvblN0aWNreSA9PSAxKSB7XHJcbiAgICAgICAgaWYgKHdpbmRvdy5zaG93X2JpZ2xpdmVib3ggPT0gdHJ1ZSkge1xyXG4gICAgICAgICAgQWREaXNwbGF5ID0gXCJhZHMuYmlnbGl2ZWJveFwiO1xyXG4gICAgICAgIH0gZWxzZSBpZiAod2luZG93LnNob3dfYmlnbGl2ZWJveCA9PSBmYWxzZSkge1xyXG4gICAgICAgICAgQWREaXNwbGF5ID0gXCJhZHMuaW5ib2FyZFwiO1xyXG4gICAgICAgIH0gXHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgICAgZ29vZ2xldGFnLmNtZC5wdXNoKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGdvb2dsZXRhZy5kaXNwbGF5KEFkRGlzcGxheSk7XHJcbiAgICAgIH0pO1xyXG4gICB9KTtcclxuICB9IGVsc2Uge1xyXG4gICAgcmV0dXJuIGNvbnNvbGUubG9nKFwiR1BUIGlzIG9mZiBmb3IgeW5ldFwiKTtcclxuICB9XHJcbiAgd2luZG93LkFkVW5pdEZ1bmN0aW9uc0NsYXNzT2JqID0gQWRVbml0RnVuY3Rpb25zQ2xhc3NPYmo7XHJcbiAgd2luZG93LkFkVW5pdFByb3BlcnRpZXNDbGFzc29iaiA9IEFkVW5pdFByb3BlcnRpZXNDbGFzc29iajtcclxufSk7XHJcbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBVUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/gpt_script_ynet.js\n");

/***/ })

/******/ });