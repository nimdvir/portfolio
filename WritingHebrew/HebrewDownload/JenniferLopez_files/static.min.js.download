/*! Onsite Tag, version: "2.8.0" */!function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([,function(e,t,n){"use strict";n.r(t);const o={PUBLISHER:"Publisher",NMC:"NMC"},r={COOKIE:"Cookie",LOCAL_STORAGE:"LS",GLOBAL_OBJ_PATH:"GOP"},i=2,a=0,s=1,c={DEFAULT_MANAGED_BY:o.NMC,DEFAULT_PPID_STORAGE_KEY:"nmcPPID",DEFAULT_PPID_TTL_DAYS:60,OPT_OUT_STORAGE_KEY:"nmcPpidOptout"},l={OPT_OUT:"ppidOptout",OPT_IN:"ppidOptin"},d=1,u=2,p=1,R=2,f={GENERAL_ERROR:"GENERAL_ERROR",CYCLIC_REFERENCE_ERROR:"CYCLIC_REFERENCE_ERROR",OPT_OUT_ERROR:"OPT_OUT_ERROR",BROWSER_PREFERENCES_ERROR:"BROWSER_PREFERENCES_ERROR",BUILD_AND_FIRE_ERROR:"BUILD_AND_FIRE_ERROR",CONSENT_ERROR:"CONSENT_ERROR",EXPRESSO_ERROR:"EXPRESSO_ERROR",INTEGRATION_ERROR:"INTEGRATION_ERROR",PPID_ERROR:"PPID_ERROR",SCHEMA_ORG_ERROR:"SCHEMA_ORG_ERROR",TOKENIZE_UNEXPECTED_ERROR:"TOKENIZE_UNEXPECTED_ERROR",UNREACHABLE_ERROR:"UNREACHABLE_ERROR",MAX_PARAMS_EXCEEDED_ERROR:"MAX_PARAMS_EXCEEDED_ERROR",POST_MESSAGE_ERROR:"POST_MESSAGE_ERROR"},E=[f.GENERAL_ERROR,f.BUILD_AND_FIRE_ERROR,f.MAX_PARAMS_EXCEEDED_ERROR,f.OPT_OUT_ERROR,f.PPID_ERROR,f.SCHEMA_ORG_ERROR,f.TOKENIZE_UNEXPECTED_ERROR,f.UNREACHABLE_ERROR];var O="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),g=new Uint8Array(16);function w(){if(!O)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return O(g)}for(var _=[],m=0;m<256;++m)_[m]=(m+256).toString(16).substr(1);var y=function(e,t){var n=t||0,o=_;return[o[e[n++]],o[e[n++]],o[e[n++]],o[e[n++]],"-",o[e[n++]],o[e[n++]],"-",o[e[n++]],o[e[n++]],"-",o[e[n++]],o[e[n++]],"-",o[e[n++]],o[e[n++]],o[e[n++]],o[e[n++]],o[e[n++]],o[e[n++]]].join("")};var T=function(e,t,n){var o=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var r=(e=e||{}).random||(e.rng||w)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t)for(var i=0;i<16;++i)t[o+i]=r[i];return t||y(r)};const h=()=>(H(k.info,"protocol is https:"),"https:"),C=()=>te("domain")?(H(k.info,`domain is ${window.xl8_config.domain}`),window.xl8_config.domain):"mydmp.exelator.com",b=(e,t,n)=>{let o=n?e:encodeURIComponent(e);return o+="="+encodeURIComponent(t)},N=(e,t,n,o)=>{const r=new XMLHttpRequest;return r.withCredentials=!0,r.onreadystatechange=()=>o(r),r.open(t,e),H(k.info,`Fired tag with url: ${e} and params: ${n} using ${t} method`),r},P=(e,t,n)=>{if(!navigator.cookieEnabled)return B("The browser does not support or is blocking cookies from being set",f.BROWSER_PREFERENCES_ERROR),!1;if(!e||!t)return B("Cookie key or value was not provided",f.INTEGRATION_ERROR),!1;let o;if(n){const e=new Date;e.setTime(e.getTime()+24*n*60*60*1e3),o="; expires="+e.toUTCString()}else o="";return document.cookie=e+"="+t+o+"; path=/",!0};function A(e){if(document.cookie.length>0){const t=document.cookie.match("(^|;) ?"+e+"=([^;]*)(;|$)");return t?t[2]:null}return null}function S(e,t,n){!function(e){null!==A(e)&&(document.cookie=e+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT")}(e),P(e,t,n)}const v=(e,t)=>{if(!e||!t)return B("Local Storage key or value was not provided",f.INTEGRATION_ERROR),!1;try{window.localStorage.setItem(e,t)}catch(e){return B(`Failed to add data to the Local Storage. error=${e.message}`,f.BROWSER_PREFERENCES_ERROR),!1}return!0},I=e=>e?window.localStorage.getItem(e):(B("Local Storage key was not provided",f.INTEGRATION_ERROR),null),x=e=>e?(window.localStorage.removeItem(e),!0):(B("Local Storage key was not provided",f.INTEGRATION_ERROR),!1);const D=()=>{if(null===window.localStorage)return!1;try{const e="lsTest123";return window.localStorage.setItem(e,e),window.localStorage.removeItem(e),!0}catch(e){return!1}};function L(){if(D()){if(I(c.OPT_OUT_STORAGE_KEY))return e=c.OPT_OUT_STORAGE_KEY,t=!0,x(e),v(e,t),!0}var e,t;return!1}const j=(e,t=c.DEFAULT_PPID_STORAGE_KEY)=>{let n;if(M(e),!(n=e===r.COOKIE?A(t):I(t)))throw new Error("The ppid is missing");return n};function M(e){if(!e)throw new Error("ppidStorageType configuration key is missing")}const G=()=>{const{p:e,g:t,ppidCollectionEnabled:n,ppidStorageType:o,ppidStorageKey:r}=window.xl8_config;if(!n)return H("info","PPID collection is disabled. Opt Out rejected"),!1;try{return M(o),D()?v(c.OPT_OUT_STORAGE_KEY,!0):B("OptOut: Local Storage is not supported/allowed!",f.BROWSER_PREFERENCES_ERROR),function(e){const t=new XMLHttpRequest;t.withCredentials=!0,t.onreadystatechange=()=>{t.readyState===XMLHttpRequest.DONE&&(200!==t.status&&B("There was a problem with the opt out request",f.OPT_OUT_ERROR),200===t.status&&H(k.info,"OptOut: Opt Out details sent successfully!"))},t.open("GET",e),t.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),H(k.info,`OptOut: firing opt out with link: ${e}`),t.send()}(((e,t,n)=>`${h()}//${C()}/optout/publishers?p=${e}&g=${t}&xl8ppid=${n}`)(e,t,j(o,r))),!0}catch(e){return B(`OptOut: Failed to Opt Out. error = ${e.message}`,f.OPT_OUT_ERROR),!1}};let $=[],U={},F=!1;const k={info:"info",error:"error",analytic:"analytic"},B=(e,t=f.GENERAL_ERROR)=>{const n={[t]:e};ee()&&console.error(`${k.error}: ${e}`),K(n)},H=(e,t,n)=>{ee()&&console.log(e+": "+t),e===k.analytic&&re(n)&&X(n)},K=e=>{$.push(e)},X=e=>{U={...U,...e}},q=e=>{if(performance.getEntries){const t=performance.getEntries().filter(t=>t.name.includes(e));return t.length?Math.round(t[0].duration):null}},Y=()=>$.filter(e=>E.includes(Object.keys(e)[0])),z=()=>$.filter(e=>e[f.INTEGRATION_ERROR]),J=()=>{const e=Z();let t;if(window.xl8_config.ppidCollectionEnabled)try{t=j(window.xl8_config.ppidStorageType,window.xl8_config.ppidStorageKey)}catch(e){B(`Unable to get PPID while building log: ${e.message}`,f.PPID_ERROR)}const n=(()=>Object.assign({},...$))(),o=q("cdn.exelator"),r=q(C()),i=(()=>{const e=q("cdn.exelator"),t=q(C()),n=U.scrapingTime;return e&&t&&n?e+n+t:null})();return{onsiteTagVersion:"2.8.0",usingBeaconAPI:"sendBeacon"in navigator,href:window.location.href,cookieEnabled:navigator.cookieEnabled,userAgent:navigator.userAgent,tagConfig:window.xl8_config,errors:$,errorsCount:$.length,rndErrorsCount:Y().length,solutionsErrorsCount:z().length,explicitErrors:n,analytics:{...U,...i&&{overallRunTime:i},...o&&{cdnDownloadTime:o},...r&&{expressoRequestTime:r}},..."boolean"==typeof e&&{doNotTrack:e},...t&&{PPID:t}}},W=()=>{if(!F){F=!0;const e=J();navigator.sendBeacon("https://onsite-tag-logs.apps.nielsen.com/log",JSON.stringify(e,ae))}},V=()=>{if(!F){F=!0;const e=J(),t=new XMLHttpRequest;t.open("POST","https://onsite-tag-logs.apps.nielsen.com/log"),t.setRequestHeader("Content-Type","application/json;charset=UTF-8"),t.send(JSON.stringify(e,ae))}},Z=()=>window.doNotTrack||navigator.doNotTrack||navigator.msDoNotTrack?!("1"!==window.doNotTrack&&"yes"!==navigator.doNotTrack&&"1"!==navigator.doNotTrack&&"1"!==navigator.msDoNotTrack):null,Q=()=>{window.addEventListener?(window.addEventListener("beforeunload",W,!1),H(k.info,"added unload listener")):window.attachEvent&&(window.attachEvent("onbeforeunload",W),H(k.info,"added unload listener"))},ee=()=>te("dbg")&&"console"===window.xl8_config.dbg,te=e=>{try{return void 0!==window.xl8_config[e]&&null!==window.xl8_config[e]}catch(e){return!1}},ne=e=>{let t=!1;return e.forEach(e=>{"object"==typeof e&&(t=!0)}),t},oe=(e,t,n,o)=>{let r=!1;const i=setTimeout(()=>{r=!0,H(k.analytic,"setTimeout was executed when waiting for execution"),o({error:new Error("Exceeded Threshold"),code:p})},t);e((e,t)=>{if(i&&clearTimeout(i),!r)return r=!0,e?o({error:new Error(e),code:R}):n(t)})},re=e=>"object"==typeof e&&null!==e,ie=()=>/^((?!chrome|android).)*safari/i.test(navigator.userAgent),ae=(e,t)=>{if(t instanceof Error){const e={};return Object.getOwnPropertyNames(t).forEach(n=>{e[n]=t[n]}),e}return t},se=e=>null==e,ce=e=>{try{JSON.stringify(e)}catch(e){if(e&&e.message&&(e.message.toLowerCase().indexOf("circular")>=0||e.message.toLowerCase().indexOf("cyclic")>=0))return!0}return!1};function le(e){return e===o.NMC}function de(e,t,n){if(e||le(t))return n===r.COOKIE?A(e):n===r.LOCAL_STORAGE?I(e):n===r.GLOBAL_OBJ_PATH?function(e){if(!e)return B("path was not provided",f.INTEGRATION_ERROR),null;const t=e.split(".");if(!t||0===t.length)return B("Invalid path was provided",f.INTEGRATION_ERROR),null;let n=window;for(let e=0;e<t.length;e++){const o=t[e];if("window"!==o){if(!Object.getOwnPropertyNames(n).includes(o))return B(`Invalid path was provided: missing ${o}`,f.INTEGRATION_ERROR),null;n=n[o]}}return n}(e):void B("ppidStorageType configuration is invalid. type = "+n,f.INTEGRATION_ERROR);B("The ppidStorageKey does not exist and managed by the publisher",f.INTEGRATION_ERROR)}function ue(e){e!==r.COOKIE&&(window.xl8_config.ppidStorageType=r.COOKIE,H(k.info,`Storage type updated from ${r.LOCAL_STORAGE} to ${r.COOKIE}`))}const pe=()=>{H(k.info,"starting conf flow");const{ppidCollectionEnabled:e,ppidManagedBy:t,ppidStorageType:n,ppidStorageKey:o,ppidTTL:l}=window.xl8_config;if(!e)return H(k.info,"PPID collection is disabled"),{};const d=t||c.DEFAULT_MANAGED_BY,u=l||c.DEFAULT_PPID_TTL_DAYS,p=function(e,t){return!e&&le(t)?c.DEFAULT_PPID_STORAGE_KEY:e}(o,d);!function(e,t){if(le(t)){if(e===r.GLOBAL_OBJ_PATH)throw new Error("ppidStorageType was set to GLOBAL_OBJ_PATH but the managedBy is NMC (should be Publisher)")}else{if(!e)throw new Error("ppidStorageType configuration is missing");if(e===r.LOCAL_STORAGE&&!D())throw new Error("Local Storage was set but not supported")}}(n,d);const R={};let E=de(o,d,n);try{if(E)le(d)&&(ue(n),H(k.info,`ppid found and manged by NMC, PPID is: ${E}`),S(p,E,u),H(k.info,"Cookie was touched successfully"));else{if(H(k.info,"ppid was not found"),!le(d))return B("Failed to get PPID",f.INTEGRATION_ERROR),R.xl8ppidstatus=i,R.xl8ppidsuccess=a,R;E=(()=>T().replace(/-/gi,""))(),P(c.DEFAULT_PPID_STORAGE_KEY,E,u),ue(n),H(k.info,`ppid manged by NMC, PPID generated to: ${E}`)}R.xl8ppid=E,R.xl8ppidsuccess=s,H(k.info,"Conf flow finished")}catch(e){R.xl8ppidsuccess=a,B(`There was a problem with the conf flow. Error = ${e.message}`,f.PPID_ERROR)}return R},Re=373,fe={GDPR:{[p]:{xl8gdprStatus:d},[R]:{xl8gdprStatus:u}},CCPA:{[p]:{xl8ccpaStatus:d},[R]:{xl8ccpaStatus:u}}};function Ee(e,t){e.callbacksCount--,0===e.callbacksCount&&t(e.data)}function Oe(e,t,n,o,r){oe(e,t,e=>(o.data={...o.data,...e},Ee(o,r)),e=>(H(k.analytic,e,{consentRejectionReason:e}),o.data={...o.data,...n[e.code]},Ee(o,r)))}function ge(e){return void 0===e.gdprApplies?e.gdprApplies:!0===e.gdprApplies?1:0}function we(e){if(e.tcString)return{gdpr_consent:e.tcString}}function _e(e){if(e&&e.purpose&&e.purpose.consents)return e.purpose.consents}function me(e){if(e&&e.vendor&&e.vendor.consents&&e.vendor.consents[Re])return e.vendor.consents[Re]}function ye(e){try{"function"==typeof window.__tcfapi?function(e){const t=performance.now();window.__tcfapi("addEventListener",2,(n,o)=>{if(!o||"tcloaded"!==n.eventStatus&&"cmpuishown"!==n.eventStatus){e("Fetching consents from TCF Failed")}else H(k.analytic,"contacted tcf succsefully",{gdpr:"TCF",timeToConsent:Math.round(performance.now()-t)}),e(null,{gdpr:ge(n),purposeConsents:_e(n),vendorConsent:me(n),...we(n)})})}(e):"function"==typeof window.__cmp?function(e){const t=performance.now();window.__cmp("getConsentData",null,(n,o)=>{if(o)H(k.analytic,"gdpr consent fetched",{gdpr:"CMP",timeToConsent:Math.round(performance.now()-t)}),e(null,{gdpr:ge(n),gdpr_consent:n.consentData});else{e("Fetching consents from CMP Failed")}})}(e):e(null)}catch(t){e("Fetching consents for GDPR Failed",t)}}function Te(e){try{"function"==typeof window.__uspapi?function(e){const t=performance.now();window.__uspapi("getUSPData",1,(n,o)=>{if(o)H(k.analytic,"ccpa consent given",{ccpa:"USP",timeToConsent:Math.round(performance.now()-t)}),e(null,{us_privacy:n.uspString});else{e("Fetching consents from USP Failed")}})}(e):e(null)}catch(t){e("Fetching consents from USP Failed",t)}}const he=(e,t,n)=>{let o="|,";const r={};try{se(e)||e.forEach(e=>{if(Object.prototype.hasOwnProperty.call(e,"@type"))"PropertyValue"===e["@type"]&&(Object.prototype.hasOwnProperty.call(r,e.name)||(r[e.name]=[]),r[e.name].push(e.value));else{for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&(o+=t+":"+e[t]+",");o+="|"}})}catch(e){B(`tokenizeObjectArray Failed to get array details. Error: ${e.message}`,f.TOKENIZE_UNEXPECTED_ERROR)}for(const e in r)Object.prototype.hasOwnProperty.call(r,e)&&(H(k.info,`found attribute ${e} with value ${r[e].join(",")}`),t[e]=r[e].join(","));o.length>2&&(H(k.info,`found attribute ${n} with value ${o}`),t[n]=o)},Ce=(e,t,n,o,r=new WeakMap,i=0)=>{if(++i>10)return void H(k.analytic,"tokenizeDataObject data object hierarchy is too deep (might be cyclic dependency)",{maxDepthReached:!0});if(performance.now()-o>2500)B("tokenizeDataObject max time exceeded",f.TOKENIZE_UNEXPECTED_ERROR);else for(const a in e){if(Object.getOwnPropertyNames(t).length>=990||r.has(e[a]))return;if(Object.prototype.hasOwnProperty.call(e,a)){let s;s=void 0===n?a.replace(/ /g,"_"):n+"-"+a.replace(/ /g,"_"),Array.isArray(e[a])?ne(e[a])?he(e[a],t,s):(H(k.info,`found attribute ${s} with value ${e[a].join()}`),t[s]=e[a].join()):re(e[a])?e[a]instanceof HTMLElement?H(k.info,`found HTML Element in ${s}, skipping`):r.has(e[a])?H(k.info,`found a recursive object in ${s}, not creating a recursion again`):(r.set(e[a]),Ce(e[a],t,s,o,r,i)):"symbol"==typeof e[a]?H(k.info,`found invalid attribute ${s} which is a type of symbol. Skipping...`):"function"==typeof e[a]?H(k.info,"found attribute "+s+" which is a function. skipping... "):(H(k.info,`found attribute ${s} with value ${e[a]}`),t[s]=e[a])}}},be=(e,t)=>{ie()?((e,t,n)=>{H(k.analytic,"using GET request",{method:"GET",getRequestParamsLength:t.length}),N(e+"&"+t,"GET",null,n).send()})(e,t,Ne):((e,t,n)=>{const o=N(e,"POST",t,n);o.setRequestHeader("Content-Type","application/x-www-form-urlencoded");const r=t?t+"&xl8postbody=1":"xl8postbody=1";H(k.analytic,"using POST request",{method:"POST",postRequestParamsLength:t.length}),o.send(r)})(e,t,Ne)},Ne=e=>{e.readyState===XMLHttpRequest.DONE&&(200===e.status?(H(k.info,"Tag fired successfully!"),Pe(e)):B(`There was a problem with the request, status: ${e.status}`,f.EXPRESSO_ERROR),"sendBeacon"in navigator?W():V())},Pe=e=>{const t=document.createElement("script");t.text=e.responseText,t.type="text/javascript",t.async=!0,document.body.appendChild(t)},Ae=(e=[],t=null,n=null)=>{const o=performance.now(),r={};se(t)||(se(t.classes)||t.classes.forEach(e=>{let t="";[...document.getElementsByClassName(e)].forEach(e=>{t+=e.textContent}),r[e]=t,H(k.info,`found class ${e} with value ${t}`)}),se(t.ids)||t.ids.forEach(e=>{const t=document.getElementById(e);null!==t&&(r[e]=t.textContent,H(k.info,`found id ${e} with value ${t.textContent}`))}),se(t.elements)||t.elements.forEach(e=>{let t="";[...document.getElementsByTagName(e)].forEach(e=>{t+=e.textContent}),r[e]=t,H(k.info,`found tag ${e} with value ${t}`)}),se(t.complex)||t.complex.forEach(t=>{let n=[];"class"===t.type?n=[...document.getElementsByClassName(t.selector)]:"id"===t.type?n=[document.getElementById(t.selector)]:"element"===t.type&&(n=[...document.getElementsByTagName(t.selector)]),n.forEach(n=>{Object.prototype.hasOwnProperty.call(t,"key")&&t.key.split("|").forEach(o=>{let i=n.getAttribute(o);if(null!==i)if("json"===t.valueType)try{window[o]=JSON.parse(i),e.push(o)}catch(e){B(`cssObjects error in valueType json: error parsing json object, ${e.message}`,f.INTEGRATION_ERROR)}else i=i.replace(/[^a-zA-Z0-9]/g,"_"),Object.prototype.hasOwnProperty.call(t,"value")?r[i]=n.getAttribute(t.value):r[i]=n.textContent,H(k.info,`found tag ${i} with value ${r[i]}`)})})}));try{if(e&&e.length){const t=performance.now(),n=t;e.forEach(e=>{const n=((e="dataLayer")=>{if(void 0!==window[e])return"object"!=typeof window[e]?{[e]:window[e]}:window[e];H(k.analytic,`${e} is undefined`,{dataObjectIsUndefined:!0,dataObjectName:e})})(e);ce(n)&&H(k.analytic,"buildAndFire: Cyclic reference found in data object.",{[f.CYCLIC_REFERENCE_ERROR]:!0}),Ce(n,r,void 0,t)}),H(k.analytic,"base code timing - tokenizeDataObjects",{tokenizeDataObjectsTime:Math.round(performance.now()-n)})}}catch(e){B(`tokenizeDataObject failed. error: ${e.message}`,f.TOKENIZE_UNEXPECTED_ERROR)}const i=((e,t,n,o,r)=>{let i=n+"//"+o+"/on-site-tag-load/?p="+e+"&g="+t+"&j=d";return r&&(i+="&dbg=smtdn9"),i})(window.xl8_config.p,window.xl8_config.g,h(),C(),(()=>te("dbg")&&"smtdn9"===window.xl8_config.dbg)()),a=(e=>{const t=ie();let n="url="+encodeURIComponent(window.location.href);n+="&rurl="+encodeURIComponent(document.referrer),n+="&xl8onsiteVersion="+encodeURIComponent("2.8.0");for(const o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n+="&"+b(o,e[o],t));return n})(((e,t)=>{if(Object.getOwnPropertyNames(e).length<t)return e;B("adjustParamsToSizeLimit params exceeded max allowed size",f.MAX_PARAMS_EXCEEDED_ERROR);const n={},o=Object.getOwnPropertyNames(e);for(let r=0;r<o.length&&r<t;r++)n[o[r]]=e[o[r]];return n})({...r,...n},990));be(i,a),H(k.analytic,"base code timing - scrapingTime",{scrapingTime:Math.round(performance.now()-o)})},Se=()=>{H(k.info,"starting schema.org flow");const e={};try{const t=JSON.parse((e=>{let t=null;return Array.prototype.forEach.call(e,e=>{"application/ld+json"===e.type&&(t=e)}),t})(document.getElementsByTagName("script")).text),n=performance.now(),o=n;ce(t)&&H(k.analytic,"handleSchemaOrg: Cyclic reference found in data object",{[f.CYCLIC_REFERENCE_ERROR]:!0}),Ce(t,e,void 0,n),H(k.analytic,"base code timing - schemaOrgTokenizeDataObjects",{schemaOrgTokenizeDataObjectsTime:Math.round(performance.now()-o)})}catch(e){B(`handleSchemaOrg: Error: ${e.message}`,f.SCHEMA_ORG_ERROR)}Ae(null,null,e)},ve=(e=null)=>{try{if(H(k.info,"starting data delivery flow"),te("p")&&te("g")){const t=(()=>{let e=[];return!0!==window.xl8_config.disableDataLayer&&(e=["dataLayer"]),te("dataObjects")&&(e=[...e,...window.xl8_config.dataObjects]),e})(),n=(()=>{const e={classes:[],ids:[],elements:[],complex:[]};return te("cssObjects")&&Array.isArray(window.xl8_config.cssObjects)&&window.xl8_config.cssObjects.forEach(t=>{try{"string"==typeof t?t.startsWith(".")?e.classes.push(t.substring(1)):t.startsWith("#")?e.ids.push(t.substring(1)):e.elements.push(t):"object"==typeof t&&Object.prototype.hasOwnProperty.call(t,"selector")&&(t.selector.startsWith(".")?e.complex.push({...t,selector:t.selector.substring(1),type:"class"}):t.selector.startsWith("#")?e.complex.push({...t,selector:t.selector.substring(1),type:"id"}):e.complex.push({...t,type:"element"}))}catch(e){B(`getCssObjectList Failed to get css object. Error: ${e.message}`,f.UNREACHABLE_ERROR)}}),e})(),o=e;!function(e){const t={data:{},callbacksCount:2};Oe(Te,100,fe.CCPA,t,e),Oe(ye,100,fe.GDPR,t,e)}(e=>{if(e){if(!!(e.gdpr||e.gdpr_consent||e.xl8gdprStatus)&&e.purposeConsents){if(!e.purposeConsents[1])return void H(k.info,"no TCF purpose #1 consent found, aborting request");if(!e.purposeConsents[3])return void H(k.info,"no TCF purpose #3 consent found, aborting request");if(!e.vendorConsent)return void H(k.info,"no TCF vendor consent for NMC found (vendor 373), aborting request")}}Ae(t,n,{...o,...e}),te("enableSchemaOrg")&&window.xl8_config.enableSchemaOrg&&Se(),te("interval")&&setInterval(()=>{try{Ae(t,n,o)}catch(e){B(`There was a problem with the buildAndFire flow, ${e.message}`,f.BUILD_AND_FIRE_ERROR)}},window.xl8_config.interval)})}}catch(e){B(`There was a problem with the delivery flow: ${e.message}`,f.BUILD_AND_FIRE_ERROR)}},Ie=(e=null)=>{const t=Math.round(performance.now());if(H(k.analytic,"tag run time start",{tagRunTimeStart:t}),window.xl8_config){let n={};if(window.xl8_config.ppidCollectionEnabled){if(L())return void H(k.info,"1st party OptOut set to true. Not processing data");n=pe(),H(k.analytic,"PPID collection time",{ppidCollectionTime:Math.round(performance.now()-t)})}ve({...e,...n})}else B("xl8_config does not exist on window object",f.INTEGRATION_ERROR)};H(k.info,"NMC init started"),window.nmc=(e=null)=>{if(null!==e){H(k.info,`NMC: operation = ${e}`);try{switch(e.toLowerCase()){case l.OPT_OUT.toLowerCase():return H(k.info,"NMC: Opt out started"),void G();case l.OPT_IN.toLowerCase():return void H(k.info,"NMC: Opt in is TBD");default:return void B("NMC: Unknown operation provided",f.INTEGRATION_ERROR)}}catch(e){B(`NMC: Operation Failed. error = ${e.message}`,f.UNREACHABLE_ERROR)}}else B("NMC: No operation provided",f.INTEGRATION_ERROR)},window.sendToNielsen=(e=null)=>Ie(e),"complete"!==document.readyState?window.addEventListener?(window.addEventListener("load",Ie,!1),H(k.info,"added onload listener")):window.attachEvent&&(window.attachEvent("onload",Ie),H(k.info,"added onload listener")):(Ie(),H(k.info,"load event already fired, running manually")),"sendBeacon"in navigator&&Q()}]);