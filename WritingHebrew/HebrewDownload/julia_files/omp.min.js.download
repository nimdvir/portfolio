!function(){var e,t={182:function(e,t){"use strict";t.Z={prod:{adBlockerDetection:"https://libs.outbrain.com/video/outbrain-media-player/current/ads.min.js",style:"https://libs.outbrain.com/video/outbrain-media-player/current/omp.min.css"},preview:{adBlockerDetection:"https://libs.outbrain.com/video/outbrain-media-player/current/ads.min.js",style:"https://libs.outbrain.com/video/outbrain-media-player/current/omp.min.css"},staging:{adBlockerDetection:"https://libs.outbrain.com/video/outbrain-media-player/staging/ads.min.js",style:"https://libs.outbrain.com/video/outbrain-media-player/staging/omp.min.css"},dev:{adBlockerDetection:"https://localhost:8086/ads.js",style:"https://localhost:8086/omp.css"},omidPartnerName:"outbrain",omidPartnerVersion:"0.0.0"}},557:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return w}});var s,r,n,a,o=function(){function e(){}return e.xhr=function(){var e;if("withCredentials"in(e=new window.XMLHttpRequest))return e},e.supported=function(){return!!this.xhr()},e.get=function(e,t,i){let s;"https:"===window.location.protocol&&0===e.indexOf("http://")&&i(new Error("XHRURLHandler: Cannot go from HTTPS to HTTP."));try{s=this.xhr(),s.open("GET",e),s.timeout=t.timeout||0,s.withCredentials=t.withCredentials||!1,s.overrideMimeType&&s.overrideMimeType("text/xml"),s.onreadystatechange=function(){4===s.readyState&&(200===s.status?i(null,s.responseXML):i(new Error("XHRURLHandler: "+s.status)))},s.send()}catch(e){i(new Error("XHRURLHandler: Unexpected error"))}},e}(),l=function(){function e(){}return e.xdr=function(){var e;return window.XDomainRequest&&(e=new XDomainRequest),e},e.supported=function(){return!!this.xdr()},e.get=function(e,t,i){var s,r;return(r="function"==typeof window.ActiveXObject?new window.ActiveXObject("Microsoft.XMLDOM"):void 0)?(r.async=!1,(s=this.xdr()).open("GET",e),s.timeout=t.timeout||0,s.withCredentials=t.withCredentials||!1,s.send(),s.onprogress=function(){},s.onload=function(){return r.loadXML(s.responseText),i(null,r)}):i(new Error("FlashURLHandler: Microsoft.XMLDOM format not supported"))},e}(),d=function(){function e(){}return e.get=function(e,t,s){var r,n;return s||("function"==typeof t&&(s=t),t={}),null!=t.response?(n=t.response,delete t.response,s(null,n)):(null!=(r=t.urlhandler)?r.supported():void 0)?t.urlhandler.get(e,t,s):"undefined"==typeof window||null===window?i(150).get(e,t,s):o.supported()?o.get(e,t,s):l.supported()?l.get(e,t,s):s(new Error("Current context is not supported by any of the default URLHandlers. Please provide a custom URLHandler"))},e}(),c=function(){this.ads=[],this.errorURLTemplates=[]},h=function(){this.id=null,this.sequence=null,this.system=null,this.title=null,this.description=null,this.advertiser=null,this.pricing=null,this.survey=null,this.errorURLTemplates=[],this.impressionURLTemplates=[],this.viewableImpressionURLTemplates={viewable:[],notViewable:[],viewUndetermined:[]},this.creatives=[],this.extensions=[],this.adVerifications=[]},u=function(){this.attributes={},this.children=[]},p=function(){this.name=null,this.value=null,this.attributes={}},m=function(){function e(){}return e.track=function(e,t){var i,s,r,n,a,o;for(o=[],n=0,a=(s=this.resolveURLTemplates(e,t)).length;n<a;n++)i=s[n],"undefined"!=typeof window&&null!==window&&(r=new Image,o.push(r.src=i));return o},e.resolveURLTemplates=function(e,t){var i,s,r,n,a,o,l,d;for(null==t&&(t={}),i=[],null!=t.ASSETURI&&(t.ASSETURI=this.encodeURIComponentRFC3986(t.ASSETURI)),null!=t.CONTENTPLAYHEAD&&(t.CONTENTPLAYHEAD=this.encodeURIComponentRFC3986(t.CONTENTPLAYHEAD)),null==t.ERRORCODE||/^[0-9]{3}$/.test(t.ERRORCODE)||(t.ERRORCODE=900),t.CACHEBUSTING=this.leftpad(Math.round(1e8*Math.random()).toString()),t.TIMESTAMP=this.encodeURIComponentRFC3986((new Date).toISOString()),t.RANDOM=t.random=t.CACHEBUSTING,s=0,n=e.length;s<n;s++)if(l=e[s]){for(r in t)d=t[r],a="["+r+"]",o="%%"+r+"%%",l=(l=l.replace(a,d)).replace(o,d);i.push(l)}return i},e.encodeURIComponentRFC3986=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,(function(e){return"%"+e.charCodeAt(0).toString(16)}))},e.leftpad=function(e){return e.length<8?function(){var t,i,s;for(s=[],t=0,i=8-e.length;0<=i?t<i:t>i;0<=i?t++:t--)s.push("0");return s}().join("")+e:e},e.storage=function(){var e,t;try{t="undefined"!=typeof window&&null!==window?window.localStorage||window.sessionStorage:null}catch(e){e,t=null}return(null==t||function(e){var t;try{if(t="__VASTUtil__",e.setItem(t,t),e.getItem(t)!==t)return!0}catch(e){return e,!0}return!1}(t))&&(e={},t={length:0,getItem:function(t){return e[t]},setItem:function(t,i){e[t]=i,this.length=Object.keys(e).length},removeItem:function(t){delete e[t],this.length=Object.keys(e).length},clear:function(){e={},this.length=0}}),t}(),e.isNumeric=function(e){return!isNaN(parseFloat(e))&&isFinite(e)},e}(),v=function(e,t){for(var i in t)g.call(t,i)&&(e[i]=t[i]);function s(){this.constructor=e}return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},g={}.hasOwnProperty;n=function(e){function t(){t.__super__.constructor.apply(this,arguments),this.type="linear",this.duration=0,this.skipDelay=null,this.mediaFiles=[],this.videoClickThroughURLTemplate=null,this.videoClickTrackingURLTemplates=[],this.videoCustomClickURLTemplates=[],this.adParameters=null,this.icons=[]}return v(t,e),t}(s=function(e){null==e&&(e={}),this.id=e.id||null,this.adId=e.adId||null,this.sequence=e.sequence||null,this.apiFramework=e.apiFramework||null,this.trackingEvents={}}),a=function(e){function t(){t.__super__.constructor.apply(this,arguments),this.type="nonlinear",this.variations=[]}return v(t,e),t}(s),r=function(e){function t(){t.__super__.constructor.apply(this,arguments),this.type="companion",this.variations=[]}return v(t,e),t}(s);var f=function(){this.id=null,this.fileURL=null,this.deliveryType="progressive",this.mimeType=null,this.codec=null,this.bitrate=0,this.minBitrate=0,this.maxBitrate=0,this.width=0,this.height=0,this.apiFramework=null,this.scalable=null,this.maintainAspectRatio=null},b=function(){this.program=null,this.height=0,this.width=0,this.xPosition=0,this.yPosition=0,this.apiFramework=null,this.offset=null,this.duration=0,this.type=null,this.staticResource=null,this.htmlResource=null,this.iframeResource=null,this.iconClickThroughURLTemplate=null,this.iconClickTrackingURLTemplates=[],this.iconViewTrackingURLTemplate=null},y=function(){this.id=null,this.width=0,this.height=0,this.type=null,this.staticResource=null,this.htmlResource=null,this.iframeResource=null,this.altText=null,this.companionClickThroughURLTemplate=null,this.companionClickTrackingURLTemplates=[],this.trackingEvents={}},k=function(){this.id=null,this.width=0,this.height=0,this.expandedWidth=0,this.expandedHeight=0,this.scalable=!0,this.maintainAspectRatio=!0,this.minSuggestedDuration=0,this.apiFramework="static",this.type=null,this.staticResource=null,this.htmlResource=null,this.iframeResource=null,this.nonlinearClickThroughURLTemplate=null,this.nonlinearClickTrackingURLTemplates=[],this.adParameters=null},A=[].indexOf||function(e){for(var t=0,i=this.length;t<i;t++)if(t in this&&this[t]===e)return t;return-1},T=function(){var e;function t(){}return e=[],t.addURLTemplateFilter=function(t){"function"==typeof t&&e.push(t)},t.removeURLTemplateFilter=function(){return e.pop()},t.countURLTemplateFilters=function(){return e.length},t.clearUrlTemplateFilters=function(){return e=[]},t.parse=function(e,t,i){return i||("function"==typeof t&&(i=t),t={}),this._parse(e,null,t,(function(e,t){return i(t,e)}))},t.load=function(e,t,i){return i||("function"==typeof t&&(i=t),t={}),this.parseXmlDocument(null,[],t,e,i)},t._parse=function(t,i,s,r){var n,a,o,l;for(r||("function"==typeof s&&(r=s),s={}),a=0,o=e.length;a<o;a++)n=e[a],t=n(t);return null==i&&(i=[]),i.push(t),d.get(t,s,(l=this,function(e,n){return null!=e?r(e):l.parseXmlDocument(t,i,s,n,r)}))},t.parseXmlDocument=function(e,i,s,r,n){var a,o,l,d,h,u,p,v,g,f,b;if(b=new c,null==(null!=r?r.documentElement:void 0)||"VAST"!==r.documentElement.nodeName)return n(new Error("Invalid VAST XMLDocument"));for(l=0,h=(g=r.documentElement.childNodes).length;l<h;l++)"Error"===(v=g[l]).nodeName&&b.errorURLTemplates.push(t.parseNodeText(v));for(d=0,u=(f=r.documentElement.childNodes).length;d<u;d++)"Ad"===(v=f[d]).nodeName&&(null!=(a=t.parseAdElement(v))?b.ads.push(a):m.track(b.errorURLTemplates,{ERRORCODE:101}));for(o=function(e,t){var i,s,r,o;if(null==e&&(e=null),null==t&&(t=!1),b){for(r=!0,i=0,s=(o=b.ads).length;i<s;i++){if(null!=(a=o[i]).nextWrapperURL)return;a.creatives.length>0&&(r=!1)}return r&&(t||m.track(b.errorURLTemplates,{ERRORCODE:303})),0===b.ads.length&&(b=null),n(e,b)}},p=b.ads.length;p--;)null!=(a=b.ads[p]).nextWrapperURL&&function(r){var n;i.length>(null!==s.wrapperLimit?s.wrapperLimit:9)||(n=r.nextWrapperURL,A.call(i,n)>=0)?(m.track(r.errorURLTemplates,{ERRORCODE:302}),b.ads.splice(b.ads.indexOf(r),1),o(new Error("Wrapper limit reached, as defined by the video player"))):(null!=e&&(r.nextWrapperURL=t.resolveVastAdTagURI(r.nextWrapperURL,e)),t._parse(r.nextWrapperURL,i,s,(function(e,i){var s,n,a,l,d,c;if(s=!1,null!=e)m.track(r.errorURLTemplates,{ERRORCODE:301}),b.ads.splice(b.ads.indexOf(r),1),s=!0;else if(null==i)m.track(r.errorURLTemplates,{ERRORCODE:303}),b.ads.splice(b.ads.indexOf(r),1),s=!0;else for(b.errorURLTemplates=b.errorURLTemplates.concat(i.errorURLTemplates),n=b.ads.indexOf(r),b.ads.splice(n,1),a=0,l=(d=i.ads).length;a<l;a++)c=d[a],t.mergeWrapperAdData(c,r),b.ads.splice(++n,0,c);return delete r.nextWrapperURL,o(e,s)})))}(a);return o()},t.resolveVastAdTagURI=function(e,t){return 0===e.indexOf("//")?""+location.protocol+e:-1===e.indexOf("://")?t.slice(0,t.lastIndexOf("/"))+"/"+e:e},t.mergeWrapperAdData=function(e,t){var i,s,r,n,a,o,l,d,c,h,u,p,m,v,g,f,b,y,k,A,T;for(e.errorURLTemplates=t.errorURLTemplates.concat(e.errorURLTemplates),e.impressionURLTemplates=t.impressionURLTemplates.concat(e.impressionURLTemplates),e.adVerifications=t.adVerifications.concat(e.adVerifications),e.extensions=t.extensions.concat(e.extensions),n=0,d=(p=e.creatives).length;n<d;n++)if(s=p[n],null!=(null!=(m=t.trackingEvents)?m[s.type]:void 0))for(r in v=t.trackingEvents[s.type])T=v[r],(i=s.trackingEvents)[r]||(i[r]=[]),s.trackingEvents[r]=s.trackingEvents[r].concat(T);if(null!=(g=t.videoClickTrackingURLTemplates)?g.length:void 0)for(a=0,c=(f=e.creatives).length;a<c;a++)"linear"===(s=f[a]).type&&(s.videoClickTrackingURLTemplates=s.videoClickTrackingURLTemplates.concat(t.videoClickTrackingURLTemplates));if(null!=(b=t.videoCustomClickURLTemplates)?b.length:void 0)for(o=0,h=(y=e.creatives).length;o<h;o++)"linear"===(s=y[o]).type&&(s.videoCustomClickURLTemplates=s.videoCustomClickURLTemplates.concat(t.videoCustomClickURLTemplates));if(t.viewableImpressionURLTemplates&&(e.viewableImpressionURLTemplates||(e.viewableImpressionURLTemplates={viewable:[],notViewable:[],viewUndetermined:[]}),t.viewableImpressionURLTemplates.viewable&&(e.viewableImpressionURLTemplates.viewable=t.viewableImpressionURLTemplates.viewable.concat(e.viewableImpressionURLTemplates.viewable)),t.viewableImpressionURLTemplates.notViewable&&(e.viewableImpressionURLTemplates.notViewable=t.viewableImpressionURLTemplates.notViewable.concat(e.viewableImpressionURLTemplates.notViewable)),t.viewableImpressionURLTemplates.viewUndetermined&&(e.viewableImpressionURLTemplates.viewUndetermined=t.viewableImpressionURLTemplates.viewUndetermined.concat(e.viewableImpressionURLTemplates.viewUndetermined))),null!=t.videoClickThroughURLTemplate){for(A=[],l=0,u=(k=e.creatives).length;l<u;l++)"linear"===(s=k[l]).type&&null==s.videoClickThroughURLTemplate?A.push(s.videoClickThroughURLTemplate=t.videoClickThroughURLTemplate):A.push(void 0);return A}},t.childByName=function(e,t){var i,s,r,n;for(s=0,r=(n=e.childNodes).length;s<r;s++)if((i=n[s]).nodeName===t)return i},t.childsByName=function(e,t){var i,s,r,n,a;for(s=[],r=0,n=(a=e.childNodes).length;r<n;r++)(i=a[r]).nodeName===t&&s.push(i);return s},t.parseAdElement=function(e){var t,i,s,r,n;for(i=0,s=(r=e.childNodes).length;i<s;i++)if("Wrapper"===(n=(t=r[i]).nodeName)||"InLine"===n){if(this.copyNodeAttribute("id",e,t),this.copyNodeAttribute("sequence",e,t),"Wrapper"===t.nodeName)return this.parseWrapperElement(t);if("InLine"===t.nodeName)return this.parseInLineElement(t)}},t.parseWrapperElement=function(e){var t,i,s,r,n,a,o,l,d,c,h,u,p,m,v,g,f,b,y,k,A,T,w;for(t=this.parseInLineElement(e),null!=(w=this.childByName(e,"VASTAdTagURI"))?t.nextWrapperURL=this.parseNodeText(w):null!=(w=this.childByName(e,"VASTAdTagURL"))&&(t.nextWrapperURL=this.parseNodeText(this.childByName(w,"URL"))),n=0,c=(v=t.creatives).length;n<c;n++)if("linear"===(g=(T=v[n]).type)||"nonlinear"===g){if(null!=T.trackingEvents)for(r in t.trackingEvents||(t.trackingEvents={}),(i=t.trackingEvents)[m=T.type]||(i[m]={}),f=T.trackingEvents)for(A=f[r],(s=t.trackingEvents[T.type])[r]||(s[r]=[]),o=0,h=A.length;o<h;o++)k=A[o],t.trackingEvents[T.type][r].push(k);if(null!=T.videoClickTrackingURLTemplates)for(t.videoClickTrackingURLTemplates||(t.videoClickTrackingURLTemplates=[]),l=0,u=(b=T.videoClickTrackingURLTemplates).length;l<u;l++)a=b[l],t.videoClickTrackingURLTemplates.push(a);if(null!=T.videoClickThroughURLTemplate&&(t.videoClickThroughURLTemplate=T.videoClickThroughURLTemplate),null!=T.videoCustomClickURLTemplates)for(t.videoCustomClickURLTemplates||(t.videoCustomClickURLTemplates=[]),d=0,p=(y=T.videoCustomClickURLTemplates).length;d<p;d++)a=y[d],t.videoCustomClickURLTemplates.push(a)}if(null!=t.nextWrapperURL)return t},t.parseInLineElement=function(e){var i,s,r,n,a,o,l,d,c,u,p,m,v,g,f,b;for((i=new h).id=e.getAttribute("id")||null,i.sequence=e.getAttribute("sequence")||null,l=0,u=(g=e.childNodes).length;l<u;l++)switch((v=g[l]).nodeName){case"Error":i.errorURLTemplates.push(this.parseNodeText(v));break;case"Impression":i.impressionURLTemplates.push(this.parseNodeText(v));break;case"ViewableImpression":(o=t.parseViewableImpressions(v)).viewable&&(i.viewableImpressionURLTemplates.viewable=i.viewableImpressionURLTemplates.viewable.concat(o.viewable)),o.notViewable&&(i.viewableImpressionURLTemplates.notViewable=i.viewableImpressionURLTemplates.notViewable.concat(o.notViewable)),o.viewUndetermined&&(i.viewableImpressionURLTemplates.viewUndetermined=i.viewableImpressionURLTemplates.viewUndetermined.concat(o.viewUndetermined));break;case"AdVerifications":const e=t.parseAdVerifications(v);e.adVerifications&&(i.adVerifications=e.adVerifications.concat(i.adVerifications));break;case"Creatives":for(d=0,p=(f=this.childsByName(v,"Creative")).length;d<p;d++)for(r={id:(n=f[d]).getAttribute("id")||null,adId:this.parseCreativeAdIdAttribute(n),sequence:n.getAttribute("sequence")||null,apiFramework:n.getAttribute("apiFramework")||null},c=0,m=(b=n.childNodes).length;c<m;c++)switch((a=b[c]).nodeName){case"Linear":(s=this.parseCreativeLinearElement(a,r))&&i.creatives.push(s);break;case"NonLinearAds":(s=this.parseNonLinear(a,r))&&i.creatives.push(s);break;case"CompanionAds":(s=this.parseCompanionAd(a,r))&&i.creatives.push(s)}break;case"Extensions":this.parseExtension(i.extensions,this.childsByName(v,"Extension"));break;case"AdSystem":i.system={value:this.parseNodeText(v),version:v.getAttribute("version")||null};break;case"AdTitle":i.title=this.parseNodeText(v);break;case"Description":i.description=this.parseNodeText(v);break;case"Advertiser":i.advertiser=this.parseNodeText(v);break;case"Pricing":i.pricing={value:this.parseNodeText(v),model:v.getAttribute("model")||null,currency:v.getAttribute("currency")||null};break;case"Survey":i.survey=this.parseNodeText(v)}return i},t.parseExtension=function(e,t){var i,s,r,n,a,o,l,d,c,h,m,v,g,f,b,y,k,A,T;for(A=[],l=0,m=t.length;l<m;l++){if(a=t[l],s=new u,a.attributes)for(d=0,v=(b=a.attributes).length;d<v;d++)o=b[d],s.attributes[o.nodeName]=o.nodeValue;for(c=0,g=(y=a.childNodes).length;c<g;c++)if(i=y[c],T=this.parseNodeText(i),"#comment"!==i.nodeName&&""!==T){if((r=new p).name=i.nodeName,r.value=T,i.attributes)for(h=0,f=(k=i.attributes).length;h<f;h++)n=k[h],r.attributes[n.nodeName]=n.nodeValue;s.children.push(r)}A.push(e.push(s))}return A},t.parseCreativeLinearElement=function(e,t){var i,s,r,a,o,l,d,c,h,u,p,m,v,g,y,k,A,T,w,E,R,C,I,L,U,_,x,V,D,N,M,O,S,P,B,F,j,H,q,W,z,X,Q,G,$,J,Y,K,Z,ee,te,ie,se,re,ne,ae,oe,le,de;if((a=new n(t)).duration=this.parseDuration(this.parseNodeText(this.childByName(e,"Duration"))),-1===a.duration&&"Wrapper"!==e.parentNode.parentNode.parentNode.nodeName)return null;if(null==(re=e.getAttribute("skipoffset"))?a.skipDelay=null:"%"===re.charAt(re.length-1)?(H=parseInt(re,10),a.skipDelay=a.duration*(H/100)):a.skipDelay=this.parseDuration(re),null!=(de=this.childByName(e,"VideoClicks"))){for(a.videoClickThroughURLTemplate=this.parseNodeText(this.childByName(de,"ClickThrough")),c=0,T=(z=this.childsByName(de,"ClickTracking")).length;c<T;c++)r=z[c],a.videoClickTrackingURLTemplates.push(this.parseNodeText(r));for(y=0,w=(X=this.childsByName(de,"CustomClick")).length;y<w;y++)o=X[y],a.videoCustomClickURLTemplates.push(this.parseNodeText(o))}for(null!=(i=this.childByName(e,"AdParameters"))&&(a.adParameters=this.parseNodeText(i)),k=0,R=(G=this.childsByName(e,"TrackingEvents")).length;k<R;k++)for(oe=G[k],A=0,C=($=this.childsByName(oe,"Tracking")).length;A<C;A++)if(l=(ae=$[A]).getAttribute("event"),le=this.parseNodeText(ae),null!=l&&null!=le){if("progress"===l){if(!(F=ae.getAttribute("offset")))continue;l="%"===F.charAt(F.length-1)?"progress-"+F:"progress-"+Math.round(this.parseDuration(F))}null==(s=a.trackingEvents)[l]&&(s[l]=[]),a.trackingEvents[l].push(le)}for(D=0,I=(J=this.childsByName(e,"MediaFiles")).length;D<I;D++)for(S=J[D],P=0,L=(Y=this.childsByName(S,"MediaFile")).length;P<L;P++)O=Y[P],(M=new f).id=O.getAttribute("id"),M.fileURL=this.parseNodeText(O),M.deliveryType=O.getAttribute("delivery"),M.codec=O.getAttribute("codec"),M.mimeType=O.getAttribute("type"),M.apiFramework=O.getAttribute("apiFramework"),M.bitrate=parseInt(O.getAttribute("bitrate")||0),M.minBitrate=parseInt(O.getAttribute("minBitrate")||0),M.maxBitrate=parseInt(O.getAttribute("maxBitrate")||0),M.width=parseInt(O.getAttribute("width")||0),M.height=parseInt(O.getAttribute("height")||0),(se=O.getAttribute("scalable"))&&"string"==typeof se&&("true"===(se=se.toLowerCase())?M.scalable=!0:"false"===se&&(M.scalable=!1)),(N=O.getAttribute("maintainAspectRatio"))&&"string"==typeof N&&("true"===(N=N.toLowerCase())?M.maintainAspectRatio=!0:"false"===N&&(M.maintainAspectRatio=!1)),a.mediaFiles.push(M);if(null!=(v=this.childByName(e,"Icons")))for(B=0,U=(K=this.childsByName(v,"Icon")).length;B<U;B++){for(m=K[B],(h=new b).program=m.getAttribute("program"),h.height=parseInt(m.getAttribute("height")||0),h.width=parseInt(m.getAttribute("width")||0),h.xPosition=this.parseXPosition(m.getAttribute("xPosition")),h.yPosition=this.parseYPosition(m.getAttribute("yPosition")),h.apiFramework=m.getAttribute("apiFramework"),h.offset=this.parseDuration(m.getAttribute("offset")),h.duration=this.parseDuration(m.getAttribute("duration")),j=0,_=(Z=this.childsByName(m,"HTMLResource")).length;j<_;j++)d=Z[j],h.type=d.getAttribute("creativeType")||"text/html",h.htmlResource=this.parseNodeText(d);for(q=0,x=(ee=this.childsByName(m,"IFrameResource")).length;q<x;q++)g=ee[q],h.type=g.getAttribute("creativeType")||0,h.iframeResource=this.parseNodeText(g);for(W=0,V=(te=this.childsByName(m,"StaticResource")).length;W<V;W++)ne=te[W],h.type=ne.getAttribute("creativeType")||0,h.staticResource=this.parseNodeText(ne);if(null!=(p=this.childByName(m,"IconClicks")))for(h.iconClickThroughURLTemplate=this.parseNodeText(this.childByName(p,"IconClickThrough")),ie=0,E=(Q=this.childsByName(p,"IconClickTracking")).length;ie<E;ie++)u=Q[ie],h.iconClickTrackingURLTemplates.push(this.parseNodeText(u));h.iconViewTrackingURLTemplate=this.parseNodeText(this.childByName(m,"IconViewTracking")),a.icons.push(h)}return a},t.parseNonLinear=function(e,t){var i,s,r,n,o,l,d,c,h,u,p,m,v,g,f,b,y,A,T,w,E,R,C,I,L,U,_,x,V,D,N,M,O,S;for(n=new a(t),d=0,m=(I=this.childsByName(e,"TrackingEvents")).length;d<m;d++)for(O=I[d],h=0,v=(L=this.childsByName(O,"Tracking")).length;h<v;h++)o=(M=L[h]).getAttribute("event"),S=this.parseNodeText(M),null!=o&&null!=S&&(null==(s=n.trackingEvents)[o]&&(s[o]=[]),n.trackingEvents[o].push(S));for(u=0,g=(U=this.childsByName(e,"NonLinear")).length;u<g;u++){for(R=U[u],(E=new k).id=R.getAttribute("id")||null,E.width=R.getAttribute("width"),E.height=R.getAttribute("height"),E.expandedWidth=R.getAttribute("expandedWidth"),E.expandedHeight=R.getAttribute("expandedHeight"),E.scalable=this.parseBoolean(R.getAttribute("scalable")),E.maintainAspectRatio=this.parseBoolean(R.getAttribute("maintainAspectRatio")),E.minSuggestedDuration=this.parseDuration(R.getAttribute("minSuggestedDuration")),E.apiFramework=R.getAttribute("apiFramework"),p=0,f=(_=this.childsByName(R,"HTMLResource")).length;p<f;p++)l=_[p],E.type=l.getAttribute("creativeType")||"text/html",E.htmlResource=this.parseNodeText(l);for(T=0,b=(x=this.childsByName(R,"IFrameResource")).length;T<b;T++)c=x[T],E.type=c.getAttribute("creativeType")||0,E.iframeResource=this.parseNodeText(c);for(w=0,y=(V=this.childsByName(R,"StaticResource")).length;w<y;w++)N=V[w],E.type=N.getAttribute("creativeType")||0,E.staticResource=this.parseNodeText(N);for(null!=(i=this.childByName(R,"AdParameters"))&&(E.adParameters=this.parseNodeText(i)),E.nonlinearClickThroughURLTemplate=this.parseNodeText(this.childByName(R,"NonLinearClickThrough")),C=0,A=(D=this.childsByName(R,"NonLinearClickTracking")).length;C<A;C++)r=D[C],E.nonlinearClickTrackingURLTemplates.push(this.parseNodeText(r));n.variations.push(E)}return n},t.parseCompanionAd=function(e,t){var i,s,n,a,o,l,d,c,h,u,p,m,v,g,f,b,k,A,T,w,E,R,C,I,L,U,_,x,V,D,N,M,O,S,P,B,F;for(l=new r(t),h=0,g=(U=this.childsByName(e,"Companion")).length;h<g;h++){for(o=U[h],(a=new y).id=o.getAttribute("id")||null,a.width=o.getAttribute("width"),a.height=o.getAttribute("height"),a.title=o.getAttribute("title"),a.price=o.getAttribute("price"),a.companionClickTrackingURLTemplates=[],p=0,f=(_=this.childsByName(o,"HTMLResource")).length;p<f;p++)c=_[p],a.type=c.getAttribute("creativeType")||"text/html",a.htmlResource=this.parseNodeText(c);for(m=0,b=(x=this.childsByName(o,"IFrameResource")).length;m<b;m++)u=x[m],a.type=u.getAttribute("creativeType")||0,a.iframeResource=this.parseNodeText(u);for(v=0,k=(V=this.childsByName(o,"StaticResource")).length;v<k;v++){for(S=V[v],a.type=S.getAttribute("creativeType")||0,R=0,A=(D=this.childsByName(o,"AltText")).length;R<A;R++)s=D[R],a.altText=this.parseNodeText(s);a.staticResource=this.parseNodeText(S)}for(C=0,T=(N=this.childsByName(o,"TrackingEvents")).length;C<T;C++)for(B=N[C],I=0,w=(M=this.childsByName(B,"Tracking")).length;I<w;I++)d=(P=M[I]).getAttribute("event"),F=this.parseNodeText(P),null!=d&&null!=F&&(null==(i=a.trackingEvents)[d]&&(i[d]=[]),a.trackingEvents[d].push(F));for(L=0,E=(O=this.childsByName(o,"CompanionClickTracking")).length;L<E;L++)n=O[L],a.companionClickTrackingURLTemplates.push(this.parseNodeText(n));a.companionClickThroughURLTemplate=this.parseNodeText(this.childByName(o,"CompanionClickThrough")),a.companionClickTrackingURLTemplate=this.parseNodeText(this.childByName(o,"CompanionClickTracking")),l.variations.push(a)}return l},t.parseDuration=function(e){var t,i,s,r,n;return null==e?-1:m.isNumeric(e)?parseInt(e):3!==(t=e.split(":")).length?-1:(n=t[2].split("."),r=parseInt(n[0]),2===n.length&&(r+=parseFloat("0."+n[1])),s=parseInt(60*t[1]),i=parseInt(60*t[0]*60),r>60&&(s+=Math.floor(r/60),r%=60),isNaN(i)||isNaN(s)||isNaN(r)||s>3600||r>60?-1:i+s+r)},t.parseXPosition=function(e){return"left"===e||"right"===e||"center"===e?e:parseInt(e||0)},t.parseYPosition=function(e){return"top"===e||"bottom"===e||"middle"===e?e:parseInt(e||0)},t.parseBoolean=function(e){return"true"===e||"TRUE"===e||"1"===e},t.parseNodeText=function(e){return e&&(e.textContent||e.text||"").trim()},t.copyNodeAttribute=function(e,t,i){var s;if(s=t.getAttribute(e))return i.setAttribute(e,s)},t.parseCreativeAdIdAttribute=function(e){return e.getAttribute("AdID")||e.getAttribute("adID")||e.getAttribute("adId")||null},t.parseViewableImpressions=function(e){const t={viewable:[],notViewable:[],viewUndetermined:[]};let i,s,r,n;for(i=e.childNodes,r=0,s=i.length;r<s;r++)switch(n=i[r],n.nodeName){case"Viewable":t.viewable.push(this.parseNodeText(n));break;case"NotViewable":t.notViewable.push(this.parseNodeText(n));break;case"ViewUndetermined":t.viewUndetermined.push(this.parseNodeText(n))}return t},t.parseAdVerifications=function(e){const t={adVerifications:[]};let i,s,r,n,a,o,l,d;for(i=e.childNodes,a=0,r=i.length;a<r;a++)if(l=i[a],"Verification"===l.nodeName){s=l.childNodes;const e={verificationScriptUrl:null,vendorKey:l.getAttribute("vendor"),verificationParameters:null};for(o=0,n=s.length;o<n;o++)switch(d=s[o],d.nodeName){case"JavaScriptResource":e.verificationScriptUrl=this.parseNodeText(d);break;case"VerificationParameters":e.verificationParameters=this.parseNodeText(d)}t.adVerifications.push(e)}return t},t}();var w=class{constructor(e,t){this.vastXML=e,this.eventTrackers=t,this.vast=null,this.medias=[],this.companionAds=[],this.parseError=["Vast validator - "]}read(){const e=this;return new Promise(((t,i)=>{if(this.vastXML){const s=(new DOMParser).parseFromString(this.vastXML,"text/xml");T.load(s,((s,r)=>{s?i(s):(e.vast=r,t(r))}))}else i(new Error(e.parseError.join("")))}))}setAdsMedias(){const e=this;return new Promise(((t,i)=>{let s=0;const r=e.vast.ads,n=r.length;let a=0;for(;a<n;a++){const t=r[a].creatives?r[a].creatives:e.parseError.push(`No Creatives for ad ${a+1}`);if(!t||0===t.length)continue;s++;const i=t.length;let n,o,l=0,d=[];if(r[a].system&&r[a].system.value?n=r[a].system.value:d.push("AdSystem "),r[a].title?o=r[a].title:d.push("AdTitle "),0===r[a].impressionURLTemplates.length&&d.push("Impression "),d.length>1){let t=[`Missing tags at ad ${a+1}:`];t.push(d.join(",")),e.parseError.push(t.join(""))}for(;l<i;l++){let i;if(t[l].duration?i=t[l].duration:"companion"!==t[l].type&&e.parseError.push(`Duration tag is missing at creative ${s}.`),i||"companion"===t[l].type){if(t[l].mediaFiles){const s=t[l].mediaFiles,o=s.length;let d=0;for(;d<o;d++){let o={duration:i,adParameters:t[l].adParameters,trackingEvents:t[l].trackingEvents,videoClickThroughURLTemplate:t[l].videoClickThroughURLTemplate,videoClickTrackingURLTemplates:t[l].videoClickTrackingURLTemplates,impressions:r[a].impressionURLTemplates.concat(e.eventTrackers?.pixels?.impressions||[]),error:r[a].errorURLTemplates,system:n,viewableImpressions:this.addViewabilityPixels(r[a].viewableImpressionURLTemplates),adVerifications:r[a].adVerifications,eventTrackers:e.eventTrackers};e.medias.push(o);for(let t in s[d])s[d].hasOwnProperty(t)&&(e.medias[e.medias.length-1][t]=s[d][t])}}if("companion"===t[l].type){const i=t[l].variations,s=i.length;let r=0;for(;r<s;r++){let t={required:i[r].required,id:i[r].id,width:i[r].width,height:i[r].height,assetWidth:i[r].assetWidth,assetHeight:i[r].assetHeight,expandedWidth:i[r].expandedWidth,expandedHeight:i[r].expandedHeight,apiFramework:i[r].apiFramework,adslotID:i[r].adslotID,pxratio:i[r].pxratio,altText:i[r].altText,type:i[r].type,staticResource:i[r].staticResource,htmlResource:i[r].htmlResource,iframeResource:i[r].iframeResource,companionClickThroughURLTemplate:i[r].companionClickThroughURLTemplate,companionClickTrackingURLTemplates:i[r].companionClickTrackingURLTemplates,trackingEvents:i[r].trackingEvents,title:i[r].title,price:i[r].price};e.companionAds.push(t)}}}}}0===s?(e.parseError.push("No valid creatives found - check duration tag"),i(new Error(e.parseError.join("")))):0===e.medias.length?(e.parseError.push("No valid medias found"),i(new Error(e.parseError.join("")))):e.parseError.length>1?(e.parseError.unshift(new String("Warning - ")),t(new Error(e.parseError.join("")))):t()}))}addViewabilityPixels(e){let t={...e};return t.viewable=t.viewable.concat(this.eventTrackers?.pixels?.videoViewable||[]),t}}},4:function(e,t,i){"use strict";i.r(t),i.d(t,{DisableIndirectDemandOptions:function(){return l}});var s=i(658),r=i(182),n=i(711),a=i(252);class o{constructor(e){if(this.id=e,this.env="prod",this.mobile=!1,this.opaAds=[],this.vastXML=null,this.eventTrackers=null,this.container=null,this.video=null,this.seek=!1,this.shouldTrackMoat=!1,this.options=null,this.adBlocker=!1,this.resizeId=0,this.maxRetries=3,this.currentOpaVideoData=null,this.opaCallRestDuration=5,this.videoAdsLookupTimeout=null,this.isDestroyed=!1,this.opaSupply=null,this.wasm={active:!1,url:"https://localhost:8084/outbrain-media-player/wasm/vast.js"},this.elements={container:{elm:null,className:"omp-full"},parser:{id:"omp-parser"},interpreter:{id:"omp-vast"}},this.events={resize:this.onResize.bind(this)},!this.id)return this.onError(new Error("Invalid ID attribute provided"))}init(e){return console.debug("OMP init: "+Date.now()),this.env=e.env?e.env:"prod",this.options=e,2===e.vidgetVersion&&e.requestParams?(this.maxRetries=e.maxRetries||3,this.allowedFailedRetriesStreak=e.failedRetriesStreak||0,this.failedRetriesStreak=0,this.opaCallRestDuration=1e3*(e.opaCallRestDuration||this.opaCallRestDuration),this.setPlayerContainer(),this.searchForVideoAds()):this.initVideoAd(e)}initVideoAd(e){if(!e.hasOwnProperty("vastXML"))throw new Error("Invalid vast xml source");if(this.isIndirectDemandBlocked(this.options.disableVideoIndirectDemand)&&o.isIndirectDemand(e))throw console.error("indirect demand ad blocked"),new Error("indirect demand ad blocked");return new Promise((t=>{s.default.waterfall([this.setPlayerContainer],this).catch(this.onError.bind(this)).then((()=>{this.currentOpaVideoData=e,this.mobile=this.options.hasOwnProperty("mobile")?this.options.mobile:this.isMobile(),this.container.classList.add(this.mobile?"omp-mobile":"omp-desktop"),this.vastXML=e.vastXML,this.seek=this.options.seek||!1,this.eventTrackers=e.eventTrackers||{},this.shouldTrackMoat=this.options.trackMoat||!1,this.setDefaultOpts(),this.setCustomOpts(),this.options.hasOwnProperty("promisedInit")&&this.options.promisedInit&&this.elements.container.elm.addEventListener("ready",(()=>{t("ready-promise")}));if(document.getElementById(this.elements.parser.id)){const t="video";i(563)(`./${t}`).then((t=>{this.video=new t(this,e)}))}else s.default.waterfall([this.insertWasm,this.detectAdBlocker,this.insertVideoTag],this).catch(this.onError.bind(this));window.addEventListener("resize",this.events.resize),this.options.promisedInit||t(!0)}))}))}async searchForVideoAds(){if(2===this.options.vidgetVersion&&!this.isDestroyed){if(!this.opaSupply){const{OpaSupply:e}=await Promise.resolve().then(i.bind(i,252));this.opaSupply=new e}if(0===this.maxRetries||this.allowedFailedRetriesStreak&&this.failedRetriesStreak>=this.allowedFailedRetriesStreak)this.onAdLookupExhausted();else if(this.maxRetries--,this.opaAds.length>0){const e=this.opaAds.shift();await this.initVideoAd(e)}else this.opaSupply.initOpaVideoCall(this.options).then((e=>{if(this.failedRetriesStreak=0,this.options.firstAuctionVideo=null,Array.isArray(e)&&e.length>0){const t=e.shift();this.initVideoAd(t),e.forEach((e=>this.opaAds.push(e)))}})).catch((e=>{e?.errorMsg===a.G&&this.failedRetriesStreak++,this.options.firstAuctionVideo=null,this.onError(e),this.videoAdsLookupTimeout=setTimeout((()=>{this.searchForVideoAds()}),this.opaCallRestDuration)}))}}updateMacros(e){try{this.video.interpreter.updateMacros(e)}catch(e){}}setPlayerContainer(){if(null==this.container)if(this.container=this.options.playerElement||document.getElementById(this.id),this.elements.container.elm=this.container,this.container){const e=document.getElementsByTagName("head")[0];if(!document.getElementById("omp-style")){const t=document.createElement("link");t.href=r.Z[this.env].style,t.id="omp-style",t.rel="stylesheet",t.type="text/css",e.appendChild(t)}this.container.classList.add("omp")}else this.onError(new Error(`Cannot retrieve DOM element with ID ${this.id}`))}isMobile(){return!(!/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|ipad|iris|kindle|Android|Silk|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(navigator.userAgent)&&!/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(navigator.userAgent.substr(0,4)))}isIndirectDemandBlocked(e){return[l.BLOCK_INDIRECT].includes(e)}setDefaultOpts(){this.options.hasOwnProperty("controlsDelay")||(this.options.controlsDelay=1500),this.options.hasOwnProperty("twoStepsLoad")||(this.options.twoStepsLoad=!1),this.options.autoplay&&(this.options.twoStepsLoad=!1)}setCustomOpts(){this.options.relativeSize&&this.container.classList.add(this.elements.container.className)}insertWasm(){return new Promise(((e,t)=>{if(this.wasm.active){document.getElementsByTagName("head")[0];document.createElement("script").src=this.wasm.url}else e(!0)}))}detectAdBlocker(){return new Promise((e=>{if(this.options.adBlockerDetection&&!document.getElementById("obad")){const t=document.getElementsByTagName("body")[0],i=document.createElement("script");i.id="obad",i.src=r.Z[this.env].adBlockerDetection;const s=setTimeout((()=>{const t=document.getElementById("iSsVFRmjlhBx");t?t.parentNode.removeChild(t):(this.adBlocker=!0,console.log("Adblocker detected")),e(!0)}),6e3);i.onload=()=>{clearTimeout(s),this.adBlocker=!1;const t=document.getElementById("iSsVFRmjlhBx");t&&t.parentNode.removeChild(t),e(!0)},t.appendChild(i)}else e(!0)}))}async insertVideoTag(){const{Video:e}=await i.e(791).then(i.bind(i,258));this.adBlocker||(this.video=new e(this,this.currentOpaVideoData))}onResize(e){this.resizeId&&clearTimeout(this.resizeId),this.resizeId=setTimeout((()=>{this.resize()}),200)}play(){this.video.play()}pause(){this.video.pause()}resume(){this.video.resume()}stop(){this.video.stop()}skipAd(){this.lookForNextVideo();const e=new CustomEvent("adskipped",{bubbles:!1,cancelable:!0});this.container.dispatchEvent(e)}lookForNextVideo(){setTimeout((()=>{this.video.destroy(),this.searchForVideoAds()}))}static isIndirectDemand(e){return parseInt(e?.dealId??"-1")<1}stopAds(){this.video.stop()}displayThumbnail(){this.video.displayThumbnail()}resize(e,t){e&&t?this.video.resize(e,t):this.video.resize(this.container.offsetWidth,this.container.offsetHeight)}setMute(e){this.video.setMute(e)}setVideoMute(e){this.video.setVideoMute(e)}setControls(e){this.video.setControls(e)}destroy(){this.video&&this.video.destroy(),this.isDestroyed=!0,clearTimeout(this.videoAdsLookupTimeout)}mute(){this.video.setMute(!0)}unmute(){this.video.setMute(!1)}isMuted(){return this.video.isMuted()}getVolume(){return this.video.getVolume()}getAdPaused(){return this.video.getAdPaused()}getAdErrorCode(){return this.video.getAdErrorCode()}getAdErrorMessage(){return this.video.getAdErrorMessage()}getAdSystem(){return this.video.getAdSystem()}getVideoBitrate(){return this.video.getVideoBitrate()}getAdMediaBitrateArray(){return this.video.getAdMediaBitrateArray()}getHeavyAdStatus(){return this.video.getHeavyAdStatus()}getAdMediaHeight(){return this.video.getAdMediaHeight()}getAdMediaWidth(){return this.video.getAdMediaWidth()}getAdMediaUrl(){return this.video.getAdMediaUrl()}getAdTagUrl(){return this.video.getAdTagUrl()}getAdDuration(){return this.video?1e3*this.video.getAdDuration():0}getAdCurrentTime(){return this.video?1e3*this.video.getAdCurrentTime():0}getDuration(){return 1e3*this.video.duration}getAdUnit(){return this.video.interpreter.adUnit}getAdMedias(){return this.video.parser.medias}getAdDeliveryType(){return this.video.getAdDeliveryType()}getVastWidth(){return this.video?this.video.getVastWidth():0}getVastHeight(){return this.video?this.video.getVastHeight():0}getVideoClickThroughURL(){return this.video.getVideoClickThroughURL()}getVideoClickTrackingURL(){return this.video.getVideoClickTrackingURL()}getCompanionAds(){return this.video.getCompanionAds()}getVolumeState(){return this.video.getVolumeState()}async onError(e){const t=e?.errorMsg,i=this.getVastAdId(this.vastXML),s={...e,...this.currentOpaVideoData,errorMsg:`${t}, adId: ${i}`};if([n.VPAID_REJECTED_BY_SETTING_ERROR_MSG,n.REJECTED_BY_BLACK_LIST_ERROR_MSG].find((e=>t?.startsWith(e)))){await this.lookForNextVideo();const e=new CustomEvent("onAdRejected",{detail:s,bubbles:!1,cancelable:!0});return void this.container.dispatchEvent(e)}const r=new CustomEvent("playererror",{detail:s,bubbles:!1,cancelable:!0});this.container.dispatchEvent(r)}onAdLookupExhausted(){const e=new CustomEvent("adLookupExhausted",{bubbles:!1,cancelable:!0});(this.container||this.options.playerElement).dispatchEvent(e)}notifyVideoHasBeenRendered(e){this.video.notifyVideoHasBeenRendered(e)}getVastAdId(e){const t=e?.match(/<OpaAdId><!\[CDATA\[(\d+)\]\]><\/OpaAdId>/);if(t)return t[1];const i=e?.match(/<Ad\s+id="([^"]+)"/);return i?i[1]:null}}!function(){if("function"==typeof window.CustomEvent)return!1;window.CustomEvent=function(e,t){t=t||{bubbles:!1,cancelable:!1,detail:null};var i=document.createEvent("CustomEvent");return i.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),i}}();const l={ALLOW_INDIRECT:"false",BLOCK_VPAID_ONLY:"vpaid",BLOCK_INDIRECT:"all"};t.default=o},658:function(e,t,i){"use strict";i.r(t);t.default=class{static waterfall(e,t){return e.reduce(((e,i)=>e.then(t?i.bind(t):i)),Promise.resolve())}static getElement(e,t){const i=(e,t)=>{const s=Object.keys(t);let r=null;if(s.indexOf(e)>=0)return t[e];{let n=s.length;for(;n--;)if(t[s[n]]&&"object"==typeof t[s[n]]&&"elm"!==s[n]&&(r=i(e,t[s[n]]),r))return r}return r};return i(e,t)}static humanTime(e){const t=new Date(null);return t.setSeconds(e),t.toISOString().substr(14,5)}}},711:function(e,t,i){"use strict";i.r(t),i.d(t,{REJECTED_BY_BLACK_LIST_ERROR_MSG:function(){return B},VPAID_REJECTED_BY_SETTING_ERROR_MSG:function(){return P},Vpaid:function(){return F}});var s=["handshakeVersion","initAd","startAd","stopAd","skipAd","resizeAd","pauseAd","resumeAd","expandAd","collapseAd","subscribe","unsubscribe"];function r(e,t,i){}r.prototype.handshakeVersion=function(e,t){},r.prototype.initAd=function(e,t,i,s,r,n,a){},r.prototype.startAd=function(e){},r.prototype.stopAd=function(e){},r.prototype.skipAd=function(e){},r.prototype.resizeAd=function(e,t,i,s){},r.prototype.pauseAd=function(e){},r.prototype.resumeAd=function(e){},r.prototype.expandAd=function(e){},r.prototype.collapseAd=function(e){},r.prototype.subscribe=function(e,t,i){},r.prototype.unsubscribe=function(e,t){},r.prototype.getAdLinear=function(e){},r.prototype.getAdWidth=function(e){},r.prototype.getAdHeight=function(e){},r.prototype.getAdExpanded=function(e){},r.prototype.getAdSkippableState=function(e){},r.prototype.getAdRemainingTime=function(e){},r.prototype.getAdDuration=function(e){},r.prototype.getAdVolume=function(e){},r.prototype.getAdCompanions=function(e){},r.prototype.getAdIcons=function(e){},r.prototype.setAdVolume=function(e,t){},o(r,"METHODS",s),o(r,"GETTERS",["getAdLinear","getAdWidth","getAdHeight","getAdExpanded","getAdSkippableState","getAdRemainingTime","getAdDuration","getAdVolume","getAdCompanions","getAdIcons"]),o(r,"SETTERS",["setAdVolume"]),o(r,"EVENTS",["AdLoaded","AdStarted","AdStopped","AdSkipped","AdSkippableStateChange","AdSizeChange","AdLinearChange","AdDurationChange","AdExpandedChange","AdRemainingTimeChange","AdVolumeChange","AdImpression","AdVideoStart","AdVideoFirstQuartile","AdVideoMidpoint","AdVideoThirdQuartile","AdVideoComplete","AdClickThru","AdInteraction","AdUserAcceptInvitation","AdUserMinimize","AdUserClose","AdPaused","AdPlaying","AdLog","AdError"]);var n=s.filter((function(e){return-1===["skipAd"].indexOf(e)}));o(r,"checkVPAIDInterface",(function(e){return n.every((function(t){return"function"==typeof e[t]}))}));var a=r;function o(e,t,i){Object.defineProperty(e,t,{writable:!1,configurable:!1,value:i})}function l(){this._subscribers={}}l.prototype.subscribe=function(e,t,i){this.isHandlerAttached(e,t)||this.get(t).push({handler:e,context:i,eventName:t})},l.prototype.unsubscribe=function(e,t){this._subscribers[t]=this.get(t).filter((function(t){return e!==t.handler}))},l.prototype.unsubscribeAll=function(){this._subscribers={}},l.prototype.trigger=function(e,t){var i=this;this.get(e).concat(this.get("*")).forEach((function(e){setTimeout((function(){i.isHandlerAttached(e.handler,e.eventName)&&e.handler.call(e.context,t)}),0)}))},l.prototype.triggerSync=function(e,t){this.get(e).concat(this.get("*")).forEach((function(e){e.handler.call(e.context,t)}))},l.prototype.get=function(e){return this._subscribers[e]||(this._subscribers[e]=[]),this._subscribers[e]},l.prototype.isHandlerAttached=function(e,t){return this.get(t).some((function(t){return e===t.handler}))};var d=l;function c(){}function h(e,t){return e?null:new Error(t)}function u(e,t,i){var s,r,n,a=function(e,t,i){var s=document.createElement("iframe");s.src=t||"about:blank",s.marginWidth="0",s.marginHeight="0",s.frameBorder="0",s.width="100%",s.height="100%",p(s),i&&(s.style.zIndex=i);return s.setAttribute("SCROLLING","NO"),e.innerHTML="",e.appendChild(s),s}(e,null,i.zIndex);if(s=a,r=function(e,t){return Object.keys(t).forEach((function(i){var s="object"==typeof s?JSON.stringify(t[i]):t[i];e=e.replace(new RegExp("{{"+i+"}}","g"),s)})),e}(t,i),(n=s.contentWindow&&s.contentWindow.document)&&(n.write(r),1))return a}function p(e){e&&(e.style.position="absolute",e.style.left="0",e.style.top="0",e.style.margin="0px",e.style.padding="0px",e.style.border="none",e.style.width="100%",e.style.height="100%")}function m(e,t){return Object.keys(t).forEach((function(i){e[i]=t[i]})),e}var v=a.checkVPAIDInterface,g=(a.METHODS,"AdClickThru"),f=a.EVENTS.filter((function(e){return e!=g}));function b(e,t,i,s){this._isValid=v(e),this._isValid&&(this._creative=e,this._el=t,this._videoEl=i,this._iframe=s,this._subscribers=new d,p(t),y.call(this))}function y(){if(f.forEach(function(e){this._creative.subscribe(A.bind(this,e),e)}.bind(this)),this._creative.subscribe(k.bind(this),g),this._videoEl){var e=this._iframe.contentDocument.documentElement,t=this._videoEl;e.addEventListener("click",(function(i){i.target===e&&t.click()}))}}function k(e,t,i,s){this._subscribers.triggerSync(g,{url:e,id:t,playerHandles:i,description:s})}function A(e,...t){this._subscribers.trigger(e,t)}function T(e,t,i,s){e?e(i,s):i&&t.trigger("AdError",i)}b.prototype=Object.create(a.prototype),b.prototype.isValidVPAIDAd=function(){return this._isValid},a.METHODS.forEach((function(e){-1===["subscribe","unsubscribe","initAd"].indexOf(e)&&(b.prototype[e]=function(){var t=a.prototype[e].length,i=Array.prototype.slice.call(arguments),s=t===i.length?i.pop():void 0;setTimeout(function(){let t,r=null;try{t=this._creative[e].apply(this._creative,i)}catch(e){r=e}T(s,this._subscribers,r,t)}.bind(this),0)})})),b.prototype.initAd=function(e,t,i,s,r,n,a){r=r||{},n=m({slot:this._el,videoSlot:this._videoEl},n||{}),setTimeout(function(){let o;try{this._creative.initAd(e,t,i,s,r,n)}catch(e){o=e}T(a,this._subscribers,o)}.bind(this),0)},b.prototype.subscribe=function(e,t,i){this._subscribers.subscribe(t,e,i)},b.prototype.unsubscribe=function(e,t){this._subscribers.unsubscribe(t,e)},b.prototype.on=b.prototype.subscribe,b.prototype.off=b.prototype.unsubscribe,a.GETTERS.forEach((function(e){b.prototype[e]=function(t){setTimeout(function(){let i,s=null;try{i=this._creative[e]()}catch(e){s=e}T(t,this._subscribers,s,i)}.bind(this),0)}})),b.prototype.setAdVolume=function(e,t){setTimeout(function(){var i,s=null;try{this._creative.setAdVolume(e),i=this._creative.getAdVolume()}catch(e){s=e}setTimeout((()=>{s||(s=h(i===e,"failed to apply volume: "+e)),T(t,this._subscribers,s,i)}),200)}.bind(this),0)},b.prototype._destroy=function(){this.stopAd(),this._creative=null,this._el=null,this._videoEl=null,this._iframe=null,this._subscribers.unsubscribeAll()};var w,E,R=b,C=(w="vpaidIframe",E=-1,function(){return w+"_"+ ++E});function I(e,t,i,s){var r,n,a,o;i=i||{},this._id=C(),this._destroyed=!1,this._frameContainer=(r=e,n="div",o=document.createElement(n),a&&(o.id=a),r.appendChild(o),o),this._videoEl=t,this._vpaidOptions=s||{timeout:1e4},this._templateConfig={template:i.template||'<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"></head><body style="margin:0;padding:0"><div class="ad-element"></div><script type="text/javascript" src="{{iframeURL_JS}}"><\/script><script type="text/javascript">window.parent.postMessage(\'{"event": "ready", "id": "{{iframeID}}"}\', \'{{origin}}\');<\/script></body></html>',extraOptions:i.extraOptions||{}}}function L(e){var t=this[e];t&&t.parentNode&&(t.parentNode.removeChild(t),delete this[e])}function U(){x.call(this),delete this._adUnit}function _(){x.call(this),D.call(this)}function x(){L.call(this,"_frame"),V.call(this)}function V(){this._onLoad&&(window.removeEventListener("message",this._onLoad),delete this._onLoad)}function D(){this._adUnit&&(this._adUnit._destroy(),delete this._adUnit)}function N(){if(this._destroyed)throw new Error("VPAIDHTML5Client already destroyed!")}function M(){return window.location.origin?window.location.origin:window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")}I.prototype.destroy=function(){this._destroyed||(this._destroyed=!0,_.call(this))},I.prototype.isDestroyed=function(){return this._destroyed},I.prototype.loadAdUnit=function(e,t){if(!this._onLoad){N.call(this),_.call(this);var i=this,s=u(this._frameContainer,this._templateConfig.template,m({iframeURL_JS:e,iframeID:this.getID(),origin:M()},this._templateConfig.extraOptions));this._frame=s,this._onLoad=function(e,t,i){var s,r;return r=setTimeout((function(){t=c,i()}),e),s=function(){t.apply(this,arguments)&&clearTimeout(r)},s}(this._vpaidOptions.timeout,function(e){if(e.origin!==M())return;let s;try{s=JSON.parse(e.data)}catch(e){}if(!s||s.id!==i.getID())return;var r,n,a;if(i._frame.contentWindow){if(n=h("function"==typeof(a=i._frame.contentWindow.getVPAIDAd),"the ad didn't return a function to create an ad"))return}else n="the iframe is not anymore in the DOM tree";if(!n){var o=i._frame.contentWindow.document.querySelector(".ad-element");(r=new R(a(),o,i._videoEl,i._frame)).subscribe("AdStopped",U.bind(i)),n=h(r.isValidVPAIDAd(),"the ad is not fully compliant with VPAID specification")}return i._adUnit=r,V.call(i),t(n,n?null:r),!0}.bind(this),function(){}.bind(this)),window.addEventListener("message",this._onLoad)}},I.prototype.unloadAdUnit=function(){_.call(this)},I.prototype.getID=function(){return this._id};var O=I,S=i(4);const P="vpaid vast rejected by disableIndirectDemand setting",B="vast rejected because it contains blocked domain -";class F{constructor(e,t,i,s){this.parent=e,this.opaVideoData=t,this.media=i,this.id=this.parent.id,this.recData=this.parent.options?this.parent.options.adData:void 0,this.companionAds=this.parent.video&&this.parent.video&&this.parent.video.parser&&this.parent.video.parser.companionAds?this.parent.video.parser.companionAds:void 0,this.adUnit=null,this.bridge=null,this.error=null,this.playing=!1,this.started=!1,this.shouldTrackMoat=this.parent.shouldTrackMoat,this.options=this.parent.options,this.moatTracker=null,this.videoStartedPlaying=!1,this.currentVolume=this.parent.options.muted?0:1,this.delayedEvents={resize:{w:null,h:null},mute:!1,unmute:!1,volume:{val:null},seek:{val:null},play:!1,stop:!1,pause:!1,resume:!1},this.subscriptions={ready:[],adstarted:[],adstopped:[],adpaused:[],adresumed:[],adcomplete:[],advolumechanged:[],volume:[],mute:[],unmute:[],seek:[],progress:[],enterfullscreen:[],exitfullscreen:[],fullscreenerror:[],aduseracceptinvitation:[]},this.videoContainer=s,this.initializing=!1,this.currentVolume=e.options.muted?0:1,this.lastPlayedVolume=this.currentVolume,this.style={vpaidClass:"obp-vpaid"}}init(){const e=this;return this.initializing=!0,this.opaVideoData.vpaidUrl=this.media?.fileURL,this.blockIndirectDemandIfNeeded(),this.blockIfContainsBlockedDomain(),new Promise(((t,i)=>{const s=e.videoContainer,r='<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"></head><body style="margin:0;padding:0"><div class="ad-element"></div><script type="text/javascript" src="{{iframeURL_JS}}"><\/script><script type="text/javascript">window.parent.postMessage(\'{"event": "ready", "id": "{{iframeID}}"}\', \''+(window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:""))+"');<\/script></body></html>";s.content.elm.classList.add(e.style.vpaidClass),s.video.elm.setAttribute("playsinline","true"),e.bridge=new O(s.content.elm,s.video.elm,{template:r}),e.bridge.loadAdUnit(this.media.fileURL,e.onload.bind(e,t,i))}))}blockIfContainsBlockedDomain(){const{blockedDomains:e}=this.options;if(!e?.length>0)return;const t=this.media.videoClickThroughURLTemplate,i=this.media.videoClickTrackingURLTemplates;[t,this.media.fileURL,...i].find((t=>{const i=t?.toLowerCase(),s=e.find((e=>i?.includes(e?.toLowerCase())));if(s)throw new Error(`${B} url:[${t}] contains blockedDomain:[${s}]`)}))}blockIndirectDemandIfNeeded(){if(S.default.isIndirectDemand(this.opaVideoData)&&this.isIndirectVpaidBlocked(this.options.disableVideoIndirectDemand))throw new Error(P)}isIndirectVpaidBlocked(e){return[S.DisableIndirectDemandOptions.BLOCK_INDIRECT,S.DisableIndirectDemandOptions.BLOCK_VPAID_ONLY].includes(e)}onload(e,t,i,s){i?t(i):(this.adUnit=s,s._videoEl.addEventListener("progress",this.onProgress.bind(this)),s.subscribe("AdLoaded",this.onInit.bind(this)),s.subscribe("AdError",this.onError.bind(this)),s.subscribe("AdStarted",this.onEvent.bind(this,"adstarted")),s.subscribe("AdStopped",this.onEvent.bind(this,"adstopped")),s.subscribe("AdPaused",this.onEvent.bind(this,"adpaused")),s.subscribe("AdPlaying",this.onEvent.bind(this,"adresumed")),s.subscribe("AdSkipped",this.onEvent.bind(this,"adskipped")),s.subscribe("AdVideoComplete",this.onEvent.bind(this,"adcomplete")),s.subscribe("AdVolumeChange",this.onEvent.bind(this,"advolumechanged")),s.subscribe("AdClickThru",this.onClickThru.bind(this)),s.subscribe("Overlay.click",this.onCtaClick.bind(this)),s.subscribe("AdUserClose",this.onCtaClick.bind(this)),s.subscribe("AdVideoFirstQuartile",this.onEvent.bind(this,"adfirstquartile")),s.subscribe("AdVideoMidpoint",this.onEvent.bind(this,"admidpoint")),s.subscribe("AdVideoThirdQuartile",this.onEvent.bind(this,"adthirdquartile")),s.subscribe("AdUserAcceptInvitation",this.onEvent.bind(this,"aduseracceptinvitation")),["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"].forEach((e=>{document.addEventListener(e,this.onFullscreen.bind(this))})),["fullscreenerror","webkitfullscreenerror","mozfullscreenerror","MSFullscreenError"].forEach((e=>{document.addEventListener(e,this.onFullscreenError.bind(this))})),s.handshakeVersion("2.0",this.onHandShake.bind(this)),this.shouldTrackMoat&&this.prepareMoatTracking(),e(!0))}onHandShake(e){e?this.onError(e,"onHandShake"):this.adUnit.initAd(window.innerWidth,window.innerHeight,"normal",-1,{AdParameters:this.media.adParameters},{})}onInit(){this.initializing=!1;for(const e in this.delayedEvents)if(this.delayedEvents.hasOwnProperty(e)){const t=this.delayedEvents[e];if(this.delayedEvents[e])switch(e){case"resize":null!==t.w&&null!==t.h&&(this.resize(t.w,t.h),t.w=0,t.h=0);break;case"mute":this.mute(),this.delayedEvents[e]=!1;break;case"unmute":this.unmute(),this.delayedEvents[e]=!1;break;case"volume":null!==t.val&&(this.volume(t.val),t.val=null);break;case"seek":null!==t.val&&(this.seek(t.val),t.val=null);break;case"stop":this.stop(),this.delayedEvents[e]=!1;break;case"pause":this.pause(),this.delayedEvents[e]=!1;break;case"resume":this.resume(),this.delayedEvents[e]=!1}}this.jsTrackingEvent(this.media?.eventTrackers?.jsTrackers?.impressions||[]),this.onEvent("ready"),this.onEvent("adloaded")}onError(e,t){const i={adId:this.opaVideoData?.opaAdId,message:""};let s=(t||"")+": ";i.message=e?.message?s+e.message:e&&e instanceof Array?s+e.toString():s+"unknown vpaid error",this.error=i;const r=new CustomEvent("aderror",{detail:i,bubbles:!1,cancelable:!0});this.videoContainer.elm.dispatchEvent(r)}onProgress(e){const t=e.srcElement.buffered;t.length&&this.broadcast("progress",{start:e.srcElement.buffered.start(t.length-1),end:e.srcElement.buffered.end(t.length-1)})}onEvent(e){let t=null;if("adstarted"===e){try{const e=this.videoContainer.video.elm;this.options.muted&&!e.muted&&this.forceMuteAfterPlay()}catch(e){}this.started=!0,this.videoStartedPlaying=!0,t=this.opaVideoData;const{vpaidTemplate:e}=this.adUnit._creative;e&&(t.vpaidTemplate=e),t.format="VPAID",this.options.shouldNotifyPlayerOnAdRendered||(this.sendMoatEvent("AdVideoStart"),this.media.impressions&&this.trackingEvents(this.media.impressions),this.media.trackingEvents.start&&this.trackingEvents(this.media.trackingEvents.start))}"aduserclose"===e&&(this.playing=!1,this.media.trackingEvents.close&&this.trackingEvents(this.media.trackingEvents.close)),"adstopped"===e&&this.sendMoatEvent("AdStopped"),"adpaused"===e&&(this.playing=!1,this.sendMoatEvent("AdPaused")),"adresumed"===e&&(this.playing=!0,this.sendMoatEvent("AdPlaying")),"adcomplete"===e&&(this.playing=!1,this.started=!1,this.media.trackingEvents.complete&&this.trackingEvents(this.media.trackingEvents.complete),this.sendEventTrackersEvent("complete"),this.sendMoatEvent("AdVideoComplete")),"adfirstquartile"===e&&(this.playing=!0,this.media.trackingEvents.firstQuartile&&this.trackingEvents(this.media.trackingEvents.firstQuartile),this.sendEventTrackersEvent("firstQuartile"),this.sendMoatEvent("AdVideoFirstQuartile")),"admidpoint"===e&&(this.playing=!0,this.media.trackingEvents.midpoint&&this.trackingEvents(this.media.trackingEvents.midpoint),this.sendEventTrackersEvent("secondQuartile"),this.sendMoatEvent("AdVideoMidpoint")),"adthirdquartile"===e&&(this.playing=!0,this.media.trackingEvents.thirdQuartile&&this.trackingEvents(this.media.trackingEvents.thirdQuartile),this.sendEventTrackersEvent("thirdQuartile"),this.sendMoatEvent("AdVideoThirdQuartile")),"aduseracceptinvitation"===e&&this.media.trackingEvents.acceptInvitation&&this.trackingEvents(this.media.trackingEvents.acceptInvitation);const i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:t});this.videoContainer.elm.dispatchEvent(i),this.broadcast(e)}onClickThru(e){const t=new CustomEvent("adclick",{bubbles:!1,cancelable:!0,detail:e});this.videoContainer.elm.dispatchEvent(t),e.playerHandles&&(this.media.videoClickTrackingURLTemplates&&this.trackingEvents(this.media.videoClickTrackingURLTemplates),window.open(e.url,"_blank"))}sendMoatEvent(e){if(!this.moatTracker)return;const t={type:e,adVolume:this.getVolume()};this.moatTracker.dispatchEvent(t)}sendEventTrackersEvent(e){this.trackingEvents(this.media?.eventTrackers?.pixels?.[e]||[]),this.jsTrackingEvent(this.media?.eventTrackers?.jsTrackers?.[e]||[])}onCtaClick(){}onFullscreen(e){if(e.target.id===this.id){const e=document.fullScreen||document.mozFullScreen||document.webkitIsFullScreen;e?this.videoContainer.elm.classList.add("omp-expanded"):this.videoContainer.elm.classList.remove("omp-expanded");const t=e?"enterfullscreen":"exitfullscreen";e&&this.media.trackingEvents.fullscreen&&this.trackingEvents(this.media.trackingEvents.fullscreen),this.onEvent(t)}}onFullscreenError(e){const t=new CustomEvent("playererror",{detail:e,bubbles:!1,cancelable:!0});this.videoContainer.elm.dispatchEvent(t),this.broadcast("fullscreenerrror")}onPlayingMediaError(e){const t=new CustomEvent("playererror",{detail:e,bubbles:!1,cancelable:!0});this.videoContainer.elm.dispatchEvent(t),this.broadcast("playererror")}hasFullscreen(){const e=this.videoContainer.elm;return e.requestFullscreen||e.webkitRequestFullscreen||e.mozRequestFullScreen||e.msRequestFullscreen}subscribe(e,t){this.subscriptions.hasOwnProperty(e)&&this.subscriptions[e].push(t)}broadcast(e,...t){if(this.subscriptions.hasOwnProperty(e)){const i=this.subscriptions[e].length;let s=0;for(;s<i;s++)this.subscriptions[e][s](e,...t)}}replaceMacros(e){return e.replaceAll("{ivc_ad_id}",this.validateMacros(this.recData.adId)).replaceAll("{ivc_widget_name}",this.validateMacros(this.recData.widgetID)).replaceAll("{ivc_widget_id}",this.validateMacros(this.recData.widgetNumberId)).replaceAll("{ivc_ad_title}",this.validateMacros(this.recData.title)).replaceAll("{ivc_source_id}",this.validateMacros(this.recData.sourceId)).replaceAll("{ivc_req_id}",this.validateMacros(this.recData.reqId)).replaceAll("{ivc_campaign_id}",this.validateMacros(this.recData.campaignId)).replaceAll("{ivc_publisher_id}",this.validateMacros(this.recData.publisherId)).replaceAll("{ivc_publisher_name}",this.validateMacros(this.recData.publisherName)).replaceAll("{ivc_adv_name}",this.validateMacros(this.recData.sourceName)).replaceAll("{ivc_time_stamp}",this.validateMacros(this.recData.timestamp)).replaceAll("{ivc_doc_id}",this.validateMacros(this.recData.did)).replaceAll("{ivc_ext_ad_id}",this.recData.externalIds?this.validateMacros(this.recData.externalIds.adId):"").replaceAll("{ivc_ext_source_id}",this.recData.externalIds?this.validateMacros(this.recData.externalIds.sourceId):"").replaceAll("{ivc_ext_campaign_id}",this.recData.externalIds?this.validateMacros(this.recData.externalIds.campaignId):"").replaceAll("{ivc_ext_publisher_id}",this.recData.externalIds?this.validateMacros(this.recData.externalIds.publisherId):"").replaceAll("{ivc_ext_doc_id}",this.recData.externalIds?this.validateMacros(this.recData.externalIds.did):"").replaceAll("{{ad_id}}",this.recData.externalIds?this.validateMacros(this.recData.externalIds.adId):"").replaceAll("{{widget_name}}",this.validateMacros(this.recData.widgetID)).replaceAll("{{widget_id}}",this.validateMacros(this.recData.widgetNumberId)).replaceAll("{{ad_title}}",this.validateMacros(this.recData.title)).replaceAll("{{section_id}}",this.recData.externalIds?this.validateMacros(this.recData.externalIds.sourceId):"").replaceAll("{{req_id}}",this.validateMacros(this.recData.reqId)).replaceAll("{{campaign_id}}",this.recData.externalIds?this.validateMacros(this.recData.externalIds.campaignId):"").replaceAll("{{publisher_id}}",this.recData.externalIds?this.validateMacros(this.recData.externalIds.publisherId):"").replaceAll("{{publisher_name}}",this.validateMacros(this.recData.publisherName)).replaceAll("{{adv_name}}",this.validateMacros(this.recData.sourceName)).replaceAll("{{time_stamp}}",this.validateMacros(this.recData.timestamp)).replaceAll("{{doc_id}}",this.recData.externalIds?this.validateMacros(this.recData.externalIds.did):"").replaceAll("{ivc_ob_click_id}",this.validateMacros(this.recData.obClickId)).replaceAll("{{ob_click_id}}",this.validateMacros(this.recData.obClickId)).replaceAll("{{time_stamp}}",Date.now().toString())}validateMacros(e){return e||""}prepareMoatTracking(){const e=this.videoContainer.elm,t={level1:this.options.publisherId,level2:this.options.publisherName,level3:this.options.widgetId,level4:this.options.domain,slicer1:this.options.partnerId,slicer2:this.options.marketerName},i=this.getAdDuration();this.moatTracker=this.initMoatTracking(e,t,i,"zemantajsvideo256634828520")}initMoatTracking(e,t,i,s,r,n){const a=document.createElement("script");let o=[];const l={vidIntType:"3",vidIntVersion:"1.0",adData:{ids:t,duration:i,url:r},dispatchEvent:function(e){l.sendEvent?(o&&(o.push(e),e=o,o=!1),l.sendEvent(e)):o&&o.push(e)},clientCallback:n};let d,c;t="_moatApi"+Math.floor(1e8*Math.random());try{d=e.ownerDocument,c=d.defaultView||d.parentWindow}catch(e){d=document,c=window}return c[t]=l,a.type="text/javascript",e&&e.insertBefore(a,e.childNodes[0]||null),a.src="https://z.moatads.com/"+s+"/moatvideo.js#"+t,l}trackingEvents(e){for(let t=0;t<e.length;t++){const i=this.recData?this.replaceMacros(e[t]):e[t];(new Image).src=i;const s=new CustomEvent("pixelfired",{detail:i,bubbles:!1,cancelable:!0});this.videoContainer.elm.dispatchEvent(s),this.broadcast("pixelfired")}}jsTrackingEvent(e){const t=this.videoContainer.video.elm.parentElement;for(let i=0;i<e.length;i++){const s=document.createElement("script");s.setAttribute("type","text/javascript"),s.src=e[i],t.appendChild(s);const r=new CustomEvent("jsTrackerAdded",{detail:e[i],bubbles:!1,cancelable:!0});this.videoContainer.elm.dispatchEvent(r),this.broadcast("jsTrackerAdded")}}play(){try{this.adUnit.startAd(),this.playing=!0}catch(e){this.onError(e,"play")}}stop(){try{this.adUnit._videoEl.paused||(this.adUnit._videoEl.pause(),this.adUnit.stopAd()),this.playing=!1}catch(e){return this.onPlayingMediaError(new Error("No video element in VPAID"))}}pause(){this.adUnit.pauseAd(),this.playing=!1,this.media.trackingEvents.pause&&this.trackingEvents(this.media.trackingEvents.pause)}resume(){this.adUnit.resumeAd(),this.playing=!0,this.media.trackingEvents.resume&&this.trackingEvents(this.media.trackingEvents.resume)}mute(e=!0,t=!0){this.adUnit._videoEl.muted=!0,this.media.trackingEvents.mute&&this.trackingEvents(this.media.trackingEvents.mute),this.currentVolume=0,e&&this.onEvent("advolumechanged"),t&&this.broadcast("mute"),this.sendMoatEvent("AdVolumeChange")}onVolumeError(e){if(!e)return;const t=new CustomEvent("playererror",{detail:{message:e.message,canContinuePlay:!0},bubbles:!1,cancelable:!0});this.videoContainer.elm.dispatchEvent(t)}unmute(e=!0,t=!0){this.adUnit&&(this.adUnit._videoEl.muted=!1,0===this.lastPlayedVolume&&(this.lastPlayedVolume=1),this.currentVolume=this.lastPlayedVolume,this.media.trackingEvents.unmute&&this.trackingEvents(this.media.trackingEvents.unmute),e&&(this.onEvent("advolumechanged"),this.sendMoatEvent("AdVolumeChange")),t&&this.broadcast("unmute"))}forceMuteAfterPlay(){this.adUnit._videoEl.muted=!0,this.currentVolume=0;const e=new CustomEvent("playererror",{detail:{message:"sound on",canContinuePlay:!0},bubbles:!1,cancelable:!0});this.videoContainer.elm.dispatchEvent(e)}volume(e,t=!0){try{this.adUnit?(this.adUnit.setAdVolume(e,this.onVolumeError.bind(this)),this.lastPlayedVolume=this.currentVolume=e,t&&(this.broadcast("volume"),this.sendMoatEvent("AdVolumeChange"))):this.delayedEvents.volume.val=e}catch(e){this.onError(e,"volume")}}seek(e,t=!0){this.adUnit?(this.adUnit._videoEl.currentTime=e,t&&this.broadcast("seek")):this.delayedEvents.seek.val=e}fullscreen(){const e=this.videoContainer.elm;e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.msRequestFullscreen&&e.msRequestFullscreen()}collapse(){document.fullscreenElement?document.exitFullscreen():document.webkitFullscreenElement?document.webkitExitFullscreen():document.mozFullScreenElement?document.mozCancelFullScreen():document.msFullscreenElement&&document.msExitFullscreen()}resize(e,t){this.adUnit&&t>0&&e>0?this.adUnit.resizeAd(e,t,"normal"):this.delayedEvents.resize={w:e,h:t}}clickToPlay(){this.onEvent("clicktoplay")}destroy(){const e=new CustomEvent("destroycompleted",{bubbles:!1,cancelable:!0});this.videoContainer.elm.dispatchEvent(e),this.bridge.destroy()}isMuted(){try{return this.adUnit._videoEl.muted}catch(e){return null}}getVolume(){return this.currentVolume}getAdPaused(){try{return this.adUnit._videoEl.paused}catch(e){return null}}getAdErrorCode(){return this.error.errorCode}getAdErrorMessage(){return this.error.message}getAdMediaHeight(){try{return this.adUnit._videoEl.videoHeight}catch(e){return 0}}getAdMediaWidth(){try{return this.adUnit._videoEl.videoWidth}catch(e){return 0}}getAdMediaUrl(){try{return this.adUnit._videoEl.src}catch(e){return null}}getAdTagUrl(){return this.media.fileURL}getAdDuration(){try{const e=this.adUnit&&this.adUnit._creative.getAdDuration();return e&&e>0?e:this.media.duration}catch(e){return 0}}getAdCurrentTime(){try{let e=this.adUnit._creative.getAdRemainingTime();e<0&&(e=0);const t=this.adUnit._creative.getAdDuration();return t-e||this.adUnit._videoEl.currentTime}catch(e){return 0}}getAdSystem(){return this.media.system}getVideoBitrate(){return this.media.bitrate}getAdMediaBitrateArray(){return null}getHeavyAdStatus(){return"vpaid"}getAdDeliveryType(){return this.media.deliveryType}getVastWidth(){try{return this.media.width}catch(e){return 0}}getVastHeight(){try{return this.media.height}catch(e){return 0}}getVideoClickThroughURL(){try{return this.media.videoClickThroughURLTemplate}catch(e){return 0}}getVideoClickTrackingURL(){try{return this.media.videoClickTrackingURLTemplates}catch(e){return 0}}getCompanionAds(){try{return this.companionAds}catch(e){return 0}}updateMacros(e){try{this.recData.obClickId=e.clickId}catch(e){}}notifyVideoHasBeenRendered(e){e===this.options.widgetIdx&&(this.sendMoatEvent("AdVideoStart"),this.media.impressions&&this.trackingEvents(this.media.impressions),this.media.trackingEvents.start&&this.trackingEvents(this.media.trackingEvents.start))}}},563:function(e,t,i){var s={"./omsdk-manager":[601,832],"./omsdk-manager.js":[601,832],"./parser":[557],"./parser.js":[557],"./player":[4],"./player-controls":[525,619],"./player-controls-svgs":[508,243],"./player-controls-svgs.js":[508,243],"./player-controls.js":[525,619],"./player.js":[4],"./utils":[658],"./utils.js":[658],"./vast":[677,621],"./vast.js":[677,621],"./video":[258,791],"./video.js":[258,791],"./vpaid":[711],"./vpaid.js":[711]};function r(e){if(!i.o(s,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=s[e],r=t[0];return Promise.all(t.slice(1).map(i.e)).then((function(){return i(r)}))}r.keys=function(){return Object.keys(s)},r.id=563,e.exports=r},150:function(e,t,i){"use strict";var s,r,n,a,o;o=i(874),r=i(206),n=i(440),a=i(290),s=i(325).DOMParser,function(){function e(){}e.get=function(e,t,i){var l,d,c,h,u,p;return c="https:"===(e=o.parse(e)).protocol?a:n,"file:"===e.protocol?r.readFile(e.pathname,"utf8",(function(e,t){var r;return e?i(e):(r=(new s).parseFromString(t),i(null,r))})):(l="",u=function(e){return function(){return e.abort()}},(h=c.get(e.href,(function(e){return e.on("data",(function(e){var i;return l+=e,clearTimeout(i),setTimeout(d,t.timeout||12e4)})),e.on("end",(function(){var e;return clearTimeout(p),e=(new s).parseFromString(l),i(null,e)}))}))).on("error",(function(e){return clearTimeout(p),i(e)})),d=u(h),p=setTimeout(d,t.timeout||12e4))}}()},252:function(e,t,i){"use strict";i.d(t,{G:function(){return h},OpaSupply:function(){return u}});const s=1,r=1,n=4,a=501,o=502,l=503,d=504;var c=i(557);i(182);const h="no content";class u{constructor(){this.currentRetry=0}initOpaVideoCall(e){return this.currentRetry++,new Promise(((t,i)=>{e.firstAuctionVideo?this.getRtbDataFromResponseVjapi(e,(e=>{t(e)}),(e=>{i(e)}),e.firstAuctionVideo,!0):e?.requestVastFormatFF?this.callOdbVast(e,(e=>{t(e)}),(e=>{i(e)})):this.callOdbVjapi(e,(e=>{t(e)}),(e=>{i(e)}))}))}callOdbVjapi(e,t,i){const s=JSON.parse(JSON.stringify(e.requestParams));let r=2;if(e.isPreload||e.isInView()?r=6:"function"==typeof e.getPlaybackMethod&&(r=e.getPlaybackMethod()),s.extraParams+="&videoPlaybackMethod="+r,s.extraParams+="&isRequestInView="+e.isInView(),e.isAdRefresh){const e=window.OB_VIDEO.getExtraRtbRequestParams?window.OB_VIDEO.getExtraRtbRequestParams():"";s.extraParams+=e}try{window.OBR.extern.callRecs(s,this.getRtbDataFromResponseVjapi.bind(this,e,t,i))}catch(e){i(e)}}callOdbVast(e,t,i){let s=JSON.parse(JSON.stringify(e.requestParams)),r=2;if(e.isPreload||e.isInView()?r=6:"function"==typeof e.getPlaybackMethod&&(r=e.getPlaybackMethod()),s.extraParams+="&videoPlaybackMethod="+r,s.extraParams+="&isRequestInView="+e.isInView(),e.isAdRefresh){const e=window.OB_VIDEO.getExtraRtbRequestParams?window.OB_VIDEO.getExtraRtbRequestParams():"";s.extraParams+=e}s={...s,format:"vast",cors:!0};const n=`${e.ObGetOdbUrl()}&${s.extraParams}`,a=new URL(n);Object.entries(s).forEach((([e,t])=>{[void 0,null,""].includes(t)||"extraParams"===e||a.searchParams.append(e,t)})),fetch(a).then((e=>{if(!e.ok)throw new Error("Network response was not ok");return e.text()})).then((async s=>{if(this.isEmptyVast(s))throw{errorMsg:h,severity:0};const r={...await this.getObVideoData(s),vastXML:s};this.getRtbDataFromResponseVast(e,t,i,r)})).catch((e=>{console.error("Fetch error:",e),i(e)}))}async getObVideoData(e){const t=new c.default(e),i=(await t.read()).ads[0].extensions.find((e=>"OB_VIDEO_DATA"===e.attributes.type));return JSON.parse(i.children[0].value)}getRtbDataFromResponseVast(e,t,i,s,r){const{vastXML:n,opaData:a,nativeAssets:o}=s,l={vastXML:n,firstAuction:!!r,sponsorLogo:{width:"belowVideo"===e?.nativeLogoPosition?20:60,height:"belowVideo"===e?.nativeLogoPosition?20:60,logoUrl:o?.logoUrl},currentRetry:this.currentRetry,isFirstAuctionVideo:!!r,...a,nativeAssets:o},d=this.getAddError(e,l);d?i({errorMsg:d,severity:1}):t([l])}getAddError(e,t){if(t.isNativeVideo&&"never"===e.nativeVideoMode)return"video is native but nativeVideoMode is set to never";const i={opaAdsData:t};return this.isEmptyVast(i)?"non video ad found":null}isEmptyVast(e){if(e?.length<30)return!0;return e?.length<1500&&e.includes("emptyVast")}getRtbDataFromResponseVjapi(e,t,i,s,r){const n=[],a=s?s.doc:null;let o=[];if(Array.isArray(a)&&a.length>0)return a.forEach((t=>{const i=this.validateAd(e,t);if(i)n.push(i);else{const i=t.video,n=this.isFirstAuctionAndEnrichedWithPixels(r,i)?[]:t?.eventTrackers,a={isNativeVideo:"true"===t.is_native_video,ctaButton:t.cta,ctaUrl:i.url,title:i.title,description:t.desc,sponsored:t.source_display_name?t.source_display_name:"",logoUrl:t.logo?t.logo.url:null},l={secondaryReqId:s.req_id,vastXML:i.vastxml,pageCategories:i.page_category,userCategories:i.user_interest_category,advId:t.advId,advName:t.adv_name,campaignId:t.pc_cmp_id,dealId:t.rtbdid,trackersLength:n?.length??0,eventTrackers:this.extractEventTrackers(n),opaPartnerId:t.partner_id,opaAdId:t.pc_id,agencyId:t.agency_id,width:t.display?t.display.width:0,height:t.display?t.display.height:0,onViewed:t["on-viewed"],productId:t.product_id?t.product_id:null,pos:t.pos,currentRetry:this.currentRetry,sponsorLogo:{width:"belowVideo"===e.nativeLogoPosition?20:60,height:"belowVideo"===e.nativeLogoPosition?20:60,logoUrl:t.logo?t.logo.url:null},isFirstAuctionVideo:!!r,bidValue:t.video_v,nativeAssets:a,...a};o.push(l)}})),void(o.length>0?t(o):i({errorMsg:n[0]||"",severity:1}));i({errorMsg:h,severity:0})}isFirstAuctionAndEnrichedWithPixels(e,t){return e&&t?.vastxml?.includes("amplify-imp.outbrain.com")}validateAd(e,t){return"true"===t.is_native_video&&"never"===e.nativeVideoMode?"video is native but nativeVideoMode is set to never":t.video?null:"non video ad found"}extractEventTrackers(e){const t={pixels:{impressions:[],videoViewable:[],firstQuartile:[],secondQuartile:[],thirdQuartile:[],complete:[]},jsTrackers:{impressions:[],videoViewable:[],firstQuartile:[],secondQuartile:[],thirdQuartile:[],complete:[]}};return null==e||e.forEach((e=>{const i=e.method===s?"pixels":"jsTrackers";switch(e.event){case r:t[i].impressions.push(e.url);break;case n:t[i].videoViewable.push(e.url);break;case a:t[i].firstQuartile.push(e.url);break;case o:t[i].secondQuartile.push(e.url);break;case l:t[i].thirdQuartile.push(e.url);break;case d:t[i].complete.push(e.url)}})),t}}},206:function(){},440:function(){},290:function(){},874:function(){},325:function(){}},i={};function s(e){var r=i[e];if(void 0!==r)return r.exports;var n=i[e]={exports:{}};return t[e].call(n.exports,n,n.exports,s),n.exports}s.m=t,s.d=function(e,t){for(var i in t)s.o(t,i)&&!s.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},s.f={},s.e=function(e){return Promise.all(Object.keys(s.f).reduce((function(t,i){return s.f[i](e,t),t}),[]))},s.u=function(e){return{243:"player-controls-svgs",619:"player-controls",621:"vast",791:"video",832:"omsdk-manager"}[e]+".bundle.js"},s.miniCssF=function(e){},s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},e={},s.l=function(t,i,r,n){if(e[t])e[t].push(i);else{var a,o;if(void 0!==r)for(var l=document.getElementsByTagName("script"),d=0;d<l.length;d++){var c=l[d];if(c.getAttribute("src")==t){a=c;break}}a||(o=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,s.nc&&a.setAttribute("nonce",s.nc),a.src=t),e[t]=[i];var h=function(i,s){a.onerror=a.onload=null,clearTimeout(u);var r=e[t];if(delete e[t],a.parentNode&&a.parentNode.removeChild(a),r&&r.forEach((function(e){return e(s)})),i)return i(s)},u=setTimeout(h.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=h.bind(null,a.onerror),a.onload=h.bind(null,a.onload),o&&document.head.appendChild(a)}},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},function(){var e;s.g.importScripts&&(e=s.g.location+"");var t=s.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var i=t.getElementsByTagName("script");if(i.length)for(var r=i.length-1;r>-1&&!e;)e=i[r--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),s.p=e}(),function(){var e={898:0};s.f.j=function(t,i){var r=s.o(e,t)?e[t]:void 0;if(0!==r)if(r)i.push(r[2]);else{var n=new Promise((function(i,s){r=e[t]=[i,s]}));i.push(r[2]=n);var a=s.p+s.u(t),o=new Error;s.l(a,(function(i){if(s.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var n=i&&("load"===i.type?"missing":i.type),a=i&&i.target&&i.target.src;o.message="Loading chunk "+t+" failed.\n("+n+": "+a+")",o.name="ChunkLoadError",o.type=n,o.request=a,r[1](o)}}),"chunk-"+t,t)}};var t=function(t,i){var r,n,a=i[0],o=i[1],l=i[2],d=0;if(a.some((function(t){return 0!==e[t]}))){for(r in o)s.o(o,r)&&(s.m[r]=o[r]);if(l)l(s)}for(t&&t(i);d<a.length;d++)n=a[d],s.o(e,n)&&e[n]&&e[n][0](),e[n]=0},i=self.ObOmpChunk=self.ObOmpChunk||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}(),function(){"use strict";var e=s(4);window.OutbrainMP=e.default}()}();