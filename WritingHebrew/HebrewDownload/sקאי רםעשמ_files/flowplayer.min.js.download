!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).flowplayer=t()}(this,function(){"use strict";const e=[],t=[];function n(){const e="undefined"!=typeof document&&"undefined"!=typeof window,t=e?navigator.userAgent:"",n=/iP(hone|od)/i.test(t)&&!/iPad/.test(t)&&!/IEMobile/i.test(t),r=/Android/.test(t)&&!/Firefox/.test(t),o=/^((?!chrome|android).)*safari/i.test(t),i=/chrome|crios/i.test(t)&&!/opr|opera|chromium|edg|ucbrowser|googlebot/i.test(t),s=/firefox|fxios/i.test(t)&&!/seamonkey/i.test(t),a=/edg/i.test(t),l=/opr|opera/i.test(t),c=/SamsungBrowser/.test(t),u=c&&/SMART-TV/.test(t);return{controls:!n,video:function(t){return e&&document.createElement("video").canPlayType(t)},lang:e&&window.navigator.language,android:r,iphone:n,safari:o,edge:a,opera:l,chrome:i,firefox:s,ios:e&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,samsung:c,samsung_tv:c&&u,touch:"ontouchstart"in window,tizen:"tizen"in window,webOS:"webos"in window}}const r="mount",o="retry",i="error",s="click",a="dblclick",l="mouseleave",c="mouseup",u="mousedown",d="mousemove",p="touchstart",f="touchmove",h="touchend",m="touchcancel",y="resize",g="fullscreenenter",E="fullscreenexit",v="loadedmetadata",_="loadeddata",w="progress",S="timeupdate",b="loadstart",k="volumechange",T="pause",N="playing",A="play",O="waiting",I="canplay",L="ended",R="seeked",C="seeking",P="durationchange",F="viewenter",M="viewleave",D="src",U="reap",x="qualitychange",H="landscape",W="portrait",q="dvr",G="live",B="recover",V="seek:queued",j="seek:cancel",K="remotesession:ended",z="intersectionchange",Q="renderplugin",Y="audioonlysource",X="error:fatal",$="config",Z="state",J="beforeplay",ee="beforepause",te="content:loadstart",ne="flowplayer:error";var re=Object.freeze({__proto__:null,MOUNT:r,RETRY:o,ERROR:i,CONTEXT_MENU:"contextmenu",CLICK:s,DBL_CLICK:a,KEYUP:"keyup",KEYDOWN:"keydown",LOAD:"load",MOUSE_ENTER:"mouseenter",MOUSE_LEAVE:l,MOUSE_UP:c,MOUSE_DOWN:u,MOUSE_MOVE:d,TOUCH_START:p,TOUCH_MOVE:f,TOUCH_END:h,TOUCH_CANCEL:m,RESIZE:y,SCROLL:"scroll",FULLSCREEN_ENTER:g,FULLSCREEN_EXIT:E,FULLSCREEN_CHANGE:"fullscreenchange",METADATA:v,DATA:_,PROGRESS:w,TIME_UPDATE:S,LOAD_START:b,VOLUME_CHANGE:k,PAUSE:T,PLAYING:N,PLAY:A,WAITING:O,CAN_PLAY:I,ENDED:L,SEEKED:R,SEEKING:C,DURATION_CHANGE:P,VIEW_ENTER:F,VIEW_LEAVE:M,SOURCE:D,REAP:U,QUALITIES:"qualities",QUALITY_CHANGE:x,VIDEO_TRACKS:"videoTracks",SET_QUALITY:"quality:set",VIDEO_TRACK_SELECT:"tracks:video:select",RECOMMENDATIONS_READY:"recommendationsready",LANDSCAPE:H,PORTRAIT:W,DVR:q,LIVE:G,RECOVER:B,SEEK_QUEUED:V,SEEK_CANCEL:j,PLUGIN_REGISTERED:"plugin:registered",REMOTE_SESSION_STARTED:"remotesession:started",REMOTE_SESSION_ENDED:K,INTERSECTIONCHANGE:z,WEBKIT_NEEDKEY:"webkitneedkey",RENDER_PLUGIN:Q,AUDIO_ONLY_SOURCE:Y,NON_RECOVERABLE_ERROR:X,CONFIG:$,STATE:Z,BEFORE_PLAY:J,BEFORE_PAUSE:ee,CONTENT_REAL_LOAD_START:te,CUEPOINTS:"cuepoints",CUEPOINT_START:"cuepointstart",CUEPOINT_END:"cuepointend",STANDARD_ERROR:ne});const oe="flowplayer-ui",ie="flowplayer-logo",se="flowplayer-control",ae="flowplayer-control-buttons",le="flowplayer-live-status",ce="flowplayer-elapsed-time",ue="flowplayer-timeline-bar",de="flowplayer-control-duration",pe="flowplayer-volume-control",fe="flowplayer-volume-bar",he="flowplayer-header",me="flowplayer-header-left-zone",ye="flowplayer-header-right-zone",ge="flowplayer-header-duration",Ee="flowplayer-middle",ve="flowplayer-middle-zone",_e="flowplayer-wait",we="flowplayer-middle-buttons",Se="flowplayer-middle-left-zone",be="flowplayer-middle-right-zone",ke="flowplayer-small-play-icon",Te="flowplayer-small-pause-icon",Ne="flowplayer-play-icon",Ae="flowplayer-pause-icon",Oe="flowplayer-fullscreen-enter-icon",Ie="flowplayer-fullscreen-exit-icon",Le="flowplayer-fast-forward-icon",Re="flowplayer-rewind-icon",Ce="flowplayer-volume-icon",Pe="flowplayer-error";var Fe=Object.freeze({__proto__:null,SUBTITLES_MENU:"flowplayer-subtitles-menu",SHARE_MENU:"flowplayer-share-menu",SPEED_MENU:"flowplayer-speed-menu",QUALITY_MENU:"flowplayer-quality-menu",AUDIO_MENU:"flowplayer-audio-menu",VIDEO_MENU:"flowplayer-video-menu",UI:oe,LOGO:ie,CONTROL:se,CONTROL_BUTTONS:ae,LIVE_STATUS:le,ELAPSED:ce,TIMELINE:ue,CHAPTERS_TIMELINE:"flowplayer-chapters-timeline-bar",CONTROL_DURATION:de,VOLUME_CONTROL:pe,VOLUME_BAR:fe,HEADER:he,HEADER_LEFT_ZONE:me,HEADER_RIGHT_ZONE:ye,HEADER_DURATION:ge,MIDDLE:Ee,MIDDLE_ZONE:ve,WAIT:_e,MIDDLE_BUTTONS:we,MIDDLE_LEFT_ZONE:Se,MIDDLE_RIGHT_ZONE:be,ENDSCREEN_INTERSTITIAL:"flowplayer-endscreen-interstitial",ENDSCREEN_UP_NEXT:"flowplayer-endscreen-up-next",ENDSCREEN_GRID:"flowplayer-endscreen-grid",PLAYLIST_INTERSTITIAL:"flowplayer-playlist-interstitial",AIRPLAY_ICON:"flowplayer-airplay-icon",CHROMECAST_ICON:"flowplayer-chromecast-icon",SMALL_PLAY_ICON:ke,SMALL_PAUSE_ICON:Te,PLAY_ICON:Ne,PAUSE_ICON:Ae,FULLSCREEN_ENTER_ICON:Oe,FULLSCREEN_EXIT_ICON:Ie,SKIP_NEXT_ICON:"flowplayer-skip-next-icon",SKIP_PREVIOUS_ICON:"flowplayer-skip-previous-icon",FAST_FORWARD_ICON:Le,REWIND_ICON:Re,SHARE_ICON:"flowplayer-share-icon",SUBTITLES_MENU_ICON:"flowplayer-subs-menu-icon",MENU_BACK_ICON:"flowplayer-menu-back",VOLUME_ICON:Ce,MUTE_ICON:"flowplayer-mute-icon",UNMUTE_ICON:"flowplayer-unmute-icon",CLOSE_ICON:"flowplayer-close-icon",FACEBOOK_ICON:"flowplayer-facebook-icon",TWITTER_ICON:"flowplayer-twitter-icon",LINK_ICON:"flowplayer-link-icon",EMBED_ICON:"flowplayer-embed-icon",LIVE_COUNTDOWN:"flowplayer-live-countdown",PLAYLIST_CONTROLS:"flowplayer-playlist-controls",THUMBNAILS_CAROUSEL:"flowplayer-thumbnails-carousel",ERROR_COMPONENT:Pe,TV_MENU:"flowplayer-tv-menu",CUE_COMPONENT:"flowplayer-cue",SSAI_UI:"flowplayer-ssai-ui",SSAI_CONTROLS:"flowplayer-ssai-controls",SSAI_TIMELINE:"flowplayer-ssai-timeline",SSAI_INDICATOR:"flowplayer-ssai-indicator"});const Me="is-playing",De="is-fullscreen",Ue="is-paused",xe="is-muted",He="is-loaded",We="is-loading",qe="is-starting",Ge="is-seeking",Be="is-disabled",Ve="is-small",je="is-tiny",Ke="is-rtl",ze="is-ended",Qe="is-live",Ye="is-error",Xe="is-waiting",$e="is-autoplay",Ze="is-toggling",Je="is-live-seeked",et="no-timeline",tt="has-poster",nt="will-play",rt="will-pause",ot="has-menu-opened",it="is-touched",st="is-hovered",at="is-touch-device",lt="will-seek",ct="is-seekable",ut="is-in-viewport",dt="no-controls",pt="is-destroyed",ft="is-source-processing";var ht=Object.freeze({__proto__:null,PLAYING:Me,FULLSCREEN:De,PAUSED:Ue,MUTED:xe,LOADED:He,LOADING:We,STARTING:qe,SEEKING:Ge,GRABBING:"is-grabbing",DISABLED:Be,SMALL:Ve,TINY:je,RTL:Ke,TV:"is-tv",ENDED:ze,LIVE:Qe,ERRORED:Ye,WAITING:Xe,AUTOPLAY:$e,SEAMLESS:"is-seamless",TOGGLING:Ze,LIVE_SEEKED:Je,NO_DVR:et,HAS_POSTER:tt,WILL_PLAY:nt,WILL_PAUSE:rt,MENU_OPENED:ot,TOUCHED:it,HOVERED:st,TOUCH_DEVICE:at,WILL_SEEK:lt,SEEKABLE:ct,IN_VIEWPORT:ut,NO_CONTROLS:dt,DESTROYED:pt,IS_SOURCE_PROCESSING:ft});function mt(e){this.message=e}mt.prototype=new Error,mt.prototype.name="InvalidCharacterError";var yt="undefined"!=typeof window&&window.atob&&window.atob.bind(window)||function(e){var t=String(e).replace(/=+$/,"");if(t.length%4==1)throw new mt("'atob' failed: The string to be decoded is not correctly encoded.");for(var n,r,o=0,i=0,s="";r=t.charAt(i++);~r&&(n=o%4?64*n+r:r,o++%4)?s+=String.fromCharCode(255&n>>(-2*o&6)):0)r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(r);return s};var gt=function(e){var t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}try{return function(e){return decodeURIComponent(yt(e).replace(/(.)/g,function(e,t){var n=t.charCodeAt(0).toString(16).toUpperCase();return n.length<2&&(n="0"+n),"%"+n}))}(t)}catch(e){return yt(t)}};function Et(e){this.message=e}Et.prototype=new Error,Et.prototype.name="InvalidTokenError";var vt=function(e,t){if("string"!=typeof e)throw new Et("Invalid token specified");var n=!0===(t=t||{}).header?0:1;try{return JSON.parse(gt(e.split(".")[n]))}catch(e){throw new Et("Invalid token specified: "+e.message)}};vt.InvalidTokenError=Et;const _t=new Map,wt=(e,t)=>new(((e,t)=>{const n=e.get(t);if(!n)throw new Error(`no flowplayer component with the name ${t} exists`);const r=window.customElements.get(t);if(!r)throw new Error(`no default flowplayer component with the name ${t} exists`);const o=window.customElements.get(n);return"function"!=typeof o?r:o})(e._customElements,t))(e),St=(e,t,n)=>{window.customElements.get(t)||window.customElements.define(t,n),e.customElements.get(t)||e.customElements.set(t,t)},bt=(e,t)=>{const n=e.customElements.get(t),r=n&&n===t,o=Object.values(e.defaultElements).includes(t);return Boolean(o||r)};var kt,Tt;!function(e){e[e.LOW=1]="LOW",e[e.MEDIUM=2]="MEDIUM",e[e.HIGH=4]="HIGH"}(kt||(kt={})),function(e){e[e.OFF=0]="OFF",e[e.ON=1]="ON",e[e.AUDIO_REQUIRED=2]="AUDIO_REQUIRED"}(Tt||(Tt={}));const Nt={Unknown:"00-00",MediaUnknown:"01-00",MediaUnavailable:"01-01",MediaUnsupportedVideoFormat:"01-02",MediaUnsupportedAudioFormat:"01-03",MediaBitrateExceeded:"01-04",MediaBufferOverread:"01-05",MediaIntegerOverflow:"01-06",MediaQuotaExceeded:"01-07",MediaInvalidCompositionDuration:"01-08",MediaInvalidCompositionSourceDuration:"01-09",MediaInvalidCompositionSourceStartTime:"01-10",MediaMalformedDepth:"01-11",PlaybackUnknown:"02-00",PlaybackVideoBufferUnderRun:"02-01",PlaybackAudioBufferUnderRun:"02-02",PlaybackVideoBufferingTimeout:"02-03",PlaybackAudioBufferingTimeout:"02-04",PlaybackManifestParseError:"02-05",PlaybackVideoDecodeError:"02-06",PlaybackAudioDecodeError:"02-07",PlaybackDroppedFramesExceeded:"02-08",PlaybackPlayheadExceedsDuration:"02-09",PlaybackUnsupportedDevice:"02-10",PlaybackManifestLoadError:"02-11",PlaybackManifestLoadTimeout:"02-12",PlaybackManifestParsingError:"02-13",PlaybackManifestIncompatibleCodecs:"02-14",PlaybackLevelEmptyError:"02-15",PlaybackLevelLoadError:"02-16",PlaybackLevelLoadTimeout:"02-17",PlaybackLevelSwitchError:"02-18",PlaybackAudioTrackLoadError:"02-19",PlaybackAudioTrackLoadTimeout:"02-20",PlaybackFragLoadError:"02-21",PlaybackFragLoadTimeout:"02-22",PlaybackFragDecryptError:"02-23",PlaybackFragParsingError:"02-24",PlaybackFragGap:"02-25",PlaybackRemuxAllocError:"02-26",PlaybackBufferAddCodecError:"02-27",PlaybackBufferIncompatibleCodecs:"02-28",PlaybackBufferAppendError:"02-29",PlaybackBufferStalledError:"02-30",PlaybackBufferFullError:"02-31",PlaybackBufferSeekOverHole:"02-32",PlaybackBufferNudgeOnStall:"02-33",PlaybackInternalException:"02-34",PlaybackInternalAborted:"02-35",PlaybackManifestLoaderFailure:"02-36",PlaybackSegmentBaseLoaderError:"02-37",PlaybackTimeSyncFailed:"02-38",PlaybackFragmentLoaderFailure:"02-39",PlaybackAppendError:"02-40",PlaybackRemoveError:"02-41",PlaybackDataUpdateFailed:"02-42",PlaybackManifestNoStreams:"02-43",PlaybackUnknownManifestType:"02-44",PlaybackDashInsufficientSegmentInfo:"02-45",PlaybackDashNoRepresentations:"02-46",PlaybackDashNoAdaptationSets:"02-47",PlaybackDashNoInitSegment:"02-48",PlaybackDashUnsupportedContainerFormat:"02-49",PlaybackDashKeySystemMismatch:"02-50",PlaybackMultipleKeyIDs:"02-51",PlaybackDashConflictingKeyIDs:"02-52",PlaybackRestrictedStreams:"02-53",PlaybackHlsMasterAndMediaTags:"02-54",PlaybackRepresentationIdConflict:"02-55",PlaybackHlsUnsupportedKeyFormats:"02-56",PlaybackManifestNoVariants:"02-57",PlaybackHlsUndeclaredVariables:"02-58",PlaybackAes128InvalidKeyLength:"02-59",PlaybackDashConflictingAes128Keys:"02-60",PlaybackDashUnsupportedAes128Encryption:"02-61",PlaybackManifestPatchMismatch:"02-62",PlaybackEmptyMediaPlaylist:"02-63",PlaybackNonContiguousCompositionTrack:"02-64",PlaybackDecoderNotFound:"02-65",PlaybackDecoderTemporarilyUnavailable:"02-66",PlaybackIncompatibleAsset:"02-67",PlaybackNoCompatibleExternalDisplay:"02-69",PlaybackOutOfMemory:"02-70",PlaybackToneMappingFailed:"02-71",PlaybackVideoCompositorFailed:"02-72",NetworkUnknown:"03-00",NetworkNoInternet:"03-01",NetworkRequestTimeout:"03-02",NetworkUnableToResolveHost:"03-03",NetworkResourceNotFound:"03-04",NetworkExpiredUrl:"03-05",NetworkUrlResolutionFailed:"03-06",NetworkDownloadErrorIdManifest:"03-07",NetworkDownloadErrorIdSidx:"03-08",NetworkDownloadErrorIdContent:"03-09",NetworkDownloadErrorIdInitialization:"03-10",NetworkDownloadErrorIdXlink:"03-11",NetworkHttpRequestFailed:"03-12",NetworkMaxRetriesExceeded:"03-13",NetworkSegmentMissing:"03-14",NetworkHttp400BadRequest:"03-400",NetworkHttp401Unauthorized:"03-401",NetworkHttp402PaymentRequired:"03-402",NetworkHttp403Forbidden:"03-403",NetworkHttp404NotFound:"03-404",NetworkHttp405MethodNotAllowed:"03-405",NetworkHttp406NotAcceptable:"03-406",NetworkHttp407ProxyAuthenticationRequired:"03-407",NetworkHttp408RequestTimeout:"03-408",NetworkHttp409Conflict:"03-409",NetworkHttp410Gone:"03-410",NetworkHttp411LengthRequired:"03-411",NetworkHttp412PreconditionFailed:"03-412",NetworkHttp413PayloadTooLarge:"03-413",NetworkHttp414URITooLong:"03-414",NetworkHttp415UnsupportedMediaType:"03-415",NetworkHttp416RangeNotSatisfiable:"03-416",NetworkHttp417ExpectationFailed:"03-417",NetworkHttp418ImATeapot:"03-418",NetworkHttp421MisdirectedRequest:"03-421",NetworkHttp422UnprocessableEntity:"03-422",NetworkHttp423Locked:"03-423",NetworkHttp424FailedDependency:"03-424",NetworkHttp425TooEarly:"03-425",NetworkHttp426UpgradeRequired:"03-426",NetworkHttp428PreconditionRequired:"03-428",NetworkHttp429TooManyRequests:"03-429",NetworkHttp431RequestHeaderFieldsTooLarge:"03-431",NetworkHttp451UnavailableForLegalReasons:"03-451",NetworkHttp500InternalServerError:"03-500",NetworkHttp501NotImplemented:"03-501",NetworkHttp502BadGateway:"03-502",NetworkHttp503ServiceUnavailable:"03-503",NetworkHttp504GatewayTimeout:"03-504",NetworkHttp505HTTPVersionNotSupported:"03-505",NetworkHttp506VariantAlsoNegotiates:"03-506",NetworkHttp507InsufficientStorage:"03-507",NetworkHttp508LoopDetected:"03-508",NetworkHttp510NotExtended:"03-510",NetworkHttp511NetworkAuthenticationRequired:"03-511",ContentProtectionUnknown:"04-00",ContentProtectionConcurrentStreamLimitExceeded:"04-01",ContentProtectionEntitlementRefused:"04-02",ContentProtectionLicenseExpired:"04-03",ContentProtectionBadLicenseRequest:"04-04",ContentProtectionLicenseServerTimeout:"04-05",ContentProtectionInsufficientHDCPSupport:"04-06",ContentProtectionGeoRestricted:"04-07",ContentProtectionParentalControlRestricted:"04-08",ContentProtectionCDNUnauthorized:"04-09",ContentProtectionInvalidAccessToken:"04-10",ContentProtectionKeySystemNoKeys:"04-11",ContentProtectionKeySystemNoAccess:"04-12",ContentProtectionKeySystemNoSession:"04-13",ContentProtectionKeySystemNoConfiguredLicense:"04-14",ContentProtectionKeySystemCertificateRequestFailed:"04-15",ContentProtectionKeySystemCertificateUpdateFailed:"04-16",ContentProtectionKeySystemSessionUpdateFailed:"04-17",ContentProtectionKeySystemStatusOutputRestricted:"04-18",ContentProtectionKeySystemStatusInternalError:"04-19",ContentProtectionKeyLoadError:"04-20",ContentProtectionKeyLoadTimeout:"04-21",ContentProtectionCapabilityMediaKeysError:"04-22",ContentProtectionManifestKeySystemUnknown:"04-23",ContentProtectionKeySystemUnavailable:"04-24",ContentProtectionCDMCreationFailed:"04-25",ContentProtectionCDMAttachFailed:"04-26",ContentProtectionCDMServerCertificateRejected:"04-27",ContentProtectionCDMSessionCreationFailed:"04-28",ContentProtectionCDMLicenseRequestFailed:"04-29",ContentProtectionCDMLicenseResponseRejected:"04-30",ContentProtectionManifestMissingDRMInfo:"04-31",ContentProtectionLicenseServerMissing:"04-32",ContentProtectionOfflineSessionRemoved:"04-33",ContentProtectionInitDataTransformationError:"04-34",ContentProtectionServerCertificateRequestFailed:"04-35",ContentProtectionInsufficientHDCPVersion:"04-36",ContentProtectionHDCPVersionCheckFailed:"04-37",AdsUnknown:"08-00",AdsVastParseError:"08-100",AdsInvalidVastSchema:"08-101",AdsVastVersionNotSupported:"08-102",AdsUnexpectedAdType:"08-200",AdsCreativeLinearityMismatch:"08-201",AdsCreativeDurationMismatch:"08-202",AdsCreativeSizeMismatch:"08-203",AdsWrapperVastError:"08-300",AdsVastResponseRedirectTimeout:"08-301",AdsWrapperLimitReached:"08-302",AdsVastResponseEmpty:"08-303",AdsLinearAdDisplayError:"08-400",AdsMediaFileNotFound:"08-401",AdsMediaFileUnavailable:"08-402",AdsUnsupportedMimeType:"08-403",AdsUnableToDisplayMediaFile:"08-405",AdsMezzanineFileMissing:"08-406",AdsMezzanineFileDownloaded:"08-407",AdsRejectedAd:"08-408",AdsInteractiveCreativeError:"08-409",AdsVerificationNodeExecutionError:"08-410",AdsNonLinearAdDisplayError:"08-500",AdsNonLinearAdSizeMismatch:"08-501",AdsNonLinearAdFetchError:"08-502",AdsNonLinearUnsupportedType:"08-503",AdsCompanionAdDisplayError:"08-600",AdsCompanionAdSizeMismatch:"08-601",AdsRequiredCompanionAdError:"08-602",AdsCompanionAdFetchError:"08-603",AdsUndefinedVastError:"08-900",AdsUnknownVpaidError:"08-901",AdsVastDocumentEmpty:"08-999"},At=Object.fromEntries(Object.entries(Nt).map(([e,t])=>[t,e]));const Ot=e=>{return e.autoplay&&Tt.AUDIO_REQUIRED&(!0===(t=e.autoplay)?Tt.ON:!1===t?Tt.OFF:t);var t};function It(e,t,n){const r="boolean"==typeof n;if("boolean"!=typeof n&&(n=!!e.hasState(rt)||e.paused),function(e,t,n){const r=e.poll(t?J:ee,{forced:n});return r&&r.defaultPrevented}(e,n,r))return Promise.resolve();if(!n)return e.hasState(nt)?(e.setState(rt,!0),e.setState(nt,!1),Promise.resolve()):Promise.resolve(e.pause());if(0==e.reaper)return Promise.resolve();const o=e.reaper.get("__pending_play");return e.paused||o?o?(o.src!==Rt(e.original_src)&&Lt(e),o):(function(e){return(0==e.networkState||0==e.readyState)&&e.currentSrc==Rt(e.original_src)}(e)&&Lt(e),function(e){const t=e.hasState($e),n=t&&Ot(e.opts);n&&(e.muted&&e.toggleMute(!1),0==e.volume&&(e.volume=1));t&&e.setState($e,!1);return e.play().then(()=>{e.hasState(rt)&&e.togglePlay(!1)}).catch(r=>{if(console.warn(t?n?"[flowplayer/play] autoplay audio required\n%s":"[flowplayer/play] attempting muted autoplay\n%s":"",r.message,"\ninstance:",e),t&&!n)return e.muted=!0,e.play()})}(e)):(e.setState(rt,!1),!e.hasState(Me)&&e.setState(nt,!0),Promise.resolve())}function Lt(e){e.opts.is_native&&(e.hasState(He)||(e.hasState(We)||e.emit(te),e.setState(We,!0),e.load()))}function Rt(e){const t=document.createElement("a");return t.href=e,t.href}function Ct(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}function Pt(e){const t=document.createElement("a");t.href=e;const n=t.pathname&&t.pathname.split(".");return n.length>1&&n[n.length-1]}function Ft(e){switch(e){case"video/mpd":return"application/dash+xml";case"video/m3u8":return"application/x-mpegurl";default:return e}}const Mt=e=>{var{src:t}=e,n=Ct(e,["src"]);return[Object.assign({src:t,type:t?Ft("video/"+Pt(t)):""},n)]};function Dt(e){return Mt({src:e})}function Ut(e){var{src:t,type:n}=e,r=Ct(e,["src","type"]);return t&&n?[Object.assign({src:t,type:n},r)]:n&&!t?[Object.assign({type:n},r)]:Mt(Object.assign({src:t},r))}const xt="health:record",Ht="rebuffer",Wt="rebuffer:ended",qt="display",Gt="insights:ttff",Bt="insights:time_to_first_frag_loaded",Vt="insights:watched_interval",jt="flowplayer:feature";var Kt=Object.freeze({__proto__:null,RECORD:xt,REBUFFER:Ht,REBUFFER_ENDED:Wt,DISPLAY:qt,TIME_TO_FIRST_FRAME:Gt,TIME_TO_FIRST_FRAGMENT_LOADED:Bt,WATCHED_INTERVAL:Vt,FEATURE_USAGE:jt});const zt={All:1,High:.1,Medium:.01,Low:.001,None:0};function Qt(e,{feature_name:t,behavior:n,sample_rate:r}){t&&(r||(r=zt.All),e.emit(jt,{feature_name:t,behavior:n,sample_rate:r}))}var Yt;function Xt(e,t,n,r={safari:!1}){const o=function(e){return"string"==typeof e?Dt(e):Array.isArray(e)||"object"!=typeof e?e.reduce(function(e,t){return"string"==typeof t&&(t=Dt(t)),"object"!=typeof t||Array.isArray(t)||(t=Ut(t)),e.concat(t)},[]):Ut(e)}(n);return function(e){[Ge,rt,nt,Me,Ue,We,He,Je].forEach(t=>e.setState(t,!1)),e.setState(qe,!0)}(e),Array(...Array(o.length)).map((e,t)=>t).some(n=>{const i=o[n];if(Yt.Ok==function(e,t,n){e.emit(D,n),t.playback_token&&"string"==typeof n.src&&n.src.startsWith("https://")&&(n.src=function(e,t){const n=new URL(e);return n.pathname=`/pt:${t}${n.pathname}`,n.toString()}(n.src,t.playback_token),Qt(e,{feature_name:"signed-urls",behavior:"used",sample_rate:.1}));"string"==typeof n.src&&(e.original_src=n.src);const r=function(e,t,n){return e.plugins.filter(e=>{return(t=e)&&"wants"in t;var t}).find(e=>e.wants(n.src||"",n,t))}(e,t,n);return e.setOpts({is_native:!r}),r?(r.onload(t,e.root,e,n),Yt.Ok):Yt.Err}(e,t,i)||Yt.Ok==function(e,t,n,r={safari:!1}){var o;/^audio\//.test(n.type||"")&&e.emit(Y);t.start_time&&(n.src=n.src+"#t="+t.start_time);if(""==e.canPlayType(n.type||""))return Yt.Err;if(n.drm&&(!n.drm["com.apple.fps.1_0"]||!r.safari))return Yt.Err;"string"==typeof n.src&&(e.preload=null!==(o=t.preload)&&void 0!==o?o:"auto",e.src=n.src);return Yt.Ok}(e,t,i,r))return!0;n==o.length-1&&"string"==typeof i.src&&(e.src=i.src)}),e}!function(e){e[e.Err=0]="Err",e[e.Ok=1]="Ok"}(Yt||(Yt={}));const $t=[U,C,D,j];var Zt;function Jt(e,t,n){return isNaN(e.duration)||isNaN(e.currentTime)?{}:(t.offset+=n,0==t.offset?en(e,t):(t.timer&&clearTimeout(t.timer),t.timer=setTimeout(function(){0!=e.reaper&&(e.currentTime=function(e,t,n=0){return Math.max(Math.min(t,e),n)}(e.currentTime+t.offset,e.duration),t.timer=0,en(e,t))},1e3),function(e,t){e.setState(lt,!0),e.setState(Zt.BACKWARD,t.offset<0),e.setState(Zt.FORWARD,t.offset>0)}(e,t),e.emit(V,t),t))}function en(e,t){t.timer&&clearTimeout(t.timer),t.timer=t.offset=0,function(e){e.setState(Zt.FORWARD,!1),e.setState(Zt.BACKWARD,!1),e.setState(lt,!1)}(e)}function tn(){if("undefined"==typeof document)return!1;const e=document.documentElement;return e&&"rtl"==e.getAttribute("dir")}function nn(...e){const t=document.createElement("div");return 0==e.length||t.classList.add(...e),t}function rn(e,t,n){const r=function(e){return Array.isArray(e)?e.slice(0):e.split(".")}(t);for(;r.length;){if(null==e)return n;const t=r.shift();if("string"!=typeof t)return n;e=e[t]}return null==e?n:e}function on(e){const t="number"==typeof e?e:parseInt(e,10);return(t>9?"":"0")+t}function sn(e){if(isNaN(e)||e>=Number.MAX_SAFE_INTEGER)return"";const t=e<0?"-":"";e=Math.round(Math.abs(e));const n=Math.floor(e/3600);let r=Math.floor(e/60);return e-=60*r,n>=1?(r-=60*n,t+n+":"+on(r)+":"+on(e)):t+on(r)+":"+on(e)}!function(e){e.FORWARD="forward",e.BACKWARD="backward"}(Zt||(Zt={}));const an=navigator.languages||[navigator.language];function ln(e,t,n,r){if((r=r||0)>=e.length)return n;return rn(e[r],t,ln(e,t,n,r+1))}function cn(e,t,n){const r={};return n=t.lang||n,e[n]&&(r[n]=e[n]),function(){try{return an.reduce((e,t)=>~t.indexOf("-")?e.concat(t,t.split("-")[0]):e.concat(t),[])}catch(e){return[]}}().forEach(function(t){e[t]&&!r[t]&&(r[t]=e[t])}),Object.values(r)}const un=[1e7]+""+-1e3+-4e3+-8e3+-1e11,dn=()=>"undefined"==typeof crypto?"":un.replace(/[018]/g,e=>(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)),pn="flowplayer/uuid";let fn="";!function(){let e=!1;try{const t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("testPassive",null,t),window.removeEventListener("testPassive",null,t)}catch(e){}}();const hn=["touchstart","touchmove"];function mn(e,t){const n=new CustomEvent(e,{detail:t,cancelable:!0});return t&&Object.defineProperty(n,"data",{get:()=>t}),n}function yn(e,t,n){const r=mn(t,n);return e.dispatchEvent(r),e}function gn(e,t,n){const r=mn(t,n);return e.dispatchEvent(r),r}function En(e,t,n,r){Array.isArray(t)?t.forEach(t=>vn(e,t,n,r)):vn(e,t,n,r)}function vn(e,t,n,r){if(o=t,!~hn.indexOf(o))return e.addEventListener(t,n,r),e;var o;const i=Object.assign(r||{},{passive:!0});return e.addEventListener(t,n,i),e}function _n(e,t,n,r){return En(e,t,n,Object.assign(r||{},{once:!0}))}class PlayerStorage{constructor(e,t){this.implementation=e,t&&t.keys().forEach(e=>{"string"==typeof t.implementation[e]&&this.implementation.setItem(e,t.implementation[e])})}keys(){var e;const t=[];for(var n=0;n<this.implementation.length;n++)(null===(e=this.implementation.key(n))||void 0===e?void 0:e.startsWith("flowplayer/"))&&t.push(this.implementation.key(n));return t}removeItem(e){try{this.implementation.removeItem(`flowplayer/${e}`)}catch(e){}}getItem(e){try{return this.implementation.getItem(`flowplayer/${e}`)}catch(e){return null}}setItem(e,t){try{this.implementation.setItem(`flowplayer/${e}`,t)}catch(e){}}clear(){try{this.keys().forEach(e=>this.implementation.removeItem(e))}catch(e){}}get length(){try{return this.keys().length}catch(e){return 0}}key(e){try{return this.implementation.key(e)}catch(e){return null}}}class InMemoryStorage{constructor(){this.pairs=[]}get length(){return this.pairs.length}clear(){this.pairs=[]}getItem(e){var t;return(null===(t=this.pairs.find(t=>t[0]===e))||void 0===t?void 0:t[1])||null}key(e){return this.pairs[e][0]||null}removeItem(e){this.pairs=this.pairs.filter(t=>t[0]!==e)}setItem(e,t){this.removeItem(e),this.pairs.push([e,t])}}const wn={preload:"auto",rtl:!1,controls:!0},Sn=["muted","preload"];function bn(e,r,o){let i;o.live_state={dvr_window:void 0,get dvr(){return i},set dvr(t){i=t;const n=!(!e.live||t);o.hasState(et)!=n&&o.setState(et,n)}},o._storage=new PlayerStorage(["localStorage","sessionStorage"].map(e=>{try{const t=window[e];return t.getItem(""),t}catch(t){return console.debug(`Access to window.${e} denied, trying next option`),null}}).find(e=>!!e)||new InMemoryStorage),o.toJSON=function(){return{duration:o.duration,volume:o.volume,currentTime:o.currentTime,states:o.root.className}},o.setSrc=function(t){return Xt(o,e,t,n())},o.playerState=o.playerState||{},o.setState=function(e,t){if(o.playerState[e]===!!t)return o;const n=Object.assign({},o.playerState,{[e]:t});return o.playerState=n,yn(o,Z,o.playerState),o},o.createComponents=function(...e){return Array.from({length:e.length}).map((t,n)=>wt(this,e[n]))},o.hasState=function(e){return!!o.playerState[e]},o.transitionState=function(e,t,n){!o.hasState(e)&&o.hasState(t)||(n=0),n&&o.setState(Ze,!0),o.setState(t,!1),o.setState(e,!0),n&&setTimeout(function(){o.setState(Ze,!1)},n)},o.emit=(e,t)=>(yn(o,e,t),o),o.on=(e,t)=>(En(o,e,t),o),o.once=(e,t)=>(_n(o,e,t),o),o.off=(e,t)=>{var n,r;return n=e,r=t,o.removeEventListener(n,r),o},o.poll=(e,t)=>gn(o,e,t),o.togglePlay=function(e){return o.hasState(Ye)?Promise.reject():It(o,0,e)},o.toggleMute=function(e){e=null==e?!o.muted:!!e,o.muted=e,o.muted||o.volume||(o.volume=1),yn(o,k)},o.toggleDisable=function(e){e=null==e?!o.disabled:!!e,o.setState(Be,e),o.disabled=e},o.destroy=function(){o.pause();const e=t.indexOf(o);~e&&t.splice(e,1),setTimeout(function(){o.setSrc([]),o.reaper&&o.reaper.clear(),yn(o,U),o.setState(pt,!0)},0)},o.setAttrs=function(e){return Sn.forEach(t=>{if(!(t in e))return;const n=e[t];n?o.setAttribute(t,n.toString()):o.removeAttribute(t)}),o},o.opt=function(t,n){return n=void 0===n?rn(wn,t):n,rn(e,t,n)},o.i18n=function(e,t){if(!o.reaper)return"";const n=o.reaper.get("translations");return n?ln(n,e,t||""):t||""},o.setOpts=function(t){Object.assign(e,t),e.live&&!o.hasState(Qe)&&(o.setState(et,!0),yn(o,G)),"disabled"in t&&void 0!==t.disabled&&o.toggleDisable(t.disabled),"muted"in t&&void 0!==t.muted&&o.toggleMute(t.muted),"dvr"in e&&(o.live_state.dvr=o.opt("dvr")),o.setState(Ke,o.opt("rtl",function(e){if(!e)return tn();const t=e.getAttribute("dir");return t?"rtl"==t:tn()}(r))),o.setState(Qe,!!e.live),o.setState(tt,"string"==typeof e.poster&&e.poster.length>0),o.setState(ct,!!e.seekable),o.setState(dt,0==e.controls),r.style.backgroundImage=o.hasState(tt)?"url('"+e.poster+"')":"",yn(o,$,e)},o.renderPlugin=function(e){gn(o,Q,e).defaultPrevented||o.root.appendChild(e)};const s={offset:0,timer:0};var a,l;l=s,(a=o).on($t,function(){en(a,l)}),o.enqueueSeek=function(e){if(0!=o.opts.seekable&&!(1==o.opts.disabled&&e>0))return Jt(o,s,e)},o.deviceId=function(){return function(e){if(fn)return fn;try{const t=e.getItem(pn);if(t)return t;const n=dn();return e.setItem(pn,n),n}catch(e){return fn=dn()}}(o._storage)}}var kn="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};function Tn(){return"undefined"!=typeof window?window:void 0!==kn?kn:{}}const Nn=["localhost","127.0.0.1","0.0.0.0","s.codepen.io","cdpn.io","try.flowplayer.com"];function An(e,t){return!!~Nn.indexOf(e)||e.indexOf(t)===e.length-t.length}An.check_whitelist=function(e){return!!~Nn.indexOf(e)};const On="production";function In(e,t){const n={valid_jwt:!1,raw:"",data:{acl:0},exp:0};let r={c:"{}",exp:0};t=t||{};try{r=vt(e),n.valid_jwt=!0}catch(e){}return n.raw=e,n.data=JSON.parse(r.c),n.exp=r.exp,t.require_valid_token&&In.validate(n),n}var Ln;function Rn(e){return{grant:e,is_granted:t=>(e&t)===t}}function Cn({root:e,video:t,data:n}){t&&t.destroy(),console.error(new Error(n.details||n.reason)),e.innerHTML="",e.classList.remove("flowplayer"),e.classList.add("flowplayer-fatal"),e.style.removeProperty("background-image");const r=document.createElement("h2");r.textContent="Playback Error";const o=document.createElement("p");o.textContent="Are you the site owner?";const i=document.createElement("a");i.classList.add("troubleshoot"),i.target="_blank",i.href="https://docs.flowplayer.com/troubleshooting/player#"+n.reason,i.textContent="Troubleshoot?";const s=document.createElement("img");s.src="https://flowplayer.com/user/pages/images/logo-white.png",s.alt="Flowplayer Logo",e.append(r,o,i,s)}function Pn(e){return t=>{setTimeout(function(){if(!t.defaultPrevented&&!t.prevented)return e(t)},0)}}In.validate=function(e){if("string"==typeof e&&(e=In(e)),!e||!e.raw){if(An.check_whitelist(window.location.hostname)||"dev"===On.toString())return!0;throw new Error("No token provided in configuration")}if(!e.valid_jwt)throw new Error("Invalid token provided");const t=window.location.hostname,n=An.bind(null,t);if("dev"!==On.toString()&&e.data.domain&&e.data.domain.length&&!e.data.domain.some(n))throw new Error("Domain not allowed");if("dev"!==On.toString()&&1e3*e.exp-Date.now()<0)throw new Error("Expired token");return!0},In.id=function(e){if(e)return"string"==typeof e&&(e=In(e)),e.data.id},function(e){e[e.ADS=2]="ADS",e[e.ANALYTICS=4]="ANALYTICS",e[e.NO_METERING=8]="NO_METERING",e[e.DEVELOPER_PLAN=16]="DEVELOPER_PLAN",e[e.WOWZA_VIDEO=32]="WOWZA_VIDEO"}(Ln||(Ln={})),Rn.of=Rn,Rn.from_token=function(e){const t=In(e,{require_valid_token:!0});return Rn.of(t.data.acl)},Rn.permissions=Ln;const Fn="is-casting",Mn="has-casted";function Dn(e,t){if(!e.parentElement)return;const n=e.clientWidth/e.parentElement.clientWidth*100/2;e.style.left=t-n+"%",e.style.display="block"}function Un(e,t){if(isNaN(e.duration))return;const n=e.buffered;n.length&&(t.style.width=Math.min(n.end(n.length-1)/e.duration*100,100)+"%")}function xn(e,t){e.style.width="0",t.style.display="none"}function Hn(e,t){const n=e.seekable;if("object"!=typeof e.opts||0==n.length)return{head:0,tail:0};const r=Gn(e),o=t||e.live_state.dvr_window;return{head:r,tail:"number"!=typeof o||r-o<0?n.start(0):r-o}}function Wn(e){return e.opt("live",!1)||e.duration>=Number.MAX_SAFE_INTEGER}function qn(e){return isFinite(e.duration)?e.duration:0==e.seekable.length?0:Hn(e).head}function Gn(e){var t;const n=e.seekable;return n.length?e.hasState("is-chromecast-playing")||!(null===(t=e.hls)||void 0===t?void 0:t.liveSyncPosition)?n.end(n.length-1):e.hls.liveSyncPosition:0}function Bn(e,t,n){if(!t.seekable||0==t.seekable.length)return;Dn(n,e);const r=Hn(t),o=(100-Math.max(0,Math.min(e,100)))/100*(r.head-r.tail);n.innerText="-"+sn(o)}function Vn(e){e.currentTime=Hn(e).tail}function jn(e){try{e.dvr_offset=0,e.currentTime=Gn(e)}catch(e){console.warn("failed to seek to now: %j",e)}}function Kn(e,t){e/=100,t.currentTime=function(e,t){if(t>1||t<0)return console.warn("cannot calculate a percent outside of range(0..1)"),0;const n=Hn(e);return n.tail+t*(n.head-n.tail)}(t,e)}function zn(e,t){e.style.width="0",t.style.display="none"}function Qn(e,t){const n=t.clientWidth;t.classList.toggle(Ve,n<600),t.classList.toggle(je,n<400)}function Yn(e,t,n){let r=!0;t.classList.add("flowplayer"),Qn(0,t),En(n,b,()=>{if(!n.hasState(We)&&!n.hasState(He)&&e.is_native&&"none"!==e.preload)return"metadata"===e.preload?(n.setState(We,!0),n.emit(te)):void Lt(n)}),En(n,v,()=>{e.is_native&&"metadata"===e.preload&&n.paused&&n.emit(I)}),En(n,[b,y],function(){Qn(0,t)}),En(n,Z,function(){Object.entries(n.playerState).forEach(function([e,n]){t.classList.toggle(e,n)})}),En(n,S,function(){n.setState(Xe,!n.hasState(Fn)&&!n.hasState(qe)&&n.readyState<3)}),En(n,L,function(t){const r=n.original_src;Pn(()=>{if(r===n.original_src){if(n.setState(ze,!0),_n(n,S,function(){n.setState(ze,!1),r===n.original_src&&n.setState(qe,!e.loop&&!!e.rewind&&n.paused)}),e.loop)return n.togglePlay(!0);e.rewind&&(n.currentTime=0)}})(t)}),En(n,[C,R],function(e){n.setState(Ge,e.type==C)}),En(n,K,function(e){setTimeout(()=>{e.defaultPrevented||(n.currentTime=e.detail.currentTime)},0)}),En(n,L,function(){n.setState(Me,!1),r=!0}),En(n,w,()=>{if(!n.opts.live||!n.opts.is_native)return;const e=n.seekable;0!=e.length&&n.emit("dvr/window",e.end(e.length-1)-e.start(0))}),En(n,_,function(){n.setState(He,!0),n.setState(We,!1)}),En(n,A,()=>{n.setState(nt,!0)}),En(n,[O,I,b],function(t){if(!n.hasState(Ge)&&(t.type!=I||e.autoplay||n.setState(Xe,!1),t.type!=b||"none"!=n.opt("preload")||e.autoplay)){if(t.type==b&&e.autoplay)return _n(n,N,function(){n.setState(Xe,!1)});t.type!=O||n.hasState(He)||n.setState(We,!0),n.setState(ze,!1),n.setState(Xe,t.type==O)}}),En(n,[N,T],function(t){setTimeout(()=>{const e=new CustomEvent("flowplayer/"+t.type,{detail:n});document.dispatchEvent(e)},0);const o=t.type==N,i=n.currentTime==n.duration,s=o&&r&&e.autoplay||n.hasState(Xe);if(o&&(n.started=!0,r=!1),n.setState(Xe,!1).setState(nt,!1),!o&&n.setState(rt,!1),i)return;const a=o?Me:Ue,l=o?Ue:Me;n.transitionState(a,l,s?0:300),!n.hasState(qe)||n.root.classList.contains("ad-hide-first-frame")||n.root.classList.contains("preroll-ios")||function(e,t){if(!e.hasState(Qe)||![void 0,0,-1].includes(t)||!e.seekable.length||e.hasState(Mn))return e.setState(qe,!1);e.once(R,()=>e.setState(qe,!1)),0===t?Vn(e):jn(e)}(n,e.start_time)})}const Xn=[0].concat(Array.from({length:100}).map((e,t)=>(t+1)/100));function $n(){return t.find(e=>e.hasState(Fn))}const Zn=.5625;function Jn(e){if("number"==typeof e&&!isNaN(e))return Number(e);if("string"==typeof e){const t=e.split(":");return Number(t[1])/Number(t[0])}return e}class ExplorerPlan{constructor(){this.cleanUp=this.cleanUp.bind(this),this.render=this.render.bind(this),this.wireUp=this.wireUp.bind(this)}init(e,t,n){this.root=t,this.player=n,this.wireUp()}wireUp(){var e,t;this.cleanUp(),null===(e=this.player)||void 0===e||e.once(N,this.render),null===(t=this.player)||void 0===t||t.once(L,this.wireUp)}cleanUp(){var e,t,n,r;null===(t=null===(e=this._logo)||void 0===e?void 0:e.parentElement)||void 0===t||t.removeChild(this._logo),null===(n=this.player)||void 0===n||n.off(N,this.render),null===(r=this.player)||void 0===r||r.off(L,this.wireUp)}render(){var e,t,n;null===(t=null===(e=this._logo)||void 0===e?void 0:e.parentElement)||void 0===t||t.removeChild(this._logo);const r=(null===(n=this.root)||void 0===n?void 0:n.querySelector(".fp-ui"))||this.root;if(!r)return;const o=this._logo=document.createElement("a");o.href="https://explorer.flowplayer.com",o.target="_blank",Object.entries(er).forEach(([e,t])=>{o.style.setProperty(e,t,"important")}),r.appendChild(o)}}ExplorerPlan.pluginName="explorer-plan";const er={display:"block",opacity:"1",visibility:"visible",width:"33%","padding-top":"9%",position:"absolute","z-index":"9999",bottom:"25%",left:"10%","background-size":"cover","background-image":"url(https://static.flowplayer.com/explorer/explorer.svg)"},tr="flowplayer/"+N;function nr(e,t){const n=[];e.addEventListener("contextmenu",r=>{const o=r.timeStamp;for(n.push(o);n.length>3;)n.shift();n.length>=3&&n.every(e=>e-o<3e3)&&(console.debug("flowplayer/debug rendering info"),function(e,t){var n;!function(e){const t=e.querySelector(".debug-info");null==t||t.remove()}(e);const r=document.createElement("div");r.classList.add("debug-info");const o=rr("flowplayer.version","3.31.1");r.append(o);const i=null===(n=null==t?void 0:t.hls)||void 0===n?void 0:n.constructor;if(i&&i.version){const e=rr("hls.version",i.version);r.append(e)}e.appendChild(r)}(e,t))})}const rr=(e,t)=>{const n=document.createElement("div");n.classList.add("row",e);const r=document.createElement("span");r.classList.add("attr"),r.textContent=e;const o=document.createElement("span");return o.textContent=t,o.classList.add("value"),n.append(r,o),n};function or(e,t){const n=function(){try{return localStorage.getItem("flowplayer/debug")}catch(e){return""}}(),r=(r,...o)=>{try{const i=(null==t?void 0:t.debug)||n;i&&e.match(i)&&console.log(`flowplayer/${e} -- ${r}`,...o)}catch(e){console.warn(e)}};return r.log=r,r}const ir="without_recovery",sr="off";class FlowplayerError extends Error{static getErrorKey(e){return e in At?At[e]:At["00-00"]}constructor(e,t,n={}){super(e),this.message=e,this.flowplayerErrorCode=t,this.config=n,this.id=dn(),this.isFatal=!!n.isFatal,this.errorKey=FlowplayerError.getErrorKey(this.flowplayerErrorCode)||"unknown"}toJSON(){return{message:this.message,flowplayer_error_code:this.flowplayerErrorCode,id:this.id,root_error_id:this.config.rootErrorId,resource:this.config.resource,is_fatal:this.isFatal,is_retry:!!this.config.isRetry}}}const ar=or("core/retry");function lr(e,t){const n={pending:void 0,count:0};e.on(ne,r=>{var i,s,a,l,c;const u=null===(i=r.detail)||void 0===i?void 0:i.error;u.config.isRetry=!!n.count,void 0===n.pending&&(null===(a=null===(s=u.config)||void 0===s?void 0:s.retryOpts)||void 0===a?void 0:a.retry)!==sr&&(t.retry||(null===(c=null===(l=u.config)||void 0===l?void 0:l.retryOpts)||void 0===c?void 0:c.retry))&&(++n.count,n.pending=function(e,t,n){var r,i;return setTimeout(()=>{var r;e.hasState(pt)||(t.pending=void 0,(null===(r=n.config.retryOpts)||void 0===r?void 0:r.retry)!==ir&&e.emit(B),e.emit(o,{error:n}),ar("%s try",t.count))},null!==(i=null===(r=n.config.retryOpts)||void 0===r?void 0:r.retryTimeout)&&void 0!==i?i:3e3*t.count)}(e,n,u))}),e.on(N,()=>{n.count=0}),e.on([D,B],e=>{e.type===D&&(n.count=0),clearTimeout(n.pending),n.pending=void 0}),e.on(o,Pn(()=>{e.load()}))}const cr=[te,i,D];function ur(e){try{return!!new URL(e)}catch(e){return!1}}const dr=navigator;function pr(e){var t,n;const r=null===(t=e.hls)||void 0===t?void 0:t.bandwidthEstimate;return r?1e-6*r:(null===(n=dr.connection)||void 0===n?void 0:n.downlink)||-1}function fr(e,t){return async function(e,t){try{await fetch(e,{body:t,method:"POST",mode:"no-cors"})}catch(e){}}(e,JSON.stringify({events:t}))}const hr=e=>{switch(e){case!0:return Tt.ON;case!1:return Tt.OFF;default:return e}};function mr(){try{const e=window.location!==window.parent.location?document.referrer:document.location.href;return"string"==typeof e&&e.slice(0,200)}catch(e){return!1}}const yr=[],gr="https://ihi.flowplayer.com/v1/health/events";function Er(e){if(e.suspended)return;const t=yr.slice(0);yr.length=0,0!=t.length&&(e.logger.log(`:dispatch events={${t.length}}`),fr(function(){try{return"undefined"==typeof window?gr:window.__FLOWPLAYER_INSIGHTS_URL?window.__FLOWPLAYER_INSIGHTS_URL:gr}catch(e){return gr}}(),t))}async function vr(e,t,n){const r=await wr();yr.push(Object.assign(t,r)),e.logger.log(":enqueue",t.event,t),yr.length<10&&!n||Er(e)}const _r=()=>{var e,t;try{const n=window;return null===(t=null===(e=null==n?void 0:n.google)||void 0===e?void 0:e.ima)||void 0===t?void 0:t.VERSION}catch(e){return}},wr=async()=>({client_time:Date.now()}),Sr=(e,t)=>Object.assign(e,{detail:t}),br=(e,{event:t,media_session_id:n,session_id:r,play_range_id:o})=>({event:t,media_session_id:n,session_id:r,play_range_id:o,device_id:e.deviceId(),version:"3.31.1",commit:"9d05f801130865bddda1eabb9d55395598f96065",ima_sdk_version:_r(),preload:e.opt("preload"),autoplay:hr(e.opt("autoplay")),live:e.opt("live"),dvr:!!e.live_state.dvr,source:e.original_src,downlink_mbs:pr(e),page_url:mr(),player_id:e.opt("metadata.player_id"),media_id:e.opt("metadata.media_id")||e.opt("metadata.stream_target_id"),site_id:e.opt("metadata.site_id"),category_id:e.opt("metadata.category_id"),sitegroup_id:e.opt("metadata.sitegroup_id"),token:e.token,plugins:e.plugins.map(e=>e.constructor.name).sort((e,t)=>e.localeCompare(t)),current_time:e.currentTime,external_media_id:e.opt("external_media_id")}),kr=e=>({bitrate:null==e?void 0:e.bitrate,resolution:null==e?void 0:e.attrs.RESOLUTION,frame_rate:null==e?void 0:e.attrs["FRAME-RATE"]});function Tr(e,t,n,r){const o=br(t,e.eventInfo(n)),{before:i,after:s}=r,a=((e,t,n)=>Object.assign(e,{state:{before:t,after:n}}))(o,kr(i),kr(s));vr(e,a)}const Nr=(e,t)=>{let n=null;return(...r)=>{null!==n&&(clearTimeout(n),n=null),n=setTimeout(()=>t(...r),e)}};var Ar;!function(e){e[e.Starting=0]="Starting",e[e.ConfigFinalized=1]="ConfigFinalized",e[e.TimerStartedWithAutoplay=2]="TimerStartedWithAutoplay",e[e.TimerStartedWithUserGesture=3]="TimerStartedWithUserGesture",e[e.MetricReported=4]="MetricReported"}(Ar||(Ar={}));const Or=[s,h];class TimeToFirstFrame{constructor(e=Ar.Starting,t=!1){this.state=e,this.loadedAd=t}reset(){this.state=Ar.Starting,this.loadedAd=!1,this.start=void 0,this.end=void 0,this.adDetails=void 0}adInfo(){const{ad_tag_id:e,vast_ad_id:t}=this.adDetails||{};return{ad_tag_id:e,vast_ad_id:t}}toJSON(){return Object.assign({ad_was_requested:this.loadedAd,ms_to_first_frame:Math.round(this.end&&this.start?this.end-this.start:-1)},this.adInfo())}startTimer(e){this.state==Ar.ConfigFinalized&&(this.state=e,this.start=performance.now())}hasStarted(){return[Ar.TimerStartedWithAutoplay,Ar.TimerStartedWithUserGesture].includes(this.state)}stopTimer(e){this.hasStarted()&&(this.end||(this.end=performance.now()),this.state=Ar.MetricReported,e())}}function Ir(e){return Math.round(1e3*e)/1e3}class EWMA{constructor(e){this.tickInterval=e,this.ewma=0,this.startTime=Date.now()}decay(){const e=Date.now()-this.startTime;return Math.pow(2,-e/(4*this.tickInterval))}update(e){const t=this.decay();return this.ewma=t*this.ewma+(1-t)*e,this.ewma}toJSON(){return this.ewma}}const Lr={skipUnreliableSegments:!0};class WatchedState{constructor(e){this.player=e,this.marchingInterval=void 0,this.lastWatchedPoint=void 0,this.watchedSum=0,this.lastReportedSum=0,this.ewmaTickWatched=new EWMA(WatchedState.AccuracyMilliseconds)}reset(){this.onNotWatching(),this.watchedSum=0,this.lastReportedSum=0,this.lastWatchedPoint=void 0}onNotWatching(){this.marchingInterval&&(this.updateWatched(),this.marchingInterval=clearInterval(this.marchingInterval))}onWatching(){this.marchingInterval||(this.lastWatchedPoint=this.createWatchedPoint(),this.marchingInterval=setInterval(()=>{this.updateWatched()},WatchedState.AccuracyMilliseconds))}createWatchedPoint(){return{currentTime:this.player.currentTime,paused:this.player.paused}}updateWatched(){const e=this.createWatchedPoint();this.lastWatchedPoint&&this.calculateTimeWatched(this.lastWatchedPoint,e),this.lastWatchedPoint=e}calculateTimeWatched(e,t){var n,r;const o=t.currentTime-e.currentTime,i=this.ewmaTickWatched.update(o);if(!(o<0)&&!(!1!==(null===(r=null===(n=this.player.opts)||void 0===n?void 0:n.health)||void 0===r?void 0:r.skipUnreliableSegments)&&1e3*o>1.3*WatchedState.AccuracyMilliseconds)&&(this.watchedSum+=o,this.watchedSum!=this.lastReportedSum&&(this.watchedSum>this.lastReportedSum+WatchedState.ReportingIntervalSeconds||this.player.ended))){const e=Ir(i),t={total_watched_seconds:Ir(this.watchedSum),tick_watched_seconds:e,batch_watched_seconds:Ir(this.watchedSum-this.lastReportedSum)};this.lastReportedSum=this.watchedSum,this.player.emit(Vt,t)}}}WatchedState.ReportingIntervalSeconds=5,WatchedState.AccuracyMilliseconds=160;const Rr=dn();class Health{constructor(e,t){let n;this.session_id=Rr,this.suspended=!1,this.logger=or("health",t.opts),this.media_session_id=dn(),this.play_range_id=dn(),this.analyticsLoop=setInterval(()=>Er(this),2e3),t.on(U,()=>clearInterval(this.analyticsLoop)),t.on(N,()=>{n!==this.media_session_id&&(n=this.media_session_id,this.first_playing_event_timestamp=Date.now()),this.play_range_id=dn()});let r=Date.now()-1e3;t.on(S,e=>{if(n!==this.media_session_id)return;const o=Date.now();if(o<r)return;r=Date.now()+5e3;const i=br(t,this.eventInfo(e.type)),s=Sr(i,{duration:(a=t.duration,Number.isFinite(a)?a:a===1/0?-1:void 0)});var a;this.first_playing_event_timestamp&&(Object.assign(s,{ms_since_first_playing:o-this.first_playing_event_timestamp}),this.first_playing_event_timestamp=void 0),vr(this,s)});const o=this;if(t.health={get media_session_id(){return o.media_session_id},set media_session_id(e){o.media_session_id=e},get session_id(){return o.session_id},set session_id(e){o.session_id=e},toggle(e){e?o.resume():o.suspend()}},!Health._UNLOAD_SUBSCRIBED){Health._UNLOAD_SUBSCRIBED=!0;const t=t=>e.instances.forEach(e=>e.emit(t.type));document.addEventListener("visibilitychange",e=>{"hidden"==document.visibilityState&&t(e)}),window.addEventListener("pagehide",t)}}eventInfo(e){return{event:e,media_session_id:this.media_session_id,session_id:this.session_id,play_range_id:this.play_range_id}}suspend(){this.suspended=!0,clearInterval(this.analyticsLoop)}resume(){this.suspended=!1,this.analyticsLoop=setInterval(()=>Er(this),2e3)}init(e,t,n){if(mr().toString().startsWith("data:"))return this.suspend();!function(e){let t=null;const n=()=>{t=null};e.on(O,function(t){e.seeking||e.networkState===e.NETWORK_LOADING&&(e.readyState<HTMLMediaElement.HAVE_CURRENT_DATA||e.emit(Ht))}),e.on(Ht,e=>{t=e}),e.on(I,r=>{if(t){const o=r.timeStamp-t.timeStamp;if(n(),o<31)return;if(o>3e5)return;e.emit(Wt,{rebuffer_duration:o/1e3})}}),cr.forEach(t=>e.on(t,n))}(n),function(e){let t;[I,te].forEach(n=>{e.on(n,n=>{const r=Date.now();switch(n.type){case te:return t=r;case I:if(t)return e.emit(Bt,{ms_since_loading_started:r-t}),t=null}})})}(n),function(e){if(void 0===window.performance)return;const t=new TimeToFirstFrame;e.on(D,()=>{if(!e.opt("metadata.media_id"))return t.reset();t.reset(),t.state=Ar.ConfigFinalized}),e.on(te,()=>{(e.root.classList.contains("ad-hide-first-frame")||e.opt("autoplay"))&&t.startTimer(Ar.TimerStartedWithAutoplay)}),Or.forEach(n=>{e.on(n,()=>{e.opt("autoplay")||t.startTimer(Ar.TimerStartedWithUserGesture)})}),e.on("ad-requested",()=>{t.loadedAd=!0}),e.on(S,()=>{if(!(e.readyState<HTMLMediaElement.HAVE_CURRENT_DATA)){if(e.root.classList.contains("ad-hide-first-frame"))return!t.end&&(t.end=performance.now());switch(t.state){case Ar.TimerStartedWithAutoplay:case Ar.TimerStartedWithUserGesture:return t.stopTimer(()=>e.emit(Gt,t.toJSON()))}}}),e.on("ad-started",n=>{switch(t.end=void 0,t.adDetails=n.detail,t.state){case Ar.TimerStartedWithAutoplay:case Ar.TimerStartedWithUserGesture:return t.stopTimer(()=>e.emit(Gt,t.toJSON()))}})}(n),function(e){const t=new WatchedState(e);e.on(te,()=>t.reset()),e.on(N,()=>t.onWatching()),e.on(Wt,()=>!e.paused&&t.onWatching()),e.on(Ht,()=>t.onNotWatching()),e.on(T,()=>t.onNotWatching()),e.on(C,()=>{e.currentTime>1&&t.updateWatched(),t.onNotWatching()}),e.on(R,()=>{e.paused||t.onWatching()}),e.on(L,()=>t.updateWatched()),e.on("visibilitychange",()=>t.updateWatched())}(n),n.on(qt,e=>{vr(this,br(n,this.eventInfo(e.type)),!0)}),n.on(xt,({detail:e})=>{const t=br(n,this.eventInfo(e.event));Object.assign(t,e.detail||{}),vr(this,t)}),n.on(jt,e=>{if(t=e.detail.sample_rate,!Object.values(zt).includes(t))return console.debug(`sample_rate=${e.detail.sample_rate} is invalid`);var t,r;if(!(0!==(r=e.detail).sample_rate&&Math.random()<=r.sample_rate))return;const o=br(n,this.eventInfo(e.type));vr(this,Sr(o,e.detail))}),[b,v,_,w,O,Ht].forEach(e=>{n.on(e,e=>{vr(this,br(n,this.eventInfo(e.type)))})}),[Wt,Gt,Bt,Vt].forEach(e=>{n.on(e,e=>{const t=br(n,this.eventInfo(e.type));vr(this,Object.assign(t,e.detail))})}),[N,T,C,R,L,g,E,I,te].forEach(e=>{n.on(e,e=>{vr(this,br(n,this.eventInfo(e.type)))})}),n.on(k,Nr(800,e=>{const t=br(n,this.eventInfo(e.type));vr(this,Sr(t,{volume:parseFloat(n.volume.toFixed(2)),muted:n.muted}))})),n.on(y,Nr(800,e=>{const r=br(n,this.eventInfo(e.type));vr(this,Sr(r,{height:t.clientHeight,width:t.clientWidth}))})),n.on("hls/failover",e=>{const t=br(n,this.eventInfo(e.type)),r=e.detail,{reason:o,from:i}=r;vr(this,Sr(t,{reason:o,from:i}))}),n.on(x,({type:e,detail:t})=>{if("hls"===t.plugin)return Tr(this,n,e,t)}),n.on(ne,e=>{const t=br(n,this.eventInfo(e.type)),r=e.detail.error;if(!r)return vr(this,t,!0);return vr(this,Sr(t,r.toJSON()),!0)}),n.on(D,e=>{var t;const r=null===(t=e.detail)||void 0===t?void 0:t.src;if("string"!=typeof r)return;if(!ur(n.original_src))return;if(!ur(r))return;if(r==n.original_src)return;this.media_session_id=dn();vr(this,br(n,this.eventInfo(e.type))),Er(this),n.setOpts({health:Object.assign(Object.assign({},n.opts.health),Lr)})}),n.on("visibilitychange",e=>{vr(this,br(n,this.eventInfo(e.type))),Er(this)})}}function Cr(e,t){return function(e){return e.extensions.reduce((e,t)=>e.find(e=>e.pluginName===t.pluginName)?(console.warn("flowplayer: duplicate plugin %s detected, plugin names should be unique",t.name),e):(e.push(t),e),[])}(e).map(n=>new n(e,t))}function Pr(e,t={}){var n,r,o,i,s,a;switch(e.code){case MediaError.MEDIA_ERR_ABORTED:return new FlowplayerError(null!==(n=e.message)&&void 0!==n?n:"The playback was aborted, typically by the user.",Nt.PlaybackInternalAborted,Object.assign({isFatal:!1,retryOpts:{retry:sr}},t));case MediaError.MEDIA_ERR_NETWORK:return new FlowplayerError(null!==(r=e.message)&&void 0!==r?r:"A network error prevented media from being downloaded.",Nt.NetworkHttpRequestFailed,Object.assign({isFatal:!0},t));case MediaError.MEDIA_ERR_DECODE:return new FlowplayerError(null!==(o=e.message)&&void 0!==o?o:"An error occurred while decoding the media.",Nt.PlaybackVideoDecodeError,Object.assign({isFatal:!0},t));case MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED:return new FlowplayerError(null!==(i=e.message)&&void 0!==i?i:"The media could not be loaded because the format is not supported.",Nt.MediaUnsupportedVideoFormat,Object.assign({isFatal:!0},t));case 5:return new FlowplayerError(null!==(s=e.message)&&void 0!==s?s:"Encrypted content could not be played due to missing keys or unsupported protection scheme.",Nt.ContentProtectionKeySystemNoKeys,Object.assign({isFatal:!0},t));default:return new FlowplayerError(null!==(a=e.message)&&void 0!==a?a:"An unknown playback error occurred.",Nt.PlaybackUnknown,Object.assign({isFatal:!0},t))}}Health.pluginName="health",Health.events=Kt,Health._UNLOAD_SUBSCRIBED=!1;const Fr=function(){const e=Tn(),t=e.flowplayer?e.flowplayer:{extensions:[]};return Array.isArray(t.extensions)||(t.extensions=[]),t}();function Mr(n,o){if("function"==typeof n)return e.push(...[...arguments].filter(e=>"function"==typeof e)),Mr;"string"==typeof o&&(o={src:o}),o||(o={}),o.token||"string"!=typeof window.__FLOWPLAYER_TOKEN||(o.token=window.__FLOWPLAYER_TOKEN);const s="string"==typeof n?document.querySelector(n):n;if(!s)return console.error(new Error("Flowplayer: '"+n.toString()+"' not found"));const a=s.querySelector("video.fp-engine");if(a)return a;const l=function(e){try{return In.validate(e),{success:!0,message:""}}catch(e){return{success:!1,message:e.message}}}(o.token);if(!l.success)return Cn({root:s,data:{reason:"token",details:l.message}});const c=new Map,u=function(e,t){const n=t.querySelector("video"),r=n||(e._video_element_callback?e._video_element_callback(e):document.createElement("video"));return r.classList.add("fp-engine"),r.playsInline=!0,n||t.append(r),r}(o,s);var d;u.reaper=c,u._customElements=_t,Object.defineProperty(u,"token",{value:"string"==typeof o.token?In.id(o.token):"",writable:!1}),u.addEventListener(U,()=>{c.clear(),u.reaper=0,delete u.root}),u.root=s,o.token&&Rn.from_token(o.token).is_granted(Rn.permissions.DEVELOPER_PLAN)&&e.push(ExplorerPlan),!~t.indexOf(u)&&t.push(u),bn(o,s,u),u.setAttrs(o),u.plugins=Cr(Mr,u),Yn(o,s,u),function(e,t,n){if(!window.IntersectionObserver)return;const r={should_resume:!!e.autoplay,locked:!1};En(n,A,function(){r.locked||(r.should_resume=!0)});const o=()=>{if(!e.autoplay)return;if(n.hasState(ut)&&r.should_resume)return n.togglePlay(!0);const t=n.currentSrc;e.autopause||n.hasState(ut)||!r.should_resume||_n(n,F,()=>{e.autoplay&&r.should_resume&&t===n.currentSrc&&n.togglePlay(!0)})},i=()=>{if(!e.autoplay)return;if(!e.is_native)return;if("auto"===e.preload)return;if(n.hasState(ut))return Lt(n);const t=n.currentSrc;_n(n,F,()=>{t!==n.currentSrc||n.readyState>1||!n.paused||Lt(n)})};En(n,D,function(){r.should_resume=!!e.autoplay,n.off(b,i),n.once(b,i),n.off(I,o),n.once(I,o)}),En(n,T,function(){r.locked||(r.should_resume=!1)});const s=new IntersectionObserver(e=>{e.forEach(e=>{setTimeout(()=>{const t=e.intersectionRatio,r=n.hasState(ut);if(n.setState(ut,t>=.2),n.emit(z,{ratio:t}),r===n.hasState(ut))return;const o=n.hasState(ut)?F:M;n.emit(o)},0)})},{threshold:Xn});s.observe(t),n.on(U,()=>s.disconnect()),En(n,F,function(){!r.should_resume||!e.autopause||$n()||n.opts.autoplay&&!n.readyState||n.togglePlay(!0)}),En(n,M,function(){if(!e.autopause||$n())return;const t=!n.paused;r.locked=!0,n.pause(),setTimeout(function(){r.should_resume=t,r.locked=!1},0)})}(o,s,u),function(e,t){if(!window.ResizeObserver)return;const n=new ResizeObserver(e=>{const n=e[e.length-1];t.emit(y,n)});n.observe(e),t.on(U,()=>n.disconnect())}(s,u),function(e,t,n){const r=!!e.ratio,o=document.createElement("div");o.classList.add("fp-ratio"),t.append(o);let i=Jn(e.ratio||Zn);o.style.paddingTop=100*i+"%";const s=[_,v];n.on(s,function(){if(r)return;const e=n.videoHeight&&n.videoWidth&&n.videoHeight/n.videoWidth;e&&n.setOpts({ratio:e})}),n.on($,function(){const t=n.videoHeight&&n.videoWidth&&n.videoHeight/n.videoWidth,r=Jn((null==e?void 0:e.ratio)||t||Zn);i!==r&&(i=r,o.style.paddingTop=100*r+"%")})}(o,s,u),function(e){const t=t=>{t.detail!==e&&!1===e.opt("multiplay")&&e.togglePlay(!1)};e.on(U,()=>document.removeEventListener(tr,t)),document.addEventListener(tr,t)}(u),nr(s,u),lr(u,o),(d=u).on(i,Pn(e=>{const t=e instanceof MediaError?e:d.error;t&&d.emit(ne,{error:Pr(t,{resource:d.original_src})})})),u.plugins.forEach(e=>{try{e.init(o,s,u)}catch(t){console.log("Error(plugin/%s)",e.constructor.name,t)}}),u.setOpts(o),u.opts=o,o.src&&u.setSrc(o.src);const p=u.readyState;return p>0&&u.currentSrc&&u.emit(v),p>2&&u.currentSrc&&u.emit(I),u.emit(r),u.on(X,function(e){Cn({root:s,video:u,data:e.data||{}})}),setTimeout(yn,0,document,"flowplayer:player:created",u),u}Object.assign(Mr,Fr),function(r){Array.isArray(r.extensions)&&r.extensions.forEach(t=>e.push(t)),r.customElements=_t,r.defaultElements=Fe,r.version="3.31.1",r.commit="9d05f801130865bddda1eabb9d55395598f96065",r.instances=t,r.extensions=e,r.support=n,r.events=re,r.states=ht,r.errors=Nt,r.jwt=vt,r.autoplay=Tt,r.quality=kt}(Mr),"object"==typeof document&&setTimeout(yn,0,document,"flowplayer:umd",Mr),Mr.extensions.unshift.apply(Mr.extensions,[Health]),"undefined"!=typeof window&&"function"==typeof window.matchMedia&&[H,W].forEach(function(e){window.matchMedia("(orientation: "+e+")").addListener(function(n){t.length&&t.forEach(function(t){n.matches&&t.emit(e)})})});const Dr=[b,B];function Ur(e,t){const n=wt(t,Pe);e.append(n),t.on(ne,r=>{if(!document.body.contains(e))return;const o=r.detail.error;!1!==o.config.showErrorUI&&(o.isFatal||o.config.showErrorUI)&&(t.setState(Ye,!0),console.warn(o),yn(n,ne,{error:o}),yn(n,i,{error:o}))}),Dr.forEach(e=>t.on(e,()=>{!function(e){if(!e.hasState(Ye))return;e.setState(Xe,!0),e.setState(Ye,!1)}(t)}))}const xr=16384;var Hr=Object.freeze({__proto__:null,NO_FULLSCREEN:1,NO_VOLUME_CONTROL:2,NO_MUTE:4,LOGO_ON_RIGHT:8,USE_DRAG_HANDLE:16,USE_PLAY_2:32,USE_PLAY_3:64,USE_THIN_CONTROLBAR:128,NO_TITLE:256,NO_DESCRIPTION:512,NO_CONTROLS:1024,NO_DURATION:2048,NO_HEADER:4096,AUDIO_ONLY:8192,NO_TOUCH_ZONES:xr,LOGO_ON_BOTTOM:32768});function Wr(e,t,n){let r=()=>document.fullscreenElement,o="fullscreenchange";if(!Element.prototype.requestFullscreen){const e=Element.prototype,t=document;e.webkitRequestFullScreen&&(e.requestFullscreen=e.webkitRequestFullScreen,t.fullscreenEnabled=!0),t.webkitCancelFullScreen&&(document.exitFullscreen=t.webkitCancelFullScreen),o="webkit"+o,r=()=>t.webkitCurrentFullScreenElement}const i=()=>n.getFullsceenTarget?n.getFullsceenTarget():t;n.toggleFullScreen=function(e,t){if(n.ios_fullscreen_disabled)return;if("boolean"!=typeof e&&(e=!n.hasState(De)),qr(n)&&(e?function(e,t){e.getAttribute("playsinline")&&e.removeAttribute("playsinline");e.getAttribute("webkit-playsinline")&&e.removeAttribute("webkit-playsinline");t||e.webkitEnterFullScreen()}(n,t):function(e,t){e.getAttribute("playsinline")||e.setAttribute("playsinline","");e.getAttribute("webkit-playsinline")||e.setAttribute("webkit-playsinline","");t||e.webkitExitFullScreen();e.togglePlay(!1),e.hasState(it)||e.setState(it,!0)}(n,t)),!document.fullscreenEnabled)return;const o=i();if(e)return o.requestFullscreen();r()===o&&document.exitFullscreen()},qr(n)&&(n.ios_fullscreen_disabled=!0,n.once(J,function(){n.ios_fullscreen_disabled=!1}),n.on(["webkitendfullscreen","webkitbeginfullscreen"],e=>{const t="webkitbeginfullscreen"===e.type;n.setState(De,t).emit(t?g:E).toggleFullScreen(t,!0)})),setTimeout(()=>{const e=i();e.addEventListener(o,function(){const t=r(),o=t===e||t==n;n.emit(o?g:E),n.setState(De,o)})},0),!1!==e.doubleclick&&t.addEventListener(a,function(e){var t;e.target&&(null===(t=e.target)||void 0===t?void 0:t.classList.contains("fp-ui"))&&n.toggleFullScreen()})}function qr(e){return!document.fullscreenEnabled&&"function"==typeof e.webkitEnterFullScreen&&"function"==typeof e.webkitExitFullScreen}const Gr="use-play-",Br="mute";function Vr(e,t,n){if(!n.reaper)return;const r=document.createDocumentFragment(),o=wt(n,oe),i=wt(n,ie);t.append(i),r.append(o),n.reaper.set("ui",o),~t.className.indexOf(Gr)||t.classList.add(Gr+1),function(e,t,n){const r=nn("fp-footer");t.append(r),n.on($,function(e){var t,n;const o=null===(t=e.data)||void 0===t?void 0:t.description,i=null===(n=e.data)||void 0===n?void 0:n.title;if(r.innerHTML="","string"==typeof i){const e=nn("fp-title");e.innerText=i,r.append(e)}if("string"==typeof o){const e=o.split(" "),t=nn("fp-desc");for(t.innerText=e.join(" "),r.append(t);e.length>1&&t.scrollHeight>t.offsetHeight;)e.pop(),t.innerText=e.join(" ")+"..."}})}(0,t,n),Ur(o,n),t.appendChild(r);let s=null;[d,f,l].forEach(e=>{t.addEventListener(e,function(e){if(!n.hasState(at)||e.type===f){if(clearTimeout(s),e.type===l)return n.setState(st,!1);n.setState(st,!0),s=setTimeout(function(){n.setState("is-hovered",!1)},2e3)}})}),Wr(e,t,n),n.on(k,function(){const e=0==n.volume||n.muted;n.muted=e,n.setState(xe,e),n._storage.setItem(Br,e.toString())}),"true"==n._storage.getItem(Br)&&(n.muted=!0,n.setState(xe,n.muted));const a=n._storage.getItem("volume");a&&!isNaN(Number(a))&&(n.volume=Number(a)),n.emit(k),n.on("dvr/window",t=>{e.live&&(n.live_state.dvr=n.seekable.length>0&&function(e,t,n){if(0==t)return!0;const r=Hn(e,n);return r.head-r.tail>=t}(n,e.seconds_to_dvr||60,t.detail),n.live_state.dvr_window=t.detail)}),n.on(G,()=>{const e=setInterval(()=>{if(!n.opts.live||0==n.reaper)return clearInterval(e);if(0==n.seekable.length||n.hasState(Ye))return;const t=function(e){const t=e.currentTime,n=Hn(e);return{progress:Math.min(100,Math.max(0,(t-n.tail)/(n.head-n.tail)*100)),is_live:t-n.head>=-10}}(n);n.hasState(Je)==t.is_live&&n.setState(Je,!t.is_live),n.live_state.dvr&&n.emit(q,t.progress)},200)}),n.on(v,function(){n.setOpts({live:Wn(n)})}),n.on(P,function(e){const t=Wn(n),r=t?qn(n):e.data||n.duration;isNaN(r)||n.setOpts({live:t,duration:r})}),n.on(["playlist/advance",D],t=>{if(n.setState($e,!!e.autoplay),n.root.classList.contains("is-livecountdown"))return jr(n,e);(n.currentSrc||n.srcObject)&&(t.type===D&&["is-playlist",ft].some(e=>n.root.classList.contains(e))||jr(n,e))}),n.on($,function(n){var r,o;e.seekable=void 0===(null===(r=null==n?void 0:n.data)||void 0===r?void 0:r.seekable)||n.data.seekable;const i=null===(o=n.data)||void 0===o?void 0:o.ui;if("number"!=typeof i)return;const s=t.classList;s.toggle("use-play-1",!(32&i||64&i)),s.toggle("use-play-2",(32&i)>0),s.toggle("use-play-3",(64&i)>0),s.toggle("use-thin-controlbar",(128&i)>0),s.toggle("no-title",(256&i)>0),s.toggle("no-description",(512&i)>0),s.toggle("logo-on-right",(8&i)>0),s.toggle("logo-on-bottom",(32768&i)>0),s.toggle("use-drag-handle",(16&i)>0),s.toggle("no-controls",(1024&i)>0),s.toggle("no-duration",(2048&i)>0),s.toggle("no-header",(4096&i)>0),s.toggle("no-mute",(4&i)>0),s.toggle("no-volume",(2&i)>0),s.toggle("no-fullscreen",(1&i)>0),s.toggle("no-touch-zones",(xr&i)>0)})}function jr(e,t){delete t.live_start_time,e.setOpts({live:!1}),e.live_state.dvr=void 0,e.live_state.dvr_window=void 0,delete t.live,delete t.poster,delete t.duration,delete t.title,delete t.description,"metadata"in t&&delete t.metadata}function Kr(e,t,n){if(Rn.from_token(e.token||"").is_granted(Rn.permissions.NO_METERING))return;In.id(e.token||"")&&n.once(N,async()=>await zr(n,e.token||""))}async function zr(e,t){const n=In.id(t||"");e.once(D,()=>{e.once(N,()=>zr(e,t))});if(401==(await fetch("https://pmi.flowplayer.com/in",{method:"POST",body:JSON.stringify({token_id:n,factor:1,rnd:Math.random().toString(36).substring(2)})})).status)return e.emit(X,{reason:"token",details:"The token online validation failed"})}var Qr={ads:{ad:"Ad",ads:"Ads",advertisement:"Advertisement"},audio:{button_txt:"Audio",menu_title:"Audio"},core:{exit_fullscreen:"Exit fullscreen",fullscreen:"Fullscreen",mute:"Mute",pause:"Pause",play:"Play",unmute:"Unmute",volume:"Volume"},ovp:{starting_in:"Countdown"},playlist:{cancel:"Cancel",up_next:"Up next"},qsel:{menu_title:"Quality"},share:{clipboard_failure:"Access to clipboard failed",clipboard_success:"The text is now on your clipboard",embed:"Embed",link:"Link",menu_title:"Share"},speed:{menu_title:"Speed"}};class I18n{init(e,t,n){n.reaper&&n.reaper.set("translations",cn(I18n,e,"en"))}}I18n.pluginName="i18n",I18n.en=Qr;class FlowplayerComponent extends HTMLElement{constructor(e){super(),this.player=e}}class FlowplayerLogo extends FlowplayerComponent{constructor(e){super(e),this.classList.add("fp-logo");const t={logo:""};e.on($,e=>{var n;const r=t.logo,o=(null===(n=null==e?void 0:e.data)||void 0===n?void 0:n.logo)||"";r!=o&&(t.logo=o,this.set_logo(o,e.detail.logo_alt_text,e.detail.logo_href))})}set_logo(e,t,n){this.innerHTML="";const r=document.createElement("img");if(!e)return;if(r.src=e,r.alt=t||"Logo",!n)return this.append(r);const o=document.createElement("a");o.href=n,o.append(r),this.append(o)}}class FlowplayerHeaderDuration extends FlowplayerComponent{constructor(e){super(e),this.classList.add("fp-duration"),e.on($,e=>{var t;const n=(null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.duration)||NaN;this.innerText=isFinite(n)?sn(n):""})}}const Yr={name:"fp-fullscreen",translation_key:"core.fullscreen"},Xr={name:"fp-fullscreen-exit",translation_key:"core.exit_fullscreen"},$r={name:"fp-play",translation_key:"core.play"},Zr={name:"fp-pause",translation_key:"core.pause"},Jr={translation_key:"core.mute",name:"fp-volume-mute-unmute"},eo={translation_key:"core.play",name:"fp-small-play"},to={translation_key:"core.pause",name:"fp-small-pause"},no={name:"fp-fast-forward"},ro={name:"fp-rewind"};class FlowplayerIcon extends FlowplayerComponent{constructor(e,t){super(e),this.classList.add("fp-icon",t.name),t.title&&this.setAttribute("title",t.title),t.title&&this.setAttribute("aria-label",t.title),t.translation_key&&this.setAttribute("aria-label",e.i18n(t.translation_key)),this.setAttribute("tabindex","0"),this.setAttribute("focusable","true")}}function oo(){}document.addEventListener(s,function(e){this.active_menu&&!e.composedPath().includes(this.active_menu)&&(Array.from(document.querySelectorAll(".fp-engine")).forEach(e=>{var t;const n=e.root.querySelector("details[open].fp-menu-container");n&&(n.open=!1,null===(t=n.querySelector("summary"))||void 0===t||t.removeAttribute("aria-expanded"),e.root.classList.toggle(ot,!1))}),this.active_menu=void 0)});const io={passive:!0};var so;function ao(e,t){let n=0,r=-1,o=-1;const i=Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,5),s=e.classList;e.id=i,s.remove(so.GRABBING),s.remove(so.TOUCHING);const a=t.onseek||oo,l=t.onstart||oo,y=t.onend||oo,g=t.onmouse||oo,E=t.ontouch||oo,v=t.ontouchend||oo;function _(t){!function(){const t=e.getBoundingClientRect();n=t.left,r=t.width}();let o=(function(e){return"function"==typeof window.TouchEvent&&e instanceof TouchEvent}(t)?t.changedTouches[0].pageX:t.pageX)-n;return o>r&&(o=r),o<0&&(o=0),o/r*100}function w(t){const n=_(t);n!=o&&(a(e,n),o=n)}return e.addEventListener(p,function(t){lo(e,t)&&(s.add(so.TOUCHING),co(e.parentElement)&&(s.add(so.GRABBING),E(e,_(t)),l(e,_(t)),w(t)))},io),e.addEventListener(f,function(t){w(t),g(e,_(t))},io),e.addEventListener(h,function(t){setTimeout(function(){s.remove(so.TOUCHING)},500),lo(e,t)&&(s.remove(so.GRABBING),v(e,_(t)),y(e,_(t)),r=0)},io),e.addEventListener(m,function(){s.remove(so.GRABBING,so.TOUCHING),r=0},io),e.addEventListener(u,function(t){s.contains(so.TOUCHING)||(document.addEventListener(d,w),s.add(so.GRABBING),l(e,_(t)),t.preventDefault(),w(t))}),e.addEventListener(d,function(t){s.contains(so.TOUCHING)||g(e,_(t))}),document.addEventListener(c,function(t){s.contains(so.TOUCHING)||(document.removeEventListener(d,w),s.contains(so.GRABBING)&&(s.remove(so.GRABBING),y(e,_(t)),r=0))}),e}function lo(e,t){const n=t.target;return!!n&&(n&&!n.closest(e.id)||!co(e.parentElement)||!e.classList.contains(so.TOUCHING))}function co(e){if(!e)return!1;const t=window.getComputedStyle(e);return"0"!==t.width&&"0"!==t.height&&"0"!==t.opacity&&"none"!==t.display&&"hidden"!==t.visibility}!function(e){e.GRABBING="has-grab",e.TOUCHING="has-touch"}(so||(so={}));const uo="fp-tick";class FlowplayerVolumeBar extends FlowplayerComponent{constructor(e){super(e),this.className="fp-volume";const t=e.root.classList,n=t.contains("is-tiny")?6:t.contains("is-small")?8:10,r=Array.from({length:n}).map(()=>{const e=document.createElement("i");return e.className=uo,e});this.append(...r),ao(this,{onseek:(t,n)=>{n>0&&(e.muted=!1,e._storage.removeItem("mute")),e._storage.setItem("volume",(e.volume=n/100).toString()),this.adjustVolumeSlider(e.volume)}}),this.setAttribute("tabindex","0"),this.setAttribute("role","slider"),this.setAttribute("aria-valuemin","0"),this.setAttribute("aria-valuemax","1"),this.setAttribute("aria-label",e.i18n("core.volume","volume")),this.adjustVolumeSlider(e.volume),e.on(k,()=>{const t=0==e.volume||e.muted;t&&this.adjustVolumeSlider(0);const n=e.opt("ui");this.classList.contains(so.GRABBING)||t&&"number"==typeof n&&(4&n)>0||this.adjustVolumeSlider(e.volume)})}adjustVolumeSlider(e){this.setAttribute("aria-valuenow",e.toString()),this.setAttribute("aria-valuetext",Math.round(100*e)+"%");const t=Array.from(this.querySelectorAll("."+uo)),n=Math.round(e*t.length);t.forEach((e,t)=>{e.classList.toggle("fp-color",t<n)})}}class FlowplayerTimelineBar extends FlowplayerComponent{constructor(e){let t;super(e),this.bufferEle=nn("fp-buffer"),this.progress=nn("fp-progress","fp-color"),this.tooltipEle=nn("fp-timestamp"),this.proposedSeekBar=nn("fp-hover"),this.dragger=nn("fp-dragger","fp-color"),this.classList.add("fp-timeline","fp-bar"),this.tooltipEle.style.display="none",this.setAttribute("role","slider"),this.setAttribute("tabindex","0"),this.setAttribute("aria-label",e.i18n("core.timeline_aria_label","Seek slider")),this.setAttribute("aria-valuenow","0"),this.progress.append(this.dragger),this.append(this.bufferEle,this.progress,this.proposedSeekBar,this.tooltipEle);const n=requestAnimationFrame;let r;const o=()=>{var n;0==e.reaper||t.live||(n=e,this.progress.style.width=n.currentTime/n.duration*100+"%",r=void 0,e.paused||this.classList.contains(so.GRABBING)||r||(r=setTimeout(o,200)))},i=()=>!!this.player.opt("seekable",!0)&&!isNaN(this.player.duration);ao(this,{onseek:(n,r)=>{if(i())switch(!!t.live){case!0:Bn(r,e,this.tooltipEle);break;case!1:!function(e,t,n){const r=t.duration*(e/100);if(t.disabled&&r>t.currentTime)return!1;n.style.width=e+"%",t.currentTime=r}(r,e,this.progress),Dn(this.tooltipEle,r)}},onstart:()=>{i()&&(e.emit("timeline/gesture/start"),!e.hasState(Fn)&&e.setState(Ge,!0),t.live||function(e){e.style.display="block"}(this.tooltipEle))},onend:function(r,i){n(o),0!=t.seekable&&t.live&&Kn(i,e)},ontouchend:()=>{t.live?zn(this.proposedSeekBar,this.tooltipEle):xn(this.proposedSeekBar,this.tooltipEle),setTimeout(()=>e.emit("timeline/gesture/end"),0)},onmouse:(n,r)=>{if(i()&&(e.emit("timeline/gesture/move",{percent:r}),!this.classList.contains(so.GRABBING)))switch(!!t.live){case!0:!function(e,t){t.style.width=e+"%"}(r,this.proposedSeekBar),Bn(r,e,this.tooltipEle);break;case!1:!function(e,t){t.style.width=e+"%"}(r,this.proposedSeekBar),function(e,t,n){isNaN(e)||isNaN(t.duration)||(Dn(n,e),n.textContent=sn(e/100*t.duration))}(r,e,this.tooltipEle)}}}),e.on($,function(e){e.data&&(t=e.data)}),e.on(N,()=>n(o)),e.on(w,()=>{0==e.reaper||t.live||Un(e,this.bufferEle)}),e.on(q,e=>{this.progress.style.width=e.detail+"%"}),e.on(S,()=>{0!=e.reaper&&(n(o),this.setAttribute("aria-valuenow",e.currentTime+""),this.setAttribute("aria-valuetext",Math.round(e.currentTime)+" "+e.i18n("core.seconds","Seconds")),t.live||Un(e,this.bufferEle))}),e.on(v,()=>{0!=e.reaper&&(t.live||Un(e,this.bufferEle))}),e.on(P,t=>{if(0==e.reaper)return;const n=Wn(e)?qn(e):t.data||e.duration;isNaN(n)||(this.setAttribute("aria-valuemax",n+""),this.setAttribute("aria-valuemin","0"))}),this.addEventListener(l,()=>{e.emit("timeline/gesture/end"),t.live?zn(this.proposedSeekBar,this.tooltipEle):xn(this.proposedSeekBar,this.tooltipEle)})}}class FlowplayerLiveStatus extends FlowplayerComponent{constructor(e){super(e),this.classList.add("fp-live-status");const t=nn("fp-live-text"),n=nn("fp-live-indicator","fp-color");t.textContent="live",this.setAttribute("tabindex","0"),this.setAttribute("role","button"),this.append(n,t),this.addEventListener(s,function(){jn(e)})}}class FlowplayerDuration extends FlowplayerComponent{constructor(e){let t;super(e),this.classList.add("fp-duration"),this.setAttribute("aria-hidden","true"),e.on($,n=>{if(0==e.reaper||!n.data)return;t=n.data;const r=Wn(e)?NaN:n.data.duration||0;if(isNaN(r)||r>=Number.MAX_SAFE_INTEGER)return this.style.display="none";this.style.display="inline-block",this.innerText=sn(r)}),e.on(v,()=>{var n,r;0==e.reaper||t.live||(r=this,(n=e).duration&&(r.innerText=sn(n.duration)))})}}class FlowplayerElapsedTime extends FlowplayerComponent{constructor(e){let t;super(e),this.classList.add("fp-elapsed"),this.innerText=sn(0),this.setAttribute("aria-hidden","true"),e.on($,e=>{e.data&&(t=e.data)}),e.on(S,()=>{var n;0!=e.reaper&&(t.live?(n=e,this.innerText=sn(n.currentTime)):function(e,t){t.innerText=sn(e.currentTime)}(e,this))})}}class FlowplayerControlButtons extends FlowplayerComponent{constructor(e){super(e),this.classList.add("fp-btns","fp-small-switch");const t=wt(e,Te),n=wt(e,ke);t.addEventListener("click",function(){e.togglePlay(),setTimeout(function(){n.focus&&n.focus()},100)}),n.addEventListener("click",function(){e.togglePlay(),setTimeout(function(){t.focus&&t.focus()},100)}),this.append(t,n)}}class FlowplayerLeftRightZone extends FlowplayerComponent{constructor(e,t){super(e),this.classList.add(t);const n=this.classList.contains("fp-left-zone")?-1:1,r=document.createElement("span"),o=wt(e,this.classList.contains("fp-left-zone")?Re:Le);o.removeAttribute("tabindex"),r.classList.add("fp-zone-seconds"),this.append(r,o);e.on(R,()=>{r.innerText=""}),e.on(V,e=>{const t=e.data;if(!t)return;if("number"!=typeof t.offset)return;const n=t.offset;if(0==n)return this.reset_zone();n>0&&this.classList.contains("fp-right-zone")||n<0&&!this.classList.contains("fp-right-zone")?this.render_zone_state(n):this.reset_zone()}),e.on(j,()=>{this.reset_zone()}),this.reset_zone(),this.addEventListener(h,function(t){isNaN(e.duration)||isNaN(e.currentTime)||xr&e.opt("ui")||e.hasState(et)||!e.hasState(lt)&&!e.hasState(it)||e.enqueueSeek(5*n)&&(t.stopPropagation(),t.preventDefault())})}reset_zone(){const e=this.querySelector(".fp-zone-seconds");e&&(e.innerText="")}render_zone_state(e){const t=this.querySelector(".fp-zone-seconds");t&&(t.innerText=Math.abs(e)+"")}}class FlowplayerErrorView extends FlowplayerComponent{constructor(e){super(e),this.className="fp-error",this.message=document.createElement("p"),this.message.className="error-message",this.errorId=document.createElement("p"),this.errorId.className="error-id",this.errorKey=document.createElement("p"),this.errorKey.className="error-key",this.append(this.errorKey,this.message,this.errorId),this.addEventListener(ne,t=>{if(e.opts.live&&0==e.currentTime&&t.detail.error.flowplayerErrorCode==Nt.PlaybackManifestLoadError)return void(this.message.textContent="stream offline");const n=t.detail.error;this.message.textContent=n.message,this.errorKey.textContent=n.errorKey,console.warn("flowplayer encountered an %s error while loading %s id:%s",n.errorKey,n.config.resource,n.id)})}}class FlowplayerHeaderLeftRight extends FlowplayerComponent{constructor(e,t,...n){super(e),this.className=t;const r=e.createComponents(...n);this.append(...r),"fp-left"!==t&&r.forEach(t=>{t.addEventListener(s,()=>e.toggleFullScreen())})}}class FlowplayerMiddleWait extends FlowplayerComponent{constructor(e){super(e),this.classList.add("fp-wait"),Array(...Array(4)).map((e,t)=>t).forEach(()=>{this.append(document.createElement("b"))})}}class FlowplayerMiddleZone extends FlowplayerComponent{constructor(e){super(e),this.classList.add("fp-middle-zone");const t=e.createComponents(_e,we);this.append(...t)}}class FlowplayerMiddleButtons extends FlowplayerComponent{constructor(e){super(e),this.classList.add("fp-switch"),[Ne,Ae].forEach(t=>{const n=wt(e,t);n.removeAttribute("tabindex"),this.append(n)})}}class FlowplayerVolumeControl extends FlowplayerComponent{constructor(e){super(e),this.classList.add("fp-volume-control");const t=wt(e,Ce);this.append(t),!n().ios&&this.append(wt(e,fe)),t instanceof FlowplayerIcon&&t.addEventListener(s,function(){e.toggleMute()})}}class FlowplayerHeader extends FlowplayerComponent{constructor(e){super(e),this.classList.add("fp-header"),this.append(...e.createComponents(me,ye)),e.reaper&&e.reaper.set("header",this)}}class FlowplayerControls extends FlowplayerComponent{constructor(e){super(e),this.classList.add("fp-controls","fp-togglable"),this.append(...e.createComponents(ae,le,ce,ue,de,pe))}}class FullscreenIcon extends FlowplayerIcon{constructor(e,t){super(e,t),this.setAttribute("role","button")}}class FlowplayerMiddle extends FlowplayerComponent{constructor(e){super(e),this.classList.add("fp-middle"),this.append(...e.createComponents(Se,ve,be)),this.setAttribute("tabindex","0"),e.reaper&&e.reaper.set("middle",this),this.handleClick(e),this.handleTouch(e),e.once(J,()=>{this.removeAttribute("tabindex"),this.removeAttribute("role"),this.removeAttribute("aria-label")})}handleClick(e){[s,a].forEach(t=>this.addEventListener(t,function(n){if(!(n.defaultPrevented||e.root.classList.contains("is-endscreen")||t===a&&e.root.classList.contains("no-fullscreen")))return n.preventDefault(),e.emit(n.type),!1})),e.on(s,function(t){setTimeout(function(){t.defaultPrevented||e.togglePlay()},0)}),e.on(a,function(t){setTimeout(function(){t.defaultPrevented||e.toggleFullScreen()},0)})}handleTouch(e){let t=!1;this.addEventListener(h,function(t){t.cancelable&&!e.hasState("is-endscreen")&&(t.preventDefault(),e.emit(t.type,{source:t}))}),e.on(h,function(n){setTimeout(function(){if(n.defaultPrevented)return;if(e.ended)return e.togglePlay(!0);const r=e.hasState(qe);t&&clearTimeout(t),(r||e.hasState(it))&&(e.hasState(it)&&(e.setState(it,!1),e.setState(st,!1)),e.togglePlay(),r)||(e.setState(it,!0),e.paused||(t=setTimeout(function(){t=!1,e.setState(it,!1),e.setState(st,!1)},2e3)))},0)})}}class FlowplayerUi extends FlowplayerComponent{constructor(e){super(e),this.classList.add("fp-ui"),this.append(...e.createComponents(he,Ee,se))}}const po=e=>{let t=!1;e.on(D,()=>{t||(e=>{const t=e.customElements.entries();for(var[n,r]of t)if(!bt(e,r))return!0;return!1})(Mr)&&(Qt(e,{feature_name:"custom-components",behavior:"used",sample_rate:.1}),t=!0)})},fo=(...e)=>e.reduce((e,t)=>Object.assign(Object.assign({},e),t),{}),ho=(e,t)=>{const n=e.lastIndexOf(t);return~n&&e.splice(n,1),e};class RequestQueue{static of(){return new RequestQueue}static is_empty(e){return 0==e.pending.length}static is_high_water(e){return e.open.length==RequestQueue.MAX_OPEN_REQUESTS}static maybe_spawn_req(e){if(RequestQueue.is_empty(e))return e;if(RequestQueue.is_high_water(e))return e;try{const t=RequestQueue.lpop(e);t&&RequestQueue.request(e,t)}catch(e){}}static increment_failures(e){return e.stats.failures++,e.stats.failures>RequestQueue.MAX_FAILURE_COUNT&&(e.stats.ttl=Date.now()+RequestQueue.REQUEST_TTL_MS),e}static handle_error(e,t){RequestQueue.rm(e,t),RequestQueue.increment_failures(e)}static request(e,[t,n,r]){if(Date.now()<e.stats.ttl)return;const o=new XMLHttpRequest;e.open.push(o),o.timeout=RequestQueue.REQUEST_TIMEOUT_MS,o.ontimeout=function(){RequestQueue.handle_error(e,o)},o.onerror=function(t){RequestQueue.handle_error(e,o)},o.onreadystatechange=function(){o.readyState==XMLHttpRequest.DONE&&RequestQueue.rm(e,o),Math.floor(o.status/100)},o.onload=function(){RequestQueue.rm(e,o),e.stats.failures&&e.stats.failures--},o.open(n,t),o.setRequestHeader("Content-Type","text/plain;charset=UTF-8");try{o.send(JSON.stringify(r))}catch(e){}}static rpush(e,...t){return t.forEach(t=>{e.pending.length>=RequestQueue.MAX_PENDING||(e.pending.push(t),RequestQueue.maybe_spawn_req(e))}),e}static lpop(e){return e.pending.shift()}static rm(e,t){return ho(e.open,t),e}constructor(){this.pending=[],this.open=[],this.stats={failures:0,ttl:0}}}RequestQueue.MAX_OPEN_REQUESTS=3,RequestQueue.MAX_PENDING=5,RequestQueue.REQUEST_TIMEOUT_MS=4e3,RequestQueue.REQUEST_TTL_MS=5e3,RequestQueue.MAX_FAILURE_COUNT=3;var mo=RequestQueue.of();const yo=/:([a-zA-Z_]+)/g;class Log{static prepare(e,t){const n=document.createEvent("Event");return n.initEvent(e,!1,!0),n.ns=e,n.data=t,n}static of(e){return new Log(e)}constructor(e){this.emitter=e}info(e){this.emitter.dispatchEvent(Log.prepare(Log.NAMESPACE.INFO,e))}error(e){this.emitter.dispatchEvent(Log.prepare(Log.NAMESPACE.ERROR,e))}warn(e){this.emitter.dispatchEvent(Log.prepare(Log.NAMESPACE.WARN,e))}}var go;Log.NAMESPACE={INFO:"tracker:info",ERROR:"tracker:err",WARN:"tracker:warn"},function(e){e.POST="POST",e.PUT="PUT",e.GET="GET"}(go||(go={}));class Tracker{static of(e,t){return new Tracker(e,t)}static ensure_required_keys(e,t){return e.required_keys.filter(e=>!(e in t))}static pluck_valid_keys(e,t){return((e,...t)=>Object.keys(e).filter(e=>~t.indexOf(e)).reduce((t,n)=>fo(t,{[n]:e[n]}),{}))(t,...e.valid_keys)}static merge_metadata(e,t={}){return e.metadata=Tracker.pluck_valid_keys(e,fo(e.metadata,t)),e}static assert_emitter_api(e){if("function"!=typeof(e||{}).addEventListener)throw new Error("Tracker() received an emitter that does not implement the addEventListener method");if("function"!=typeof(e||{}).removeEventListener)throw new Error("Tracker() received an emitter that does not implement the removeEventListener method")}static create_listener(e,t,n){var r;e.listeners.push([t,n]),null===(r=e.emitter)||void 0===r||r.addEventListener(t,n)}constructor(e,t={}){const n=this;if(this.emitter=e,this.url=t.url,this.log=Log.of(this.emitter),this.verb=t.verb,this.metadata=fo({},t.metadata||{}),this.rq=t.rq||mo,this.events=t.events||[],this.required_keys=t.required_keys||[],this.optional_keys=t.optional_keys||[],this.listeners=[],this.valid_keys=this.required_keys.slice(0).concat(this.optional_keys),Tracker.assert_emitter_api(this.emitter),void 0===Tracker.verb[this.verb])throw new Error(`invalid HTTP verb[${this.verb}] passed`);if("string"!=typeof this.url)throw new Error(`invalid API url[${this.url}] passed`);Tracker.TRACKERS.push(this),n.events.forEach(e=>{Tracker.create_listener(this,e,(t={})=>{const r=fo(n.metadata,{event_type:e},t.data||t),o=function(e,t){return e.replace(yo,e=>{const n=e.slice(1,e.length);return n in t?t[n].toString():e})}(n.url,r),i=Tracker.pluck_valid_keys(n,r),s=Tracker.ensure_required_keys(n,i);if(s.length)return n.log.error(`Tracker.validate_metadata() failed for\n            Event[${e}]\n            missing keys: ${s}\n            payload:\n              ${JSON.stringify(i,null,2)}`);this.rq&&RequestQueue.rpush(this.rq,[o,this.verb,i])})})}destroy(){this.listeners.forEach(([e,t])=>{var n;return null===(n=this.emitter)||void 0===n?void 0:n.removeEventListener(e,t)}),delete this.rq,delete this.emitter,ho(Tracker.TRACKERS,this)}put(e={}){return Tracker.merge_metadata(this,e),this}}Tracker.TRACKERS=[],Tracker.QUEUE=mo,Tracker.verb=go;var Eo="ping",vo="display",_o="view";const wo=["sitegroup_id","session_id","media_id","site_id","player_id","video_type"],So=["created","position"],bo=["player_version","created","source","category","category_id","autoplay","muted","customer_user_id"];const ko=100,To=1e3;function No(e,t){return e.duration/1===e.duration&&Object.assign(t,function(e){const t=e/ko;return{segment_duration:t,breakpoints:Array(...Array(ko)).map(function(e,n){return Math.floor(n*t*To)/To})}}(e.duration))}function Ao(e,t,n){if(!t.segment_duration&&!No(e,t))return;const r=function(e,t,n){const r=t.last_idx,o=n?99:Oo(e,t);return t.last_idx=o,o<=r?[]:t.breakpoints.slice(r,99==o?100:o).map(function(e){return t.breakpoints.indexOf(e)})}(e,t,n);0!=r.length&&e.emit(Eo,{position:r})}function Oo(e,t){return Math.min(Math.floor(e.currentTime/t.segment_duration),99)}var Io;const Lo="vod",Ro="live",Co=[vo,Eo,_o];function Po(e,t,n){switch(null==t?void 0:t.kind){case"live":return function(e,t){const n=Date.now();n-t.last_tracked_ts<6e4||(t.last_tracked_ts=n,++t.ticks,e.emit(Eo,{position:60*t.ticks}))}(e,t);case"vod":return Ao(e,t,"boolean"==typeof n&&n)}}function Fo(e){const t=e.ads;return void 0!==t&&(void 0!==t.schedule&&("function"==typeof t.hasPreroll&&(t.currentRequests?t.currentRequests:!!t.adPlaying||!(!t.hasPreroll()||0!=t.nextIndex))))}const Mo=((Io=class Analytics{init(e,t,n){if(!Rn.from_token(e.token||"").is_granted(Rn.permissions.ANALYTICS))return;if(n.hasState("consent-no-tracking"))return;if(n.analytics)return;const r=n.analytics={ticker:void 0,last_media_id:"",ended:!1},o={locked:void 0,ttl:6e3,task:()=>{Po(n,r.ticker)}};const i={session_id:n.deviceId(),autoplay:n.autoplay,muted:n.muted,player_id:e.player_id,customer_user_id:e.customer_user_id,player_version:"3.31.1"},s=Tracker.of(n,{verb:Tracker.verb.POST,url:"https://ptm.flowplayer.com/:video_type/:sitegroup_id/:event_type",events:Co,required_keys:wo,optional_keys:bo.concat(So).slice(0),metadata:i});n.on(U,function(){s&&s.destroy()}),n.on($,function(t){if(!s)return;const o=rn(t,"data.metadata",{});if(!o.media_id&&o.stream_target_id&&(o.media_id=o.stream_target_id),!o.media_id)return;const i=rn(s,"metadata.media_id");if(i&&o.media_id==i)return;const a=rn(e,"analytics",{});s.put(o),s.put(a);const l=rn(e,"metadata.live_start_time",e.live)?Ro:Lo;s.put({video_type:l,source:e.source||mr()||""}),r.ticker=e.live?{ticks:0,last_tracked_ts:Date.now(),kind:"live"}:{last_idx:0,segment_duration:0,breakpoints:[],kind:"vod"},r.ended=!1,n.emit(vo)});let a=0;n.on(N,function(){if(!s)return;if(a||function(e,t){return e.metadata.media_id&&e.metadata.media_id==t.last_media_id}(s,r))return;s.put({muted:n.muted});const e=Fo(n);if(e)return a=Promise.resolve(e).then(function(){r.last_media_id=s.metadata.media_id,n.emit(_o),a=0}).catch(function(){a=0});r.last_media_id=s.metadata.media_id,n.emit(_o)}),n.on(S,function(){var t;s&&(a||Fo(n)||r.ended||(!e.live&&n.currentTime+.25>=n.duration&&Po(n,r.ticker,!0),(t=o).locked||(t.locked=setTimeout(function(){return t.task(),function(e){return e.locked=void 0,e}(t)},t.ttl))))}),n.on(R,function(){s&&r.ticker&&"vod"==r.ticker.kind&&function(e,t){No(e,t),t.last_idx=Oo(e,t)}(n,r.ticker)}),n.on(L,function(){s&&function(e,t){t.ended||(t.ended=!0,Po(e,t.ticker))}(n,r)})}}).pluginName="analytics",Io),Do=function(e,t){if("object"==typeof exports&&"undefined"!=typeof module)return t;if(null===document.currentScript)return t;"flowplayer"in e||(e.flowplayer={extensions:[]});const n=e.flowplayer;return"function"==typeof n?(n(t),t):(Array.isArray(n.extensions)||(n.extensions=[]),~n.extensions.indexOf(t)||n.extensions.push(t),t)}(Tn(),Mo),Uo=e=>0==e.volume||e.muted?"true":"false";class Default{constructor(e){St(e,oe,FlowplayerUi),St(e,Pe,FlowplayerErrorView),St(e,se,FlowplayerControls),St(e,le,FlowplayerLiveStatus),St(e,de,FlowplayerDuration),St(e,ue,FlowplayerTimelineBar),St(e,ce,FlowplayerElapsedTime),St(e,fe,FlowplayerVolumeBar),St(e,pe,FlowplayerVolumeControl),St(e,ae,FlowplayerControlButtons),St(e,he,FlowplayerHeader),St(e,ie,FlowplayerLogo),St(e,ge,FlowplayerHeaderDuration),St(e,me,class extends FlowplayerHeaderLeftRight{constructor(e){super(e,"fp-left",ge)}}),St(e,ye,class extends FlowplayerHeaderLeftRight{constructor(e){super(e,"fp-right fp-togglable",Oe,Ie)}}),St(e,Ee,FlowplayerMiddle),St(e,ve,FlowplayerMiddleZone),St(e,_e,FlowplayerMiddleWait),St(e,we,FlowplayerMiddleButtons),St(e,be,class extends FlowplayerLeftRightZone{constructor(e){super(e,"fp-right-zone")}}),St(e,Se,class extends FlowplayerLeftRightZone{constructor(e){super(e,"fp-left-zone")}}),St(e,ke,class extends FlowplayerIcon{constructor(e){super(e,eo),this.setAttribute("role","button")}}),St(e,Te,class extends FlowplayerIcon{constructor(e){super(e,to),this.setAttribute("role","button")}}),St(e,Ne,class extends FlowplayerIcon{constructor(e){super(e,$r),this.setAttribute("role","button")}}),St(e,Ae,class extends FlowplayerIcon{constructor(e){super(e,Zr),this.setAttribute("role","button")}}),St(e,Oe,class extends FullscreenIcon{constructor(e){super(e,Yr)}}),St(e,Ie,class extends FullscreenIcon{constructor(e){super(e,Xr)}}),St(e,Le,class extends FlowplayerIcon{constructor(e){super(e,no)}}),St(e,Re,class extends FlowplayerIcon{constructor(e){super(e,ro)}}),St(e,Ce,class extends FlowplayerIcon{constructor(e){super(e,Jr),this.classList.add("fp-volumebtn"),this.setAttribute("role","switch"),this.setAttribute("aria-checked",Uo(e)),e.on(k,()=>{this.setAttribute("aria-label",e.i18n("core.muted","Muted")),this.setAttribute("aria-checked",Uo(e))})}})}init(e,t,n){var r;Kr(e,0,n),Vr(e,t,n),r=n,"undefined"!=typeof window&&"ontouchstart"in window&&r.setState(at,!0),r.setState("is-accessibility",!1),po(n)}}return Default.pluginName="default",Mr.extensions.unshift.apply(Mr.extensions,[I18n,Do,Default]),Object.assign(Mr,{ui:Hr,i18n:I18n})});
