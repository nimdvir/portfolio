/*! 20240613-38-RELEASE */

(()=>{const t={nextUpSidePosition:"right",mobileVerticalPosition:"bottom",discoverButtonText:"Read Next Story",maxCarouselIterations:TRC.FloatingUnit.INFINITE_CAROUSEL_ITERATIONS,hideAfter:0,enableItemClickAfterNumOfMilliseconds:500,mobileOverlayHorizontalHeight:10,mobileOverlayVerticalWidth:2,desktopOverlayHorizontalHeight:22,desktopOverlayVerticalWidth:84,showNextUpAfterNumOfMilliseconds:5e3,carouselItemsDisplayInMilliseconds:7e3,verticalSpacingFromEdge:16,horizontalSpacingFromEdge:16,shouldHandleReadMore:!1};TRC._translationQueue=TRC._translationQueue||[],TRC._translationQueue.push({"next-up":{BTN_TEXT:t.discoverButtonText}});class e extends TRC.FloatingUnit{constructor(t,i,n,l){super(t,i,n,l),this.trcManager=i,this.carouselItemsIterationInterval=null,this.lastTransitionTimestamp=null,this.shouldSendSupplyFeature=TRC.util.isPercentEnabled(TRCImpl.global,"supply-feature-sample"),this.shouldSendSupplyFeature&&TRC.util.sendSupplyFeature(e.SUPPLY_FEATURE_TYPE,"AVAILABLE","next-up module loaded and available on page")}getPropertiesOverride(){const{response:{trc:t}={}}=this.placementData||{},{"video-list":e}=t||{},{"properties-override":i}=e||{};return i}getClientProperty(t){const e=this.placementData&&this.placementData.mode_name;return this.trcManager.getProperty(e,t,this.getPropertiesOverride())}checkIfShouldCarousel(){this.nextUpStaticUIEnabled=this.getClientProperty(e.CLIENT_PROPERTIES.STATIC_UI)&&this.isMobile;const t=-1===Number(this.carouselItemsDisplayInMilliseconds);return!t&&!this.nextUpStaticUIEnabled}static getArrowMarkup(){return`<svg class="tbl-arrow-icon arrow-1" viewBox="0 0 52 32">\n                <path d="M39.308 1.455h11.601l-24.852 29.091-24.602-29.091h12.25l12.352 14.545z"></path>\n            </svg>\n            <svg class="tbl-arrow-icon arrow-2" viewBox="0 0 52 32">\n                <path d="M39.308 1.455h11.601l-24.852 29.091-24.602-29.091h12.25l12.352 14.545z"></path>\n            </svg>`}static isIphoneX(){return navigator.userAgent.match("iPhone")&&2436===screen.height&&1125===screen.width}static getNextUpHeight(){let t=120;return"PHON"===TRC.platform_code&&(t=80,e.isIphoneX()&&(t+=15)),t}getFloatingUnitConfigs(e={}){const{nupOverlayConfig:i={}}=e;return{showNextUpAfterNumOfMilliseconds:e.showAfter||t.showNextUpAfterNumOfMilliseconds,carouselItemsDisplayInMilliseconds:e.carouselInterval||t.carouselItemsDisplayInMilliseconds,nextUpSidePosition:e.sidePosition||t.nextUpSidePosition,mobileVerticalPosition:e.mobileVerticalPosition||t.mobileVerticalPosition,discoverButtonText:e.btnText||TRC.translationManager.getLabel({feature:"next-up",label:"BTN_TEXT"})||t.discoverButtonText,hideFloatingUnitElemSelectorWidget:TRC.util.isDefined(e.hideNextUpPlacement)?`[data-placement-name='${e.hideNextUpPlacement}']`:"",hideFloatingUnitElemSelectorFeed:this.getNextUpHideElementSelector(),maxCarouselIterations:e.maxCarouselIterations||t.maxCarouselIterations,hideAfter:e.hideAfter||t.hideAfter,verticalSpacingFromEdge:e.verticalSpacingFromEdge||t.verticalSpacingFromEdge,horizontalSpacingFromEdge:e.horizontalSpacingFromEdge||t.horizontalSpacingFromEdge,enableItemClickAfterNumOfMilliseconds:i.enableItemClickAfterNumOfMilliseconds||t.enableItemClickAfterNumOfMilliseconds,mobileOverlayHorizontalHeight:i.mobileOverlayHorizontalHeight||t.mobileOverlayHorizontalHeight,mobileOverlayVerticalWidth:i.mobileOverlayVerticalWidth||t.mobileOverlayVerticalWidth,desktopOverlayHorizontalHeight:i.desktopOverlayHorizontalHeight||t.desktopOverlayHorizontalHeight,desktopOverlayVerticalWidth:i.desktopOverlayVerticalWidth||t.desktopOverlayVerticalWidth,shouldHandleReadMore:this.checkShouldHandleReadMore()||t.shouldHandleReadMore}}getNextUpHideElementSelector(){const t=this.trcManager.global["next-up-hide-element-selector"];return TRC.util.isDefined(t)?t:".tbl-feed-container"}checkShouldHandleReadMore(){const t=this.trcManager.global["enable-nextup-with-read-more"];return TRC.util.isTrue(t)}createFloatingUnitElement(){const t="PHON"!==TRC.platform_code?[{mouseenter:this.handleFloatingUnitHover.bind(this)},{mouseleave:this.resumeCarouselTimers.bind(this)}]:[],e="PHON"!==TRC.platform_code?`tbl-next-up-position-${this.config.nextUpSidePosition}`:"",i=`tbl-next-up-mobile-position-${this.config.mobileVerticalPosition}`,n="rtl"===this.trcManager.direction?"tbl-rtl":"",l=this.nextUpStaticUIEnabled?"tbl-next-up-static-ui":"";return TRC.FloatingUnit.createNewElement("div","tbl-next-up",`tbl-floating-unit tbl-next-up ${e} ${i} ${n} ${l}`,null,t)}createFloatingUnitHtml(){const t=this.createFloatingUnitElement(),i=e.createOverlayElement(),n=this.createCloseButtonElement();return t.appendChild(i),t.appendChild(n),t}static createOverlayElement(){const t=TRC.FloatingUnit.createNewElement("div",null,"tbl-nup-overlay-container"),e='<div class="tbl-nup-overlay-top tbl-nup-overlay-horizontal"></div>',i='<div class="tbl-nup-overlay-bottom tbl-nup-overlay-horizontal"></div>',n='<div class="tbl-nup-overlay-left tbl-nup-overlay-vertical"></div>',l='<div class="tbl-nup-overlay-right tbl-nup-overlay-vertical"></div>';return t.innerHTML=`${e}${l}${i}${n}`,t}setCSS(){const t=.2,i=.35,n=.1,l=t>i?t:i+n,o=`${l+.5}s`,r=`${this.config.verticalSpacingFromEdge}px`,a=`${this.config.horizontalSpacingFromEdge}px`,s=`${this.config.mobileOverlayHorizontalHeight}%`,p=`${this.config.mobileOverlayVerticalWidth}%`,d=`${this.config.desktopOverlayHorizontalHeight}px`,b=`${this.config.desktopOverlayVerticalWidth}px`,u=`${e.getNextUpHeight()}px`;TRC.dom.injectStyle(`\n                @-webkit-keyframes slideDownFade { 0% { opacity: 0; transform: translateY(-4px); } 50% { transform: translateY(0px); opacity: 1; } 100% { opacity: 0; transform: translateY(4px); } }\n                #tbl-next-up { position: fixed; background-color: #fff; bottom: 0; transition: .4s ease; width: 390px; height: ${u}; color: #2a2a2a; border-radius: 2px; box-sizing: border-box; box-shadow: 0 1px 12px 3px rgba(0, 0, 0, 0.14); z-index: 9999999999; cursor: default; } #tbl-next-up.tbl-floating-unit-disabled-clicks .tbl-next-up-inner { pointer-events: none; } #tbl-next-up.tbl-floating-unit-disabled-clicks .tbl-next-up-inner a { cursor: default; } #tbl-next-up .trc_related_container .trc_rbox_div { height: ${u}; overflow: hidden; } #tbl-next-up .trc_related_container .trc_rbox_div .videoCube { position: absolute; transform: translateY(${u}); transition: transform 0s ease ${o}; } #tbl-next-up .trc_related_container .trc_rbox_div .videoCube .item-thumbnail-href .thumbBlock_holder { margin-right: 20px; position: relative; transform: translateY(calc(2 * ${u})); overflow: hidden; transition: transform 0s ease ${o}; } #tbl-next-up .trc_related_container .trc_rbox_div .videoCube .item-label-href .video-label-box { background-color: #fff; height: ${u}; position: relative; padding-right: 26px; transform: translateY(calc(2 * ${u})); overflow: hidden; transition: transform 2s ease ${o}; } #tbl-next-up .trc_related_container .trc_rbox_div .videoCube.tbl-floating-unit-show-item { transform: translateY(0); transition: transform 0s; } #tbl-next-up .trc_related_container .trc_rbox_div .videoCube.tbl-floating-unit-show-item .item-thumbnail-href .thumbBlock_holder { transform: translateY(0); transition: transform ${t}s; } #tbl-next-up .trc_related_container .trc_rbox_div .videoCube.tbl-floating-unit-show-item .item-label-href .video-label-box { transform: translateY(0); transition: transform ${i}s ease ${n}s; } #tbl-next-up .tbl-nup-overlay-container div { position: absolute; z-index: 99; } #tbl-next-up .tbl-nup-overlay-container .tbl-nup-overlay-top { top: 0; right: 0; width: ${b}; height: ${d}; } #tbl-next-up.tbl-next-up-position-right { right: 0; transform: translate(-${a}, 1000px); } #tbl-next-up.tbl-next-up-position-left { left: 0; transform: translate(${a}, 1000px); } #tbl-next-up.in-viewport { transition-delay: 0.3s; } #tbl-next-up.in-viewport.tbl-next-up-position-right { transform: translate(-${a}, -${r}); } #tbl-next-up.in-viewport.tbl-next-up-position-left { transform: translate(${a}, -${r}); } #tbl-next-up .tbl-next-up-inner { height: 100%; border-radius: 2px; } #tbl-next-up .tbl-read-next-btn { position: absolute; bottom: 25px; right: 33px; background-color: #fff; color: #0071ce; padding: 4px 7px 4px 8px; font-size: 11px; font-weight: bold; border-radius: 2px; z-index: 10; cursor: pointer; } #tbl-next-up .tbl-read-next-btn span { width: 8px; position: relative; transform: rotate(-90deg); } #tbl-next-up .tbl-read-next-btn .arrow { position: relative; left: 6px; width: 8px; height: 20px; display: inline-block; vertical-align: middle; margin-left: 3px; } #tbl-next-up .tbl-read-next-btn .arrow .tbl-arrow-icon { width: 8px; height: 10px; position: absolute; transform: translateY(0); fill: #0071ce; -webkit-animation-duration: 2s; animation-duration: 2s; -webkit-animation-fill-mode: both; animation-fill-mode: both; -webkit-animation-iteration-count: infinite; animation-iteration-count: infinite; } #tbl-next-up .tbl-read-next-btn .arrow .arrow-2 { -webkit-animation-delay: 1s; animation-delay: 1s; } #tbl-next-up .tbl-read-next-btn:hover { background: #0071ce; color: #fff; } #tbl-next-up .tbl-read-next-btn:hover .arrow .tbl-arrow-icon { fill: #fff; -webkit-animation-name: slideDownFade; animation-name: slideDownFade; } #tbl-next-up:hover .tbl-next-up-closeBtn-wrapper .tbl-next-up-closeBtn { visibility: visible; opacity: 1; } #tbl-next-up .tbl-next-up-closeBtn-wrapper { position: absolute; top: -28px; right: -20px; width: 50px; height: 33px; } #tbl-next-up .tbl-next-up-closeBtn-wrapper .tbl-next-up-closeBtn { position: absolute; top: 0; right: 10px; height: 24px; padding: 0 12px; visibility: hidden; opacity: 0; cursor: pointer; } #tbl-next-up .tbl-next-up-closeBtn-wrapper .tbl-next-up-closeBtn svg { display: block; height: 100%; fill: #979797; } #tbl-next-up.tbl-rtl .tbl-read-next-btn { right: auto; left: 33px; padding-left: 2px; } #tbl-next-up.tbl-rtl .tbl-read-next-btn span { transform: rotate(90deg); } #tbl-next-up.tbl-rtl .tbl-read-next-btn .arrow { left: auto; margin-left: 0; margin-right: 11px; } #tbl-next-up.tbl-rtl .trc_related_container .trc_rbox_div .videoCube .item-thumbnail-href .thumbBlock_holder { margin-right: 0; margin-left: 20px; } #tbl-next-up.tbl-rtl .trc_related_container .trc_rbox_div .videoCube .item-label-href .video-label-box { padding-right: 0; padding-left: 26px; } @media screen and (min-width: 0) and (max-width: 812px) { #tbl-next-up { width: 100vw; height: ${u}; left: 0; border-radius: 0; overflow: hidden; } #tbl-next-up.tbl-next-up-static-ui { height: calc(${u} * 2 + 5px); overflow: visible; } #tbl-next-up.tbl-next-up-static-ui .trc_related_container .trc_rbox_div { height: calc(${u} * 2 + 5px); } #tbl-next-up.tbl-next-up-static-ui .trc_related_container .trc_rbox_div:after { content: ''; background: #C6C6C6; height: 1px; width: 100%; top: calc(${u} + 2px); position: absolute; } #tbl-next-up.tbl-next-up-static-ui .trc_related_container .trc_rbox_div .videoCube { height: ${u}; } #tbl-next-up.tbl-next-up-static-ui .trc_related_container .trc_rbox_div .videoCube .item-label-href .video-label-box { height: ${u}; } #tbl-next-up.tbl-next-up-static-ui .trc_related_container .trc_rbox_div .videoCube:nth-child(2) { transform: translateY(calc(5px + ${u})); } #tbl-next-up.tbl-next-up-static-ui .tbl-next-up-closeBtn-wrapper { width: 48px; height: 48px; top: -24px; } #tbl-next-up.tbl-next-up-static-ui .tbl-next-up-closeBtn-wrapper .tbl-next-up-closeBtn { right: 5px; width: 20px; height: 20px; padding: 0; top: 14px; background-image: url("data:image/svg+xml,%3Csvg width='20' height='20' viewBox='0 0 20 20' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Crect width='20' height='20' fill='transparent'/%3E%3Ccircle cx='10' cy='10' r='9.5' fill='%23FDFDFD' stroke='%23C6C6C6'/%3E%3Cpath d='M7.19727 5.04688L10 9.25098L12.8096 5.04688H13.8076L10.5127 9.94824L13.9102 15H12.9053L10 10.6592L7.09473 15H6.09668L9.49414 9.94824L6.19922 5.04688H7.19727Z' fill='%23C6C6C6'/%3E%3C/svg%3E"); } #tbl-next-up.tbl-next-up-static-ui .tbl-next-up-closeBtn-wrapper .tbl-next-up-closeBtn svg { display: none; width: 20px; height: 20px; right: 0; } #tbl-next-up.tbl-next-up-static-ui.tbl-rtl .tbl-next-up-closeBtn-wrapper .tbl-next-up-closeBtn { right: unset; left: 5px; } #tbl-next-up.tbl-next-up-mobile-position-bottom { top: auto; bottom: calc(${r} - 16px); transform: translateY(300px); } #tbl-next-up.tbl-next-up-mobile-position-top { top: calc(${r} - 16px); bottom: auto; transform: translateY(-300px); } #tbl-next-up .tbl-next-up-inner { border-radius: 0; } #tbl-next-up.tbl-floating-unit.in-viewport { transform: translateY(0px); } #tbl-next-up .tbl-next-up-closeBtn-wrapper { width: 48px; height: 48px; z-index: 2000; top: 0; right: 0; visibility: unset; opacity: unset; } #tbl-next-up .tbl-next-up-closeBtn-wrapper .tbl-next-up-closeBtn { width: 30px; height: 30px; right: 0; visibility: unset; opacity: unset; } #tbl-next-up .tbl-next-up-closeBtn-wrapper .tbl-next-up-closeBtn svg { position: absolute; right: 10px; z-index: -1; } #tbl-next-up.tbl-rtl .tbl-next-up-closeBtn-wrapper { right: unset; left: 0; } #tbl-next-up.tbl-rtl .tbl-next-up-closeBtn-wrapper .tbl-next-up-closeBtn { right: unset; left: 0; } #tbl-next-up .tbl-read-next-btn { display: none; } #tbl-next-up .tbl-nup-overlay-container .tbl-nup-overlay-horizontal { width: 100%; height: ${s}; left: 0; } #tbl-next-up .tbl-nup-overlay-container .tbl-nup-overlay-vertical { width: ${p}; height: 100%; top: 0; } #tbl-next-up .tbl-nup-overlay-container .tbl-nup-overlay-top { top: 0; right: auto; } #tbl-next-up .tbl-nup-overlay-container .tbl-nup-overlay-bottom { bottom: 0; } #tbl-next-up .tbl-nup-overlay-container .tbl-nup-overlay-left { left: 0; } #tbl-next-up .tbl-nup-overlay-container .tbl-nup-overlay-right { right: 0; } }\n            `,null)}onItemVisible(t){const i=this.widgetItems.indexOf(t)+1,{itemId:n}=t.dataset;TRC.util.sendSupplyFeature(e.SUPPLY_FEATURE_TYPE,"VISIBLE","item visible",`${i}`,`${n}`)}getObserverConfig(t){return{targetElement:t,threshold:[.5],onEnter:()=>{this.onItemVisible(t),TRC.intersections.unobserve(t.getAttribute(e.DEFAULT_CONFIG.OBSERVER_ATTRIBUTE)),t.removeAttribute(e.DEFAULT_CONFIG.OBSERVER_ATTRIBUTE)}}}getWidgetItems(){const t=this.floatingUnitElement.getElementsByClassName("videoCube");if(t.length>0){for(let i=0;i<t.length;i++)if(t[i].style.zIndex=20-i,TRC.dom.addClass(t[i],"tbl-next-up-widget-item"),TRC.dom.on(t[i],"transitionend",this.removeEventItemClickOverlay.bind(this)),t[i].getElementsByClassName("video-label-box")[0].appendChild(this.createReadNextBtn()),this.widgetItems.push(t[i]),this.shouldSendSupplyFeature){const n=TRC.intersections.observe(this.getObserverConfig(t[i]));t[i].setAttribute(e.DEFAULT_CONFIG.OBSERVER_ATTRIBUTE,n)}TRC.dom.addClass(t[0],TRC.FloatingUnit.CSS_CLASSES.SHOW),this.nextUpStaticUIEnabled&&t[1]&&TRC.dom.addClass(t[1],TRC.FloatingUnit.CSS_CLASSES.SHOW)}return t.length}createReadNextBtn(){const t=`${this.config.discoverButtonText}<span class="arrow">${e.getArrowMarkup()}</span>`;return TRC.FloatingUnit.createNewElement("div","read-next","tbl-read-next-btn",t)}removeEventItemClickOverlay(t){const e=t.currentTarget;e.className.indexOf(TRC.FloatingUnit.CSS_CLASSES.SHOW)>-1&&this.removeClickOverlay()}getVisibleItemIndex(){let t=-1;return this.widgetItems.forEach((e,i)=>{TRC.dom.containsClass(e,TRC.FloatingUnit.CSS_CLASSES.SHOW)&&(t=i+1)}),t}handleCloseBtnClick(){const t=this.getVisibleItemIndex();super.handleCloseBtnClick.apply(this,arguments),this.shouldSendSupplyFeature&&TRC.util.sendSupplyFeature(e.SUPPLY_FEATURE_TYPE,"CLOSED","close button clicked! with item number",`${t}`)}shouldDisplayNextUp(){return!(this.state.floatingUnitIsVisible||this.disableFloatingUnit||this.state.feedInViewport||this.isVideoSliderActive||this.shouldHideUnitIfReadMoreVisible())&&(this.floatingUnitElement&&this.isWidgetWithItems())}onShowNextUp(){const{floatingUnitFirstShown:t}=this.state,e=t?`${TRC.FloatingUnit.CSS_CLASSES.DISABLED_CLICKS} in-viewport`:"in-viewport";TRC.dom.addClass(this.floatingUnitElement,e),this.state.floatingUnitIsVisible=!0,this.playCarousel(),t&&this.removeClickOverlay()}initWidgetItems(){0===this.widgetItems.length&&this.getWidgetItems()}addNextUpTrigger(){setTimeout(()=>{this.shouldDisplayNextUp()&&(this.config.shouldHandleReadMore&&this.readMoreClickListener&&this.readMoreClickListener.remove(),this.onShowNextUp(),this.state.floatingUnitFirstShown=!0)},this.state.floatingUnitFirstShown?0:this.config.showNextUpAfterNumOfMilliseconds)}showFloatingUnit(){this.shouldDisplayNextUp()&&(this.initWidgetItems(),this.addNextUpTrigger())}}e.CLIENT_PROPERTIES={STATIC_UI:"nextUpWidget-static-ui"},e.SUPPLY_FEATURE_TYPE="NEXT_UP",e.DEFAULT_CONFIG={OBSERVER_ATTRIBUTE:"next-up-observer"},TRC.NextUpWidget=e})();